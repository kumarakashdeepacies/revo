<!DOCTYPE html>

{% extends extend_template %}
{% load crispy_forms_tags %}
{% load static %}

{% block body_block %}
<!--Official dataTables default  CSS FILE-->
<link rel="stylesheet" href="{% static 'css/KoreD/jquery.dataTables.css' %}">
<link rel="stylesheet" href="{% static 'vendor/Base_theme/datatables-responsive/css/responsive.bootstrap4.min.css' %}">
<link rel="stylesheet" href="{% static 'vendor/Base_theme/datatables-colreorder/css/colReorder.bootstrap4.min.css' %}">
<link rel="stylesheet" href="{% static 'css/KoreD/buttons.dataTables.min.css' %}">

<link rel="stylesheet" href="{% static 'New_Grapejs/grapesjs/dist/css/toastr.min.css' %}">
<link rel="stylesheet" href="{% static 'New_Grapejs/grapesjs/dist/css/grapes.min.css' %}" />
<link rel="stylesheet" href="{% static 'New_Grapejs/grapesjs/dist/css/grapesjs-preset-webpage.min.css' %}">
<link rel="stylesheet" href="{% static 'New_Grapejs/grapesjs/dist/css/tooltip.css' %}">
<link rel="stylesheet" href="{% static 'New_Grapejs/grapesjs/dist/css/demos.css' %}">
<link rel="stylesheet" href="{% static 'New_Grapejs/grapesjs/dist/css/grapick.min.css' %}" >

<!-- DataTables -->
<script src="{% static 'vendor/Base_theme/datatables/jquery.dataTables.js' %}"></script>
<script src="{% static 'vendor/Base_theme/datatables-responsive/js/dataTables.responsive.min.js' %}"></script>
<script src="{% static 'vendor/Base_theme/datatables-fixedheader/js/dataTables.fixedHeader.min.js' %}"></script>
<script src="{% static 'vendor/Base_theme/datatables-colreorder/js/dataTables.colReorder.min.js' %}"></script>
<script src="{%static 'vendor/Base_theme/datatables-bs4/js/dataTables.bootstrap4.js'%}"></script>

<script src="{%static 'vendor/Base_theme/datatables-buttons/js/dataTables.buttons.min.js'%}"></script>
<script src="{%static 'vendor/Base_theme/jszip/jszip.min.js'%}"></script>
<script src="{%static 'vendor/Base_theme/pdfmake/pdfmake.min.js'%}"></script>
<script src="{%static 'vendor/Base_theme/pdfmake/vfs_fonts.js'%}"></script>
<script src="{%static 'vendor/Base_theme/datatables-buttons/js/buttons.html5.min.js'%}"></script>
<script src="{%static 'vendor/Base_theme/datatables-buttons/js/buttons.colVis.min.js'%}"></script>

 <!-- Date Range Picker -->
 <script type="text/javascript" src="{%static 'moment/moment.min.js'%}"></script>
 <script type="text/javascript" src="{%static 'daterangepicker/js/daterangepicker.min.js'%}"></script>
 <link rel="stylesheet" href="{%static 'daterangepicker/css/daterangepicker.css'%}">
 <script type="text/javascript" src="{% static 'js/Kore_TI_js/htmlGeneratorScript.min.js' %}"></script>

<!-- Ckeditor -->
<script src="{% static 'js/ckeditor/ckeditor.js' %}"></script>

<script src="{% static 'New_Grapejs/grapesjs/dist/toastr.min.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapes.min.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapesjs-preset-webpage.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapesjs-blocks-basic.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapesjs-plugin-forms.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapesjs-component-countdown.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapesjs-plugin-export.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapesjs-tabs.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapesjs-custom-code.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapesjs-touch.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapesjs-parser-postcss.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapesjs-tooltip.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapesjs-tui-image-editor.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapesjs-typed.js' %}"></script>
<script src="{% static 'New_Grapejs/grapesjs/dist/grapesjs-style-bg.js' %}"></script>

<!-- CytoScape Grape Library -->
<script src="{% static 'vendor/cytoscape/cytoscape.min.js' %}"></script>
<script src="{% static 'vendor/cytoscape/dagre.min.js' %}"></script>
<script src="{% static 'vendor/cytoscape/cytoscape-dagre.min.js' %}"></script>

<style>
g     :root {
  --primary-color:#d4af37;
  --secondary-color:black;
  --font-color: #000000;
  --font-hover-color: #ffffff;
  }

  @media (max-width: 480px) {
    .custom_category{
      flex-direction: column;
    }
    .custom_category .col-5, .custom_category .col-7{
      max-width: unset;
    }
    .custom_category .col-3{
      flex: unset;
      max-width: 40%;
    }
    .custom_category .col-9{
      flex: unset;
      max-width: 60%;
    }

    #listViewButtonEmbededComputationId {
      margin-left: 1rem;
    }

  }

  @media (max-width: 768px) {
    .custom_category{
      flex-direction: column;
    }
    .custom_category .col-5, .custom_category .col-7{
      max-width: unset;
    }
  }

  .modal-customLarge{
        width: 85% !important;
        height: auto;
        margin-left: 10rem;
        margin-top:1% ;
        padding: 0 !important;
        max-width:none !important;

  }
  .select2-container--default .select2-selection--multiple .select2-selection__rendered li{
    list-style: none;
    color: var(--primary-color);
  }
  .checkboxinput custom-control-input notRequired{
    margin-left: 0rem;
  }
</style>
<style type="text/css">

  #iconselect,#newiconselect{
    font-family: 'FontAwesome', 'sans-serif';
    width: 100%;
    height: 38px;
  }
    .newwid .icon-add-comp::before,
    .icon-comp100::before,
    .icon-comp50::before,
    .icon-comp30::before,
    .icon-rm::before {
      content: "";
    }
    .icon-add-comp {
      background: url("{% static 'images/grapejs/icon-sq-a.png' %}") no-repeat center;
    }
    .icon-comp100 {
      background: url("{% static 'images/grapejs/icon-sq-1.png' %}") no-repeat center;
    }
    .icon-comp50 {
      background: url("{% static 'images/grapejs/icon-sq-2.png' %}") no-repeat center;
    }
    .icon-comp30 {
      background: url("{% static 'images/grapejs/icon-sq-3.png' %}") no-repeat center;
    }
    .icon-rm {
      background: url("{% static 'images/grapejs/icon-sq-r.png' %}") no-repeat center;
    }

    .icons-flex {
      background-size: 70% 65% !important;
      height: 15px;
      width: 17px;
      opacity: 0.9;
    }
    .icon-dir-row {
      background: url("{% static 'images/grapejs/flex-dir-row.png' %}") no-repeat
        center;
    }
    .icon-dir-row-rev {
      background: url("{% static 'images/grapejs/flex-dir-row-rev.png' %}") no-repeat
        center;
    }
    .icon-dir-col {
      background: url("{% static 'images/grapejs/flex-dir-col.png' %}") no-repeat
        center;
    }
    .icon-dir-col-rev {
      background: url("{% static 'images/grapejs/flex-dir-col-rev.png' %}") no-repeat
        center;
    }
    .icon-just-start {
      background: url("{% static 'images/grapejs/flex-just-start.png' %}") no-repeat
        center;
    }
    .icon-just-end {
      background: url("{% static 'images/grapejs/flex-just-end.png' %}") no-repeat
        center;
    }
    .icon-just-sp-bet {
      background: url("{% static 'images/grapejs/flex-just-sp-bet.png' %}") no-repeat
        center;
    }
    .icon-just-sp-ar {
      background: url("{% static 'images/grapejs/flex-just-sp-ar.png' %}") no-repeat
        center;
    }
    .icon-just-sp-cent {
      background: url("{% static 'images/grapejs/flex-just-sp-cent.png' %}") no-repeat
        center;
    }
    .icon-al-start {
      background: url("{% static 'images/grapejs/flex-al-start.png' %}") no-repeat
        center;
    }
    .icon-al-end {
      background: url("{% static 'images/grapejs/flex-al-end.png' %}") no-repeat
        center;
    }
    .icon-al-str {
      background: url("{% static 'images/grapejs/flex-al-str.png' %}") no-repeat
        center;
    }
    .icon-al-center {
      background: url("{% static 'images/grapejs/flex-al-center.png' %}") no-repeat
        center;
    }

    [data-tooltip]::after {
      background: rgba(51, 51, 51, 0.9);
    }

    .gjs-pn-commands {
      min-height: 40px;
    }

    #gjs-sm-float,
    .gjs-pn-views .fa-cog {
      display: none;
    }

    .gjs-am-preview-cont {
      height: 100px;
      width: 100%;
    }

    .gjs-logo-version {
      background-color: #756467;
    }

    .gjs-pn-panel.gjs-pn-views {
      padding: 0;
      border-bottom: none;
    }
    .gjs-pn-panel#gjs-pn-views-container, .gjs-pn-panel.gjs-pn-views-container {
        height: calc(95%);
    }
    .code-panel{
      display:flex;
      background: #343a40;
    }
    .gjs-block:hover {
      color: var(--primary-color);
    }
    .gjs-pn-btn.gjs-pn-active {
      box-shadow: none;
    }
    .gjs-pn-buttons {
      height: auto;
      color:whitesmoke;
    }
    .gjs-pn-btn:hover {
      color: var(--primary-color);
    }

    .gjs-pn-views .gjs-pn-btn {
      margin: 0;
      height: 40px;
      padding: 10px;
      width: 33.3333%;
      border-bottom: 2px solid rgba(0, 0, 0, 0.3);
    }

    .grp-handler-close {
      background-color: transparent;
      color: #ddd;
    }

    .grp-handler-cp-wrap {
      border-color: transparent;
    }
    .gjs-pn-btn {
      font-size:1.5em;
    }
    .gjs-pn-panel,.gjs-block,.gjs-blocks-c,.gjs-title,.gjs-block-category,.gjs-layer,.gjs-layer-title-c,.gjs-clm-tags,.gjs-sm-sectors,.gjs-sm-property,.gjs-sm-properties,.gjs-trt-trait,.gjs-three-bg{
      background-color: #343a40;
      color: whitesmoke;
    }
    .gjs-four-color {
      color:var(--primary-color);
    }
    .gjs-sm-clear {
      color: whitesmoke;
    }
    .gjs-mdl-content,.gjs-mdl-header{
      color: var(--primary-color);
      background-color: whitesmoke;
    }
    .gjs-cm-title{
      color: var(--primary-color);
    }
    [data-tooltip]::after {
      background: #343a40;
      color: whitesmoke;
      font-family:Arial, Helvetica, sans-serif;
  }
  .gjs-clm-header select option{
    background: #343a40;
    color: whitesmoke;
  }
  .gjs-sm-property select option{
    background: #343a40;
    color: whitesmoke;
  }
  .setting {
    margin-left:15px;
  }
  .gjs-pn-panel {
    display: block;
  }
  .color-checkspanMultiple{
    height: 25px;
    width: 22px;
    border-radius: 5px;
    margin: 7px 4px;
  }
  #viewMultiple,
  #viewCMultiple {
      color: black;
      height: 60px;
      width: 60px;
      border-radius: 100%;
    }
    #morecolorsMultiple .right #hexCMultiple {
      font-size: 11px;
    }

    #morecolorsMultiple .right #viewCMultiple {
      height: 50px;
      width: 50px;
    }
  .color-checkspan {
    height: 25px;
    width: 22px;
    border-radius: 5px;
    margin: 7px 4px;
  }

  .more_colors {
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    text-transform: capitalize;
    margin-bottom: 20px;
  }

  .more_colors:hover {
    box-shadow: 1px 1px 10px #c5c5c0;
  }
  .colorpicker {
    width: 234px
  }
  .main-container {
    position: relative;
    text-align: center;
  }

  #morecolors .right #hexC {
    font-size: 11px;
  }

  #morecolors .right #viewC {
    height: 50px;
    width: 50px;
  }
  .right {

    position: absolute;
    right: 4px;
    bottom: 2px;

  }
  #view,
  #viewC {
      color: black;
      height: 60px;
      width: 60px;
      border-radius: 100%;
    }
    .icons {
      height: 32px;
      padding: 0;
    }

    .icons i {
      padding: 3px !important;
    }
    ul[class^="icon-picker-list"] {
      display: flex;
      flex-flow: row wrap;
      list-style: none;
      padding-left: 0;
      padding-right: 5px;
      justify-content: flex-start;
    }

    ul[class^="icon-picker-list"] li {
      width: 16%;
      margin-bottom: 5px;
    }

    ul[class^="icon-picker-list"] a {
      background-color: #f9f9f9;
      border: 1px solid #fff;
      color: black;
      display: block;
      flex: 1 1 auto;
      font-size: 20px;
      line-height: 1.4;
      min-height: 50px;
      padding: 10px;
      text-align: center;
      user-select: none;
    }

    ul[class^="icon-picker-list"] .fa {
      font-size: 24px;
      margin-bottom: 10px;
      margin-top: 5px;
    }

    ul[class^="icon-picker-list"] .name-class {
      display: block;
      text-align: center;
      word-wrap: break-word;
    }
    .processThemeModalswitch-container {
  width: 4em;
  height: 2em;
  border-radius: 10em;
  box-shadow: 2px 0px 10px 0px #cfd8dc;
  position: relative;
}
.processThemeModalswitch-color {
  width: 3.45em;
  height: 1.8em;
  left: 0.1em;
  top: 0.1em;
  background: #cfd8dc;
  border-radius: 10em;
  z-index: 0;
  position: absolute;
  transition: all 500ms cubic-bezier(0.34, 1.36, 0.2, 1);
}
.processThemeModalswitch-color .processThemeModaltrigger-label{
  height: 100%;
  width: 100%;
  margin: 0;
  cursor: pointer;
}
.processThemeModalswitch-container label.processThemeModalswitch-label {
  width: 1.6em;
  height: 1.6em;
  border-radius: 10em;
  background: white;
  position: absolute;
  top: 0.15em;
  left: 0.2em;
  box-shadow: 2px 2px 10px 2px #cfd8dc;
  z-index: 99;
  cursor: pointer;
}
.processThemeModalswitch-container.items-check{
  width: 3em;
  height: 1.5em;

}
.items-check .processThemeModalswitch-color {
  width: 2.8em;
  height: 1.25em;
  top: 9.15%;
}
.processThemeModalswitch-container.items-check label.processThemeModalswitch-label {
  width: 1.1em;
  height: 1.1em;
  top: 0.2em;
}
.items-check .processThemeModalswitch:checked ~ label.processThemeModalswitch-label {
  transform: translatex(1.5em) rotatez(360deg);
  box-shadow: 2px 2px 10px 2px #ffffff;
}
.items-check + .form-check-label{
  font-family: arial;
  font-weight: bold;
  font-size: 1em;
  margin-left: 3%;
  margin-bottom: 0%;
  padding: 0;
}
.processThemeModalswitch {
  position: relative;
  display: inline-block;
  width: 35px;
  height: 20px;
}

.processThemeModalswitch input {
  opacity: 0;
  width: 0;
  height: 0;
}
.ui-sortable-handle{
  height: auto
}
.sortable-order.paginationrow_colorder{
  max-height: 300px;
  overflow: auto;
}
.nav-tabs.flex-column.customMeassagesNav {
  border: 1px solid #dee2e6;
  border-radius: 0;
}
.nav-tabs.flex-column.customMeassagesNav .nav-link{
  padding: 0.8rem .6rem;
}
.customMeassagesNav .dropdown-divider{
  margin: unset;
}
.nav-tabs.flex-column.customMeassagesNav .nav-link:focus, .nav-tabs.flex-column.customMeassagesNav .nav-link:hover {
  border-color: #e9ecef;
}

.btn-container {
  display: flex;
  flex-wrap: wrap;
  margin-left: -5px; /* Add some negative margin for spacing between buttons */
}

.btn-container button {
  margin: 5px; /* Add margin to each button */
}
.placeholder-buttons{
  margin-bottom: 1rem;
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
}
@media screen and (max-width: 1500px) {
  .btn {
    font-size: 12px; /* Adjust the font size as needed */
    margin: 5px 5px 5px 5px; /* Adjust the top and bottom margin for spacing */
  }
  @media screen and (max-width: 1025px) {
    .placeholder-buttons button{
      width: 30%;
    }
  }
  @media screen and (max-width: 769px) {
    .placeholder-buttons button{
      width: 45%;
    }
  }
}

  </style>
<!-- Modal for Add Url button -->
<div class="modal fade" id="addurl" role="dialog" aria-labelledby="addurl" aria-hidden="true" style="position: fixed;z-index: 3000;">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add url in instructions field</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p style="font-weight: bold;">Add text:</p>
        <input type="text" id="url_text1" class="form-control">
        <label for="url_Dropdown">Select an option:</label>
        <select class="select2 form-control" id="instructions_url_dropdown">
            <option class="form-control" value="">Select</option>
            <option class="form-control" value="addman">Add manually</option>
            <option class="form-control" value="inapp">In-app url</option>
        </select>
        <br>
        <div id="manaddlink" style="display: none;">
          <p style="font-weight: bold;padding-top:9px;">Add link:</p>
          <input type="text" class="form-control" id="insurl_link">
          <p style="font-weight: bold;padding-top:3px;">Select link-text color :</p>
          <input type="color" class="form-control stylingJsBorderColorInput" data-css="border-color" id="insurl_link_color">
          <div class=row>
            &nbsp;&nbsp;<input type="checkbox" id="manurltype" name="urltype">&nbsp;&nbsp;
            <label for="urltype" style="padding-top: 10px;"> Open in new screen.</label>
          </div>
        </div>
        <div id="inapplink" style="display: none;">
            <div id="inappdiv">
                <label>App:</label>
                <select class="select2 form-control" id="select_app_hyperlink">
                    <option value="1" id="se_app">Select App</option>
                </select>
                <label class="pt-3">Process:</label>
                <select class="select2 form-control" id="select_process_hyperlink">
                    <option value="" id="se_process">Select process</option>
                </select>
                <label class="pt-3">Subprocess:</label>
                <select class="select2 form-control" id="select_subprocess_hyperlink">
                    <option value="">Select subprocess</option>
                </select>
                <p style="font-weight: bold;padding-top:9px;">Select link-text color :</p>
                <input type="color" class="form-control stylingJsBorderColorInput" data-css="border-color"
                    id="insurl_inapp_link_color">
                <div class=row>
                  &nbsp;&nbsp;<input type="checkbox" id="inurltype" name="inurltype">&nbsp;&nbsp;
                  <label for="inurltype" style="padding-top: 10px;"> Open in new screen.</label>
                </div>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" id="save_url">Save changes</button>
      </div>
    </div>
  </div>
</div>
<div class="modal modal fade" id="processThemeModal" tabindex="-1" role="dialog" data-focus="false"
  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header border-0">
        <h5 class="modal-title" id="modal-title">Configure Sub-Process theme</h5>
        <i class="fa-solid fa-sliders fa-5x"></i>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <label>Selected theme will be applied to the current process and will override the global theme</label>
          <div class="row mb-4">
            <div class="col-4 mt-2">
              <select class="form-control select2" name="processThemeVal" id="processThemeVal">
                <option value="" selected>Select theme</option>
              </select>
            </div>
          </div>
          <div>
            <div class="form-group">
              <div id="div_id" class="form-check" style="padding-left: 0px;">
                <div class="d-flex align-items-center justify-content-start">
                  <div class="processThemeModalswitch-container items-check remember-check">
                    <input type="checkbox" name="remember" class="checkboxinput form-check-input  switch" id="showNavbar" checked>
                    <div class="processThemeModalswitch-color switch-color">
                      <label class="processThemeModaltrigger-label" for="showNavbar">
                      </label>
                    </div>
                    <label class="processThemeModalswitch-label switch-label" for="showNavbar"></label>
                  </div>
                  <label for="showNavbar" class="form-check-label">Do you want a Navbar?</label>
                </div>
               </div>
              </div>
              <div class="form-group">
                <div id="div_id" class="form-check" style="padding-left: 0px;">
                  <div class="d-flex align-items-center justify-content-start">
                    <div class="processThemeModalswitch-container items-check remember-check">
                      <input type="checkbox" name="remember" class="checkboxinput form-check-input  switch" id="showSidebar" checked>
                      <div class="processThemeModalswitch-color switch-color">
                        <label class="processThemeModaltrigger-label " for="showSidebar">
                        </label>
                      </div>
                      <label class="processThemeModalswitch-label switch-label" for="showSidebar"></label>
                    </div>
                    <label for="showSidebar" class="form-check-label">Do you want a Sidebar?</label>
                  </div>
                 </div>
                </div>
                <div class="form-group">
                  <div id="div_id" class="form-check" style="padding-left: 0px;">
                    <div class="d-flex align-items-center justify-content-start">
                      <div class="processThemeModalswitch-container items-check remember-check">
                        <input type="checkbox" name="remember" class="checkboxinput form-check-input switch" id="showFooter" checked>
                        <div class="processThemeModalswitch-color switch-color">
                          <label class="processThemeModaltrigger-label" for="showFooter">
                          </label>
                        </div>
                        <label class="processThemeModalswitch-label switch-label" for="showFooter"></label>
                      </div>
                      <label for="showFooter" class="form-check-label">Do you want a Footer?</label>
                    </div>
                   </div>
                  </div>
          </div>
        </div>
        <div class="modal-footer d-flex justify-content-between p-0 border-0">
          <button onclick="processThemeSave()" type="button" class="buttonfooter">Save <i class="fa-solid fa-floppy-disk pl-2"></i></button>
          <button  type="button" class="buttonfooter" data-dismiss="modal" aria-label="Close" class="buttonfooter">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Process flow design Modal -->
<div class="modal fade" id="process_flow_design_Modal">
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Process flow design</h5>
      </div>
      <div class="modal-body">
        <select class="pr_codes" multiple></select>
        <div class="row">
        <div class="col-6" style="margin-top: 10px;">
          <p style="font-weight: bold;">Font size:</p>
          <input type="number" class="form-control numberinput" data-css="font-size">
        </div>
        <div class="col-6" style="margin-top: 10px;">
          <p style="font-weight: bold;">Font color:</p>
          <input type="color" value="#000000" class="form-control" data-css="font-color">
        </div>
        <div class="col-6" style="margin-top: 10px;">
          <p style="font-weight: bold;">Text Inside shape or oustide:</p>
          <select  class="shapes_options_text select2 form-control" data-css="shapes_options_text">
            <option value="" selected disabled>Select Text inside or outside Shape</option>
            <option value="inside">Inside</option>
            <option value="outside">Outside</option>
          </select>
        </div>
        <div class="col-6" style="margin-top: 10px;">
          <p style="font-weight: bold;">Shapes:</p>
          <select  class="shapes_options select2 form-control" data-css="shapes_options">
            <option value="" selected disabled>Select Shape</option>
            <option value="ellipse">ellipse</option>
            <option value="triangle">triangle</option>
            <option value="round-triangle">round-triangle</option>
            <option value="rectangle">rectangle</option>
            <option value="round-rectangle">round-rectangle</option>
            <option value="bottom-round-rectangle">bottom-round-rectangle</option>
            <option value="cut-rectangle">cut-rectangle</option>
            <option value="barrel">barrel</option>
            <option value="rhomboid">rhomboid</option>
            <option value="diamond">diamond</option>
            <option value="round-diamond">round-diamond</option>
            <option value="pentagon">pentagon</option>
            <option value="round-pentagon">round-pentagon</option>
            <option value="hexagon">hexagon</option>
            <option value="round-hexagon">round-hexagon</option>
            <option value="concave-hexagon">concave-hexagon</option>
            <option value="heptagon">heptagon</option>
            <option value="round-heptagon">round-heptagon</option>
            <option value="octagon">octagon</option>
            <option value="round-octagon">round-octagon</option>
            <option value="star">star</option>
            <option value="tag">tag</option>
            <option value="round-tag">round-tag</option>
            <option value="vee">vee</option>
            <option value="polygon">polygon</option>
          </select>
        </div>
        <div class="col-6" style="margin-top: 10px;">
          <p style="font-weight: bold;">Shape height:</p>
          <input type="number" class="form-control numberinput" data-css="shape_height">
        </div>
        <div class="col-6" style="margin-top: 10px;">
          <p style="font-weight: bold;">Shape width:</p>
          <input type="number" class="form-control numberinput" data-css="shape_width">
        </div>
      </div>
      <div class="card-header">
        <div class="float-right" style="margin-right: 6px;">
          <button onclick="textStepProcessFlowDesign(this)" class="btn btn-primary" type="button">Text for particular step <i class="fas fa-plus populateoption" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
        </div>
      </div>
      <div class="text-card"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="process_flow_design_Modal_close(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="process_flow_design_Modal_save(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Process flow design Modal end -->
<!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> -->
<section class="content">
<div class="graphContainer" id="graphContainerID">
  <div class="progress" style="width: auto;height:25px;position: absolute;width: 94%; left:6%;">
    <div class="progress-bar col-2" role="progressbar" style="width: auto;text-align: left; padding-left: 20px" id="PN1">
    </div>
    <div class="progress-bar col-2" role="progressbar" style="width: auto;text-align: left;" id="PN2">
    </div>
    <div class="progress-bar col-1" role="progressbar" style="width: auto;text-align: left;" id="PN2">
      <button class="schedulerFlowType" style="background-color: transparent;border: transparent;color:var(--font-hover-color);">Scheduled flow</button>
    </div>
    <div class="progress-bar col-2" role="progressbar" style="width: auto;text-align: left;" id="PN2">
      <button class="l3Design" style="background-color: transparent;border: transparent;color:var(--font-hover-color);" id="processThemeData" onclick="processTheme()">
        Configure Sub-Process theme
      </button>
    </div>
    <div class="progress-bar col-2" role="progressbar" style="width: auto;text-align: left;" id="PN2">
      <button  style="background-color: transparent;border: transparent;color:var(--font-hover-color);"  onclick="processFlowDesign(this)">
        Process Flow Design
      </button>
    </div>
      <div class="progress-bar col-1" role="progressbar" style="width: auto;text-align: left;" id="PN2">
        <button  style="background-color: transparent;border: transparent;color:var(--font-hover-color)" data-toggle="modal" onclick="designOption()" >
          Design Options
        </button>
      </div>

    <div class="progress-bar col-1" role="progressbar" style="width: auto;text-align: left;" id="PN3">
      <button class="l3Design" style="background-color: transparent;border: transparent;color:var(--font-hover-color);" onclick="l3Design.call(this)">Design Mode</button>
    </div>
    <div class="progress-bar col-1" role="progressbar" style="width: auto;text-align: left;">
      <button class="l3Design" style="background-color: transparent;border: transparent;color:var(--font-hover-color);" onclick="breadcrumbs.call(this)">Breadcrumbs</button>
    </div>
  </div>
    <link rel="stylesheet" type="text/css" href="{% static 'vendor/mxGraph/css/grapheditor.css' %}">
    <link rel="stylesheet" href="{% static 'vendor/mxGraph/css/common.css' %}">

    <script type="text/javascript">
        mxBasePath = "{% static 'vendor/mxGraph' %}";
        </script>
    <script type="text/javascript">
        mxLanguages = ['de', 'it', 'fr'];
        </script>
        <style>

                #divContainer, #divResize {
                    border:dashed 1px #CCC;
                    width:120px;
                    height:120px;
                    padding:5px;
                    margin:5px;
                    font:13px Arial;
                    cursor:move;
                    float:left
                }
                .dragContainer .text {
                  text-align: center;
                }
                #createViewModal .body {
                  margin: 0;
                  padding: 0;
                  max-width: 100rem;
                  height: 23rem;
                  max-height: 23rem;
                  background-image: linear-gradient(rgba(0, 0, 0, 0.45) 0.04px, transparent 0.4px), linear-gradient(90deg, rgba(0, 0, 0, 0.45) 0.04px, transparent 0.4px);
                  background-size: 4.0em 4.0em;
                }
                #createViewModal .dragContainer {
                  margin: 0;
                  padding: 0;
                  max-width: 100rem;
                  height: 23rem;
                  max-height: 23rem;
                  background-image: linear-gradient(rgba(0, 0, 0, 0.3) 0.04px, transparent 0.4px), linear-gradient(90deg, rgba(0, 0, 0, 0.3) 0.04px, transparent 0.4px);
                  background-size: 1em 1em;
                }
                #createViewModal .dragContainer .formContainer:hover {
                  border-color: var(--primary-color);
                  pointer-events:none
                }
                #createViewModal .dragContainer .formTempContainer .card-body .form-row {
                  pointer-events:none
                }
                #createViewModal .dragContainer .formTempContainer:hover {
                  border-color: var(--primary-color);
                }
                #createViewModal i {
                  font-size: 14px;
                }
                #createViewModal i:hover {
                  font-size: 16px;
                }
                .shape:hover {
                  transform: scale(2);
                }
                .container {
                  display: grid;
                  grid-template-columns: repeat(5, 1fr);
                  gap: 10px;
                }
                .changeColor {
                  background: #d1d0cf;
                  border-radius: 8px 8px 8px 8px;
                }
                .editjs, .fa-plus, .fa-remove {
                  cursor: pointer;
                }
        </style>
        <div class="modal" id="createViewModal" style="display: none;" data-focus="false">

          <div class="modal-fullscreen" role="document" style="padding: 1rem;">
            <div class="modal-content" style="height: 46rem;">
              <div class="modal-header" style='background:#565a5e; color:white;'>
                <h5 class="modal-title" id="formModalLabel" style="margin: auto;">Configure create view elements</h5>
                <button type="button" class="closeModal btn btn-primary">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" >
                <div class='card' style="height: 39rem;">
                  <div class='card-header' style="display: flex;flex-direction: column; justify-content: center;">
                    <div class="row">
                      <div class="form-row col-4">
                        <label style="margin-left:7px">Tab header:</label>
                        <input type="text" placeholder="Tab Header" class="tabHeader" id="tabHeaderCreateView" data-spanID="createViewErrorSpan" style="margin-bottom: 8px;margin-left: 4px;">
                      </div>
                      <div id="loadingSpinnerCreateview" class="from-row col-4" style="display: none;">
                        <i class="fa fa-circle-notch fa-spin"></i>&nbsp;&nbsp;Loading...
                      </div>

                    </div>

                      <div class="row" style="color:red;display: none;">
                        <div class="form-group col-12">
                          <span id="#createViewErrorSpan">
                          Tab header must contain unique values. A tab with the same name already exists in the sub-process.
                        </span>
                        </div>
                      </div>
                      <div class="row tabHeaderEmptyValidation" style="color:red;display:none;">
                        <div class="form-group col-12">
                          <span>
                            Tab header is a mandatory field.
                          </span>
                        </div>
                      </div>
                  </div>
                    <div id="createViewMainCanvasContainer" class="row card-body" style="max-height: 40rem; height: 30rem;">
                      <div id="createViewFormCollectionContainer" class="col-1" style="overflow: hidden;max-height: 30rem; height: 30rem; font-size: 5px;display: flex;flex-direction: column;align-items: center; background-color: #fbfbfb;padding-top: 10px;">
                        <div class="shape"  id="btClickMeForm" style="width: 30px;height: 20px; border: 1.8px solid black; background-color: white; text-align: center; display: flex; justify-content: center; align-items: center; padding-top: 15px; margin-bottom: 10px;"><p>Form</p></div>
                        <div class="shape"  id="btClickMeFormTemp" style="width: 40px;height: 20px; border: 1.8px solid black; background-color: white; text-align: center; display: flex; justify-content: center; align-items: center; padding-top: 15px; margin-bottom: 10px;"><p>Template</p></div>
                      </div>
                      <div class="col-10" style="max-height: 30rem; height: 30rem">
                      <div class="col-12 body" style="">
                        <div class=" col-12 dragContainer" style="max-height:30rem;height:30rem;">
                          <!--<svg width="500" height="500"><line x1="50" y1="50" x2="350" y2="350" stroke="black"/></svg>-->
                        </div>
                      </div>
                    </div>
                    <div class="col-1" style="overflow: hidden;max-height: 30rem; height: 30rem; display: flex; flex-direction: column; align-items: center; background-color: #fbfbfb;padding: 6px; justify-content: space-evenly">
                      <a class="geButton" title="Fill Color..." ><i class="fas fa-fill-drip" ><input style="margin-left: 5px" class="fillColor" type="color"></i></a>
                      <a class="geButton" title="Line Color..."><i class="fas fa-vial"><input style="margin-left: 5px" class="fillTextColor" type="color"></i></a>
                      <a class="geButton" title="Delete (Delete)"><i class="fas fa-trash deleteAll"></i></a>
                      <a class="geButton" title="Zoom In (Ctrl + (Numpad) / Alt+Mousewheel)"><i class="fas fa-search-plus zoomIn"></i></a>
                      <span class="zoomText">100%</span>
                      <a class="geButton" title="Zoom Out (Ctrl - (Numpad) / Alt+Mousewheel)"><i class="fas fa-search-minus zoomOut"></i></a>
                      <a class="geButton" title="Save Canvas"><i class="fas fa-save" id="saveCreateViewConfig"></i></a>
                      <a class="geButton previewCustomTemplate" title="Custom template" onclick="fetchTemplate.call(this,'fetchCreateViewConfigProcessCanvas')" style="display:none"><i class="fas fa-file"></i></a>
                    </div>
                     </div>
                     <div class="card-footer" style="display: flex; flex-direction: row; align-items: center; background-color: #fbfbfb;padding: 6px; justify-content: space-evenly; height: 40px;">
                     </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      <!--custmize the background color and font-size and layout of the tab header-->
      <div class="modal fade" id="designmodel" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
        <div class="modal-dialog modal-lg-center" style="max-width: 800px; max-height: 600px;">
          <div class="modal-content" >
            <div class="modal-header" style="max-height: 450px; ">
              <h4 class="modal-title" id="designoption">Design Options</h4>
                <i class="fa-solid fa-pen-to-square fa-2x"></i>
            </div>
            <div class="modal-body" style="margin-left:20px" >
              <div class="design-option-modal">
                <div class="row">
                  <div class="col-md-3">
                    <div><h6 style="justify-content: center" id="designTab">Select Tab Header</h6></div>
                  </div>
                  <div class="col-md-9" style="margin-top:8px ;">
                  <div class="row">
                  <div class="col-md-5">
                    <h6>Select Tabs to Design </h6>
                     <div class="form-check  radio_button">
                      <input class="form-check-input selectTabtoDesign1" type="radio" name="generic" value="all-tabs" id="hide" onclick="check(1)"  >
                      <label class="form-check-label" style="font-size:15px; margin-left: 10px;" for="hide">
                       Generic Tab
                      </label>
                    </div>
                    <div class="form-check  radio_button">
                      <input class="form-check-input selectTabtoDesign2" type="radio" name="specific-tab" value="indiviual-tab"  id="show" onclick="check(2)">
                      <label class="form-check-label" style="font-size:15px;  margin-left: 10px;" for="show">
                        Individual Tab
                      </label>
                    </div>
                  </div>
                  <div class=" col-md-7 select_indiviual_tab"  id="select_tab" style = "visibility:hidden"  style="margin-left: 3px;">
                    <h6>Select Tab to Design </h6>
                  <div class="form-group specific_tab col-md-8" id="select_tab_headers">
                    <select id="tabHeaderListAppend" class="select2 form-control" name="table">
                    </select>
                  </div>
                  </div>
                </div>
                </div>
              </div>
            </div>
                  <div  class="row" style="margin-top:20px;">
                    <div class="col-md-3">
                      <h6 id="designTab">Tabs Design Options</h6>
                    </div>
                    <div class ="col-md-9">
                      <div class="expand-button">
                        <button name="tabDesignOptions" class="tabDesignOption-button" required="" id="applicationTabDesign" data-toggle="modal"  data-target="#Tab_design_options" data-backdrop="static" data-keyboard="false"> Expand <i class="fa-solid fa-share"></i> </button>
                      </div>
                    </div>
                   </div>
                      <div  class="row" style="margin-top:20px;" id="vertical_layout_tabsize">
                    <div class="col-md-3">
                      <h6 id="designTab">Select Tabs Size</h6>
                    </div>
                    <div class ="col-md-9">
                      <div class="expand-button">
                        <button name="tabDesignOptions" class="tabDesignOption-button" required="" id="TabSizeDesign" data-toggle="modal"  data-target="#Tabsize_design_options" data-backdrop="static" data-keyboard="false" > Expand <i class="fa-solid fa-share"></i> </button>
                      </div>
                    </div>
                   </div>

                   <div class="row" style="margin-top: 10px;">
                   <div class="select_tab_layout col-md-3"  id="select_layout">
                    <h6 id="designTab">Select Tabs Layout </h6>
                  </div>
                  <div class="form-group col-md-4" id="select_layout">
                    <select id="layout_option" class="select2 form-control" name="choose_layout">
                      <option value="Horizontal" id="Horizontal_layout" selected>Horizontal</option>
                      <option value="Vertical" id="Vertical_layout">Vertical</option>
                    </select>
                  </div>
                </div>
            </div>

                  <div class="modal-footer d-flex justify-content-between">
                    <button type="button" class=" btn buttonfooter" data-dismiss="modal" id="close_appdesign">Cancel <i class="fas fa-times"></i></button>
                    <button type="button" class=" btn buttonfooter" id="tabHeaderDesignSave" onclick="tabDesignSaveConfig()" data-dismiss="modal" >Save  <i class="fa-solid fa-floppy-disk"></i></button>
                  </div>

              </div>

            </div>
          </div>
          </div>
          </div>
     <!-- tab_headers_design_model -->
     <div class="modal fade" id="Tab_design_options" tabindex="-1" role="dialog" data-focus="false" aria-labelledby="basicModal" aria-hidden="true">
      <div class="modal-dialog modal-lg-center" style="max-width: 700px; max-height: 600px;">
        <div class="modal-content" >
          <div class="modal-header" style="max-height: 500px;">
            <h4 class="modal-title">Tabs Design</h4>
            <button type="button" class=" btn buttonfooter" style="font-size: 13px; margin-top:10px;" data-dismiss="modal" id="goback" aria-label="Close"><i class="fa-solid fa-arrow-left-long"></i> Go back
            </button>
          </div>
          <div class="modal-body"style="margin: 15px; padding: 20px;" >
            <div class="row" style="padding:5px; margin-left: 10px; margin-top:-15px;">
             <div class="col-md-6">
               <h6>Select Background Color</h6>
               <div class="row Tab_headers_color" >
                 <div class="col-2 color-checkspan" style="background:#dc143c"></div><br>
                 <div class="col-2 color-checkspan" style="background:#ff8c00"></div><br>
                 <div class="col-2 color-checkspan" style="background:#ffd700"></div><br>
                 <div class="col-2 color-checkspan" style="background:#32cd32"></div><br>
                 <div class="col-2 color-checkspan" style="background:#40e0d0"></div><br>
                 <div class="col-2 color-checkspan" style="background:#00bfff"></div><br>
                 <div class="col-2 color-checkspan" style="background:#1e90ff"></div><br>
                 <div class="col-2 color-checkspan" style="background:#ff1493"></div><br>
                 <div class="col-2 color-checkspan" style="background:#9400d3"></div><br>
                 <div class="col-2 color-checkspan" style="background:#696969"></div><br>
                 <div class="col-2 color-checkspan" style="background:#f0f8ff"></div><br>
                 <div class="col-2 color-checkspan" style="background:#fffacd"></div><br>
                 <div class="col-2 color-checkspan" style="background:#fce8b1"></div><br>
                 <div class="col-2 color-checkspan" style="background:#f5cedb"></div><br>
                 <div class="col-2 color-checkspan" style="background:#c9dcf2"></div><br>
                 <div class="col-2 color-checkspan" style="background:#bce6cd"></div><br>
                 <div class="col-2 color-checkspan" style="background:#ff8c9f"></div><br>
                 <div class="col-2 color-checkspan" style="background:#d6aaf0"></div><br>
                 <div class="col-2 color-checkspan" style="background:#755b31"></div><br>
                 <div class="col-2 color-checkspan" style="background:#992e90"></div><br>
               </div>
               <button class="more_colors" id="more-tabs_header-button" data-toggle="modal" data-backdrop="static" data-keyboard="false" onclick="morebackgroundcolor()">more colors</button>
             </div>
             <div class="col-md-6">
              <h6>Select Text Color</h6>
              <div class="row Tab_headers_color2">
                <div class="col-2 color-checkspan2" style="background:#dc143c"></div><br>
                <div class="col-2 color-checkspan2" style="background:#ff8c00"></div><br>
                <div class="col-2 color-checkspan2" style="background:#ffd700"></div><br>
                <div class="col-2 color-checkspan2" style="background:#32cd32"></div><br>
                <div class="col-2 color-checkspan2" style="background:#40e0d0"></div><br>
                <div class="col-2 color-checkspan2" style="background:#00bfff"></div><br>
                <div class="col-2 color-checkspan2" style="background:#1e90ff"></div><br>
                <div class="col-2 color-checkspan2" style="background:#ff1493"></div><br>
                <div class="col-2 color-checkspan2" style="background:#9400d3"></div><br>
                <div class="col-2 color-checkspan2" style="background:#696969"></div><br>
                <div class="col-2 color-checkspan2" style="background:#f0f8ff"></div><br>
                <div class="col-2 color-checkspan2" style="background:#fffacd"></div><br>
                <div class="col-2 color-checkspan2" style="background:#fce8b1"></div><br>
                <div class="col-2 color-checkspan2" style="background:#f5cedb"></div><br>
                <div class="col-2 color-checkspan2" style="background:#c9dcf2"></div><br>
                <div class="col-2 color-checkspan2" style="background:#bce6cd"></div><br>
                <div class="col-2 color-checkspan2" style="background:#ff8c9f"></div><br>
                <div class="col-2 color-checkspan2" style="background:#d6aaf0"></div><br>
                <div class="col-2 color-checkspan2" style="background:#755b31"></div><br>
                <div class="col-2 color-checkspan2" style="background:#992e90"></div><br>
              </div>
              <button class="more_colors" id="more_text_colors" data-toggle="modal" data-backdrop="static" data-keyboard="false" onclick="moretextcolor()">more colors</button>
            </div>
            </div>
            <div class="row"style="margin-top:15px; margin-left: 10px;">
              <div class="col-md-4">
                <h6>Select Font-size </h6>
              </div>
              <div  class='col-md-6 col-sm-6  col-xs-6' style="margin-left:-5px;">
                <div class="rangeBar_animation">
                 <div class="sliderValue" style=" margin-left: 35px;">
                   <span id="font_size_value">12</span>
                 </div>
                 <div class='field' style=" margin-left: 13px;">
               <span class="rangebarLeft">12</span>
               <input id="font_size" type="range" min="12" max="24" steps="1" value="12">
               <span class= "rangebarRight">24px</span>
               </div>
             </div>
           </div>
            </div>
            <div class="row"  style="margin-top: 15px; margin-left: 10px;">
              <div class="col-md-4" >
                <h6  style="margin-top:17px;">Preview for your Tabs</h6>
              </div>
                  <div class="col-md-6" style="margin-left:-5px;">
                <input type="button" value="Alltabs" id="myTab"  class="append-value" style="display: inline-block; white-space: nowrap; border: 1px solid #b9bcbe; border-top-right-radius: 10px; border-top-left-radius: 10px;
                width:300px; height:50px;">
              </div>
            </div>
           </div>

                <div class="modal-footer d-flex justify-content-between">
                  <button type="button" class="btn buttonfooter" data-dismiss="modal" id="close_tabDesign">Cancel <i class="fas fa-times"></i></button>
                  <button type="button" class="btn buttonfooter" id="tabDesignSave" data-dismiss="modal" style="justify-content: flex-end">Save  <i class="fa-solid fa-floppy-disk"></i></button>
                </div>

            </div>
          </div>
        </div>
        </div>
        <!-- tabs size design model -->
        <div class="modal fade" id="Tabsize_design_options" tabindex="-1" role="dialog" data-focus="false" aria-labelledby="basicModal" aria-hidden="true">
          <div class="modal-dialog modal-lg-center" style="max-width: 600px; max-height: 600px;">
            <div class="modal-content" >
              <div class="modal-header" style="max-height: 500px;">
                <h4 class="modal-title">Tabs Size Design</h4>
                <button type="button" class="btn buttonfooter" style="font-size: 13px; margin-top:10px;" data-dismiss="modal" id="goback" aria-label="Close"><i class="fa-solid fa-arrow-left-long"></i> Go back
                </button>
              </div>
              <div class="modal-body"style="margin: 20px; padding: 10px;" >
                <div class="row">
                  <div class="col-md-4" style="margin-top:10px">
                    <h6>Select Tab Width </h6>
                  </div>
                  <div class='col-md-8 col-sm-8 col-xs-8'>
                     <div class="rangeBar_animation">
                      <div class="sliderValue">
                        <span id="tab_width_value">0</span>
                      </div>
                      <div class='field'>
                    <span class="rangebarLeft">0</span>
                    <input id="tab_width" type="range" min="0" max="300" steps="1" value="0">
                    <span class= "rangebarRight">300px</span>
                    </div>
                  </div>
                </div>
                </div>
                <div class="row"style="margin-top:40px">
                  <div class="col-md-4" style="margin-top:10px">
                    <h6>Select Tab Height </h6>
                  </div>
                  <div class='col-md-8 col-sm-8 col-xs-8'>
                    <div class="rangeBar_animation">
                     <div class="sliderValue">
                       <span id="tab_height_value">0</span>
                     </div>
                     <div class='field'>
                   <span class="rangebarLeft">0</span>
                   <input id="tab_height" type="range" min="0" max="50" steps="1" value="0">
                   <span class= "rangebarRight">50px</span>
                   </div>
                 </div>
               </div>
                </div>
                <div class="row"  style="margin-top: 20px;">
                  <div class="col-md-4" >
                    <h6  style="margin-top:17px;">Preview Tabs Size</h6>
                  </div>
                      <div class="col-md-8 col-sm-8 col-xs-8">
                    <input type="button" value="Alltabs" id="myTab_Size" style="display: inline-block; white-space: nowrap; border: 1px solid #b9bcbe; border-top-right-radius: 10px; border-top-left-radius: 10px;
                    width:300px; height:45px;">
                  </div>
                </div>
                </div>

                    <div class="modal-footer d-flex justify-content-between">
                      <button type="button" class="btn buttonfooter" data-dismiss="modal" id="close_tabDesign">Cancel <i class="fas fa-times"></i></button>
                      <button type="button" class="btn buttonfooter" id="tabSizeSave" data-dismiss="modal" style="justify-content: flex-end">Save  <i class="fa-solid fa-floppy-disk"></i></button>
                    </div>

                </div>
              </div>
            </div>
            </div>
      <!--mores color option model for tab header-->
      <div class="modal fade" id="select_more_colors" tabindex="-1" role="dialog" aria-labelledby="select_more_colors" aria-hidden="true" style ="z-index:2000" >
        <div class="modal-dialog modal-dialog-centered" style="max-width: 1026px;justify-content: center;" role="document">
          <div class="modal-content" style="min-height: 461px;width:50%">
            <div class="modal-header">
              <h4 class="modal-title" id="exampleModalLongTitle">More Colors</h4>
              <button type="button" class="btn buttonfooter" style="background-color: var(--primary-color);font-size: 13px; display:none"
              data-dismiss="modal" id="gobackcolors" aria-label="Close">
            </button>
            </div>
            <div class=" modal-body">
                <div class="row">
                  <div class="col-12">
                    <div class="main-container" onclick="selectColorMultiple()">
                      <img class="colorpicker" style="margin-right:2px;"
                        src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/782173/img_colormap.png" usemap="#colormap"
                        alt="colormap">
                      <div class="main-container">
                        <map id="colormap" name="colormap"><area style="cursor:pointer"
                            shape="poly" coords="63,0,72,4,72,15,63,19,54,15,54,4"
                            onmouseover="mouseOverColorSelect(&quot;#003366&quot;)" alt="#003366"><area style="cursor:pointer"
                            shape="poly" coords="81,0,90,4,90,15,81,19,72,15,72,4"
                            onmouseover="mouseOverColorSelect(&quot;#336699&quot;)" alt="#336699"><area style="cursor:pointer"
                            shape="poly" coords="99,0,108,4,108,15,99,19,90,15,90,4"
                            onmouseover="mouseOverColorSelect(&quot;#3366CC&quot;)" alt="#3366CC"><area style="cursor:pointer"
                            shape="poly" coords="117,0,126,4,126,15,117,19,108,15,108,4"
                            onmouseover="mouseOverColorSelect(&quot;#003399&quot;)" alt="#003399"><area style="cursor:pointer"
                            shape="poly" coords="135,0,144,4,144,15,135,19,126,15,126,4"
                            onmouseover="mouseOverColorSelect(&quot;#000099&quot;)" alt="#000099"><area style="cursor:pointer"
                            shape="poly" coords="153,0,162,4,162,15,153,19,144,15,144,4"
                            onmouseover="mouseOverColorSelect(&quot;#0000CC&quot;)" alt="#0000CC"><area style="cursor:pointer"
                            shape="poly" coords="171,0,180,4,180,15,171,19,162,15,162,4"
                            onmouseover="mouseOverColorSelect(&quot;#000066&quot;)" alt="#000066"><area style="cursor:pointer"
                            shape="poly" coords="54,15,63,19,63,30,54,34,45,30,45,19"
                            onmouseover="mouseOverColorSelect(&quot;#006666&quot;)" alt="#006666"><area style="cursor:pointer"
                            shape="poly" coords="72,15,81,19,81,30,72,34,63,30,63,19"
                            onmouseover="mouseOverColorSelect(&quot;#006699&quot;)" alt="#006699"><area style="cursor:pointer"
                            shape="poly" coords="90,15,99,19,99,30,90,34,81,30,81,19"
                            onmouseover="mouseOverColorSelect(&quot;#0099CC&quot;)" alt="#0099CC"><area style="cursor:pointer"
                            shape="poly" coords="108,15,117,19,117,30,108,34,99,30,99,19"
                            onmouseover="mouseOverColorSelect(&quot;#0066CC&quot;)" alt="#0066CC"><area style="cursor:pointer"
                            shape="poly" coords="126,15,135,19,135,30,126,34,117,30,117,19"
                            onmouseover="mouseOverColorSelect(&quot;#0033CC&quot;)" alt="#0033CC"><area style="cursor:pointer"
                            shape="poly" coords="144,15,153,19,153,30,144,34,135,30,135,19"
                            onmouseover="mouseOverColorSelect(&quot;#0000FF&quot;)" alt="#0000FF"><area style="cursor:pointer"
                            shape="poly" coords="162,15,171,19,171,30,162,34,153,30,153,19"
                            onmouseover="mouseOverColorSelect(&quot;#3333FF&quot;)" alt="#3333FF"><area style="cursor:pointer"
                            shape="poly" coords="180,15,189,19,189,30,180,34,171,30,171,19"
                            onmouseover="mouseOverColorSelect(&quot;#333399&quot;)" alt="#333399"><area style="cursor:pointer"
                            shape="poly" coords="45,30,54,34,54,45,45,49,36,45,36,34"
                            onmouseover="mouseOverColorSelect(&quot;#669999&quot;)" alt="#669999"><area style="cursor:pointer"
                            shape="poly" coords="63,30,72,34,72,45,63,49,54,45,54,34"
                            onmouseover="mouseOverColorSelect(&quot;#009999&quot;)" alt="#009999"><area style="cursor:pointer"
                            shape="poly" coords="81,30,90,34,90,45,81,49,72,45,72,34"
                            onmouseover="mouseOverColorSelect(&quot;#33CCCC&quot;)" alt="#33CCCC"><area style="cursor:pointer"
                            shape="poly" coords="99,30,108,34,108,45,99,49,90,45,90,34"
                            onmouseover="mouseOverColorSelect(&quot;#00CCFF&quot;)" alt="#00CCFF"><area style="cursor:pointer"
                            shape="poly" coords="117,30,126,34,126,45,117,49,108,45,108,34"
                            onmouseover="mouseOverColorSelect(&quot;#0099FF&quot;)" alt="#0099FF"><area style="cursor:pointer"
                            shape="poly" coords="135,30,144,34,144,45,135,49,126,45,126,34"
                            onmouseover="mouseOverColorSelect(&quot;#0066FF&quot;)" alt="#0066FF"><area style="cursor:pointer"
                            shape="poly" coords="153,30,162,34,162,45,153,49,144,45,144,34"
                            onmouseover="mouseOverColorSelect(&quot;#3366FF&quot;)" alt="#3366FF"><area style="cursor:pointer"
                            shape="poly" coords="171,30,180,34,180,45,171,49,162,45,162,34"
                            onmouseover="mouseOverColorSelect(&quot;#3333CC&quot;)" alt="#3333CC"><area style="cursor:pointer"
                            shape="poly" coords="189,30,198,34,198,45,189,49,180,45,180,34"
                            onmouseover="mouseOverColorSelect(&quot;#666699&quot;)" alt="#666699"><area style="cursor:pointer"
                            shape="poly" coords="36,45,45,49,45,60,36,64,27,60,27,49"
                            onmouseover="mouseOverColorSelect(&quot;#339966&quot;)" alt="#339966"><area style="cursor:pointer"
                            shape="poly" coords="54,45,63,49,63,60,54,64,45,60,45,49"
                            onmouseover="mouseOverColorSelect(&quot;#00CC99&quot;)" alt="#00CC99"><area style="cursor:pointer"
                            shape="poly" coords="72,45,81,49,81,60,72,64,63,60,63,49"
                            onmouseover="mouseOverColorSelect(&quot;#00FFCC&quot;)" alt="#00FFCC"><area style="cursor:pointer"
                            shape="poly" coords="90,45,99,49,99,60,90,64,81,60,81,49"
                            onmouseover="mouseOverColorSelect(&quot;#00FFFF&quot;)" alt="#00FFFF"><area style="cursor:pointer"
                            shape="poly" coords="108,45,117,49,117,60,108,64,99,60,99,49"
                            onmouseover="mouseOverColorSelect(&quot;#33CCFF&quot;)" alt="#33CCFF"><area style="cursor:pointer"
                            shape="poly" coords="126,45,135,49,135,60,126,64,117,60,117,49"
                            onmouseover="mouseOverColorSelect(&quot;#3399FF&quot;)" alt="#3399FF"><area style="cursor:pointer"
                            shape="poly" coords="144,45,153,49,153,60,144,64,135,60,135,49"
                            onmouseover="mouseOverColorSelect(&quot;#6699FF&quot;)" alt="#6699FF"><area style="cursor:pointer"
                            shape="poly" coords="162,45,171,49,171,60,162,64,153,60,153,49"
                            onmouseover="mouseOverColorSelect(&quot;#6666FF&quot;)" alt="#6666FF"><area style="cursor:pointer"
                            shape="poly" coords="180,45,189,49,189,60,180,64,171,60,171,49"
                            onmouseover="mouseOverColorSelect(&quot;#6600FF&quot;)" alt="#6600FF"><area style="cursor:pointer"
                            shape="poly" coords="198,45,207,49,207,60,198,64,189,60,189,49"
                            onmouseover="mouseOverColorSelect(&quot;#6600CC&quot;)" alt="#6600CC"><area style="cursor:pointer"
                            shape="poly" coords="27,60,36,64,36,75,27,79,18,75,18,64"
                            onmouseover="mouseOverColorSelect(&quot;#339933&quot;)" alt="#339933"><area style="cursor:pointer"
                            shape="poly" coords="45,60,54,64,54,75,45,79,36,75,36,64"
                            onmouseover="mouseOverColorSelect(&quot;#00CC66&quot;)" alt="#00CC66"><area style="cursor:pointer"
                            shape="poly" coords="63,60,72,64,72,75,63,79,54,75,54,64"
                            onmouseover="mouseOverColorSelect(&quot;#00FF99&quot;)" alt="#00FF99"><area style="cursor:pointer"
                            shape="poly" coords="81,60,90,64,90,75,81,79,72,75,72,64"
                            onmouseover="mouseOverColorSelect(&quot;#66FFCC&quot;)" alt="#66FFCC"><area style="cursor:pointer"
                            shape="poly" coords="99,60,108,64,108,75,99,79,90,75,90,64"
                            onmouseover="mouseOverColorSelect(&quot;#66FFFF&quot;)" alt="#66FFFF"><area style="cursor:pointer"
                            shape="poly" coords="117,60,126,64,126,75,117,79,108,75,108,64"
                            onmouseover="mouseOverColorSelect(&quot;#66CCFF&quot;)" alt="#66CCFF"><area style="cursor:pointer"
                            shape="poly" coords="135,60,144,64,144,75,135,79,126,75,126,64"
                            onmouseover="mouseOverColorSelect(&quot;#99CCFF&quot;)" alt="#99CCFF"><area style="cursor:pointer"
                            shape="poly" coords="153,60,162,64,162,75,153,79,144,75,144,64"
                            onmouseover="mouseOverColorSelect(&quot;#9999FF&quot;)" alt="#9999FF"><area style="cursor:pointer"
                            shape="poly" coords="171,60,180,64,180,75,171,79,162,75,162,64"
                            onmouseover="mouseOverColorSelect(&quot;#9966FF&quot;)" alt="#9966FF"><area style="cursor:pointer"
                            shape="poly" coords="189,60,198,64,198,75,189,79,180,75,180,64"
                            onmouseover="mouseOverColorSelect(&quot;#9933FF&quot;)" alt="#9933FF"><area style="cursor:pointer"
                            shape="poly" coords="207,60,216,64,216,75,207,79,198,75,198,64"
                            onmouseover="mouseOverColorSelect(&quot;#9900FF&quot;)" alt="#9900FF"><area style="cursor:pointer"
                            shape="poly" coords="18,75,27,79,27,90,18,94,9,90,9,79"
                            onmouseover="mouseOverColorSelect(&quot;#006600&quot;)" alt="#006600"><area style="cursor:pointer"
                            shape="poly" coords="36,75,45,79,45,90,36,94,27,90,27,79"
                            onmouseover="mouseOverColorSelect(&quot;#00CC00&quot;)" alt="#00CC00"><area style="cursor:pointer"
                            shape="poly" coords="54,75,63,79,63,90,54,94,45,90,45,79"
                            onmouseover="mouseOverColorSelect(&quot;#00FF00&quot;)" alt="#00FF00"><area style="cursor:pointer"
                            shape="poly" coords="72,75,81,79,81,90,72,94,63,90,63,79"
                            onmouseover="mouseOverColorSelect(&quot;#66FF99&quot;)" alt="#66FF99"><area style="cursor:pointer"
                            shape="poly" coords="90,75,99,79,99,90,90,94,81,90,81,79"
                            onmouseover="mouseOverColorSelect(&quot;#99FFCC&quot;)" alt="#99FFCC"><area style="cursor:pointer"
                            shape="poly" coords="108,75,117,79,117,90,108,94,99,90,99,79"
                            onmouseover="mouseOverColorSelect(&quot;#CCFFFF&quot;)" alt="#CCFFFF"><area style="cursor:pointer"
                            shape="poly" coords="126,75,135,79,135,90,126,94,117,90,117,79"
                            onmouseover="mouseOverColorSelect(&quot;#CCCCFF&quot;)" alt="#CCCCFF"><area style="cursor:pointer"
                            shape="poly" coords="144,75,153,79,153,90,144,94,135,90,135,79"
                            onmouseover="mouseOverColorSelect(&quot;#CC99FF&quot;)" alt="#CC99FF"><area style="cursor:pointer"
                            shape="poly" coords="162,75,171,79,171,90,162,94,153,90,153,79"
                            onmouseover="mouseOverColorSelect(&quot;#CC66FF&quot;)" alt="#CC66FF"><area style="cursor:pointer"
                            shape="poly" coords="180,75,189,79,189,90,180,94,171,90,171,79"
                            onmouseover="mouseOverColorSelect(&quot;#CC33FF&quot;)" alt="#CC33FF"><area style="cursor:pointer"
                            shape="poly" coords="198,75,207,79,207,90,198,94,189,90,189,79"
                            onmouseover="mouseOverColorSelect(&quot;#CC00FF&quot;)" alt="#CC00FF"><area style="cursor:pointer"
                            shape="poly" coords="216,75,225,79,225,90,216,94,207,90,207,79"
                            onmouseover="mouseOverColorSelect(&quot;#9900CC&quot;)" alt="#9900CC"><area style="cursor:pointer"
                            shape="poly" coords="9,90,18,94,18,105,9,109,0,105,0,94"
                            onmouseover="mouseOverColorSelect(&quot;#003300&quot;)" alt="#003300"><area style="cursor:pointer"
                            shape="poly" coords="27,90,36,94,36,105,27,109,18,105,18,94"
                            onmouseover="mouseOverColorSelect(&quot;#009933&quot;)" alt="#009933"><area style="cursor:pointer"
                            shape="poly" coords="45,90,54,94,54,105,45,109,36,105,36,94"
                            onmouseover="mouseOverColorSelect(&quot;#33CC33&quot;)" alt="#33CC33"><area style="cursor:pointer"
                            shape="poly" coords="63,90,72,94,72,105,63,109,54,105,54,94"
                            onmouseover="mouseOverColorSelect(&quot;#66FF66&quot;)" alt="#66FF66"><area style="cursor:pointer"
                            shape="poly" coords="81,90,90,94,90,105,81,109,72,105,72,94"
                            onmouseover="mouseOverColorSelect(&quot;#99FF99&quot;)" alt="#99FF99"><area style="cursor:pointer"
                            shape="poly" coords="99,90,108,94,108,105,99,109,90,105,90,94"
                            onmouseover="mouseOverColorSelect(&quot;#CCFFCC&quot;)" alt="#CCFFCC"><area style="cursor:pointer"
                            shape="poly" coords="117,90,126,94,126,105,117,109,108,105,108,94"
                            onmouseover="mouseOverColorSelect(&quot;#FFFFFF&quot;)" alt="#FFFFFF"><area style="cursor:pointer"
                            shape="poly" coords="135,90,144,94,144,105,135,109,126,105,126,94"
                            onmouseover="mouseOverColorSelect(&quot;#FFCCFF&quot;)" alt="#FFCCFF"><area style="cursor:pointer"
                            shape="poly" coords="153,90,162,94,162,105,153,109,144,105,144,94"
                            onmouseover="mouseOverColorSelect(&quot;#FF99FF&quot;)" alt="#FF99FF"><area style="cursor:pointer"
                            shape="poly" coords="171,90,180,94,180,105,171,109,162,105,162,94"
                            onmouseover="mouseOverColorSelect(&quot;#FF66FF&quot;)" alt="#FF66FF"><area style="cursor:pointer"
                            shape="poly" coords="189,90,198,94,198,105,189,109,180,105,180,94"
                            onmouseover="mouseOverColorSelect(&quot;#FF00FF&quot;)" alt="#FF00FF"><area style="cursor:pointer"
                            shape="poly" coords="207,90,216,94,216,105,207,109,198,105,198,94"
                            onmouseover="mouseOverColorSelect(&quot;#CC00CC&quot;)" alt="#CC00CC"><area style="cursor:pointer"
                            shape="poly" coords="225,90,234,94,234,105,225,109,216,105,216,94"
                            onmouseover="mouseOverColorSelect(&quot;#660066&quot;)" alt="#660066"><area style="cursor:pointer"
                            shape="poly" coords="18,105,27,109,27,120,18,124,9,120,9,109"
                            onmouseover="mouseOverColorSelect(&quot;#336600&quot;)" alt="#336600"><area style="cursor:pointer"
                            shape="poly" coords="36,105,45,109,45,120,36,124,27,120,27,109"
                            onmouseover="mouseOverColorSelect(&quot;#009900&quot;)" alt="#009900"><area style="cursor:pointer"
                            shape="poly" coords="54,105,63,109,63,120,54,124,45,120,45,109"
                            onmouseover="mouseOverColorSelect(&quot;#66FF33&quot;)" alt="#66FF33"><area style="cursor:pointer"
                            shape="poly" coords="72,105,81,109,81,120,72,124,63,120,63,109"
                            onmouseover="mouseOverColorSelect(&quot;#99FF66&quot;)" alt="#99FF66"><area style="cursor:pointer"
                            shape="poly" coords="90,105,99,109,99,120,90,124,81,120,81,109"
                            onmouseover="mouseOverColorSelect(&quot;#CCFF99&quot;)" alt="#CCFF99"><area style="cursor:pointer"
                            shape="poly" coords="108,105,117,109,117,120,108,124,99,120,99,109"
                            onmouseover="mouseOverColorSelect(&quot;#FFFFCC&quot;)" alt="#FFFFCC"><area style="cursor:pointer"
                            shape="poly" coords="126,105,135,109,135,120,126,124,117,120,117,109"
                            onmouseover="mouseOverColorSelect(&quot;#FFCCCC&quot;)" alt="#FFCCCC"><area style="cursor:pointer"
                            shape="poly" coords="144,105,153,109,153,120,144,124,135,120,135,109"
                            onmouseover="mouseOverColorSelect(&quot;#FF99CC&quot;)" alt="#FF99CC"><area style="cursor:pointer"
                            shape="poly" coords="162,105,171,109,171,120,162,124,153,120,153,109"
                            onmouseover="mouseOverColorSelect(&quot;#FF66CC&quot;)" alt="#FF66CC"><area style="cursor:pointer"
                            shape="poly" coords="180,105,189,109,189,120,180,124,171,120,171,109"
                            onmouseover="mouseOverColorSelect(&quot;#FF33CC&quot;)" alt="#FF33CC"><area style="cursor:pointer"
                            shape="poly" coords="198,105,207,109,207,120,198,124,189,120,189,109"
                            onmouseover="mouseOverColorSelect(&quot;#CC0099&quot;)" alt="#CC0099"><area style="cursor:pointer"
                            shape="poly" coords="216,105,225,109,225,120,216,124,207,120,207,109"
                            onmouseover="mouseOverColorSelect(&quot;#993399&quot;)" alt="#993399"><area style="cursor:pointer"
                            shape="poly" coords="27,120,36,124,36,135,27,139,18,135,18,124"
                            onmouseover="mouseOverColorSelect(&quot;#333300&quot;)" alt="#333300"><area style="cursor:pointer"
                            shape="poly" coords="45,120,54,124,54,135,45,139,36,135,36,124"
                            onmouseover="mouseOverColorSelect(&quot;#669900&quot;)" alt="#669900"><area style="cursor:pointer"
                            shape="poly" coords="63,120,72,124,72,135,63,139,54,135,54,124"
                            onmouseover="mouseOverColorSelect(&quot;#99FF33&quot;)"
                            alt="#99FF33"><area style="cursor:pointer" shape="poly"
                            coords="81,120,90,124,90,135,81,139,72,135,72,124"
                            onmouseover="mouseOverColorSelect(&quot;#CCFF66&quot;)"
                            alt="#CCFF66"><area style="cursor:pointer" shape="poly"
                            coords="99,120,108,124,108,135,99,139,90,135,90,124"
                            onmouseover="mouseOverColorSelect(&quot;#FFFF99&quot;)"
                            alt="#FFFF99"><area style="cursor:pointer" shape="poly"
                            coords="117,120,126,124,126,135,117,139,108,135,108,124"
                            onmouseover="mouseOverColorSelect(&quot;#FFCC99&quot;)" alt="#FFCC99"><area style="cursor:pointer"
                            shape="poly" coords="135,120,144,124,144,135,135,139,126,135,126,124"
                            onmouseover="mouseOverColorSelect(&quot;#FF9999&quot;)" alt="#FF9999"><area style="cursor:pointer"
                            shape="poly" coords="153,120,162,124,162,135,153,139,144,135,144,124"
                            onmouseover="mouseOverColorSelect(&quot;#FF6699&quot;)" alt="#FF6699"><area style="cursor:pointer"
                            shape="poly" coords="171,120,180,124,180,135,171,139,162,135,162,124"
                            onmouseover="mouseOverColorSelect(&quot;#FF3399&quot;)" alt="#FF3399"><area style="cursor:pointer"
                            shape="poly" coords="189,120,198,124,198,135,189,139,180,135,180,124"
                            onmouseover="mouseOverColorSelect(&quot;#CC3399&quot;)" alt="#CC3399"><area style="cursor:pointer"
                            shape="poly" coords="207,120,216,124,216,135,207,139,198,135,198,124"
                            onmouseover="mouseOverColorSelect(&quot;#990099&quot;)" alt="#990099"><area style="cursor:pointer"
                            shape="poly" coords="36,135,45,139,45,150,36,154,27,150,27,139"
                            onmouseover="mouseOverColorSelect(&quot;#666633&quot;)"
                            alt="#666633"><area style="cursor:pointer" shape="poly"
                            coords="54,135,63,139,63,150,54,154,45,150,45,139"
                            onmouseover="mouseOverColorSelect(&quot;#99CC00&quot;)"
                            alt="#99CC00"><area style="cursor:pointer" shape="poly"
                            coords="72,135,81,139,81,150,72,154,63,150,63,139"
                            onmouseover="mouseOverColorSelect(&quot;#CCFF33&quot;)"
                            alt="#CCFF33"><area style="cursor:pointer" shape="poly"
                            coords="90,135,99,139,99,150,90,154,81,150,81,139"
                            onmouseover="mouseOverColorSelect(&quot;#FFFF66&quot;)"
                            alt="#FFFF66"><area style="cursor:pointer" shape="poly"
                            coords="108,135,117,139,117,150,108,154,99,150,99,139"
                            onmouseover="mouseOverColorSelect(&quot;#FFCC66&quot;)"
                            alt="#FFCC66"><area style="cursor:pointer" shape="poly"
                            coords="126,135,135,139,135,150,126,154,117,150,117,139"
                            onmouseover="mouseOverColorSelect(&quot;#FF9966&quot;)" alt="#FF9966"><area style="cursor:pointer"
                            shape="poly" coords="144,135,153,139,153,150,144,154,135,150,135,139"
                            onmouseover="mouseOverColorSelect(&quot;#FF6666&quot;)" alt="#FF6666"><area style="cursor:pointer"
                            shape="poly" coords="162,135,171,139,171,150,162,154,153,150,153,139"
                            onmouseover="mouseOverColorSelect(&quot;#FF0066&quot;)" alt="#FF0066"><area style="cursor:pointer"
                            shape="poly" coords="180,135,189,139,189,150,180,154,171,150,171,139"
                            onmouseover="mouseOverColorSelect(&quot;#CC6699&quot;)" alt="#CC6699"><area style="cursor:pointer"
                            shape="poly" coords="198,135,207,139,207,150,198,154,189,150,189,139"
                            onmouseover="mouseOverColorSelect(&quot;#993366&quot;)" alt="#993366"><area style="cursor:pointer"
                            shape="poly" coords="45,150,54,154,54,165,45,169,36,165,36,154"
                            onmouseover="mouseOverColorSelect(&quot;#999966&quot;)"
                            alt="#999966"><area style="cursor:pointer" shape="poly"
                            coords="63,150,72,154,72,165,63,169,54,165,54,154"
                            onmouseover="mouseOverColorSelect(&quot;#CCCC00&quot;)"
                            alt="#CCCC00"><area style="cursor:pointer" shape="poly"
                            coords="81,150,90,154,90,165,81,169,72,165,72,154"
                            onmouseover="mouseOverColorSelect(&quot;#FFFF00&quot;)"
                            alt="#FFFF00"><area style="cursor:pointer" shape="poly"
                            coords="99,150,108,154,108,165,99,169,90,165,90,154"
                            onmouseover="mouseOverColorSelect(&quot;#FFCC00&quot;)"
                            alt="#FFCC00"><area style="cursor:pointer" shape="poly"
                            coords="117,150,126,154,126,165,117,169,108,165,108,154"
                            onmouseover="mouseOverColorSelect(&quot;#FF9933&quot;)" alt="#FF9933"><area style="cursor:pointer"
                            shape="poly" coords="135,150,144,154,144,165,135,169,126,165,126,154"
                            onmouseover="mouseOverColorSelect(&quot;#FF6600&quot;)" alt="#FF6600"><area style="cursor:pointer"
                            shape="poly" coords="153,150,162,154,162,165,153,169,144,165,144,154"
                            onmouseover="mouseOverColorSelect(&quot;#FF5050&quot;)" alt="#FF5050"><area style="cursor:pointer"
                            shape="poly" coords="171,150,180,154,180,165,171,169,162,165,162,154"
                            onmouseover="mouseOverColorSelect(&quot;#CC0066&quot;)" alt="#CC0066"><area style="cursor:pointer"
                            shape="poly" coords="189,150,198,154,198,165,189,169,180,165,180,154"
                            onmouseover="mouseOverColorSelect(&quot;#660033&quot;)" alt="#660033"><area style="cursor:pointer"
                            shape="poly" coords="54,165,63,169,63,180,54,184,45,180,45,169"
                            onmouseover="mouseOverColorSelect(&quot;#996633&quot;)"
                            alt="#996633"><area style="cursor:pointer" shape="poly"
                            coords="72,165,81,169,81,180,72,184,63,180,63,169"
                            onmouseover="mouseOverColorSelect(&quot;#CC9900&quot;)"
                            alt="#CC9900"><area style="cursor:pointer" shape="poly"
                            coords="90,165,99,169,99,180,90,184,81,180,81,169"
                            onmouseover="mouseOverColorSelect(&quot;#FF9900&quot;)"
                            alt="#FF9900"><area style="cursor:pointer" shape="poly"
                            coords="108,165,117,169,117,180,108,184,99,180,99,169"
                            onmouseover="mouseOverColorSelect(&quot;#CC6600&quot;)"
                            alt="#CC6600"><area style="cursor:pointer" shape="poly"
                            coords="126,165,135,169,135,180,126,184,117,180,117,169"
                            onmouseover="mouseOverColorSelect(&quot;#FF3300&quot;)" alt="#FF3300"><area style="cursor:pointer"
                            shape="poly" coords="144,165,153,169,153,180,144,184,135,180,135,169"
                            onmouseover="mouseOverColorSelect(&quot;#FF0000&quot;)" alt="#FF0000"><area style="cursor:pointer"
                            shape="poly" coords="162,165,171,169,171,180,162,184,153,180,153,169"
                            onmouseover="mouseOverColorSelect(&quot;#CC0000&quot;)" alt="#CC0000"><area style="cursor:pointer"
                            shape="poly" coords="180,165,189,169,189,180,180,184,171,180,171,169"
                            onmouseover="mouseOverColorSelect(&quot;#990033&quot;)" alt="#990033"><area style="cursor:pointer"
                            shape="poly" coords="63,180,72,184,72,195,63,199,54,195,54,184"
                            onmouseover="mouseOverColorSelect(&quot;#663300&quot;)"
                            alt="#663300"><area style="cursor:pointer" shape="poly"
                            coords="81,180,90,184,90,195,81,199,72,195,72,184"
                            onmouseover="mouseOverColorSelect(&quot;#996600&quot;)"
                            alt="#996600"><area style="cursor:pointer" shape="poly"
                            coords="99,180,108,184,108,195,99,199,90,195,90,184"
                            onmouseover="mouseOverColorSelect(&quot;#CC3300&quot;)"
                            alt="#CC3300"><area style="cursor:pointer" shape="poly"
                            coords="117,180,126,184,126,195,117,199,108,195,108,184"
                            onmouseover="mouseOverColorSelect(&quot;#993300&quot;)" alt="#993300"><area style="cursor:pointer"
                            shape="poly" coords="135,180,144,184,144,195,135,199,126,195,126,184"
                            onmouseover="mouseOverColorSelect(&quot;#990000&quot;)" alt="#990000"><area style="cursor:pointer"
                            shape="poly" coords="153,180,162,184,162,195,153,199,144,195,144,184"
                            onmouseover="mouseOverColorSelect(&quot;#800000&quot;)" alt="#800000"><area style="cursor:pointer"
                            shape="poly" coords="171,180,180,184,180,195,171,199,162,195,162,184"
                            onmouseover="mouseOverColorSelect(&quot;#993333&quot;)" alt="#993333"></map>
                      </div>
                    </div>
                    <div id="select_hex" style="margin-top: -85px;"></div>
                    <div id="View_color"></div>
                    <div class="right">
                      <h6 id="selected-color-label">Selected color</h6>
                      <div id="select_hexC"></div>
                      <div id="viewC_color" style="color: black;
                      height: 60px;
                      width: 60px;
                      border-radius: 100%;"></div>
                    </div>
                  </div>
                  <div class="col-12">
                    <div style="margin-top: 44px;">
                      <h4 class="modal-title">Custom</h4>
                      <div class="form-group" style="display: flex;margin-left: 20px;margin-top: 20px;">
                      <label for="custom-color" style="flex: 0.4;font-size: 13px;margin-top: 3px;">Pick a Color</label>
                      <input type="color" class="form-control" value="" name="custom-color" oninput="selectcustomcolor()"
                        id="select_custom_color" style="width: 50%;margin-left: 16px;">
                      </div>
                    </div>
                  </div>
                </div>
            </div>
            <div class="modal-footer d-flex justify-content-between">
              <button type="button" class="btn btn-secondary" id="close_morecolors" data-dismiss="modal">Close <span aria-hidden="true">&times;</span></button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" id="tab_header_save-morecolors"
                style="justify-content: flex-end">Save  <i class="fa-solid fa-floppy-disk" style="color: white;"></i></button>
            </div>
          </div>
        </div>
      </div>
<style>
      .tabDesignOption-button{
          width:150px;
          font-size: 15px;
          border: #dddddd solid 1px;
          background: #dddddd;
          outline: none !important;
          border-radius: 5px;
          height:40px;
          box-shadow: 1px 1px 10px #dddddd;
          padding: 0 30px;
          margin-bottom: 20px;
      }
      .tabDesignOption-button:active{
          box-shadow: none;
          border: none !important;
      }
      .tabDesignOption-button:hover{
        background-color: #cac7c7;
      }
      .color-checkspan1{
          height: 25px;
          width: 22px;
          border-radius: 5px;
          margin: 7px 4px;
      }
      #designoption{
          position:fix;
          font-size: 20px;
          margin-top: 10px;
        }
      #designTab{
          font-size: medium;
          color: #000;
          font-weight: 700;
          align-items: center;
          margin-top: 5px;
      }

      .rangeBar_animation{
        height: 60px;
        width: 300px;
        background: #fff;
        border-radius: 10px black;
        box-shadow: 2px 4px 8px rgba(0,0,0,0.1);
        margin-top: -33px;
      }
      .sliderValue{
        position: relative;
        width: 100%;
        margin-left: 36px;
        margin-top: 21px;
      }
      .sliderValue span{
        position: absolute;
        height: 40px;
        width: 40px;
        font-weight: 600;
        top: -25px;
        line-height: 55px;
        z-index: 2;
        color: var(--primary-color);
        transform-origin: bottom;
      }

      .sliderValue span:after{
        position: absolute;
        content: '';
        height: 80%;
        width: 80%;
        background: #fff;
        border: 3px solid var(--primary-color);
        z-index: -1;
        left: 22%;
        top: 23%;
        transform: translateX(-50%) rotate(45deg);
        border-bottom-left-radius: 50%;
        box-shadow: 0px 0px 8px rgb(0 0 0 / 10%);
        border-top-left-radius: 50%;
        border-top-right-radius: 50%;
      }
      .field {
      position: absolute;
      font-size: 15px;
      color: var(--primary-color);
      font-weight: 600;
      width: 307px;
      margin-top: 18px;
      margin-left: 22px;
      }
      .rangeBar_animation input{
      -webkit-appearance: none;
      width: 70%;
      height: 3px;
      background: #ddd;
      border-radius: 5px;
      outline: none;
      border: none;
      z-index: 2222;
      margin-top: 4px;
      margin-left: 1px;
      }
      .rangeBar_animation input::-webkit-slider-thumb{
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        background:var(--primary-color);
        border-radius: 50%;
        border: 1px solid var(--primary-color);
        cursor: pointer;
      }
      .rangeBar_animation input::-moz-range-thumb{
        -webkit-appearance: none;
        width: 20px;
        height: 40px;
        background:var(--primary-color);
        border-radius: 50%;

        border: 1px solid var(--primary-color);
        cursor: pointer;
      }
      #View_color{
          color: black;
          height: 60px;
          width: 60px;
          border-radius: 100%;
      }
      #ViewC_color{
        color: black;
          height: 60px;
          width: 60px;
          border-radius: 100%;
      }
      .color-checkspan2 {
          height: 25px;
          width: 22px;
          border-radius: 5px;
          margin: 7px 4px;
      }
      .radio_button > input[type="radio"] {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;

      }
      .radio_button > input[type="radio"] {
        display: inline-block;
        width: 15px;
        height: 15px;
        padding: 3px;
        background-clip: content-box;
        border: 2px solid var(--primary-color);
        border-radius: 50%;
        margin-right: 0;
      }
      .radio_button > input[type="radio"]:checked {
        background-color:var(--primary-color);
      }
</style>
<script>

        function designOption(){
          $.ajax({
                      url: window.location.pathname,

                    data: {
                        'operation': 'fetchtabnames',
                        'subprocess_code': $('#graphContainerID').attr('data-subprocess_code'),
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                    $("#tabHeaderListAppend").empty()
                    $('#tabHeaderListAppend').append($('<option>').val("default").text("Select Tab to Design").prop("disabled", true).attr('selected', 'selected'));
                      for (let [elID, elName] of Object.entries(data.data)) {
                      $('#tabHeaderListAppend').append(
                      `<option value="${elID}">${elName}</option>`
                      )
                      }
                    $("#designmodel").modal('show')
                    },
                      error: function () {
                        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                      }
        })
          $.ajax({
                      url: window.location.pathname,

                      data: {
                        'operation': 'fetchtabsconfig',
                        'process_name': $('#PN1').text().trim().replace("Process: ",""),
                        'subprocess_name': $("#PN2").text().trim().replace("Subprocess: ", ""),
                      },
                      type: "POST",
                      dataType: "json",
                      success: function (data) {
                        if(data.data){
                          var saveallTabsConfig = data.data
                          $(".expand-button #applicationTabDesign").attr('data-data', JSON.stringify(saveallTabsConfig))
                        }
                        if ("All_Tab" in data.data){
                          $(".radio_button #hide").prop("checked", true)
                          check(1)
                          $("#myTab_Size").css({"background":data.data.All_Tab.background, "color":data.data.All_Tab.color, "font-size":data.data.All_Tab["font-size"]});
                        }
                        else {
                          var savedconfig = Object.keys(data.data).length;
                          if(savedconfig!=0){
                            $(".radio_button #show").prop("checked", true)
                            check(2)
                          }
                        }
                        if("Tab_Size" in data.data ){
                          $("#myTab_Size").css({"width":data.data.Tab_Size.width, "height":data.data.Tab_Size.height})
                          $("#tab_width_value").html(data.data.Tab_Size.width.replace("px", ''));
                          var slider_value1= $("#tab_width").val(data.data.Tab_Size.width.replace("px", ''));
                          $("#tab_width_value").css("left", slider_value1.val()/1.538 + "px");
                          $("#tab_height_value").html(data.data.Tab_Size.height.replace("px",''));
                          var slider_value2 = $("#tab_height").val(data.data.Tab_Size.height.replace("px",''));
                          $("#tab_height_value").css("left",slider_value2.val()/0.256 + "px");
                        }
                        if("Tab_Layout" in data.data){
                          var saveLayoutconfig = data.data
                          if(saveLayoutconfig.Tab_Layout=="Horizontal"){
                            $('#layout_option').eq(0).val('Horizontal').trigger('change')
                          }else{
                            $('#layout_option').eq(0).val('Vertical').trigger('change')
                          }
                        }
                      },

        })
        }
        function check(val){
         if(val==1){
             document.getElementById('select_tab').style.visibility = 'hidden';
             document.getElementById('hide').checked
             document.getElementById('show').checked=false
             document.getElementById("TabSizeDesign").disabled = false


         } else {
            document.getElementById('select_tab').style.visibility = 'visible';
            document.getElementById('show').checked
            document.getElementById('hide').checked=false
            document.getElementById("TabSizeDesign").disabled = true

           }

          }
          var config = ["background", "color", "font-size"]
          var configsize = ["width","height"]
          var Tab_Header_background_color = "";
          var Tab_Header_text_color = "";
          var Tab_Header_font_size= "";
          var more_text_color = false;
          var more_background_color = false;
          var Tab_Layout="";
          var obj={}
          var tab_size_config={}
          var config_save ={}
          var tab_size_save_config = {}


          function moretextcolor(value){
          $('#select_more_colors').modal('show');
           more_text_color = true;
           more_background_color = false;
          }
          function morebackgroundcolor(value){
          $('#select_more_colors').modal('show');
            more_text_color=false;
            more_background_color = true;
          }
          $('#tab_header_save-morecolors').click(function(){
          if(more_text_color === true && more_background_color===false){
          more_text_color = viewC_color.style.backgroundColor
          Tab_Header_text_color = more_text_color
          $("#myTab").css("color",Tab_Header_text_color )
          obj['color']=Tab_Header_text_color
          more_text_color=false;
          }else if(more_text_color === false && more_background_color===true){
          more_background_color = viewC_color.style.backgroundColor
          Tab_Header_background_color = more_background_color
          $("#myTab").css("background-color", Tab_Header_background_color )
          obj['background']=Tab_Header_background_color
          }
          })
          $(".Tab_headers_color .color-checkspan").click(function () {
          $(".Tab_headers_color .color-checkspan").empty()
          $(".Tab_headers_color .color-checkspan").attr("id","")
          $(this).empty()
          $(this).append('<i class="fa-solid fa-check" style="margin-top: 6px;margin-left: 8px;"></i>');
          $(this).attr("id", "tab_background")
          Tab_Header_background_color = $(this).css("background-color");
          obj['background']=Tab_Header_background_color
          $("#myTab").css("background", Tab_Header_background_color);
          })

          $(".Tab_headers_color2 .color-checkspan2").click(function () {
          $(".Tab_headers_color2 .color-checkspan2").empty()
          $(".Tab_headers_color2 .color-checkspan2").attr("id","")
          $(this).empty()
          $(this).append('<i class="fa-solid fa-check" style="margin-top: 6px;margin-left: 8px;"></i>');
          $(this).attr("id", "tab_text_color")
          Tab_Header_text_color= $(this).css("background-color");
          obj['color']=Tab_Header_text_color
          $("#myTab").css("color", Tab_Header_text_color);
          })

          var font_size =document.getElementById("font_size_value");
          var sliderValuefont = document.getElementById("font_size")
          sliderValuefont.oninput =(()=>{
          Tab_Header_font_size = sliderValuefont.value
          var tab_font_preview = document.getElementById("myTab")
          tab_font_preview.style.fontSize =Tab_Header_font_size + "px";
          font_size.textContent = Tab_Header_font_size
          font_size.style.left = ((Tab_Header_font_size-12)/0.0613) + "px" ;
          obj['font-size']=Tab_Header_font_size+"px"
          })

          var tab_width=document.getElementById("tab_width_value");
          var sliderValue1 = document.getElementById("tab_width")
          sliderValue1.oninput =(()=>{
          let tab_width_value = sliderValue1.value
          var tab_width_preview = document.getElementById("myTab_Size")
          tab_width_preview.style.width = tab_width_value + "px";
          tab_width.textContent = tab_width_value
          tab_width.style.left = (tab_width_value/1.538) + "px" ;
          tab_size_config['width']=tab_width_value + "px"
          })

          var tab_height=document.getElementById("tab_height_value");
          var sliderValue2 = document.getElementById("tab_height")
          sliderValue2.oninput =(()=>{
          let tab_height_value = sliderValue2.value
          var tab_heigth_preview = document.getElementById("myTab_Size")
          tab_heigth_preview .style.height = tab_height_value + "px";
          tab_height.textContent = tab_height_value
          tab_height.style.left = (tab_height_value/0.256) + "px" ;
          tab_size_config['height']=tab_height_value + "px";
          })

          $("#tabSizeSave").click(function(){
            if($(".expand-button #applicationTabDesign").attr("data-data")){
                  var saved_tab_config = JSON.parse($(".expand-button #applicationTabDesign").attr('data-data'))
                  if("Tab_Size" in saved_tab_config){
                    for(i=0; i<configsize.length; i++){
                      if(!tab_size_config.hasOwnProperty(configsize[i])){
                        tab_size_config[configsize[i]] = saved_tab_config.Tab_Size[configsize[i]]
                      }
                    }
                 }
            }
          config_save['Tab_Size'] = tab_size_config
          Swal.fire({text:"Tab Size saved successfully.",icon:'success'})
          })
          $("#tabDesignSave").click(function(){
            if ($('input[name=generic]:checked').val() == "all-tabs") {
                $("#append-value").prop("value", "Alltabs");
                 var obj_config_all = JSON.parse(JSON.stringify(obj))
                if($(".expand-button #applicationTabDesign").attr("data-data")){
                  var saved_tab_config = JSON.parse($(".expand-button #applicationTabDesign").attr('data-data'))
                  if("All_Tab" in saved_tab_config){
                    for(i=0; i<config.length; i++){
                      if(!obj_config_all.hasOwnProperty(config[i])){
                        obj_config_all[config[i]] = saved_tab_config.All_Tab[config[i]]
                      }
                    }
                  }
                  else{
                    if(Object.keys(obj_config_all).length==0){
                      obj_config_all ={"background":"white", "color":"black", "font-size":"12px"}
                    }
                  }
                }
                config_save["All_Tab"] = obj_config_all
              }
              else if
                ($('input[name=specific-tab]:checked').val() == "indiviual-tab") {
                var tabName = $("#tabHeaderListAppend").val();
                $("#append-value").prop("value", tabName );
                var obj_config_ind  = JSON.parse(JSON.stringify(obj))
                if($(".expand-button #applicationTabDesign").attr("data-data")){
                  var saved_tab_config = JSON.parse($(".expand-button #applicationTabDesign").attr('data-data'))
                  if(tabName in saved_tab_config){
                    for(i=0; i<config.length; i++){
                      if(!obj_config_ind.hasOwnProperty(config[i])){
                        obj_config_ind[config[i]] = saved_tab_config[tabName][config[i]]
                        config_save[tabName] = obj_config_ind
                      }else{
                        config_save[tabName] = obj_config_ind
                      }
                    }
                  }else{
                    if(Object.keys(obj_config_ind).length==0){
                      obj_config_ind ={"background":"white", "color":"black", "font-size":"12px"}
                    }
                  }
                }
                config_save[tabName] = obj_config_ind
                saved_tab_config[tabName] = obj_config_ind
                }
                $(".expand-button #applicationTabDesign").attr("data-data", JSON.stringify(saved_tab_config));
                Swal.fire({text:"Tab design saved successfully.",icon:'success'});
          })
 </script>
<script>
                function mouseOverColorSelect(a,b){
                select_hex.textContent = a
                View_color.style.background = a
                }
                function selectColorMultiple(){
                select_hexC.textContent =  select_hex.textContent
                viewC_color.style.background = View_color.style.background
                }
                function selectcustomcolor(){
                let customcolor = document.getElementById('select_custom_color').value;
                let background_color = document.getElementById("viewC_color");
                let hex_code= document.getElementById("select_hexC");
                hex_code.textContent =  customcolor;
                background_color.style.background = customcolor;
                }
                function tabDesignSaveConfig(){
                  var layout = document.getElementById("layout_option")
                  config_save['Tab_Layout']=layout.value
                    $.ajax({
                      url: window.location.pathname,
                      data: {
                        'operation': 'tabScreenDesign',
                        'process_name': $('#PN1').text().trim().replace("Process: ",""),
                        'subprocess_name': $("#PN2").text().trim().replace("Subprocess: ", ""),
                        'tabs_config': JSON.stringify(config_save),
                          },
                      type: "POST",
                      dataType: "json",
                      success: function (data) {
                      Swal.fire({text:"Configuration saved successfully.",icon:'success'});

                      },
                      error: function () {
                        Swal.fire({text:"Error",icon:"error"});
                      }
                    });
                }

              $("#applicationTabDesign").click(function(){
              $(".Tab_headers_color2 .color-checkspan2").empty()
              $(".Tab_headers_color2 .color-checkspan2").attr("id"," ")
              $(this).empty()
              $("#myTab").css("color","black" );
              $(".Tab_headers_color .color-checkspan").empty()
              $(".Tab_headers_color .color-checkspan").attr("id"," ")
              $(".Tab_headers_color .color-checkspan").attr("id"," ")
              $(".Tab_headers_color .color-checkspan").attr("id"," ")
              $(this).empty()
              $("#myTab").css("background", "white");
              $("#myTab").css("font-size","12px");
              $("#fontSizeValue").html("12");
              $("#rangeBar").val(12)
              $("#font_size_value").html(12);
              var defaultfont= $("#font_size").val(12);
              $("#font_size_value").css("left", (defaultfont.val()-12)/0.0613+ "px");
              document.getElementById("applicationTabDesign").innerHTML=`Expand <i class="fa-solid fa-share"></i>`
              if (this.hasAttribute("data-data")) {
                var saved_tab_config = JSON.parse($(".expand-button #applicationTabDesign").attr('data-data'))
                var singletabname = $("#tabHeaderListAppend").val();
                if ($('input[name=generic]:checked').val() == "all-tabs"){
                      $(".append-value").val("Alltabs");
                      if("All_Tab" in saved_tab_config){
                      $("#myTab").css({"background":saved_tab_config.All_Tab.background, "color":saved_tab_config.All_Tab.color, "font-size":saved_tab_config.All_Tab["font-size"]});
                      $("#font_size_value").html(saved_tab_config.All_Tab["font-size"].replace("px", ''));
                     var slider_font_value1= $("#font_size").val(saved_tab_config.All_Tab["font-size"].replace("px", ''));
                      $("#font_size_value").css("left", (slider_font_value1.val()-12)/0.0613 + "px");
                      }
                }else if(($('input[name=specific-tab]:checked').val() == "indiviual-tab") ){
                        var singletabname = $("#tabHeaderListAppend").val();
                        $(".append-value").val(singletabname );
                        if(singletabname in saved_tab_config){
                        $("#myTab").css({"background":saved_tab_config[singletabname].background, "color":saved_tab_config[singletabname].color, "font-size":saved_tab_config[singletabname]["font-size"]});
                        $("#font_size_value").html(saved_tab_config[singletabname]["font-size"].replace("px", ''));
                        var slider_font_value2= $("#font_size").val(saved_tab_config[singletabname]["font-size"].replace("px", ''));
                        $("#font_size_value").css("left", (slider_font_value2.val()-12)/0.0613 + "px");
                        }
                 }
              }
              })
</script>
        <script>
          var editor;
          </script>
          <!-- Sets the basepath for the library if not in same directory -->
          <script type="text/javascript">
              mxBasePath = "{% static 'vendor/mxGraph' %}";
          </script>

              <!-- Loads and initializes the library -->
              <script type="text/javascript" src="{%static 'vendor/mxGraph/mxClient.js'%}"></script>
              <script type="text/javascript" src="{%static 'vendor/mxGraph/js/Init.js'%}"></script>
              <script type="text/javascript" src="{%static 'vendor/mxGraph/deflate/pako.min.js'%}"></script>
              <script type="text/javascript" src="{%static 'vendor/mxGraph/deflate/base64.js'%}"></script>
              <script type="text/javascript" src="{%static 'vendor/mxGraph/jscolor/jscolor.js'%}"></script>
              <script type="text/javascript" src="{%static 'vendor/mxGraph/sanitizer/sanitizer.min.js'%}"></script>
              <script type="text/javascript">
          // Program starts here. Creates a sample graph in the
          // DOM node with the specified ID. This function is invoked
          // from the onLoad event handler of the document (see below).
          function main12(container)
          {
             // Checks if the browser is supported
             if (!mxClient.isBrowserSupported())
             {
                mxUtils.error('Browser is not supported!', 200, false);
             }
             else
             {
                // Creates the graph inside the given container
                var graph = new mxGraph(container);

                // Enables rubberband selection
                new mxRubberband(graph);

                // Gets the default parent for inserting new cells. This
                // is normally the first child of the root (ie. layer 0).
                var parent = graph.getDefaultParent();

                // Adds cells to the model in a single step
                graph.getModel().beginUpdate();
                try
                {
                   var v1 = graph.insertVertex(parent, null,
                            'Hello,', 20, 20, 80, 30);
                   var v2 = graph.insertVertex(parent, null,
                            'World!', 200, 150, 80, 30);
                   var e1 = graph.insertEdge(parent, null, '', v1, v2);
                }
                finally
                {
                   // Updates the display
                   graph.getModel().endUpdate();
                }
             }
            };
            </script>
        <script>
        var element_pos = 0;
        var customTemp = 'no';
        var numberedColumn = [];
        var zoom = 1;
        var circleShape = 25
        var circleCount = 0;
        var topL = 20;
        var stateOfCss = {};
        stateOfCss["save"] = "no";
        // POSITION OF THE NEWLY CREATED ELEMENTS.
            var iCnt = 0;
            var toolbar = `<div class="toolbar float-right" style="display:none;right: 10px; top: 1px;position: absolute; left:100%">
              <button onclick="deleteElement1.call(this)" style="background-color:transparent; border:transparent; border-color:transparent; position:sticky;"><i class='far fa-trash-alt'></i></button><br>
              <button onclick="editElement.call(this)" style="background-color:transparent; border:transparent; border-color:transparent; position:sticky"><i class='far fa-edit'></i></button><br>
              </div>
              `
            var numTop = `<div class="num float-right" style="bottom:100%;position: absolute; left:50%">
              <span><span>
              </div>
              `
        var changeColor = function() {
          var curr = $(this);
          if ($('input[type=radio][name=js][value=multiple]').is(':checked') && ($('#formModal').find('.formLevelJs').css('display') != 'none')) {
            if(curr.hasClass('changeColor')) {
              curr.removeClass('changeColor')
            } else {
              curr.addClass('changeColor');
            }
          }
        }
        function analysisButtonStyling(obj){
          event.preventDefault();
          $('#chartModal').modal('hide');
              var attrData = $(obj).attr('data-list')
              if (attrData == ''|| attrData =='{}'){

              }else {
                var parsedAttrdata = JSON.parse(attrData)
                $('#analysisButtonModal').find('.modal-body').empty()
                $('#analysisButtonModal').find('.modal-body').append(`
                <div class="card-header">
                  <div class="float-right" style="margin-right: 6px;">
                    <button onclick="analysispopulateContent(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
                  </div>
                </div>
                `)
                i = 0
                for (var key in parsedAttrdata){
                  var content = analysisEditButtonContent()
                  $('#analysisButtonModal').find('.modal-body').append(content)
                  var singleCard = $('#analysisButtonModal').find('.masterstyling').eq(i)
                  $(singleCard).find('.selectButtonsOptions').val(key).trigger('change')
                  for (var key2 in parsedAttrdata[key]){
                    $(singleCard).find('[data-css]').each(function(){
                      if ($(this).attr('data-css') == key2){
                        $(this).val(parsedAttrdata[key][key2]).trigger('change')
                      }
                    })
                  }
                  $(singleCard).find('.iconappend').attr('data-list',parsedAttrdata[key]['data-icon'])
                  i = i + 1
              }
              }
          $('#analysisButtonModal').modal('show')
          $('#analysisButtonModal').find('select').each(function(){
    $(this).select2()
  })
        }
        var analysisEditButtonFunctionCall = 0
        function analysisEditButtonContent(){
          analysisEditButtonFunctionCall++;
          return(`
          <div class="card collapsed-card multipleJs masterstyling" id="analysis_master_stylling_${analysisEditButtonFunctionCall}" style="margin-left:-12px;margin-right: -12px;">
            <div class="card-header row">
              <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
                <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the Button:</p>
                <div class="col-4">
                <select class="select2 form-control selectButtonsOptions" onchange="analysisSelectedButtonName(this)" style="margin-left: 5px;">
                  <option value="" disabled selected>Select Button</option>
                  <option value="analysispreviousversions">Previous versions</option>
                  <option value="analysisshare">Share</option>
                  <option value="analysisglobalsettings">Global Settings</option>
                  <option value="analysisplotcharts">Plot charts</option>
                  <option value="analysistab">Tab</option>
                  <option value="analysispdf">PDF</option>
                  <option value="analysissave">Save</option>
                  <option value="analysisaddcomment">Add Comment</option>
                  <option value="analysisaddpdftab">PDF Tab</option>
                  <option value="analysisslicer">Slicer</option>
                  <option value="analysisgridlines">Grid lines</option>
                  </select>
                  </div>
                </div>
                  <div class="col-2">
                    <div class="card-tools float-right">
                      <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                      <button type="button" class="btn btn-tool" onclick="analysisRemoveEditButtonContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                  </div>
                </div>
            </div>
            <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
              <div class="row" style="padding-left: 15px;">
                <div class="col-4">
                  <p style="font-weight: bold;">Text of button:</p>
                  <input type="text"  data-css="text" class="textinput textInput form-control ">
                </div>
                <div class="col-4">
                    <p style="font-weight: bold;">Select text color:</p>
                    <input type="color" value="#ffffff" class="form-control" data-css="color">
                </div>
                <div class="col-4">
                    <p style="font-weight: bold;">Select background color:</p>
                    <div class="input-group">
                      <input type="color" value="#565a5e" class="form-control " data-css="background-color">
                      <select class="select2 form-control" data-css="opacity" >
                        <option value="1" selected >None</option>
                        <option value="0.9">0.9</option>
                        <option value="0.8">0.8</option>
                        <option value="0.7">0.7</option>
                        <option value="0.8">0.8</option>
                        <option value="0.7">0.7</option>
                        <option value="0.6">0.6</option>
                        <option value="0.5">0.5</option>
                        <option value="0.4">0.4</option>
                        <option value="0.3">0.3</option>
                        <option value="0.2">0.2</option>
                        <option value="0.1">0.1</option>
                        <option value="0">0</option>
                      </select>
                  </div>
                </div>
              </div>
              <div class="row" style="padding-left: 15px; padding-top:15px;">
                  <div class="col-4" >
                  <p style="font-weight: bold;">Select border type:</p>
                  <select class="select2 form-control" data-css="border-style" >
                      <option value="none">No border</option>
                      <option value="dotted" >Dotted</option>
                      <option value="dashed" >Dashed</option>
                      <option value="solid" >Solid</option>
                      <option value="double" >Double</option>
                      <option value="groove" >Groove</option>
                      <option value="ridge" >Ridge</option>
                      <option value="inset" >Inset</option>
                      <option value="outset" >Outset</option>
                      <option value="dotted dashed solid double" >Dotted dashed solid double</option>
                  </select>
                  </div>
                  <div class="col-4">
                  <p style="font-weight: bold;">Select border width:</p>
                  <div class="input-group">
                      <input type="float" class="form-control" data-css="border-width" >
                      <select class="select2 form-control" data-css="border-measure">
                        <option value="">None</option>
                        <option value="px">px</option>
                      </select>
                  </div>
                  </div>
                  <div class="col-4">
                    <p style="font-weight: bold;">Select border color:</p>
                    <input type="color" class="form-control" data-css="border-color" >
                  </div>
              </div>
              <div class="row" style="padding-left: 15px; padding-top:15px;">
                <div class="col-4" >
                  <p style="font-weight: bold;">Select icon to add:</p>
                  <button class="btn btn-primary iconappend" type="button" onclick="icon_button_selector(this)" data-list="">
                    Icon Selector
                  </button>
                </div>
                <div class="col-4">
                  <p style="font-weight: bold;">Select icon color:</p>
                  <input type="color" value="#ffffff" class="form-control" data-css="icon-color">
                </div>
                <div class="col-4" >
                  <p style="font-weight: bold;">Select button size:</p>
                  <select class="select2 form-control" data-css="font-size">
                    <option value="none">Normal</option>
                    <option value="10px">Xtra small</option>
                    <option value="12px">Small</option>
                    <option value="16px">Medium</option>
                    <option value="20px">Large</option>
                    <option value="24px">Xtra large</option>
                  </select>
                </div>

              </div>
              <div class="row" style="padding-left: 15px; padding-top:15px;">
                <div class="col-4">
                  <p style="font-weight: bold;">Select hover action:</p>
                  <select class="select2 form-control" onchange="analysishoverOptionsEditButton(this)" data-css="hoveractions">
                    <option value="none">No Effect</option>
                    <option value="Color">Color</option>
                    <option value="Gradient">Gradient</option>
                    <option value="textsize">Text-size</option>
                  </select>
                </div>
                <div class="col-4">
                  <p style="font-weight: bold;">Select shape:</p>
                  <select class="select2 form-control" data-css="shape">
                    <option value="">Select Shape</option>
                    <option value="square">Square</option>
                    <option value="circle">Circle</option>
                    <option value="oval">Oval</option>
                    <option value="rectangle">Rectangle</option>
                    <option value="parallelogram">Parallelogram</option>
                  </select>
                </div>
            </div>
            <div class="row hoverButton" style="padding-left: 15px; padding-top:15px; width: 100%; display: flex;">

            </div>
            </div>
          </div>
          </div>`)
        }
        function analysishoverOptionsEditButton(obj){
          var value = $(obj).val()
          if (value == 'Color'){
            $(obj).parent().parent().parent().find('.hoverButton').empty()
            $(obj).parent().parent().parent().find('.hoverButton').append(`
            <div class="col-4" >
              <p style="font-weight: bold;">Color of hover:</p>
              <input type="color" class="form-control stylingJsFieldColorInput" data-css="hover-color" value="#ffffff" required>
            </div>
            `)
          }else if (value == 'Gradient'){
            $(obj).parent().parent().parent().find('.hoverButton').empty()
            $(obj).parent().parent().parent().find('.hoverButton').append(`
            <div class="col-4" >
              <p style="font-weight: bold;">Select type of gradient:</p>
              <select class="select2 Gradeints form-control" data-css="type-gradient" required=""  >
                <option value="linear-gradient">Linear Gradients</option>
                <option value="radial-gradient">Radial Gradients</option>
                <option value="conic-gradient">Conic Gradients</option>
              </select>
            </div>
            <div class="col-4" >
              <p style="font-weight: bold;">Color 1:</p>
              <input type="color" class="form-control stylingJsFieldColorInput" data-css="gradient-color-1" required>
            </div>
            <div class="col-4" >
              <p style="font-weight: bold;">Color 2:</p>
              <input type="color" class="form-control stylingJsFieldColorInput" data-css="gradient-color-2" required>
            </div>
            `)
          }else if (value == 'textsize'){
            $(obj).parent().parent().parent().find('.hoverButton').empty()
            $(obj).parent().parent().parent().find('.hoverButton').append(`
            <div class="col-4" >
              <p style="font-weight: bold;">Select size:</p>
              <select class="select2 form-control" data-css="hover-text-size" required=""  >
                <option value="none">Normal</option>
                <option value="10px">Xtra small</option>
                <option value="12px">Small</option>
                <option value="16px">Medium</option>
                <option value="20px">Large</option>
                <option value="24px">Xtra large</option>
              </select>
            </div>
            `)
          }else if (value == 'none'){
            $(obj).parent().parent().parent().find('.hoverButton').empty()
          }
          $('#analysisButtonModal').find('.hoverButton').find('select').each(function(){
    $(this).select2()
  })
        }
        function analysispopulateContent(obj){
          var content = analysisEditButtonContent()
          $('#analysisButtonModal').find('.modal-body').append(content)
          $('#analysisButtonModal').find('select').each(function(){
    $(this).select2()
  })
        }
        function analysiscloseEditButton(obj){
          $('#chartModal').modal('show');
          $('#analysisButtonModal').modal('hide')
        }
        function analysisSelectedButtonName(obj){
          $(obj).parent().parent().parent().parent().find('[data-css]').eq(0).val($(obj).find("option:selected").text()).trigger('change')
        }
        function analysisRemoveEditButtonContent(obj){
          $(obj).parent().parent().parent().parent().remove()
        }
        function analysisSaveEditButton(obj){
          var cards = $('#analysisButtonModal').find('.masterstyling')
          var fullValues = {}
          var lengthOfCards = cards.length;
          for (let i = 0; i < lengthOfCards; i++) {
            var values = {}
            var singleCard = $('#analysisButtonModal').find('.masterstyling').eq(i)
            var selectedButton = $(singleCard).find('.selectButtonsOptions').val()
            $(singleCard).find('[data-css]').each(function(){values[$(this).attr('data-css')] = $(this).val()})
            values['data-icon'] = $(singleCard).find('.iconappend').attr('data-list')
            values['rgba'] = hexToRGB(values['background-color'],values['opacity'])
            fullValues[selectedButton] = values
          }
          $('#analysisButtonId').attr('data-list',JSON.stringify(fullValues))
          $('#analysisButtonModal').modal('hide');
          $("#chartModal").modal('show');
        }
        function extractAnalysisButtons(obj){
          var buttonValues = $('#analysisButtonId').attr('data-list')
          if (buttonValues == '' || buttonValues == '{}' ){
            return null
          }else {
            var parsedValues = JSON.parse(buttonValues)
            return parsedValues
          }
        }
        function changeSeqOfCircle() {

          numberedColumn = []
          var arr = []
          var count = -1
          for (i = 0; i < 2000; i = i + 25) {
            count = 0;
            var r = []
            for (j = 0; j < 2000; j = j + 25) {
              for (k = 0; k < $('.formChild').length; k++) {
                if (parseInt($('.formChild').eq(k).css('top')) == i) {
                  if(parseInt($('.formChild').eq(k).css('left')) == j) {
                    r.push($('.formChild').eq(k).attr('id'))
                    count = 1;
                  }
                }
              }
            }
            if (count == 1) {

              arr.push(r)
              numberedColumn.push(r)
            }
          }
          var count = 0;
          selectedColumn = []
          numberedColumn = []
          $('.formChild').each(function() {
            count = count + 1
            numberedColumn.push($(this).attr('id'))
          })

        }
        document.addEventListener('DOMContentLoaded', (event) => {
          function handleDragStart(e) {
            this.style.opacity = '0.4';

            dragSrcEl = this;

            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.innerHTML);
          }

          function handleDragEnd(e) {
          this.style.opacity = '1';

          items.forEach(function (item) {
            item.classList.remove('over');
          });
          }

          function handleDragOver(e) {
          if (e.preventDefault) {
            e.preventDefault();
          }

          return false;
          }

          function handleDragEnter(e) {
          this.classList.add('over');
          }

          function handleDragLeave(e) {
          this.classList.remove('over');
          }
          function handleDrop(e) {
          e.stopPropagation();

            if (dragSrcEl !== this) {
              dragSrcEl.innerHTML = this.innerHTML;
              this.innerHTML = e.dataTransfer.getData('text/html');
            }

            return false;
          }
          let items = document.querySelectorAll('.container .box');
          items.forEach(function(item) {
          item.addEventListener('dragstart', handleDragStart, false);
          item.addEventListener('dragover', handleDragOver, false);
          item.addEventListener('dragenter', handleDragEnter, false);
          item.addEventListener('dragleave', handleDragLeave, false);
          item.addEventListener('dragend', handleDragEnd, false);
          });
          });


        function changeFieldType(id,js) {
          for(let i = 0; i < allFieldsColumns.length; i++) {
            if(id == allFieldsColumns[i]) {
              if(allFieldsColumnsType[i] != 'BooleanField') {
                var css_for = $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+id).find('div').attr('style');
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+id).find('div').find('.foreignKey').remove();
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+id).find('.'+id).css('display','none')
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+id).find('div').append(`<select class="form-control select2 foreignKey" name='${id}'  ><option>----</option></select>`)
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+id).find('div').find('select').eq(-1).attr('style',css_for)
              }
            }
          }
        }
        function populatePreview(selectedColumns=[]) {
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').not('.formBtn').remove();
            $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').eq(0).find('.form-row').not('.formBtn').remove();
            var formRows = $('#selectCVFormRowsManualEntry').val();
            if (formRows) {
              formRows = Number(formRows);
              for (let i = 0; i < formRows; i++) {
                $('#createViewFormPreviewContainerCard').prepend(`<div class="form-row" data-row-num="${i}"></div>`);
                $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').eq(0).prepend(`<div class="form-row" data-row-num="${i}"></div>`);
              }
            } else {
              formRows = 1;
              $('#createViewFormPreviewContainerCard').prepend(`<div class="form-row" data-row-num="0"></div>`);
              $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').eq(0).prepend(`<div class="form-row" data-row-num="0"></div>`);
            };
            var formColumns = $('#selectCVFormColumns').val();
            if (formColumns) {
              formColumns = Number(formColumns);
            } else {
              formColumns = 4;
            }
            var formRowConfig = {};
            var buttonRowConfig = [];
            if ($('#saveFormStyleConfigButton').attr('data-config')) {
              existingStylingConfig = JSON.parse($('#saveFormStyleConfigButton').attr('data-config'));
              if (existingStylingConfig.sizing_placement_settings) {
                formRowConfig = existingStylingConfig["sizing_placement_settings"];
                buttonRowConfig = existingStylingConfig["button_row_config"];
              }
            }
            var col_class = Math.floor(12/formColumns);
            if (selectedColumns.length == 0) {
              selectedColumns = allFieldsColumns;
            }
            for (col of selectedColumns) {
              for (let [row, value] of Object.entries(formRowConfig)) {
                if (Object.keys(value).includes(col)) {
                  break;
                } else if (row == formRows-1){
                  formRowConfig[row][col] = {type: 'field', name: col, sizeConfig: {"type":"bootstrap-grid","large_screen":String(col_class),"medium_screen":String(col_class),"small_screen":"12"}}
                } else {
                  continue;
                }
              }
            }
            if (Object.keys(formRowConfig).length) {
              if (allFieldsColumns.length) {
                for (let [row, value] of Object.entries(formRowConfig)) {
                  let rowNo = Number(row);
                  for (let [name, config] of Object.entries(value)) {
                    if (config.type == "field") {
                      var index = allFieldsColumns.indexOf(name);
                      var sizingConfig = config.sizeConfig;
                      insertSelectedFieldShape(name,allFieldsColumnsType[index],1,allFieldsColumnsNull[index],verboseName[index],dropDown[index], col=col_class, formRows=formRows, formColumns=formColumns, rowNo=rowNo, placementOverwrite=true, sizeConfig=sizingConfig);
                    } else {
                      inserSelectedButtonShape(name, rowNo=rowNo, placementOverwrite=true);
                    }
                  }
                }
              }
            } else {
              for(let i = 0; i < allFieldsColumns.length; i++) {
                if (allFieldsColumns[i] != 'created_by' && allFieldsColumns[i] != 'created_date' && allFieldsColumns[i] != 'modified_by' && allFieldsColumns[i] != 'modified_date' && allFieldsColumns[i] != 'active_to' && allFieldsColumns[i] != 'active_from') {
                  if (allFieldsColumnsNull[i] == 0) {
                    insertSelectedFieldShape(allFieldsColumns[i],allFieldsColumnsType[i],1,0,verboseName[i],dropDown[i], col=col_class, formRows=formRows, formColumns=formColumns, rowNo=0, placementOverwrite=false)
                  } else {
                    insertSelectedFieldShape(allFieldsColumns[i],allFieldsColumnsType[i],1,1,verboseName[i],dropDown[i], col=col_class, formRows=formRows, formColumns=formColumns, rowNo=0, placementOverwrite=false)
                  }
                }
              }
            }
        }
        function showLabelFunction() {
          var check = $("#show_labels").is(":checked")
          var dt = ['date', 'time', 'datetime-local']
          if (check == false) {
            for(var i = 0; i< allFieldsColumns.length; i++) {
              var te = $(`input[name='${allFieldsColumns[i]}']`)
              if(te.parent().find('select').length > 0) {
                  te.parent().find('select').empty()
                  te.parent().find('select').append(`<option disabled selected>${te.parent().parent().children("label").eq(0).text()}</option>`)
                }
              if(allFieldsColumnsType[i] == "DateField") {
                te.attr("type", "text")
                te.bind("focus",function() {this.type="date"})
                te.bind("focusout",function() {this.type='text'})
              }
              else if(allFieldsColumnsType[i] == "DateTimeField") {
                te.attr("type", "text")
                te.bind("focus",function() {this.type="datetime-local"})
                te.bind("focusout",function() {this.type='text'})
              }
              else if(allFieldsColumnsType[i] == "TimeField") {
                te.attr("type", "text")
                te.bind("focus",function() {this.type="time"})
                te.bind("focusout",function() {this.type='text'})
              }
              te.parent().parent().children("label").css("opacity","0")
              if (te.attr('type') == 'checkbox' || te.attr('type') == 'file') {
                te.parent().parent().children("label").css("opacity","100")
              }
              te.attr("placeholder", `${te.parent().parent().children("label").eq(0).text()}`)
              var te = $(`select[name='${allFieldsColumns[i]}']`)
              te.parent().parent().children("label").css("opacity","0")
              if (te.parent().children().length > 0) {
                if (te.parent().children()[0].tagName == "SELECT") {
                  $(`select[name='${allFieldsColumns[i]}'`).append(`<option disabled selected>${te.parent().parent().children("label").eq(0).text()}</option>`)
                }
              }
              var te = $(`textarea[name='${allFieldsColumns[i]}']`)
              te.parent().parent().children("label").css("opacity","0")
            }
          }
          else {
            for(var i = 0; i< allFieldsColumns.length; i++) {
              var te = $(`input[name='${allFieldsColumns[i]}']`)
              if(allFieldsColumnsType[i] == "DateField") {
                te.attr("type", "date")
                te.unbind(`focus`)
                te.unbind(`focusout`)
              }
              else if(allFieldsColumnsType[i] == "DateTimeField") {
                te.attr("type", "datetime-local")
                te.unbind(`focus`)
                te.unbind(`focusout`)
              }
              else if(allFieldsColumnsType[i] == "TimeField") {
                te.attr("type", "time")
                te.unbind(`focus`)
                te.unbind(`focusout`)
              }
              te.parent().parent().children("label").css("opacity","100")
              if (dt.includes(te.attr('type'))) {
                te.attr('type', te.attr('type'))
                te.unbind(`focus`)
                te.unbind(`focusout`)
              }
              te.attr("placeholder", "")
              var te = $(`select[name='${allFieldsColumns[i]}']`)
              te.parent().parent().children("label").css("opacity","100")
              if (te.parent().children().length > 0) {
                if (te.parent().find('select').length > 0) {
                  te.parent().find('select').empty()
                  te.parent().find('select').append(`<option disabled selected>----</option>`)
                }
                if (te.parent().children()[0].tagName == "SELECT") {
                  $(`select[name='${allFieldsColumns[i]}'`).empty()
                }
              }
              var te = $(`textarea[name='${allFieldsColumns[i]}']`)
              te.parent().parent().children("label").css("opacity","100")
            }
          }
        }
        function populatePreviewNotNull(bool,verbose) {
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').empty()
          for(let i = 0; i < allFieldsColumns.length; i++) {
            if (allFieldsColumns[i] != 'created_by' && allFieldsColumns[i] != 'created_date' && allFieldsColumns[i] != 'modified_by' && allFieldsColumns[i] != 'modified_date' && allFieldsColumns[i] != 'active_to' && allFieldsColumns[i] != 'active_from') {
              if (allFieldsColumnsNull[i] == 0) {
                insertSelectedFieldShape(allFieldsColumns[i],allFieldsColumnsType[i],1,0,verboseName[i],dropDown[i])
                if (!bool) {
                  if(verbose != verboseName[i]){
                    fieldproperty = {
                      "fieldname": allFieldsColumns[i],
                      "fieldtype": allFieldsColumnsType[i],
                      "fieldVerbose": verboseName[i]
                    }
                    if(!selectedFieldL3.includes(allFieldsColumns[i])){
                      selectedFieldL3.push(allFieldsColumns[i])
                    }
                    fields.push(fieldproperty);
                  }
                } else {
                    fieldproperty = {
                      "fieldname": allFieldsColumns[i],
                      "fieldtype": allFieldsColumnsType[i],
                      "fieldVerbose": verboseName[i]
                    }
                    if(!selectedFieldL3.includes(allFieldsColumns[i])){
                      selectedFieldL3.push(allFieldsColumns[i])
                    }
                    fields.push(fieldproperty);
                }
              }
            }
          }
        }

        function insertSelectedFieldShape(name,type,bool,mand=1,verb='',dropdown,col=col_val, formRows=1, formColumns=4, rowNo=0, placementOverwrite=false, sizeConfig={}) {
          choice = '';
          if (type == "IntegerField" || type == "BigIntegerField" || type == "FloatField") {
            choice = `<input data-type="${type}" type="number"  name="${name}" min="-2147483648" max="2147483647"  class="textinput textInput form-control ${name}">`
          } else if ((type == 'CharField' && dropdown == 0) || (type == 'URLField') || (type == 'CardField') || (type == 'CardCvvField') || (type == 'CardExpiryField') || (type == 'CardTypeField') || (type == 'EmailTypeField')) {
            choice = `<input data-type="${type}" type='text' name='${name}' class="textinput textInput form-control ${name}">`
          } else if (type == 'DateField' || type == 'DateTimeField' || type == 'DateRangeField' || type == 'DateTimeRangeField') {
            choice = `<input data-type="${type}" type="date" name="${name}" placeholder="DD:MM:YYYY"  class="textinput textInput form-control ${name}">`
          } else if (type == 'TextField') {
            choice = `<textarea data-type="${type}" type='text' name='${name}' class="textinput textInput form-control ${name}">Enter text</textarea>`
          } else if (type == 'BooleanField') {
            choice = `<input data-type="${type}" type='checkbox' name='${name}' class='${name}'>`
          } else if (type == "EmailField") {
            choice = `<input data-type="${type}" type='email' name='${name}' class="textinput textInput form-control ${name}">`
          } else if (type == "ImageField") {
            choice = `<input data-type="${type}" type='image' name='${name}' class="custom-file-input ${name}">`
          } else if (type == "FileField") {
            choice = `<input data-type="${type}" type='file' name='${name}' class="custom-file-input ${name}">`
          } else if (type == "ForeignKey" || dropdown != 0) {
            choice = `<select data-type="${type}" class="form-control select2 ${name}" name='${name}'  ><option>----</option></select>`
          } else if (type == "MultiselectField") {
            choice = `<input data-type="${type}" type='text' name='${name}' class="textinput textInput form-control ${name}">`
          } else {
            choice = `<select data-type="${type}" class="form-control select2 ${name}" name='${name}'  ><option>----</option></select>`
          }
          var ast = ""
          if(mand == 0 ){
            ast = "*"
          }
          var classFile = ''
          divFile = ``
          if(["FileField","ImageField"].includes(type)){
            classFile = 'custom-file'
            divFile = `<label class='custom-file-label' for=''>Choose file</label>`
          }
          if (bool != 0) {
            let colClass = `col-lg-${col} col-md-${col} col-sm-1`;
            let styleAttr = '';
            let customAttr = `data-grid-lg="${col}" data-grid-md="${col}" data-grid-sm="12"`;
            if (Object.keys(sizeConfig).length) {
              if (sizeConfig.type == 'customized') {
                styleAttr += `width: ${sizeConfig.width}; height: ${sizeConfig.height};`;
                customAttr = `data-customized-width="${sizeConfig.width}" data-customized-height="${sizeConfig.height}"`;
                colClass = "";
              } else {
                colClass = `col-lg-${sizeConfig.large_screen} col-md-${sizeConfig.medium_screen} col-sm-${sizeConfig.small_screen}`;
                customAttr = `data-grid-lg="${sizeConfig.large_screen}" data-grid-md="${sizeConfig.medium_screen}" data-grid-sm="${sizeConfig.small_screen}"`;
                styleAttr = "";
              }
            }
            html = `<div class="form-group cv-form-field ${colClass} box" ${customAttr} data-field-name="${name}" onclick="changeColor.call(this)" style="${styleAttr}">
              <div id=${name}  class="form-group">
                <label  class="requiredField label" style="display:inline-block; font-size:12px;">${verb}<span class="asteriskField">${ast}</span><i class="fas fa-edit float-right editjs" onclick="editElement.call(this)" style="margin-left:8px;margin-top:2px"></i></label>
                  <div class="${classFile}"> ${choice } ${divFile}</div>
              </div>
            </div>`
            if (placementOverwrite) {
              $('#createViewFormPreviewContainerCard').find('.form-row').not('.formBtn').eq(rowNo).append(html);
              $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').find('.form-row').not('.formBtn').eq(rowNo).append(html)
            } else {
              if (formRows >  1) {
                for (let i = 0; i < formRows; i++) {
                  var noOfEelementsInRow = $('#createViewFormPreviewContainerCard').find('.form-row').not('.formBtn').eq(i).find(`.form-group.cv-form-field`).length;
                  if ((noOfEelementsInRow < formColumns) || (i == (formRows-1))) {
                    $('#createViewFormPreviewContainerCard').find('.form-row').not('.formBtn').eq(i).append(html);
                    $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').find('.form-row').not('.formBtn').eq(i).append(html)
                    break;
                  } else {
                    continue;
                  }
                }
              } else {
                $('#createViewFormPreviewContainerCard').find('.form-row').not('.formBtn').eq(0).append(html);
                $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').find('.form-row').not('.formBtn').eq(0).append(html)
              }
            }
          }
          $('#createViewModal').find('.card-body').on('click','.formChild',function() {
            fillColor($(this));
          })
          $('#createViewModal').find('.card-body').on('mouseenter','.formChild',function() {
            formOnHover($(this));
          })
          $('#createViewModal').find('.card-body').on('mouseleave','.formChild',function() {
            formOffHover($(this));
          })
          $('#createViewModal').find('.card-body').find('.formTempContainer').find('.editjs').css('display','none');
        }

        function createViewButtonHTMLGenerator(name) {
          var html = "";
          if (name == "Save") {
            html = `<div class="form-buttons" style="display:inline-block;"><input disabled type="submit" name="submit" value="Save" class="btn btn-primary buttonstyling button_standard_save formBtnSave" id="savebutton_" >`
          } else if (name == "Compare With Existing") {
            html = `<div class="form-buttons" style="display:inline-block;"><input type="button" name="save" value="Compare With Existing" class="btn btn-primary buttonstyling compareWithExisting" style="margin-right:4px;display: none;"></div>`
          } else if (name == "Back") {
            html = `<div class="form-buttons" style="display:inline-block;"><button disabled type="button" name="back" value="Back"  class="btn btn-primary buttonstyling backbtn ml-2" id="button-id-back"> &#x2190; </button></div>`
          } else if (name == "Save as Draft") {
            html = `<div class="form-buttons" style="display:inline-block;"><input disabled type="submit" name="submit" value="Save as Draft" data-entry="New" class="btn btn-primary buttonstyling ml-2 consBtn" id="saveDraftbutton_"></div>`
            html += `<div class="form-buttons" style="display:inline-block;"><input disabled type="button" name="previewButton" value="View Draft Versions" data-table-name="Product_Master" class="btn btn-primary buttonstyling ml-2 consBtn" id="previewDraft_"></div>`
            html += `<div class="form-buttons" style="display:inline-block;"><input disabled type="button" name="resetDraft" value="Reset Draft Status " data-table-name="Product_Master" class="btn btn-primary buttonstyling ml-2 consBtn" id="resetDraft_"></div>`
          } else if (name == "Custom Validation") {
            html = `<div class="form-buttons" style="display:inline-block;"><input disabled type="button" value="Custom Validation" name="customValidation"  type="button" class="btn btn-primary buttonstyling ml-2  custBtnn" id="customValidationList"  data-table-name='' data-toggle="modal" data-target="#customValidation" data-elementID="" ></div>`
          } else if (name == "View Transactions Status") {
            html = `<div class="form-buttons" style="display:inline-block;"><button disabled type="button" value="View Transactions" name="View Transactions"  type="button" class="btn btn-primary buttonstyling ml-2  viewTransactionsClass" id="viewTransactions">View Transactions Status</button></div>`
          } else if (name == "Refresh Computation") {
            html = `<div class="form-buttons" style="display:inline-block;"><input disabled type="button" value="Refresh Computation" name="computedValue"  type="button" class="btn btn-primary buttonstyling ml-2  compBtnn"  data-table-name='' data-toggle="modal" data-target="#computedValue" data-elementID="" id="calculateComp"></div>`
          } else if (name == "View History") {
            html = `<div class="form-buttons" style="display:inline-block;"><input disabled type="button" value="View History" name="ViewHistory"  type="button" class="btn btn-primary buttonstyling ml-2  viewHistBtn"  data-table-name='' data-toggle="modal" data-target="#viewHistory" id="viewHistory_"></div>`
          } else if (name == "View Rejected Records") {
            html = `<div class="form-buttons" style="display:inline-block;"><input disabled type="button" value="View Rejected Records" name="View Rejected Records"  type="button" class="btn btn-primary buttonstyling ml-2  viewRejectRecordBtn"  data-table-name='' data-toggle="modal" data-elementID="" id="rejectedRecords" ></div>`
          } else if (name == "Set Approval Parameters") {
            html = `<div class="form-buttons" style="display:inline-block;"><input disabled type="button" value="Set Approval Parameters" name="Set Approval Parameters"  type="button" class="btn btn-primary buttonstyling ml-2"></div>`
          } else {
            html = ''
          }
          return html
        }

        function inserSelectedButtonShape(name, rowNo, placementOverwrite=false) {
          var html = createViewButtonHTMLGenerator(name);
          if (placementOverwrite) {
            $('#createViewFormPreviewContainerCard').find('.form-row').not('.formBtn').eq(rowNo).append(html);
            $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').find('.form-row').not('.formBtn').eq(rowNo).append(html)
          } else {
            $('#createViewFormPreviewContainerCard').find('.formBtn').append(html);
            $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').find('.formBtn').append(html)
          }
        }


        var validation = function() {
          if(parseInt($(this).val()) < 1) {
            $(this).val(1).trigger('change')
          }
          if(parseInt($(this).val()) > parseInt($(this).attr('maximum'))) {
            $(this).val(parseInt($(this).attr('maximum'))).trigger('change')
          }
        }
        function hyperlinking(obj){
          if($("#selectTemplate").val() != "Multi Dropdown View"){
            var attrData = $('#hyperlinkingBtn').attr('data-list')
          }else if($("#selectTemplate").val() == "Multi Dropdown View"){
            var attrData = $('#hyperlinkingBtn_mul').attr('data-list')
          }
          if (attrData == ''|| attrData =='null'){
            if($("#selectTemplate").val() != "Multi Dropdown View"){
              $('#selectHyperLinkedColumnMasterPC').empty()
            }else if($("#selectTemplate").val() == "Multi Dropdown View"){
              $('#selectHyperLinkedColumnMasterPC_mul').empty()
            }
            var selectedTable = $('#selectTablePC').val()
            $.ajax({
              url: window.location.pathname,

              data: {
                'operation': 'formTableFieldsAll',
                'tablesForm': JSON.stringify([selectedTable]),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                if($("#selectTemplate").val() != "Multi Dropdown View"){
                  $('#selectHyperLinkedColumnMasterPC').empty()
                  $('#selectHyperLinkedColumnMasterPC').append(`<option value="" selected>Master Table Column</option>`);
                }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                  $('#selectHyperLinkedColumnMasterPC_mul').empty()
                  $('#selectHyperLinkedColumnMasterPC_mul').append(`<option value="" selected>Master Table Column</option>`);
                }
                for (j in data.finalFieldList) {
                  if($("#selectTemplate").val() != "Multi Dropdown View"){
                    $('#selectHyperLinkedColumnMasterPC').append(
                      `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                    )
                  }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                    $('#selectHyperLinkedColumnMasterPC_mul').append(
                      `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                    )
                  }
                }

                if($("#selectTemplate").val() != "Multi Dropdown View"){
                  $('#selectHyperLinkedTablePC').val('').trigger('change')
                  $('#selectHyperLinkedColumnPC').val('').trigger('change')
                  $('#selectHyperLinkedAdditionalPC').val('').trigger('change')
                }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                  $('#selectHyperLinkedTablePC_mul').val('').trigger('change')
                  $('#selectHyperLinkedColumnPC_mul').val('').trigger('change')
                  $('#selectHyperLinkedAdditionalPC_mul').val('').trigger('change')
                }

              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
          }else{
            var selectedTable = $('#selectTablePC').val()
            $.ajax({
              url: window.location.pathname,

              data: {
                'operation': 'formTableFields',
                'tablesForm': JSON.stringify([selectedTable]),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                var attrData = $('#hyperlinkingBtn').attr('data-list')
                attrData = JSON.parse(attrData)
                if($("#selectTemplate").val() != "Multi Dropdown View"){
                  $('#selectHyperLinkedColumnMasterPC').empty()
                  $('#selectHyperLinkedColumnMasterPC').append(`<option value="" selected>Master Table Column</option>`);
                }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                  $('#selectHyperLinkedColumnMasterPC_mul').empty()
                  $('#selectHyperLinkedColumnMasterPC_mul').append(`<option value="" selected>Master Table Column</option>`);
                }
                for (j in data.finalFieldList) {
                  if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from'){
                    if($("#selectTemplate").val() != "Multi Dropdown View"){
                      $('#selectHyperLinkedColumnMasterPC').append(
                        `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                      )
                    }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                      $('#selectHyperLinkedColumnMasterPC_mul').append(
                        `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                      )
                    }
                  }

                }

                if($("#selectTemplate").val() != "Multi Dropdown View"){
                  $('#selectHyperLinkedColumnMasterPC').val(attrData['masterColumn']).trigger('change')
                  $('#selectHyperLinkedTablePC').val(attrData['linkedTable']).trigger('change')
                }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                  $('#selectHyperLinkedColumnMasterPC_mul').val(attrData['masterColumn']).trigger('change')
                  $('#selectHyperLinkedTablePC_mul').val(attrData['linkedTable']).trigger('change')
                }
              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
          }
        }
        function hyperlinking1(obj){
          if($("#selectTemplate").val() != "Multi Dropdown View"){
            var linkedTable = $('#selectHyperLinkedTablePC').val()
          }else if($("#selectTemplate").val() == "Multi Dropdown View"){
            var linkedTable = $('#selectHyperLinkedTablePC_mul').val()
          }
          if (linkedTable== null){

          }else{

          if($("#selectTemplate").val() != "Multi Dropdown View"){
            var attrData = $('#hyperlinkingBtn').attr('data-list')
          }else if($("#selectTemplate").val() == "Multi Dropdown View"){
            var attrData = $('#hyperlinkingBtn_mul').attr('data-list')
          }
          if (attrData == ''|| attrData =='null'){
            if($("#selectTemplate").val() != "Multi Dropdown View"){
              var selectedTable = $('#selectHyperLinkedTablePC').val()
            }else if($("#selectTemplate").val() == "Multi Dropdown View"){
              var selectedTable = $('#selectHyperLinkedTablePC_mul').val()
            }
            $.ajax({
              url: window.location.pathname,

              data: {
                'operation': 'formTableFieldsAll',
                'tablesForm': JSON.stringify([selectedTable]),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                if($("#selectTemplate").val() != "Multi Dropdown View"){
                  $('#selectHyperLinkedColumnPC').empty()
                  $('#selectHyperLinkedAdditionalPC').empty()
                }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                  $('#selectHyperLinkedColumnPC_mul').empty()
                  $('#selectHyperLinkedAdditionalPC_mul').empty()
                }

                for (j in data.finalFieldList) {
                  if($("#selectTemplate").val() != "Multi Dropdown View"){
                    $('#selectHyperLinkedColumnPC').append(
                      `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                    )
                    $('#selectHyperLinkedAdditionalPC').append(
                      `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                    )
                  }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                    $('#selectHyperLinkedColumnPC_mul').append(
                      `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                    )
                    $('#selectHyperLinkedAdditionalPC_mul').append(
                      `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                    )
                  }
                }

            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
          })
          }else {
            if($("#selectTemplate").val() != "Multi Dropdown View"){
              var selectedTable = $('#selectHyperLinkedTablePC').val()
            }else if($("#selectTemplate").val() == "Multi Dropdown View"){
              var selectedTable = $('#selectHyperLinkedTablePC_mul').val()
            }
            $.ajax({
              url: window.location.pathname,

              data: {
                'operation': 'formTableFields',
                'tablesForm': JSON.stringify([selectedTable]),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                if($("#selectTemplate").val() != "Multi Dropdown View"){
                  $('#selectHyperLinkedColumnPC').empty()
                  $('#selectHyperLinkedAdditionalPC').empty()
                }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                  $('#selectHyperLinkedColumnPC_mul').empty()
                  $('#selectHyperLinkedAdditionalPC_mul').empty()
                }

                for (j in data.finalFieldList) {
                  if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from'){
                    if($("#selectTemplate").val() != "Multi Dropdown View"){
                      $('#selectHyperLinkedColumnPC').append(
                        `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                      )
                      $('#selectHyperLinkedAdditionalPC').append(
                        `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                      )
                    }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                      $('#selectHyperLinkedColumnPC_mul').append(
                        `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                      )
                      $('#selectHyperLinkedAdditionalPC_mul').append(
                        `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                      )
                    }
                  }

                }
                if($("#selectTemplate").val() != "Multi Dropdown View"){
                  var attrData = $('#hyperlinkingBtn').attr('data-list')
                  attrData = JSON.parse(attrData)
                  $('#selectHyperLinkedColumnPC').val(attrData['linkedColumn']).trigger('change')
                  $('#selectHyperLinkedAdditionalPC').val(attrData['LinkedAdditional']).trigger('change')
                }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                  var attrData = $('#hyperlinkingBtn_mul').attr('data-list')
                  attrData = JSON.parse(attrData)
                  $('#selectHyperLinkedColumnPC_mul').val(attrData['linkedColumn']).trigger('change')
                  $('#selectHyperLinkedAdditionalPC_mul').val(attrData['LinkedAdditional']).trigger('change')
                }
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
          })

          }
        }
        }
        function extractTheHyperLinkValues(obj){
          var linkvalues = {}
          if($("#selectTemplate").val() != "Multi Dropdown View"){
            var masterColumn = $('#selectHyperLinkedColumnMasterPC').val()
            var linkedTable = $('#selectHyperLinkedTablePC').val()
            var linkedColumn = $('#selectHyperLinkedColumnPC').val()
            var LinkedAdditional = $('#selectHyperLinkedAdditionalPC').val()
          }else if($("#selectTemplate").val() == "Multi Dropdown View"){
            var masterColumn = $('#selectHyperLinkedColumnMasterPC_mul').val()
            var linkedTable = $('#selectHyperLinkedTablePC_mul').val()
            var linkedColumn = $('#selectHyperLinkedColumnPC_mul').val()
            var LinkedAdditional = $('#selectHyperLinkedAdditionalPC_mul').val()
          }
          linkvalues = {"masterColumn":masterColumn,"linkedTable":linkedTable,"linkedColumn":linkedColumn,"LinkedAdditional":LinkedAdditional}
          if($("#selectTemplate").val() != "Multi Dropdown View"){
            $('#hyperlinkingBtn').attr('data-list',JSON.stringify(linkvalues))
          }else if($("#selectTemplate").val() == "Multi Dropdown View"){
            $('#hyperlinkingBtn_mul').attr('data-list',JSON.stringify(linkvalues))
          }
          if (!masterColumn || masterColumn == "" || masterColumn == null){
            return null
          }else{
            return linkvalues;
          }
        }
        function extractTheHyperLinkValues1(obj){
          var linkvalues = {}
          if($("#selectTemplate").val() != "Multi Dropdown View"){
            var masterColumn = $('#selectHyperLinkedColumnMasterPC').val()
            var linkedTable = $('#selectHyperLinkedTablePC').val()
            var linkedColumn = $('#selectHyperLinkedColumnPC').val()
            var LinkedAdditional = $('#selectHyperLinkedAdditionalPC').val()
          }else if($("#selectTemplate").val() == "Multi Dropdown View"){
            var masterColumn = $('#selectHyperLinkedColumnMasterPC_mul').val()
            var linkedTable = $('#selectHyperLinkedTablePC_mul').val()
            var linkedColumn = $('#selectHyperLinkedColumnPC_mul').val()
            var LinkedAdditional = $('#selectHyperLinkedAdditionalPC_mul').val()
          }
          if (!masterColumn || masterColumn == "" || masterColumn == null){
            return null
          }else{
            linkvalues = {"masterColumn":masterColumn,"linkedTable":linkedTable,"linkedColumn":linkedColumn,"LinkedAdditional":LinkedAdditional}
            return linkvalues;
          }
        }
        function extractCreateViewButtons(obj){
          var buttonValues = $('#editButtonId').attr('data-list')
          if (buttonValues == '' || buttonValues == '{}' ){
            return null
          }else {
            var parsedValues = JSON.parse(buttonValues)
            return parsedValues
          }
        }
        function removeSelectedFieldShape(name) {
          var bool = 1
          for(let i = 0; i < allFieldsColumns.length; i++) {
            if (allFieldsColumns[i] != 'created_by' && allFieldsColumns[i] != 'created_date' && allFieldsColumns[i] != 'modified_by' && allFieldsColumns[i] != 'modified_date' && allFieldsColumns[i] != 'active_to' && allFieldsColumns[i] != 'active_from') {
              if(allFieldsColumns[i] == name) {
                if (allFieldsColumnsNull[i] == 0) {
                  bool = 0;
                  break;
                }
              }
            }
          }
          if (bool == 1 || (fields.length == 0)) {
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find(`.${name}`).parent().parent().parent().remove();
          }
        }
        function extractListViewColumnRename(obj){
          if($('#selectTemplate').val() == 'Multi Dropdown View'){
            var buttonValues = $('#columnNamesRenamesButton_mul').attr('data-list')
          }else{
            var buttonValues = $('#columnNamesRenamesButton').attr('data-list')
          }
          if (buttonValues == '' || buttonValues == '{}' ){
            return null
          }else {
            var parsedValues = JSON.parse(buttonValues)
            return parsedValues
          }
        }
        function extractListViewButtons(obj){
          if($("#selectTemplate").val() == "Multi Dropdown View"){
            var buttonValues = $('#listViewButtonId_mul').attr('data-list')
          }else{
            var buttonValues = $('#listViewButtonId').attr('data-list')
          }

          if (buttonValues == '' || buttonValues == '{}' ){
            return null
          }else {
            var parsedValues = JSON.parse(buttonValues)
            return parsedValues
          }
        }
        function extractEditListViewConfigs(obj){
            var buttonValues = $('#configure_edit_list_view_header_modal').attr('data-list')
            if (buttonValues == '' || buttonValues == '{}' ){
              return null
            }else {
              var parsedValues = JSON.parse(buttonValues)
              return parsedValues
            }
        }
        function editElement() {
          $('#JSConfig').find('.multipleJs').find('.showFieldInfoTableName').val('').trigger('change')
          $('#JSConfig').find('.multipleJs').find('.linkedColumnsShowFieldInfo').empty()
          $('#JSConfig').find('.multipleJs').find('.linkedColumnsShowFieldInfo').append(`<option value="" disabled="" selected>Linked Table Column</option>`)
          $('#JSConfig').find('.multipleJs').find('.addColumnsShowFieldInfo').empty()
          var field_type = $(this).parent().parent().find('[data-type]').attr('data-type')
          $('#selectField').attr('selected-field-type',field_type)
          if ($(this).parent().parent().attr('data-class') == 'formContainer') {
            $('#selectFormTemplate').parent().css('display','none');
            $('#selectFormTable').parent().removeClass('col-8');
            $('#selectFormTable').parent().addClass('col-12');
            $('#selectFormTemplate').val('Default').trigger("change");
            customTemp = 'custom'
          } else {
            $('#selectFormTemplate').parent().css('display','block');
            $('#selectFormTable').parent().removeClass('col-12');
            $('#selectFormTable').parent().addClass('col-8');
            customTemp = 'no'
          } if ($(this).parent().parent().attr('id')) {
            if($('input[type=radio][name=js][value=multiple]').is(':checked')) {
              var html = `
              <div class="carousel-item">
                <div class="row">
                  <div class="col-6">
                    <p style="font-weight: bold;">Action:</p>
                    <select class="select2 form-control formLevelFieldReloadAction" required>
                      <option value="">---</option>
                      <option value="active on">Active on</option>
                    </select>
                  </div>
                  <div class="col-6">
                    <p style="font-weight: bold;">Select columns to show:</p>
                    <select class="select2 form-control formLevelFieldReloadMultiCol" style="max-height: 4rem; min-height: 4rem;overflow:scroll;" required multiple>
                    </select>
                  </div>
                </div>
                <div class="row" style="margin-top: 20px;">
                  <div class="col-4">
                    <p style="font-weight: bold;">Select column:</p>
                    <select class="select2 form-control formLevelFieldReloadCol" required">
                    </select>
                  </div>
                  <div class="col-4">
                    <p style="font-weight: bold;">Select condition:</p>
                    <select class="select2 form-control formLevelFieldReloadCond" required>
                      <option value="Greater then">Greater than</option>
                      <option value="Smaller then">Smaller than</option>
                      <option value="Equal to">Equal to</option>
                      <option value="In">In</option>
                    </select>
                  </div>
                  <div class="col-4 formLevelFieldReloadVal">
                    <p style="font-weight: bold;">Select value:</p>
                    <select class="select2 form-control" required>
                    </select>
                  </div>
                  <div class="col-4 formLevelFieldReloadValTag" style="display: none;">
                    <p style="font-weight: bold;">Select value:</p>
                    <select class="select2 form-control" style="max-height: 4rem; min-height: 4rem;overflow:scroll;" required multiple>
                    </select>
                  </div>
                </div>
              </div>
              `
              var boolean = 0
              var elementPresent = []
              $('#formModal').find('.formLevelFieldReloadOpt').empty()
              for(let i = 0; i < formLevelFieldList.length; i++) {
                for(let [key,value] of Object.entries(formLevelFieldList[i]) ){
                  if(formLevelFieldList[i][key]['selectedColumn'].includes($(this).parent().parent().attr('id'))) {
                    boolean = 1
                    elementPresent.push(key)
                    $('#formModal').find('.formLevelFieldReloadOpt').append(`<option value="${key}" data-carousel="${i}">${key}</option>`)
                  }
                }
              }
              $('#formModal').find('.formLevelFieldReload').find('#carouselExampleIndicators1').find('.carousel-inner').empty();
              if(boolean) {
                var count = 0
                for(let i = 0; i < formLevelFieldList.length; i++) {
                    for(let key = 0; key < elementPresent.length; key++) {
                        if(formLevelFieldList[i].hasOwnProperty(elementPresent[key])) {
                        $('#formModal').find('.formLevelFieldReload').find('#carouselExampleIndicators1').find('.carousel-inner').append(html);
                        $('#formModal').find('.formLevelFieldReload').find('#carouselExampleIndicators1').find('.carousel-item').eq(-1).attr('data-identify',`${elementPresent[key]}`)
                        for(let j = 0; j < allFieldsColumns.length; j++){
                          $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadCol').eq(count).append(`<option value="${allFieldsColumns[j]}">${verboseName[j]}</option>`)
                          $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadMultiCol').eq(count).append(`<option value="${allFieldsColumns[j]}">${verboseName[j]}</option>`)
                        }
                        $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadCol').eq(count).val(formLevelFieldList[i][elementPresent[key]]['column']).trigger('change');
                        $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadMultiCol').eq(count).val(formLevelFieldList[i][elementPresent[key]]['selectedColumn']).trigger('change');
                        $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadCond').eq(count).val(formLevelFieldList[i][elementPresent[key]]['condition']).trigger('change');
                        $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadAction').eq(count).val(formLevelFieldList[i][elementPresent[key]]['action']).trigger('change');
                        if (formLevelFieldList[i][elementPresent[key]]['condition'] == "In") {
                          $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadVal').eq(count).css('display','none');
                          $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadValTag').eq(count).css('display','block');
                          $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadValTag').eq(count).find('select').empty()
                          for(let j1 = 0; j1 < formLevelFieldList[i][elementPresent[key]]['value'].length; j1++) {
                            $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadValTag').eq(count).find('select').append(`<option value="${formLevelFieldList[i][elementPresent[key]]['value'][j1]}">${formLevelFieldList[i][elementPresent[key]]['value'][j1]}</option>`)
                          }
                          $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadValTag').eq(count).find('select').val(formLevelFieldList[i][elementPresent[key]]['value']).trigger('change')
                        } else {
                          $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadVal').eq(count).css('display','block');
                          $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadValTag').eq(count).css('display','none');
                          $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadVal').eq(count).find('select').empty()
                          $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadVal').eq(count).find('select').append(`<option value="${formLevelFieldList[i][elementPresent[key]]['value']}">${formLevelFieldList[i][elementPresent[key]]['value']}</option>`)
                          $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadVal').eq(count).find('select').val(formLevelFieldList[i][elementPresent[key]]['value']).trigger('change');
                      }
                        $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadCol').eq(count).select2()
                        $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadMultiCol').eq(count).select2()
                        $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadCond').eq(count).select2()
                        $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadAction').eq(count).select2()
                        $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadValTag').eq(count).find('select').select2({tags:true})
                        $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadVal').eq(count).find('select').select2({tags:true});
                        $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadMultiCol').eq(count).parent().find('.select2-container').css('min-height','8rem');
                        $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadMultiCol').eq(count).parent().find('.select2-container').css('max-height','8rem');
                        $('#formModal').find('.formLevelFieldReload').find('.formLevelFieldReloadMultiCol').eq(count).parent().find('.select2-container').css('overflow-y','scroll');
                        $('#formModal').find('.formLevelFieldReloadCond').on('change',function() {
                          if($(this).val() == 'In') {
                            $('#formModal').find('.formLevelFieldReloadValTag').css('display','block');
                            $('#formModal').find('.formLevelFieldReloadValTag').find('select').select2({
                              tags:true
                            });
                            $('#formModal').find('.formLevelFieldReloadVal').css('display','none');
                          } else {
                            $('#formModal').find('.formLevelFieldReloadVal').find('select').select2({
                              tags:true
                            });
                            $('#formModal').find('.formLevelFieldReloadValTag').css('display','none');
                            $('#formModal').find('.formLevelFieldReloadVal').css('display','block');
                          }
                        })
                        count++
                      }
                    }
                  }
              } else {
                $('#formModal').find('.formLevelFieldReload').find('#carouselExampleIndicators1').find('.carousel-inner').append(`<h5 style="color:red">No detials configured</h5>`);
              }
              $('#formModal').find('.formLevelFieldReload').find('#carouselExampleIndicators1').find('.carousel-item').eq(0).addClass('active');
              $('#formModal').find('.formLevelFieldCol').empty()
              $('#formModal').find('.formLevelFieldVal').find('select').empty()
              $('#formModal').find('.formLevelFieldCond').val('').trigger('change')
              $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
              $('#formModal').find('.formLevelFieldAction').val('').trigger('change')
              $('#formModal').find('.formLevelFieldValTag').css('display','none');
              $('#formModal').find('.formLevelFieldVal').css('display','block');
              $('#formModal').find('.formLevelJs').css('display','none');
              $('#formModal').find('.formLevelFieldReload').css('display','block');
            } else {
              if(stateOfCss["save"] == "no") {
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).parent().attr("style",`${stateOfCss["previous"]}`)
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).parent().css("background-color",``);
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').css("background-color",`${stateOfCss["background-color"]}`);
                if($('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').attr('type') == 'file' || $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').attr('type') == 'image') {
                  $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().find('label').css("background-color",`${stateOfCss["background-color"]}`);
                }
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').css("background-color",`${stateOfCss["background-color"]}`);
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').css("background-color",`${stateOfCss["background-color"]}`);
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().css("background-color",`${stateOfCss["background-color"]}`);
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').parent().css("background-color",`${stateOfCss["background-color"]}`);
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').parent().css("background-color",`${stateOfCss["background-color"]}`);
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).parent().removeAttr("title",`${stateOfCss["title"]}`);
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).parent().removeAttr("data-toggle",``);
                if(stateOfCss["span"] != "") {
                  $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("span").remove();
                  $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("small").remove();
                  $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).append(`<small class="form-text text-muted">${stateOfCss["span"]}</small>`);

                } else {
                  $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("span").remove();
                  $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("small").remove();

                }
              }
              $('#selectField').val($(this).parent().parent().attr('id')).trigger('change');
              $('#JSConfig').find('.multipleJs').eq(0).find('.selectJSproperty').val('').trigger('change');
              var t = 0
              $('#JSConfig').find('.multipleJs').eq(0).find('.formLevelJs').find('.configCont').each(function() {
                if(t == 0) {
                  $(this).find('.formLevelFieldCol').val('').trigger('change')
                  $(this).find('.formLevelFieldCond').val('').trigger('change')
                  $(this).find('.formLevelFieldVal').find('select').empty()
                  $(this).find('.formLevelFieldValTag').find('select').empty()
                  $(this).find('.formLevelFieldVal').css('display','block')
                  $(this).find('.formLevelFieldValTag').css('display','none')
                } else {
                  $(this).remove();
                }
                t++
              })
              t = 0;
              $('#JSConfig').find('.modal-body').find('.multipleJs').each(function() {
                if(t != 0) {
                  $(this).remove()
                }
                t++
              })
              t = 0;
              $('#JSConfig').find('.modal-body').find('.multipleJs').find('.stylingJsValidationColorCont').each(function() {
                if(t != 0) {
                  $(this).remove();
                }
                t++
              })
              t = 0;
              $('#JSConfig').find('.multipleJs').eq(0).find('.foreignKeyCondCont').find('.subCont').each(function() {
                if(t == 0) {
                  $(this).find('.foreignKeyCond').val('').trigger('change')
                  $(this).find('.foreignKeyAndOr').val('').trigger('change')
                  $(this).find('.foreignKeyCondVal').find('select').empty()
                  $(this).find('.foreignKeyDynamicVal').val('').trigger('change')
                  $(this).find('.foreignKeyCondValTag').find('select').empty()
                } else {
                  $(this).remove();
                }
                t++
              })
              stateOfCss["previous"] = ""
              stateOfCss["validation"] = ""
              stateOfCss["col"] = $(this).parent().parent().attr('id')
              stateOfCss["title"] = ""
              stateOfCss["span"] = ""
              stateOfCss["save"] = "no"
              stateOfCss["background-color"] = ""
              $('#JSConfig').find('.multipleJs').eq(0).find('.formLevelJs').css('display','none')
              $('#JSConfig').find('.multipleJs').eq(0).find('.formLevelJs').find('.formLevelFieldActionsSel').val('').trigger('change');
              $('#JSConfig').find('.multipleJs').eq(0).find('.stylingJs').find('select').each(function() {
                $(this).val('').trigger('change');
              })
              $('#JSConfig').find('.multipleJs').eq(0).find('.stylingJs').find('input').each(function() {
                $(this).val('').trigger('change');
              })
              $('#JSConfig').find('.multipleJs').eq(0).find('.stylingJs').find(".stylingJsPropertySelect").val("").trigger("change");
              $('#JSConfig').find('.multipleJs').find('.stylingJsFieldColorInput').val('#ffffff').trigger('change')
              $('#JSConfig').find('.multipleJs').find('.stylingJsInstructionInput').val('').trigger('change')
              $('#JSConfig').find('.multipleJs').find('.stylingJsDetailsInput').val('').trigger('change')
              $('#JSConfig').find('.multipleJs').find('.stylingJsMandatoryInput').prop("checked",false).trigger('change')
              $('#JSConfig').find('.multipleJs').find('.stylingJsDetailsColorInput').val('#ffffff').trigger('change')
              $('.tableRelation').css('display','none')

              JSAttri($(this).parent().parent().attr('id'));
              $('#JSConfig').find('.multipleJs').eq(0).find('.stylingJs').find('.stylingJsBorderWidthSelect').val('px').trigger('change')
            }
          } else {
            $('#formModal').modal('show');
            $('#formModal').find('.formLevelFieldReload').css('display','none');
            $('#formModal').find('.formLevelJs').css('display','none');
            var htmls = $('.dragContainer').find('.formTempContainer').find('.card-body').html();
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).html(htmls);
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.editjs').css('display','block');
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.box').each(function () {
              if (!($(this).hasClass('color'))){
                $(this).attr("onclick","changeColor.call(this)")
              }
            })
            $('#JSConfig').find('.multipleJs').eq(0).find('.selectJSproperty').select2()
            $('.popoverclass').popover({
              trigger: 'focus'
            })
          }
          $('#formModal').attr('data-class',$(this).parent().attr('data-class'))
          $('#createViewModal').css('display','none')
          $('#JSConfig').find('.multipleJs').find('select').each(function(){
    $(this).select2()
  })
        }
        function deleteElement1() {
          var current = $(this)
          if ($(this).parent().parent().attr('id')) {
            for (key in fields) {
              if (fields[key].fieldname == $(this).parent().parent().attr('id')) {
                selectedColumn.splice(key,1);
                fields.splice(key, 1)
                key--;
                break;
              }

            }
            $('.formFieldSelected').each(function() {
              if($(this).val() == current.parent().parent().attr('id')){
                $(this).parent().parent().remove()
              }
            })
            $(this).parent().parent().remove()
            changeSeqOfCircle(selectedColumn[i]);

          } else {
            $('.formFieldSelected').parent().parent().empty();
            $('.'+$(this).parent().parent().attr('data-class')).remove();
            $('.formChild').remove()
            $('#selectFormTable').val('').trigger("change")
            $('#formfieldList').val('').trigger("change")
            $('#fcopy_fields').val('').trigger("change")
            $('#recurr_update_fields').val('').trigger("change")
            $('#restrict_min_fields').val('').trigger("change")
            $('#restrict_min_no_req').val('').trigger("change")
            $('#fpaste_fields').val('').trigger("change")
            $('#selectFormTemplate').val('').trigger("change")
            $('#form_field_search_list').empty()
            $('#selectAction').val('').trigger("change")
            $('#selectField').val('').trigger("change")
            $('.selectJSproperty').val('').trigger("change")

            $('#tabHeaderCreateView').val("").trigger('change')
            $('#selectTableColumns').empty();
            $('#selectTableColumnsflow').empty();
            $('.additional').empty();
            $('.def_values_opt').empty();
            $('#defaultValueConfig').find('.defaultValue').prop('checked',false);
            $('#selectMultipleFormTable').val('alertbasetable').trigger('change');
            $('#selectMultipleFormTableflow').val('alertbasetable').trigger('change');
            fieldAttributesCV =[]
            compareFields={}
            columnSelection = [];
            periodSelection={}
            fields = [];
            formLevelFieldList = []
          }
        }
        function deleteAll() {
          $('#createViewModal').find('.card-body').find('.dragContainer').empty()
        }
              $(function() { $("#divContainer").draggable().resizable(); });
                $(function() { $("#divResize").draggable().resizable(); });
                // CREATE MORE DIV, WITH 'ABSOLUTE' POSITIONING.
                $('#btClickMeForm').on('click', function() {

                    var dynamic_div = $(document.createElement('div')).css({
                        border: '1px solid black', position: 'absolute', left: 0,
                        top: 0,
                        width: '100%' ,height: '100%', padding: '3', margin: '0',
                    });

                    element_pos = element_pos + $('#divContainer').width() + 20;

                    $(dynamic_div).append('<div class="align-middle" style="display: inline-block; font-size: 12px; font-family: Arial; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal;"><span class="align-middle">Form</span></div>');
                    // APPEND THE NEWLY CREATED DIV TO "divContainer".
                    $(dynamic_div).addClass('formContainer')
                    $(dynamic_div).addClass('form-row')
                    $(dynamic_div).attr('data-class','formContainer')
                    $(dynamic_div).css('background-color', 'white')
                    $(dynamic_div).css('min-width', '100px')
                    $(dynamic_div).css('min-height', '100px')
                    $(dynamic_div).appendTo('.dragContainer').draggable({
                      grid: [ 100, 100 ]
                    }).draggable("option", "grid", [ 100, 100 ]).resizable();
                    $(dynamic_div).append(toolbar)
                    $('#createViewModal').find('.card-body').find('.formTempContainer').append('<div class="card-body card-body1" style="margin:1px;"></div>')
                    $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').append('<div class="form-row" style="margin:1px;"></div>')
                    $('#createViewModal').find('.card-body').on('mouseenter','.formContainer',function() {
                      formOnHover($(this));
                    })
                    $('#createViewModal').find('.card-body').on('mouseleave','.formContainer',function() {
                      formOffHover($(this));
                    })
                    $('#createViewModal').find('.card-body').on('click','.formContainer',function() {
                      fillColor($(this))
                    })
                    iCnt = iCnt + 1;
                });
                $('#btClickMeFormTemp').on('click', function() {

                    var dynamic_div = $(document.createElement('div')).css({
                        border: '1px solid black', position: 'absolute', left: 0,
                        top: 0,
                        width: '98%', height: '100%', padding: '3', margin: '0',
                    });

                    element_pos = element_pos + $('#divContainer').width() + 20;

                    $(dynamic_div).append('<div class="float-right text" style="display:block;right: 10px; top: 45%;position: absolute; left:10%;opacity:0.5; z-index:999">Template</span></div>');

                    // APPEND THE NEWLY CREATED DIV TO "divContainer".
                    $(dynamic_div).addClass('formTempContainer')
                    $(dynamic_div).attr('data-class','formTempContainer')
                    $(dynamic_div).css('background-color', 'white')
                    $(dynamic_div).css('min-width', '140px')
                    $(dynamic_div).css('min-height', '100px')
                    $(dynamic_div).appendTo('.dragContainer').draggable({
                      grid: [ 100, 100 ]
                    }).draggable("option", "grid", [ 100, 100 ]).resizable()
                    $(dynamic_div).append(toolbar)
                    $('#createViewModal').find('.card-body').find('.formTempContainer').append('<div class="card-body" style="margin:1px;max-height: 20rem;overflow: hidden; overflow-y: scroll"></div>')
                    $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').append('<div class="form-row"></div>')
                    $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').append(`<div class="row formBtn"> <input type="hidden" name="tablename"> <input type="hidden" name="elementid" >
                      <div class="form-buttons" style="display:inline-block;"><input type="button" name="save" value="Compare With Existing" class="btn btn-primary buttonstyling acies_btn acies_btn-primary compareWithExisting" style="margin-right:4px;display: none;"></div>
                      <div class="form-buttons" style="display:inline-block;"><input disabled type="submit" name="submit" value="Save" class="btn btn-primary buttonstyling acies_btn acies_btn-primary button_standard_save formBtnSave" id="savebutton_" ></div><div class="form-buttons"><button disabled type="button" name="back" value="Back"  class="btn backbtn ml-2" id="button-id-back"> &#x2190; </button></div>
                      <div class="form-buttons" style="display:inline-block;"><input disabled type="submit" name="submit" value="Save as Draft" data-entry="New" class="btn btn-primary buttonstyling acies_btn acies_btn-primary ml-2 consBtn" id="saveDraftbutton_"></div>
                      <div class="form-buttons" style="display:inline-block;"><input disabled type="button" name="previewButton" value="View Draft Versions" data-table-name="Product_Master" class="btn btn-primary buttonstyling acies_btn acies_btn-primary ml-2 consBtn" id="previewDraft_"></div>
                      <div class="form-buttons" style="display:inline-block;"><input disabled type="button" name="resetDraft" value="Reset Draft Status " data-table-name="Product_Master" class="btn btn-primary buttonstyling acies_btn acies_btn-primary ml-2 consBtn" id="resetDraft_"></div>
                      <div class="form-buttons" style="display:inline-block;"><input disabled type="button" value="Custom Validation" name="customValidation"  type="button" class="btn btn-primary buttonstyling acies_btn acies_btn-primary ml-2  custBtnn" id="customValidationList"  data-table-name='' data-toggle="modal" data-target="#customValidation" data-elementID="" ></div>
                      <div class="form-buttons" style="display:inline-block;"><button disabled type="button" value="View Transactions" name="View Transactions"  type="button" class="btn btn-primary buttonstyling acies_btn acies_btn-primary ml-2  viewTransactionsClass" id="viewTransactions">View Transactions Status</button></div>
                      <div class="form-buttons" style="display:inline-block;"><input disabled type="button" value="Refresh Computation" name="computedValue"  type="button" class="btn btn-primary buttonstyling acies_btn acies_btn-primary ml-2  compBtnn"  data-table-name='' data-toggle="modal" data-target="#computedValue" data-elementID="" id="calculateComp"></div>
                      <div class="form-buttons" style="display:inline-block;"><input disabled type="button" value="View History" name="ViewHistory"  type="button" class="btn btn-primary buttonstyling acies_btn acies_btn-primary ml-2  viewHistBtn"  data-table-name='' data-toggle="modal" data-target="#viewHistory" id="viewHistory_"></div>
                      <div class="form-buttons" style="display:inline-block;"><input disabled type="button" value="View Rejected Records" name="View Rejected Records"  type="button" class="btn btn-primary buttonstyling acies_btn acies_btn-primary ml-2  viewRejectRecordBtn"  data-table-name='' data-toggle="modal" data-elementID="" id="rejectedRecords" ></div>
                    </div>`)
                    $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').find('.formBtn').css('display','none')
                    $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').find('.formBtnSave').css('display','none')
                    $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').find('.consBtn').css('display','none')

                    $('#createViewModal').find('.card-body').on('mouseenter','.formTempContainer',function() {
                      formOnHover($(this));
                    })
                    $('#createViewModal').find('.card-body').on('mouseleave','.formTempContainer',function() {
                      formOffHover($(this));
                    })
                    $('#createViewModal').find('.card-body').on('click','.formTempContainer',function() {
                      fillColor($(this));
                    })
                    iCnt = iCnt + 1;
                });
            $('#createViewModal').find('.card-body').on('mouseenter','.formTempContainer',function() {
              formOnHover($(this));
            })
            $('#createViewModal').find('.card-body').on('mouseleave','.formTempContainer',function() {
              formOffHover($(this));
            })
            $('#createViewModal').find('.card-body').on('click','.formTempContainer',function() {
              fillColor($(this));
            })
            $('#createViewModal').find('.card-body').on('mouseenter','.formContainer',function() {
              formOnHover($(this));
            })
            $('#createViewModal').find('.card-body').on('click','.formContainer',function() {
              fillColor($(this));
            })
            $('#createViewModal').find('.card-body').on('click','.formChild',function() {
              fillColor($(this));
            })
            $('#createViewModal').find('.card-body').on('mouseleave','.formChild',function() {
              formOffHover($(this));
            })
            $('#createViewModal').find('.card-body').on('mouseenter','.formChild',function() {
              formOnHover($(this));
            })
            $('#createViewModal').find('.card-body').on('mouseleave','.formContainer',function() {
              formOffHover($(this));
            })
            $('#createViewModal').find('.closeModal').on('click', function() {
              $('#createViewModal').css('display','none');
              $('.dragContainer').empty()
              formLevelFieldList = []
            })
            $('#createViewModal').find('.deleteAll').on('click', function() {
              deleteAll();
            })
            $('#createViewModal').find('.zoomIn').on('click', function() {
              zoom = zoom + 0.1;
              $('#createViewModal').find('.zoomText').html(parseInt(zoom*100) +'%');
              $('#createViewModal').find('.body').css('transform','scale('+zoom+')')
            })
            $('#createViewModal').find('.zoomOut').on('click', function() {
              zoom = zoom - 0.1;
              $('#createViewModal').find('.zoomText').html(parseInt(zoom*100)+'%');
              $('#createViewModal').find('.body').css('transform','scale('+zoom+')')
            })
            $('#createViewModal').find('.fillColor').on('input', function() {
              $('#createViewModal').find('.card-body').find('.isActive').css('background-color',$(this).val())
              $('#createViewModal').find('.card-body').find('.isActive').attr('data-color',$(this).val())
            })
            $('#createViewModal').find('.fillTextColor').on('input', function() {
              $('#createViewModal').find('.card-body').find('.isActive').find('span').css('color',$(this).val())
              $('#createViewModal').find('.card-body').find('.isActive').find('span').attr('data-color',$(this).val())
            })
            function formOnHover(current) {
                current.css('border-color','var(--primary-color)');
                current.find('.toolbar').css('display','block');
                current.find('.toolbar i').css('color','var(--primary-color)');
            }
            function formOffHover(current) {
                current.css('border-color','black');
                current.find('.toolbar').css('display','none');
            }
            function fillColor(current) {
              if (current.attr("id")) {
                    changeSeqOfCircle();
                }
              $('#createViewModal').find('.card-body').find('.formContainer').removeClass('isActive')
              $('#createViewModal').find('.card-body').find('.formChild').removeClass('isActive')
              $('#createViewModal').find('.card-body').find('.formTempContainer').removeClass('isActive')
              current.addClass('isActive');
            }
        </script>
<!--------- Configure flow modal --------->
  <div class="modal fade" id="configureFlow" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content" style="max-height: 650px;">
      <div class="modal-header" style='background:#565a5e; color:white;'>
        <h5 class="modal-title" id="formModalLabel" style="margin-left: auto;">Configure dependency</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    <div class="modal-body" style="background: whitesmoke;overflow: auto;max-height: 600px;">
      <div class='card-body'>
        <div id="dependencyCheck" class="custom-control custom-checkbox" style="margin-left:1%;">
          <div class="row">
            <div class="col-2">
              <input type="checkbox" name="dependencCheck" id="select2" class="checkboxinput custom-control-input">
              <label for="select2" class="custom-control-label">
                Dependency
              </label>
            </div>
            <div class="col-6 baseElementClass" style="display: flex;">
              <label class="" style="margin-right:10px">
                Move to element:
              </label>
              <div class="col-4">
                <select id="nextElement" class="select2" onchange="nextElement.call(this)">
                  <option value="" selected>Default</option>
                  <option value="Approval">Approval</option>
                </select>
              </div>
              <div class="col-4">
                <select id="nextElementTab" class="select2">
                  <option value="" selected>Default Tab</option>
                </select>
              </div>
            </div>
            <div class="col-2">
              <input type="checkbox" name="dependencCheck" id="elementHide" class="checkboxinput custom-control-input">
              <label for="elementHide" class="custom-control-label">
                Hide next element:
              </label>
            </div>
            <div class="col-2">
              <input type="checkbox" name="dependencCheck" id="autoRun" class="checkboxinput custom-control-input">
              <label for="autoRun" class="custom-control-label">
                Auto run computation:
              </label>
            </div>
          </div>
          <div class="card collapsed-card" style="margin-left: -30px;">
            <div class="card-header">
              <p class="card-title">Database Validation</p>
              <div class="card-tools float-right">
                <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus" style="color:var(--primary-color);"></i></button>
              </div>
            </div>
            <div class="card-body" style="display:flex;">
              <div class="row" style="padding-left: 24px;">
                <div class="col-4">
                  <input type="checkbox" name="dependencCheck" id="dataValidation" class="checkboxinput custom-control-input" checked disabled>
                  <label for="dataValidation" class="custom-control-label" style="white-space: nowrap;">
                    Data managment validation
                  </label>
                </div>
                <div class="col-4" style="margin-left:auto">
                  <input type="checkbox" name="dependencCheck" id="customValidation" class="checkboxinput custom-control-input" checked disabled>
                  <label for="customValidation" class="custom-control-label" style="white-space: nowrap;">
                    Custom user data validation
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="card" style="margin-left: -30px;">
            <div class="card-header">
              <p class="card-title">Custom conditional validations</p>
            </div>
            <div class="card-body row">
              <div class="card col-12 flowBodyCard collapsed-card">
                <div class="card-header">
                  <p class="card-title">From condition</p>
                  <div class="card-tools float-right">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                  </div>
                </div>
                <div class="card-body flowBody">
                  <div class="row" style="padding-left: 24px;">
                    <div class="col-4">
                      <input type="checkbox" onchange="userValidation.call(this)" name="dependencCheck" id="userValidation" class="checkboxinput custom-control-input">
                      <label for="userValidation" class="custom-control-label" style="white-space: nowrap;">
                        Custom conditional validations
                      </label>
                    </div>
                    <div class="col-4" style="display: none;">
                      <input type="checkbox" name="dependencCheck" id="emailValidation" class="checkboxinput custom-control-input" checked>
                      <label for="emailValidation" class="custom-control-label" style="white-space: nowrap;">
                        Email validation
                      </label>
                    </div>
                  </div>
                  <div class="row flowUserValidation" style="display:none;margin-top:15px;">
                    <div class="col-3">
                      <label>Table:</label>
                      <select class="select2 form-control flowTable" onchange="flowTable.call(this)" name="tableform2">
                        {% for i in tableList %}
                        <option value="{{i}}">{{i}}</option>
                        {% endfor %}
                      </select>
                    </div>
                  </div>
                  <div class="row indFlow flowUserValidation" style="display:none">
                    <div class="col-4">
                      <label>Column:</label>
                      <select class="select2 form-control flowColumn" onchange="populateFlowValue.call(this)">
                      </select>
                    </div>
                    <div class="col-4">
                      <label>Condition:</label>
                      <select class="select2 form-control flowCond" onchange="changeFlowSelectTag.call(this)">
                        <option value="" disabled selected>Select condition</option>
                        <option value="Equal to">Equal to</option>
                        <option value="IN">In</option>
                        <option value="Not Equal to">Not Equal to</option>
                        <option value="NOT IN">Not In</option>
                        <option value="Greater than">Greater than</option>
                        <option value="Smaller than">Smaller than</option>
                        <option value="Starts with">Starts with</option>
                        <option value="Ends with">Ends with</option>
                      </select>
                    </div>
                    <div class="col-3">
                      <label>Value:</label>
                      <select class="select2 form-control flowValue">
                      </select>
                    </div>
                    <div class="col-1">
                      <i class="fas fa-plus" onclick="addIndFlow.call(this)" style="font-size: initial;"></i>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card col-12 flowBodyCardTo collapsed-card">
                <div class="card-header">
                  <p class="card-title">To condition</p>
                  <div class="card-tools float-right">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                  </div>
                </div>
                <div class="card-body flowBodyTo">
                  <div class="row" style="padding-left: 24px;">
                    <div class="col-4">
                      <input type="checkbox" onchange="userValidationTo.call(this)" name="dependencCheck" id="userValidationTo" class="checkboxinput custom-control-input">
                      <label for="userValidationTo" class="custom-control-label" style="white-space: nowrap;">
                        Custom conditional validations
                      </label>
                    </div>
                    <div class="col-4" style="display: none;">
                      <input type="checkbox" name="dependencCheck" id="emailValidationTo" class="checkboxinput custom-control-input" checked>
                      <label for="emailValidationTo" class="custom-control-label" style="white-space: nowrap;">
                        Email validation
                      </label>
                    </div>
                  </div>
                  <div class="row flowUserValidationTo" style="display:none;margin-top:15px;">
                    <div class="col-3">
                      <label>Table:</label>
                      <select class="select2 form-control flowTableTo" onchange="flowTableTo.call(this)" name="tableform2">
                        {% for i in tableList %}
                        <option value="{{i}}">{{i}}</option>
                        {% endfor %}
                      </select>
                    </div>
                  </div>
                  <div class="row indFlowTo flowUserValidationTo" style="display:none">
                    <div class="col-4">
                      <label>Column:</label>
                      <select class="select2 form-control flowColumnTo" onchange="populateFlowValueTo.call(this)">
                      </select>
                    </div>
                    <div class="col-4">
                      <label>Condition:</label>
                      <select class="select2 form-control flowCondTo" onchange="changeFlowSelectTagTo.call(this)">
                        <option value="" disabled selected>Select condition</option>
                        <option value="Equal to">Equal to</option>
                        <option value="IN">In</option>
                        <option value="Not Equal to">Not Equal to</option>
                        <option value="NOT IN">Not In</option>
                        <option value="Greater than">Greater than</option>
                        <option value="Smaller than">Smaller than</option>
                        <option value="Starts with">Starts with</option>
                        <option value="Ends with">Ends with</option>
                      </select>
                    </div>
                    <div class="col-3">
                      <label>Value:</label>
                      <select class="select2 form-control flowValueTo">
                      </select>
                    </div>
                    <div class="col-1">
                      <i class="fas fa-plus" onclick="addIndFlowTo.call(this)" style="font-size: initial;"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card computationCondition collapsed-card" style="margin-left: -30px;">
            <div class="card-header">
              <p class="card-title">Computation based validation</p>
              <div class="card-tools float-right">
                <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              </div>
            </div>
            <div class="card-body flowBodyCC computationCondition1" style="display:none;">
              <div class="row" style="margin-left: -19px;margin-bottom: 10px;">
                <div class="col-3">
                  <button style="color:aliceblue; margin-left: 0.5rem;" type="button" id="EBDisplayButtonID" class="btn btn-primary btn-xs rounded">Equation builder</button>
                </div>
                <div class="col-3">
                  <input type="checkbox" name="dependencCheck" onchange="userValidationCC.call(this)" id="userValidationCC" class="checkboxinput custom-control-input">
                  <label for="userValidationCC" class="custom-control-label" style="white-space: nowrap;">
                    Computation conditional validations
                  </label>
                </div>
              </div>
              <div class="row" style="margin-top:15px;display: none;">
                <div class="col-3">
                  <label>Table:</label>
                  <select class="select2 form-control flowTableCC" name="tableform2">
                    {% for i in tableList %}
                    <option value="{{i}}">{{i}}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
              <div class="row indFlowCC flowUserValidationCC">
                <div class="col-4">
                  <label>Column:</label>
                  <select class="select2 form-control flowColumnCC">
                  </select>
                </div>
                <div class="col-4">
                  <label>Condition:</label>
                  <select class="select2 form-control flowCondCC" onchange="changeFlowSelectTagCC.call(this)">
                    <option value="" disabled selected>Select condition</option>
                    <option value="Equal to">Equal to</option>
                    <option value="IN">In</option>
                    <option value="Not Equal to">Not Equal to</option>
                    <option value="NOT IN">Not In</option>
                    <option value="Greater than">Greater than</option>
                    <option value="Smaller than">Smaller than</option>
                    <option value="Starts with">Starts with</option>
                    <option value="Ends with">Ends with</option>
                  </select>
                </div>
                <div class="col-3">
                  <label>Value:</label>
                  <select class="select2 form-control flowValueCC">
                  </select>
                </div>
                <div class="col-1">
                  <i class="fas fa-plus" onclick="addIndFlowCC.call(this)" style="font-size: initial;"></i>
                </div>
              </div>
            </div>
          </div>

          <div id="computationModelFlowInputCard" class="card collapsed-card" style="margin-left: -30px;display:none;">
            <div class="card-header">
              <p class="card-title">Configure inputs for succeeding computation model</p>
              <div class="card-tools float-right">
                <button type="button" class="btn btn-tool" data-card-widget="collapse" onclick="fetchComputationInputFlowData()"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              </div>
            </div>
            <div class="card-body" data-comp-data="{}" data-config="{}">
              <div class="row">
                <div class="col-6 card m-auto">
                  <div class="card-header">
                    <p class="card-title">Map Global Variables</p>
                  </div>
                  <div class="card-body" id="compModelFLowGVarMapContainer" style="height:11rem; overflow: auto;">

                  </div>
                </div>
                <div class="col-5 card m-auto">
                  <div class="card-header">
                    <p class="card-title">Configure Data Input</p>
                  </div>
                  <div class="card-body" style="height:11rem;">
                    <div class="form-group">
                      <label for="selectComputationInput">Select element to pass the preceding model's output</label>
                      <select name="selectComputationInput" id="selectComputationInput" class="select2 form-control">
                        <option value="">---</option>
                      </select>
                      <small>*Make sure the format of data expected by the element selected matches with the preceding model's output.</small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="float-right btn btn-primary save" onclick="saveFlowConfig.call(this)"  style="margin-left:5px;">Save</button>
    </div>
  </div>
  </div>
  </div>
<!-------------------------------------------->

<div class="modal" id="casesModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-lg" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" id="formModalLabel" style="">Configure scenarios</h5>
      </div>
      <div class="modal-body">
        <div class="card">
          <div class="card-body casesBody">
            <div class="col-12">
              <button class="btn btn-primary add_field_based_scenarios float-right" data-toggle="tooltip" title="Add scenarios" onclick="addIndCasesFieldBased.call(this)" ><i class="fas fa-plus " name="false" style="margin-right: 4px;"></i> Field based</button>
              <button class="btn btn-primary float-right" data-toggle="tooltip" title="Add scenarios" onclick="addIndCases.call(this)" style="margin-right:1rem;"><i class="fas fa-plus " name="false" style="margin-right: 4px;"></i> Value based</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCases" onclick="closeCases.call(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCases" type="button" onclick="saveCases.call(this)" style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Custom button modal -->
<div class="modal" id="customButtonModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-lg" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Create custom button</h5>
      </div>
      <div class="modal-body">
        <div class="card">
          <div class="card-body customButtonBody">
            <div class="row indCustomButton">
              <div class="col-2">
                <label>Button Name:</label>
                <input class="form-control customButtonName"  placeholder="Enter Button Name" required>
              </div>
              <div class="col-2">
                <label>Navigate ?:</label>
                <select class="select2 form-control customButtonNavigate" onchange="customButtonNavigate.call(this)">
                  <option value="" disabled selected>Navigate</option>
                  <option value="Navigate">Yes</option>
                  <option value="Idle">No</option>
                </select>
              </div>
              <div class="col-2 customButtonAppInAppCont" style="display:none;">
                <label>Navigate to:</label>
                <select class="select2 form-control customButtonAppInApp" onchange="customButtonAppInApp.call(this)">
                  <option value="" disabled selected>Navigate to</option>
                  <option value="In App">In app screen</option>
                  <option value="Custom">Custom url</option>
                </select>
              </div>
              <div class="col-4 customButtonCustomLinkCont" style="display:none;">
                <label>Custom navigation:</label>
                <input class="form-control customButtonCustomLink" type="url">
              </div>
              <div class="col-2 customButtonPSpCont" style="display:none;">
                <label>Process:</label>
                <select class="select2 form-control customButtonProcess" onchange="customButtonProcess.call(this)">
                  <option value="" disabled selected>Select process</option>
                </select>
              </div>
              <div class="col-2 customButtonPSpCont" style="display:none;">
                <label>Subprocess:</label>
                <select class="select2 form-control customButtonSubProcess">
                  <option value="" disabled selected>Select subprocess</option>
                </select>
              </div>
              <div class="col-1">
                <label>Color:</label>
                <input class="form-control customButtonColor" type="color" required>
              </div>
              <div class="col-1">
                <i class="fas fa-plus" onclick="addIndCustomButtons.call(this)" style="font-size: initial;"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onclick="closeCustomButton.call(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" type="button" onclick="saveCustomButton.call(this)" style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!---->

<!-- edit Button Modal -->
<div class="modal" id="editButtonModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Configure Button Styling</h5>
      </div>
      <div class="modal-body">
        <div class="card-header">
          <div class="float-right" style="margin-right: 6px;">
            <button onclick="populateEditButtonContent(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>


      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="closeEditButton(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="saveEditButton(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!---->
<!-- Embed computation Modal -->
<div class="modal" id="embededComputationModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;flex-direction:column'>
        <h5 class="modal-title" style="">Embedded Computation</h5>
        <p style="color: black;font-style:italic;">Computation will be triggered only after the values are applied in all of the selected input fields</p>
      </div>
      <div class="modal-body">
        <div class="row topRow" style="padding-bottom:10px;">
          <div class="col-4">
            <p style="font-weight: bold;">Computation Models:</p>
            <select id="selectEmbededComputationModel" onchange="populateComputationContent(this)" class="select2 form-control" name="computationModel">
              <option value="" disabled selected>Models</option>
              <option value="no_computation">No Computation</option>
              {% for i in computationModelList %}
              <option value="{{i}}">{{i}}</option>
              {%endfor%}
            </select>
          </div>
          <div class='col-3'>
          </div>
          <div class='col-4' style="padding-top: 2%;margin-left: 3%;display:none;">
            <div class="custom-control custom-checkbox">
              <input type="checkbox" id="embedded_nonedit" class="checkboxinput custom-control-input">
              <label for="embedded_nonedit" class="custom-control-label">Make target fields non-editable ?</label>
            </div>
          </div>
      </div>
      <div class="row computationRow">

      </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="closeEmbededComputationModal(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="saveEmbededComputationModal(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!---->
<!-- Embed computation Modal -->
<div class="modal" id="gridLayoutModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Form Customization</h5>
      </div>
      <div class="modal-body">
        <div class="custom-control custom-checkbox">
          <input type="checkbox" id="grid_layout_check" name="grid_layout" class="checkboxinput custom-control-input" onchange="gridLayoutCheck(this)">
          <label for="grid_layout_check" class="custom-control-label">Customize Form Styling</label>
        </div>
        <div class="grid_layout_div">
          <div class="row" style="padding-top:10px;padding-bottom:10px;">
            <div class="col-6">
              <p style="font-weight: bold;">Font alignment labels:</p>
              <select class="select2 form-control" data-css="font-alignment-label">
                <option value="" selected="">Select alignment</option>
                <option value="left">Left</option>
                <option value="right">Right</option>
                <option value="center">Center</option>
              </select>
            </div>
            <div class="col-6">
              <p style="font-weight: bold;">Font alignment content:</p>
              <select class="select2 form-control" data-css="font-alignment-content">
                <option value="" selected="">Select alignment</option>
                <option value="left">Left</option>
                <option value="right">Right</option>
                <option value="center">Center</option>
              </select>
            </div>
          </div>
          <div class="row" style="padding-top:10px;padding-bottom:10px;">
            <div class="col-6">
              <p style="font-weight: bold;">Label font size:</p>
              <select class="select2 form-control" data-css="font-label-size">
                <option value="0.8rem" selected="" data-select2-id="145">Normal</option>
                <option value="0.7rem">Xtra small</option>
                <option value="0.9rem">Medium</option>
                <option value="1rem">Large</option>
                <option value="1.1rem">Xtra large</option>
              </select>
            </div>
            <div class="col-6">
              <p style="font-weight: bold;">Content font size:</p>
              <select class="select2 form-control" data-css="font-content-size">
                <option value="0.8rem" selected="">Normal</option>
                <option value="0.7rem">Xtra small</option>
                <option value="0.9rem">Medium</option>
                <option value="1rem">Large</option>
                <option value="1.1rem">Xtra large</option>
              </select>
            </div>
          </div>
          <div class="row" style="padding-top:10px;padding-bottom:10px;">
            <div class="col-6">
              <p style="font-weight: bold;">Label font color:</p>
              <input type="color" value="#000000" class="form-control" data-css="font-label-color">
            </div>
            <div class="col-6">
              <p style="font-weight: bold;">Content font color:</p>
              <input type="color" value="#000000" class="form-control" data-css="font-content-color">
            </div>
          </div>
          <div class="row" style="padding-top:10px;padding-bottom:10px;">
            <div class="col-6">
              <p style="font-weight: bold;">Field height:</p>
              <input type="number" class="form-control numberinput" data-css="field-height">
            </div>
            <div class="col-6">
              <p style="font-weight: bold;">Field width:</p>
              <input type="number" class="form-control numberinput" data-css="field-width">
            </div>
          </div>
          <div class="row" style="padding-top:10px;padding-bottom:10px;">
            <div class="col-3">
              <p style="font-weight: bold;">Field border radius*px:</p>
              <input type="number" class="form-control numberinput" data-css="field-field-radius">
            </div>
            <div class="col-3">
              <p style="font-weight: bold;">Field border style:</p>
              <select class="select2 form-control" data-css="field-border-style">
                <option value="none">No border</option>
                <option value="dotted">Dotted</option>
                <option value="dashed">Dashed</option>
                <option value="solid">Solid</option>
                <option value="double">Double</option>
                <option value="groove">Groove</option>
                <option value="ridge">Ridge</option>
                <option value="inset">Inset</option>
                <option value="outset">Outset</option>
                <option value="dotted dashed solid double">Dotted dashed solid double</option>
            </select>
            </div>
            <div class="col-3">
              <p style="font-weight: bold;">Field border width*px:</p>
              <input type="number" class="form-control numberinput" data-css="field-border-width">
            </div>
            <div class="col-3">
              <p style="font-weight: bold;">Field border color:</p>
              <div class="input-group">
                <input type="color" class="form-control" data-css="field-border-color">
                <select class="select2 form-control" data-css="field-border-color-opacity">
                  <option value="1" selected="">1</option>
                  <option value="0.9">0.9</option>
                  <option value="0.8">0.8</option>
                  <option value="0.7">0.7</option>
                  <option value="0.8">0.8</option>
                  <option value="0.7">0.7</option>
                  <option value="0.6">0.6</option>
                  <option value="0.5">0.5</option>
                  <option value="0.4">0.4</option>
                  <option value="0.3">0.3</option>
                  <option value="0.2">0.2</option>
                  <option value="0.1">0.1</option>
                  <option value="0">0</option>
                </select>
              </div>
            </div>
          </div>
          <div class="row" style="padding-top:10px;">
            <p style="font-weight: bold;margin-left:10px;">Field Shadow Options (in px)</p>
          </div>
          <div class="row" style="padding-top:10px;padding-bottom:10px;">
            <div class="col">
              <p style="font-weight: bold;">h-offset:</p>
              <input type="number" class="form-control numberinput" data-css="field-shadow-h-offset">
            </div>
            <div class="col">
              <p style="font-weight: bold;">v-offset:</p>
              <input type="number" class="form-control numberinput" data-css="field-shadow-v-offset">
            </div>
            <div class="col">
              <p style="font-weight: bold;">blur:</p>
              <input type="number" class="form-control numberinput" data-css="field-shadow-blur">
            </div>
            <div class="col">
              <p style="font-weight: bold;">spread:</p>
              <input type="number" class="form-control numberinput" data-css="field-shadow-spread">
            </div>
            <div class="col">
              <p style="font-weight: bold;">color:</p>
              <div class="input-group">
                <input type="color" class="form-control" data-css="field-shadow-color">
                <select class="select2 form-control" data-css="field-shadow-color-opacity">
                  <option value="1" selected="">1</option>
                  <option value="0.9">0.9</option>
                  <option value="0.8">0.8</option>
                  <option value="0.7">0.7</option>
                  <option value="0.8">0.8</option>
                  <option value="0.7">0.7</option>
                  <option value="0.6">0.6</option>
                  <option value="0.5">0.5</option>
                  <option value="0.4">0.4</option>
                  <option value="0.3">0.3</option>
                  <option value="0.2">0.2</option>
                  <option value="0.1">0.1</option>
                  <option value="0">0</option>
                </select>
              </div>
            </div>
          </div>
          <div class="row" style="padding-top:10px;padding-bottom:10px;">
            <div class="col">
              <p style="font-weight: bold;">No of field in one row:</p>
              <select class="select2 form-control" data-css="field-no-one-row">
                <option value="1" selected="">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
              </select>
            </div>
            <div class="col-6">
              <p style="font-weight: bold;">field padding*px:</p>
              <input type="number" class="form-control numberinput" data-css="field-padding">
            </div>
          </div>

        </div>
        <div class="card-header">
          <div class="float-right" style="margin-right: 6px;">
            <button onclick="fieldLevelCustomization()" class="btn btn-primary" type="button">Field level customization <i class="fas fa-plus populateoption" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>
        <div class="grid_layout_fields">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="closegridLayoutModal(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="savegridLayoutModal(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="jsfilter_val_modal" role="dialog" data-focus="false" aria-labelledby="jsfilter_modal" aria-hidden="true" >
  <div class="modal-dialog modal-xl modal-dialog-centered" style="justify-content: center;">
    <div class="modal-content" style="width: 100%;" >

      <div class="modal-header" style="width:100%;background:#565a5e;text-align: center;justify-content: center;">
        <h6 class="modal-title" style="color:white;margin:auto;font-weight:bold;">Set Filter</h6>

      </div>

      <div class="modal-body" style="height:300px;overflow-x:hidden;overflow-y:auto">
        <div style="margin-top:2em;">
          <div class="col-6">
            <label style="font-weight: bold;">Validation Message:</label>
            <input type="text" class="textinput textInput form-control jsfilter_val_message">
          </div>
          <br>
          <div class="btn-group">

              <button type="button" class="btn btn-default dropdown-toggle jsfilter_val_dropdown_toggle mr-auto" data-toggle="dropdown">
                {{_("Add Condition")}}
                <span class="caret"></span>
              </button>


            <ul class="dropdown-menu" id="jsfilter_val_condition_dropdown" style="max-height:10rem; overflow-y:auto;">
            </ul>
          </div>
          <div class="row" id="jsfilter_val_items">
            <table class="table filter-table_jsfilter_val">
            </table>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" id="savejsfilter_val" class="btn btn-primary rounded px-2"  style="color:white;" >Save</button>
        <button type="button" class="btn btn-primary  rounded px-2 closeBasicFilter_schedule" onclick="closeJsval()">Close</button>
      </div>

    </div>
  </div>
</div>


<div class="modal" id="jsfilter_val_modal_filter" role="dialog" data-focus="false" aria-labelledby="jsfilter_modal_filter" aria-hidden="true" >
  <div class="modal-dialog modal-lg modal-dialog-centered" style="justify-content: center;">
    <div class="modal-content" style="width: 100%;" >

      <div class="modal-header" style="width:100%;background:#565a5e;text-align: center;justify-content: center;">
        <h6 class="modal-title" style="color:white;margin:auto;font-weight:bold;">Add conditions</h6>

      </div>

      <div class="modal-body" style="height:300px;overflow-x:hidden;overflow-y:auto">
        <div style="margin-top:2em;">
          <div class="btn-group">

              <button type="button" class="btn btn-default dropdown-toggle jsfilter_val_dropdown_toggle_filter mr-auto" data-toggle="dropdown">
                {{_("Add Condition")}}
                <span class="caret"></span>
              </button>


            <ul class="dropdown-menu" id="jsfilter_val_condition_dropdown_filter" style="max-height:10rem; overflow-y:auto;">
            </ul>
          </div>
          <div class="row" id="jsfilter_val_items_filter">
            <table class="table filter-table_jsfilter_val_filter">
            </table>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" id="savejsfilter_val_filter" class="btn btn-primary rounded px-2"  style="color:white;" >Save</button>
        <button type="button" class="btn btn-primary  rounded px-2" onclick="closeJsvalFilter()">Close</button>
      </div>

    </div>
  </div>
</div>

<!---->
<div class="modal" id="master_field_comparison_filter_modal" role="dialog" data-focus="false" aria-labelledby="master_field_comparison_filter_modal" aria-hidden="true" >
  <div class="modal-dialog modal-xl modal-dialog-centered" style="justify-content: center;">
    <div class="modal-content" style="width: 100%;" >

      <div class="modal-header" style="width:100%;background:#565a5e;text-align: center;justify-content: center;">
        <h6 class="modal-title" style="margin:auto;font-weight:bold;">Add conditions</h6>

      </div>

      <div class="modal-body" style="height:300px;overflow-x:hidden;overflow-y:auto">
        <div class="card-header">
          <div class="float-right" style="margin-right: 6px;">
            <button onclick="addConditionsMasterFieldComparison(this)" class="btn btn-primary" type="button" data-column-list="[{&quot;verboseName&quot;:&quot;Id&quot;,&quot;originalName&quot;:&quot;id&quot;,&quot;data-type&quot;:&quot;AutoField&quot;},{&quot;verboseName&quot;:&quot;Country&quot;,&quot;originalName&quot;:&quot;country&quot;,&quot;data-type&quot;:&quot;CharField&quot;},{&quot;verboseName&quot;:&quot;State&quot;,&quot;originalName&quot;:&quot;state&quot;,&quot;data-type&quot;:&quot;CharField&quot;},{&quot;verboseName&quot;:&quot;City&quot;,&quot;originalName&quot;:&quot;city&quot;,&quot;data-type&quot;:&quot;CharField&quot;},{&quot;verboseName&quot;:&quot;Created by&quot;,&quot;originalName&quot;:&quot;created_by&quot;,&quot;data-type&quot;:&quot;CharField&quot;},{&quot;verboseName&quot;:&quot;Modified by&quot;,&quot;originalName&quot;:&quot;modified_by&quot;,&quot;data-type&quot;:&quot;CharField&quot;},{&quot;verboseName&quot;:&quot;Created date&quot;,&quot;originalName&quot;:&quot;created_date&quot;,&quot;data-type&quot;:&quot;DateTimeField&quot;},{&quot;verboseName&quot;:&quot;Modified date&quot;,&quot;originalName&quot;:&quot;modified_date&quot;,&quot;data-type&quot;:&quot;DateTimeField&quot;},{&quot;verboseName&quot;:&quot;Active From&quot;,&quot;originalName&quot;:&quot;active_from&quot;,&quot;data-type&quot;:&quot;DateTimeField&quot;},{&quot;verboseName&quot;:&quot;Active To&quot;,&quot;originalName&quot;:&quot;active_to&quot;,&quot;data-type&quot;:&quot;DateTimeField&quot;},{&quot;verboseName&quot;:&quot;transaction_id&quot;,&quot;originalName&quot;:&quot;transaction_id&quot;,&quot;data-type&quot;:&quot;CharField&quot;},{&quot;verboseName&quot;:&quot;is_active_flag&quot;,&quot;originalName&quot;:&quot;is_active_flag&quot;,&quot;data-type&quot;:&quot;CharField&quot;},{&quot;verboseName&quot;:&quot;Reg Num&quot;,&quot;originalName&quot;:&quot;reg_num&quot;,&quot;data-type&quot;:&quot;IntegerField&quot;}]" data-table="City_Master">Add Conditions <i class="fas fa-plus populateoption" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>
        <div class="condition_box">
          <div class="row" data-select2-id="2747">
            <div class="col-2" style="margin-bottom:10px;">
              <label class="acies_label col-md-12">Column:</label>
            </div>
            <div class="col-2" style="margin-bottom:10px;">
              <label class="acies_label col-md-12">Condition type:</label>
            </div>
            <div class="col-2" style="margin-bottom:10px;">
              <label class="acies_label col-md-12">Conditions:</label>
            </div>
            <div class="col-2 conditional_input_value" style="margin-bottom:10px;">
              <label class="acies_label col-md-12">Select value:</label>
            </div>
            <div class="col">
              <label class="acies_label col-md-12">Rule set:</label>
            </div>
            <div class="col">
              <label class="acies_label col-md-12">Constraint name:</label>
            </div>
            <div class="col-1">
              <label class="acies_label col-md-12" style="color: transparent;">Remove</label>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" id="master_field_comparison_filter_modal_save" class="btn btn-primary rounded px-2"  style="color:white;"onclick="master_field_comparison_filter_modal_save(this)" >Save</button>
        <button type="button" class="btn btn-primary  rounded px-2" onclick="master_field_comparison_filter_modal_close(this)">Close</button>
      </div>

    </div>
  </div>
</div>
 <!-- Upload Map Columns Modal -->
      <div class="modal fade" id="fieldUploadMapper" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="fieldUploadMapper" aria-hidden="true" style= "height: 70vh;" >
        <div class="modal-dialog modal-lg" role="document" >
          <div class="modal-content">
            <div class="modal-header" style='background:#565a5e; color:white;text-align: center;'>
              <h5 class="modal-title" id="fieldUploadMapper" style="width:100%;text-align: center;height:auto">Configure Column Mapper</h5>
              <button type="button" class="close" data-dismiss="modal" data-target='#fieldUploadMapper' onclick="closeColMapperDev()" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
             <div class="modal-body" style= "height: 40vh;overflow-y: auto">
              <div class='card'>
                <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Column Mapper</div>
                <div class='card-body' style="max-height: 15rem; overflow-y: scroll;">
                  <div class="row">

                  <form method="post" enctype="multipart/form-data" id="uploadfileformColMapper">
                    <div class="custom-file col-12" style="width:230px;margin-bottom:10px;">
                        <input type="file" id="uploadFileColMapper" name="file" class="custom-file-input" onclick="this.value=null;" style="border-bottom-color:white; width:230px">
                        <label id="c2" class="custom-file-label">Choose file</label>
                    </div>
                  </form>

                    <div class="form-group col-10">
                      <select id="Columnmapper" class="select2 form-control" name="Columnmapper"  data-placeholder="Column Mapper">
                        <option value="value" selected disabled>Select Option Name</option>
                      </select>

                    </div>
                    <div class="form-group col-2" style="float: right;">
                      <button type="button" class="btn btn-primary columnconfiguremapperdev"   data-elementID=""><i class="fa fa-upload"></i></button>
                      </div>
                  </div>
                  <table id="columnmapperdone" class="table table-bordered table-sm table-hover" >
                    <thead id="modal-table-head-done">
                      <th>Table Name</th>
                      <th>Reconfigure</th>
                      <th>Apply</th>
                    </thead>
                    <tbody id="modal-table-body-columnmapperdone">

                    </tbody>
                  </table>
                  <table id="columnmapper" class="table table-bordered table-sm table-hover">
                    <thead id="modal-table-head">

                    </thead>
                    <tbody id="modal-table-body-columnmapper">

                    </tbody>
                  </table>
                  <br>
                  <div id="samecolumnwarning" style="color:red">
                  </div>
                  <br>
                </div>
              </div>
            </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary savecolumnconfiguremapperdev"  style="display: none;" data-elementID="" >Save</button>
                <button type="button" class="btn btn-primary loadConfigMapperdev"  data-elementID="">Load Configuration</button>
              </div>

          </div>
        </div>
      </div>
      <!-- Upload Map Columns Modal End -->

<!-- Custom Validation Modal -->
<div class="modal fade" id="customValidationDev" role="dialog" data-focus="false" aria-labelledby="customValidationDev" aria-hidden="true" style= "height: 100vh;z-index:1051" >
  <div class="modal-dialog modal-xl" role="document" >
    <div class="modal-content" style='height:600px;'>
      <div class="modal-header" style='background:#565a5e; color:white;text-align: center;'>
        <h5 class="modal-title" id="customValidationDev" style="width:100%;text-align: center;height:auto;">Configure Custom Validation</h5>
        <button type="button" class="close" data-dismiss="modal"  data-target='#customValidationDev' onclick="closeVal()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style= "height: 40vh;overflow-y: auto">
        <div id="carouselCustomValidation" class="carousel slide" data-interval="false" >
          <div class="card">
            <div class="card-body">

              <div class="carousel-inner">

                  <!-- Existing  Configuration -->
                  <div class="carousel-item active" name='existing_config'>
                    <div class='card'>
                      <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Configure Custom Validation</div>
                      <div class='card-body' style='overflow:auto'>
                        <div class="row" style="width: 100%;display: flex;justify-content: flex-end; align-items: center;">

                        </div>
                        <div>
                          <table class="table" id="reload_custom_table_dev">
                            <thead style="text-align:center">
                              <tr>
                                <th>Sr.no</th>
                                <th>Table Name</th>
                                <th>Actions</th>
                              </tr>
                            </thead>
                            <tbody style="text-align:center" id="configuration_val_row_dev">

                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>

                    <!-- Setting Condition  -->
                      <div class="carousel-item" name='setting_config'>
                        <div class='card'>
                          <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;"> Custom Condition Set:</div>
                          <div class='card-body' style='overflow:auto'>

                            <div class="row">
                              <div class="col-4">
                                <select id="custommValidationSelection_dev" class="select2 form-control" name="table" onchange="conditionalTableDev()">
                                  <option value="" disabled selected>Select Table name</option>
                                </select>
                              </div>
                            </div>

                            <div style="margin-top:2em;">
                              <div class="btn-group">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                Add Condition
                                  <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" id="condition_dropdown_dev" style="max-height:12rem;">
                                </ul>
                              </div>
                              <div class="btn-group">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                Add Master Based Condition
                                  <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" id="condition_dropdown1_dev" style="max-height:12rem;">
                                </ul>
                              </div>
                              <div class="row" id="items_dev">
                                <table class="table " id= 'custom_validation_table_dev'>
                                </table>
                              </div>
                            </div>

                            <button type="button" style="float:right"
                              class="btn btn-xs btn-primary save_custom_validation_dev" data-elementID=""  onclick="saveCustomValidationdev()" data-slide="next">Save Validation</button>

                          </div>
                        </div>
                      </div>
              </div>
              <span class="carousel-control-prev-icon carousel-control-prev" href="#carouselCustomValidation"
                role="button" data-slide="prev" aria-hidden="true" style="background-color:black;"></span>
              <span class="sr-only">Previous</span>

              <span class="carousel-control-next-icon carousel-control-next" href="#carouselCustomValidation"
                role="button" data-slide="next" aria-hidden="true" style="background-color:black;"></span>
              <span class="sr-only">Next</span>
            </div>
          </div>
        </div>
        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>
<!-- End Custom Validation -->

<!--Computed Field Starts Here-->
<div class="modal fade" id="computedFieldMapper" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="computedFieldMapper" aria-hidden="true" style= "height: 70vh;" >
  <div class="modal-dialog modal-lg" role="document" >
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white;text-align: center;'>
        <h5 class="modal-title" id="computedFieldMapper" style="width:100%;text-align: center;height:auto;">Configure Computation Logic</h5>
        <button type="button" class="close" data-dismiss="modal"  data-target='#computedFieldMapper' onclick="closeCompDev()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
       <div class="modal-body" style= "height: 40vh;overflow-y: auto">
        <div class='card'>
          <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Configure Fields</div>
          <div class='card-body' style="max-height: 15rem; overflow-y: scroll;">
            <div class="row">
              <div class="form-group col-10">
                <select id="computedFieldMapper_table" class="select2 form-control" name="computedFieldMapper_table"  data-placeholder="Column Mapper">
                  <option value="value" selected disabled>Select Table</option>
                </select>
              </div>
              <div class="form-group col-2">
                <span class="equationBuilder2" style="margin-top: 46px;">
                  <a data-toggle="tooltip" title="Equation Builder" value="eq" id="FieldMapper_EBDisplayButtonID"><i name="actions1" value="eq" class="fas fa-square-root-alt ihover javaSC thin-icontrash" style="font-size: 18px;margin-top: 5px;margin-left: 25px;"></i></a>
                </span>
              </div>
            </div>

            <table id="computedFieldMapper_main_table" class="table table-bordered table-sm table-hover" >
              <thead id="modal-table-head-done">
                <th style="text-align:center;">Table Name</th>
                <th style="text-align:center;">Reconfigure</th>
                <th style="text-align:center;">Apply on every upload</th>
              </thead>
              <tbody id="modal-table-body-computedFieldMapper_main_table">

              </tbody>
            </table>

          </div>
        </div>
      </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" id="savecomputedFieldMapper_button" data-elementID="" >Save</button>
        </div>

    </div>
  </div>
</div>
<!-- Computed Field Modal Ends Here -->

<div class="modal" id="listViewEditButtonModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Configure Button Styling</h5>
      </div>
      <div class="modal-body">
        <div class="card-header">
          <div class="float-right" style="margin-right: 6px;">
            <button onclick="listViewPopulateEditButtonContent(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>


      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="listViewcloseEditButton(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="listViewsaveEditButton(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!---->
<div class="modal" id="columnNamesRenamesModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Configure Column Header Names</h5>
      </div>
      <div class="modal-body" max-height ="70rem;">
        <div class="card-header">
          <div class="float-left">
            <div class="custom-control custom-checkbox">
              <input type="checkbox" id="allow_checkbox_column_rename" name="allow_checkbox_column_rename" class="checkboxinput custom-control-input" json_model_name="">
              <label for="allow_checkbox_column_rename" class="custom-control-label">For edit list view?</label>
            </div>
          </div>
          <div class="float-right" style="margin-right: 6px;">
            <button onclick="columnNamesRenamesModalContent(this)" class="btn btn-primary add_button" type="button">Custom column header names <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>
        <div class="body-column-header-name">

        </div>

      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="columnNamesRenamesModalcloseEditButton(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="columnNamesRenamesModalsaveEditButton(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!---->
<!--Multiple Title Name Modal-->
<div class="modal fade" id="titleNameMultipleModal" data-focus="false" style ="z-index:1500">
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Title Name</h5>
      </div>
      <div class="modal-body">
        <div class="card-header">
          <div class="float-right" style="margin-right: 6px;">
            <button onclick="titleNameMultipleModalContent(this)" class="btn btn-primary" type="button">Add tables <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>


      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="titleNameMultipleModalClose(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="titleNameMultipleModalSave(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!---->
<!-- More Colors Modal Multiple -->
<div class="modal fade" id="morecolorsMultiple" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="morecolorsMultiple" aria-hidden="true" style ="z-index:2000" >
  <div class="modal-dialog modal-dialog-centered" style="max-width: 1026px;justify-content: center;" role="document">
    <div class="modal-content" style="min-height: 461px;width:50%">
      <div class="modal-header">
        <h4 class="modal-title" id="exampleModalLongTitle">More Colors</h4>
        <button type="button" class="btn btn-secondary" style="background-color: var(--primary-color);font-size: 13px; display:none"
        data-dismiss="modal" id="gobackcolors" aria-label="Close">
      </button>
      </div>
      <div class=" modal-body">
          <div class="row">
            <div class="col-12">
              <div class="main-container" onclick="pickMultiple()">
                <img class="colorpicker" style="margin-right:2px;"
                  src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/782173/img_colormap.png" usemap="#colormapMultiple"
                  alt="colormapMultiple">
                <div class="main-container">
                  <map id="colormapMultiple" name="colormapMultiple"><area style="cursor:pointer"
                    shape="poly" coords="63,0,72,4,72,15,63,19,54,15,54,4"
                    onmouseover="mouseOverColorMultiple(&quot;#003366&quot;)" alt="#003366"><area style="cursor:pointer"
                    shape="poly" coords="81,0,90,4,90,15,81,19,72,15,72,4"
                    onmouseover="mouseOverColorMultiple(&quot;#336699&quot;)" alt="#336699"><area style="cursor:pointer"
                    shape="poly" coords="99,0,108,4,108,15,99,19,90,15,90,4"
                    onmouseover="mouseOverColorMultiple(&quot;#3366CC&quot;)" alt="#3366CC"><area style="cursor:pointer"
                    shape="poly" coords="117,0,126,4,126,15,117,19,108,15,108,4"
                    onmouseover="mouseOverColorMultiple(&quot;#003399&quot;)" alt="#003399"><area style="cursor:pointer"
                    shape="poly" coords="135,0,144,4,144,15,135,19,126,15,126,4"
                    onmouseover="mouseOverColorMultiple(&quot;#000099&quot;)" alt="#000099"><area style="cursor:pointer"
                    shape="poly" coords="153,0,162,4,162,15,153,19,144,15,144,4"
                    onmouseover="mouseOverColorMultiple(&quot;#0000CC&quot;)" alt="#0000CC"><area style="cursor:pointer"
                    shape="poly" coords="171,0,180,4,180,15,171,19,162,15,162,4"
                    onmouseover="mouseOverColorMultiple(&quot;#000066&quot;)" alt="#000066"><area style="cursor:pointer"
                    shape="poly" coords="54,15,63,19,63,30,54,34,45,30,45,19"
                    onmouseover="mouseOverColorMultiple(&quot;#006666&quot;)" alt="#006666"><area style="cursor:pointer"
                    shape="poly" coords="72,15,81,19,81,30,72,34,63,30,63,19"
                    onmouseover="mouseOverColorMultiple(&quot;#006699&quot;)" alt="#006699"><area style="cursor:pointer"
                    shape="poly" coords="90,15,99,19,99,30,90,34,81,30,81,19"
                    onmouseover="mouseOverColorMultiple(&quot;#0099CC&quot;)" alt="#0099CC"><area style="cursor:pointer"
                    shape="poly" coords="108,15,117,19,117,30,108,34,99,30,99,19"
                    onmouseover="mouseOverColorMultiple(&quot;#0066CC&quot;)" alt="#0066CC"><area style="cursor:pointer"
                    shape="poly" coords="126,15,135,19,135,30,126,34,117,30,117,19"
                    onmouseover="mouseOverColorMultiple(&quot;#0033CC&quot;)" alt="#0033CC"><area style="cursor:pointer"
                    shape="poly" coords="144,15,153,19,153,30,144,34,135,30,135,19"
                    onmouseover="mouseOverColorMultiple(&quot;#0000FF&quot;)" alt="#0000FF"><area style="cursor:pointer"
                    shape="poly" coords="162,15,171,19,171,30,162,34,153,30,153,19"
                    onmouseover="mouseOverColorMultiple(&quot;#3333FF&quot;)" alt="#3333FF"><area style="cursor:pointer"
                    shape="poly" coords="180,15,189,19,189,30,180,34,171,30,171,19"
                    onmouseover="mouseOverColorMultiple(&quot;#333399&quot;)" alt="#333399"><area style="cursor:pointer"
                    shape="poly" coords="45,30,54,34,54,45,45,49,36,45,36,34"
                    onmouseover="mouseOverColorMultiple(&quot;#669999&quot;)" alt="#669999"><area style="cursor:pointer"
                    shape="poly" coords="63,30,72,34,72,45,63,49,54,45,54,34"
                    onmouseover="mouseOverColorMultiple(&quot;#009999&quot;)" alt="#009999"><area style="cursor:pointer"
                    shape="poly" coords="81,30,90,34,90,45,81,49,72,45,72,34"
                    onmouseover="mouseOverColorMultiple(&quot;#33CCCC&quot;)" alt="#33CCCC"><area style="cursor:pointer"
                    shape="poly" coords="99,30,108,34,108,45,99,49,90,45,90,34"
                    onmouseover="mouseOverColorMultiple(&quot;#00CCFF&quot;)" alt="#00CCFF"><area style="cursor:pointer"
                    shape="poly" coords="117,30,126,34,126,45,117,49,108,45,108,34"
                    onmouseover="mouseOverColorMultiple(&quot;#0099FF&quot;)" alt="#0099FF"><area style="cursor:pointer"
                    shape="poly" coords="135,30,144,34,144,45,135,49,126,45,126,34"
                    onmouseover="mouseOverColorMultiple(&quot;#0066FF&quot;)" alt="#0066FF"><area style="cursor:pointer"
                    shape="poly" coords="153,30,162,34,162,45,153,49,144,45,144,34"
                    onmouseover="mouseOverColorMultiple(&quot;#3366FF&quot;)" alt="#3366FF"><area style="cursor:pointer"
                    shape="poly" coords="171,30,180,34,180,45,171,49,162,45,162,34"
                    onmouseover="mouseOverColorMultiple(&quot;#3333CC&quot;)" alt="#3333CC"><area style="cursor:pointer"
                    shape="poly" coords="189,30,198,34,198,45,189,49,180,45,180,34"
                    onmouseover="mouseOverColorMultiple(&quot;#666699&quot;)" alt="#666699"><area style="cursor:pointer"
                    shape="poly" coords="36,45,45,49,45,60,36,64,27,60,27,49"
                    onmouseover="mouseOverColorMultiple(&quot;#339966&quot;)" alt="#339966"><area style="cursor:pointer"
                    shape="poly" coords="54,45,63,49,63,60,54,64,45,60,45,49"
                    onmouseover="mouseOverColorMultiple(&quot;#00CC99&quot;)" alt="#00CC99"><area style="cursor:pointer"
                    shape="poly" coords="72,45,81,49,81,60,72,64,63,60,63,49"
                    onmouseover="mouseOverColorMultiple(&quot;#00FFCC&quot;)" alt="#00FFCC"><area style="cursor:pointer"
                    shape="poly" coords="90,45,99,49,99,60,90,64,81,60,81,49"
                    onmouseover="mouseOverColorMultiple(&quot;#00FFFF&quot;)" alt="#00FFFF"><area style="cursor:pointer"
                    shape="poly" coords="108,45,117,49,117,60,108,64,99,60,99,49"
                    onmouseover="mouseOverColorMultiple(&quot;#33CCFF&quot;)" alt="#33CCFF"><area style="cursor:pointer"
                    shape="poly" coords="126,45,135,49,135,60,126,64,117,60,117,49"
                    onmouseover="mouseOverColorMultiple(&quot;#3399FF&quot;)" alt="#3399FF"><area style="cursor:pointer"
                    shape="poly" coords="144,45,153,49,153,60,144,64,135,60,135,49"
                    onmouseover="mouseOverColorMultiple(&quot;#6699FF&quot;)" alt="#6699FF"><area style="cursor:pointer"
                    shape="poly" coords="162,45,171,49,171,60,162,64,153,60,153,49"
                    onmouseover="mouseOverColorMultiple(&quot;#6666FF&quot;)" alt="#6666FF"><area style="cursor:pointer"
                    shape="poly" coords="180,45,189,49,189,60,180,64,171,60,171,49"
                    onmouseover="mouseOverColorMultiple(&quot;#6600FF&quot;)" alt="#6600FF"><area style="cursor:pointer"
                    shape="poly" coords="198,45,207,49,207,60,198,64,189,60,189,49"
                    onmouseover="mouseOverColorMultiple(&quot;#6600CC&quot;)" alt="#6600CC"><area style="cursor:pointer"
                    shape="poly" coords="27,60,36,64,36,75,27,79,18,75,18,64"
                    onmouseover="mouseOverColorMultiple(&quot;#339933&quot;)" alt="#339933"><area style="cursor:pointer"
                    shape="poly" coords="45,60,54,64,54,75,45,79,36,75,36,64"
                    onmouseover="mouseOverColorMultiple(&quot;#00CC66&quot;)" alt="#00CC66"><area style="cursor:pointer"
                    shape="poly" coords="63,60,72,64,72,75,63,79,54,75,54,64"
                    onmouseover="mouseOverColorMultiple(&quot;#00FF99&quot;)" alt="#00FF99"><area style="cursor:pointer"
                    shape="poly" coords="81,60,90,64,90,75,81,79,72,75,72,64"
                    onmouseover="mouseOverColorMultiple(&quot;#66FFCC&quot;)" alt="#66FFCC"><area style="cursor:pointer"
                    shape="poly" coords="99,60,108,64,108,75,99,79,90,75,90,64"
                    onmouseover="mouseOverColorMultiple(&quot;#66FFFF&quot;)" alt="#66FFFF"><area style="cursor:pointer"
                    shape="poly" coords="117,60,126,64,126,75,117,79,108,75,108,64"
                    onmouseover="mouseOverColorMultiple(&quot;#66CCFF&quot;)" alt="#66CCFF"><area style="cursor:pointer"
                    shape="poly" coords="135,60,144,64,144,75,135,79,126,75,126,64"
                    onmouseover="mouseOverColorMultiple(&quot;#99CCFF&quot;)" alt="#99CCFF"><area style="cursor:pointer"
                    shape="poly" coords="153,60,162,64,162,75,153,79,144,75,144,64"
                    onmouseover="mouseOverColorMultiple(&quot;#9999FF&quot;)" alt="#9999FF"><area style="cursor:pointer"
                    shape="poly" coords="171,60,180,64,180,75,171,79,162,75,162,64"
                    onmouseover="mouseOverColorMultiple(&quot;#9966FF&quot;)" alt="#9966FF"><area style="cursor:pointer"
                    shape="poly" coords="189,60,198,64,198,75,189,79,180,75,180,64"
                    onmouseover="mouseOverColorMultiple(&quot;#9933FF&quot;)" alt="#9933FF"><area style="cursor:pointer"
                    shape="poly" coords="207,60,216,64,216,75,207,79,198,75,198,64"
                    onmouseover="mouseOverColorMultiple(&quot;#9900FF&quot;)" alt="#9900FF"><area style="cursor:pointer"
                    shape="poly" coords="18,75,27,79,27,90,18,94,9,90,9,79"
                    onmouseover="mouseOverColorMultiple(&quot;#006600&quot;)" alt="#006600"><area style="cursor:pointer"
                    shape="poly" coords="36,75,45,79,45,90,36,94,27,90,27,79"
                      shape="poly" coords="36,75,45,79,45,90,36,94,27,90,27,79"
                    shape="poly" coords="36,75,45,79,45,90,36,94,27,90,27,79"
                      shape="poly" coords="36,75,45,79,45,90,36,94,27,90,27,79"
                    shape="poly" coords="36,75,45,79,45,90,36,94,27,90,27,79"
                    onmouseover="mouseOverColorMultiple(&quot;#00CC00&quot;)" alt="#00CC00"><area style="cursor:pointer"
                    shape="poly" coords="54,75,63,79,63,90,54,94,45,90,45,79"
                    onmouseover="mouseOverColorMultiple(&quot;#00FF00&quot;)" alt="#00FF00"><area style="cursor:pointer"
                    shape="poly" coords="72,75,81,79,81,90,72,94,63,90,63,79"
                    onmouseover="mouseOverColorMultiple(&quot;#66FF99&quot;)" alt="#66FF99"><area style="cursor:pointer"
                    shape="poly" coords="90,75,99,79,99,90,90,94,81,90,81,79"
                    onmouseover="mouseOverColorMultiple(&quot;#99FFCC&quot;)" alt="#99FFCC"><area style="cursor:pointer"
                    shape="poly" coords="108,75,117,79,117,90,108,94,99,90,99,79"
                    onmouseover="mouseOverColorMultiple(&quot;#CCFFFF&quot;)" alt="#CCFFFF"><area style="cursor:pointer"
                    shape="poly" coords="126,75,135,79,135,90,126,94,117,90,117,79"
                    onmouseover="mouseOverColorMultiple(&quot;#CCCCFF&quot;)" alt="#CCCCFF"><area style="cursor:pointer"
                    shape="poly" coords="144,75,153,79,153,90,144,94,135,90,135,79"
                    onmouseover="mouseOverColorMultiple(&quot;#CC99FF&quot;)" alt="#CC99FF"><area style="cursor:pointer"
                    shape="poly" coords="162,75,171,79,171,90,162,94,153,90,153,79"
                    onmouseover="mouseOverColorMultiple(&quot;#CC66FF&quot;)" alt="#CC66FF"><area style="cursor:pointer"
                    shape="poly" coords="180,75,189,79,189,90,180,94,171,90,171,79"
                    onmouseover="mouseOverColorMultiple(&quot;#CC33FF&quot;)" alt="#CC33FF"><area style="cursor:pointer"
                    shape="poly" coords="198,75,207,79,207,90,198,94,189,90,189,79"
                    onmouseover="mouseOverColorMultiple(&quot;#CC00FF&quot;)" alt="#CC00FF"><area style="cursor:pointer"
                    shape="poly" coords="216,75,225,79,225,90,216,94,207,90,207,79"
                    onmouseover="mouseOverColorMultiple(&quot;#9900CC&quot;)" alt="#9900CC"><area style="cursor:pointer"
                    shape="poly" coords="9,90,18,94,18,105,9,109,0,105,0,94"
                    onmouseover="mouseOverColorMultiple(&quot;#003300&quot;)" alt="#003300"><area style="cursor:pointer"
                    shape="poly" coords="27,90,36,94,36,105,27,109,18,105,18,94"
                      shape="poly" coords="27,90,36,94,36,105,27,109,18,105,18,94"
                    shape="poly" coords="27,90,36,94,36,105,27,109,18,105,18,94"
                      shape="poly" coords="27,90,36,94,36,105,27,109,18,105,18,94"
                    shape="poly" coords="27,90,36,94,36,105,27,109,18,105,18,94"
                    onmouseover="mouseOverColorMultiple(&quot;#009933&quot;)" alt="#009933"><area style="cursor:pointer"
                    shape="poly" coords="45,90,54,94,54,105,45,109,36,105,36,94"
                    onmouseover="mouseOverColorMultiple(&quot;#33CC33&quot;)" alt="#33CC33"><area style="cursor:pointer"
                    shape="poly" coords="63,90,72,94,72,105,63,109,54,105,54,94"
                    onmouseover="mouseOverColorMultiple(&quot;#66FF66&quot;)" alt="#66FF66"><area style="cursor:pointer"
                    shape="poly" coords="81,90,90,94,90,105,81,109,72,105,72,94"
                    onmouseover="mouseOverColorMultiple(&quot;#99FF99&quot;)" alt="#99FF99"><area style="cursor:pointer"
                    shape="poly" coords="99,90,108,94,108,105,99,109,90,105,90,94"
                    onmouseover="mouseOverColorMultiple(&quot;#CCFFCC&quot;)" alt="#CCFFCC"><area style="cursor:pointer"
                    shape="poly" coords="117,90,126,94,126,105,117,109,108,105,108,94"
                    onmouseover="mouseOverColorMultiple(&quot;#FFFFFF&quot;)" alt="#FFFFFF"><area style="cursor:pointer"
                    shape="poly" coords="135,90,144,94,144,105,135,109,126,105,126,94"
                    onmouseover="mouseOverColorMultiple(&quot;#FFCCFF&quot;)" alt="#FFCCFF"><area style="cursor:pointer"
                    shape="poly" coords="153,90,162,94,162,105,153,109,144,105,144,94"
                    onmouseover="mouseOverColorMultiple(&quot;#FF99FF&quot;)" alt="#FF99FF"><area style="cursor:pointer"
                    shape="poly" coords="171,90,180,94,180,105,171,109,162,105,162,94"
                    onmouseover="mouseOverColorMultiple(&quot;#FF66FF&quot;)" alt="#FF66FF"><area style="cursor:pointer"
                    shape="poly" coords="189,90,198,94,198,105,189,109,180,105,180,94"
                    onmouseover="mouseOverColorMultiple(&quot;#FF00FF&quot;)" alt="#FF00FF"><area style="cursor:pointer"
                    shape="poly" coords="207,90,216,94,216,105,207,109,198,105,198,94"
                    onmouseover="mouseOverColorMultiple(&quot;#CC00CC&quot;)" alt="#CC00CC"><area style="cursor:pointer"
                    shape="poly" coords="225,90,234,94,234,105,225,109,216,105,216,94"
                    onmouseover="mouseOverColorMultiple(&quot;#660066&quot;)" alt="#660066"><area style="cursor:pointer"
                    shape="poly" coords="18,105,27,109,27,120,18,124,9,120,9,109"
                    onmouseover="mouseOverColorMultiple(&quot;#336600&quot;)" alt="#336600"><area style="cursor:pointer"
                    shape="poly" coords="36,105,45,109,45,120,36,124,27,120,27,109"
                    onmouseover="mouseOverColorMultiple(&quot;#009900&quot;)" alt="#009900"><area style="cursor:pointer"
                    shape="poly" coords="54,105,63,109,63,120,54,124,45,120,45,109"
                    onmouseover="mouseOverColorMultiple(&quot;#66FF33&quot;)" alt="#66FF33"><area style="cursor:pointer"
                    shape="poly" coords="72,105,81,109,81,120,72,124,63,120,63,109"
                    onmouseover="mouseOverColorMultiple(&quot;#99FF66&quot;)" alt="#99FF66"><area style="cursor:pointer"
                    shape="poly" coords="90,105,99,109,99,120,90,124,81,120,81,109"
                    onmouseover="mouseOverColorMultiple(&quot;#CCFF99&quot;)" alt="#CCFF99"><area style="cursor:pointer"
                    shape="poly" coords="108,105,117,109,117,120,108,124,99,120,99,109"
                    onmouseover="mouseOverColorMultiple(&quot;#FFFFCC&quot;)" alt="#FFFFCC"><area style="cursor:pointer"
                    shape="poly" coords="126,105,135,109,135,120,126,124,117,120,117,109"
                    onmouseover="mouseOverColorMultiple(&quot;#FFCCCC&quot;)" alt="#FFCCCC"><area style="cursor:pointer"
                    shape="poly" coords="144,105,153,109,153,120,144,124,135,120,135,109"
                    onmouseover="mouseOverColorMultiple(&quot;#FF99CC&quot;)" alt="#FF99CC"><area style="cursor:pointer"
                    shape="poly" coords="162,105,171,109,171,120,162,124,153,120,153,109"
                    onmouseover="mouseOverColorMultiple(&quot;#FF66CC&quot;)" alt="#FF66CC"><area style="cursor:pointer"
                    shape="poly" coords="180,105,189,109,189,120,180,124,171,120,171,109"
                    onmouseover="mouseOverColorMultiple(&quot;#FF33CC&quot;)" alt="#FF33CC"><area style="cursor:pointer"
                    shape="poly" coords="198,105,207,109,207,120,198,124,189,120,189,109"
                    onmouseover="mouseOverColorMultiple(&quot;#CC0099&quot;)" alt="#CC0099"><area style="cursor:pointer"
                    shape="poly" coords="216,105,225,109,225,120,216,124,207,120,207,109"
                    onmouseover="mouseOverColorMultiple(&quot;#993399&quot;)" alt="#993399"><area style="cursor:pointer"
                    shape="poly" coords="27,120,36,124,36,135,27,139,18,135,18,124"
                    onmouseover="mouseOverColorMultiple(&quot;#333300&quot;)" alt="#333300"><area style="cursor:pointer"
                    shape="poly" coords="45,120,54,124,54,135,45,139,36,135,36,124"
                    onmouseover="mouseOverColorMultiple(&quot;#669900&quot;)" alt="#669900"><area style="cursor:pointer"
                    shape="poly" coords="63,120,72,124,72,135,63,139,54,135,54,124"
                    onmouseover="mouseOverColorMultiple(&quot;#99FF33&quot;)"
                    alt="#99FF33"><area style="cursor:pointer" shape="poly"
                    coords="81,120,90,124,90,135,81,139,72,135,72,124"
                    onmouseover="mouseOverColorMultiple(&quot;#CCFF66&quot;)"
                    alt="#CCFF66"><area style="cursor:pointer" shape="poly"
                    coords="99,120,108,124,108,135,99,139,90,135,90,124"
                    onmouseover="mouseOverColorMultiple(&quot;#FFFF99&quot;)"
                    alt="#FFFF99"><area style="cursor:pointer" shape="poly"
                    coords="117,120,126,124,126,135,117,139,108,135,108,124"
                    onmouseover="mouseOverColorMultiple(&quot;#FFCC99&quot;)" alt="#FFCC99"><area style="cursor:pointer"
                    shape="poly" coords="135,120,144,124,144,135,135,139,126,135,126,124"
                    onmouseover="mouseOverColorMultiple(&quot;#FF9999&quot;)" alt="#FF9999"><area style="cursor:pointer"
                    shape="poly" coords="153,120,162,124,162,135,153,139,144,135,144,124"
                    onmouseover="mouseOverColorMultiple(&quot;#FF6699&quot;)" alt="#FF6699"><area style="cursor:pointer"
                    shape="poly" coords="171,120,180,124,180,135,171,139,162,135,162,124"
                    onmouseover="mouseOverColorMultiple(&quot;#FF3399&quot;)" alt="#FF3399"><area style="cursor:pointer"
                    shape="poly" coords="189,120,198,124,198,135,189,139,180,135,180,124"
                    onmouseover="mouseOverColorMultiple(&quot;#CC3399&quot;)" alt="#CC3399"><area style="cursor:pointer"
                    shape="poly" coords="207,120,216,124,216,135,207,139,198,135,198,124"
                    onmouseover="mouseOverColorMultiple(&quot;#990099&quot;)" alt="#990099"><area style="cursor:pointer"
                    shape="poly" coords="36,135,45,139,45,150,36,154,27,150,27,139"
                    onmouseover="mouseOverColorMultiple(&quot;#666633&quot;)"
                    alt="#666633"><area style="cursor:pointer" shape="poly"
                    coords="54,135,63,139,63,150,54,154,45,150,45,139"
                    onmouseover="mouseOverColorMultiple(&quot;#99CC00&quot;)"
                    alt="#99CC00"><area style="cursor:pointer" shape="poly"
                    coords="72,135,81,139,81,150,72,154,63,150,63,139"
                    onmouseover="mouseOverColorMultiple(&quot;#CCFF33&quot;)"
                    alt="#CCFF33"><area style="cursor:pointer" shape="poly"
                    coords="90,135,99,139,99,150,90,154,81,150,81,139"
                    onmouseover="mouseOverColorMultiple(&quot;#FFFF66&quot;)"
                    alt="#FFFF66"><area style="cursor:pointer" shape="poly"
                    coords="108,135,117,139,117,150,108,154,99,150,99,139"
                    onmouseover="mouseOverColorMultiple(&quot;#FFCC66&quot;)"
                    alt="#FFCC66"><area style="cursor:pointer" shape="poly"
                    coords="126,135,135,139,135,150,126,154,117,150,117,139"
                    onmouseover="mouseOverColorMultiple(&quot;#FF9966&quot;)" alt="#FF9966"><area style="cursor:pointer"
                    shape="poly" coords="144,135,153,139,153,150,144,154,135,150,135,139"
                    onmouseover="mouseOverColorMultiple(&quot;#FF6666&quot;)" alt="#FF6666"><area style="cursor:pointer"
                    shape="poly" coords="162,135,171,139,171,150,162,154,153,150,153,139"
                    onmouseover="mouseOverColorMultiple(&quot;#FF0066&quot;)" alt="#FF0066"><area style="cursor:pointer"
                    shape="poly" coords="180,135,189,139,189,150,180,154,171,150,171,139"
                    onmouseover="mouseOverColorMultiple(&quot;#CC6699&quot;)" alt="#CC6699"><area style="cursor:pointer"
                    shape="poly" coords="198,135,207,139,207,150,198,154,189,150,189,139"
                    onmouseover="mouseOverColorMultiple(&quot;#993366&quot;)" alt="#993366"><area style="cursor:pointer"
                    shape="poly" coords="45,150,54,154,54,165,45,169,36,165,36,154"
                    onmouseover="mouseOverColorMultiple(&quot;#999966&quot;)"
                    alt="#999966"><area style="cursor:pointer" shape="poly"
                    coords="63,150,72,154,72,165,63,169,54,165,54,154"
                    onmouseover="mouseOverColorMultiple(&quot;#CCCC00&quot;)"
                    alt="#CCCC00"><area style="cursor:pointer" shape="poly"
                    coords="81,150,90,154,90,165,81,169,72,165,72,154"
                    onmouseover="mouseOverColorMultiple(&quot;#FFFF00&quot;)"
                    alt="#FFFF00"><area style="cursor:pointer" shape="poly"
                    coords="99,150,108,154,108,165,99,169,90,165,90,154"
                    onmouseover="mouseOverColorMultiple(&quot;#FFCC00&quot;)"
                    alt="#FFCC00"><area style="cursor:pointer" shape="poly"
                    coords="117,150,126,154,126,165,117,169,108,165,108,154"
                    onmouseover="mouseOverColorMultiple(&quot;#FF9933&quot;)" alt="#FF9933"><area style="cursor:pointer"
                    shape="poly" coords="135,150,144,154,144,165,135,169,126,165,126,154"
                    onmouseover="mouseOverColorMultiple(&quot;#FF6600&quot;)" alt="#FF6600"><area style="cursor:pointer"
                    shape="poly" coords="153,150,162,154,162,165,153,169,144,165,144,154"
                    onmouseover="mouseOverColorMultiple(&quot;#FF5050&quot;)" alt="#FF5050"><area style="cursor:pointer"
                    shape="poly" coords="171,150,180,154,180,165,171,169,162,165,162,154"
                    onmouseover="mouseOverColorMultiple(&quot;#CC0066&quot;)" alt="#CC0066"><area style="cursor:pointer"
                    shape="poly" coords="189,150,198,154,198,165,189,169,180,165,180,154"
                    onmouseover="mouseOverColorMultiple(&quot;#660033&quot;)" alt="#660033"><area style="cursor:pointer"
                    shape="poly" coords="54,165,63,169,63,180,54,184,45,180,45,169"
                    onmouseover="mouseOverColorMultiple(&quot;#996633&quot;)"
                    alt="#996633"><area style="cursor:pointer" shape="poly"
                    coords="72,165,81,169,81,180,72,184,63,180,63,169"
                    onmouseover="mouseOverColorMultiple(&quot;#CC9900&quot;)"
                    alt="#CC9900"><area style="cursor:pointer" shape="poly"
                    coords="90,165,99,169,99,180,90,184,81,180,81,169"
                    onmouseover="mouseOverColorMultiple(&quot;#FF9900&quot;)"
                    alt="#FF9900"><area style="cursor:pointer" shape="poly"
                    coords="108,165,117,169,117,180,108,184,99,180,99,169"
                    onmouseover="mouseOverColorMultiple(&quot;#CC6600&quot;)"
                    alt="#CC6600"><area style="cursor:pointer" shape="poly"
                    coords="126,165,135,169,135,180,126,184,117,180,117,169"
                    onmouseover="mouseOverColorMultiple(&quot;#FF3300&quot;)" alt="#FF3300"><area style="cursor:pointer"
                    shape="poly" coords="144,165,153,169,153,180,144,184,135,180,135,169"
                    onmouseover="mouseOverColorMultiple(&quot;#FF0000&quot;)" alt="#FF0000"><area style="cursor:pointer"
                    shape="poly" coords="162,165,171,169,171,180,162,184,153,180,153,169"
                    onmouseover="mouseOverColorMultiple(&quot;#CC0000&quot;)" alt="#CC0000"><area style="cursor:pointer"
                    shape="poly" coords="180,165,189,169,189,180,180,184,171,180,171,169"
                    onmouseover="mouseOverColorMultiple(&quot;#990033&quot;)" alt="#990033"><area style="cursor:pointer"
                    shape="poly" coords="63,180,72,184,72,195,63,199,54,195,54,184"
                    onmouseover="mouseOverColorMultiple(&quot;#663300&quot;)"
                    alt="#663300"><area style="cursor:pointer" shape="poly"
                    coords="81,180,90,184,90,195,81,199,72,195,72,184"
                    onmouseover="mouseOverColorMultiple(&quot;#996600&quot;)"
                    alt="#996600"><area style="cursor:pointer" shape="poly"
                    coords="99,180,108,184,108,195,99,199,90,195,90,184"
                    onmouseover="mouseOverColorMultiple(&quot;#CC3300&quot;)"
                    alt="#CC3300"><area style="cursor:pointer" shape="poly"
                    coords="117,180,126,184,126,195,117,199,108,195,108,184"
                    onmouseover="mouseOverColorMultiple(&quot;#993300&quot;)" alt="#993300"><area style="cursor:pointer"
                    shape="poly" coords="135,180,144,184,144,195,135,199,126,195,126,184"
                    onmouseover="mouseOverColorMultiple(&quot;#990000&quot;)" alt="#990000"><area style="cursor:pointer"
                    shape="poly" coords="153,180,162,184,162,195,153,199,144,195,144,184"
                    onmouseover="mouseOverColorMultiple(&quot;#800000&quot;)" alt="#800000"><area style="cursor:pointer"
                    shape="poly" coords="171,180,180,184,180,195,171,199,162,195,162,184"
                    onmouseover="mouseOverColorMultiple(&quot;#993333&quot;)" alt="#993333"></map>
                </div>

              </div>

              <div id="hexMultiple" style="margin-top: -85px;"></div>
              <div id="viewMultiple"></div>

              <div class="right">
                <h6 id="selected-color-labelMultiple">Selected color</h6>
                <div id="hexCMultiple"></div>
                <div id="viewCMultiple"></div>
              </div>
            </div>

            <div class="col-12">
              <div style="margin-top: 44px;">
                <h4 class="modal-title">Custom</h4>
                <div class="form-group" style="display: flex;margin-left: 20px;margin-top: 20px;">
                <label for="custom-color" style="flex: 0.4;font-size: 13px;margin-top: 3px;">Pick a Color</label>
                <input type="color" class="form-control" value="#000002" name="custom-color" oninput="customColorChangeMultiple(this)"
                  id="custom-color-iconMultiple" style="width: 50%;margin-left: 16px;">
                </div>
              </div>

            </div>


          </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="close_morecolorsMultiple" data-dismiss="modal">Close <span aria-hidden="true">&times;</span></button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" onClick="saveIconColorMultiple(this)"  id="save-morecolorsMultiple"
          style="justify-content: flex-end">Save  <i class="fa-solid fa-floppy-disk" style="color: white;"></i></button>
      </div>
    </div>
  </div>
</div>
<!-- More Icons Modal Multiple -->
<div class="modal fade" id="moreiconsMultiple" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="moreiconsMultiple" aria-hidden="true" style ="z-index:2000">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 1022px;" role="document">
    <div class="modal-content" style="min-height: 400px;width:100%">
      <div class="modal-header">
        <h4 class="modal-title" id="exampleModalLongTitleMultiple">More Icons</h4>
      </div>
      <div class="modal-body">
        <input type="text" name="search-icons" id="search-icons" onkeyup="searchIconsMultiple()" placeholder="Search Icons">
        <div class="wrapper" style="height: 426px; overflow-y: auto;">
          <div id="icons_categoryMultiple">
            {% for category,icons in icons_data.items %}
            <h5>{{category}}</h5>
            <ul class="icon-picker-list" id="iconsMultiple">
              {% for i in icons %}

              <li id="icon1Multiple">
                <a class="icon_aMultiple" data-class="{{i}}" data-index="">
                  <span class="{{i}}" aria-hidden="true"></span>
                </a>
              </li>
              {% endfor %}
            </ul>

            {% endfor %}

          </div>
          <div class="icons_without_categoryMultiple" id="icons_without_categoryMultiple" style="display: none;">
            <ul class="icon-picker-listMultiple" id="iconsMultiple">
              {% for i in icons_without_category %}
              <li id="icon2Multiple">
                <a class="icon_aMultiple" data-class="{{i}}" data-index="">
                  <span class="{{i}}" aria-hidden="true"></span>
                </a>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close <span aria-hidden="true">&times;</span></button>
        <button type="button" class="btn btn-primary" id="save-moreIconsMultiple" onClick="saveIconTitleNameMultiple(this)" data-dismiss="modal">Save <i class="fa-solid fa-floppy-disk" style="color: white;"></i></button>
      </div>
    </div>
  </div>
</div>
<div class="modal" id="listViewEmbededComputationModal" >
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Embeded Computation</h5>
      </div>
      <div class="modal-body">
        <div class="card-header">
          <div class="float-right" style="margin-right: 6px;">
            <button onclick="listViewPopulateEmbededComputationContent(this)" class="btn btn-primary" type="button">Add Computation Models <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>


      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="listViewcloseEmbededComputation(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="listViewsaveEmbededComputation(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!--action_column_modal_id  -->
<div class="modal" id="action_column_modal_id" >
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Configure Action Column</h5>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-6">
              <p style="font-weight: bold;">Header of column:</p>
              <input type="text" data-css="text" class="textinput textInput form-control "></div>
              <div class="form-group col-6">
                <div class="custom-control custom-checkbox">
                  <input type="checkbox" id="elipses_trigger" class="checkboxinput custom-control-input">
                  <label for="elipses_trigger" class="custom-control-label">
                    Elipses Trigger
                  </label>
                </div>
            </div>
            </div>

      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="action_column_modal_id_close(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary resetCustomButton" onClick="action_column_modal_id_reset(this)" type="button"  style="margin-left: 0.5rem;">
          Reset
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="action_column_modal_id_save(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!---->
<!--action_column_modal_id  -->
<div class="modal" id="action_column_modal_id" >
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Configure Action Column</h5>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-6">
              <p style="font-weight: bold;">Header of column:</p>
              <input type="text" data-css="text" class="textinput textInput form-control "></div>
              <div class="form-group col-6">
                <div class="custom-control custom-checkbox">
                  <input type="checkbox" id="elipses_trigger" class="checkboxinput custom-control-input">
                  <label for="elipses_trigger" class="custom-control-label">
                    Elipses Trigger
                  </label>
                </div>
            </div>
            </div>

      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="action_column_modal_id_close(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary resetCustomButton" onClick="action_column_modal_id_reset(this)" type="button"  style="margin-left: 0.5rem;">
          Reset
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="action_column_modal_id_save(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>

<!--action_column_modal_id  -->
<div class="modal" id="action_column_modal_id_pdf" >
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Configure PDF Action Button</h5>
      </div>
      <div class="modal-body">
        <div class="action_column_modal_id_pdf_1">
          <div class="row">
            <div class="col-3 form-group">
              <label>Data Layout Option:</label>
              <select class="select2 form-control" id="pdfDataLayoutOption">
                <option value="horizontal" selected>Horizontal</option>
                <option value="vertical">Vertical</option>
              </select>
            </div>
            <div class="col-5 form-group">
              <label>Data Layout Option (Embedded Tables):</label>
              <select class="select2 form-control" id="pdfEmbeddedDataLayoutOption">
                <option value="horizontal" selected>Horizontal</option>
                <option value="vertical">Vertical</option>
              </select>
            </div>
          </div>
          <div class="row">
            <div class="col-12 form-group">
              <div class="custom-control custom-checkbox">
                <input type="checkbox" name="embeded_table_content_in" class="checkboxinput custom-control-input" id="embeded_table_content_in">
                <label for="embeded_table_content_in" class="custom-control-label">
                  Place embedded table's content as field &amp; value in the main table?
                </label>

              </div>
            </div>
          </div>
            <div class="row">
              <div class="col-3 form-group">
                <label>Add Logo:</label>
                <select class="select2 form-control" data-logo-change onchange="logo_add_action_column_modal_id_pdf(this)">
                  <option value="" selected="">---</option>
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </div>
              <div class="col-3 form-group" data-logo style="display:none;">
                <label >Logo Placement:</label>
                <select  class="select2 form-control" data-logo-place >
                  <option value="top_left" selected="">Top Left</option>
                  <option value="top_right">Top Right</option>
                  <option value="bottom_left">Bottom Left</option>
                  <option value="bottom_right">Bottom Right</option>
                </select>
              </div>
              <div class="col-6 form-group" data-logo style="display:none;">
                <form method="post" id="action_column_modal_id_pdf_form_post" enctype="multipart/form-data">
                  <label>Upload Logo:</label>
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" id="action_column_modal_id_pdf_logo_img" name="upload_image" accept="image/*" onchange="restrictLogoSize(this.id)">
                    <label class="custom-file-label">Choose file</label>
                    <small class="form-text small-text">Resolution: 200 x 60 px and Maximum File Size: 200KB</small>
                  </div>
                </form>
              </div>
            </div>
            <div class="row">
              <div class="col-4 form-group">
                <label >Customize Table Styling Properties:</label>
                <select class="select2 form-control" data-stylling-change onchange="styllings_action_column_modal_id_pdf(this)">
                  <option value="" selected="" >---</option>
                  <option value="yes">Yes</option>
                  <option value="no" >No</option>
                </select>
              </div>
              <br>
              <div class="col-4 form-group">
                <label>Drop fields:</label>
                <select class="select2 form-control" multiple data-css-drop="drop-fields">
                </select>
              </div>
              <div class="col-4 form-group" data-stylling style="display:none;">
                <label >Header Background Color:</label>
                <input type="color" class="colorinput form-control" value="#000000" data-css="header-bg-color">
              </div>
              <div class="col-4 form-group" data-stylling style="display:none;">
                <label>Header Text Color:</label>
                <input type="color" class="colorinput form-control"  value="#ffffff" data-css="header-text-color">
              </div>
              <div class="col-4 form-group" data-stylling style="display:none;">
                <label>Cell Background Color:</label>
                <input type="color" class="colorinput form-control" value="#ffffff" data-css="cell-bg-color">
              </div>
              <div class="col-4 form-group" data-stylling style="display:none;">
                <label for="dynamicAttachmentPDFCellTextColor">Cell Text Color:</label>
                <input type="color" class="colorinput form-control" value="#000000" data-css="cell-text-color">
              </div>
              <div class="col-4 form-group" data-stylling style="display:none;">
                <label for="lvPDFHeaderFontSize">Header Font Size:</label>
                <input type="number" id="lvPDFHeaderFontSize" class="numberinput form-control" value="10">
              </div>
              <div class="col-4 form-group" data-stylling style="display:none;">
                <label for="lvPDFBodyFontSize">Body Font Size:</label>
                <input type="number" id="lvPDFBodyFontSize" class="numberinput form-control" value="10">
              </div>
              <hr>
              <div class="col-6">
                <label>Global Header Alignment:</label>
                <select class="select2 form-control" id="selectGlobalHeaderPDFLVColumnAlignment">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
              <div class="col-6">
                <label>Global Content Alignment:</label>
                <select class="select2 form-control" id="selectGlobalContentPDFLVColumnAlignment">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
              <br>
              <div class="col-6">
                <label>Select Column:</label>
                <select class="select2 form-control" id="selectColumnForPDFLVColAlignment">
                  <option value="">Select Column</option>
                </select>
              </div>
              <div class="col-12">
                <br>
                <div class="row">
                  <div class="col-4"><strong>Field</strong></div>
                  <div class="col-4"><strong>Header Alignment</strong></div>
                  <div class="col-4"><strong>Content Alignment</strong></div>
                </div>
                <div class="row" id="pdfColumnAlignmentContainer">

                </div>
              </div>
              <br>
              <hr>
              <div class="col-6 form-group" data-stylling style="display:none;">
                <label >Row Height:</label>
                <input type="number" class="numberinput form-control" step="5" min="10" max="100" value="40" data-css="row-height">
              </div>
              <div class="col-6 form-group" data-stylling style="display:none;">
                <label>Column Width:</label>
                <select class="select2 form-control" data-column-width onchange="column_width_action_column_modal_id_pdf(this)" >
                  <option value="auto" selected="">Auto Assign</option>
                  <option value="manual">Set Manually</option>
                </select>
              </div>
              <div class="col-12" id="action_column_modal_id_pdf_column_width_fieldcontainer" style="display: block; max-height: 10rem; overflow-y: auto;" data-stylling>

              </div>
            </div>
      </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="action_column_modal_id_pdf_close(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="action_column_modal_id_pdf_save(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Quick filters -->
<div class="modal" id="quick_filters_modal_id" style ="z-index:2000"  >
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document" style="width: 100%;height:70%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Quick filters</h5>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-12">
            <div class="float-right" style="margin-right: 6px;">
              <button onclick="quickFiltersContent()" class="btn btn-primary" type="button"><i class="fas fa-plus" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add Columns for Filters</button>
            </div>
          </div>
        </div>
        <div class="quickFilters">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="quick_filters_modal_id_close(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary resetCustomButton" onClick="quick_filters_modal_id_reset(this)" type="button"  style="margin-left: 0.5rem;">
          Reset
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="quick_filters_modal_id_save(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Quick filters Multi Drop Down -->
<div class="modal" id="quick_filters_modal_id_mul" style ="z-index:2000"  >
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document" style="width: 100%;height:70%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Quick filters</h5>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-12">
            <div class="float-right" style="margin-right: 6px;">
              <button onclick="quickFiltersContent_mul()" class="btn btn-primary" type="button"><i class="fas fa-plus" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add Columns for Filters</button>
            </div>
          </div>
        </div>
        <div class="quickFilters">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="quick_filters_modal_id_close_mul(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary resetCustomButton" onClick="quick_filters_modal_id_reset_mul(this)" type="button"  style="margin-left: 0.5rem;">
          Reset
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="quick_filters_modal_id_save_mul(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!-- More Colors Modal -->
<div class="modal fade" id="morecolors" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="morecolors" aria-hidden="true" style ="z-index:2000" >
  <div class="modal-dialog modal-dialog-centered" style="max-width: 1026px;justify-content: center;" role="document">
    <div class="modal-content" style="min-height: 461px;width:50%">
      <div class="modal-header">
        <h4 class="modal-title" id="exampleModalLongTitle">More Colors</h4>
        <button type="button" class="btn btn-secondary" style="background-color: var(--primary-color);font-size: 13px; display:none"
        data-dismiss="modal" id="gobackcolors" aria-label="Close">
      </button>
      </div>
      <div class=" modal-body">
          <div class="row">
            <div class="col-12">
              <div class="main-container" onclick="pick()">
                <img class="colorpicker" style="margin-right:2px;"
                  src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/782173/img_colormap.png" usemap="#colormap"
                  alt="colormap">
                <div class="main-container">
                  <map id="colormap" name="colormap"><area style="cursor:pointer"
                      shape="poly" coords="63,0,72,4,72,15,63,19,54,15,54,4"
                      onmouseover="mouseOverColor(&quot;#003366&quot;)" alt="#003366"><area style="cursor:pointer"
                      shape="poly" coords="81,0,90,4,90,15,81,19,72,15,72,4"
                      onmouseover="mouseOverColor(&quot;#336699&quot;)" alt="#336699"><area style="cursor:pointer"
                      shape="poly" coords="99,0,108,4,108,15,99,19,90,15,90,4"
                      onmouseover="mouseOverColor(&quot;#3366CC&quot;)" alt="#3366CC"><area style="cursor:pointer"
                      shape="poly" coords="117,0,126,4,126,15,117,19,108,15,108,4"
                      onmouseover="mouseOverColor(&quot;#003399&quot;)" alt="#003399"><area style="cursor:pointer"
                      shape="poly" coords="135,0,144,4,144,15,135,19,126,15,126,4"
                      onmouseover="mouseOverColor(&quot;#000099&quot;)" alt="#000099"><area style="cursor:pointer"
                      shape="poly" coords="153,0,162,4,162,15,153,19,144,15,144,4"
                      onmouseover="mouseOverColor(&quot;#0000CC&quot;)" alt="#0000CC"><area style="cursor:pointer"
                      shape="poly" coords="171,0,180,4,180,15,171,19,162,15,162,4"
                      onmouseover="mouseOverColor(&quot;#000066&quot;)" alt="#000066"><area style="cursor:pointer"
                      shape="poly" coords="54,15,63,19,63,30,54,34,45,30,45,19"
                      onmouseover="mouseOverColor(&quot;#006666&quot;)" alt="#006666"><area style="cursor:pointer"
                      shape="poly" coords="72,15,81,19,81,30,72,34,63,30,63,19"
                      onmouseover="mouseOverColor(&quot;#006699&quot;)" alt="#006699"><area style="cursor:pointer"
                      shape="poly" coords="90,15,99,19,99,30,90,34,81,30,81,19"
                      onmouseover="mouseOverColor(&quot;#0099CC&quot;)" alt="#0099CC"><area style="cursor:pointer"
                      shape="poly" coords="108,15,117,19,117,30,108,34,99,30,99,19"
                      onmouseover="mouseOverColor(&quot;#0066CC&quot;)" alt="#0066CC"><area style="cursor:pointer"
                      shape="poly" coords="126,15,135,19,135,30,126,34,117,30,117,19"
                      onmouseover="mouseOverColor(&quot;#0033CC&quot;)" alt="#0033CC"><area style="cursor:pointer"
                      shape="poly" coords="144,15,153,19,153,30,144,34,135,30,135,19"
                      onmouseover="mouseOverColor(&quot;#0000FF&quot;)" alt="#0000FF"><area style="cursor:pointer"
                      shape="poly" coords="162,15,171,19,171,30,162,34,153,30,153,19"
                      onmouseover="mouseOverColor(&quot;#3333FF&quot;)" alt="#3333FF"><area style="cursor:pointer"
                      shape="poly" coords="180,15,189,19,189,30,180,34,171,30,171,19"
                      onmouseover="mouseOverColor(&quot;#333399&quot;)" alt="#333399"><area style="cursor:pointer"
                      shape="poly" coords="45,30,54,34,54,45,45,49,36,45,36,34"
                      onmouseover="mouseOverColor(&quot;#669999&quot;)" alt="#669999"><area style="cursor:pointer"
                      shape="poly" coords="63,30,72,34,72,45,63,49,54,45,54,34"
                      onmouseover="mouseOverColor(&quot;#009999&quot;)" alt="#009999"><area style="cursor:pointer"
                      shape="poly" coords="81,30,90,34,90,45,81,49,72,45,72,34"
                      onmouseover="mouseOverColor(&quot;#33CCCC&quot;)" alt="#33CCCC"><area style="cursor:pointer"
                      shape="poly" coords="99,30,108,34,108,45,99,49,90,45,90,34"
                      onmouseover="mouseOverColor(&quot;#00CCFF&quot;)" alt="#00CCFF"><area style="cursor:pointer"
                      shape="poly" coords="117,30,126,34,126,45,117,49,108,45,108,34"
                      onmouseover="mouseOverColor(&quot;#0099FF&quot;)" alt="#0099FF"><area style="cursor:pointer"
                      shape="poly" coords="135,30,144,34,144,45,135,49,126,45,126,34"
                      onmouseover="mouseOverColor(&quot;#0066FF&quot;)" alt="#0066FF"><area style="cursor:pointer"
                      shape="poly" coords="153,30,162,34,162,45,153,49,144,45,144,34"
                      onmouseover="mouseOverColor(&quot;#3366FF&quot;)" alt="#3366FF"><area style="cursor:pointer"
                      shape="poly" coords="171,30,180,34,180,45,171,49,162,45,162,34"
                      onmouseover="mouseOverColor(&quot;#3333CC&quot;)" alt="#3333CC"><area style="cursor:pointer"
                      shape="poly" coords="189,30,198,34,198,45,189,49,180,45,180,34"
                      onmouseover="mouseOverColor(&quot;#666699&quot;)" alt="#666699"><area style="cursor:pointer"
                      shape="poly" coords="36,45,45,49,45,60,36,64,27,60,27,49"
                      onmouseover="mouseOverColor(&quot;#339966&quot;)" alt="#339966"><area style="cursor:pointer"
                      shape="poly" coords="54,45,63,49,63,60,54,64,45,60,45,49"
                      onmouseover="mouseOverColor(&quot;#00CC99&quot;)" alt="#00CC99"><area style="cursor:pointer"
                      shape="poly" coords="72,45,81,49,81,60,72,64,63,60,63,49"
                      onmouseover="mouseOverColor(&quot;#00FFCC&quot;)" alt="#00FFCC"><area style="cursor:pointer"
                      shape="poly" coords="90,45,99,49,99,60,90,64,81,60,81,49"
                      onmouseover="mouseOverColor(&quot;#00FFFF&quot;)" alt="#00FFFF"><area style="cursor:pointer"
                      shape="poly" coords="108,45,117,49,117,60,108,64,99,60,99,49"
                      onmouseover="mouseOverColor(&quot;#33CCFF&quot;)" alt="#33CCFF"><area style="cursor:pointer"
                      shape="poly" coords="126,45,135,49,135,60,126,64,117,60,117,49"
                      onmouseover="mouseOverColor(&quot;#3399FF&quot;)" alt="#3399FF"><area style="cursor:pointer"
                      shape="poly" coords="144,45,153,49,153,60,144,64,135,60,135,49"
                      onmouseover="mouseOverColor(&quot;#6699FF&quot;)" alt="#6699FF"><area style="cursor:pointer"
                      shape="poly" coords="162,45,171,49,171,60,162,64,153,60,153,49"
                      onmouseover="mouseOverColor(&quot;#6666FF&quot;)" alt="#6666FF"><area style="cursor:pointer"
                      shape="poly" coords="180,45,189,49,189,60,180,64,171,60,171,49"
                      onmouseover="mouseOverColor(&quot;#6600FF&quot;)" alt="#6600FF"><area style="cursor:pointer"
                      shape="poly" coords="198,45,207,49,207,60,198,64,189,60,189,49"
                      onmouseover="mouseOverColor(&quot;#6600CC&quot;)" alt="#6600CC"><area style="cursor:pointer"
                      shape="poly" coords="27,60,36,64,36,75,27,79,18,75,18,64"
                      onmouseover="mouseOverColor(&quot;#339933&quot;)" alt="#339933"><area style="cursor:pointer"
                      shape="poly" coords="45,60,54,64,54,75,45,79,36,75,36,64"
                      onmouseover="mouseOverColor(&quot;#00CC66&quot;)" alt="#00CC66"><area style="cursor:pointer"
                      shape="poly" coords="63,60,72,64,72,75,63,79,54,75,54,64"
                      onmouseover="mouseOverColor(&quot;#00FF99&quot;)" alt="#00FF99"><area style="cursor:pointer"
                      shape="poly" coords="81,60,90,64,90,75,81,79,72,75,72,64"
                      onmouseover="mouseOverColor(&quot;#66FFCC&quot;)" alt="#66FFCC"><area style="cursor:pointer"
                      shape="poly" coords="99,60,108,64,108,75,99,79,90,75,90,64"
                      onmouseover="mouseOverColor(&quot;#66FFFF&quot;)" alt="#66FFFF"><area style="cursor:pointer"
                      shape="poly" coords="117,60,126,64,126,75,117,79,108,75,108,64"
                      onmouseover="mouseOverColor(&quot;#66CCFF&quot;)" alt="#66CCFF"><area style="cursor:pointer"
                      shape="poly" coords="135,60,144,64,144,75,135,79,126,75,126,64"
                      onmouseover="mouseOverColor(&quot;#99CCFF&quot;)" alt="#99CCFF"><area style="cursor:pointer"
                      shape="poly" coords="153,60,162,64,162,75,153,79,144,75,144,64"
                      onmouseover="mouseOverColor(&quot;#9999FF&quot;)" alt="#9999FF"><area style="cursor:pointer"
                      shape="poly" coords="171,60,180,64,180,75,171,79,162,75,162,64"
                      onmouseover="mouseOverColor(&quot;#9966FF&quot;)" alt="#9966FF"><area style="cursor:pointer"
                      shape="poly" coords="189,60,198,64,198,75,189,79,180,75,180,64"
                      onmouseover="mouseOverColor(&quot;#9933FF&quot;)" alt="#9933FF"><area style="cursor:pointer"
                      shape="poly" coords="207,60,216,64,216,75,207,79,198,75,198,64"
                      onmouseover="mouseOverColor(&quot;#9900FF&quot;)" alt="#9900FF"><area style="cursor:pointer"
                      shape="poly" coords="18,75,27,79,27,90,18,94,9,90,9,79"
                      onmouseover="mouseOverColor(&quot;#006600&quot;)" alt="#006600"><area style="cursor:pointer"
                      shape="poly" coords="36,75,45,79,45,90,36,94,27,90,27,79"
                      onmouseover="mouseOverColor(&quot;#00CC00&quot;)" alt="#00CC00"><area style="cursor:pointer"
                      shape="poly" coords="54,75,63,79,63,90,54,94,45,90,45,79"
                      onmouseover="mouseOverColor(&quot;#00FF00&quot;)" alt="#00FF00"><area style="cursor:pointer"
                      shape="poly" coords="72,75,81,79,81,90,72,94,63,90,63,79"
                      onmouseover="mouseOverColor(&quot;#66FF99&quot;)" alt="#66FF99"><area style="cursor:pointer"
                      shape="poly" coords="90,75,99,79,99,90,90,94,81,90,81,79"
                      onmouseover="mouseOverColor(&quot;#99FFCC&quot;)" alt="#99FFCC"><area style="cursor:pointer"
                      shape="poly" coords="108,75,117,79,117,90,108,94,99,90,99,79"
                      onmouseover="mouseOverColor(&quot;#CCFFFF&quot;)" alt="#CCFFFF"><area style="cursor:pointer"
                      shape="poly" coords="126,75,135,79,135,90,126,94,117,90,117,79"
                      onmouseover="mouseOverColor(&quot;#CCCCFF&quot;)" alt="#CCCCFF"><area style="cursor:pointer"
                      shape="poly" coords="144,75,153,79,153,90,144,94,135,90,135,79"
                      onmouseover="mouseOverColor(&quot;#CC99FF&quot;)" alt="#CC99FF"><area style="cursor:pointer"
                      shape="poly" coords="162,75,171,79,171,90,162,94,153,90,153,79"
                      onmouseover="mouseOverColor(&quot;#CC66FF&quot;)" alt="#CC66FF"><area style="cursor:pointer"
                      shape="poly" coords="180,75,189,79,189,90,180,94,171,90,171,79"
                      onmouseover="mouseOverColor(&quot;#CC33FF&quot;)" alt="#CC33FF"><area style="cursor:pointer"
                      shape="poly" coords="198,75,207,79,207,90,198,94,189,90,189,79"
                      onmouseover="mouseOverColor(&quot;#CC00FF&quot;)" alt="#CC00FF"><area style="cursor:pointer"
                      shape="poly" coords="216,75,225,79,225,90,216,94,207,90,207,79"
                      onmouseover="mouseOverColor(&quot;#9900CC&quot;)" alt="#9900CC"><area style="cursor:pointer"
                      shape="poly" coords="9,90,18,94,18,105,9,109,0,105,0,94"
                      onmouseover="mouseOverColor(&quot;#003300&quot;)" alt="#003300"><area style="cursor:pointer"
                      shape="poly" coords="27,90,36,94,36,105,27,109,18,105,18,94"
                      onmouseover="mouseOverColor(&quot;#009933&quot;)" alt="#009933"><area style="cursor:pointer"
                      shape="poly" coords="45,90,54,94,54,105,45,109,36,105,36,94"
                      onmouseover="mouseOverColor(&quot;#33CC33&quot;)" alt="#33CC33"><area style="cursor:pointer"
                      shape="poly" coords="63,90,72,94,72,105,63,109,54,105,54,94"
                      onmouseover="mouseOverColor(&quot;#66FF66&quot;)" alt="#66FF66"><area style="cursor:pointer"
                      shape="poly" coords="81,90,90,94,90,105,81,109,72,105,72,94"
                      onmouseover="mouseOverColor(&quot;#99FF99&quot;)" alt="#99FF99"><area style="cursor:pointer"
                      shape="poly" coords="99,90,108,94,108,105,99,109,90,105,90,94"
                      onmouseover="mouseOverColor(&quot;#CCFFCC&quot;)" alt="#CCFFCC"><area style="cursor:pointer"
                      shape="poly" coords="117,90,126,94,126,105,117,109,108,105,108,94"
                      onmouseover="mouseOverColor(&quot;#FFFFFF&quot;)" alt="#FFFFFF"><area style="cursor:pointer"
                      shape="poly" coords="135,90,144,94,144,105,135,109,126,105,126,94"
                      onmouseover="mouseOverColor(&quot;#FFCCFF&quot;)" alt="#FFCCFF"><area style="cursor:pointer"
                      shape="poly" coords="153,90,162,94,162,105,153,109,144,105,144,94"
                      onmouseover="mouseOverColor(&quot;#FF99FF&quot;)" alt="#FF99FF"><area style="cursor:pointer"
                      shape="poly" coords="171,90,180,94,180,105,171,109,162,105,162,94"
                      onmouseover="mouseOverColor(&quot;#FF66FF&quot;)" alt="#FF66FF"><area style="cursor:pointer"
                      shape="poly" coords="189,90,198,94,198,105,189,109,180,105,180,94"
                      onmouseover="mouseOverColor(&quot;#FF00FF&quot;)" alt="#FF00FF"><area style="cursor:pointer"
                      shape="poly" coords="207,90,216,94,216,105,207,109,198,105,198,94"
                      onmouseover="mouseOverColor(&quot;#CC00CC&quot;)" alt="#CC00CC"><area style="cursor:pointer"
                      shape="poly" coords="225,90,234,94,234,105,225,109,216,105,216,94"
                      onmouseover="mouseOverColor(&quot;#660066&quot;)" alt="#660066"><area style="cursor:pointer"
                      shape="poly" coords="18,105,27,109,27,120,18,124,9,120,9,109"
                      onmouseover="mouseOverColor(&quot;#336600&quot;)" alt="#336600"><area style="cursor:pointer"
                      shape="poly" coords="36,105,45,109,45,120,36,124,27,120,27,109"
                      onmouseover="mouseOverColor(&quot;#009900&quot;)" alt="#009900"><area style="cursor:pointer"
                      shape="poly" coords="54,105,63,109,63,120,54,124,45,120,45,109"
                      onmouseover="mouseOverColor(&quot;#66FF33&quot;)" alt="#66FF33"><area style="cursor:pointer"
                      shape="poly" coords="72,105,81,109,81,120,72,124,63,120,63,109"
                      onmouseover="mouseOverColor(&quot;#99FF66&quot;)" alt="#99FF66"><area style="cursor:pointer"
                      shape="poly" coords="90,105,99,109,99,120,90,124,81,120,81,109"
                      onmouseover="mouseOverColor(&quot;#CCFF99&quot;)" alt="#CCFF99"><area style="cursor:pointer"
                      shape="poly" coords="108,105,117,109,117,120,108,124,99,120,99,109"
                      onmouseover="mouseOverColor(&quot;#FFFFCC&quot;)" alt="#FFFFCC"><area style="cursor:pointer"
                      shape="poly" coords="126,105,135,109,135,120,126,124,117,120,117,109"
                      onmouseover="mouseOverColor(&quot;#FFCCCC&quot;)" alt="#FFCCCC"><area style="cursor:pointer"
                      shape="poly" coords="144,105,153,109,153,120,144,124,135,120,135,109"
                      onmouseover="mouseOverColor(&quot;#FF99CC&quot;)" alt="#FF99CC"><area style="cursor:pointer"
                      shape="poly" coords="162,105,171,109,171,120,162,124,153,120,153,109"
                      onmouseover="mouseOverColor(&quot;#FF66CC&quot;)" alt="#FF66CC"><area style="cursor:pointer"
                      shape="poly" coords="180,105,189,109,189,120,180,124,171,120,171,109"
                      onmouseover="mouseOverColor(&quot;#FF33CC&quot;)" alt="#FF33CC"><area style="cursor:pointer"
                      shape="poly" coords="198,105,207,109,207,120,198,124,189,120,189,109"
                      onmouseover="mouseOverColor(&quot;#CC0099&quot;)" alt="#CC0099"><area style="cursor:pointer"
                      shape="poly" coords="216,105,225,109,225,120,216,124,207,120,207,109"
                      onmouseover="mouseOverColor(&quot;#993399&quot;)" alt="#993399"><area style="cursor:pointer"
                      shape="poly" coords="27,120,36,124,36,135,27,139,18,135,18,124"
                      onmouseover="mouseOverColor(&quot;#333300&quot;)" alt="#333300"><area style="cursor:pointer"
                      shape="poly" coords="45,120,54,124,54,135,45,139,36,135,36,124"
                      onmouseover="mouseOverColor(&quot;#669900&quot;)" alt="#669900"><area style="cursor:pointer"
                      shape="poly" coords="63,120,72,124,72,135,63,139,54,135,54,124"
                      onmouseover="mouseOverColor(&quot;#99FF33&quot;)"
                      alt="#99FF33"><area style="cursor:pointer" shape="poly"
                      coords="81,120,90,124,90,135,81,139,72,135,72,124"
                      onmouseover="mouseOverColor(&quot;#CCFF66&quot;)"
                      alt="#CCFF66"><area style="cursor:pointer" shape="poly"
                      coords="99,120,108,124,108,135,99,139,90,135,90,124"
                      onmouseover="mouseOverColor(&quot;#FFFF99&quot;)"
                      alt="#FFFF99"><area style="cursor:pointer" shape="poly"
                      coords="117,120,126,124,126,135,117,139,108,135,108,124"
                      onmouseover="mouseOverColor(&quot;#FFCC99&quot;)" alt="#FFCC99"><area style="cursor:pointer"
                      shape="poly" coords="135,120,144,124,144,135,135,139,126,135,126,124"
                      onmouseover="mouseOverColor(&quot;#FF9999&quot;)" alt="#FF9999"><area style="cursor:pointer"
                      shape="poly" coords="153,120,162,124,162,135,153,139,144,135,144,124"
                      onmouseover="mouseOverColor(&quot;#FF6699&quot;)" alt="#FF6699"><area style="cursor:pointer"
                      shape="poly" coords="171,120,180,124,180,135,171,139,162,135,162,124"
                      onmouseover="mouseOverColor(&quot;#FF3399&quot;)" alt="#FF3399"><area style="cursor:pointer"
                      shape="poly" coords="189,120,198,124,198,135,189,139,180,135,180,124"
                      onmouseover="mouseOverColor(&quot;#CC3399&quot;)" alt="#CC3399"><area style="cursor:pointer"
                      shape="poly" coords="207,120,216,124,216,135,207,139,198,135,198,124"
                      onmouseover="mouseOverColor(&quot;#990099&quot;)" alt="#990099"><area style="cursor:pointer"
                      shape="poly" coords="36,135,45,139,45,150,36,154,27,150,27,139"
                      onmouseover="mouseOverColor(&quot;#666633&quot;)"
                      alt="#666633"><area style="cursor:pointer" shape="poly"
                      coords="54,135,63,139,63,150,54,154,45,150,45,139"
                      onmouseover="mouseOverColor(&quot;#99CC00&quot;)"
                      alt="#99CC00"><area style="cursor:pointer" shape="poly"
                      coords="72,135,81,139,81,150,72,154,63,150,63,139"
                      onmouseover="mouseOverColor(&quot;#CCFF33&quot;)"
                      alt="#CCFF33"><area style="cursor:pointer" shape="poly"
                      coords="90,135,99,139,99,150,90,154,81,150,81,139"
                      onmouseover="mouseOverColor(&quot;#FFFF66&quot;)"
                      alt="#FFFF66"><area style="cursor:pointer" shape="poly"
                      coords="108,135,117,139,117,150,108,154,99,150,99,139"
                      onmouseover="mouseOverColor(&quot;#FFCC66&quot;)"
                      alt="#FFCC66"><area style="cursor:pointer" shape="poly"
                      coords="126,135,135,139,135,150,126,154,117,150,117,139"
                      onmouseover="mouseOverColor(&quot;#FF9966&quot;)" alt="#FF9966"><area style="cursor:pointer"
                      shape="poly" coords="144,135,153,139,153,150,144,154,135,150,135,139"
                      onmouseover="mouseOverColor(&quot;#FF6666&quot;)" alt="#FF6666"><area style="cursor:pointer"
                      shape="poly" coords="162,135,171,139,171,150,162,154,153,150,153,139"
                      onmouseover="mouseOverColor(&quot;#FF0066&quot;)" alt="#FF0066"><area style="cursor:pointer"
                      shape="poly" coords="180,135,189,139,189,150,180,154,171,150,171,139"
                      onmouseover="mouseOverColor(&quot;#CC6699&quot;)" alt="#CC6699"><area style="cursor:pointer"
                      shape="poly" coords="198,135,207,139,207,150,198,154,189,150,189,139"
                      onmouseover="mouseOverColor(&quot;#993366&quot;)" alt="#993366"><area style="cursor:pointer"
                      shape="poly" coords="45,150,54,154,54,165,45,169,36,165,36,154"
                      onmouseover="mouseOverColor(&quot;#999966&quot;)"
                      alt="#999966"><area style="cursor:pointer" shape="poly"
                      coords="63,150,72,154,72,165,63,169,54,165,54,154"
                      onmouseover="mouseOverColor(&quot;#CCCC00&quot;)"
                      alt="#CCCC00"><area style="cursor:pointer" shape="poly"
                      coords="81,150,90,154,90,165,81,169,72,165,72,154"
                      onmouseover="mouseOverColor(&quot;#FFFF00&quot;)"
                      alt="#FFFF00"><area style="cursor:pointer" shape="poly"
                      coords="99,150,108,154,108,165,99,169,90,165,90,154"
                      onmouseover="mouseOverColor(&quot;#FFCC00&quot;)"
                      alt="#FFCC00"><area style="cursor:pointer" shape="poly"
                      coords="117,150,126,154,126,165,117,169,108,165,108,154"
                      onmouseover="mouseOverColor(&quot;#FF9933&quot;)" alt="#FF9933"><area style="cursor:pointer"
                      shape="poly" coords="135,150,144,154,144,165,135,169,126,165,126,154"
                      onmouseover="mouseOverColor(&quot;#FF6600&quot;)" alt="#FF6600"><area style="cursor:pointer"
                      shape="poly" coords="153,150,162,154,162,165,153,169,144,165,144,154"
                      onmouseover="mouseOverColor(&quot;#FF5050&quot;)" alt="#FF5050"><area style="cursor:pointer"
                      shape="poly" coords="171,150,180,154,180,165,171,169,162,165,162,154"
                      onmouseover="mouseOverColor(&quot;#CC0066&quot;)" alt="#CC0066"><area style="cursor:pointer"
                      shape="poly" coords="189,150,198,154,198,165,189,169,180,165,180,154"
                      onmouseover="mouseOverColor(&quot;#660033&quot;)" alt="#660033"><area style="cursor:pointer"
                      shape="poly" coords="54,165,63,169,63,180,54,184,45,180,45,169"
                      onmouseover="mouseOverColor(&quot;#996633&quot;)"
                      alt="#996633"><area style="cursor:pointer" shape="poly"
                      coords="72,165,81,169,81,180,72,184,63,180,63,169"
                      onmouseover="mouseOverColor(&quot;#CC9900&quot;)"
                      alt="#CC9900"><area style="cursor:pointer" shape="poly"
                      coords="90,165,99,169,99,180,90,184,81,180,81,169"
                      onmouseover="mouseOverColor(&quot;#FF9900&quot;)"
                      alt="#FF9900"><area style="cursor:pointer" shape="poly"
                      coords="108,165,117,169,117,180,108,184,99,180,99,169"
                      onmouseover="mouseOverColor(&quot;#CC6600&quot;)"
                      alt="#CC6600"><area style="cursor:pointer" shape="poly"
                      coords="126,165,135,169,135,180,126,184,117,180,117,169"
                      onmouseover="mouseOverColor(&quot;#FF3300&quot;)" alt="#FF3300"><area style="cursor:pointer"
                      shape="poly" coords="144,165,153,169,153,180,144,184,135,180,135,169"
                      onmouseover="mouseOverColor(&quot;#FF0000&quot;)" alt="#FF0000"><area style="cursor:pointer"
                      shape="poly" coords="162,165,171,169,171,180,162,184,153,180,153,169"
                      onmouseover="mouseOverColor(&quot;#CC0000&quot;)" alt="#CC0000"><area style="cursor:pointer"
                      shape="poly" coords="180,165,189,169,189,180,180,184,171,180,171,169"
                      onmouseover="mouseOverColor(&quot;#990033&quot;)" alt="#990033"><area style="cursor:pointer"
                      shape="poly" coords="63,180,72,184,72,195,63,199,54,195,54,184"
                      onmouseover="mouseOverColor(&quot;#663300&quot;)"
                      alt="#663300"><area style="cursor:pointer" shape="poly"
                      coords="81,180,90,184,90,195,81,199,72,195,72,184"
                      onmouseover="mouseOverColor(&quot;#996600&quot;)"
                      alt="#996600"><area style="cursor:pointer" shape="poly"
                      coords="99,180,108,184,108,195,99,199,90,195,90,184"
                      onmouseover="mouseOverColor(&quot;#CC3300&quot;)"
                      alt="#CC3300"><area style="cursor:pointer" shape="poly"
                      coords="117,180,126,184,126,195,117,199,108,195,108,184"
                      onmouseover="mouseOverColor(&quot;#993300&quot;)" alt="#993300"><area style="cursor:pointer"
                      shape="poly" coords="135,180,144,184,144,195,135,199,126,195,126,184"
                      onmouseover="mouseOverColor(&quot;#990000&quot;)" alt="#990000"><area style="cursor:pointer"
                      shape="poly" coords="153,180,162,184,162,195,153,199,144,195,144,184"
                      onmouseover="mouseOverColor(&quot;#800000&quot;)" alt="#800000"><area style="cursor:pointer"
                      shape="poly" coords="171,180,180,184,180,195,171,199,162,195,162,184"
                      onmouseover="mouseOverColor(&quot;#993333&quot;)" alt="#993333"></map>
                </div>

              </div>

              <div id="hex" style="margin-top: -85px;"></div>
              <div id="view"></div>

              <div class="right">
                <h6 id="selected-color-label">Selected color</h6>
                <div id="hexC"></div>
                <div id="viewC"></div>
              </div>
            </div>

            <div class="col-12">
              <div style="margin-top: 44px;">
                <h4 class="modal-title">Custom</h4>
                <div class="form-group" style="display: flex;margin-left: 20px;margin-top: 20px;">
                <label for="custom-color" style="flex: 0.4;font-size: 13px;margin-top: 3px;">Pick a Color</label>
                <input type="color" class="form-control" value="#000002" name="custom-color" oninput="customColorChange(this)"
                  id="custom-color-icon" style="width: 50%;margin-left: 16px;">
                </div>
              </div>

            </div>


          </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="close_morecolors" data-dismiss="modal">Close <span aria-hidden="true">&times;</span></button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="saveIconColor(this)"  id="save-morecolors"
          style="justify-content: flex-end">Save  <i class="fa-solid fa-floppy-disk" style="color: white;"></i></button>
      </div>
    </div>
  </div>
</div>
<!-- More Icons Modal -->
<div class="modal fade" id="moreicons" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="moreicons" aria-hidden="true" style ="z-index:2000">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 1022px;" role="document">
    <div class="modal-content" style="min-height: 400px;width:100%">
      <div class="modal-header">
        <h4 class="modal-title" id="exampleModalLongTitle">More Icons</h4>
      </div>
      <div class="modal-body">
        <input type="text" name="search-icons" id="search-icons" onkeyup="searchIcons(this)" placeholder="Search Icons">
        <div class="wrapper" style="height: 426px; overflow-y: auto;">
          <div id="icons_category">
            {% for category,icons in icons_data.items %}
            <h5>{{category}}</h5>
            <ul class="icon-picker-list" id="icons">
              {% for i in icons %}

              <li id="icon1">
                <a class="icon_a" data-class="{{i}}" data-index="">
                  <span class="{{i}}" aria-hidden="true"></span>
                </a>
              </li>
              {% endfor %}
            </ul>

            {% endfor %}

          </div>
          <div class="icons_without_category" id="icons_without_category" style="display: none;">
            <ul class="icon-picker-list" id="icons">
              {% for i in icons_without_category %}
              <li id="icon2">
                <a class="icon_a" data-class="{{i}}" data-index="">
                  <span class="{{i}}" aria-hidden="true"></span>
                </a>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close <span aria-hidden="true">&times;</span></button>
        <button type="button" class="btn btn-primary" onClick="saveIconTitleName(this)" data-dismiss="modal">Save <i class="fa-solid fa-floppy-disk" style="color: white;"></i></button>
      </div>
    </div>
  </div>
</div>

<!-- More Icons Modal Action Buttons -->
<div class="modal fade" id="moreicons_action_buttons" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="moreicons_action_buttons" aria-hidden="true" style ="z-index:2000">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 1022px;" role="document">
    <div class="modal-content" style="min-height: 400px;width:100%">
      <div class="modal-header">
        <h4 class="modal-title" id="exampleModalLongTitle">More Icons</h4>
      </div>
      <div class="modal-body">
        <input type="text" name="search-icons" id="search-icons_action_buttons" onkeyup="searchIcons_action_buttons(this)" placeholder="Search Icons">
        <div class="wrapper" style="height: 426px; overflow-y: auto;">
          <div id="icons_category_action_buttons">
            {% for category,icons in icons_data.items %}
            <h5>{{category}}</h5>
            <ul class="icon-picker-list" id="icons">
              {% for i in icons %}

              <li id="icon1">
                <a class="icon_a" data-class="{{i}}" data-index="">
                  <span class="{{i}}" aria-hidden="true"></span>
                </a>
              </li>
              {% endfor %}
            </ul>

            {% endfor %}

          </div>
          <div class="icons_without_category" id="icons_without_category_action_buttons" style="display: none;">
            <ul class="icon-picker-list" id="icons">
              {% for i in icons_without_category %}
              <li id="icon2">
                <a class="icon_a" data-class="{{i}}" data-index="">
                  <span class="{{i}}" aria-hidden="true"></span>
                </a>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close <span aria-hidden="true">&times;</span></button>
        <button type="button" class="btn btn-primary" id="saveIcon_action_buttons" onClick="saveIcon_action_buttons(this)" data-dismiss="modal">Save <i class="fa-solid fa-floppy-disk" style="color: white;"></i></button>
      </div>
    </div>
  </div>
</div>
<!-- AMore Icons Modal Action Buttons End -->
<!-- More Icons Modal Action Buttons -->
<div class="modal fade" id="moreicons_action_buttons_multiple" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="moreicons_action_buttons_multiple" aria-hidden="true" style ="z-index:2000">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 1022px;" role="document">
    <div class="modal-content" style="min-height: 400px;width:100%">
      <div class="modal-header">
        <h4 class="modal-title" id="exampleModalLongTitle">More Icons</h4>
      </div>
      <div class="modal-body">
        <input type="text" name="search-icons" id="search-icons_action_buttons_multiple" onkeyup="searchIcons_action_buttons_multiple(this)" placeholder="Search Icons">
        <div class="wrapper" style="height: 426px; overflow-y: auto;">
          <div id="icons_category_action_buttons_multiple">
            {% for category,icons in icons_data.items %}
            <h5>{{category}}</h5>
            <ul class="icon-picker-list" id="icons">
              {% for i in icons %}

              <li id="icon1">
                <a class="icon_a" data-class="{{i}}" data-index="">
                  <span class="{{i}}" aria-hidden="true"></span>
                </a>
              </li>
              {% endfor %}
            </ul>

            {% endfor %}

          </div>
          <div class="icons_without_category" id="icons_without_category_action_buttons_multiple" style="display: none;">
            <ul class="icon-picker-list" id="icons">
              {% for i in icons_without_category %}
              <li id="icon2">
                <a class="icon_a" data-class="{{i}}" data-index="">
                  <span class="{{i}}" aria-hidden="true"></span>
                </a>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close <span aria-hidden="true">&times;</span></button>
        <button type="button" class="btn btn-primary" id="saveIcon_action_buttons_multiple" onClick="saveIcon_action_buttons_multiple(this)" data-dismiss="modal">Save <i class="fa-solid fa-floppy-disk" style="color: white;"></i></button>
      </div>
    </div>
  </div>
</div>
<!-- AMore Icons Modal Action Buttons End -->
<!-- More Icons Modal Action Buttons -->
<div class="modal fade" id="moreicons_button_stylling" tabindex="-1" role="dialog" data-focus="false" aria-labelledby="moreicons_button_stylling" aria-hidden="true" style ="z-index:2000">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 1022px;" role="document">
    <div class="modal-content" style="min-height: 400px;width:100%">
      <div class="modal-header">
        <h4 class="modal-title" id="exampleModalLongTitle">More Icons</h4>
      </div>
      <div class="modal-body">
        <input type="text" name="search-icons" id="search-icons_button_stylling" onkeyup="searchIcons_button_stylling(this)" placeholder="Search Icons">
        <div class="wrapper" style="height: 426px; overflow-y: auto;">
          <div id="icons_category_button_stylling">
            {% for category,icons in icons_data.items %}
            <h5>{{category}}</h5>
            <ul class="icon-picker-list" id="icons">
              {% for i in icons %}

              <li id="icon1">
                <a class="icon_a" data-class="{{i}}" data-index="">
                  <span class="{{i}}" aria-hidden="true"></span>
                </a>
              </li>
              {% endfor %}
            </ul>

            {% endfor %}

          </div>
          <div class="icons_without_category" id="icons_without_category_button_stylling" style="display: none;">
            <ul class="icon-picker-list" id="icons">
              {% for i in icons_without_category %}
              <li id="icon2">
                <a class="icon_a" data-class="{{i}}" data-index="">
                  <span class="{{i}}" aria-hidden="true"></span>
                </a>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close <span aria-hidden="true">&times;</span></button>
        <button type="button" class="btn btn-primary" data-modal="" data-card="" id="saveIcon_button_stylling" onClick="saveIcon_button_stylling(this)" data-dismiss="modal">Save <i class="fa-solid fa-floppy-disk" style="color: white;"></i></button>
      </div>
    </div>
  </div>
</div>
<!-- AMore Icons Modal Action Buttons End -->
<div class="modal" id="edit_list_view_modal_configuration_modal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-md modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Configure edit list view modal</h5>
      </div>
      <div class="modal-body">
        <div class="row text-headers">
          <div class="col-12">
            <p style="font-weight: bold;">Configure edit list view modal header:</p>
            <input type="text" class="textInput form-control ">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onclick="configure_edit_list_view_modal_header_close(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onclick="configure_edit_list_view_modal_header_save(this)"  type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Action Buttons Configuration Modal -->
<div class="modal" id="actionButtonsConfigurationModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document" style="width: 100%;height:70%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Action Buttons Configuration</h5>
      </div>
      <div class="modal-body">
        <div class="card-header">

          <div class="float-right" style="margin-right: 6px;">
            <a id="actionBtnOrder" data-toggle="dropdown" aria-expanded="false" data-list=""><i class="fa-solid fa-arrow-down-short-wide fa-2x" aria-hidden="true" style="color:var(--primary-color);"></i>&nbsp;</a>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-left" style="height: fit-content;min-width: 12em;border-radius: 1rem;overflow-y: auto;margin:0 !important;padding-top: 0 !important;">
              <div class="yourapps-dropdown">
                <span>Column Order</span>
                <a class="btn btn-secondary text-light" onclick="saveColumnOrderActionButtons(this)">Save</a>
              </div>
              <div class="apps-dropdownItems">
                <ul class="sortable-order col pt-2" style="list-style: none;">
                </ul>
              </div>
            </div>
          </div>
          <div class="float-right" style="margin-right: 6px;">
            <button  class="btn btn-primary" onclick="resetActionButtons(this)" type="button">Reset</button>
          </div>
          <div class="float-right" style="margin-right: 6px;">
            <button  class="btn btn-primary" onclick="populateActionButtons(this)" type="button">Design action buttons <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>


      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onclick="closeConfigurationModal(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onclick="saveConfigurationModal(this)"  type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Action Buttons Configuration Modal End -->
<!-- Action Buttons Configuration Modal_mul -->
<div class="modal" id="actionButtonsConfigurationModal_mul" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document" style="width: 100%;height:70%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Action Buttons Configuration</h5>
      </div>
      <div class="modal-body">
        <div class="card-header">

          <div class="float-right" style="margin-right: 6px;">
            <a id="actionBtnOrder_mul" data-toggle="dropdown" aria-expanded="false" data-list=""><i class="fa-solid fa-arrow-down-short-wide fa-2x" aria-hidden="true" style="color:var(--primary-color);"></i>&nbsp;</a>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-left" style="height: fit-content;min-width: 12em;border-radius: 1rem;overflow-y: auto;margin:0 !important;padding-top: 0 !important;">
              <div class="yourapps-dropdown">
                <span>Column Order</span>
                <a class="btn btn-secondary text-light" onclick="saveColumnOrderActionButtons_mul(this)">Save</a>
              </div>
              <div class="apps-dropdownItems">
                <ul class="sortable-order col pt-2" style="list-style: none;">
                </ul>
              </div>
            </div>
          </div>
          <div class="float-right" style="margin-right: 6px;">
            <button  class="btn btn-primary" onclick="resetActionButtons_mul(this)" type="button">Reset</button>
          </div>
          <div class="float-right" style="margin-right: 6px;">
            <button  class="btn btn-primary" onclick="populateActionButtons_mul(this)" type="button">Design action buttons <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>


      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onclick="closeConfigurationModal_mul(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onclick="saveConfigurationModal_mul(this)"  type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Action Buttons Configuration Modal_mul End -->
<!-- Action Buttons Configuration Modal Multiple -->
<div class="modal" id="actionButtonsConfigurationModalMultiple" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document" style="width: 100%;height:70%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Action Buttons Configuration</h5>
      </div>
      <div class="modal-body">
        <div class="row" style="margin-bottom: 15px;">
          <div class="col-12">
          <div class="float-right" style="margin-right: 6px;">
            <button  class="btn btn-primary" onclick="resetActionButtonsMultiple(this)" type="button">Reset</button>
          </div>
          <div class="float-right" style="margin-right: 6px;">
            <button  class="btn btn-primary" onclick="populateActionButtonsMultiple(this)" type="button">Design action buttons <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>

          </div>
        </div>

          <div class="main_container">

          </div>
          <hr style="height:2px;border-width:0;color:gray;background-color:gray">
          <div class="row" style="margin-bottom: 15px;">
            <div class="col-12">
              <div class="float-right" style="margin-right: 6px;">
                <button  class="btn btn-primary" onclick="populateTableOrderMultiple(this)" type="button">Field column order <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
              </div>
            </div>
          </div>
          <div class="small_container">

          </div>


      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onclick="closeConfigurationModalMultiple(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onclick="saveConfigurationModalMultiple(this)"  type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Action Buttons Configuration Modal Multiple End -->
<!-- Creating modal cards for process elements configuration -->
<div class="modal fade" id="formModal" role="dialog" data-focus="false" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-fullscreen modal-dialog" role="document" style="max-width: 100%; width: 100%;padding: 1rem;max-height: 100%;">
    <div class="modal-content" style="height: 85vh;">
      <div class="modal-header" style='background:#565a5e; color:white;'>
        <h5 class="modal-title" id="formModalLabel" style="margin-left: auto;">Configure create view elements</h5>
        <button type="button" class="close closeForm" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="row">
        <div class="col-4">
          <div class="modal-body" style="overflow-y: scroll ;max-height: 75vh;">
            <div class='card'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Table</div>
              <div class='card-body'>
                <form id="tableForm" method="post">
                  {% csrf_token %}
                  <div class="row">
                  <div class="form-group col-12">
                    <label class="acies_label ">Table:&nbsp;</label>
                      <select id="selectFormTable" class="select2 form-control" name="tableform1" multiple>
                        {% for i in tableList%}
                        <option value="{{i}}">{{i}}</option>
                        {%endfor%}
                      </select>
                  </div>
                </div>
                <div class="row tableRelation" style="display: none;">
                  <div class="form-group col-12">
                    <label class="acies_label ">Relationship:&nbsp;</label>
                    <div class="col-12 tableRelationDetail">
                    </div>
                  </div>
                  <div class="form-group col-12 tableRelationBtn" style = "display:none; margin-right: 4px;">
                    <button class="btn btn-primary tableRelationCreateBtn" style = "margin-right: 5px;"  onclick="tableRelationCreateBtn.call(this)" type="button" data-toggle="modal" data-target="#tableRelationModal" aria-expanded="false" aria-controls="collapseExample">
                      Create relation
                    </button>
                    <button class="btn btn-primary tableRelationCancelBtn" onclick="tableRelationCancelBtn.call(this)" type="button">
                      Cancel
                    </button>
                  </div>
                </div>
                <div class="row">
                  <div class="form-group col-6">
                    <label class="acies_label ">Template:&nbsp;</label>
                    <select id="selectFormTemplate" class="select2 form-control" name="templateform">
                        <option value="" disabled selected>--------------</option>
                        {% for i in templateListCreateView%}
                        <option value="{{i}}">{{i}}</option>
                        {%endfor%}
                      </select>
                  </div>
                  <div class="form-group col-6">
                    <label class="acies_label ">Template type:&nbsp;</label>
                    <select id="selectCreateViewTemplate" class="select2 form-control">
                      <option value="System defined template">System defined template</option>
                      <option value="Custom defined template">Custom defined template</option>
                    </select>
                  </div>
              </div>
              </form>
            </div>
            </div>
            <div class='selectionField card'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Fields to be displayed
                <input type="checkbox" id="allField" class="float-right mt-2 checkboxinput custom-checkbox" style="margin: 0px; margin-left:5px">
                <p class="float-right" style="margin:0px;margin-left:5px">Select all</p>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-12">
                    <select class="select2 form-control" id="selectAllField" multiple></select>
                  </div>
                </div>
              </div>
            </div>
            <div class='fieldPage card'>
              <div class="card">
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Field Pagination Carousel
                <input type="checkbox" id="togglepagination" class="float-right mt-2 checkboxinput custom-checkbox">
              </div>
              <form id="pageSelection" method="post">
                {% csrf_token %}
                <div class="custom-control custom-checkbox pagemand" style="margin-left: 4%;margin-top: 4%;">
                  <input type="checkbox" name="pagemand" id="togglepaginationmand" class="checkboxinput custom-control-input">
                  <label for="togglepaginationmand" class="custom-control-label">
                    Restrict navigation for mandatory fields
                  </label>
                  </div>
                <div class="custom-control custom-checkbox pagerotate" style="margin-left: 4%;margin-top: 4%;">
                  <input type="checkbox" name="pagerotate" id="togglepaginationwarp" class="checkboxinput custom-control-input">
                  <label for="togglepaginationwarp" class="custom-control-label">
                    Disable pagination wrapping
                  </label>
                  </div>
                <div class='mb-2 mt-4 mx-1 px-3'>
                  <div class="row">
                    <div class="col-5">
                      <h7 style="font-weight:bold">Page slide(s)</h7> <br> <br>
                    </div>
                    <div class="col-7 subElementCards">
                      <h7 style="font-weight:bold">Page fields</h7>
                      <i class="fas fa-minus" onclick="delPageRow()"
                        style="font-size: 17px;cursor: pointer;float: right;margin-left: 10px;">
                      </i>
                      <i nrow="0" id="addPageRowID" class="fas fa-plus" onclick="addPageRow(verboseNamecara)"
                        style="font-size: 17px;cursor: pointer;float: right;">
                      </i>
                      </div>
                    </div>
                  </div>
                </form>
              <div class="paginationrow"></div>
              </div>
              <div class='fieldRestrict_min_page card' style="display:none;">
                <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Minimum required fields on each page
                  <input type="checkbox" id="togglepagination_min_fields" class="float-right mt-2 checkboxinput custom-checkbox">
                </div>
                <form id="pageSelection_min_fields" method="post">
                  {% csrf_token %}
                  <div class='mb-2 mt-4 mx-1 px-3'>
                    <div class="row">
                      <div class="col-2">
                        <h7 style="font-weight:bold">Page slide(s)</h7> <br> <br>
                      </div>
                      <div class="col-3">
                        <h7 style="font-weight:bold">Min req fields</h7> <br> <br>
                      </div>
                      <div class="col-7 subElementCards">
                        <h7 style="font-weight:bold">Fields subset</h7>
                        <i class="fas fa-minus" onclick="delPageRow_min_fields()"
                          style="font-size: 17px;cursor: pointer;float: right;margin-left: 10px;">
                        </i>
                        <i nrow="0" id="addPageRowID_min_fields" class="fas fa-plus" onclick="addPageRow_min_fields(verboseName)"
                          style="font-size: 17px;cursor: pointer;float: right;">
                        </i>
                        </div>
                      </div>
                    </div>
                  </form>
                <div class="paginationrow_min_fields"></div>

              </div>
              <div class='fieldColOrder card'>
                <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Column re-ordering
                  <input type="checkbox" id="togglepagination_colorder" class="float-right mt-2 checkboxinput custom-checkbox">
                </div>
                <div id="column-reorder">
                  <ul class="sortable-order paginationrow_colorder col pt-2" style="list-style: none;">
                  </ul>
                </div>


              </div>
            </div>
            <div class='fieldlogo card'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Logo Configuration
              </div>
              <div class="card-body">
                <div class="custom-control custom-checkbox" style="margin-left: 3%;margin-top: 3%;margin-bottom: 3%;">
                  <input type="checkbox" id="togglelogo_cre_card" name="togglelogo_cre_card" class="checkboxinput custom-control-input" value="copy">
                  <label for="togglelogo_cre_card" class="custom-control-label">Show logo for credit/debit card ?</label>
              </div>
              </div>
              <div class="card-body">
                <div class="custom-control custom-checkbox" style="margin-left: 3%;margin-top: -9%;margin-bottom: 3%;">
                  <input type="checkbox" id="togglelogo_email" name="togglelogo_email" class="checkboxinput custom-control-input" value="copy">
                  <label for="togglelogo_email" class="custom-control-label">Show logo for email field ?</label>
              </div>
              </div>
              <div class="card-body">
                <div class="custom-control custom-checkbox" style="margin-left: 3%;margin-top: -9%;margin-bottom: 3%;">
                  <input type="checkbox" id="togglelogo_user_pic" name="togglelogo_user_pic" class="checkboxinput custom-control-input" value="copy">
                  <label for="togglelogo_user_pic" class="custom-control-label">Show profile pic for user field ?</label>
              </div>
              </div>
              <div class="card-body">
                <div class="custom-control custom-checkbox" style="margin-left: 3%;margin-top: -9%;margin-bottom: 3%;">
                  <input type="checkbox" id="togglelogo_user_email" name="togglelogo_user_email" class="checkboxinput custom-control-input" value="copy">
                  <label for="togglelogo_user_email" class="custom-control-label">Show email for user field ?</label>
              </div>
              </div>
            </div>
            <div class='fieldCopyPaste card'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Restrict Copy and Paste Actions
              </div>
              <form id="fcopypaste" method="post">
                {% csrf_token %}
                <div class="card">
                  <div class="custom-control custom-checkbox" style="margin-left: 3%;margin-top: 3%;margin-bottom: 3%;">
                    <input type="checkbox" id="field_copy_allow" name="field_copy_allow" class="checkboxinput custom-control-input" value="copy">
                    <label for="field_copy_allow" class="custom-control-label">Restrict copying from fields</label>
                </div>
                <div class="form-group col-7">
                  <label for="fcopy_fields" class="acies_label">Select Fields</label>
                  <select id="fcopy_fields" class="select2 form-control" name="fcopy_fields" multiple>
                      <option value="" disabled>Select Fields</option>
                  </select>
                  <small class="form-text">*Keep the above selection blank to apply on all fields</small>
                </div>
              </div>
              <div class="card">
                <div class="custom-control custom-checkbox" style="margin-left: 3%;margin-top: 3%;margin-bottom: 3%;">
                  <input type="checkbox" id="field_paste_allow" name="field_paste_allow" class="checkboxinput custom-control-input" value="copy">
                  <label for="field_paste_allow" class="custom-control-label">Restrict pasting to fields</label>
              </div>
              <div class="form-group col-7">
                <label for="fpaste_fields" class="acies_label">Select Fields</label>
                <select id="fpaste_fields" class="select2 form-control" name="fpaste_fields" multiple>
                    <option value="" disabled>Select Fields</option>
                </select>
                <small class="form-text">*Keep the above selection blank to apply on all fields</small>
              </div>
            </div>
                </form>
            </div>
            <div class='fieldEditLabel card'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Edit Field Labels
                <div class="custom-control custom-checkbox" style="margin-left: 93%;display: block;margin-top: -7%;padding-top: 7%;">
                  <input type="checkbox" id="toggleeditlabel" name="toggleeditlabel" class="checkboxinput custom-control-input" value="newlabel">
                  <label for="toggleeditlabel" class="custom-control-label" style="margin-top: -1.2rem;"></label>
                </div>
              </div>
              <form id="labelSelection" method="post">
                {% csrf_token %}
                <div class='mb-2 mt-4 mx-1 px-3'>
                  <div class="row">
                    <div class="col-5">
                      <h7 style="font-weight:bold">Column(s)</h7> <br> <br>
                    </div>
                    <div class="col-7 subElementCards">
                      <h7 style="font-weight:bold">New Label</h7>
                      <i class="fas fa-minus" onclick="delPageRow1()"
                        style="font-size: 17px;cursor: pointer;float: right;margin-left: 10px;">
                      </i>
                      <i nrow="0" id="addPageRowID_1" class="fas fa-plus" onclick="addPageRow1(verboseNameEdit)"
                        style="font-size: 17px;cursor: pointer;float: right;">
                      </i>
                      </div>
                    </div>
                  </div>
                </form>
              <div class="labelrow"></div>
            </div>
            <div class='card' style="height:8rem;">
              <div class="row mb-2 mx-1 px-3 mt-3">
                <div class="col-6">
                  <button type="button" class="btn btn-primary w-100" data-list="" id="embededComputationBtnID" onclick="embededComputation(this)">Embeded Computation</button>
                </div>
                <div class="col-6">
                  <button type="button" class="btn btn-primary customValbtnDev w-100" data-process_type="create" data-toggle="modal" data-target="#customValidationDev" onclick="showValModal(this)">Custom Validation</button>
                </div>
              </div>
              <div class="row mb-2 mx-1 px-3 mt-2">
                <div class="col-6">
                  <button type="button" id="grid_layout_btn" data-list="" class="btn btn-primary w-100" onclick="gridLayout(this)">Form Customization</button>
                </div>
                <div class="col-6">
                  <button type="button" id="js_filter_btn" data-list="" class="btn btn-primary w-100" onclick="jsValModal(this)">Js Validation</button>
                </div>
              </div>
            </div>
            <div class='fieldRecurrence card'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Recurrence
                <div class="custom-control custom-checkbox" style="margin-left: 71%;display: inline-block;margin-top: 2%;padding-top: 1%;">
                  <input type="checkbox" id="togglerecurlabel" name="togglerecurlabel" class="checkboxinput custom-control-input" value="newlabel2">
                  <label for="togglerecurlabel" class="custom-control-label"></label>
                </div>
              </div>
              <div class="card-body">
                <label class="acies_label">Select Fields:</label>
                <div class="row">
                  <div class="col-7">
                    <select class="select2 form-control" id="recurr_update_fields" multiple></select>
                  </div>
                </div>
              </div>
            </div>
            <div class='fieldRestrict_min card'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Minimum required fields
                <div class="custom-control custom-checkbox" style="margin-left: 93%;display: block;margin-top: -7%;padding-top: 7%;">
                  <input type="checkbox" id="togglerest_min_label" name="togglerest_min_label" class="checkboxinput custom-control-input" value="newlabel22">
                  <label for="togglerest_min_label" class="custom-control-label" style="margin-top: -1.2rem;"></label>
                </div>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-7">
                    <label for="restrict_min_no_req">Minimum no.of required fields:</label>
                    <input type="number" name="restrict_min_no_req" id="restrict_min_no_req" class="textinput textInput form-control">
                  </div>
                  <div class="col-7" style="padding-top: 1rem;">
                    <label class="acies_label">Select field subset:</label>
                    <select class="select2 form-control" id="restrict_min_fields" multiple></select>
                  </div>
                </div>
              </div>
            </div>
            <div class='big_data_handle card'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color,var(--primary-color); font-weight: bold;">Is your source a big data?
                <div class="custom-control custom-checkbox" style="margin-left: 93%;display: block;margin-top: -7%;padding-top: 7%;">
                  <input type="checkbox" id="toggle_big_data" name="toggle_big_data" class="checkboxinput custom-control-input" value="handle_big_data">
                  <label for="toggle_big_data" class="custom-control-label" style="margin-top: -1.2rem;"></label>
                </div>
              </div>
              <div class="card-body big_data_div" style="display:none">
                <div class="row">
                  <div class="form-group col-12" style="padding-top: 1rem;">
                    <label for="foreignkey_columnnames" class="acies_label">Select applicable columns:</label>
                    <select id="foreignkey_columnnames" class="select2 form-control" name="foreignkey_columnnames" multiple>
                        <option value="" disabled>Select Fields</option>
                    </select>
                  </div>
                  <div class="form-group col-12" style="padding-top: 1rem;">
                    <label for="server_side_length">No. of records to be shown per page:</label>
                    <input type="number" class="form-control numberinput" id="server_side_length" value="100" min="1" max="500" step="1"/>
                  </div>
                </div>
              </div>
            </div>
            <script>
              function contentGridlayoutFieldContent(){
                return(`
                <div class="card collapsed-card multipleJs masterstyling" id="create_view_master_styling1" style="margin-left:-12px;margin-right: -12px;">
                  <div class="card-header row">
                    <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
                      <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the Field:</p>
                      <div class="col-4">
                      <select class="select2 form-control select_field" onchange="" style="margin-left: 5px;" data-select2-id="683" tabindex="-1" aria-hidden="true">
                        <option value="" disabled selected >Select field</option>
                        </select>
                        </div>
                      </div>
                        <div class="col-2">
                          <div class="card-tools float-right">
                            <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                            <button type="button" class="btn btn-tool" onclick="removeEditButtonContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                        </div>
                      </div>
                  </div>
                  <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col-6">
                        <p style="font-weight: bold;">Font alignment labels:</p>
                        <select class="select2 form-control" data-css="font-alignment-label">
                          <option value="" selected="">Select alignment</option>
                          <option value="left">Left</option>
                          <option value="right">Right</option>
                          <option value="center">Center</option>
                        </select>
                      </div>
                      <div class="col-6">
                        <p style="font-weight: bold;">Font alignment content:</p>
                        <select class="select2 form-control" data-css="font-alignment-content">
                          <option value="" selected="">Select alignment</option>
                          <option value="left">Left</option>
                          <option value="right">Right</option>
                          <option value="center">Center</option>
                        </select>
                      </div>
                    </div>
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col-6">
                        <p style="font-weight: bold;">Label font size:</p>
                        <select class="select2 form-control" data-css="font-label-size">
                          <option value="0.8rem" selected="" data-select2-id="145">Normal</option>
                          <option value="0.7rem">Xtra small</option>
                          <option value="0.9rem">Medium</option>
                          <option value="1rem">Large</option>
                          <option value="1.1rem">Xtra large</option>
                        </select>
                      </div>
                      <div class="col-6">
                        <p style="font-weight: bold;">Content font size:</p>
                        <select class="select2 form-control" data-css="font-content-size">
                          <option value="0.8rem" selected="">Normal</option>
                          <option value="0.7rem">Xtra small</option>
                          <option value="0.9rem">Medium</option>
                          <option value="1rem">Large</option>
                          <option value="1.1rem">Xtra large</option>
                        </select>
                      </div>
                    </div>
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col-6">
                        <p style="font-weight: bold;">Label font color:</p>
                        <input type="color" value="#000000" class="form-control" data-css="font-label-color">
                      </div>
                      <div class="col-6">
                        <p style="font-weight: bold;">Content font color:</p>
                        <input type="color" value="#000000" class="form-control" data-css="font-content-color">
                      </div>
                    </div>
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col-6">
                        <p style="font-weight: bold;">Field height:</p>
                        <input type="number" class="form-control numberinput" data-css="field-height">
                      </div>
                      <div class="col-6">
                        <p style="font-weight: bold;">Field width:</p>
                        <input type="number" class="form-control numberinput" data-css="field-width">
                      </div>
                    </div>
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col-3">
                        <p style="font-weight: bold;">Field border radius*px:</p>
                        <input type="number" class="form-control numberinput" data-css="field-field-radius">
                      </div>
                      <div class="col-3">
                        <p style="font-weight: bold;">Field border style:</p>
                        <select class="select2 form-control" data-css="field-border-style">
                          <option value="none">No border</option>
                          <option value="dotted">Dotted</option>
                          <option value="dashed">Dashed</option>
                          <option value="solid">Solid</option>
                          <option value="double">Double</option>
                          <option value="groove">Groove</option>
                          <option value="ridge">Ridge</option>
                          <option value="inset">Inset</option>
                          <option value="outset">Outset</option>
                          <option value="dotted dashed solid double">Dotted dashed solid double</option>
                      </select>
                      </div>
                      <div class="col-3">
                        <p style="font-weight: bold;">Field border width*px:</p>
                        <input type="number" class="form-control numberinput" data-css="field-border-width">
                      </div>
                      <div class="col-3">
                        <p style="font-weight: bold;">Field border color:</p>
                        <div class="input-group">
                          <input type="color" class="form-control" data-css="field-border-color">
                          <select class="select2 form-control" data-css="field-border-color-opacity">
                            <option value="1" selected="">1</option>
                            <option value="0.9">0.9</option>
                            <option value="0.8">0.8</option>
                            <option value="0.7">0.7</option>
                            <option value="0.8">0.8</option>
                            <option value="0.7">0.7</option>
                            <option value="0.6">0.6</option>
                            <option value="0.5">0.5</option>
                            <option value="0.4">0.4</option>
                            <option value="0.3">0.3</option>
                            <option value="0.2">0.2</option>
                            <option value="0.1">0.1</option>
                            <option value="0">0</option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="row" style="padding-top:10px;">
                      <p style="font-weight: bold;margin-left:10px;">Field Shadow Options (in px)</p>
                    </div>
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col">
                        <p style="font-weight: bold;">h-offset:</p>
                        <input type="number" class="form-control numberinput" data-css="field-shadow-h-offset">
                      </div>
                      <div class="col">
                        <p style="font-weight: bold;">v-offset:</p>
                        <input type="number" class="form-control numberinput" data-css="field-shadow-v-offset">
                      </div>
                      <div class="col">
                        <p style="font-weight: bold;">blur:</p>
                        <input type="number" class="form-control numberinput" data-css="field-shadow-blur">
                      </div>
                      <div class="col">
                        <p style="font-weight: bold;">spread:</p>
                        <input type="number" class="form-control numberinput" data-css="field-shadow-spread">
                      </div>
                      <div class="col">
                        <p style="font-weight: bold;">color:</p>
                        <div class="input-group">
                          <input type="color" class="form-control" data-css="field-shadow-color">
                          <select class="select2 form-control" data-css="field-shadow-color-opacity">
                            <option value="1" selected="">1</option>
                            <option value="0.9">0.9</option>
                            <option value="0.8">0.8</option>
                            <option value="0.7">0.7</option>
                            <option value="0.8">0.8</option>
                            <option value="0.7">0.7</option>
                            <option value="0.6">0.6</option>
                            <option value="0.5">0.5</option>
                            <option value="0.4">0.4</option>
                            <option value="0.3">0.3</option>
                            <option value="0.2">0.2</option>
                            <option value="0.1">0.1</option>
                            <option value="0">0</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                `)
              }
              function default_in_cond_reload(i){
                let change_select = $('#basicfilter_items').find(`.filter-table tr[data-position=${i}]`).find('td').eq(2).find("input[type='number']").parent().html()
                let change_select_fk = $('#basicfilter_items').find(`.filter-table tr[data-position=${i}]`).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                if(change_select){
                  change_select = change_select.replace('<input','<select')
                  change_select = change_select + "</select>"
                  $('#basicfilter_items').find(`.filter-table tr[data-position=${i}]`).find('td').eq(2).find("input[type='number']").parent().html(change_select)
                }
                let field_type = $('#basicfilter_items').find(`.filter-table tr[data-position=${i}]`).find('.basic_table_valuer').attr('type')
                if(['date','datetime-local','time'].includes(field_type) ==false){
                  $('#basicfilter_items').find(`.filter-table tr[data-position=${i}]`).find('.basic_table_valuer').select2({multiple: true,tags:true,allowClear: false})
                  $('#basicfilter_items').find(`.filter-table tr[data-position=${i}]`).find(".select2-selection--multiple").css({"max-height": "8rem", "overflow": "auto" })
                }
              }
              function fieldLevelCustomization(dict,field_name){
                var content = contentGridlayoutFieldContent()
                $('#gridLayoutModal').find('.grid_layout_fields').append(content);
                var addedCard =  $('#gridLayoutModal').find('.grid_layout_fields').find('.masterstyling').slice(-1)
                var columnOptions = ''
                $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'formTableFields',
                    'tablesForm': JSON.stringify($('#selectFormTable').val()),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    for (j in data.finalFieldList) {
                      if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from'){
                        columnOptions +=  `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                      }

                    }
                    $(addedCard).find('.select_field').append(columnOptions)

                    if (dict != undefined &&field_name != undefined){
                      $(addedCard).find('.select_field').val(field_name).trigger('change')
                      for (let k in dict){
                        $(addedCard).find('[data-css]').each(function(){
                          if ($(this).attr('data-css') == k){
                            $(this).val(dict[k]).trigger('change')
                          }
                        })
                      }
                    }
                    $('#gridLayoutModal').find('.grid_layout_fields').find('select').each(function(){
                    $(this).select2()
                  });
                  },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })


              }
              function jsValFilterModal(This){

                $('#jsfilter_val_modal_filter').modal('show');

                $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').empty()
                $("#jsfilter_val_condition_dropdown_filter").empty()

                let m_name = $(This).parent().parent().find('td').eq(5).find('select').val()
                if(m_name){
                  m_name = m_name
                }else{
                  m_name = ""
                }

                if(m_name){
                  $.ajax({
                    url: window.location.pathname,
                    data: {
                      'model_name': m_name,
                      'operation': 'conditional_table',
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                      var label_column = data.label_columns

                    for (const [key, value] of Object.entries(label_column)) {
                      $("#jsfilter_val_condition_dropdown_filter").append(
                          '<li class="dropdown-item"><a href="javascript:void(0)" name=' +
                          key + ' class="jsfilter_val_btn_drp">' + value + '</a></li>');
                      }
                      var form_fields = data.form_fields
                      $('.jsfilter_val_btn_drp').off('click').on('click', function () {
                        var name = $(this).attr('name');
                        var text = $(this).text();
                        var STRING = data.form_fields[name]
                        var rowCount=   $('.filter-table_jsfilter_val_filter tr').length;
                        $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').append(STRING);

                        $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).attr('name',name)
                        $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).attr('data-position',rowCount)
                        let field_datatype= $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).find('td').eq(2).find('input').attr('type')

                        let change_select  =$('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html()
                        let change_select_fk  =$('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                        if(change_select){
                          change_select = change_select.replace('<input','<select')
                        change_select = change_select + "</select>"
                        $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html(change_select)
                        $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).find('td').eq(2).find("select[type='text']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                        }else if(change_select_fk){
                        change_select_fk = change_select_fk.replace('<input','<select')
                        change_select_fk = change_select_fk + "</select>"
                        $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html(change_select_fk)
                        $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).find('td').eq(2).find("select[type='number'][data-type='ForeignKey']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                        }else if (['date','datetime-local','time'].includes(field_datatype)){
                          $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='IN']`).remove()
                          $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='NOT IN']`).remove()
                        }
                        $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).find('td').eq(3).remove()
                        $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).find('td').eq(2).find("input").addClass('basic_table_valuer')
                        $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('.select2bs4').removeAttr('onchange')

                        $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).addClass(`d-flex`)
                        $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).css({'text-align':'left'})
                        $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').css('width','25%')
                        $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(1).find('div').css('max-width','10em')

                        $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td:nth-child(1),td:nth-child(2)').find("select").each(function () {
                          $(this).select2({width:'100%'});
                        })

                        $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').eq(-1).append(
                                `

                                <td class="dt-center" style="width:25%;display:none;">
                                <div>
                                  <div style="max-width: 15em;">
                                <select class="form-control select2bs4 basicfilter_curr_val" name=${name} data-dropdown_purpose="select_constant_val">
                                    <option value="" disabled selected>Select Variable</option>
                                    <option value="curr_user">Current User</option>
                                    <option value="curr_date">Current Date</option>
                                </select>
                              </div>
                                </div>
                                </td>

                                <td class="dt-center" style="width: 25%;display:none;">
                                  <div class="" style="max-width:25em;">
                                    <select class="form-control select2bs4" name=${name}>
                                      <option value="IN">IN</option>
                                      <option value="NOT IN">NOT IN</option>
                                    </select>
                                  </div>
                                </td>

                                <td class="dt-center" style="width: 25%;display:none;">
                                  <div class="" style="max-width:25em;">
                                    <select class="form-control select2bs4" name=${name}>
                                      <option value="" selected>Select table</option>
                                      {% for i in tableList%}
                                        <option value="{{i}}">{{i}}</option>
                                      {%endfor%}
                                    </select>
                                  </div>
                                </td>

                                <td class="dt-center" style="width: 25%;display:none;">
                                  <div class="" style="max-width:25em;">
                                    <select class="form-control select2bs4" name=${name}>
                                    </select>
                                  </div>
                                </td>

                                <td class="dt-center" style="width:25%;display:none;">
                                <div>
                                  <div style="max-width: 15em;">
                                <select class="form-control select2bs4" name=${name}>
                                </select>
                              </div>
                                </div>
                                </td>

                                <td class="dt-center" style="width:25%;display:none;">
                                  <button class="btn btn-primary" type="button" onclick="jsValFilterModal(this)">Configure filter</button>
                                </td>

                                <td class="dt-center" style="display:none;">
                                  <div class="" style="max-width:25em;">
                                  <input type="text" name=${name} class="form-control basicfilter_constraint" placeholder="Constraint name"/>
                                  </div>
                                </td>

                                <td class="dt-center" style="display:none;">
                                  <div class="" style="max-width:25em;">
                                  <input type="text" name=${name} class="form-control basicfilter_ruleset" placeholder="Rule set"/>
                                  </div>
                                </td>

                                <td class="dt-center">
                                  <div>
                                    <div style="max-width: 15em;">
                                      <select class="form-control select2bs4" name=${name} data-dropdown_purpose="select_constant_val">
                                          <option value="" disabled selected>Select js type</option>
                                          <option value="static">Static values</option>
                                          <option value="dynamic">Dynamic values</option>
                                          <option value="field_level">Field value</option>
                                      </select>
                                    </div>
                                  </div>
                                </td>

                                <td class="dt-center" style="display:none;">
                                  <div class="" style="max-width:25em;">
                                  <input type="text" name=${name} />
                                  </div>
                                </td>

                                `
                            )

                          $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('.select2bs4').select2({width:'100%',tags:true})

                          $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(1).css("display","none")

                          $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(2).css("display","none")

                          for (const [key, value] of Object.entries(labelcols)) {
                            $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(7).find('select').append(`<option value="${key}">${value}</option>`);
                          }

                          $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(1).find('select').each(function(){
    $(this).select2()
  })
                          $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(11).find('select').each(function(){
    $(this).select2()
  })
                          $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(3).find('select').each(function(){
    $(this).select2()
  })
                          $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(7).find('select').each(function(){
    $(this).select2()
  })

                          $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(-2).find('select').on("change", function(){

                              if($(this).val() == "static"){

                                $(this).parent().parent().parent().parent().find('td').eq(1).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(2).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(3).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(4).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(5).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(6).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(7).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(8).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(9).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(10).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(11).css("display","block")

                              }else if($(this).val() == "dynamic"){

                                $(this).parent().parent().parent().parent().find('td').eq(1).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(2).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(3).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(4).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(5).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(6).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(7).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(8).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(9).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(10).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(11).css("display","block")

                              }else if($(this).val() == "field_level"){

                                $(this).parent().parent().parent().parent().find('td').eq(1).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(2).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(3).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(4).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(5).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(6).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(7).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(8).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(9).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(10).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(11).css("display","block")

                              }else{
                                $(this).parent().parent().parent().parent().find('td').eq(1).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(2).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(3).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(4).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(5).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(6).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(7).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(8).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(9).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(10).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(11).css("display","none")
                              }
                          })

                          $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(5).find('select').on("change", function(){

                            let table_name = $(this).val()
                            let bl_this = $(this)

                            $.ajax({
                              url: window.location.pathname,

                              data: {
                                'operation': 'dropFieldList',
                                'tableName':table_name,
                              },
                              type: "POST",
                              dataType: "json",
                              success: function (data) {

                                $(bl_this).parent().parent().parent().find('td').eq(6).find('select').empty()

                                for (var i = 0; i < data.fieldList.length; i++) {
                                  $(bl_this).parent().parent().parent().find('td').eq(6).find('select').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                                }

                                let data_reload = $(bl_this).parent().parent().parent().find('td').eq(6).find('select').attr("data-data")
                                if(data_reload){
                                  $(bl_this).parent().parent().parent().find('td').eq(6).find('select').val(data_reload).trigger("change")
                                  $(bl_this).parent().parent().parent().find('td').eq(6).find('select').removeAttr("data-data")
                                }
                              },
                              error: function () {
                                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                              }

                            })

                          })

                          $("#savejsfilter_val_filter").on('click',function(){
                            cond = []
                            m_config = {}
                            m_config["val_message"] = ""
                            $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find('tr').each(function(){
                                if($(this).find('td').eq(-2).find('select').val() == "static"){
                                    temp = {
                                        'jstype': 'static',
                                        'column_name' : $(this).find('td').eq(-1).find('input').attr('name'),
                                        'condition': $(this).find('td').eq(1).find('select').val(),
                                        'input_value': $(this).find('td').eq(2).find('input,select,textarea').val(),
                                        'constraint_name' : $(this).find('td').eq(9).find('input').val(),
                                        'rule_set': $(this).find('td').eq(10).find('input').val(),
                                    }
                                    cond.push(temp)
                                }else if($(this).find('td').eq(-2).find('select').val() == "dynamic"){
                                    temp = {
                                        'jstype': 'dynamic',
                                        'column_name' : $(this).find('td').eq(-1).find('input').attr('name'),
                                        'condition': $(this).find('td').eq(1).find('select').val(),
                                        'input_value': $(this).find('td').eq(3).find('input,select,textarea').val(),
                                        'constraint_name' : $(this).find('td').eq(9).find('input').val(),
                                        'rule_set': $(this).find('td').eq(10).find('input').val(),
                                    }
                                    cond.push(temp)
                                }else if($(this).find('td').eq(-2).find('select').val() == "field_level"){
                                    temp = {
                                        'jstype': 'field_level',
                                        'column_name' : $(this).find('td').eq(-1).find('input').attr('name'),
                                        'condition': $(this).find('td').eq(1).find('select').val(),
                                        'input_value': $(this).find('td').eq(7).find('input,select,textarea').val(),
                                        'constraint_name' : $(this).find('td').eq(9).find('input').val(),
                                        'rule_set': $(this).find('td').eq(10).find('input').val(),
                                    }
                                    cond.push(temp)
                                }
                            })
                            m_config["config"] = cond
                            $(".jsfilter_master").attr('data-basicfilter-config',JSON.stringify(m_config))
                            closeJsvalFilter();
                          })

                        $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('.select2bs4').on('change',function(){
                          let in_operand = ['IN','NOT IN']
                          let valuer = $(this).val()
                          if(in_operand.includes(valuer) ==true){
                            let change_select  =$('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html()
                            let change_select_fk  =$('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                            if(change_select){

                            change_select = change_select.replace('<input','<select')
                              change_select = change_select + "</select>"
                              $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html(change_select)
                          }
                          let field_type = $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                          if(['date','datetime-local','time'].includes(field_type) ==false){
                              $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: true,tags:true,allowClear: false})
                            $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find(".select2-selection--multiple").css({"max-height": "8rem", "overflow": "auto" })
                            }

                          }else{
                            let change_select  =$('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html()
                            if(change_select ){
                              change_select = change_select.replace('<select','<input')
                              change_select = change_select.replace('</select>','')
                              if($('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").attr(`data-type`) != 'ForeignKey'){
                                $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html(change_select)
                                $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").removeClass('select2-hidden-accessible')
                                $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('td').eq(2).find('span').remove('span')
                              }else{
                                $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                              }
                            }

                            let field_type = $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                            if(['date','datetime-local','time'].includes(field_type)==false){
                              if($('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type') =="text"){
                                $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                              }
                            }

                          }
                        })
                        $('.remove_filter').on('click', removefilter);
                        function removefilter() {
                          $(this).closest("tr").remove();

                          $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter`).each(function(){
                            var rowCount=   $('.filter-table_jsfilter_val_filter tr').length;
                            for(let rc=0;rc<rowCount;rc++){
                              $('#jsfilter_val_items_filter').find(`.filter-table_jsfilter_val_filter`).find('tr').eq(rc).attr('data-position',rc)
                            }

                          })
                        }

                      });

                      let basicfilter_config =  $(This).attr('data-basicfilter-config')
                        if(basicfilter_config && basicfilter_config!="" && basicfilter_config!="{}"){
                          basicfilter_config = JSON.parse(basicfilter_config)
                          basicfilter_config = basicfilter_config["config"]

                          $('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').empty()
                          if(basicfilter_config.length >0){
                            for(let i=0;i<basicfilter_config.length;i++){

                              let column_name = basicfilter_config[i]['column_name']
                              let condition_name= basicfilter_config[i]['condition']
                                                            let input_value= basicfilter_config[i]['input_value']
                                                            let jstype = basicfilter_config[i]['jstype']

                              if(basicfilter_config[i].hasOwnProperty('constraint_name')){
                                  constraint_name = basicfilter_config[i]['constraint_name']
                              }else{
                                  constraint_name = ""
                              }
                              if(basicfilter_config[i].hasOwnProperty('rule_set')){
                                  rule_set = basicfilter_config[i]['rule_set']
                              }else{
                                  rule_set = ""
                              }

                                $(document).find("#jsfilter_val_condition_dropdown_filter").find('.dropdown-item').find(`a[name='${column_name}']`).click()

                                $(document).find('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find(`tr[data-position=${i}]`).find('td').eq(-2).find('select').val(jstype).trigger('change')

                                let current_div = $(document).find('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find(`tr[data-position=${i}]`).find('td').eq(2).find('div')


                                $(document).find('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find(`tr[data-position=${i}]`).find('td').eq(1).find('div').find('select').val(condition_name).trigger('change')

                                if(jstype == "static"){
                                  $(document).find('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find(`tr[data-position=${i}]`).find('td').eq(2).find('.basicfilter_curr_val').val(input_value).trigger('change')
                                }else if(jstype == "dynamic"){
                                  $(document).find('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find(`tr[data-position=${i}]`).find('td').eq(3).find('.basicfilter_curr_val').val(input_value).trigger('change')
                                }else if(jstype == "field_level"){
                                  $(document).find('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find(`tr[data-position=${i}]`).find('td').eq(7).find('select').val(input_value).trigger('change')
                                }

                                $(document).find('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find(`tr[data-position=${i}]`).find('td').eq(9).find('.basicfilter_constraint').val(constraint_name).trigger('change')
                                $(document).find('#jsfilter_val_items_filter').find('.filter-table_jsfilter_val_filter').find(`tr[data-position=${i}]`).find('td').eq(10).find('.basicfilter_ruleset').val(rule_set).trigger('change')

                                if(typeof(input_value) === "string" && input_value !== null && jstype == "static"){
                                  setTimeout(function(){
                                if(current_div.find(`select option[value='${input_value}']`).length <= 0){
                                      current_div.find('select').append(`<option value='${input_value}'>${input_value}</option>`)
                                    }
                                  current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                              },1000)
                                }else if(typeof(input_value) === 'object' && input_value !== null && jstype == "static"){
                                  if(current_div.find(`.basic_table_valuer`).attr('data-type')=="ForeignKey"){
                                  setTimeout(function(){
                                    current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                                    },1000)
                                }else{
                                  let output_html ="";
                                  $.each(input_value, function(key,value){
                                    if(current_div.find(`.basic_table_valuer option[value='${value}']`).length <= 0 && current_div.find(`.basic_table_valuer`).attr('data-type')!="ForeignKey"){
                                      output_html+=`<option value='${value}' selected>${value}</option>`
                                    }
                                  })
                                  default_in_cond_reload(i);
                                  current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                                  current_div.find('.basic_table_valuer').append(output_html)

                                }

                                }

                          }
                          }
                        }
                    },
                    error: function () {
                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
                  });
                }

              }

              var labelcols = {}
              function jsValModal(This){
                $("#formModal").modal('hide');
                $('#jsfilter_val_modal').modal('show');

                //for dropdown options
                $('#jsfilter_val_items').find('.filter-table_jsfilter_val').empty()
                $("#jsfilter_val_condition_dropdown").empty()
                let m_name = $("#selectFormTable").val()
                if(m_name.length > 0){
                  m_name = m_name[0]
                }else{
                  m_name = ""
                }

                if(m_name){
                  $.ajax({
                    url: window.location.pathname,
                    data: {
                      'model_name': m_name,
                      'operation': 'conditional_table',
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                      var label_column = data.label_columns
                      labelcols = data.label_columns
                    for (const [key, value] of Object.entries(label_column)) {
                      $("#jsfilter_val_condition_dropdown").append(
                          '<li class="dropdown-item"><a href="javascript:void(0)" name=' +
                          key + ' class="jsfilter_val_btn_drp">' + value + '</a></li>');
                      }
                      var form_fields = data.form_fields
                      $('.jsfilter_val_btn_drp').off('click').on('click', function () {
                        var name = $(this).attr('name');
                        var text = $(this).text();
                        var STRING = data.form_fields[name]
                        var rowCount=   $('.filter-table_jsfilter_val tr').length;
                        $('#jsfilter_val_items').find('.filter-table_jsfilter_val').append(STRING);

                        $('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).attr('name',name)
                        $('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).attr('data-position',rowCount)
                        let field_datatype= $('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).find('td').eq(2).find('input').attr('type')

                        let change_select  =$('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html()
                        let change_select_fk  =$('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                        if(change_select){
                          change_select = change_select.replace('<input','<select')
                        change_select = change_select + "</select>"
                        $('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html(change_select)
                        $('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).find('td').eq(2).find("select[type='text']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                        }else if(change_select_fk){
                        change_select_fk = change_select_fk.replace('<input','<select')
                        change_select_fk = change_select_fk + "</select>"
                        $('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html(change_select_fk)
                        $('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).find('td').eq(2).find("select[type='number'][data-type='ForeignKey']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                        }else if (['date','datetime-local','time'].includes(field_datatype)){
                          $('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='IN']`).remove()
                          $('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='NOT IN']`).remove()
                        }
                        $('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).find('td').eq(3).remove()
                        $('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).find('td').eq(2).find("input").addClass('basic_table_valuer')
                        $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('.select2bs4').removeAttr('onchange')

                        $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).addClass(`d-flex`)
                        $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).css({'text-align':'left'})
                        $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').css('width','25%')
                        $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(1).find('div').css('max-width','10em')

                        $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td:nth-child(1),td:nth-child(2)').find("select").each(function () {
                          $(this).select2({width:'100%'});
                        })

                        $('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').eq(-1).append(
                                `

                                <td class="dt-center" style="width:25%;display:none;">
                                <div>
                                  <div>
                                <select class="form-control select2 basicfilter_curr_val" name=${name} data-dropdown_purpose="select_constant_val">
                                    <option value="" disabled selected>Select Variable</option>
                                    <option value="curr_user">Current User</option>
                                    <option value="curr_date">Current Date</option>
                                </select>
                              </div>
                                </div>
                                </td>

                                <td class="dt-center" style="width: 25%;display:none;">
                                  <div class="" style="max-width:25em;">
                                    <select class="form-control select2" name=${name}>
                                      <option value="IN">IN</option>
                                      <option value="NOT IN">NOT IN</option>
                                    </select>
                                  </div>
                                </td>

                                <td class="dt-center" style="width: 25%;display:none;">
                                  <div class="" style="max-width:25em;">
                                    <select class="form-control select2" name=${name}>
                                      <option value="" selected>Select table</option>
                                      {% for i in tableList%}
                                        <option value="{{i}}">{{i}}</option>
                                      {%endfor%}
                                    </select>
                                  </div>
                                </td>

                                <td class="dt-center" style="width: 25%;display:none;">
                                  <div class="" style="max-width:25em;">
                                    <select class="form-control select2bs4" name=${name}>
                                    </select>
                                  </div>
                                </td>

                                <td class="dt-center" style="width:25%;display:none;">
                                  <button class="btn btn-primary jsfilter_master w-100" type="button" onclick="jsValFilterModal(this)" data-basicfilter-config = "{}">Configure filter</button>
                                </td>

                                <td class="dt-center" style="width:25%;display:none;">
                                  <select class="form-control select2bs4" name=${name}>
                                  </select>
                                </td>

                                <td class="dt-center" style="display:none;">
                                  <div class="" style="max-width:25em;">
                                  <input type="text" name=${name} class="form-control basicfilter_constraint" placeholder="Constraint name"/>
                                  </div>
                                </td>

                                <td class="dt-center" style="display:none;">
                                  <div class="" style="max-width:25em;">
                                  <input type="text" name=${name} class="form-control basicfilter_ruleset" placeholder="Rule set"/>
                                  </div>
                                </td>

                                <td class="dt-center" style="width:25%">
                                  <div>
                                    <div>
                                      <select class="form-control select2" name=${name} data-dropdown_purpose="select_constant_val">
                                          <option value="" disabled selected>Select js type</option>
                                          <option value="static">Static values</option>
                                          <option value="dynamic">Dynamic values</option>
                                          <option value="master_based">Master based values</option>
                                          <option value="master_field">Master field comparison</option>
                                          <option value="field_based">Field based values</option>
                                      </select>
                                    </div>
                                  </div>
                                </td>

                                <td class="dt-center" style="display:none;">
                                  <div class="" style="max-width:25em;">
                                  <input type="text" name=${name} />
                                  </div>
                                </td>

                                `
                            )

                          $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('.select2bs4').select2({width:'100%',tags:true})

                          $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(1).css("display","none")

                          $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(2).css("display","none")

                          for (const [key, value] of Object.entries(label_column)) {
                            $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(8).find('select').append(`<option value="${key}">${value}</option>`)
                          }
                          $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(-2).find('select').each(function(){

    $(this).select2()
  })
                          $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(3).find('select').each(function(){

    $(this).select2()
  })
                          $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(5).find('select').each(function(){

    $(this).select2()
  })
                          $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(6).find('select').each(function(){

    $(this).select2()
  })
                          $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(4).find('select').each(function(){

    $(this).select2()
  })
                          $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(1).find('select').each(function(){

    $(this).select2()
  })
                          $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(8).find('select').each(function(){

    $(this).select2()
  })

                          $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(-2).find('select').on("change", function(){

                              if($(this).val() == "static"){

                                $(this).parent().parent().parent().parent().find('td').eq(1).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(2).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(3).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(4).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(5).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(6).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(7).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(8).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(9).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(10).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(11).css("display","block")

                              }else if($(this).val() == "dynamic"){

                                $(this).parent().parent().parent().parent().find('td').eq(1).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(2).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(3).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(4).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(5).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(6).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(7).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(8).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(9).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(10).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(11).css("display","block")

                              }else if($(this).val() == "master_based"){

                                $(this).parent().parent().parent().parent().find('td').eq(1).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(2).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(3).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(4).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(5).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(6).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(7).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(8).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(9).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(10).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(11).css("display","block")

                              }else if($(this).val() == "master_field"){

                                $(this).parent().parent().parent().parent().find('td').eq(1).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(2).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(3).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(4).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(5).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(6).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(7).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(8).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(9).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(10).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(11).css("display","block")

                              }else if($(this).val() == "field_based"){
                                $(this).parent().parent().parent().parent().find('td').eq(1).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(2).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(3).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(4).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(5).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(6).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(7).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(8).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(9).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(10).css("display","block")
                                $(this).parent().parent().parent().parent().find('td').eq(11).css("display","block")
                              }else{
                                $(this).parent().parent().parent().parent().find('td').eq(1).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(2).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(3).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(4).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(5).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(6).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(7).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(8).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(9).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(10).css("display","none")
                                $(this).parent().parent().parent().parent().find('td').eq(11).css("display","none")
                              }
                          })

                          $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(5).find('select').on("change", function(){

                            let table_name = $(this).val()
                            let bl_this = $(this)

                            $.ajax({
                              url: window.location.pathname,

                              data: {
                                'operation': 'dropFieldList',
                                'tableName':table_name,
                              },
                              type: "POST",
                              dataType: "json",
                              success: function (data) {

                                $(bl_this).parent().parent().parent().find('td').eq(6).find('select').empty()

                                for (var i = 0; i < data.fieldList.length; i++) {
                                  $(bl_this).parent().parent().parent().find('td').eq(6).find('select').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                                }

                                let data_reload = $(bl_this).parent().parent().parent().find('td').eq(6).find('select').attr("data-data")
                                if(data_reload){
                                  $(bl_this).parent().parent().parent().find('td').eq(6).find('select').val(data_reload).trigger("change")
                                  $(bl_this).parent().parent().parent().find('td').eq(6).find('select').removeAttr("data-data")
                                }
                              },
                              error: function () {
                                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                              }

                            })

                          })

                          $("#savejsfilter_val").on('click',function(){
                            cond = []
                            m_config = {}
                            m_config["val_message"] = $(".jsfilter_val_message").val()
                            $('#jsfilter_val_modal').modal('hide');
                            $('#jsfilter_val_items').find('.filter-table_jsfilter_val').find('tr').each(function(){
                                if($(this).find('td').eq(-2).find('select').val() == "static"){
                                    temp = {
                                        'jstype': 'static',
                                        'column_name' : $(this).find('td').eq(-1).find('input').attr('name'),
                                        'condition': $(this).find('td').eq(1).find('select').val(),
                                        'input_value': $(this).find('td').eq(2).find('input,select,textarea').val(),
                                        'constraint_name' : $(this).find('td').eq(9).find('input').val(),
                                        'rule_set': $(this).find('td').eq(10).find('input').val(),
                                    }
                                    cond.push(temp)
                                }else if($(this).find('td').eq(-2).find('select').val() == "dynamic"){
                                    temp = {
                                        'jstype': 'dynamic',
                                        'column_name' : $(this).find('td').eq(-1).find('input').attr('name'),
                                        'condition': $(this).find('td').eq(1).find('select').val(),
                                        'input_value': $(this).find('td').eq(3).find('input,select,textarea').val(),
                                        'constraint_name' : $(this).find('td').eq(9).find('input').val(),
                                        'rule_set': $(this).find('td').eq(10).find('input').val(),
                                    }
                                    cond.push(temp)
                                }else if($(this).find('td').eq(-2).find('select').val() == "master_based"){
                                    temp = {
                                        'jstype': 'master_based',
                                        'column_name' : $(this).find('td').eq(-1).find('input').attr('name'),
                                        'condition': $(this).find('td').eq(4).find('select').val(),
                                        'table_name': $(this).find('td').eq(5).find('input,select,textarea').val(),
                                        'columnname': $(this).find('td').eq(6).find('input,select,textarea').val(),
                                        'constraint_name' : $(this).find('td').eq(9).find('input').val(),
                                        'rule_set': $(this).find('td').eq(10).find('input').val(),
                                    }
                                    cond.push(temp)
                                }else if($(this).find('td').eq(-2).find('select').val() == "master_field"){
                                    temp = {
                                        'jstype': 'master_field',
                                        'column_name' : $(this).find('td').eq(-1).find('input').attr('name'),
                                        'condition': $(this).find('td').eq(1).find('select').val(),
                                        'table_name': $(this).find('td').eq(5).find('input,select,textarea').val(),
                                        'columnname': $(this).find('td').eq(6).find('input,select,textarea').val(),
                                        'filter_config':JSON.parse($(this).find('td').eq(7).find("button").attr("data-basicfilter-config")),
                                        'constraint_name' : $(this).find('td').eq(9).find('input').val(),
                                        'rule_set': $(this).find('td').eq(10).find('input').val(),
                                    }
                                    cond.push(temp)
                                }else if($(this).find('td').eq(-2).find('select').val() == "field_based"){
                                    temp = {
                                        'jstype': 'field_based',
                                        'column_name' : $(this).find('td').eq(-1).find('input').attr('name'),
                                        'condition': $(this).find('td').eq(1).find('select').val(),
                                        'input_value': $(this).find('td').eq(8).find('input,select,textarea').val(),
                                        'constraint_name' : $(this).find('td').eq(9).find('input').val(),
                                        'rule_set': $(this).find('td').eq(10).find('input').val(),
                                    }
                                    cond.push(temp)
                                }
                            })
                            m_config["config"] = cond
                            $("#js_filter_btn").attr('data-basicfilter-config',JSON.stringify(m_config))
                            $("#formModal").modal('show');
                          })

                        $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('.select2bs4').on('change',function(){
                          let in_operand = ['IN','NOT IN']
                          let valuer = $(this).val()
                          if(in_operand.includes(valuer) ==true){
                            let change_select  =$('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html()
                            let change_select_fk  =$('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                            if(change_select){

                              change_select = change_select.replace('<input','<select')
                              change_select = change_select + "</select>"
                              $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html(change_select)
                            }
                            let field_type = $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                            if(['date','datetime-local','time'].includes(field_type) ==false){
                              $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: true,tags:true,allowClear: false})
                              $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find(".select2-selection--multiple").css({"max-height": "8rem", "overflow": "auto" })
                            }

                          }else{
                            let change_select  =$('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html()
                            if(change_select ){
                              change_select = change_select.replace('<select','<input')
                              change_select = change_select.replace('</select>','')
                              if($('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").attr(`data-type`) != 'ForeignKey'){
                                                                $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html(change_select)
                                $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").removeClass('select2-hidden-accessible')
                                $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('td').eq(2).find('span').remove('span')
                              }else{
                                $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                              }
                            }

                            let field_type = $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                            if(['date','datetime-local','time'].includes(field_type)==false){
                              if($('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type') =="text"){
                                $('#jsfilter_val_items').find(`.filter-table_jsfilter_val tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                              }
                            }

                          }
                        })
                        $('.remove_filter').on('click', removefilter);
                        function removefilter() {
                          $(this).closest("tr").remove();

                          $('#jsfilter_val_items').find(`.filter-table_jsfilter_val`).each(function(){
                            var rowCount=   $('.filter-table_jsfilter_val tr').length;
                            for(let rc=0;rc<rowCount;rc++){
                              $('#jsfilter_val_items').find(`.filter-table_jsfilter_val`).find('tr').eq(rc).attr('data-position',rc)
                            }

                          })
                        }

                      });

                      let basicfilter_config =  $("#js_filter_btn").attr('data-basicfilter-config')
                        if(basicfilter_config && basicfilter_config!="" && basicfilter_config!="{}"){
                          basicfilter_config = JSON.parse(basicfilter_config)
                          basicfilter_config = basicfilter_config["config"]
                          $('#jsfilter_val_items').find('.filter-table_jsfilter_val').empty()
                          if(basicfilter_config.length >0){
                            for(let i=0;i<basicfilter_config.length;i++){

                              let column_name = basicfilter_config[i]['column_name']
                              let condition_name= basicfilter_config[i]['condition']
                              let input_value= basicfilter_config[i]['input_value']
                              let jstype = basicfilter_config[i]['jstype']

                              if(basicfilter_config[i].hasOwnProperty('constraint_name')){
                                  constraint_name = basicfilter_config[i]['constraint_name']
                              }else{
                                  constraint_name = ""
                              }
                              if(basicfilter_config[i].hasOwnProperty('rule_set')){
                                  rule_set = basicfilter_config[i]['rule_set']
                              }else{
                                  rule_set = ""
                              }

                                $(document).find("#jsfilter_val_condition_dropdown").find('.dropdown-item').find(`a[name='${column_name}']`).click()

                                $(document).find('#jsfilter_val_items').find('.filter-table_jsfilter_val').find(`tr[data-position=${i}]`).find('td').eq(-2).find('select').val(jstype).trigger('change')

                                let current_div = $(document).find('#jsfilter_val_items').find('.filter-table_jsfilter_val').find(`tr[data-position=${i}]`).find('td').eq(2).find('div')


                                $(document).find('#jsfilter_val_items').find('.filter-table_jsfilter_val').find(`tr[data-position=${i}]`).find('td').eq(1).find('div').find('select').val(condition_name).trigger('change')

                                if(jstype == "static"){
                                  $(document).find('#jsfilter_val_items').find('.filter-table_jsfilter_val').find(`tr[data-position=${i}]`).find('td').eq(2).find('.basicfilter_curr_val').val(input_value).trigger('change')
                                }else if(jstype == "dynamic"){
                                  $(document).find('#jsfilter_val_items').find('.filter-table_jsfilter_val').find(`tr[data-position=${i}]`).find('td').eq(3).find('.basicfilter_curr_val').val(input_value).trigger('change')
                                }else if(jstype == "master_based"){
                                  $(document).find('#jsfilter_val_items').find('.filter-table_jsfilter_val').find(`tr[data-position=${i}]`).find('td').eq(5).find('select').val(basicfilter_config[i]['table_name']).trigger('change')
                                   $(document).find('#jsfilter_val_items').find('.filter-table_jsfilter_val').find(`tr[data-position=${i}]`).find('td').eq(6).find('select').attr("data-data",basicfilter_config[i]['columnname'])
                                }else if(jstype == "master_field"){
                                  $(document).find('#jsfilter_val_items').find('.filter-table_jsfilter_val').find(`tr[data-position=${i}]`).find('td').eq(5).find('select').val(basicfilter_config[i]['table_name']).trigger('change')
                                  $(document).find('#jsfilter_val_items').find('.filter-table_jsfilter_val').find(`tr[data-position=${i}]`).find('td').eq(6).find('select').attr("data-data",basicfilter_config[i]['columnname'])
                                  $(document).find('#jsfilter_val_items').find('.filter-table_jsfilter_val').find(`tr[data-position=${i}]`).find('td').eq(7).find("button").attr("data-basicfilter-config", JSON.stringify(basicfilter_config[i]['filter_config']))
                                }else if(jstype == "field_based"){
                                  $(document).find('#jsfilter_val_items').find('.filter-table_jsfilter_val').find(`tr[data-position=${i}]`).find('td').eq(8).find('select').val(input_value).trigger('change')
                                }

                                $(document).find('#jsfilter_val_items').find('.filter-table_jsfilter_val').find(`tr[data-position=${i}]`).find('td').eq(9).find('.basicfilter_constraint').val(constraint_name).trigger('change')
                                $(document).find('#jsfilter_val_items').find('.filter-table_jsfilter_val').find(`tr[data-position=${i}]`).find('td').eq(10).find('.basicfilter_ruleset').val(rule_set).trigger('change')

                                if(typeof(input_value) === "string" && input_value !== null && jstype == "static"){
                                  setTimeout(function(){
                                if(current_div.find(`select option[value='${input_value}']`).length <= 0){
                                      current_div.find('select').append(`<option value='${input_value}'>${input_value}</option>`)
                                    }
                                  current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                              },1000)
                                }else if(typeof(input_value) === 'object' && input_value !== null && jstype == "static"){
                                  if(current_div.find(`.basic_table_valuer`).attr('data-type')=="ForeignKey"){
                                  setTimeout(function(){
                                    current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                                    },1000)
                                }else{
                                  let output_html ="";
                                  $.each(input_value, function(key,value){

                                    if(current_div.find(`.basic_table_valuer option[value='${value}']`).length <= 0 && current_div.find(`.basic_table_valuer`).attr('data-type')!="ForeignKey"){
                                      output_html+=`<option value='${value}' selected>${value}</option>`
                                    }
                                  })
                                  default_in_cond_reload(i);
                                  current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                                  current_div.find('.basic_table_valuer').append(output_html)
                                }

                                }

                          }
                          }
                        }
                    },
                    error: function () {
                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
                  });
                }
              }

              function closeJsval(){
                $("#formModal").modal('show');
                $('#jsfilter_val_modal').modal('hide');
              }

              function closeJsvalFilter(){
                $("#jsfilter_val_modal_filter").modal("hide")
              }

              function gridLayout(obj){
                $("#formModal").modal('hide');
                $('#gridLayoutModal').modal('show');
                var attrData = $(obj).attr('data-list')
                if (attrData == ''|| attrData =='{}' || attrData == 'null'){

                }else{
                  $('#gridLayoutModal').find('.grid_layout_fields').find('.masterstyling').remove()
                  var parsedAttrdata = JSON.parse(attrData)
                  if (parsedAttrdata['grid_layout_on_off']){
                    $('#grid_layout_check').prop('checked',parsedAttrdata['grid_layout_on_off'])
                    $('#gridLayoutModal').find('.grid_layout_div').find('[data-css]').each(function(){
                      for (let i in parsedAttrdata){
                        if ($(this).attr('data-css') == i){
                          $(this).val(parsedAttrdata[i]).trigger('change')
                        }
                      }
                    })
                    if ('exception' in parsedAttrdata){
                      for (let k in parsedAttrdata['exception']){
                        fieldLevelCustomization(parsedAttrdata['exception'][k],k)
                      }
                    }
                  }else{
                    $('#grid_layout_check').prop('checked',parsedAttrdata['grid_layout_on_off']);
                    $('#gridLayoutModal').find('.grid_layout_div').find('[data-css]').prop('disabled',true);
                    if ('exception' in parsedAttrdata){
                      for (let k in parsedAttrdata['exception']){
                        fieldLevelCustomization(parsedAttrdata['exception'][k],k)
                      }
                    }
                  }

                }
              }
              function closegridLayoutModal(obj){
                $("#formModal").modal('show');
                $('#gridLayoutModal').modal('hide');
              }
              function savegridLayoutModal(obj){
                var values = {}
                values['grid_layout_on_off'] = $('#grid_layout_check').prop('checked')
                if ($('#grid_layout_check').prop('checked')){
                  $('#gridLayoutModal').find('.grid_layout_div').find('[data-css]').each(function(){
                    values[$(this).attr('data-css')] = $(this).val()
                  })
                  values['field-shadow-color-rgba'] = hexToRGB(values['field-shadow-color'],values['field-shadow-color-opacity'])
                  values['field-border-color-rgba'] = hexToRGB(values['field-border-color'],values['field-border-color-opacity'])
                  if (values['field-shadow-h-offset'] == ""){
                    values['field-shadow-h-offset'] = "0"
                  }
                  if (values['field-shadow-v-offset'] == ""){
                    values['field-shadow-v-offset'] = "0"
                  }
                  if (values['field-shadow-blur'] == ""){
                    values['field-shadow-blur'] = "0"
                  }
                  if (values['field-shadow-spread'] == ""){
                    values['field-shadow-spread'] = "0"
                  }
                }
                var cards = $('#gridLayoutModal').find('.grid_layout_fields').find('.masterstyling')
                var lengthOfCards = cards.length;
                var mainCardValues = {}
                for (let i = 0; i < lengthOfCards; i++) {
                  var cardValues = {}
                  var singleCard = $('#gridLayoutModal').find('.grid_layout_fields').find('.masterstyling').eq(i)
                  $(singleCard).find('[data-css]').each(function(){
                    cardValues[$(this).attr('data-css')] = $(this).val()
                  })
                  cardValues['field-shadow-color-rgba'] = hexToRGB(cardValues['field-shadow-color'],cardValues['field-shadow-color-opacity'])
                  cardValues['field-border-color-rgba'] = hexToRGB(cardValues['field-border-color'],cardValues['field-border-color-opacity'])
                  if (cardValues['field-shadow-h-offset'] == ""){
                    cardValues['field-shadow-h-offset'] = "0"
                  }
                  if (cardValues['field-shadow-v-offset'] == ""){
                    cardValues['field-shadow-v-offset'] = "0"
                  }
                  if (cardValues['field-shadow-blur'] == ""){
                    cardValues['field-shadow-blur'] = "0"
                  }
                  if (cardValues['field-shadow-spread'] == ""){
                    cardValues['field-shadow-spread'] = "0"
                  }
                  mainCardValues[$(singleCard).find('.select_field').val()] = cardValues
                }
                values['exception'] = mainCardValues
                $('#grid_layout_btn').attr('data-list',JSON.stringify(values))
                $("#formModal").modal('show');
                $('#gridLayoutModal').modal('hide');
              }
              function gridLayoutCheck(obj){
                if ($(obj).prop('checked') == true){
                  $('#gridLayoutModal').find('.grid_layout_div').find('[data-css]').prop('disabled',false);
                }else{
                  $('#gridLayoutModal').find('.grid_layout_div').find('[data-css]').prop('disabled',true);
                }

              }
              function populateComputationContent(obj){
                var modelVal = $(obj).val()
                if (modelVal == 'no_computation' || modelVal == null){
                  $(obj).parent().parent().find('.col-3').empty()
                  $(obj).parent().parent().parent().find('.computationRow').empty()
                }else{
                  $(obj).parent().parent().find('.col-3').empty()
                  $(obj).parent().parent().find('.col-3').append(`
                  <p style="font-weight: bold;">Trigger Select:</p>
                  <select class="select2 form-control embededComputationTrigger" >
                    <option value="" disabled selected>Trigger Select</option>
                    <option value="auto_trigger" >Auto trigger</option>
                    <option value="manual_trigger" >Manual trigger</option>
                  </select>
                  `)
                  $(obj).parent().parent().parent().find('.computationRow').empty()
                  $(obj).parent().parent().parent().find('.computationRow').append(`
                  <div class='col-3'>
                    <p style="font-weight: bold;">Select Table:</p>
                    <select class="select2 form-control embededComputationTable" onchange="embededComputationFields(this)" >
                      <option value="" disabled selected>Tables</option>
                    </select>
                  </div>
                  <div class='col-3'>
                    <p style="font-weight: bold;">Select Input Fields:</p>
                    <select class="select2 form-control embededComputationInput" name="table" multiple>


                    </select>
                  </div>
                  <div class='col-3'>
                    <p style="font-weight: bold;">Select Output Type:</p>
                    <select class="select2 form-control embededComputationOutputType" onchange="embededComputationTarget(this)">
                      <option value="" disabled selected>Output Types</option>
                      <option value="full_output" >Full output</option>
                      <option value="target_output" >Target output</option>
                    </select>
                  </div>
                  <div class='col-3 targetFields' style='display:none;'>
                    <p style="font-weight: bold;">Select Target Fields:</p>
                    <select class="select2 form-control embededComputationTargetColumn" multiple>

                    </select>
                  </div>
                  `)
                  var addedCard =  $("#embededComputationModal").find('.computationRow')
                  var selectedTables = $('#selectFormTable').val()
                  $(addedCard).find('.embededComputationTable').empty()
                  $(addedCard).find('.embededComputationTable').append(`<option value="" disabled selected>Tables</option>`)
                  for (i in selectedTables){
                    $(addedCard).find('.embededComputationTable').append(`
                    <option value="${selectedTables[i]}">${selectedTables[i]}</option>
                    `)
                  }
                }
                $("#embededComputationModal").find('select').each(function(){
    $(this).select2()
  })
              }
              function embededComputationTarget(obj){
                if ($(obj).val()== 'full_output'){
                  $(obj).parent().parent().find('.targetFields').css("display","none");
                  $(obj).parent().parent().parent().find(".topRow").find("#embedded_nonedit").parent().parent().css("display","none")
                  $(obj).parent().parent().find('.embededComputationTargetColumn').val('').trigger('change')
                }else{
                  $(obj).parent().parent().find('.targetFields').css("display","block");
                  $(obj).parent().parent().parent().find(".topRow").find("#embedded_nonedit").parent().parent().css("display","block")
                }
              }
              function embededComputation(obj){
                $("#formModal").modal('hide')
                var attrData = $(obj).attr('data-list')
                if (attrData == ''|| attrData =='{}' || attrData == 'null'){
                  var addedCard =  $("#embededComputationModal").find('.computationRow')
                  var selectedTables = $('#selectFormTable').val()
                  $(addedCard).find('.embededComputationTable').empty()
                  $(addedCard).find('.embededComputationTable').append(`<option value="" disabled selected>Tables</option>`)
                  for (i in selectedTables){
                    $(addedCard).find('.embededComputationTable').append(`
                    <option value="${selectedTables[i]}">${selectedTables[i]}</option>
                    `)
                  }
                  $("#embededComputationModal").find('#selectEmbededComputationModel').val('').trigger('change')
                  $("#embedded_nonedit").prop("checked",false)
                }else{

                  var parsedAttrdata = JSON.parse(attrData)
                  for (let i in parsedAttrdata){
                    $("#embededComputationModal").find('#selectEmbededComputationModel').val(i).trigger('change')
                      var selectedTables = $('#selectFormTable').val()
                      $("#embededComputationModal").find('.computationRow').find('.embededComputationTable').empty()
                      $("#embededComputationModal").find('.computationRow').find('.embededComputationTable').append(`<option value="" disabled selected>Tables</option>`)
                      for (let l in selectedTables){
                        $("#embededComputationModal").find('.computationRow').find('.embededComputationTable').append(`
                        <option value="${selectedTables[l]}">${selectedTables[l]}</option>
                        `)
                      }
                    for (let j in parsedAttrdata[i]){
                      $("#embededComputationModal").find('.computationRow').find('.embededComputationInput').attr('field',JSON.stringify(parsedAttrdata[i][j][0]))
                      $("#embededComputationModal").find('.computationRow').find('.embededComputationTargetColumn').attr('target-field',JSON.stringify(parsedAttrdata[i][j][1]))
                      $("#embededComputationModal").find('.computationRow').find('.embededComputationTable').val(j).trigger('change')
                      $("#embededComputationModal").find('.embededComputationTrigger').val(parsedAttrdata[i][j][2]).trigger('change')

                      $("#embededComputationModal").find('.embededComputationOutputType').val(parsedAttrdata[i][j][3]).trigger('change')
                      if(parsedAttrdata[i][j].length > 4){
                        if(parsedAttrdata[i][j][4]){
                          $("#embedded_nonedit").prop("checked",true)
                        }else{
                          $("#embedded_nonedit").prop("checked",false)
                        }
                      }
                    }

                  }
                }

                $("#embededComputationModal").modal('show')
                $("#embededComputationModal").find('select').each(function(){
    $(this).select2()
  })
              }
              function closeEmbededComputationModal(obj){
                $("#embededComputationModal").modal('hide')
                $("#formModal").modal('show')
              }

              function closeColMapperDev(){
                $("#documentModal").modal("show")
              }

              function showValModal(obj){
                let processType = $(obj).attr("data-process_type")

                if(processType == "create"){
                  $("#formModal").modal('hide')
                }else if(processType == "list"){
                  $('#dataTableModal').modal('hide')
                }else if(processType == "upload"){
                  $("#documentModal").css("display","none");
                }
                $("#customValidationDev").attr("data-process_type",processType)
                customTableDev(obj)
              }

              function closeVal(){
                let processType = $("#customValidationDev").attr("data-process_type")

                if(processType == "create"){
                  $("#formModal").modal('show')
                }else if(processType == "list"){
                  $('#dataTableModal').modal('show')
                }else if(processType == "upload"){
                  $("#documentModal").css("display","block");
                }

              }

              function closeCompDev(){
                $("#documentModal").modal("show")
              }

              function embededComputationFields(obj){
                var selectedTable = $(obj).val()
                var columnOptions = ''
                  $.ajax({
                    url: window.location.pathname,

                    data: {
                      'operation': 'formTableFields',
                      'tablesForm': JSON.stringify([selectedTable]),
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                      for (j in data.finalFieldList) {
                        if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from'){
                          columnOptions +=  `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                        }

                      }
                      $(obj).parent().parent().find('.embededComputationInput').empty()

                      $(obj).parent().parent().find('.embededComputationInput').append(columnOptions)
                      var field = $(obj).parent().parent().find('.embededComputationInput').attr('field')
                      if (field){
                        var parsedField = JSON.parse(field)
                        $(obj).parent().parent().find('.embededComputationInput').val(parsedField).trigger('change')
                      }

                      $(obj).parent().parent().find('.embededComputationTargetColumn').empty()

                      $(obj).parent().parent().find('.embededComputationTargetColumn').append(columnOptions)
                      var targetField = $(obj).parent().parent().find('.embededComputationTargetColumn').attr('target-field')
                      if (targetField){
                        var parsedTargetField = JSON.parse(targetField)
                        $(obj).parent().parent().find('.embededComputationTargetColumn').val(parsedTargetField).trigger('change')
                      }
                    },
                    error: function () {
                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
                  })
              }
              function saveEmbededComputationModal(obj){
                if ($('#selectEmbededComputationModel').val() == 'no_computation'){
                  $('#embededComputationBtnID').attr('data-list','')
                }else{
                  var values = {}
                  var rowVals = {}
                  var trigger = $("#embededComputationModal").find('.embededComputationTrigger').val()

                  var singleRow = $("#embededComputationModal").find('.computationRow')
                  var input = $(singleRow).find('.embededComputationInput').val()
                  var targetColumn = $(singleRow).find('.embededComputationTargetColumn').val()
                  var outputType = $(singleRow).find('.embededComputationOutputType').val()
                  var embedded_editable = $("#embededComputationModal").find("#embedded_nonedit").prop("checked")
                  rowVals[$(singleRow).find('.embededComputationTable').val()] = [input,targetColumn,trigger,outputType,embedded_editable]

                  values[$('#selectEmbededComputationModel').val()] = rowVals
                  $('#embededComputationBtnID').attr('data-list',JSON.stringify(values))
                }

                $("#embededComputationModal").modal('hide')
                $("#formModal").modal('show')
              }
              function extractEmbededComputationCreateView(){

                var buttonValues = $('#embededComputationBtnID').attr('data-list')
                if (buttonValues == '' || buttonValues == '{}' ){
                  return null
                }else {
                  var parsedValues = JSON.parse(buttonValues)
                  return parsedValues
                }
              }
              function extractGridLayoutConfig(){
                var buttonValues = $('#grid_layout_btn').attr('data-list')
                if (buttonValues == '' || buttonValues == '{}' ){
                  return null
                }else {
                  var parsedValues = JSON.parse(buttonValues)
                  return parsedValues
                }
              }
              $("#togglepagination").on("change", function() {
                $(".paginationrow").toggle();
                $("#pageSelection").toggle()

                if($("#togglepagination").is(":checked")){
                  $(".fieldRestrict_min_page").css('display','block');
                  $(".fieldRestrict_min").css('display','none');
                }else{
                  $(".fieldRestrict_min_page").css('display','none');
                  $(".fieldRestrict_min").css('display','block');
                }

              });
              $("#togglepagination_min_fields").on("change", function() {

                if($("#togglepagination_min_fields").is(":checked")){
                  $(".paginationrow_min_fields").css('display','block');
                  $("#pageSelection_min_fields").css('display','block')
                }else{
                  $(".paginationrow_min_fields").css('display','none');
                  $("#pageSelection_min_fields").css('display','none')
                }

              });
              $("#toggleeditlabel").on("change", function() {
                $(".labelrow").toggle();
                $("#labelSelection").toggle()
              });
              $("#togglerecurlabel").on("change", function() {
                $("#recurr_update_fields").val("").trigger("change")
              });
              $("#togglerest_min_label").on("change", function() {
                $("#restrict_min_fields").val("").trigger("change")
                $('#restrict_min_no_req').val('').trigger("change")
              });

              $("#togglepagination_colorder").on("change", function() {
                $(".paginationrow_colorder").toggle();
                $("#pageSelection_colorder").toggle()

              });

              $("#toggle_big_data").on("change", function() {
                if($("#toggle_big_data").prop("checked")){
                  $(".big_data_div").slideDown();
                }
                else{
                  $(".big_data_div").slideUp();
                }

              });

              function addPageRow(verboseNamecara) {
                if (verboseNamecara == undefined || Object.keys(verboseNamecara).length == 0) {
                    $.ajax({
                    url: window.location.pathname,

                    data: {
                      'operation': 'formTableFields',
                      'tablesForm': JSON.stringify($('#selectFormTable').val()),
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (datav) {
                      verboseNamecara = {}
                      for (j in datav.finalFieldList) {
                        verboseNamecara[datav.finalFieldList[j]['fieldName']] = datav.finalFieldList[j]['verbose']
                      }

                      $("#addPageRowID").attr('nrow', Number($("#addPageRowID").attr('nrow')) + 1)
                      $(".paginationrow").append(`
                        <div class="newrowpage mb-2 mx-1 px-3">
                          <div class="row">
                          <div class="col-5" id=''>
                            <div class="col-12 list-group">
                              <input value="${$("#addPageRowID").attr('nrow')}" class="form-control pageSlideClass" style="text-align: center;" disabled />
                            </div>

                          </div>
                          <div class="col-7 subElementCards">
                            <div class="row">
                              <div class="col-12 list-group">
                                <select class="form-control select23 pageFieldClass" multiple>
                                  <option value="" disabled></option>
                                </select>
                              </div>
                            </div>
                            </div>
                          </div>
                        </div>`);
                        for (let [key,value] of Object.entries(verboseNamecara)) {
                          $(".pageFieldClass").last().append(`<option value="${key}">${value}</option>`)
                        }
                        $(".select23").select2()

                    },
                    error: function () {
                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
                  })
                }else{

                  $("#addPageRowID").attr('nrow', Number($("#addPageRowID").attr('nrow')) + 1)
                  $(".paginationrow").append(`
                    <div class="newrowpage mb-2 mx-1 px-3">
                      <div class="row">
                      <div class="col-5" id=''>
                        <div class="col-12 list-group">
                          <input value="${$("#addPageRowID").attr('nrow')}" class="form-control pageSlideClass" style="text-align: center;" disabled />
                        </div>

                      </div>
                      <div class="col-7 subElementCards">
                        <div class="row">
                          <div class="col-12 list-group">
                            <select class="form-control select23 pageFieldClass" multiple>
                              <option value="" disabled></option>
                            </select>
                          </div>
                        </div>
                        </div>
                      </div>
                    </div>`);
                    for (let [key,value] of Object.entries(verboseNamecara)) {
                      $(".pageFieldClass").last().append(`<option value="${key}">${value}</option>`)
                    }
                    $(".select23").select2()

                }
              }
              function addPageRow1(verboseNameEdit) {
                if (verboseNameEdit == undefined || Object.keys(verboseNameEdit).length == 0) {
                  $.ajax({
                    url: window.location.pathname,

                    data: {
                      'operation': 'formTableFields',
                      'tablesForm': JSON.stringify($('#selectFormTable').val()),
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (datav) {
                      verboseNameEdit = {}
                      for (j in datav.finalFieldList) {
                        verboseNameEdit[datav.finalFieldList[j]['fieldName']] = datav.finalFieldList[j]['verbose']
                      }

                      $("#addPageRowID_1").attr('nrow', Number($("#addPageRowID_1").attr('nrow')) + 1)
                      $(".labelrow").append(`
                        <div class="newrowpage mb-2 mx-1 px-3">
                          <div class="row">
                          <div class="col-5" id=''>
                            <div class="col-12 list-group">
                              <select class="form-control select23 pageFieldClass1 label_name_op">
                                  <option value="" disabled></option>
                                </select>
                            </div>

                          </div>
                          <div class="col-7 subElementCards">
                            <div class="row">
                              <div class="col-12 list-group">
                                <input type="text" name="labelName_Field" class="pageFieldClass1 textinput textInput form-control">
                              </div>
                            </div>
                            </div>
                          </div>
                        </div>`);
                        for (let [key,value] of Object.entries(verboseNameEdit)) {
                          $(".label_name_op").last().append(`<option value="${key}">${value}</option>`)
                        }
                        $(".select23").select2()

                    },
                    error: function () {
                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
                  })
                }else{

                  $("#addPageRowID_1").attr('nrow', Number($("#addPageRowID_1").attr('nrow')) + 1)
                  $(".labelrow").append(`
                    <div class="newrowpage mb-2 mx-1 px-3">
                      <div class="row">
                      <div class="col-5" id=''>
                        <div class="col-12 list-group">
                          <select class="form-control select23 pageFieldClass1 label_name_op">
                              <option value="" disabled></option>
                            </select>
                        </div>

                      </div>
                      <div class="col-7 subElementCards">
                        <div class="row">
                          <div class="col-12 list-group">
                            <input type="text" name="labelName_Field" class="pageFieldClass1 textinput textInput form-control">
                          </div>
                        </div>
                        </div>
                      </div>
                    </div>`);
                    for (let [key,value] of Object.entries(verboseNameEdit)) {
                      $(".label_name_op").last().append(`<option value="${key}">${value}</option>`)
                    }
                    $(".select23").select2()
                  }
              }
              function addPageRow_min_fields(verboseName) {
                if (verboseName == undefined) {
                  verboseName = window.verboseName
                }
                $("#addPageRowID_min_fields").attr('nrow', Number($("#addPageRowID_min_fields").attr('nrow')) + 1)
                $(".paginationrow_min_fields").append(`
                  <div class="newrowpage mb-2 mx-1 px-3">
                    <div class="row">
                    <div class="col-2" id=''>
                      <div class="col-12 list-group">
                        <input value="${$("#addPageRowID_min_fields").attr('nrow')}" class="form-control pageSlideClass" style="text-align: center;" disabled />
                      </div>

                    </div>
                    <div class="col-3" id=''>
                      <div class="col-12 list-group">
                        <input type="number" name="min_re_car" class="textinput textInput form-control min_re_car">
                      </div>

                    </div>
                    <div class="col-7 subElementCards">
                      <div class="row">
                        <div class="col-12 list-group">
                          <select class="form-control select23 pageFieldClass_min_fields" multiple>
                            <option value="" disabled></option>
                          </select>
                        </div>
                      </div>
                      </div>
                    </div>
                  </div>`);
                  for (inx in verboseName) {
                    $(".pageFieldClass_min_fields").last().append(`<option value="${verboseName[inx]}">${verboseName[inx]}</option>`)
                  }
                  $(".select23").select2()
              }

              function addPageRow_colorder(selected_fields) {
                for(let [key,value] of Object.entries(selected_fields)){
                  $(".paginationrow_colorder").append(`
                  <li class="btn btn-sm btn-light col" name="${key}" style="height:auto;margin: 5px auto;">
                    <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${value}
                  </li>`);
                }

                $('#column-reorder').find('.sortable-order').sortable()

              }

              function delPageRow_colorder() {
                if ($("#addPageRowID_colorder").attr('nrow') != "0") {
                  $("#addPageRowID_colorder").attr('nrow', Number($("#addPageRowID_colorder").attr('nrow')) - 1)
                  $(".pageSlideClass_colorder").last().parent().parent().parent().parent().remove()
                }
              }

              function delPageRow() {
                if ($("#addPageRowID").attr('nrow') != "0") {
                  $("#addPageRowID").attr('nrow', Number($("#addPageRowID").attr('nrow')) - 1)
                  $(".pageSlideClass").last().parent().parent().parent().parent().remove()
                }
              }

              function delPageRow1() {
                if ($("#addPageRowID_1").attr('nrow') != "0") {
                  $("#addPageRowID_1").attr('nrow', Number($("#addPageRowID_1").attr('nrow')) - 1)
                  $(".pageFieldClass1").last().parent().parent().parent().parent().parent().remove()
                }
              }

              function delPageRow_min_fields() {
                if ($("#addPageRowID_min_fields").attr('nrow') != "0") {
                  $("#addPageRowID_min_fields").attr('nrow', Number($("#addPageRowID_min_fields").attr('nrow')) - 1)
                  $(".pageSlideClass").last().parent().parent().parent().parent().remove()
                }
              }
            </script>
            <div class='card' id='flowhiddenCard' hidden='true'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Flow column selection
              </div>
              <div class='card-body'>
                <form id="flowhiddenPerSelection" method="post">
                  {% csrf_token %}
                  <div class="row">

                    <div class="form-group col-6" style="display: block;">
                      <label class="acies_label ">Select Column:&nbsp;</label>
                      <select id="flowhiddenSelectedColumn" class="select2 form-control" name="action" >

                        </select>

                      </div>
                    </div>
                    <div class="row">
                      <div class="form-group col-8">
                        <label class="acies_label ">Master Table:&nbsp;</label>
                          <select id="selectMultipleFormTableflow" class="select2 form-control" name="tableform2">
                            {% for i in tableList %}
                            <option value="{{i}}">{{i}}</option>
                            {% endfor %}
                          </select>
                      </div>
                      <div class="form-group col-4">
                        <label class="acies_label ">Column:&nbsp;</label>
                        <select id="selectTableColumnsflow" class="select2 form-control" name="templateformsflow">

                        </select>
                      </div>
                    </div>

                  </form>
                  </div>
                </div>


            <div class='constraintAggCard card'  hidden='true'>
              <div class='card-header' style='font-size: medium; color:var(--primary-color); font-weight: bold;'>
                DropDown Field Selection
              </div>

              <div class='card-body'>
              <div class="row">


                <div class="form-group col-8">
                  <label class="constraint_table">Table:
                  </label>
                    <select  class="selectFormTable_constraint select2 form-control" name="tableform1" multiple>
                      {% for i in tableList%}
                      <option value="{{i}}">{{i}}</option>
                      {% endfor %}
                    </select>
                </div>


                <div class="form-group col-8">
                  <label class="constraint_selectableField"> Drop Fields
                  </label>
                    <select  class="selectFields_constraint select2 form-control" name="tableform1" multiple>
                      <option value="use_case"></option>
                      <option value="rule_set"> </option>
                      <option value="constraint_name"> </option>
                      <option value="unique_constraint_column"></option>
                      <option value="condition_datatype"></option>
                      <option value="condition"></option>
                      <option value="threshold"></option>
                      <option value="applicability_status"></option>
                    </select>
                </div>
              </div>



              <div class="row">
                <div class="col-5">
                  <h7 style= "font-weight:bold">Constraint Name:&nbsp;</h7> <br> <br>
                  <div class="constraintAggSelection list-group"  style ="max-height:200px;overflow-y:auto">
                    <input  class="constraint_name form-control p-2" style="padding-left:4px;"  placeholder="Enter Constraint Name" required>
                  </div>
                </div>

                <div class="col-5">
                  <h7 style= "font-weight:bold">Constraint Type:&nbsp;</h7> <br> <br>
                  <div class=" constraintAggSelection list-group"  style ="max-height:200px;overflow-y:auto">
                    <select  class="constraint_type select2 form-control" name="templateform" required>
                      <option value=""  selected style="color:lightgrey;" disabled>Select Constraint Type</option>
                      <option value="Array">Array</option>
                      <option value="Individual">Individual</option>
                      <option value="Grouped">Grouped</option>
                    </select>
                  </div>
                </div>

                <div class="col-2">
                  <i class="add_constraint fa fa-plus-square fa-2x" aria-hidden="true"  style="color:var(--primary-color);"></i>
                </div>

              </div>
              <div class="add_tables"></div>
            </div>
            </div>
            <div class='assetAggCard card'  hidden='true'>
              <div class='card-header' style='font-size: medium; color:var(--primary-color); font-weight: bold;'>
                DropDown Field Selection
              </div>

              <div class='card-body'>
              <div class="row">
                <div class="form-group col-8">
                  <label class="asset_table">Table:
                  </label>
                    <select  class="selectFormTable_asset select2 form-control" name="tableform1" multiple>
                      {% for i in tableList%}
                      <option value="{{i}}">{{i}}</option>
                      {% endfor %}
                    </select>
                </div>
              </div>

              <div class="row">

                <div class="col-10">
                  <h7 style= "font-weight:bold">Condition Type:&nbsp;</h7> <br> <br>
                  <div class=" assetAggSelection list-group"  style ="max-height:200px;overflow-y:auto">
                    <select  class="asset_type select2 form-control" name="templateform" required multiple>
                      <option value="AND">AND</option>
                      <option value="Single">Single</option>
                      <option value="OR">OR</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            </div>
            <div class='card' id='comparableAggCard' hidden='true'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Condition selection
              </div>
              <div class='card-body'>
                <form id="conditionAggSelection" method="post">
                  {% csrf_token %}
                  <div class="row">
                      <div class="col-5" id='comparableFields'>
                      <h7 style="font-weight:bold">All fields</h7> <br> <br>
                      <div class="list-group" id="ComparableNumList" style="max-height:200px;overflow-y:auto">
                      </div>

                    </div>
                    <!-- Sub sub-elements config -->
                    <div class="col-7 subElementCards">
                      <h7 style="font-weight:bold">Selected fields</h7> <br> <br>
                      <div class="list-group" id="selectedComparableNumList" style="max-height:200px;overflow-y:auto">

                      </div>
                    </div>
                </div>
                </form>
              </div>
            </div>

            <div class='card' id='comparableCondCard' hidden='true'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Condition selection
              </div>
              <div class='card-body'>
                <form id="conditionPerSelection" method="post">
                  {% csrf_token %}
                    <div class="row">
                      <div class="form-group col-6" id='periodSelection'>



                      </div>
                      <div class="form-group col-6">
                        <label class="acies_label ">Column:&nbsp;</label>
                        <select id="selectCharColumn" class="select2 form-control" name="charColumn" multiple>
                          <!-- Character Columns -->
                        </select>
                      </div>
                    </div>
                </form>
              </div>
            </div>
            <div class='card'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Form action</div>
              <div class='card-body'>
                <form id="formActionSelection" method="post">
                  {% csrf_token %}
                  <div class="row">
                    <div class="form-group col-8">
                      <label class="acies_label ">Action:&nbsp;</label>
                      <select id="selectAction" class="select2 form-control" name="action" multiple>
                          {% for i in createViewAction%}
                          <option value="{{i}}">{{i}}</option>
                          {%endfor%}
                        </select>
                  </div>
                  <div class="form-group col-2">
                    <span data-toggle="tooltip" title="Styling buttons"><i class="fas fa-pen" id="editButtonId" data-list="" onclick="editButton(this)" style="font-size: 17px;cursor: pointer;float: right;"></i></span>
                  </div>
                  <div class="form-group col-2">
                    <span data-toggle="tooltip" title="Add custom buttons"><i class="fas fa-plus" id="addCustomButtonId" onclick="addCustomButton.call(this)" style="font-size: 17px;cursor: pointer;float: right;">
                    </i></span>
                  </div>
                </div>

              <div class="row">
                <div class="form-group col-12">
                  <div class="custom-control custom-checkbox" style="align-self: center;">
                    <input id="master_preview_mode" type="checkbox" class="checkboxinput custom-control-input" onchange="previewMaster()">
                    <label for="master_preview_mode" class="custom-control-label" >
                      Form preview and confirmation&nbsp;&nbsp;&nbsp;
                    </label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="form-group col-12">
                  <div class="custom-control custom-checkbox" style="align-self: center;">
                    <input id="auto_compute_checkbox" type="checkbox" class="checkboxinput custom-control-input">
                    <label for="auto_compute_checkbox" class="custom-control-label" >
                      Auto compute computed fields
                    </label>
                  </div>
                </div>
              </div>
              <div class="row" id="save_preview_mode_div" style="display:none;">
                <div class="form-group col-6">
                  <div class="custom-control custom-radio" style="align-self: center;" >
                    <input type="radio" name="save_preview_mode" class="custom-control-input" id="save_preview_mode" >
                    <label for="save_preview_mode" class="custom-control-label black" >
                          Tabular Representation&nbsp;&nbsp;&nbsp;
                    </label>
                  </div>
                </div>
                <div class="form-group col-6">
                  <div class="custom-control custom-radio" style="align-self: center;" >
                    <input type="radio" name="save_preview_mode" class="custom-control-input" id="save_pdf_mode" >
                    <label for="save_pdf_mode" class="custom-control-label black" >
                          Form Representation&nbsp;&nbsp;&nbsp;
                      </label>
                    </div>
              </div>
              </div>



              <div class="row">
                <div class="form-group col-12">
                  <div class="custom-control custom-checkbox" style="align-self: center;" >
                    <input id="show_labels" type="checkbox" class="checkboxinput custom-control-input" onclick="showLabelFunction()" checked>
                    <label for="show_labels" class="custom-control-label" >
                      Show Labels&nbsp;&nbsp;&nbsp;
                    </label>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="form-group col-12">
                  <div class="custom-control custom-checkbox" style="align-self: center;" >
                    <input id="check_validForm" type="checkbox" class="checkboxinput custom-control-input">
                    <label for="check_validForm" class="custom-control-label" >
                      Activate on screen validations&nbsp;&nbsp;&nbsp;
                    </label>
                  </div>
                </div>
              </div>

              <br>
              <div class="row" id='viewHistory_columnSelection' style='display:none'>
                <div class="form-group col-11">
                  <label class="acies_label ">Select columns to view history:&nbsp;</label>
                  <select id="viewHistory_columnAction" class="select2 form-control" name="action" multiple>
                  </select>
                </div>
              </div>
              <br>

              <div class="row" id='viewDraft_columnSelection' style='display:none'>
                <div class="form-group col-11">
                  <label class="acies_label ">Select columns for draft versions:&nbsp;</label>
                  <select id="viewDraft_columnAction" class="select2 form-control" name="action" multiple>
                  </select>
                </div>
              </div>
              <br>

              <div class="row" id='viewHistory_columnSelection_forDisplay' style='display:none'>
                <div class="form-group col-11">
                  <label class="acies_label ">Select columns to display in view history:&nbsp;</label>
                  <select id="viewHistory_displayColumns" class="select2 form-control" name="action" multiple>
                  </select>
                </div>
              </div>

              <br>

              <div class="row" id='viewRejectedRecords_columnSelection_forDisplay' style='display:none'>
                <div class="form-group col-11">
                  <label class="acies_label ">Select columns to display in view rejected records:&nbsp;</label>
                  <select id="viewRejectedRecords_displayColumns" class="select2 form-control" name="action" multiple>
                  </select>
                </div>
              </div>

              <br>

              <div class="row">
                <div class="form-group col-12">
                  <div class="custom-control custom-checkbox" style="align-self: center;">
                    <input id="viewRTFCB" type="checkbox" class="checkboxinput custom-control-input">
                    <label for="viewRTFCB" class="custom-control-label" >
                      Show RTF field content in a popup&nbsp;&nbsp;&nbsp;
                    </label>
                  </div>
                </div>
              </div>
              <button class="btn btn-primary" type="button" id="createViewColumnAlignmentButton" data-toggle="modal" data-target="#createViewColumnAlignmentModal">Configure Column Alignment</button>
              <br>

              <button class="btn btn-primary popoverval" id="check2"  type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                Icon Selector
              </button>
              <div class="collapse" id="collapseExample">
                <div class="card card-body listoficon">
                  </div>
                </div>
                </form>
              </div>
            </div>
            <div class='card customProcessMessages'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Custom Messages
                <input type="checkbox" id="toggleCustomMessages" class="float-right mt-2 checkboxinput custom-checkbox">
              </div>
              <script>
                $("#toggleCustomMessages").on("change", function() {
                $("#customMessagesDiv").toggle()

              });
              </script>
              <div class='card-body' id="customMessagesDiv" style="display:none;">
                <div class="nav flex-column nav-tabs customMeassagesNav" id="" role="tablist">
                  <a class="nav-item nav-link nav-accordion" id="saved-tab" data-target="saved-content"  aria-controls="saved" aria-selected="true">Set Message on successfully saving data<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                  <div class="nav-item nav-link"  id="saved-content" aria-controls="saved-content" aria-selected="false" style="display: none">
                    <div class="row">
                      <div class="col-md-12 mb-2">
                        <select id='success_columns' class="select2" name="success_columns" onchange="$('#saved_message').val($('#saved_message').val() + `\{${$(this).val()}\}`)">
                        </select>
                      </div>
                      <div class="col-md-4">
                        Message
                      </div>
                      <div class="col-md-8">
                        <input id="saved_message" name="saved_message" type="text" value="Data saved successfully" class="form-control textInput c_msg_input">
                      </div>
                      <div class="col-md-4">
                        <button type="button" class= "btn btn-primary" for="saved_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                      </div>
                      <div class="col-md-8">
                        <i class="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                      </div>
                    </div>
                  </div>
                  <div class="dropdown-divider"></div>
                  <a class="nav-item nav-link nav-accordion" id="reset_draft-tab" data-target="reset_draft-content"  aria-controls="reset_draft" aria-selected="true">Set Message on Reset draft status<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                  <div class="nav-item nav-link"  id="reset_draft-content" aria-controls="reset_draft-content" aria-selected="false" style="display: none">
                    <div class="row">
                      <div class="col-md-4">
                        Message
                      </div>
                      <div class="col-md-8">
                        <input id="reset_draft_message" name="reset_draft_message" type="text" value="Click 'Yes' to confirm or click 'No' if you do not wish to reset it." class="form-control textInput c_msg_input">
                      </div>
                      <div class="col-md-4">
                        <button type="button" class= "btn btn-primary" for="reset_draft_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                      </div>
                      <div class="col-md-8">
                        <i class="fas fa-question msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                      </div>
                    </div>
                  </div>
                  <div class="dropdown-divider"></div>
                  <a class="nav-item nav-link nav-accordion" id="custom_val_config-tab" data-target="custom_val_config-content"  aria-controls="custom_val_config" aria-selected="true">Set message on succesfully saving Custom Validation Configs<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                  <div class="nav-item nav-link"  id="custom_val_config-content" aria-controls="custom_val_config-content" aria-selected="false" style="display: none">
                    <div class="row">
                      <div class="col-md-4">
                        Message
                      </div>
                      <div class="col-md-8">
                        <input id="custom_val_config_message" name="custom_val_config_message" type="text" value=" Custom validation configurations saved successfully!" class="form-control textInput c_msg_input">
                      </div>
                      <div class="col-md-4">
                        <button type="button" class= "btn btn-primary" for="custom_val_config_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                      </div>
                      <div class="col-md-8">
                        <i class="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                      </div>
                    </div>
                  </div>
                  <div class="dropdown-divider"></div>
                  <a class="nav-item nav-link nav-accordion" id="custom_val_applied-tab" data-target="custom_val_applied-content"  aria-controls="custom_val_applied" aria-selected="true">Set message on succesfully applying Custom validations<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                  <div class="nav-item nav-link"  id="custom_val_applied-content" aria-controls="custom_val_applied-content" aria-selected="false" style="display: none">
                    <div class="row">
                      <div class="col-md-4">
                        Message
                      </div>
                      <div class="col-md-8">
                        <input id="custom_val_applied_message" name="custom_val_applied_message" type="text" value="Custom validation applied successfully." class="form-control textInput c_msg_input">
                      </div>
                      <div class="col-md-4">
                        <button type="button" class= "btn btn-primary" for="custom_val_applied_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                      </div>
                      <div class="col-md-8">
                        <i class="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                      </div>
                    </div>
                  </div>
                  <div class="dropdown-divider"></div>
                  <a class="nav-item nav-link nav-accordion" id="custom_val_removed-tab" data-target="custom_val_removed-content"  aria-controls="custom_val_removed" aria-selected="true">Set message on succesfully removing Custom validations<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                  <div class="nav-item nav-link"  id="custom_val_removed-content" aria-controls="custom_val_removed-content" aria-selected="false" style="display: none">
                    <div class="row">
                      <div class="col-md-4">
                        Message
                      </div>
                      <div class="col-md-8">
                        <input id="custom_val_removed_message" name="custom_val_removed_message" type="text" value="Custom validation removed successfully." class="form-control textInput c_msg_input">
                      </div>
                      <div class="col-md-4">
                        <button type="button" class= "btn btn-primary" for="custom_val_removed_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                      </div>
                      <div class="col-md-8">
                        <i class="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                      </div>
                    </div>
                  </div>
                  <div class="dropdown-divider"></div>
                  <a class="nav-item nav-link nav-accordion" id="custom_val_load-tab" data-target="custom_val_load-content"  aria-controls="custom_val_load" aria-selected="true"> Load Custom Validation Configs<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                  <div class="nav-item nav-link"  id="custom_val_load-content" aria-controls="custom_val_load-content" aria-selected="false" style="display: none">
                    <div class="row">
                      <div class="col-md-4">
                        Message
                      </div>
                      <div class="col-md-8">
                        <input id="custom_val_load_message" name="custom_val_load_message" type="text" value=" Do you wish to load this configuration?\n\n Click 'Yes' to confirm or click 'No' if you do not wish to load it." class="form-control textInput c_msg_input">
                      </div>
                      <div class="col-md-4">
                        <button type="button" class= "btn btn-primary" for="custom_val_load_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                      </div>
                      <div class="col-md-8">
                        <i class="fas fa-question msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                      </div>
                    </div>
                  </div>
                  <div class="dropdown-divider"></div>
                  <a class="nav-item nav-link nav-accordion" id="custom_val_delete-tab" data-target="custom_val_delete-content"  aria-controls="custom_val_delete" aria-selected="true"> Delete Custom Validation Configs <span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                  <div class="nav-item nav-link"  id="custom_val_delete-content" aria-controls="custom_val_delete-content" aria-selected="false" style="display: none">
                    <div class="row">
                      <div class="col-md-4">
                        Message
                      </div>
                      <div class="col-md-8">
                        <input id="custom_val_delete_message" name="custom_val_delete_message" type="text" value="Do you wish to delete thihs configuration ?" class="form-control textInput c_msg_input">
                      </div>
                      <div class="col-md-4">
                        <button type="button" class= "btn btn-primary" for="custom_val_delete_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                      </div>
                      <div class="col-md-8">
                        <i class="fas fa-question msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                      </div>
                    </div>
                  </div>
                  <div class="dropdown-divider"></div>
                  <a class="nav-item nav-link nav-accordion" id="unique_col-tab" data-target="unique_col-content"  aria-controls="unique_col" aria-selected="true">Data Validation Failure Message<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                  <div class="nav-item nav-link"  id="unique_col-content" aria-controls="unique_col-content" aria-selected="false" style="display: none">
                    <div class="row">
                      <div class="col-md-12 mb-2">
                        <div class="placeholder_buttons">
                          <button  class="btn btn-primary" onclick="$('#unique_col_message').val($('#unique_col_message').val() + '\{Validation Message\}')">Validation Message</button>
                        </div>
                      </div>
                      <div class="col-md-4">
                        Message
                      </div>
                      <div class="col-md-8">
                        <input id="unique_col_message" name="unique_col_message" type="text" value="{Validation Message}" class="form-control textInput c_msg_input">
                      </div>
                      <div class="col-md-4">
                        <button type="button" class= "btn btn-primary" for="unique_col_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                      </div>
                      <div class="col-md-8">
                        <i class="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                      </div>
                    </div>
                  </div>
                  <div class="dropdown-divider"></div>
                  <a class="nav-item nav-link nav-accordion" id="sent_approval-tab" data-target="sent_approval-content"  aria-controls="sent_approval" aria-selected="true">Data sent for approval<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                  <div class="nav-item nav-link"  id="sent_approval-content" aria-controls="sent_approval-content" aria-selected="false" style="display: none">
                    <div class="row">
                      <div class="col-md-12 mb-2">
                        <select id='approval_columns' class="select2" name="approval_columns" onchange="$('#sent_approval_message').val($('#sent_approval_message').val() + `\{${$(this).val()}\}`)">
                        </select>
                      </div>
                      <div class="col-md-12 mb-2">
                        <div class="placeholder_buttons">
                          <button  class="btn btn-primary" onclick="$('#sent_approval_message').val($('#sent_approval_message').val() + '\{Table Name\}')">Table Name</button>
                        </div>
                      </div>
                      <div class="col-md-4">
                        Message
                      </div>
                      <div class="col-md-8">
                        <input id="sent_approval_message" name="sent_approval_message" type="text" value="One row of {Table Name} has been sent for approval." class="form-control textInput c_msg_input">
                      </div>
                      <div class="col-md-4">
                        <button type="button" class= "btn btn-primary" for="sent_approval_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                      </div>
                      <div class="col-md-8">
                        <i class="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                      </div>
                    </div>
                  </div>
                  <div class="dropdown-divider"></div>

                  <a class="nav-item nav-link nav-accordion" id="approval_smtp-tab" data-target="approval_smtp-content"  aria-controls="approval_smtp" aria-selected="true">Approval  SMTP config error<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                  <div class="nav-item nav-link"  id="approval_smtp-content" aria-controls="approval_smtp-content" aria-selected="false" style="display: none">
                    <div class="row">
                      <div class="col-md-4">
                        Message
                      </div>
                      <div class="col-md-8">
                        <input id="approval_smtp_message" name="approval_smtp_message" type="text" value="Error while sending approval email notification. Kindly check the SMTP configuration in management console or contact your administrator." class="form-control textInput c_msg_input">
                      </div>
                      <div class="col-md-4">
                        <button type="button" class= "btn btn-primary" for="approval_smtp_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                      </div>
                      <div class="col-md-8">
                        <i class="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="saveCreateViewConfigg">Save changes</button>
          </div>
        </div>
      </div>
      <div class="col-8">
        <div class="modal-body" style="overflow-y: scroll ;max-height: 75vh;">
          <div class='card' style="margin-left:-15px">
            <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">
              <span>Preview</span>
              <div class="head float-right" style="display: flex; align-items:center; justify-content: space-between; width: 410px">
                  <button id="formStylingConfigButton" style="float: right;margin-right: 5px;" class="btn btn-primary" data-toggle="modal" data-target="#createViewUISettingsModal">Form Styling Settings</button>
                  <button onclick="configureCases.call(this)" id="configureCasesButton" style="float: right;margin-right: 5px;" class="btn btn-primary">Configure Scenarios</button>
                  <div style="display: none;">
                    <div class='custom-control custom-radio'>
                      <input type="radio" id="single" name="js" value="single" checked="checked" style="margin-bottom:6px" class="custom-control-input">
                      <label for="single" class="custom-control-label black" style="font-size: small;white-space: nowrap;">Single field</label>
                    </div>
                    <div class='custom-control custom-radio'>
                      <input type="radio" id="multiple" name="js" value="multiple" style="margin-bottom:6px" class="custom-control-input">
                      <label for="multiple" class="custom-control-label black" style="font-size: small;white-space: nowrap;">Multiple field</label>
                    </div>
                  </div>
                </div>
              </div>
              <div class='card-body' id="createViewFormPreviewContainerCard">
                <div class="form-row"><div class="container"></div>
              </div>
              <div class="form-row formBtn"> <input type="hidden" name="tablename"> <input type="hidden" name="elementid" ><div class="form-buttons" style="display:inline-block;"><input type="submit" name="submit" value="Save" class="btn btn-primary buttonstyling button_standard_save formBtnSave"></div><div class="form-buttons" style="display:inline-block;"><input type="button" name="back" value="Back" class="btn backbtn ml-2 " id="button-id-back"></div> </div>
              </div>
          </div>
      <div class="card singleJsCard" id="JSConfig" style="display:none; margin-left: -15px;">
        <div class="card-header">
          <h5 class="card-title" id="chart1ModalLabel" style="color: var(--primary-color);">Configure field attributes</h5>
          <div class="float-right" style="margin-right: 6px;">
            <i class="fas fa-plus populateoption" name="false" onclick="multipleJsCard.call(this)" style="margin-right: 4px; color:var(--primary-color);"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>
          </div>
        </div>

        <div class="card-body modal-body">
          <p style="display: none;">Select the column name to configure</p>
            <select id='selectField' class="no class" name="SelectedFields" style="display: none;">
              <option value="" disabled selected>Select Field</option>
            </select>
            <p></p>
        </div>
        <div class="card-footer">
          <button type="button" id='' class="btn btn-primary float-right" onclick="backtoformmodal(0)" style="margin-left: 5px;">Cancel</button>
          <button type="button" id='savecreateview' class="btn btn-primary float-right" onclick="backtoformmodal(1)">Save field</button>
        </div>
      </div>
      <div class="card formLevelJs" style="display: none; margin-left: -15px">
        <div class="card-header">
          <h5 class="card-title" id="chart1ModalLabel" style="color: var(--primary-color);">Configure field attributes</h5>
        </div>
        <div class="card-body formLevelJs" style="display: none; margin-left: -15px">
          <div class="row ">
            <div class="col-12 warningFormLevelFieldSel" style="color:red; display:none">Select field from preview</div>
            <div class="col-12 warningFormLevelField" style="display:none; color:red">All fields are mandatory</div>
            <div class="col-12 warningFormLevelFieldInp" style="display:none; color:red">This name exist in configuration</div>
            <div class="col-12 warningFormLevelFieldCol" style="display:none; color:red">This column exist in configuration</div>
            <div class="col-6">
              <p style="font-weight: bold;">Name:</p>
              <input type="text" class="form-control formLevelFieldInput" required>
            </div>
            <div class="col-6">
              <p style="font-weight: bold;">Action:</p>
              <select class="select2 form-control formLevelFieldAction" required>
                <option value="">---</option>
                <option value="active on">Active on</option>
              </select>
            </div>
          </div>
          <div class="row" style="margin-top: 20px;">
            <div class="col-4">
              <p style="font-weight: bold;">Select column:</p>
              <select class="select2 form-control formLevelFieldCol" required>
              </select>
            </div>
            <div class="col-4">
              <p style="font-weight: bold;">Select condition:</p>
              <select class="select2 form-control formLevelFieldCond" required>
                <option value="Greater then">Greater than</option>
                <option value="Smaller then">Smaller than</option>
                <option value="Equal to">Equal to</option>
                <option value="Not Equal to">Not Equal to</option>
                <option value="In">In</option>
                <option value="Not In">Not In</option>
              </select>
            </div>
            <div class="col-4 formLevelFieldVal">
              <p style="font-weight: bold;">Select value:</p>
              <select class="select2 form-control" required>
              </select>
            </div>
            <div class="col-4 formLevelFieldValTag" style="display: none;">
              <p style="font-weight: bold;">Select value:</p>
              <select class="select2 form-control" required multiple>
              </select>
            </div>
          </div>
        </div>
        <div class="card-footer">
          <button type="button" class="float-right btn btn-primary" id="formLevelFieldSave" style="margin-left:5px;">Save</button>
          <button type="button" class="float-right btn btn-primary" id="formLevelFieldCancel">Cancel</button>
        </div>
      </div>
      <div class="card formLevelFieldReload" style="display: none; margin-left: -15px;">
        <div class="card-header">
          <div class="row">
            <div class="col-4">
              <p style="font-weight:bold; display: inline-block;">Select name:</p>
            </div>
            <div class="col-8">
              <select class="formLevelFieldReloadOpt select2 form-control">

              </select>
            </div>
          </div>
        </div>
        <div class="card-body">
          <div id="carouselExampleIndicators1" class="carousel slide" >
            <div class="carousel-inner">
            </div>
          </div>
        </div>
        <div class="card-footer">
          <button type="button" class="float-right btn btn-primary" id="formLevelFieldReloadSave" style="margin-left: 5px;">Save</button>
          <button type="button" class="float-right btn btn-primary" id="formLevelFieldReloadCancel">Cancel</button>
        </div>
      </div>
      </div>
    </div>
      </div>
  </div>
</div>
</div>
<!---->

<!-- Create view Form Style Settings-->
<div class="modal" id="createViewUISettingsModal" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" style="position:absolute; width:33vw">
  <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Field Styling and Placement</h5>
        <button type="button" class="close" data-toggle="modal" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body" style="height: 50rem">
        <div class="accordion" id="accordionExample">
          <div class="card">
            <div class="card-header" id="headingOne">
              <h2 class="mb-0">
                <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                  Grid Settings
                </button>
              </h2>
            </div>

            <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
              <div class="card-body">
                <div class="row">
                  <div class="form-group col-8">
                    <label for="selectCVFormRows">Number of Rows:</label>
                    <select id="selectCVFormRows" name="selectCVFormRows" class="select2 form-control">
                      <option value="auto" selected>Auto Assign</option>
                      <option value="manual">Set Manually</option>
                    </select>
                  </div>
                  <div class="form-group col-4" id="selectCVFormRowsManualEntryContainer" style="display:none;">
                    <label for="selectCVFormRowsManualEntry">&nbsp;</label>
                    <input type="number" class="form-control numberinput" name="selectCVFormRowsManualEntry" id="selectCVFormRowsManualEntry" min="1" max="50" value="1">
                  </div>
                  <div class="form-group col-8">
                    <label for="selectCVFormColumns">Number of Columns in a Row:</label>
                    <input type="number" class="form-control numberinput" name="selectCVFormColumns" id="selectCVFormColumns" min="1" max="12" value="4">
                  </div>
                </div>
                <div class="row">
                  <button id="applyGridSettingsChanges" class="btn btn-primary float-right">Apply</button>
                </div>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-header" id="headingTwo">
              <h2 class="mb-0">
                <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                  Field Sizing and Placements
                </button>
              </h2>
            </div>
            <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
              <div class="card-body">
                <div class="row">
                  <div class="form-group col-12">
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" name="reOrderFields" class="checkboxinput custom-control-input" id="reOrderFields">
                      <label for="reOrderFields" class="custom-control-label">
                        Re-Order Fields
                      </label>
                    </div>
                  </div>
                  <div class="form-group col-12">
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" name="reSizeFields" class="checkboxinput custom-control-input" id="reSizeFields">
                      <label for="reSizeFields" class="custom-control-label">
                        Re-Size Fields
                      </label>
                    </div>
                  </div>
                  <div class="form-group col-12" id="resizingFieldControlLevelContainer" style="display: none;">
                    <label for="resizingFieldControlLevel">Resizing Control Level:</label>
                    <select id="resizingFieldControlLevel" name="resizingFieldControlLevel" class="select2 form-control">
                      <option value="" selected disabled>---</option>
                      <option value="grid">Pre-Formatted Grid</option>
                      <option value="open">Free-flowing</option>
                    </select>
                    <small id="resizing_info_small">Click on the field and select the size from the options below to resize it.</small>
                  </div>
                  <div id="selectFieldGridSizeContainer" class="col-12" style="display: none;">
                    <div class="row">

                      <div class="form-group col-6">
                        <label for="selectFieldGridSizeLG">Large Screen:</label>
                        <select id="selectFieldGridSizeLG" name="selectFieldGridSizeLG" class="select2 form-control">
                          <option value="" selected disabled>---</option>
                          <option value="12">100%</option>
                          <option value="11">91.67%</option>
                          <option value="10">83.33%</option>
                          <option value="9">75%</option>
                          <option value="8">66.66%</option>
                          <option value="7">58.33%</option>
                          <option value="6">50%</option>
                          <option value="5">100%</option>
                          <option value="4">33.33%</option>
                          <option value="3">25%</option>
                          <option value="2">16.66%</option>
                          <option value="1">8.33%</option>
                        </select>
                      </div>
                      <div class="form-group col-6">
                        <label for="selectFieldGridSizeMD">Medium Screen:</label>
                        <select id="selectFieldGridSizeMD" name="selectFieldGridSizeMD" class="select2 form-control">
                          <option value="" selected disabled>---</option>
                          <option value="12">100%</option>
                          <option value="11">91.67%</option>
                          <option value="10">83.33%</option>
                          <option value="9">75%</option>
                          <option value="8">66.66%</option>
                          <option value="7">58.33%</option>
                          <option value="6">50%</option>
                          <option value="5">100%</option>
                          <option value="4">33.33%</option>
                          <option value="3">25%</option>
                          <option value="2">16.66%</option>
                          <option value="1">8.33%</option>
                        </select>
                      </div>
                      <div class="form-group col-6">
                        <label for="selectFieldGridSizeSM">Small Screen:</label>
                        <select id="selectFieldGridSizeSM" name="selectFieldGridSizeSM" class="select2 form-control">
                          <option value="12" selected>100%</option>
                          <option value="11">91.67%</option>
                          <option value="10">83.33%</option>
                          <option value="9">75%</option>
                          <option value="8">66.66%</option>
                          <option value="7">58.33%</option>
                          <option value="6">50%</option>
                          <option value="5">100%</option>
                          <option value="4">33.33%</option>
                          <option value="3">25%</option>
                          <option value="2">16.66%</option>
                          <option value="1">8.33%</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row" style="bottom:0; position:absolute;">
          <span><strong>Note:</strong> Please make the table and field selections prior to this.</span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-dismiss="modal">Close</button>
        <button type="button" id="resetFormStyleConfigButton" class="btn btn-primary">Reset</button>
        <button type="button" id="saveFormStyleConfigButton" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>
</div>

<!--Analysis Button Modal-->
<div class="modal" id="analysisButtonModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Configure Button Styling</h5>
      </div>
      <div class="modal-body">
        <div class="card-header">
          <div class="float-right" style="margin-right: 6px;">
            <button onclick="analysispopulateContent(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>


      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="analysiscloseEditButton(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="analysisSaveEditButton(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>
<!---->
<!-- where condition modal -->
<div class="modal" id="where_condition_Modal">
  <div class="modal-dialog modal-lg modal-dialog-centered" style="max-width: 1090px;">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h6 class="modal-title">Set Condition</h6>
        <button type="button" class="close" onclick="showEq()">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
          <div class="btn-group">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                {{_("Add Filter")}}
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" id="condition_dropdown" style="max-height:20rem;">
              </ul>
          </div>
          <br>
          <div style="float: left;"><button type="button" id="filter_condition_import" class="btn btn-primary btn-xs mx-2 rounded px-2" style="display:none; float: right;">Filter Data</button></div><br>
          <br>
          <div id="select_filter_columns_div" style="display: none;">
              <div class="col-4">
                  <label for="select_parent_column">Select Parent Column</label>
                  <select name="select_parent_column" id="select_parent_column" class="select2"></select>
              </div>
              <div class="col-4">
                  <label for="select_current_column">Select Filter Column</label>
                  <select name="select_current_column" id="select_current_column" class="select2"></select>
              </div>
          </div>
          <div class="row" id="items">
              <table class="table" id="filter-table">
              </table>
          </div>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" id="btn_search" class="btn btn-primary btn-xs mx-2 rounded px-2" onclick="showEq()">Save</button>
        <button type="button" class="btn btn-primary btn-xs mx-2 rounded px-2" onclick="showEq()">Close</button>
      </div>

    </div>
  </div>
</div>

      <!-- Export Data Modal -->
      <div class="modal" id="exportModal">
        <div class="modal-dialog modal-xl modal-dialog-centered">
          <div class="modal-content">

             <!-- Modal Header -->
            <div class="modal-header">
              <h6 class="modal-title">Configure Export:</h6>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <div class = "row" id = "exportConfiguration">

                </div>
                <div id = "runprocess_export" style="display:none" hidden>

                </div>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
              <button type="button" id="saveExportConfig" class="btn btn-primary btn-xs mx-2 rounded px-2" data-dismiss="modal">Save</button>
              <button type="button" class="btn btn-primary btn-xs mx-2 rounded px-2" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

<div class="modal fade" id="tableRelationModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="tableRelationModalLabel" aria-hidden="true">

  <div class="modal-dialog modal-xl" role="document" style="max-width:1600px; width:100%">
    <div class="modal-content">
       <div class="modal-header" style='background:#565a5e; color:white;'>
        <h5 class="modal-title" id="tableRelationModalLabel" style="margin-left: 40%;">Define table relationship</h5>
        <button type="button" class="close tableRelationModalCancel" onclick="tableRelationModalCancel.call(this)" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="overflow-y: scroll ;max-height: 32rem;">
        <div class="row">
          <div class="card col-4">
            <div class='card-header' style='text-align: center;'><h5 style="margin-top: 7px;">
              Configure detail</h5>
            </div>
            <div class='card-body' style="max-height:15rem; height:15rem; overflow-y: auto;">
              <div class="row">
                <div class="col-12 tableRelationTable1">
                  <p style="font-weight: bold;">Select table:</p>
                  <select class="select2 form-control tableRelationTable1Select" data-col="tableRelationColumn1Select" required onchange="tableRelationTable.call(this)">
                  </select>
                </div>
                <!--<div class="col-6 tableRelationTable2">
                  <p style="font-weight: bold;">Select table:</p>
                  <select class="select2 form-control tableRelationTable2Select" data-col="tableRelationColumn2Select" required onchange="tableRelationTable.call(this)">
                  </select>
                </div>-->
              </div>
              <div class="row" style="margin-top:15px">
                <div class="col-12 tableRelationColumn1">
                  <p style="font-weight: bold;">Select column:</p>
                  <select class="select2 form-control tableRelationColumn1Select" required>
                  </select>
                </div>
                <!--<div class="col-6 tableRelationColumn2">
                  <p style="font-weight: bold;">Select column:</p>
                  <select class="select2 form-control tableRelationColumn2Select" required>
                  </select>
                </div>-->
              </div>
              <div class="row" style="margin-top:15px">
                <div class="col-12">
                  <button type="button" class="float-right btn btn-primary tableRelationDiscoveryBtn" style="margin-left: 5px;" onclick="displayDataDiscovery.call(this)">Data discovery</button>
                </div>
              </div>
            </div>
          </div>
          <div class="card col-8">
            <div class='card-header' style='text-align: center;'><h5 style="margin-top: 7px;">
              Discovery table</h5>
            </div>
            <div class='card-body' style="max-height:15rem; height:15rem; overflow-y: auto;">
              <div id="tableRelationDiscoveryTableCont" style="height:20em;overflow-x:scroll;word-wrap:break-word;">
                <table id="tableRelationDiscoveryTable" class="row-border display" style="width: 100%;">
                  <thead>
                    <th>Table name</th>
                    <th>Column name</th>
                    <th>Actions</th>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="card col-12">
            <div class='card-header' style='text-align: center;'><h5 style="margin-top: 7px;">
              Create relationship</h5>
            </div>
            <div class='card-body' style="max-height:20rem;overflow-y: auto;">
              <div class="row">
                <div class="col-6 tableRelationTable1">
                  <p style="font-weight: bold;">Parent table:</p>
                  <select class="select2 form-control tableRelationParentTable1Select" data-col="tableRelationParentColumn1Select" required>
                  </select>
                </div>
                <div class="col-6 tableRelationTable2">
                  <p style="font-weight: bold;">Child table:</p>
                  <input type="text" class="form-control tableRelationChildTable2Select" data-col="tableRelationParentColumn2Select" required disabled>
                </div>
              </div>
              <div class="row" style="margin-top:15px">
                <div class="col-6 tableRelationColumn1">
                  <p style="font-weight: bold;">Parent column:</p>
                  <input type="text" class="form-control tableRelationParentColumn1Select" data-col="tableRelationParentColumn1Select" required disabled>
                </div>
                <div class="col-6 tableRelationColumn2">
                  <p style="font-weight: bold;">Child column:</p>
                  <input type="text" class="form-control tableRelationChildColumn2Select" required disabled>
                </div>
              </div>
              <div class="row" style="margin-top:15px">
                <div class="col-4 tableRelationRelationship">
                  <p style="font-weight: bold;">Relation:</p>
                  <input type="text" value="ForeignKey" class="form-control tableRelationRelationshipSelect" required disabled>
                </div>
                <div class="col-4 tableRelationNullChoice">
                  <p style="font-weight: bold;">Can take null values:</p>
                  <select class="select2 form-control tableRelationNullChoiceSelect" required>
                    <option value="no">no</option>
                    <option value="yes">yes</option>
                  </select>
                </div>
                <div class="col-4 tableRelationComputedValue">
                  <p style="font-weight: bold;">Computed fields:</p>
                  <input type="checkbox" class="form-control tableRelationComputedValueSelect" required>
                </div>
              </div>
              <div class="row" style="margin-top:15px">
                <div class="col-12">
                  <button type="button" class="float-right btn btn-primary tableRelationDefineBtn" onclick="tableRelationDefineBtn.call(this)" data-dismiss="modal" style="margin-left: 5px;">Define relation</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="dataTableModal" tabindex="0" data-focus="false" role="dialog" aria-labelledby="dataTableModalLabel" aria-hidden="true">

  <div class="modal-fullscreen" role="document" style="padding: 1rem;">
    <div class="modal-content">
       <div class="modal-header" style='background:#565a5e; color:white;'>
        <h5 class="modal-title" id="dataTableModalLabel" style="margin-left: 40%;">Configure list view elements</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="listViewModalBodyContainer" class="modal-body" style="overflow-y: scroll ;max-height: 80%;">
        <div class="row custom_category">
        <div class="col-5">
          <div class='card'>
            <div class='card-header' style='padding:0rem;'><h5 style="margin-left: -1.5rem;margin-bottom: 0rem;">
              <button class="btn" style='pointer-events: none; color:black;height: 2rem;border-color:none;color:var(--primary-color);padding-top:0.2rem;width: 10rem;font-weight: bold;'>&nbsp;Category&nbsp;
              </button></h5></div>

            <div class='card-body' style="max-height:18rem;overflow-y: auto;">
              <form id="categoryForm" method="post">
                {% csrf_token %}
                <div class="row">
                  <div class="form-group col-6">
                    <input type="text" placeholder="Tab Header" class="tabHeader" id="tabHeaderListView" data-spanID="listViewErrorSpan">
                  </div>
                </div>
                  <div class="row" style="color:red;display: none;">
                    <div class="form-group col-12">
                      <span id="#listViewErrorSpan">
                      Tab header must contain unique values. A tab with the same name already exists in the sub-process.
                    </span>
                    </div>
                  </div>
                  <div class="row tabHeaderEmptyValidation" style="color:red;display:none;">
                    <div class="form-group col-12">
                      <span>
                        Tab header is a mandatory field.
                      </span>
                    </div>
                  </div>
                  <br>
                <div class="row">
                <div class="form-group col-6">

                    <select id="selectTablePC" class="select2 form-control" name="table">
                      <option value="" disabled selected>Table name</option>
                      {% for i in tableList%}
                      <option value="{{i}}">{{i}}</option>
                      {%endfor%}
                    </select>
                </div>
                <div class="form-group col-6">

                  <select id="selectTemplate" class="select2 form-control" name="template">
                    <option value="" disabled selected>Templates</option>
                    {% for i in templateList%}
                    <option value="{{i}}">{{i}}</option>
                    {%endfor%}
                  </select>
              </div>

              <div class="col-12 form-group">
                <label for="allowUsersToSetApproversDispFieldsListView">User Additional Information:</label>
                <select name="allowUsersToSetApproversDispFieldsListView" id="allowUsersToSetApproversDispFieldsListView" class="select2 form-control" multiple>
                  {% for k,v in user_column_list.items %}
                    <option value='{{k}}'>{{v}}</option>
                  {% endfor %}
                  </select>
              </div>
              <div class="col-12 form-group">
                <label for="allowUsersToSetApproversDispFormatListView">Information Display Format:</label>
                <select name="allowUsersToSetApproversDispFormatListView" id="allowUsersToSetApproversDispFormatListView" class="select2 form-control">
                  <option value="" selected disabled>Select One</option>
                  <option value="comma_sep">Comma Separated</option>
                  <option value="space_sep">Space Separated</option>
                  </select>
              </div>


              <div class="form-group col-12" id="basicfilter_add_def">
                <label class="acies_label col-md-12">Set Default Filter:</label>
                <input type='button' id="basicfilter_add" data-toggle="modal" data-target="#basicfilter" value='Add Default Filter' style='border-radius: 5px; color: white; width:100%; background-color: rgb(86, 90, 94); border-color: rgb(86, 90, 94);'>

                <script>
                                    $("#basicfilter_add").on('click',function(){
                   let basicfilter_config =  $("#saveBasicfilter").attr('data-basicfilter-config')
                   if(basicfilter_config && basicfilter_config!=""){
                    basicfilter_config = JSON.parse(basicfilter_config)
                    $(document).find('#basicfilter_items').find('.filter-table').empty()
                    if(basicfilter_config.length >0){
                      let current_table_name = $('#selectTablePC').val()
                      for(let i=0;i<basicfilter_config.length;i++){
                        let column_name = basicfilter_config[i]['column_name']
                        let condition_name= basicfilter_config[i]['condition']
                                                let input_value= basicfilter_config[i]['input_value']
                                                if(basicfilter_config[i].hasOwnProperty('current_value')){
                             curr_value = basicfilter_config[i]['current_value']
                          }else{
                             curr_value = ""
                          }
                        if(basicfilter_config[i].hasOwnProperty('constraint_name')){
                            constraint_name = basicfilter_config[i]['constraint_name']
                        }else{
                            constraint_name = ""
                        }
                        if(basicfilter_config[i].hasOwnProperty('rule_set')){
                            rule_set = basicfilter_config[i]['rule_set']
                        }else{
                            rule_set = ""
                        }
                        if(basicfilter_config[i]['table_name'] ==current_table_name ){
                          $(document).find("#basicfilter_condition_dropdown").find('.dropdown-item').find(`a[name='${column_name}']`).click()
                          let current_div = $(document).find('#basicfilter_items').find('.filter-table').find(`tr[data-position=${i}]`).find('td').eq(2).find('div')
                          $(document).find('#basicfilter_items').find('.filter-table').find(`tr[data-position=${i}]`).find('td').eq(1).find('div').find('select').val(condition_name).trigger('change')
                          $(document).find('#basicfilter_items').find('.filter-table').find(`tr[data-position=${i}]`).find('td').eq(3).find('.basicfilter_curr_val').val(curr_value).trigger('change')
                          $(document).find('#basicfilter_items').find('.filter-table').find(`tr[data-position=${i}]`).find('td').eq(4).find('.basicfilter_constraint').val(constraint_name).trigger('change')
                          $(document).find('#basicfilter_items').find('.filter-table').find(`tr[data-position=${i}]`).find('td').eq(5).find('.basicfilter_ruleset').val(rule_set).trigger('change')

                          if(typeof(input_value) === "string" && input_value !== null){
                            setTimeout(function(){
                              if(current_div.find(`select option[value='${input_value}']`).length <= 0){
                                    current_div.find('select').append(`<option value='${input_value}'>${input_value}</option>`)
                                  }
                                current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                            },1000)
                          }else if(typeof(input_value) === 'object' && input_value !== null){
                            if(current_div.find(`.basic_table_valuer`).attr('data-type')=="ForeignKey"){
                              setTimeout(function(){
                                current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                                },1000)
                            }else{
                                                                                      let output_html ="";
                              $.each(input_value, function(key,value){
                                if(current_div.find(`.basic_table_valuer option[value='${value}']`).length <= 0 && current_div.find(`.basic_table_valuer`).attr('data-type')!="ForeignKey"){
                                                                    output_html+=`<option value='${value}' selected>${value}</option>`
                                }
                              })

                              default_in_cond_reload(i);
                              current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                              current_div.find('.basic_table_valuer').append(output_html)
                            }

                          }
                      }
                    }
                    }
                   }
                  })


                      function basicfilter_conditional_table() {
                        $('#saveBasicfilter').removeAttr('data-shapeid');
                        $('#basicfilter_items').find('.filter-table').empty()

                        if($("#selectTablePC").val()){
                          $.ajax({
                            url: window.location.pathname,
                            data: {
                              'model_name': $("#selectTablePC").val(),
                              'operation': 'conditional_table',
                            },
                            type: "POST",
                            dataType: "json",
                            success: function (data) {
                              $("#basicfilter_condition_dropdown").empty()
                              var label_column = data.label_columns
                            for (const [key, value] of Object.entries(label_column)) {
                              $("#basicfilter_condition_dropdown").append(
                                  '<li class="dropdown-item"><a href="javascript:void(0)" name=' +
                                  key + ' class="basic_filter_btn">' + value + '</a></li>');
                              }
                              var form_fields = data.form_fields
                              $('.basic_filter_btn').off('click').on('click', function () {
                                var name = $(this).attr('name');
                                var text = $(this).text();
                                var STRING = data.form_fields[name]
                                var rowCount=   $('.filter-table tr').length;
                                $('#basicfilter_items').find('.filter-table').append(STRING);

                                $('#basicfilter_items').find('.filter-table').find('tr').eq(-1).attr('name',name)
                                $('#basicfilter_items').find('.filter-table').find('tr').eq(-1).attr('data-position',rowCount)
                                let field_datatype= $('#basicfilter_items').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find('input').attr('type')

                                let change_select  =$('#basicfilter_items').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html()
                                let change_select_fk  =$('#basicfilter_items').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                                if(change_select){
                                  change_select = change_select.replace('<input','<select')
                                change_select = change_select + "</select>"
                                $('#basicfilter_items').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html(change_select)
                                $('#basicfilter_items').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("select[type='text']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                                }else if(change_select_fk){
                                change_select_fk = change_select_fk.replace('<input','<select')
                                change_select_fk = change_select_fk + "</select>"
                                $('#basicfilter_items').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html(change_select_fk)
                                $('#basicfilter_items').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("select[type='number'][data-type='ForeignKey']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                                }else if (['date','datetime-local','time'].includes(field_datatype)){
                                  $('#basicfilter_items').find('.filter-table').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='IN']`).remove()
                                  $('#basicfilter_items').find('.filter-table').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='NOT IN']`).remove()
                                }
                                $('#basicfilter_items').find('.filter-table').find('tr').eq(-1).find('td').eq(3).remove()
                                $('#basicfilter_items').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("input").addClass('basic_table_valuer')
                                $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('.select2bs4').removeAttr('onchange')

                                $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).addClass(`d-flex`)
                                $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).css({'text-align':'left'})
                                $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('td').css('width','25%')
                                $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(1).find('div').css('max-width','10em')

                                $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('td:nth-child(1),td:nth-child(2)').find("select").each(function () {
                                  $(this).select2({width:'100%'});
                                })

                                $('#basicfilter_items').find('.filter-table').find('tr').eq(-1).append(
                                        `
                                        <td class="dt-center">
                                        <div>
                                          <div style="max-width: 15em;">
                                        <select class="form-control select2bs4 basicfilter_curr_val" name=${name} data-dropdown_purpose="select_constant_val">
                                            <option value="" disabled selected>Select Variable</option>
                                            <option value="curr_user">Current User</option>
                                            <option value="curr_date">Current Date</option>
                                            <option value="curr_last_login_date">Current user's last login date</option>
                                            <option value="curr_firstname">Current user's first name</option>
                                            <option value="curr_lastname">Current user's last name</option>
                                            <option value="curr_email">Current user's email</option>
                                            <option value="curr_joined_date">Current user's joined date</option>
                                            <option value="curr_name">Current user's name</option>
                                            <option value="curr_last_pass_date">Current user's last password update date</option>
                                            <option value="curr_tenant">Current user's tenant</option>
                                        </select>
                                      </div>
                                        </div>
                                        </td>

                                        <td class="dt-center">
                                          <div class="" style="max-width:25em;">
                                          <input type="text" name=${name} class="form-control basicfilter_constraint" placeholder="Constraint name"/>
                                          </div>
                                        </td>

                                        <td class="dt-center">
                                          <div class="" style="max-width:25em;">
                                          <input type="text" name=${name} class="form-control basicfilter_ruleset" placeholder="Rule set"/>
                                          </div>
                                        </td>
                                        `
                                    )

                                  $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('.select2bs4').select2({width:'100%',tags:true})
                            $.ajax({
                                  url: window.location.pathname,
                                  data: {
                                    'model_name': $("#selectTablePC").val(),
                                    'field_name':$(this).attr('name'),
                                    'operation': 'conditional_table_value',
                                  },
                                  type: "POST",
                                  dataType: "json",
                                  success: function (data) {
                                    if(data.hasOwnProperty('field_data')){
                                      data_list =JSON.parse(data.field_data)
                                      $('#basicfilter_items').find('.filter-table').find(`tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='text']").empty()
                                      let row_data_dict =[]
                                      for(let i=0;i<data_list.length;i++){
                                        if (data.original_fk.length > 0){
                                          if(data.original_fk[i]=="NULL"){
                                            $('#basicfilter_items').find('.filter-table').find(`tr[data-position=${rowCount}]`).find('td').eq(2).find('select').append(`<option value='${data.original_fk[i]}'>${data_list[i]}</option>`)
                                          }else{
                                            $('#basicfilter_items').find('.filter-table').find(`tr[data-position=${rowCount}]`).find('td').eq(2).find('select').append(`<option value='${parseInt(data.original_fk[i])}'>${data_list[i]}</option>`)
                                            $('#basicfilter_items').find('.filter-table').find(`tr[data-position=${rowCount}]`).find('td').eq(1).find('select').find("option").each(function(){
                                                if($(this).attr("value") == "Greater than" || $(this).attr("value") == "Smaller than"){
                                                    $(this).remove();
                                                }
                                              })
                                          }
                                            } else {
                                              $('#basicfilter_items').find('.filter-table').find(`tr[data-position=${rowCount}]`).find('td').eq(2).find('select').append(`<option value='${data_list[i]}'>${data_list[i]}</option>`)
                                            }
                                      }
                                    }
                                  },
                                  error: function () {
                                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                  }
                                });
                                $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('.select2bs4').on('change',function(){
                                                                    let in_operand = ['IN','NOT IN']
                                  let valuer = $(this).val()
                                                                    if(in_operand.includes(valuer) ==true){
                                                                        let change_select  =$('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html()
                                    let change_select_fk  =$('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                                    if(change_select){
                                      change_select = change_select.replace('<input','<select')
                                      change_select = change_select + "</select>"
                                      $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html(change_select)
                                    }
                                    let field_type = $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                                    if(['date','datetime-local','time'].includes(field_type) ==false){
                                      $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: true,tags:true,allowClear: false})
                                      $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find(".select2-selection--multiple").css({"max-height": "8rem", "overflow": "auto" })
                                    }

                                  }else{
                                                                        let change_select  =$('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html()
                                    if(change_select ){
                                      change_select = change_select.replace('<select','<input')
                                      change_select = change_select.replace('</select>','')
                                      if($('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").attr(`data-type`) != 'ForeignKey'){
                                        $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html(change_select)
                                        $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").removeClass('select2-hidden-accessible')
                                        $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find('span').remove('span')
                                      }else{
                                        $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                                      }
                                    }

                                    let field_type = $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                                    if(['date','datetime-local','time'].includes(field_type)==false){
                                      if($('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type') =="text"){
                                        $('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                                      }
                                    }

                                  }
                                })
                                $('.remove_filter').on('click', removefilter);
                                function removefilter() {
                                  $(this).closest("tr").remove();

                                  $('#basicfilter_items').find(`.filter-table`).each(function(){
                                    var rowCount=   $('.filter-table tr').length;
                                    for(let rc=0;rc<rowCount;rc++){
                                      $('#basicfilter_items').find(`.filter-table`).find('tr').eq(rc).attr('data-position',rc)
                                    }

                                  })
                                }
                              });
                            },
                            error: function () {
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                            }
                          });
                        }
                      }
                </script>
                <!-- Modal for Filter -->
                <div class="modal" id="basicfilter" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="basicfilter" aria-hidden="true" >
                  <div class="modal-dialog modal-lg modal-dialog-centered" style="justify-content: center;">
                    <div class="modal-content" style="width: 100%;" >

                      <div class="modal-header" style="width:100%;background:#565a5e;text-align: center;justify-content: center;">
                        <h6 class="modal-title" style="color:white;margin:auto;font-weight:bold;">Set Default Filter</h6>

                      </div>

                      <div class="modal-body" style="height:300px;overflow-x:hidden;overflow-y:auto">
                        <div style="margin-top:2em;">
                          <div class="btn-group">

                              <button type="button" class="btn btn-default dropdown-toggle basicfilter_dropdown_toggle mr-auto" data-toggle="dropdown">
                                {{_("Add Condition")}}
                                <span class="caret"></span>
                              </button>


                            <ul class="dropdown-menu" id="basicfilter_condition_dropdown" style="max-height:10rem; overflow-y:auto;">
                            </ul>
                          </div>
                          <div class="row" id="basicfilter_items">
                            <table class="table filter-table">
                            </table>
                          </div>
                        </div>
                      </div>

                      <div class="modal-footer">
                        <button type="button" id="saveBasicfilter" class="btn btn-primary rounded px-2"  style="color:white;" >Save</button>
                        <button type="button" class="btn btn-primary  rounded px-2 closeBasicFilter" onclick="$('#basicfilter').modal('hide')">Close</button>
                      </div>

                    </div>
                  </div>
                </div>

              </div>
              <div class="form-group col-6" id='uniqueColumnDisp' style="display: none;">
                <label class="acies_label col-md-12">Unique Column Indentifier:</label>
                <select id="uniqueColumn" class="select2 form-control" name="template" multiple>
                </select>
              </div>
              <div class="form-group col-6" id='trackingColumnDisp' style="display: none;">
                <label class="acies_label col-md-12">Tracking Column:</label>
                <select id="trackingColumn" class="select2 form-control" name="template" multiple>
                </select>
              </div>
              <div class="form-group col-12" id='reportingViewDisp' style="display: none;">
                <label class="acies_label col-md-12">Select Parameter Column:</label>
                <select id="reportingViewColumns" class="select2 form-control" name="template" multiple>
                  <option value="Default">Default</option>
                </select>
                <br>
                <div class="custom-control custom-checkbox">
                  <input type="checkbox" name="dont_show_detail_btn" class="checkboxinput custom-control-input" id="dont_show_detail_btn">
                  <label for="dont_show_detail_btn" class="custom-control-label">
                    Disable "View Details" button
                  </label>
                </div>
              </div>


              <div class="form-group col-12" id='reportingViewShowLatest' style="display: none;">
                <div style="margin-bottom:1rem;" class="custom_datefield_selector" style="display: none;">
                  <label class="acies_label col-md-12">Datefield for latest Entries:</label>
                  <select id="reportingViewColumns_datefield_latest_entries" class="select2 form-control" onchange="removingLatestDateUniqueId(this)" >
                    <option value=""></option>
                  </select>
                </div>
                <div style="margin-bottom:1rem;" class="unique_indentfier_selector" style="display: none;">
                  <label class="acies_label col-md-12">Unique indentfiers:</label>
                  <select id="reportingViewColumns_unique_indentfier_selector" class="select2 form-control" multiple>
                    <option value=""></option>
                  </select>
                </div>
                <div  class="custom-control custom-checkbox">
                  <input type="checkbox" name="ShowLatestDate" class="checkboxinput custom-control-input " id="show_report_latest_checker" onchange="show_report_latest_checker_change(this)">
                  <label for="show_report_latest_checker" class="custom-control-label">
                    Show latest entries only
                  </label>
                </div>
              </div>

                <div class="form-group col-12" id="selectMultiConfig_def">
                  <label class="acies_label col-md-12">Related Create View Template:</label>
                  <select id="selectMultiConfig" class="select2 form-control" name="template">
                  </select>
               </div>
               <div class="form-group col-12">
                  <div  class="custom-control custom-checkbox">
                    <input type="checkbox" name="editAutoPopulatePrecedenceCheck" class="checkboxinput custom-control-input " id="editAutoPopulatePrecedenceCheck">
                    <label for="editAutoPopulatePrecedenceCheck" class="custom-control-label">
                      Auto-populate constant to take precedence over existing values on edit?
                    </label>
                  </div>
                  <div  class="custom-control custom-checkbox">
                    <input type="checkbox" name="editAutoPopulatePrecedenceOnScenariosCheck" class="checkboxinput custom-control-input " id="editAutoPopulatePrecedenceOnScenariosCheck">
                    <label for="editAutoPopulatePrecedenceOnScenariosCheck" class="custom-control-label">
                      Auto-populate constant to take precedence over existing values on edit only on JS scenario change?
                    </label>
                  </div>
               </div>
               <div class="form-group col-12">
                 <label class="acies_label col-md-12">Escape Special Characters:</label>
                 <select id="selectCharactersToBeEscapedLV" class="select2 form-control" name="selectCharactersToBeEscapedLV" multiple>
                   <option value=">">></option>
                   <option value="<"><</option>
                   <option value="&">&</option>
                   <option value="=">=</option>
                   <option value="+">+</option>
                   <option value="-">-</option>
                   <option value="@">@</option>
                 </select>
              </div>
              <div class="form-group col-12" id="dropFields_def">
                <div>
                  <label class="acies_label col-md-12">Drop Fields:</label>
                  <select id="dropFields" class="select2 form-control dropclass" name="dropfields" multiple>

                  </select>
                </div>
                <div style="display:none;">
                  <input type='button' id="dropFields_add" data-toggle="modal" data-target="#dropFieldsAdd" data-data="{}" onclick="showDropFields.call(this)" value='Configure Drop Fields' style='border-radius: 5px; color: white; width:100%; background-color: rgb(86, 90, 94); border-color: rgb(86, 90, 94);'>
                </div>
                <script>
                  function showDropFields(){
                    tables_selected = $("#selectTablePC").val()
                    reload_data = $(this).attr("data-data")
                    reload_data = JSON.parse(reload_data)
                    if(tables_selected.constructor === Array ){
                      $('#dropFieldsAdd').find('.modal-body').empty()
                      for(let i in tables_selected){
                        $('#dropFieldsAdd').find('.modal-body').append(`<div class='form-group'>
                          <label class="acies_label col-md-12">Drop fields for ${tables_selected[i]}:</label>
                          <select id="dropFields_${i}" class="select2 form-control dropclass" name="${tables_selected[i]}" multiple>

                          </select>
                        </div>`)
                        $(`#dropFields_${i}`).select2()

                        $.ajax({
                                url: window.location.pathname,

                                data: {
                                  'operation': 'dropFieldList',
                                  'tableName':tables_selected[i],
                                  'index': i,
                                },
                                type: "POST",
                                dataType: "json",
                                success: function (data) {
                                    ind = data.index
                                    table_name = data.table_name
                                    $(`#dropFields_${ind}`).empty()

                                    for (var i = 0; i < data.fieldList.length; i++) {
                                          $(`#dropFields_${ind}`).append(new Option(data.fieldList[i], data.fieldNameList[i]));
                                        }

                                    reload_val = reload_data[table_name]
                                    $(`#dropFields_${ind}`).val(reload_val).trigger('change')
                                  },
                                error: function () {
                                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                }
                        })
                      }
                    }

                    $("#saveDropFieldsAdd").off('click').on('click', function(){
                        dropMul = {}
                        $('#dropFieldsAdd').find('.modal-body').find('select').each(function(){
                          dropMul[$(this).attr('name')] = $(this).val()
                        })
                        $("#dropFields_add").attr('data-data',JSON.stringify(dropMul))
                        $('#dropFieldsAdd').modal('hide')
                    })
                  }
                </script>
                <!-- Modal for Multi table drop col -->
                <div class="modal" id="dropFieldsAdd" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="dropFieldsAdd" aria-hidden="true" >
                  <div class="modal-dialog modal-lg modal-dialog-centered" style="justify-content: center;">
                    <div class="modal-content" style="width: 100%;" >

                      <div class="modal-header" style="width:100%;background:#565a5e;text-align: center;justify-content: center;">
                        <h6 class="modal-title" style="color:white;margin:auto;font-weight:bold;">Configure Drop Fields</h6>

                      </div>

                      <div class="modal-body" style="height:200px;overflow-x:hidden;overflow-y:auto">

                      </div>

                      <div class="modal-footer">
                        <button type="button" id="saveDropFieldsAdd" class="btn btn-primary rounded px-2" >Save</button>
                        <button type="button" class="btn btn-primary  rounded px-2 closeBasicFilter" onclick="$('#dropFieldsAdd').modal('hide')">Close</button>
                      </div>

                    </div>
                  </div>
                </div>

              </div>
              <div class="form-group col-12" id="restrictFields_def">
                <label class="acies_label col-md-12">Fields to be locked for edit:</label>
                <select id="restrictFields" class="select2 form-control dropclass" name="restrictfields" multiple>
                </select>
              </div>
              <div class="form-group col-12" id="groupFields_def">
                <label class="acies_label col-md-12">User groups for field edit restriction:</label>
                <select id="groupFields" class="select2 form-control" name="groupfields" multiple>
                </select>
                <small class="form-text">*Users belonging to these groups wont be able to edit locked fields.</small>
              </div>
              <div class="form-group col-12" id="mention_usergroups_def">
                <label class="acies_label col-md-12">User groups to be able to mention in comments:</label>
                <select id="mention_usergroups" class="select2 form-control" name="mention_usergroups" multiple>
                </select>
                <small class="form-text">*Users belonging to these groups can be mentioned in approval wall comments.</small>
              </div>
              <div class="form-group col-12" id="search_in_comments_div">
                <label class="acies_label col-md-12">Select search parameters while mentioning in comments:</label>
                <select id="search_in_comments" class="select2 form-control" name="search_in_comments" multiple>
                  <option value="username">Username</option>
                  <option value="first_name">First Name</option>
                  <option value="last_name">Last Name</option>
                  <option value="email">Email ID</option>
                </select>
              </div>
              <div class="form-group col-12" id="display_in_comments_div">
                <label class="acies_label col-md-12">Select parameters to display while mentioning in comments:</label>
                <select id="display_in_comments" class="select2 form-control" name="display_in_comments" multiple>
                  <option value="username">Username</option>
                  <option value="first_name">First Name</option>
                  <option value="last_name">Last Name</option>
                </select>
              </div>

              <div class="form-group col-12" id="resolve_all_comments_div">
                <div  class="custom-control custom-checkbox">
                  <input type="checkbox" name="resolve_all_comments" class="checkboxinput custom-control-input " id="resolve_all_comments">
                  <label for="resolve_all_comments" class="custom-control-label">
                    Display option to Resolve all Comments in the Approval Wall
                  </label>
                </div>
              </div>
              <div class="form-group col-12" id="reopen_all_comments_div">
                <div  class="custom-control custom-checkbox">
                  <input type="checkbox" name="reopen_all_comments" class="checkboxinput custom-control-input " id="reopen_all_comments">
                  <label for="reopen_all_comments" class="custom-control-label">
                    Display option to Re-open all Comments in the Approval Wall
                  </label>
                </div>
              </div>
              <div class="form-group col-12" id="resolve_individual_comments_div">
                <div  class="custom-control custom-checkbox">
                  <input type="checkbox" name="resolve_individual_comments" class="checkboxinput custom-control-input " id="resolve_individual_comments">
                  <label for="resolve_individual_comments" class="custom-control-label">
                    Display option to Resolve individual Comment Threads in the Approval Wall
                  </label>
                </div>
              </div>
              <div class="form-group col-12" id="reopen_individual_comments_div">
                <div  class="custom-control custom-checkbox">
                  <input type="checkbox" name="reopen_individual_comments" class="checkboxinput custom-control-input " id="reopen_individual_comments">
                  <label for="reopen_individual_comments" class="custom-control-label">
                    Display option to Re-open individual Comment Threads in the Approval Wall
                  </label>
                </div>
              </div>

              <div class="form-group col-12" id="editFields_def">
                <div>
                  <label class="acies_label col-md-12">Fields not to be displayed for edit:</label>
                  <select id="editFieldsNS" class="select2 form-control" name="editFieldsNS" multiple>
                  </select>
                </div>

                <div style="display:none;">
                  <input type='button' id="editFields_add" data-toggle="modal" data-target="#editFieldsAdd" data-data="{}" onclick="showDropFieldsEdit.call(this)" value='Fields not to be displayed for edit' style='border-radius: 5px; color: white; width:100%; background-color: rgb(86, 90, 94); border-color: rgb(86, 90, 94);'>
                </div>
                <script>
                  function showDropFieldsEdit(){
                    tables_selected = $("#selectTablePC").val()
                    reload_data = $(this).attr("data-data")
                    reload_data = JSON.parse(reload_data)
                    if(tables_selected.constructor === Array ){
                      $('#editFieldsAdd').find('.modal-body').empty()
                      for(let i in tables_selected){
                        $('#editFieldsAdd').find('.modal-body').append(`<div class='form-group'>
                          <label class="acies_label col-md-12">Fields for ${tables_selected[i]}:</label>
                          <select id="editFields_${i}" class="select2 form-control dropclass" name="${tables_selected[i]}" multiple>

                          </select>
                        </div>`)
                        $(`#editFields_${i}`).select2()

                        $.ajax({
                                url: window.location.pathname,

                                data: {
                                  'operation': 'dropFieldList',
                                  'tableName':tables_selected[i],
                                  'index': i,
                                },
                                type: "POST",
                                dataType: "json",
                                success: function (data) {
                                    ind = data.index
                                    table_name = data.table_name
                                    $(`#editFields_${ind}`).empty()

                                    for (var i = 0; i < data.fieldList.length; i++) {
                                          $(`#editFields_${ind}`).append(new Option(data.fieldList[i], data.fieldNameList[i]));
                                        }

                                    reload_val = reload_data[table_name]
                                    $(`#editFields_${ind}`).val(reload_val).trigger('change')
                                  },
                                error: function () {
                                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                }
                        })
                      }
                    }

                    $("#saveeditFieldsAdd").off('click').on('click', function(){
                        dropMul = {}
                        $('#editFieldsAdd').find('.modal-body').find('select').each(function(){
                          dropMul[$(this).attr('name')] = $(this).val()
                        })
                        $("#editFields_add").attr('data-data',JSON.stringify(dropMul))
                        $('#editFieldsAdd').modal('hide')
                    })
                  }
                </script>
                <!-- Modal for Multi table drop col -->
                <div class="modal" id="editFieldsAdd" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="editFieldsAdd" aria-hidden="true" >
                  <div class="modal-dialog modal-lg modal-dialog-centered" style="justify-content: center;">
                    <div class="modal-content" style="width: 100%;" >

                      <div class="modal-header" style="width:100%;background:#565a5e;text-align: center;justify-content: center;">
                        <h6 class="modal-title" style="color:white;margin:auto;font-weight:bold;">Configure Fields</h6>

                      </div>

                      <div class="modal-body" style="height:200px;overflow-x:hidden;overflow-y:auto">

                      </div>

                      <div class="modal-footer">
                        <button type="button" id="saveeditFieldsAdd" class="btn btn-primary rounded px-2" >Save</button>
                        <button type="button" class="btn btn-primary  rounded px-2 closeBasicFilter" onclick="$('#editFieldsAdd').modal('hide')">Close</button>
                      </div>

                    </div>
                  </div>
                </div>

              </div>
              <div class="form-group col-12" id="dropFields_LV_upload_div">
                <div>
                  <label class="acies_label col-md-12">Drop Fields while downloading format:</label>
                  <select id="dropFieldsLV_upload" class="select2 form-control dropclass" name="dropfields" multiple>

                  </select>
                  <small id="text_for_mandatory" class="form-text" style="display: none; color: red">Mandatory fields are dropped in the table selected. Consider not dropping the column/s or check that the column/s are auto-computed.</small>
                </div>
                <div style="display:none;">
                  <input type='button' id="dropFields_add_LV_upload" data-toggle="modal" data-target="#dropFieldsAddLVUpload" data-data="{}" onclick="showDropFieldsLVUpload.call(this)" value='Configure Drop Fields while downloading format' style='border-radius: 5px; color: white; width:100%; background-color: rgb(86, 90, 94); border-color: rgb(86, 90, 94);'>
                </div>
                <script>
                  function showDropFieldsLVUpload(){
                    var mandatory_fields = {}
                    tables_selected = $("#selectTablePC").val()
                    reload_data = $(this).attr("data-data")
                    reload_data = JSON.parse(reload_data)
                    if(tables_selected.constructor === Array ){
                      $('#dropFieldsAddLVUpload').find('.modal-body').empty()
                      for(let i in tables_selected){
                        $('#dropFieldsAddLVUpload').find('.modal-body').append(`<div class='form-group'>
                          <label class="acies_label col-md-12">Drop fields for ${tables_selected[i]}:</label>
                          <select id="dropFieldsLVUpload_${i}" class="select2 form-control dropclass" name="${tables_selected[i]}" multiple>

                          </select>
                          <small id="text_for_mandatory_${i}" class="form-text" style="display: none; color: red">Mandatory fields are dropped in the table selected. Consider not dropping the column/s or check that the column/s are auto-computed.</small>

                        </div>`)
                        $(`#dropFieldsLVUpload_${i}`).select2()

                        $.ajax({
                                url: window.location.pathname,

                                data: {
                                  'operation': 'dropFieldList',
                                  'tableName':tables_selected[i],
                                  'index': i,
                                },
                                type: "POST",
                                dataType: "json",
                                success: function (data) {
                                    table_name = data.table_name
                                    ind = data.index
                                    mandatory_fields[table_name] = data.mandatory_fields
                                    $(`#dropFieldsLVUpload_${ind}`).empty()

                                    for (var i = 0; i < data.fieldList.length; i++) {
                                          $(`#dropFieldsLVUpload_${ind}`).append(new Option(data.fieldList[i], data.fieldNameList[i]));
                                        }

                                    reload_val = reload_data[table_name]
                                    $(`#dropFieldsLVUpload_${ind}`).val(reload_val).trigger('change')
                                  },
                                error: function () {
                                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                }
                        })
                        function checkSelectedValues2() {
                          var cols = $(`#dropFieldsLVUpload_${i}`).val() || [];

                          var hasMatchingValue = cols.some(function (value) {
                            return mandatory_fields[tables_selected[i]].includes(value);
                          });

                          $(`#text_for_mandatory_${i}`).toggle(hasMatchingValue);
                        }

                        $(`#dropFieldsLVUpload_${i}`).on('change', function () {
                          checkSelectedValues2();
                        });


                      }
                    }

                    $("#saveDropFieldsAddLVUpload").off('click').on('click', function(){
                        dropMul = {}
                        $('#dropFieldsAddLVUpload').find('.modal-body').find('select').each(function(){
                          dropMul[$(this).attr('name')] = $(this).val()
                        })
                        $("#dropFields_add_LV_upload").attr('data-data',JSON.stringify(dropMul))
                        $('#dropFieldsAddLVUpload').modal('hide')
                    })
                  }
                </script>
                <!-- Modal for Multi table drop col -->
                <div class="modal" id="dropFieldsAddLVUpload" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="dropFieldsAddLVUpload" aria-hidden="true" >
                  <div class="modal-dialog modal-lg modal-dialog-centered" style="justify-content: center;">
                    <div class="modal-content" style="width: 100%;" >

                      <div class="modal-header" style="width:100%;background:#565a5e;text-align: center;justify-content: center;">
                        <h6 class="modal-title" style="color:white;margin:auto;font-weight:bold;">Configure Drop Fields while downloading format</h6>

                      </div>

                      <div class="modal-body" style="height:200px;overflow-x:hidden;overflow-y:auto">

                      </div>

                      <div class="modal-footer">
                        <button type="button" id="saveDropFieldsAddLVUpload" class="btn btn-primary rounded px-2" >Save</button>
                        <button type="button" class="btn btn-primary  rounded px-2 closeBasicFilter" onclick="$('#dropFieldsAddLVUpload').modal('hide')">Close</button>
                      </div>

                    </div>
                  </div>
                </div>
                <script>
                  var mandatory_field_list = []
                  var mandate = false
                  $("#selectTablePC").on('change', function(){
                    var table = $("#selectTablePC").val()
                    $.ajax({
                      url: window.location.pathname,

                      data: {
                        'operation': 'dropFieldList',
                        'tableName':table,
                      },
                      type: "POST",
                      dataType: "json",
                      success: function (data) {
                        mandatory_field_list = data.mandatory_fields
                      },
                      error: function () {
                        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                      }
                    })
                  })
                  function checkSelectedValues() {
                    var cols = $('#dropFieldsLV_upload').val() || [];

                    var hasMatchingValue = cols.some(function (value) {
                      return mandatory_field_list.includes(value);
                    });

                    $('#text_for_mandatory').toggle(hasMatchingValue);
                  }

                  $('#dropFieldsLV_upload').on('change', function () {
                    checkSelectedValues();
                  });

                </script>

              </div>
              <div class="form-group col-12" id="custom_alignment_transaction_data_div">
                <label class="acies_label col-md-12">Select alignment for transaction data in Approval Wall:</label>
                <select id="custom_alignment_transaction_data" class="select2 form-control" name="custom_alignment_transaction_data">
                  <option value="" selected disabled>Select One</option>
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
              <div class="form-group col-12" id="display_sections_approval_wall_div">
                <label class="acies_label col-md-12">Drop sections in Approval Wall:</label>
                <select id="display_sections_approval_wall" class="select2 form-control" name="display_sections_approval_wall" multiple>
                  <option value="approval_status">Approval Status</option>
                  <option value="approver_type">Approver Type</option>
                  <option value="type_of_approval">Type of Approval</option>
                  <option value="approval_code">Approval Code</option>
                </select>
              </div>
              <div class='fieldEditColAlignment card col-12'>
                <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">
                  <div class="d-flex justify-content-between align-items-center  ">
                    <p class="m-0">Edit Column Alignment</p>
                    <button type="button" class="btn btn-primary float-right" id="listViewAppTempVDAlignment" style="">View Details Column Alignment</button>
                    <div class="custom-control custom-checkbox" style="display: block;margin-left: 5%;">
                      <input type="checkbox" id="toggleeditcolAlign" name="toggleeditcolAlign" class="checkboxinput custom-control-input" value="newlabel">
                      <label for="toggleeditcolAlign" class="custom-control-label" style=""></label>
                    </div>
                  </div>
                </div>
                <form id="labelSelectionColAli" method="post">
                  {% csrf_token %}
                  <div class='mb-2 mt-4 mx-1 px-3'>
                    <div class="subElementCardsrow">
                      <div class="col-12 subElementCards">
                        <i class="fas fa-minus" onclick="delPageRowAlign()"
                          style="font-size: 17px;cursor: pointer;float: right;margin-left: 10px;">
                        </i>
                        <i nrow="0" id="addPageRowID_Align" class="fas fa-plus" onclick="addPageRowAlign(verboseNameAlign)"
                          style="font-size: 17px;cursor: pointer;float: right;">
                        </i>
                        </div>
                    </div>
                    <div class="row">
                      <div class="col-4" style="text-align:center;">
                        <h7 style="font-weight:bold">Column(s)</h7> <br> <br>
                      </div>
                      <div class="col-4 subElementCards" style="text-align:center;">
                        <h7 style="font-weight:bold">Header</h7>
                      </div>
                      <div class="col-4 subElementCards" style="text-align:center;">
                        <h7 style="font-weight:bold">Body</h7>
                        </div>
                      </div>
                    </div>
                  </form>
                <div class="labelrowAlign" style="overflow: auto;max-height: 13rem;"></div>
              </div>
              <div class='appFields_ref_def card col-12'>
                <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Columns to show as reference for json data:
                </div>
                <form id="apprefDropJsonRef" method="post">
                  {% csrf_token %}
                  <div class="card">
                    <div class="form-group col-12" style="padding-top: 1rem;">
                      <label for="appFields_ref_table" class="acies_label">Select json data table</label>
                      <select id="appFields_ref_table" class="select2 form-control" name="appFields_ref_table">
                        <option value="" selected disabled>select table</option>
                        {% for i in tableList%}
                          <option value="{{i}}">{{i}}</option>
                        {%endfor%}
                      </select>
                  </div>
                  <div class="form-group col-12">
                    <label for="appFields_ref_cols" class="acies_label">Select columns</label>
                    <select id="appFields_ref_cols" class="select2 form-control" name="appFields_ref_cols" multiple>
                        <option value="" disabled>Select Fields</option>
                    </select>
                  </div>
                </div>
                  </form>
              </div>
              <div class='dropcolsJSON card col-12'>
                <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Drop json data columns
                </div>
                <form id="apprefDropJson" method="post">
                  {% csrf_token %}
                  <div class="card">
                    <div class="form-group col-12" style="padding-top: 1rem;">
                      <label for="appJSONTable" class="acies_label">Select json data table</label>
                      <select id="appJSONTable" class="select2 form-control" name="appJSONTable">
                        <option value="" selected disabled>select table</option>
                        {% for i in tableList%}
                          <option value="{{i}}">{{i}}</option>
                        {%endfor%}
                      </select>
                  </div>
                  <div class="form-group col-12">
                    <label for="appJSONCols" class="acies_label">Select columns</label>
                    <select id="appJSONCols" class="select2 form-control" name="appJSONCols" multiple>
                        <option value="" disabled>Select Fields</option>
                    </select>
                  </div>
                </div>
                  </form>
              </div>
              <div class='reordercolsJSON card col-12'>
                <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Re-order json data columns
                </div>
                <form id="apprefReorderJson" method="post">
                  {% csrf_token %}
                  <div class="card">
                    <div class="form-group col-12" style="padding-top: 1rem;">
                      <label for="appJSONTableReorder" class="acies_label">Select json data table</label>
                      <select id="appJSONTableReorder" class="select2 form-control" name="appJSONTableReorder">
                        <option value="" selected disabled>select table</option>
                        {% for i in tableList%}
                          <option value="{{i}}">{{i}}</option>
                        {%endfor%}
                      </select>
                  </div>
                  <div class="form-group col-12">
                    <label for="appJSONColsReorder" class="acies_label">Re-order columns</label>
                    <ul class="sortable-order appJSONColsReorder col pt-2" id="appJSONColsReorder" style="list-style: none;border: 1px solid lightgrey;border-radius: 0.25rem;min-height: 2rem;max-height: 300px;overflow: auto;">
                    </ul>
                  </div>
                </div>
                  </form>
              </div>
              <div class='editcolsJSON card col-12'>
                <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Drop columns of json_data for editing
                </div>
                <form id="apprefEditJson" method="post">
                  {% csrf_token %}
                  <div class="card">
                    <div class="form-group col-12" style="padding-top: 1rem;">
                      <label for="appJSONEditTable" class="acies_label">Select json data table</label>
                      <select id="appJSONEditTable" class="select2 form-control" name="appJSONEditTable">
                        <option value="" selected>select table</option>
                        {% for i in tableList%}
                          <option value="{{i}}">{{i}}</option>
                        {%endfor%}
                      </select>
                  </div>
                  <div class="form-group col-12">
                    <label for="appJSONEditCols" class="acies_label">Select columns</label>
                    <select id="appJSONEditCols" class="select2 form-control" name="appJSONEditCols" multiple>
                        <option value="" disabled>Select Fields</option>
                    </select>
                  </div>
                </div>
                  </form>
              </div>
              <div class='reorderApprovalLevelConfig card col-12'>
                <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Re-order Approval Level Config columns
                </div>
                <form id="reorderApprovalLevelConfigForm" method="post">
                  {% csrf_token %}

                  <div class="form-group col-12">
                    <label for="reorderApprovalLevelConfigList" class="acies_label">Re-order columns</label>
                    <ul class="sortable-order reorderApprovalLevelConfigList col pt-2" id="reorderApprovalLevelConfigList" style="list-style: none;border: 1px solid lightgrey;border-radius: 0.25rem;min-height: 2rem;max-height: 300px;overflow: auto;">
                      <li class="btn btn-sm btn-light col" name="approval_type" style="height:auto;margin: 5px auto;">
                        <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>approval_type
                      </li>
                      <li class="btn btn-sm btn-light col" name="approver_type" style="height:auto;margin: 5px auto;">
                        <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>approver_type
                      </li>
                      <li class="btn btn-sm btn-light col" name="user_list/group_list" style="height:auto;margin: 5px auto;">
                        <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>user_list/group_list
                      </li>
                    </ul>
                  </div>
                </form>
              </div>

              <div class='reorderApprovalAuditLog card col-12'>
                <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Re-order Audit Log columns
                </div>
                <form id="reorderApprovalAuditLogForm" method="post">
                  {% csrf_token %}

                  <div class="form-group col-12">
                    <label for="reorderApprovalAuditLogList" class="acies_label">Re-order columns</label>
                    <ul class="sortable-order reorderApprovalAuditLogList col pt-2" id="reorderApprovalAuditLogList" style="list-style: none;border: 1px solid lightgrey;border-radius: 0.25rem;min-height: 2rem;max-height: 300px;overflow: auto;">
                      <li class="btn btn-sm btn-light col" name="Level" style="height:auto;margin: 5px auto;">
                        <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>Level
                      </li>
                      <li class="btn btn-sm btn-light col" name="Action" style="height:auto;margin: 5px auto;">
                        <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>Action
                      </li>
                      <li class="btn btn-sm btn-light col" name="User" style="height:auto;margin: 5px auto;">
                        <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>User
                      </li>
                      <li class="btn btn-sm btn-light col" name="Time" style="height:auto;margin: 5px auto;">
                        <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>Time
                      </li>
                      <li class="btn btn-sm btn-light col" name="Value" style="height:auto;margin: 5px auto;">
                        <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>Value
                      </li>
                    </ul>
                  </div>
                </form>
              </div>


              <div class='reorderTableCards card col-12'>
                <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Re-order Mutiple Table Names
                </div>
                <form id="reorderTableCardsForm" method="post">
                  {% csrf_token %}

                  <div class="form-group col-12">
                    <label for="reorderTableCardsList" class="acies_label">Re-order Table Cards</label>
                    <ul class="sortable-order reorderTableCardsList col pt-2" id="reorderTableCardsList" style="list-style: none;border: 1px solid lightgrey;border-radius: 0.25rem;min-height: 2rem;max-height: 300px;overflow: auto;">

                    </ul>
                  </div>
                  <script>
                    $("#reorderTableCardsList").sortable()
                      $("#selectTablePC").on("change", function(){
                        if($("#selectTemplate").val() == "Multiple table"){
                          $("#reorderTableCardsList").empty()
                          tableNames = $('#selectTablePC').val()

                          tableNames.forEach(function (tableName) {
                            var li = $("<li>").addClass("btn btn-sm btn-light col");
                            li.css({ "height": "auto", "margin": "5px auto" });
                            li.attr("name", tableName);

                            var span = $("<span>").addClass("ui-icon ui-icon-arrowthick-2-n-s float-left mt-1");
                            var text = document.createTextNode(tableName);

                            li.append(span);
                            li.append(text);

                            $("#reorderTableCardsList").append(li);
                          });
                      }
                      })
                  </script>
                </form>
              </div>


              <div class="card col-12 editTableCardNames">
                <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Edit Table Card Names
                  <input type="checkbox" id="toggleEditTableCardNames" class="float-right mt-2 checkboxinput custom-checkbox">
                </div>
                <script>
                  $("#toggleEditTableCardNames").on("change", function() {
                    if($(this).prop("checked")){
                      $("#editTableCardNamesDiv").show()
                    }else{
                      $("#editTableCardNamesDiv").hide()
                    }

                });
                </script>
                <div class="card-body" id="editTableCardNamesDiv" style="display:none;">
                    <div class="form-group" style="" id="showSelectedTables">
                      <div class="form-group col-12" id='formatTableDispNames'>
                        <label class="acies_label col-md-12">Select Table Names to be changed on display</label>
                        <select id="formatTableNames" class="select2 form-control" name="" multiple>
                        </select>
                      </div>
                    </div>

                    <div class="row" >
                      <table class="table table-bordered table-hover" style="overflow: auto;margin-left: 0.5rem;">
                        <thead class="thead-dark">
                          <tr>
                            <th scope="col" style="text-align: center;">Table name</th>
                            <th scope="col" style="text-align: center;">Enter Display name</th>
                          </tr>
                        </thead>
                        <tbody id="tableContainerEdit">

                        </tbody>
                      </table>
                    </div>



                    <script>
                      $("#selectTablePC").on("change", function(){
                        if($("#selectTemplate").val() == "Multiple table"){
                          tableNames = $('#selectTablePC').val()
                          $("#tableContainerEdit").empty();
                            $("#formatTableNames").empty()
                            for(let i=0;i<tableNames.length;i++){
                              $('#formatTableNames').append(new Option(tableNames[i], tableNames[i]));
                            }
                      }
                      })

                      $("#formatTableNames").on("change", function () {
                        var selectedOptions = $('#formatTableNames').val();

                        $("#tableContainerEdit").empty();
                        if (selectedOptions) {
                            for (let i = 0; i < selectedOptions.length; i++) {
                                var row = $("<tr>");
                                var cell1 = $("<td class='originalTableNames' style='text-align: center;'>").text(selectedOptions[i]);
                                var cell2 = $("<td class='displayTableNames'>").append($("<input style='border:none; width:300px; text-align: center;'>").attr("type", "text"));

                                row.append(cell1);
                                row.append(cell2);

                                $("#tableContainerEdit").append(row);
                            }
                        }
                    });

                    </script>
                    <style>
                      .displayTableNames {
                          width: 300px; /* Set a fixed width for the second column */
                          white-space: nowrap; /* Prevent text from wrapping */
                          overflow: hidden; /* Hide overflowing content */
                      }
                    </style>

                </div>
              </div>

              <div class='card customListViewMessages card col-12'>
                <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Custom Messages
                  <input type="checkbox" id="toggleCustomListViewMessages" class="float-right mt-2 checkboxinput custom-checkbox">
                </div>
                <script>
                  $("#toggleCustomListViewMessages").on("change", function() {
                    if($(this).prop("checked")){
                      $("#customListViewMessagesDiv").show()
                    }else{
                      $("#customListViewMessagesDiv").hide()
                    }

                });
                </script>
                <div class='card-body' id="customListViewMessagesDiv" style="display:none;">
                  <div class="nav flex-column nav-tabs customMeassagesNav" id="" role="tablist">

                    <a class="nav-item nav-link nav-accordion list_view" id="save_actions_edit_message-tab" data-target="save_actions_edit_message-content"  aria-controls="save_actions_edit_message" aria-selected="true">Set Success Message on editing data<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="save_actions_edit_message-content" aria-controls="save_actions_edit_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="save_actions_edit_message" name="save_actions_edit_message" type="text" value="Record updated successfully!" data-value="Record updated successfully!" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="save_actions_edit_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="bulk_update_success_message-tab" data-target="bulk_update_success_message-content"  aria-controls="bulk_update_success_message" aria-selected="true">Set Success Message on bulk update<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="bulk_update_success_message-content" aria-controls="bulk_update_success_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="bulk_update_success_message" name="bulk_update_success_message" type="text" value="Record updated successfully!" data-value="Data updated successfully!" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="bulk_update_success_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="confirm_delete_message-tab" data-target="confirm_delete_message-content"  aria-controls="confirm_delete_message" aria-selected="true">Confimation message before deleting all data<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="confirm_delete_message-content" aria-controls="confirm_delete_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="confirm_delete_message" name="confirm_delete_message" type="text" value="This will delete all the records from the table. Are you sure? Click Yes to confirm or No if you do not wish to reset it." data-value="This will delete all the records from the table. Are you sure? Click Yes to confirm or No if you do not wish to reset it." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="confirm_delete_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-question msg_icon" data-value="fas fa-question msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="unable_delete_foreignkey_message-tab" data-target="unable_delete_foreignkey_message-content"  aria-controls="unable_delete_foreignkey_message" aria-selected="true">Message if unable to delete data due to Foreign key references<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="unable_delete_foreignkey_message-content" aria-controls="unable_delete_foreignkey_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="unable_delete_foreignkey_message" name="unable_delete_foreignkey_message" type="text" value="Other tables have Foreign Key references to this table, unable to delete data." data-value="Other tables have Foreign Key references to this table, unable to delete data." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="unable_delete_foreignkey_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="unable_delete_notable_message-tab" data-target="unable_delete_notable_message-content"  aria-controls="unable_delete_notable_message" aria-selected="true">Message if table doesn't exist while deleting all data<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="unable_delete_notable_message-content" aria-controls="unable_delete_notable_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="unable_delete_notable_message" name="unable_delete_notable_message" type="text" value="Table does not exist." data-value="Table does not exist." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="unable_delete_notable_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-exclamation msg_icon"  data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="successful_delete_message-tab" data-target="successful_delete_message-content"  aria-controls="successful_delete_message" aria-selected="true">Success message on successfully deleting all data<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="successful_delete_message-content" aria-controls="successful_delete_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="successful_delete_message" name="successful_delete_message" type="text" value="Data deleted successfully!" data-value="Data deleted successfully!" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="successful_delete_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="confirm_permanent_delete_message-tab" data-target="confirm_permanent_delete_message-content"  aria-controls="confirm_permanent_delete_message" aria-selected="true">Confirmation message on deleting record from actions<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="confirm_permanent_delete_message-content" aria-controls="confirm_permanent_delete_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="confirm_permanent_delete_message" name="confirm_permanent_delete_message" type="text" value="Are you sure you want to delete this record?" data-value="Are you sure you want to delete this record?" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="confirm_permanent_delete_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-question msg_icon" data-value="fas fa-question msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="successful_permanent_delete_message-tab" data-target="successful_permanent_delete_message-content"  aria-controls="successful_permanent_delete_message" aria-selected="true">Success message on deleting record from actions<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="successful_permanent_delete_message-content" aria-controls="successful_permanent_delete_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="successful_permanent_delete_message" name="successful_permanent_delete_message" type="text" value="Record deleted successfully." data-value="Record deleted successfully." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="successful_permanent_delete_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="confirm_temp_delete_message-tab" data-target="confirm_temp_delete_message-content"  aria-controls="confirm_temp_delete_message" aria-selected="true">Confirmation message on temporarily deleting record from actions<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="confirm_temp_delete_message-content" aria-controls="confirm_temp_delete_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="confirm_temp_delete_message" name="confirm_temp_delete_message" type="text" value="Are you sure you want to delete this record temporarily?" data-value="Are you sure you want to delete this record temporarily?" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="confirm_temp_delete_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-question msg_icon" data-value="fas fa-question msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="successful_temp_delete_message-tab" data-target="successful_temp_delete_message-content"  aria-controls="successful_temp_delete_message" aria-selected="true">Success message on temporarily deleting record from actions<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="successful_temp_delete_message-content" aria-controls="successful_temp_delete_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="successful_temp_delete_message" name="successful_temp_delete_message" type="text" value="Data has been temporarily deleted." data-value="Data has been temporarily deleted." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="successful_temp_delete_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="confirm_conditional_temp_delete_message-tab" data-target="confirm_conditional_temp_delete_message-content"  aria-controls="confirm_conditional_temp_delete_message" aria-selected="true">Confirmation message on temporarily deleting data from conditional delete<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="confirm_conditional_temp_delete_message-content" aria-controls="confirm_conditional_temp_delete_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="confirm_conditional_temp_delete_message" name="confirm_conditional_temp_delete_message" type="text" value="Are you sure you want to temporarily delete this data?" data-value="Are you sure you want to temporarily delete this data?" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="confirm_conditional_temp_delete_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="success_conditional_temp_delete_message-tab" data-target="success_conditional_temp_delete_message-content"  aria-controls="success_conditional_temp_delete_message" aria-selected="true">Success message on temporarily deleting data from conditional delete<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="success_conditional_temp_delete_message-content" aria-controls="success_conditional_temp_delete_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="success_conditional_temp_delete_message" name="success_conditional_temp_delete_message" type="text" value="Data has been temporarily deleted." data-value="Data has been temporarily deleted." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="success_conditional_temp_delete_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="confirm_conditional_perm_delete_message-tab" data-target="confirm_conditional_perm_delete_message-content"  aria-controls="confirm_conditional_perm_delete_message" aria-selected="true">Confirmation message on permanently deleting data from conditional delete<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="confirm_conditional_perm_delete_message-content" aria-controls="confirm_conditional_perm_delete_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="confirm_conditional_perm_delete_message" name="confirm_conditional_perm_delete_message" type="text" value="Are you sure you want to permanently delete this data?" data-value="Are you sure you want to permanently delete this data?" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="confirm_conditional_perm_delete_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="success_conditional_perm_delete_message-tab" data-target="success_conditional_perm_delete_message-content"  aria-controls="success_conditional_perm_delete_message" aria-selected="true">Success message on permanently deleting data from conditional delete<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="success_conditional_perm_delete_message-content" aria-controls="success_conditional_perm_delete_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="success_conditional_perm_delete_message" name="success_conditional_perm_delete_message" type="text" value="Data deleted successfully." data-value="Data deleted successfully." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="success_conditional_perm_delete_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="confirm_multiple_delete_perm_message-tab" data-target="confirm_multiple_delete_perm_message-content"  aria-controls="confirm_multiple_delete_perm_message" aria-selected="true">Confirmation message on permanently deleting multiple selection<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="confirm_multiple_delete_perm_message-content" aria-controls="confirm_multiple_delete_perm_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="confirm_multiple_delete_perm_message" name="confirm_multiple_delete_perm_message" type="text" value="Are you sure you want to permanently delete this data?" data-value="Are you sure you want to permanently delete this data?" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="confirm_multiple_delete_perm_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="success_multiple_delete_perm_message-tab" data-target="success_multiple_delete_perm_message-content"  aria-controls="success_multiple_delete_perm_message" aria-selected="true">Success message on permanently deleting multiple selection<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="success_multiple_delete_perm_message-content" aria-controls="success_multiple_delete_perm_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="success_multiple_delete_perm_message" name="success_multiple_delete_perm_message" type="text" value="Data deleted successfully." data-value="Data deleted successfully." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="success_multiple_delete_perm_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="confirm_multiple_delete_temp_message-tab" data-target="confirm_multiple_delete_temp_message-content"  aria-controls="confirm_multiple_delete_temp_message" aria-selected="true">Confirmation message on temporarily deleting multiple selection<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="confirm_multiple_delete_temp_message-content" aria-controls="confirm_multiple_delete_temp_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="confirm_multiple_delete_temp_message" name="confirm_multiple_delete_temp_message" type="text" value="Are you sure you want to temporarily delete this data?" data-value="Are you sure you want to temporarily delete this data?" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="confirm_multiple_delete_temp_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="success_multiple_delete_temp_message-tab" data-target="success_multiple_delete_temp_message-content"  aria-controls="success_multiple_delete_temp_message" aria-selected="true">Success message on temporarily deleting multiple selection<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="success_multiple_delete_temp_message-content" aria-controls="success_multiple_delete_temp_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="success_multiple_delete_temp_message" name="success_multiple_delete_temp_message" type="text" value="Data has been temporarily deleted." data-value="Data has been temporarily deleted." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="success_multiple_delete_temp_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="add_computed_message-tab" data-target="add_computed_message-content"  aria-controls="add_computed_message" aria-selected="true">Set Success Message on adding computed fields<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="add_computed_message-content" aria-controls="add_computed_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="add_computed_message" name="add_computed_message" type="text" value="Operation Successful!" data-value="Operation Successful!" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="add_computed_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="remove_computed_message-tab" data-target="remove_computed_message-content"  aria-controls="remove_computed_message" aria-selected="true">Set Success Message on removing computed fields<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="remove_computed_message-content" aria-controls="remove_computed_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="remove_computed_message" name="remove_computed_message" type="text" value="Operation Successful!" data-value="Operation Successful!" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="remove_computed_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="remove_select_column_computed_message-tab" data-target="remove_select_column_computed_message-content"  aria-controls="remove_select_column_computed_message" aria-selected="true">Warning Message to select column before removing computed fields<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="remove_select_column_computed_message-content" aria-controls="remove_select_column_computed_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="remove_select_column_computed_message" name="remove_select_column_computed_message" type="text" value="Kindly select a column." data-value="Kindly select a column." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="remove_select_column_computed_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="remove_new_computed_message-tab" data-target="remove_new_computed_message-content"  aria-controls="remove_new_computed_message" aria-selected="true">Warning Message on trying to remove new computed fields<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="remove_new_computed_message-content" aria-controls="remove_new_computed_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="remove_new_computed_message" name="remove_new_computed_message" type="text" value="Unable to perform the operation in the new field." data-value="Unable to perform the operation in the new field." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="remove_new_computed_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="remove_existing_computed_message-tab" data-target="remove_existing_computed_message-content"  aria-controls="remove_existing_computed_message" aria-selected="true">Warning Message to select exisiting field checkbox before removing computed fields<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="remove_existing_computed_message-content" aria-controls="remove_existing_computed_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="remove_existing_computed_message" name="remove_existing_computed_message" type="text" value="Please select the existing field checkbox and the field name." data-value="Please select the existing field checkbox and the field name." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="remove_existing_computed_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="confirm_remove_computed_message-tab" data-target="confirm_remove_computed_message-content"  aria-controls="confirm_remove_computed_message" aria-selected="true">Confirmation alert before removing computed fields<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="confirm_remove_computed_message-content" aria-controls="confirm_remove_computed_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="confirm_remove_computed_message" name="confirm_remove_computed_message" type="text" value="Remove the computed field calculation?\n\nClick 'Yes' to confirm or 'No' if you do not wish to remove it." data-value="Remove the computed field calculation?\n\nClick 'Yes' to confirm or 'No' if you do not wish to remove it." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="confirm_remove_computed_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-question msg_icon" data-value="fas fa-question msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="file_upload_successful_message-tab" data-target="file_upload_successful_message-content"  aria-controls="file_upload_successful_message" aria-selected="true">Success Message on file upload<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="file_upload_successful_message-content" aria-controls="file_upload_successful_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="file_upload_successful_message" name="file_upload_successful_message" type="text" value="Upload successful!" data-value="Upload successful!" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="file_upload_successful_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="choose_file_bulk_update_message-tab" data-target="choose_file_bulk_update_message-content"  aria-controls="choose_file_bulk_update_message" aria-selected="true">Warning Message to choose a file for Bulk update<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="choose_file_bulk_update_message-content" aria-controls="choose_file_bulk_update_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="choose_file_bulk_update_message" name="choose_file_bulk_update_message" type="text" value="Please choose a file to upload." data-value="Please choose a file to upload." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="choose_file_bulk_update_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="choose_identifiers_bulk_update_message-tab" data-target="choose_identifiers_bulk_update_message-content"  aria-controls="choose_identifiers_bulk_update_message" aria-selected="true">Warning Message to select identifier columns for Bulk update<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="choose_identifiers_bulk_update_message-content" aria-controls="choose_identifiers_bulk_update_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="choose_identifiers_bulk_update_message" name="choose_identifiers_bulk_update_message" type="text" value="Please select identifier columns." data-value="Please select identifier columns." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="choose_identifiers_bulk_update_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="select_columns_bulk_update_message-tab" data-target="select_columns_bulk_update_message-content"  aria-controls="select_columns_bulk_update_message" aria-selected="true">Warning Message to select columns to update<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="select_columns_bulk_update_message-content" aria-controls="select_columns_bulk_update_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="select_columns_bulk_update_message" name="select_columns_bulk_update_message" type="text" value="Please select columns to update." data-value="Please select columns to update." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="select_columns_bulk_update_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="save_formatters_message-tab" data-target="save_formatters_message-content"  aria-controls="save_formatters_message" aria-selected="true">Success Message on successfully saving formatters<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="save_formatters_message-content" aria-controls="save_formatters_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="save_formatters_message" name="save_formatters_message" type="text" value="Configurations saved successfully!" data-value="Configurations saved successfully!" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="save_formatters_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="edit_approval_message-tab" data-target="edit_approval_message-content"  aria-controls="edit_approval_message" aria-selected="true">Set Message if data is sent for Approval on editing<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="edit_approval_message-content" aria-controls="edit_approval_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="edit_approval_message" name="edit_approval_message" type="text" value="Transaction update request has been sent for approval." data-value="Transaction update request has been sent for approval." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="edit_approval_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>

                    <a class="nav-item nav-link nav-accordion list_view" id="upload_approval_message-tab" data-target="upload_approval_message-content"  aria-controls="upload_approval_message" aria-selected="true">Set Message if data is sent for Approval on file upload <span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="upload_approval_message-content" aria-controls="upload_approval_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-12 mb-2">
                          <div class="placeholder_buttons">
                            <button  class="btn btn-primary" onclick="event.preventDefault();$('#upload_approval_message').val($('#upload_approval_message').val() + '\{Table Name\}')">Table Name</button>
                          </div>
                        </div>
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="upload_approval_message" name="upload_approval_message" type="text" value="Row(s) of {Table Name} has been sent for approval." data-value="Row(s) of {Table Name} has been sent for approval." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="upload_approval_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>

                    <a class="nav-item nav-link nav-accordion list_view" id="confirm_approve_all_message-tab" data-target="confirm_approve_all_message-content"  aria-controls="confirm_approve_all_message" aria-selected="true">Set confirmation alert before approving all records in Approval Template<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="confirm_approve_all_message-content" aria-controls="confirm_approve_all_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="confirm_approve_all_message" name="confirm_approve_all_message" type="text" value="Are you sure you want to approve all pending records where you are the concerned approver?" data-value="Are you sure you want to approve all pending records where you are the concerned approver?" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="confirm_approve_all_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="success_approve_all_message-tab" data-target="success_approve_all_message-content"  aria-controls="success_approve_all_message" aria-selected="true">Set success message on approving all records in Approval Template<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="success_approve_all_message-content" aria-controls="success_approve_all_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="success_approve_all_message" name="success_approve_all_message" type="text" value="All items where you are the concerned approver have been approved." data-value="All items where you are the concerned approver have been approved." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="success_approve_all_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>

                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="confirm_reject_all_message-tab" data-target="confirm_reject_all_message-content"  aria-controls="confirm_reject_all_message" aria-selected="true">Set confirmation alert before rejecting all records in Approval Template<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="confirm_reject_all_message-content" aria-controls="confirm_reject_all_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="confirm_reject_all_message" name="confirm_reject_all_message" type="text" value="Are you sure you want to reject all pending records where you are the concerned approver?" data-value="Are you sure you want to reject all pending records where you are the concerned approver?" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="confirm_reject_all_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="success_reject_all_message-tab" data-target="success_reject_all_message-content"  aria-controls="success_reject_all_message" aria-selected="true">Set success message on reject all records in Approval Template<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="success_reject_all_message-content" aria-controls="success_reject_all_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="success_reject_all_message" name="success_reject_all_message" type="text" value="All items where you are the concerned approver have been rejected." data-value="All items where you are the concerned approver have been rejected." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="success_reject_all_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>


                    <div class="dropdown-divider"></div>

                    <a class="nav-item nav-link nav-accordion list_view" id="confirm_approve_multiple_message-tab" data-target="confirm_approve_multiple_message-content"  aria-controls="confirm_approve_multiple_message" aria-selected="true">Set confirmation alert before approving selected records in Approval Template<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="confirm_approve_multiple_message-content" aria-controls="confirm_approve_multiple_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="confirm_approve_multiple_message" name="confirm_approve_multiple_message" type="text" value="Are you sure you want to approve all selected pending records where you are the concerned approver?" data-value="Are you sure you want to approve all selected pending records where you are the concerned approver?" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="confirm_approve_multiple_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>

                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="success_approve_multiple_message-tab" data-target="success_approve_multiple_message-content"  aria-controls="success_approve_multiple_message" aria-selected="true">Set success message on approving selected records in Approval Template<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="success_approve_multiple_message-content" aria-controls="success_approve_multiple_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="success_approve_multiple_message" name="success_approve_multiple_message" type="text" value="All selected records where you are the concerned approver have been approved." data-value="All selected records where you are the concerned approver have been approved." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="success_approve_multiple_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>

                    <a class="nav-item nav-link nav-accordion list_view" id="confirm_reject_multiple_message-tab" data-target="confirm_reject_multiple_message-content"  aria-controls="confirm_reject_multiple_message" aria-selected="true">Set confirmation alert before rejecting selected records in Approval Template<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="confirm_reject_multiple_message-content" aria-controls="confirm_reject_multiple_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="confirm_reject_multiple_message" name="confirm_reject_multiple_message" type="text" value="Are you sure you want to reject all selected pending records where you are the concerned approver?" data-value="Are you sure you want to reject all selected pending records where you are the concerned approver?" class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="confirm_reject_multiple_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a class="nav-item nav-link nav-accordion list_view" id="success_reject_multiple_message-tab" data-target="success_reject_multiple_message-content"  aria-controls="success_reject_multiple_message" aria-selected="true">Set success message on rejecting selected records in Approval Template<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                    <div class="nav-item nav-link"  id="success_reject_multiple_message-content" aria-controls="success_reject_multiple_message-content" aria-selected="false" style="display: none">
                      <div class="row">
                        <div class="col-md-4">
                          Message
                        </div>
                        <div class="col-md-8">
                          <input id="success_reject_multiple_message" name="success_reject_multiple_message" type="text" value="All records where you are the concerned approver have been rejected." data-value="All records where you are the concerned approver have been rejected." class="form-control textInput c_msg_input">
                        </div>
                        <div class="col-md-4">
                          <button type="button" class= "btn btn-primary" for="success_reject_multiple_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                        </div>
                        <div class="col-md-8">
                          <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <script>

                $(".reorderApprovalLevelConfigList").sortable()
                $(".reorderApprovalAuditLogList").sortable()

                $('#appJSONTableReorder').on('select2:select', function() {

                  $.ajax({
                    url: window.location.pathname,
                    data: {
                      'operation': 'dropFieldList',
                      'tableName':$(this).val(),
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                        $("#appJSONColsReorder").empty()
                        for (var i = 0; i < data.fieldList.length; i++) {

                              $("#appJSONColsReorder").append(`<li class="btn btn-sm btn-light col" name="${data.fieldNameList[i]}" style="height:auto;margin: 5px auto;">
                                                  <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${data.fieldList[i]}
                                                </li>`)
                            }
                        let reload = $("#appJSONTableReorder").attr("data-data")
                        if(reload){
                          reload = JSON.parse(reload)
                          $("#appJSONColsReorder").empty()
                          for (var i = 1; i <= Object.keys(reload).length; i++) {

                          $("#appJSONColsReorder").append(`<li class="btn btn-sm btn-light col" name="${reload[i]}" style="height:auto;margin: 5px auto;">
                                              <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${reload[i]}
                                            </li>`)
                          }

                          $("#appJSONTableReorder").removeAttr("data-data")
                        }

                        $(".appJSONColsReorder").sortable()
                      },
                    error: function () {
                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }

                  })

                })
              </script>
              <div class="custom-control custom-checkbox" style="margin-left: 3%;margin-top: 3%;margin-bottom: 3%;">
                <input type="checkbox" id="allow_listv_custV" name="allow_listv_custV" class="checkboxinput custom-control-input" value="copy">
                <label for="allow_listv_custV" class="custom-control-label">Allow user to add custom validation ?</label>
            </div>
            <div class="custom-control custom-checkbox" style="margin-left: 3%;margin-top: 3%;margin-bottom: 3%;">
              <input type="checkbox" id="allow_listv_rtf" name="allow_listv_rtf" class="checkboxinput custom-control-input">
              <label for="allow_listv_rtf" class="custom-control-label">Show RTF field data ?</label>
          </div>
            <div id="table_order_btn_listview_div" class="custom-control custom-checkbox col-6" style="margin-left: 3%;margin-top: 3%;margin-bottom: 3%;display:none;">
              <input type="checkbox" id="table_order_btn_listview" name="table_order_btn_listview" class="checkboxinput custom-control-input" value="copy">
              <label for="table_order_btn_listview" class="custom-control-label">Table order button</label>
          </div>
          <div id="add_table_btn_listview_div" class="custom-control custom-checkbox col-5" style="margin-top: 3%;margin-bottom: 3%;display:none;">
            <input type="checkbox" id="add_table_btn_listview" name="add_table_btn_listview" class="checkboxinput custom-control-input" value="copy">
            <label for="add_table_btn_listview" class="custom-control-label">Add table button</label>
        </div>
              <button style="margin-bottom:15px;" class="btn btn-primary col-6" id="listViewButtonEmbededComputationId" data-list="" onclick="listViewEmbededComputation(this)" >Embeded Computation</button>
              <div class="col-6" style="width: 100%;">
                <button type="button" class="btn btn-primary customValbtnDev" data-process_type="list" data-toggle="modal" data-target="#customValidationDev" onclick="showValModal(this)" style="width:100%;">Custom validation</button>
              </div>
              <div class="col-6">
                <button class="btn btn-primary popoverval" style="width: 100%;" id="check"  type="button" data-toggle="collapse" data-target="#collapseExample1" aria-expanded="false" aria-controls="collapseExample1">
                  Icon Selector
                </button>
              </div>
                <div class="col-6" id="buttonStyling_def" style="margin-top:15px;">
                  <button style="width: 100%;" class="btn btn-primary" id="listViewButtonId" data-list="" onclick="listViewButtonStyling(this)" >Configure Button Styling</button>
                </div>
                <div class="col-6" style="margin-top:15px;" >
                  <!-- Table Header modal -->
<button type="button" style="width: 100%;" class="btn btn-primary" id="tableHeaderBtn" data-toggle="modal" data-backdrop="static" data-keyboard="false" data-target="#tableHeaderModal" onclick="tableHeader()">
Table Header
</button>
</div>
<div class="col-6" style="margin-top:15px;" >
<button type="button" style="width: 100%;" class="btn btn-primary" id="columnNamesRenamesButton" onclick="columnHeaderRename(this)" data-list="">
Column Header Rename
</button>
</div>

              <div class="collapse" id="collapseExample1">
                <div class="card card-body listoficon">


                  </div>
                </div>
            </div>
          </form>
            </div>

          </div>
          </div>
            <div class="col-7">
          <div class='card' id="def_list_config_view">
            <div class='card-header' style='padding:0rem;'><h5 style="margin-left: -0.5rem;margin-bottom: 0rem;"><button class="btn" style='pointer-events: none; color:white;height: 2rem;width:10rem;border-color:none;color:var(--primary-color);padding-top:0.2rem;font-weight: bold;'>&nbsp;Sub-Category&nbsp;</button></h5></div>
            <div class='card-body' style="max-height: 18rem;overflow-y: auto;">
              <form id="subCategoryForm" method="post">
                {% csrf_token %}
                <div class="row">
                <div class="col-3" id='subCategoryButtons' style="height: 15.5rem; overflow-y: scroll;">
                    {%for i in listViewSubElements%}
                      {% if i != "Filter" %}
                      <button type="button" value="{{i}}" class="btn btn-primary subCategory"
                        style="height: 25px;width:70%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;word-break:break-all;"
                        >{{i}}
                      </button>
                      {% else %}
                      <button type="button" value="{{i}}" class="btn btn-primary subCategory"
                        style="height: 25px;width:65%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                        disabled>{{i}}
                      </button>
                      {% endif %}
                    <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                      <br>
                      <br>
                    {%endfor%}
                    <button type="button" value="Group By" class="btn btn-primary subCategory" id="group_by_action_btn_sub" data-list=""
                        style="height: 25px;width:65%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;" onClick="group_by_action_btn(this)"
                        >Group By
                    </button>

                    <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                    <br>
                    <br>
                    <button type="button" value="custom column" class="btn btn-primary subCategory"
                        style="height: 25px;width:65%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                        >Columns
                    </button>

                    <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                    <br>
                    <br>
                    <button type="button" value="custom template" class="btn btn-primary subCategory"
                        style="height: 25px;width:65%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                        >Template
                    </button>
                    <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                    <br>
                    <br>
                    <button id="hyperlinkingBtn" data-list="" onclick="hyperlinking(this)" type="button" value="hyperlinking tables" class="btn btn-primary subCategory"
                        style="height: 25px;width:70%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                        >Hyperlinking
                    </button>
                    <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                    <br>
                    <br>
                    <button id="formattingColumnBtn" data-list="" data-listtwo="" data-listthree="" data-listfour="" onclick="formattingColumn(this)" type="button" value="formatting columns" class="btn btn-primary subCategory"
                        style="height: 25px;width:70%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                        >Design
                    </button>
                    <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                    <br>
                    <br>
                    <button id="titleNameBtn" data-list="" onclick="titleName(this)" type="button" value="title name" class="btn btn-primary subCategory"
                        style="height: 25px;width:70%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                        >Title Name
                    </button>
                    <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                    <br>
                    <br>
                    <button id="buttonsGroupedTogether" data-list="" onclick="buttonsGroupedTogetherClick(this)"  type="button" value="Buttons Grouped Together" class="btn btn-primary subCategory"
                        style="height: 25px;width:70%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                        >Grouping
                    </button>
                    <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                    <br>
                    <br>
                    <button id="pagination" data-list="" onclick="Pagination()" type="button" value="Pagination" class="btn btn-primary subCategory"
                        style="height: 25px;width:70%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                        >Pagination
                    </button>
                    <span style="margin-left:0.8rem;"><i class="fa fa-check-circle pageCheck" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                    <br>
                    <br>
                    <button id="card_view_sub_category" type="button" data-list="" onclick="cardViewLoadConfig(this)" value="card_view" class="btn btn-primary subCategory" style="height: 25px; width: 70%; border-radius: 5px; color: white; padding-left: 9px; padding-top: 2px; background-color: rgb(86, 90, 94); border-color: rgb(86, 90, 94);">Card view
                    </button>
                    <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                    <br>
                    <br>
                </div>
                <!-- Sub sub-elements config -->
                <div class="col-9 subElementCards" style="height: 15.5rem; overflow-y: scroll;">
                  <div id='Datatable' class="subCategories" style="display:none;">
                   <p style="margin-left: 20%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Data Table</p>

                      <div class="form-group" style="margin-left:35%;">
                          <div id="div_id_active" class="custom-control custom-checkbox">
                            <input type="checkbox" name="NotRequiredDT" class="checkboxinput custom-control-input notRequired" id="notrequiredDT" value="1">
                            <label for="notrequiredDT" class="custom-control-label">
                              Not Required
                            </label>
                          </div>


                        </div>
                        <div class="dataTableSubElements elementCheckboxes">
                          <div id="div_id_active" class="custom-control custom-checkbox" style="margin-left:35%;">
                            <input type="checkbox" name="SelectAll" class="checkboxinput custom-control-input" id="selectAll" value="1">
                            <label for="selectAll" class="custom-control-label"> Select All</label></div><br>
                        {%for i in dataTableSubElements%}
                          <div class="form-group listofDataTableSubElements" style="margin-left:1rem;">
                            <div id="div_id_active" class="custom-control custom-checkbox">
                              {% if i == "Extract Data" %}
                              <input type="checkbox" name="{{i}}" class="checkboxinput custom-control-input extract_data_cb" id="{{i}}">
                              {% else %}
                              <input type="checkbox" name="{{i}}" class="checkboxinput custom-control-input" id="{{i}}">
                              {% endif %}
                              <label for="{{i}}" class="custom-control-label" id="sank">
                                {{i}}
                              </label>
                            </div>
                            {% if i == "Extract Data" %}
                            <input type="text" id="fn_extact_data" style="margin-left: 20px;margin-top: 5px;display:none;" placeholder="Add custom file name">
                            {% endif %}
                          </div>
                        {%endfor%}
                      </div>

                      <script>
                        $(".extract_data_cb").on('change', function(){
                          if ($(this).is(':checked')){
                            $('#fn_extact_data').css('display', 'block');
                          } else {
                            $('#fn_extact_data').css('display', 'none');
                          }
                        });
                        document.getElementById('selectAll').onclick = function() {
                          var checkboxes = $(this).parent().parent().find('input[type=checkbox]')

                          var save_btn= document.getElementById('save_buttonid')
                          save_btn.disabled=false
                          for (var checkbox of checkboxes) {
                            if((checkbox.getAttribute('name') == "Approve all" || checkbox.getAttribute('name') == "Reject all" || checkbox.getAttribute('name') == "Approve Multiple" || checkbox.getAttribute('name') == "Reject Multiple") && ($("#selectTemplate").val() != "Approval Template")){
                              checkbox.checked = this.unchecked;
                            }
                            else{
                              checkbox.checked = this.checked;
                              }
                            }
                          $(".extract_data_cb").trigger("change");
                        }
                        $(document).ready(function(){
                          $('.dataTableSubElements').find('.listofDataTableSubElements').each(function(){
                            at_name = $(this).find('input').attr('name')
                            if(["Approve all"].includes(at_name) || ["Reject all"].includes(at_name) || ["Approve Multiple"].includes(at_name) || ["Reject Multiple"].includes(at_name)){
                              $(this).find('input').attr("onchange","checkTemplateApproval.call(this)")
                            }
                          })
                        })

                      </script>

                      <button type="button" id="save_buttonid" class="btn btn-primary saveElementsButton" data-subCategory="Data table" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" disabled>Save</button>
                  </div>
                  <div id='hyperlinkingTables' class="subCategories" style="display:none;">
                    <div style="margin-bottom:10px;">
                      <label class="acies_label col-md-12">Master Table Column:</label>
                      <select id="selectHyperLinkedColumnMasterPC" class="select2 form-control" name="table">
                        <option value="" disabled selected>Master Table Column</option>
                      </select>
                    </div>
                    <div style="margin-bottom:10px;">
                      <label class="acies_label col-md-12">linked Table:</label>
                      <select onchange="hyperlinking1(this)" id="selectHyperLinkedTablePC" class="select2 form-control" name="table">
                        <option value="" disabled selected>linked Table</option>
                        {% for i in tableList%}
                        <option value="{{i}}">{{i}}</option>
                        {%endfor%}
                      </select>
                    </div>
                    <div style="margin-bottom:10px;">
                      <label class="acies_label col-md-12">Linked Table Column:</label>
                      <select id="selectHyperLinkedColumnPC" class="select2 form-control" name="table">
                        <option value="" disabled selected>Linked Table Column</option>
                      </select>
                    </div>



                    <div style="margin-bottom:10px;">
                      <label class="acies_label col-md-12">Linked Table Additional Column:</label>
                      <select id="selectHyperLinkedAdditionalPC" class="select2 form-control" name="table" multiple>

                      </select>
                    </div>
                    <button type="button" onclick="extractTheHyperLinkValues(this)" id="save_buttonid_hyperlinking" class="btn btn-primary saveElementsButton" data-subCategory="Hyperlinking table" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" >Save</button>
                  </div>
                  <div id='formattingColumns' class="subCategories" style="display:none;">
                    <div class="row">
                    <div class="col-12">
                      <div class="float-right" style="margin-right: 6px;">
                        <button onclick="populateFrmattingColumns(this)" class="btn btn-primary" type="button"><i class="fas fa-plus" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add Column Formatting</button>
                      </div>
                    </div>
                  </div>
                  <div class="formatting-body">

                  </div>
                  <button type="button" onclick="saveFormattingColumns(this)" id="save_buttonid_formatting" class="btn btn-primary saveElementsButton" data-subCategory="table name" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" >Save</button>
                  </div>
                  <div id='tableNameDiv' class="subCategories" style="display:none;margin-left:15px;">
                    <h6>Select icon and color</h6>
                    <div class="row" style="margin-bottom:18px;">
                      <div class="col-6">
                        <div class="row app_icon_color_code">

                        </div>
                        <button class="more_colors" id="more-iconcolors-button" onClick="moreColors(this)" >more colors</button>
                      </div>
                      <div class="col-6">
                        <div class="listoficontitlename">

                        </div>
                        <button class="more_colors" id="more-icons" onclick="moreIcons(this)"style="margin-top: -5px;">more icons</button>
                      </div>
                      <div class="col-6">
                        <h6>Select table name</h6>
                        <input type="text" class="textinput textInput form-control  ">
                      </div>
                      <div class="col-6">
                        <button class="more_colors" onClick="resetButtonTitleName(this)">Reset</button>
                      </div>
                    </div>





                  <button type="button" id="save_buttonid_tableNameDiv" onClick="saveTableNameDiv(this)" class="btn btn-primary saveElementsButton" data-subCategory="table name" style="height:1.5rem;padding-top: 0.1rem;" >Save</button>
                  </div>
                  <div id='tableNameDivMultiple' class="subCategories" style="display:none;margin-left:15px;">
                    <div class="card-header">
                      <div class="float-right" style="margin-right: 6px;">
                        <button onclick="titleNameMultipleModal(this)" class="btn btn-primary" type="button">Add tables</button>
                      </div>
                    </div>
                  </div>
                  <div id="buttonsGroupedTogetherDiv" class="subCategories" style="display:none;margin-left:15px;">
                    <div class="columnHeaders">
                      <p style="font-weight: bold;">Select buttons to add in drop down :</p>
                      <select multiple>
                        <option value="uploadButton">Upload</option>
                        <option value="saveTemplateButton">Save Template</option>
                        <option value="example1_expand">Expand</option>
                        <option value="plotCharts">Plot Chart</option>
                        <option value="setAlertBtn">Set alert</option>
                        <option value="filter_button_list_view">Filter</option>
                        <option value="saveEditListView">Save Edited Data</option>
                        <option value="editListView">Edit Mode</option>
                        <option value="tablegenerator_">Paste tabular data</option>
                        <option value="listview_clearall_">Delete all data</option>
                        <option value="find_replace_">Find and replace</option>
                        <option value="freeze_pane_">Freeze Panes</option>
                        <option value="extract_data_">Extract Data</option>
                        <option value="formatter_">Formatters</option>
                        <option value="showTransactions">View Transaction Status</option>
                        <option value="addComp_field_">Add Computed Fields</option>
                        <option value="bulk_update">Bulk Update</option>
                        <option value="conditional_delete">Conditional Delete</option>
                        <option value="multiple_delete_perm">Delete Multiple(Permanent)</option>
                        <option value="multiple_delete_temp">Delete Multiple(Temporary)</option>
                        <option value="approve_all_ApprovalTemplate">Approve all</option>
                        <option value="reject_all_ApprovalTemplate">Reject all</option>
                        <option value="multiple_approve">Approve Multiple</option>
                        <option value="multiple_reject">Reject Multiple</option>
                      </select>
                      <p style="font-weight: bold;">Text for dropdown button:</p>
                      <input type="text" class="textinput textInput form-control  ">
                      <div style="margin-top:1rem;">
                        <button type="button" class="btn btn-primary" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="saveButtonsGroupedTogether(this)">Save</button>
                        <button class="more_colors" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="resetButtonsGroupedTogether(this)">Reset</button>
                      </div>
                    </div>
                  </div>
                  <div id='paginationDiv' class="subCategories" style="display:none;margin-left:15px;">
                    <div class="card-header">
                      <h3>Pagination</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                          <div class="col-12">
                            <select class="form-control select2" id="paginationSelect" onchange="PaginationSelect(this)" multiple>

                            </select>
                          </div>
                        </div>
                        <div class="col-12 mt-3">
                          <button type="button" onClick="SavePagination(this)" class="btn btn-primary saveElementsButton" data-subCategory="table name" style="height:1.5rem;padding-top: 0.1rem;" >Save</button>
                        </div>
                    </div>
                  </div>

                  <div id='card_view_div' class="subCategories" style="display:none;">
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col-6">
                        <p style="font-weight: bold;">Font alignment:</p>
                        <select class="select2 form-control" data-css="font-alignment">
                          <option value="" selected="">Select alignment</option>
                          <option value="left">Left</option>
                          <option value="right">Right</option>
                          <option value="center">Center</option>
                        </select>
                      </div>
                      <div class="col-6">
                        <p style="font-weight: bold;">Card padding*px:</p>
                        <input type="number" class="form-control numberinput" data-css="card-padding">
                      </div>
                    </div>
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col-6">
                        <p style="font-weight: bold;">Header font size:</p>
                        <select class="select2 form-control" data-css="font-header-size">
                          <option value="0.8rem" selected>Normal</option>
                          <option value="0.7rem">Xtra small</option>
                          <option value="0.9rem">Medium</option>
                          <option value="1rem">Large</option>
                          <option value="1.1rem">Xtra large</option>
                        </select>
                      </div>
                      <div class="col-6">
                        <p style="font-weight: bold;">Value font size:</p>
                        <select class="select2 form-control" data-css="font-value-size">
                          <option value="0.8rem" selected>Normal</option>
                          <option value="0.7rem">Xtra small</option>
                          <option value="0.9rem">Medium</option>
                          <option value="1rem">Large</option>
                          <option value="1.1rem">Xtra large</option>
                        </select>
                      </div>
                    </div>
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col-6">
                        <p style="font-weight: bold;">Header font color:</p>
                        <input type="color" value="#ffffff" class="form-control" data-css="font-header-color">
                      </div>
                      <div class="col-6">
                        <p style="font-weight: bold;">Value font color:</p>
                        <input type="color" value="#ffffff" class="form-control" data-css="font-value-color">
                      </div>
                    </div>
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col-6">
                        <p style="font-weight: bold;">Card height:</p>
                        <input type="number" class="form-control numberinput" data-css="card-height">
                      </div>
                      <div class="col-6">
                        <p style="font-weight: bold;">Card width:</p>
                        <input type="number" class="form-control numberinput" data-css="card-wdith">
                      </div>
                    </div>
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col-3">
                        <p style="font-weight: bold;">Card border radius*px:</p>
                        <input type="number" class="form-control numberinput" data-css="card-border-radius">
                      </div>
                      <div class="col-3">
                        <p style="font-weight: bold;">Card border style:</p>
                        <select class="select2 form-control" data-css="card-border-style">
                          <option value="none">No border</option>
                          <option value="dotted">Dotted</option>
                          <option value="dashed">Dashed</option>
                          <option value="solid">Solid</option>
                          <option value="double">Double</option>
                          <option value="groove">Groove</option>
                          <option value="ridge">Ridge</option>
                          <option value="inset">Inset</option>
                          <option value="outset">Outset</option>
                          <option value="dotted dashed solid double">Dotted dashed solid double</option>
                      </select>
                      </div>
                      <div class="col-3">
                        <p style="font-weight: bold;">Card border width*px:</p>
                        <input type="number" class="form-control numberinput" data-css="card-border-width">
                      </div>
                      <div class="col-3">
                        <p style="font-weight: bold;">Card border color:</p>
                        <div class="input-group">
                          <input type="color" class="form-control" data-css="card-border-color">
                          <select class="select2 form-control" data-css="card-border-color-opacity" >
                            <option value="1" Selected>1</option>
                            <option value="0.9">0.9</option>
                            <option value="0.8">0.8</option>
                            <option value="0.7">0.7</option>
                            <option value="0.8">0.8</option>
                            <option value="0.7">0.7</option>
                            <option value="0.6">0.6</option>
                            <option value="0.5">0.5</option>
                            <option value="0.4">0.4</option>
                            <option value="0.3">0.3</option>
                            <option value="0.2">0.2</option>
                            <option value="0.1">0.1</option>
                            <option value="0">0</option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="row" style="padding-top:10px;">
                      <p style="font-weight: bold;margin-left:10px;">Card Shadow Options (in px)</p>
                    </div>
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col">
                        <p style="font-weight: bold;">h-offset:</p>
                        <input type="number" class="form-control numberinput" data-css="card-shadow-h-offset">
                      </div>
                      <div class="col">
                        <p style="font-weight: bold;">v-offset:</p>
                        <input type="number" class="form-control numberinput" data-css="card-shadow-v-offset">
                      </div>
                      <div class="col">
                        <p style="font-weight: bold;">blur:</p>
                        <input type="number" class="form-control numberinput" data-css="card-shadow-blur">
                      </div>
                      <div class="col">
                        <p style="font-weight: bold;">spread:</p>
                        <input type="number" class="form-control numberinput" data-css="card-shadow-spread">
                      </div>
                      <div class="col">
                        <p style="font-weight: bold;">color:</p>
                        <div class="input-group">
                          <input type="color" class="form-control" data-css="card-shadow-color">
                          <select class="select2 form-control" data-css="card-shadow-color-opacity" >
                            <option value="1" Selected>1</option>
                            <option value="0.9">0.9</option>
                            <option value="0.8">0.8</option>
                            <option value="0.7">0.7</option>
                            <option value="0.8">0.8</option>
                            <option value="0.7">0.7</option>
                            <option value="0.6">0.6</option>
                            <option value="0.5">0.5</option>
                            <option value="0.4">0.4</option>
                            <option value="0.3">0.3</option>
                            <option value="0.2">0.2</option>
                            <option value="0.1">0.1</option>
                            <option value="0">0</option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col-4">
                        <p style="font-weight: bold;">Field border style:</p>
                        <select class="select2 form-control" data-css="field-border-style">
                          <option value="none">No border</option>
                          <option value="dotted">Dotted</option>
                          <option value="dashed">Dashed</option>
                          <option value="solid">Solid</option>
                          <option value="double">Double</option>
                          <option value="groove">Groove</option>
                          <option value="ridge">Ridge</option>
                          <option value="inset">Inset</option>
                          <option value="outset">Outset</option>
                          <option value="dotted dashed solid double">Dotted dashed solid double</option>
                      </select>
                      </div>
                      <div class="col-4">
                        <p style="font-weight: bold;">Field border width*px:</p>
                        <input type="number" class="form-control numberinput" data-css="field-border-width">
                      </div>
                      <div class="col-4">
                        <p style="font-weight: bold;">Field border color:</p>
                        <div class="input-group">
                          <input type="color" class="form-control" data-css="field-border-color">
                          <select class="select2 form-control" data-css="field-border-color-opacity" >
                            <option value="1" Selected>1</option>
                            <option value="0.9">0.9</option>
                            <option value="0.8">0.8</option>
                            <option value="0.7">0.7</option>
                            <option value="0.8">0.8</option>
                            <option value="0.7">0.7</option>
                            <option value="0.6">0.6</option>
                            <option value="0.5">0.5</option>
                            <option value="0.4">0.4</option>
                            <option value="0.3">0.3</option>
                            <option value="0.2">0.2</option>
                            <option value="0.1">0.1</option>
                            <option value="0">0</option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="row" style="padding-top:10px;padding-bottom:10px;">
                      <div class="col">
                        <p style="font-weight: bold;">No of cards in one row:</p>
                        <select class="select2 form-control" data-css="card-no-one-row" >
                          <option value="1" Selected>1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5</option>
                          <option value="6">6</option>
                          <option value="7">7</option>
                          <option value="8">8</option>
                          <option value="9">9</option>
                          <option value="10">10</option>
                          <option value="11">11</option>
                          <option value="12">12</option>
                        </select>
                      </div>
                    </div>
                    <div style="margin-top:1rem;">
                      <button type="button" class="btn btn-primary" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="card_view_save(this)">Save</button>
                    </div>
                  </div>
                  <div id='Chart' class="subCategories" style="display:none;">
                    <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Chart</p>

                      <div class="form-group" style="margin-left:35%;">
                          <div id="div_id_active" class="custom-control custom-checkbox">
                            <input type="checkbox" name="NotRequiredChart" class="checkboxinput custom-control-input notRequired" id="notrequiredChart" >
                            <label for="notrequiredChart" class="custom-control-label">
                              Not Required
                            </label>
                          </div>
                        </div>
                        <div class="chartSubElements elementCheckboxes">
                        {%for i in chartSubElements%}
                          <div class="form-group" style="margin-left:1rem;">
                            <div id="div_id_active" class="custom-control custom-checkbox">
                              <input type="checkbox" name="{{i}}" class="checkboxinput custom-control-input" id="{{i}}">
                              <label for="{{i}}" class="custom-control-label">
                                {{i}}
                              </label>
                            </div>
                          </div>
                        {%endfor%}
                      </div>
                      <button type="button" class="btn btn-primary saveElementsButton" data-subCategory="Chart" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" disabled>Save</button>
                  </div>
                  <div id='Filter' class="subCategories" style="display:none;">
                    <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Filter</p>

                      <div class="form-group" style="margin-left:35%;">
                          <div id="div_id_active" class="custom-control custom-checkbox">
                            <input type="checkbox" name="NotRequiredFilter" class="checkboxinput custom-control-input notRequired" id="notrequiredFilter">
                            <label for="notrequiredFilter" class="custom-control-label">
                              Not Required
                            </label>
                          </div>
                        </div>
                        <div class="filterSubElements elementCheckboxes">
                        {%for i in filterSubElements%}
                          <div class="form-group" style="margin-left:1rem;">
                            <div id="div_id_active" class="custom-control custom-checkbox">
                              <input type="checkbox" name="{{i}}" class="checkboxinput custom-control-input" id="{{i}}elements">
                              <label for="{{i}}elements" class="custom-control-label">
                                {{i}}
                              </label>
                            </div>

                          </div>
                        {%endfor%}
                      </div>
                      <div style="width: 20em;margin-left: 15px;">
                      <select class='select2 form-control  mt-2' id="custom_field_daterange_selection">
                        <option value=""selected>-----</option>
                      </select>
                      </div>
                      <br>
                      <button type="button" class="btn btn-primary saveElementsButton" data-subCategory="Filter" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" disabled>Save</button>
                      <hr style="height:2px;border-width:0;color:gray;background-color:gray">
                      <button onclick="quickFilters(this)" class="btn btn-primary float-right" type="button" id="quickFiltersBtn" data-list="">Quick filters</button>
                    </div>

                  <!-- Action -->
                  <div id='JSAttributes' class="subCategories" style="display:none;">
                    <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;JS Attributes</p>

                      <div class="form-group">
                        <select class='select2 form-control  mt-2' id="selectLVJSAttribute">
                          <option value="" selected>-----</option>
                          <option value="restrictMSEdit">Restrict edit of existing selections (Multi-select)</option>
                        </select>
                      </div>
                      <button type="button" id="saveJSAttributeButton" class="btn btn-primary saveElementsButton" data-subCategory="JS Attributes" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;">Save</button>
                  </div>
                  <div id='group_by_action' class="subCategories" style="display:none;">
                    <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Group By</p>
                    <p style="margin-left: 24%;font-size:small;">If configured this will disable the action buttons</p>
                    <div class="row">
                      <div class="col-6">
                        <div style="margin-left: 50%;" id="div_id_active" class="custom-control custom-checkbox">
                          <input type="checkbox" name="group_by_action_checkbox" class="checkboxinput custom-control-input" id="group_by_action_checkbox" onchange="group_by_action_checkbox_onchange(this)">
                          <label for="group_by_action_checkbox" class="custom-control-label">
                            Not Required
                          </label>
                        </div>
                      </div>
                      <div class="col-6">
                        <div style="margin-left: 24%;" id="div_id_active" class="custom-control custom-checkbox">
                          <input type="checkbox" name="group_by_action_checkbox_user_configuration" class="checkboxinput custom-control-input" id="group_by_action_checkbox_user_configuration">
                          <label for="group_by_action_checkbox_user_configuration" class="custom-control-label">
                            Allow users to configure group-by views?
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-12">
                        <div class="float-right" style="margin-right: 6px;">
                          <button onclick="group_by_action_add_levels(this)" class="btn btn-primary add_level" type="button"><i class="fas fa-plus" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add Levels</button>
                          <button onclick="group_by_action_reset(this)" class="btn btn-primary" type="button">Reset</button>
                        </div>
                      </div>
                    </div>

                    <div class="group_by_action_levels" style="margin-left: 1rem">
                      <hr style="height:2px;border-width:0;color:gray;background-color:gray">
                    </div>

                    <div class="group_by_action_columns" style="margin-left: 1rem;margin-top:1rem;">
                      <p style="font-weight: bold;">Select columns:</p>
                      <select class="select2 form-control" multiple onchange="group_by_action_columns_operation(this)"></select>
                      <div class="operation_div">
                      </div>
                    </div>
                    <div style="margin-top:1rem;">
                      <button type="button" class="btn btn-primary saveElementsButton" data-subcategory="Group by" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="group_by_action_save(this)">Save</button>
                    </div>
                  </div>
                  <div id='ListView_Action' class="subCategories" style="display:none;">
                    <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Action</p>

                      <div class="form-group" style="margin-left:35%;">
                          <div id="div_id_active" class="custom-control custom-checkbox">
                            <input type="checkbox" name="NotRequiredListView_Action" class="checkboxinput custom-control-input notRequiredAction" id="notrequiredListView_Action" >
                            <label for="notrequiredListView_Action" class="custom-control-label">
                              Not Required
                            </label>
                          </div>
                        </div>
                        <div id="div_id_active" class="custom-control custom-checkbox" style="margin-left:35%;">
                          <input type="checkbox" name="SelectAll_listAction" class="checkboxinput custom-control-input" id="selectAll_listAction" value="1">
                          <label for="selectAll_listAction" class="custom-control-label"> Select All</label></div>
                          <div class="custom-control custom-checkbox" style="margin-left:35%;margin-top:3%">
                            <input type="checkbox" name="action_btn_config_group_together" class="checkboxinput custom-control-input" id="action_btn_config_group_together" >
                            <label for="action_btn_config_group_together" class="custom-control-label"> Group Together</label></div>
                          <br>
                        <div class="listview_actionSubElements elementCheckboxes">

                        {%for i in listview_action%}
                          <div class="form-group listofActions" style="margin-left:1rem;">
                            <div id="div_id_active" class="custom-control custom-checkbox">
                              <input type="checkbox" name="{{i}}" class="checkboxinput custom-control-input" id="{{i}}">
                              <label for="{{i}}" class="custom-control-label">
                                {{i}}
                              </label>
                              {% if i == "Delete Record"%}
                              <ul>
                                <li style="list-style-type: none;margin-left: -2.5rem;padding-top: 1rem; display:none;">
                                  <div id="div_id_active_perm" class="custom-control custom-checkbox">
                                    <input type="checkbox" name="Perm Delete Record" class="checkboxinput custom-control-input" id="Perm Delete Record">
                                    <label for="Perm Delete Record" class="custom-control-label">
                                      Permanent Delete Record
                                    </label>
                                  </div>
                                </li>
                                <li style="list-style-type: none;margin-left: -2.5rem;padding-top: 1rem;display:none;">
                                  <div id="div_id_active_temp" class="custom-control custom-checkbox">
                                    <input type="checkbox" name="Temp Delete Record" class="checkboxinput custom-control-input" id="Temp Delete Record">
                                    <label for="Temp Delete Record" class="custom-control-label">
                                      Temporary Delete Record
                                    </label>
                                  </div>
                                </li>
                              </ul>
                              {% endif %}
                            </div>
                          </div>
                        {%endfor%}
                      </div>

                      <div class="row">
                        <button type="button" id="save_actionbuttonid" class="btn btn-primary saveElementsButton" data-subCategory="Action" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" disabled>Save</button>
                        <button type="button" class="btn btn-primary" id="configure_actionbuttonid" data-list="" onclick="configureActionBtn(this)" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;">Configure Action Buttons</button>
                        <button type="button" class="btn btn-primary" id="configure_action_column_id" data-list="" onclick="configureActionColumn(this)" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;">Configure Action Column</button>
                        <button type="button" class="btn btn-primary" id="configure_action_pdf_id" data-list="" onclick="configure_action_pdf(this)" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;display:none;">Configure PDF button</button>
                        <button type="button" class="btn btn-primary" id="configure_edit_list_view_header_modal" data-list="" onclick="configure_edit_list_view_modal_header(this)" style="margin-left: 1rem; height: 1.5rem; padding-top: 0.1rem; display: block;">Configure Edit list view</button>
                      </div>


                  </div>
                  <script>
                    function group_by_action_columns_operation(obj){
                      var dict_a = {}
                      $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation').each(function(){
                        dict_a[$(this).find('p').attr('data-list')] = $(this).find('select').val()
                      })
                      $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation').remove()
                      var value = $(obj).val()
                      var optionvalues = []
                      if (value.length > 0){
                        for (let k in value){
                          var columnOptions = ``
                          var seldatatype = $('#group_by_action').find('.group_by_action_columns').find('select').eq(0).find(`option[value='${value[k]}']`).attr('data-type')
                          if (!((seldatatype === 'IntegerField') || (seldatatype === 'BigIntegerField') || (seldatatype === 'FloatField') || (seldatatype === 'AutoField'))){
                            optionvalues = ['Count', 'Count Distinct', 'First', 'Last', 'Earliest','Latest','Value']
                          }else if (((seldatatype === 'IntegerField') || (seldatatype === 'BigIntegerField') || (seldatatype === 'FloatField') || (seldatatype === 'AutoField'))){
                            optionvalues = ['Sum', 'Count', 'Count Distinct', 'Average', 'Skewness', 'Kurtosis', 'Median', 'Variance', 'Standard Deviation', 'Minimum', 'Maximum', 'Percentage of Total','Value']
                          }
                          for (let i in optionvalues){
                            columnOptions += `
                            <option value="${optionvalues[i]}">${optionvalues[i]}</option>
                            `
                          }
                          var operation = `<div class="operation">
                            <p style="font-weight: bold;padding-top:1rem;" data-list="${value[k]}">Operation - ${value[k]}:</p>
                            <select class="select2 form-control">
                              <option value="----">----</option>
                              ${columnOptions}
                            </select>
                          </div>
                          `
                          $('#group_by_action').find('.group_by_action_columns').find('.operation_div').append(operation)
                        }
                        $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation').each(function(){
                          if(dict_a.hasOwnProperty($(this).find('p').attr('data-list'))){
                            $(this).find('select').val(dict_a[$(this).find('p').attr('data-list')]).trigger('change')
                          }
                        })
                      }
                      $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation').find('select').each(function(){
    $(this).select2()
  })
                    }
                    function group_by_approval_temp_json_table_onchange(obj){
                      if ($(obj).val() != ''){
                        $.ajax({
                          url: window.location.pathname,

                          data: {
                            'operation': 'fecthing_verbose_name_group_by',
                            'model_name': 'ApprovalTable',
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            var columnOptions = ''
                            var data = data.data
                            for (j in data) {
                              columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}__-ApprovalTable">${data[j]['verboseName']} -ApprovalTable</option>`
                            }

                            $.ajax({
                              url: window.location.pathname,

                              data: {
                                'operation': 'fecthing_verbose_name_group_by',
                                'model_name': $(obj).val(),
                              },
                              type: "POST",
                              dataType: "json",
                              success: function (data) {
                                var lastCard = $('#group_by_action').find('.group_by_action_columns').find('select').eq(0)
                                var data = data.data
                                for (j in data) {
                                  columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}__-${$(obj).val()}">${data[j]['verboseName']} -${$(obj).val()}</option>`
                                }
                                $(lastCard).empty()
                                $(lastCard).append(columnOptions)
                                $(lastCard).select2()
                                if($(obj).attr('data-list') != undefined){
                                  var data_list = JSON.parse($(obj).attr('data-list'))
                                  $(lastCard).val(data_list['selected_columns']).trigger('change')
                                  var count = $('#group_by_action').find('.group_by_action_levels').find('.levels').length
                                  for (let i in data_list['levels']){
                                    var level2 = `<div class="levels">
                                      <p style="font-weight: bold;padding-top:1rem;">Level ${parseInt(count)+1}:</p>
                                      <div class="row">
                                        <div class="col-11">
                                          <select class="select2 form-control"></select>
                                        </div>
                                        <div class="col-1">
                                          <button type="button" class="btn btn-tool" onclick="group_by_remove_content(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                                        </div>
                                      </div>
                                      </div>
                                      `
                                    $('#group_by_action').find('.group_by_action_levels').append(level2)
                                    var lastCard1 = $('#group_by_action').find('.group_by_action_levels').find('.levels').eq(-1)
                                    $(lastCard1).find('select').empty()
                                    $(lastCard1).find('select').append(`<option value="" disabled selected>Select Columns</option>`)
                                    $(lastCard1).find('select').append(columnOptions)
                                    $(lastCard1).find('select').each(function(){
    $(this).select2()
  })
                                    $(lastCard1).find('select').val(data_list['levels'][i]).trigger('change')
                                    count ++
                                  }
                                  for(let k in data_list['operations']){
                                    $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation').eq(k).find('select').val(data_list['operations'][k]).trigger('change')
                                  }
                                }
                              },
                              error: function () {
                                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                              }
                            })
                          },
                          error: function () {
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        })
                      }else{
                        $.ajax({
                          url: window.location.pathname,

                          data: {
                            'operation': 'fecthing_verbose_name_group_by',
                            'model_name': $('#selectTablePC').val(),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            var columnOptions = ''
                            var data = data.data
                            for (j in data) {
                              columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
                            }
                            var lastCard = $('#group_by_action').find('.group_by_action_columns').find('select').eq(0)
                            $(lastCard).empty()
                            $(lastCard).append(columnOptions)
                            $(lastCard).select2()
                          },
                          error: function () {
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        })
                      }
                    }
                    function group_by_action_checkbox_onchange(obj){
                      if ($(obj).prop('checked')){
                        $('#group_by_action').find('.add_level').prop('disabled',true);
                        $('#group_by_action').find('.group_by_action_levels').find('.levels').remove()
                        $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation').remove()
                        $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('select').eq(0).val([]).trigger('change');
                        $('#group_by_action').find('.group_by_action_columns').find('select').eq(0).prop('disabled',true);
                        $('#group_by_action').find('.group_by_approval_temp_div').find('select').prop('disabled',true);
                      }else{
                        $('#group_by_action').find('.add_level').prop('disabled',false);
                        $('#group_by_action').find('.group_by_action_columns').find('select').eq(0).val([]).trigger('change')
                        $('#group_by_action').find('.group_by_action_columns').find('select').eq(0).prop('disabled',false);
                        $('#group_by_action').find('.group_by_approval_temp_div').find('select').prop('disabled',false);
                      }
                    }
                    function group_by_action_reset(obj){
                      $('#group_by_action').find('.group_by_action_levels').find('.levels').remove()
                      $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation').remove()
                      $('#group_by_action').find('.group_by_action_columns').find('select').eq(0).val([]).trigger('change')
                    }
                    function group_by_action_save(obj){
                      var values ={}
                      values['group_by_switch'] = $('#group_by_action').find('#group_by_action_checkbox').prop('checked')
                      values['group_by_switch_user_configuration'] = $('#group_by_action').find('#group_by_action_checkbox_user_configuration').prop('checked')
                      if ($('#selectTemplate').val() =='Approval Template'){
                        if (!$('#group_by_action').find('#group_by_action_checkbox').prop('checked')){
                          if ($('#group_by_action').find('#group_by_approval_temp_json_table').val() != ''){
                            var levels = $('#group_by_action').find('.group_by_action_levels').find('.levels')
                            values['levels'] = []
                            values['selected_columns'] = []
                            for (let i = 0; i < levels.length; i++){
                              var singleLevel = $('#group_by_action').find('.group_by_action_levels').find('.levels').eq(i)
                              var levelName = singleLevel.find('p').text()
                              values['levels'].push($(singleLevel).find('select').val())
                            }
                            values['operations'] = []
                            var operation = $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation')
                            for (let k = 0; k < operation.length; k++){
                              var singleOperation = $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation').eq(k)
                              values['operations'].push($(singleOperation).find('select').val())
                            }
                            $('#group_by_action').find('.group_by_action_columns').find('select').eq(0).find(':selected').each(function(){
                              values['selected_columns'].push($(this).attr('value'))
                            })
                            values['data-json-table'] = $('#group_by_action').find('#group_by_approval_temp_json_table').val()
                          }else{
                            var levels = $('#group_by_action').find('.group_by_action_levels').find('.levels')
                            values['levels'] = []
                            for (let i = 0; i < levels.length; i++){
                              var singleLevel = $('#group_by_action').find('.group_by_action_levels').find('.levels').eq(i)
                              var levelName = singleLevel.find('p').text()
                              values['levels'].push($(singleLevel).find('select').val())
                            }
                            values['operations'] = []
                            var operation = $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation')
                            for (let k = 0; k < operation.length; k++){
                              var singleOperation = $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation').eq(k)
                              values['operations'].push($(singleOperation).find('select').val())
                            }
                            values['selected_columns'] = $('#group_by_action').find('.group_by_action_columns').find('select').eq(0).val()
                          }

                        }
                      }else{
                        if (!$('#group_by_action').find('#group_by_action_checkbox').prop('checked')){
                          var levels = $('#group_by_action').find('.group_by_action_levels').find('.levels')
                          values['levels'] = []
                          for (let i = 0; i < levels.length; i++){
                            var singleLevel = $('#group_by_action').find('.group_by_action_levels').find('.levels').eq(i)
                            var levelName = singleLevel.find('p').text()
                            values['levels'].push($(singleLevel).find('select').val())
                          }
                          values['operations'] = []
                          var operation = $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation')
                          for (let k = 0; k < operation.length; k++){
                            var singleOperation = $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation').eq(k)
                            values['operations'].push($(singleOperation).find('select').val())
                          }
                          values['selected_columns'] = $('#group_by_action').find('.group_by_action_columns').find('select').eq(0).val()
                        }
                      }

                      $('#group_by_action_btn_sub').attr('data-list',JSON.stringify({[$('#selectTablePC').val()]:values}))
                      $('#subCategoryButtons').find('.fa-check-circle').eq(7).css('display','inline-block');
                    }
                    function group_by_action_add_levels(){

                      var count = $('#group_by_action').find('.group_by_action_levels').find('.levels').length
                      var level2 = `<div class="levels">
                        <p style="font-weight: bold;padding-top:1rem;">Level ${count+1}:</p>
                        <div class="row">
                          <div class="col-11">
                            <select class="select2 form-control"></select>
                          </div>
                          <div class="col-1">
                            <button type="button" class="btn btn-tool" onclick="group_by_remove_content(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                          </div>
                        </div>
                      </div>
                        `
                      if (count >= 5){
                        Swal.fire({text:"Max levels can be only 5",icon:"warning"})
                      }else{
                          var selectedTable = $('#selectTablePC').val()
                          $.ajax({
                            url: window.location.pathname,

                            data: {
                              'operation': 'fecthing_verbose_name_group_by',
                              'model_name': selectedTable,
                            },
                            type: "POST",
                            dataType: "json",
                            success: function (data) {
                              var columnOptions = ''
                              $('#group_by_action').find('.group_by_action_levels').append(level2)
                              if ($('#group_by_approval_temp_json_table').length > 0 && $('#group_by_approval_temp_json_table').val()!= ''){
                                  var data = data.data
                                  for (j in data) {
                                    columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}__-${selectedTable}">${data[j]['verboseName']} -${selectedTable}</option>`
                                  }
                                var lastCard = $('#group_by_action').find('.group_by_action_levels').find('.levels').eq(-1)
                                  $.ajax({
                                    url: window.location.pathname,

                                    data: {
                                      'operation': 'fecthing_verbose_name_group_by',
                                      'model_name': $('#group_by_approval_temp_json_table').val(),
                                    },
                                    type: "POST",
                                    dataType: "json",
                                    success: function (data) {
                                      var data = data.data
                                      for (j in data) {
                                        columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}__-${$('#group_by_approval_temp_json_table').val()}">${data[j]['verboseName']} -${$('#group_by_approval_temp_json_table').val()}</option>`
                                      }
                                      $(lastCard).find('select').empty()
                                      $(lastCard).find('select').append(`<option value="" disabled selected>Select Columns</option>`)
                                      $(lastCard).find('select').append(columnOptions)
                                      $(lastCard).find('select').each(function(){
    $(this).select2()
  })
                                    },
                                    error: function () {
                                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                    }
                                  })
                              }else{
                                var data = data.data
                                for (j in data) {
                                  columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
                                }
                              var lastCard = $('#group_by_action').find('.group_by_action_levels').find('.levels').eq(-1)
                                $(lastCard).find('select').empty()
                                $(lastCard).find('select').append(`<option value="" disabled selected>Select Columns</option>`)
                                $(lastCard).find('select').append(columnOptions)
                                $(lastCard).find('select').each(function(){
    $(this).select2()
  })
                              }
                            },
                            error: function () {
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                            }
                          })
                        }
                      $('#group_by_action').find('.group_by_action_levels')
                    }
                    function group_by_remove_content(obj){
                      $(obj).closest('.levels').remove()
                      var count = 0
                      $('#group_by_action').find('.group_by_action_levels').find('.levels').each(function(){
                        count++
                        $(this).find('p').text(`Level ${count}`)
                      })

                    }
                    function group_by_action_btn(obj){
                      var attrData = $(obj).attr('data-list')
                      var selectedTable = $('#selectTablePC').val()
                      if (attrData == ''|| attrData =='{}' || attrData == 'null'){
                        $.ajax({
                          url: window.location.pathname,

                          data: {
                            'operation': 'fecthing_verbose_name_group_by',
                            'model_name': selectedTable,
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            var columnOptions = ''
                            var data = data.data
                            for (j in data) {
                              columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
                            }
                            var lastCard = $('#group_by_action').find('.group_by_action_columns').find('select').eq(0)
                            $(lastCard).empty()
                            $(lastCard).append(columnOptions)
                            $(lastCard).select2()
                          },
                          error: function () {
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        })

                      }else{
                        group_by_action_reset()
                        var parsedAttrdata = JSON.parse(attrData)
                        $('#group_by_action').find('#group_by_action_checkbox').prop('checked',parsedAttrdata[selectedTable]['group_by_switch'])
                        if ('group_by_switch_user_configuration'in parsedAttrdata[selectedTable]){
                          $('#group_by_action').find('#group_by_action_checkbox_user_configuration').prop('checked',parsedAttrdata[selectedTable]['group_by_switch_user_configuration'])
                        }
                        if ($('#selectTemplate').val() =='Approval Template' && 'data-json-table' in parsedAttrdata[selectedTable]){
                          if (!parsedAttrdata[selectedTable]['group_by_switch']){
                            $('#group_by_approval_temp_json_table').attr('data-list',JSON.stringify(parsedAttrdata[selectedTable]))
                            $('#group_by_approval_temp_json_table').val(parsedAttrdata[selectedTable]['data-json-table']).trigger('change')
                          }else{
                            $('#group_by_action').find('.add_level').prop('disabled',true);
                            $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('select').eq(0).val([]).trigger('change');
                            $('#group_by_action').find('.group_by_action_columns').find('select').eq(0).prop('disabled',true);
                            $('#group_by_action').find('.group_by_approval_temp_div').find('select').prop('disabled',true);
                            $.ajax({
                              url: window.location.pathname,

                              data: {
                                'operation': 'fecthing_verbose_name_group_by',
                                'model_name': selectedTable,
                              },
                              type: "POST",
                              dataType: "json",
                              success: function (data) {
                                var columnOptions = ''
                                var data = data.data
                                for (j in data) {
                                  columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
                                }
                                var lastCard = $('#group_by_action').find('.group_by_action_columns').find('select').eq(0)
                                $(lastCard).empty()
                                $(lastCard).append(columnOptions)
                                $(lastCard).select2()
                              },
                              error: function () {
                                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                              }
                            })
                          }
                        }else{
                          if (!parsedAttrdata[selectedTable]['group_by_switch']){

                            $.ajax({
                              url: window.location.pathname,

                              data: {
                                'operation': 'fecthing_verbose_name_group_by',
                                'model_name': selectedTable,
                              },
                              type: "POST",
                              dataType: "json",
                              success: function (data) {
                                var count = 0
                                var columnOptions = ''
                                var data = data.data
                                for (j in data) {
                                  columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
                                }
                                for (let i in parsedAttrdata[selectedTable]['levels']){
                                var level2 = `<div class="levels">
                                  <p style="font-weight: bold;padding-top:1rem;">Level ${parseInt(count)+1}:</p>
                                  <div class="row">
                                    <div class="col-11">
                                      <select class="select2 form-control"></select>
                                    </div>
                                    <div class="col-1">
                                      <button type="button" class="btn btn-tool" onclick="group_by_remove_content(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                                    </div>
                                  </div>
                                  </div>
                                  `
                                $('#group_by_action').find('.group_by_action_levels').append(level2)
                                var lastCard = $('#group_by_action').find('.group_by_action_levels').find('.levels').eq(-1)
                                $(lastCard).find('select').empty()
                                $(lastCard).find('select').append(`<option value="" disabled selected>Select Columns</option>`)
                                $(lastCard).find('select').append(columnOptions)
                                $(lastCard).find('select').each(function(){
    $(this).select2()
  })
                                $(lastCard).find('select').val(parsedAttrdata[selectedTable]['levels'][i]).trigger('change')
                                count ++
                              }
                              },
                              error: function () {
                                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                              }
                            })

                          $.ajax({
                            url: window.location.pathname,

                            data: {
                              'operation': 'fecthing_verbose_name_group_by',
                              'model_name': selectedTable,
                            },
                            type: "POST",
                            dataType: "json",
                            success: function (data) {
                              var columnOptions = ''
                              $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation').remove()
                              var data = data.data
                              for (j in data) {
                                columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
                              }
                              var lastCard = $('#group_by_action').find('.group_by_action_columns').find('select').eq(0)
                              $(lastCard).empty()
                              $(lastCard).append(columnOptions)
                              $(lastCard).select2()
                              lastCard.val(parsedAttrdata[selectedTable]['selected_columns']).trigger('change')
                              for(let k in parsedAttrdata[selectedTable]['operations']){
                                $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('.operation').eq(k).find('select').val(parsedAttrdata[selectedTable]['operations'][k]).trigger('change')
                              }

                            },
                            error: function () {
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                            }
                          })

                        }else{
                          $('#group_by_action').find('.add_level').prop('disabled',true);
                          $('#group_by_action').find('.group_by_action_columns').find('.operation_div').find('select').eq(0).val([]).trigger('change');
                          $('#group_by_action').find('.group_by_action_columns').find('select').eq(0).prop('disabled',true);
                          $('#group_by_action').find('.group_by_approval_temp_div').find('select').prop('disabled',true);
                          $.ajax({
                            url: window.location.pathname,

                            data: {
                              'operation': 'fecthing_verbose_name_group_by',
                              'model_name': selectedTable,
                            },
                            type: "POST",
                            dataType: "json",
                            success: function (data) {
                              var columnOptions = ''
                              var data = data.data
                              for (j in data) {
                                columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
                              }
                              var lastCard = $('#group_by_action').find('.group_by_action_columns').find('select').eq(0)
                              $(lastCard).empty()
                              $(lastCard).append(columnOptions)
                              $(lastCard).select2()
                            },
                            error: function () {
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                            }
                          })
                        }
                        }
                      }

                      $('#group_by_action').find('select').each(function(){
    $(this).select2()
  })
                    }
                    var group_by_action_checkbox_user_configuration_count = 0
                    function group_by_action_add_table_multiple(tablename,selectedColumns,operations,user_config){
                      group_by_action_checkbox_user_configuration_count++
                      var content = (`
                        <div class="card collapsed-card masterfomatting" style="margin-top:10px;">
                          <div class="card-header row">
                            <div class="form-group col-7" style="display:flex; margin-bottom: 0px;">
                              <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the table:</p>
                              <div class="col-8">
                              <select class="select2 form-control columnNames" onchange="group_by_action_table_level_onchange_multiple(this)" style="margin-left: 5px;">
                                <option value="" disabled selected>Select table</option>
                              </select>
                                </div>
                              </div>
                                <div class="col-4">
                                  <div class="card-tools float-right">
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                                    <button type="button" class="btn btn-tool" onclick="formattingRemoveContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                                </div>
                              </div>
                          </div>
                          <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
                            <div style="margin-left: 21%;" class="custom-control custom-checkbox">
                              <input type="checkbox" name="group_by_action_checkbox_user_configuration${group_by_action_checkbox_user_configuration_count}" class="checkboxinput custom-control-input" id="group_by_action_checkbox_user_configuration${group_by_action_checkbox_user_configuration_count}">
                              <label for="group_by_action_checkbox_user_configuration${group_by_action_checkbox_user_configuration_count}" class="custom-control-label">User Configuration</label>
                            </div>
                            <div class="row">
                              <div class="col-12">
                                <div class="float-right" style="margin-right: 6px;">
                                  <button onclick="group_by_action_add_levels_multiple(this)" class="btn btn-primary add_level" type="button"><i class="fas fa-plus" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add Levels</button>
                                </div>
                              </div>
                            </div>

                            <div class="group_by_action_levels" style="margin-left: 1rem">
                              <hr style="height:2px;border-width:0;color:gray;background-color:gray">
                            </div>

                            <div class="group_by_action_columns" style="margin-left: 1rem;margin-top:1rem;">
                              <p style="font-weight: bold;">Select columns:</p>
                              <select class="select2 form-control" multiple onchange="group_by_action_columns_operation_multiple(this)"></select>
                              <div class="operation_div">
                              </div>
                            </div>



                          </div>
                          </div>
                        </div>
                        </div>
                        `)
                        $('#group_by_action').find('.group_by_action_tables').append(content)
                        var lastCard = $('#group_by_action').find('.group_by_action_tables').find('.masterfomatting').slice(-1)
                        var tables= $('#selectTablePC').val()
                        for (let i in tables){
                          $(lastCard).find('.columnNames').append(`<option value="${tables[i]}">${tables[i]}</option>`)
                        }
                        if (user_config != undefined){
                          $(lastCard).find('.checkboxinput').prop('checked',user_config)
                        }
                        $(lastCard).find('select').each(function(){
    $(this).select2()
  })
                        if (selectedColumns != undefined){
                          $(lastCard).find('.columnNames').attr('data-list',JSON.stringify(selectedColumns))
                        }
                        if (operations != undefined){
                          $(lastCard).find('.columnNames').eq(0).attr('data-list2',JSON.stringify(operations))
                        }
                        if (tablename!= undefined){
                          $(lastCard).find('.columnNames').val(tablename).trigger('change')
                        }
                    }
                    function group_by_action_add_levels_multiple(obj){
                      var card = $(obj).closest('.masterfomatting')
                      var count = $(card).find('.group_by_action_levels').find('.levels').length
                      if (count >= 5){
                        Swal.fire({text:"Max levels can be only 5",icon:"warning"})
                      }else{
                          var selectedTable = $(card).find('.columnNames').val()
                          $.ajax({
                            url: window.location.pathname,

                            data: {
                              'operation': 'fecthing_verbose_name_group_by',
                              'model_name': selectedTable,
                            },
                            type: "POST",
                            dataType: "json",
                            success: function (data) {
                              var count = $(card).find('.group_by_action_levels').find('.levels').length
                              var level2 = `<div class="levels">
                                <p style="font-weight: bold;padding-top:1rem;">Level ${count+1}:</p>
                                <div class="row">
                                  <div class="col-11">
                                    <select class="select2 form-control"></select>
                                  </div>
                                  <div class="col-1">
                                    <button type="button" class="btn btn-tool" onclick="group_by_remove_content_multiple(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                                  </div>
                                </div>
                              </div>
                              `
                              var columnOptions = ''
                              $(card).find('.group_by_action_levels').append(level2)
                              var data = data.data
                                for (j in data) {
                                  columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
                                }
                              var lastCard = $(card).find('.group_by_action_levels').find('.levels').eq(-1)
                              $(lastCard).find('select').empty()
                              $(lastCard).find('select').append(`<option value="" disabled selected>Select Columns</option>`)
                              $(lastCard).find('select').append(columnOptions)
                              $(lastCard).find('select').each(function(){
    $(this).select2()
  })
                            },
                            error: function () {
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                            }
                          })
                        }
                    }
                    function group_by_remove_content_multiple(obj){
                      var card = $(obj).closest('.group_by_action_levels')
                      $(obj).closest('.levels').remove()
                      var count = 0
                      $(card).find('.levels').each(function(){
                        count++
                        $(this).find('p').text(`Level ${count}`)
                      })

                    }
                    function group_by_action_table_level_onchange_multiple(obj){
                      var card = $(obj).closest('.masterfomatting')
                      var selectedTable = $(card).find('.columnNames').val()
                      $.ajax({
                        url: window.location.pathname,

                        data: {
                          'operation': 'fecthing_verbose_name_group_by',
                          'model_name': selectedTable,
                        },
                        type: "POST",
                        dataType: "json",
                        success: function (data) {
                          var columnOptions = ''
                          var data = data.data
                          for (j in data) {
                            columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
                          }
                          var lastCard = $(card).find('.group_by_action_columns').find('select').eq(0)
                          $(lastCard).empty()
                          $(lastCard).append(columnOptions)
                          $(lastCard).select2()
                          if ($(obj).attr('data-list')!= undefined){
                            var value = JSON.parse($(obj).attr('data-list'))
                            $(lastCard).val(value).trigger('change')
                          }
                          if ($(obj).attr('data-list2')!= undefined){
                            var value = JSON.parse($(obj).attr('data-list2'))
                            var operation = $(card).find('.group_by_action_columns').find('.operation_div').find('.operation')
                            for(let j = 0; j < operation.length; j++){
                              var singleOperation = $(card).find('.group_by_action_columns').find('.operation_div').find('.operation').eq(j)
                              $(singleOperation).find('select').val(value[j]).trigger('change')
                            }
                          }
                        },
                        error: function () {
                          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                        }
                      })
                    }
                    function group_by_action_columns_operation_multiple(obj){
                      var card = $(obj).closest('.masterfomatting')
                      var dict_a = {}
                      $(card).find('.group_by_action_columns').find('.operation_div').find('.operation').each(function(){
                        dict_a[$(this).find('p').attr('data-list')] = $(this).find('select').val()
                      })
                      $(card).find('.group_by_action_columns').find('.operation_div').find('.operation').remove()
                      var value = $(obj).val()
                      var optionvalues = []
                      if (value.length > 0){
                        for (let k in value){
                          var columnOptions = ``
                          var seldatatype = $(card).find('.group_by_action_columns').find('select').eq(0).find(`option[value='${value[k]}']`).attr('data-type')
                          if (!((seldatatype === 'IntegerField') || (seldatatype === 'BigIntegerField') || (seldatatype === 'FloatField') || (seldatatype === 'AutoField'))){
                            optionvalues = ['Count', 'Count Distinct', 'First', 'Last', 'Earliest','Latest','Value']
                          }else if (((seldatatype === 'IntegerField') || (seldatatype === 'BigIntegerField') || (seldatatype === 'FloatField') || (seldatatype === 'AutoField'))){
                            optionvalues = ['Sum', 'Count', 'Count Distinct', 'Average', 'Skewness', 'Kurtosis', 'Median', 'Variance', 'Standard Deviation', 'Minimum', 'Maximum', 'Percentage of Total','Value']
                          }
                          for (let i in optionvalues){
                            columnOptions += `
                            <option value="${optionvalues[i]}">${optionvalues[i]}</option>
                            `
                          }
                          var operation = `<div class="operation">
                            <p style="font-weight: bold;padding-top:1rem;" data-list="${value[k]}">Operation - ${value[k]}:</p>
                            <select class="select2 form-control">
                              <option value="----">----</option>
                              ${columnOptions}
                            </select>
                          </div>
                          `
                          $(card).find('.group_by_action_columns').find('.operation_div').append(operation)
                        }
                        $(card).find('.group_by_action_columns').find('.operation_div').find('.operation').each(function(){
                          if(dict_a.hasOwnProperty($(this).find('p').attr('data-list'))){
                            $(this).find('select').val(dict_a[$(this).find('p').attr('data-list')]).trigger('change')
                          }
                        })
                      }
                      $(card).find('.group_by_action_columns').find('.operation_div').find('.operation').find('select').each(function(){
    $(this).select2()
  })
                    }
                    function group_by_action_save_multiple(obj){
                      var values2 = {}
                      if (!$('#group_by_action').find('#group_by_action_checkbox').prop('checked')){
                        var cards = $('#group_by_action').find('.group_by_action_tables').find('.masterfomatting')
                        for(let j = 0; j < cards.length; j++){
                          var values ={}
                          var singelCard = $(cards).eq(j)
                          var levels = $(singelCard).find('.group_by_action_levels').find('.levels')
                          values['levels'] = []
                          for (let i = 0; i < levels.length; i++){
                            var singleLevel = $(singelCard).find('.group_by_action_levels').find('.levels').eq(i)
                            var levelName = singleLevel.find('p').text()
                            values['levels'].push($(singleLevel).find('select').val())
                          }
                          values['operations'] = []
                          var operation = $(singelCard).find('.group_by_action_columns').find('.operation_div').find('.operation')
                          for (let k = 0; k < operation.length; k++){
                            var singleOperation = $(singelCard).find('.group_by_action_columns').find('.operation_div').find('.operation').eq(k)
                            values['operations'].push($(singleOperation).find('select').val())
                          }
                          values['selected_columns'] = $(singelCard).find('.group_by_action_columns').find('select').eq(0).val()
                          values['group_by_switch_user_configuration'] = $(singelCard).find('.checkboxinput').prop('checked')
                          values2[$(singelCard).find('.columnNames').val()] = values
                        }
                        for (let i in values2){
                          values2[i]['group_by_switch'] = $('#group_by_action').find('#group_by_action_checkbox').prop('checked')
                        }
                      }else{
                        var values ={}
                        var cards = $('#group_by_action').find('.group_by_action_tables').find('.masterfomatting')
                        for(let j = 0; j < cards.length; j++){
                          var singelCard = $(cards).eq(j)
                          values['group_by_switch'] = $('#group_by_action').find('#group_by_action_checkbox').prop('checked')
                          values['group_by_switch_user_configuration'] = $(singelCard).find('.checkboxinput').prop('checked')
                        }
                      }
                      $('#group_by_action_btn_sub').attr('data-list',JSON.stringify(values2))
                      $('#subCategoryButtons').find('.fa-check-circle').eq(7).css('display','inline-block');
                    }
                    function group_by_action_reset_multiple(obj){
                      $('#group_by_action').find('.group_by_action_tables').find('.masterfomatting').remove()
                      $('#group_by_action_btn_sub').attr('data-list','')
                    }
                    function group_by_action_btn_multiple(obj){
                      var attrData = $(obj).attr('data-list')
                      var selectedTable = $('#selectTablePC').val()
                      if (attrData == ''|| attrData =='{}' || attrData == 'null'){

                      }else{
                        $('#group_by_action').find('.group_by_action_tables').find('.masterfomatting').remove()
                        var parsedAttrData = JSON.parse(attrData)
                        for (let i in parsedAttrData){
                          $.ajax({
                            url: window.location.pathname,

                            data: {
                              'operation': 'fecthing_verbose_name_group_by',
                              'model_name': i,
                            },
                            type: "POST",
                            dataType: "json",
                            success: function (data) {
                              group_by_action_add_table_multiple(i,parsedAttrData[i]['selected_columns'],parsedAttrData[i]['operations'],parsedAttrData[i]['group_by_switch_user_configuration'])
                              var card = $('#group_by_action').find('.group_by_action_tables').find('.masterfomatting').slice(-1)
                              var data = data.data
                              for(let k in parsedAttrData[i]['levels']){
                                var count = $(card).find('.group_by_action_levels').find('.levels').length
                                var level2 = `<div class="levels">
                                  <p style="font-weight: bold;padding-top:1rem;">Level ${count+1}:</p>
                                  <div class="row">
                                    <div class="col-11">
                                      <select class="select2 form-control"></select>
                                    </div>
                                    <div class="col-1">
                                      <button type="button" class="btn btn-tool" onclick="group_by_remove_content_multiple(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                                    </div>
                                  </div>
                                </div>
                                `
                                var columnOptions = ''
                                $(card).find('.group_by_action_levels').append(level2)
                                  for (j in data) {
                                    columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
                                  }
                                var lastCard = $(card).find('.group_by_action_levels').find('.levels').eq(-1)
                                $(lastCard).find('select').empty()
                                $(lastCard).find('select').append(`<option value="" disabled selected>Select Columns</option>`)
                                $(lastCard).find('select').append(columnOptions)
                                $(lastCard).find('select').each(function(){
    $(this).select2()
  })
                                $(lastCard).find('select').val(parsedAttrData[i]['levels'][k]).trigger('change')
                              }

                            },
                            error: function () {
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                            }
                          })
                        }
                      }
                    }
                    function card_view_save(obj){
                      var values ={}
                      $('#card_view_div').find('[data-css]').each(function(){
                        values[$(this).attr('data-css')] = $(this).val()
                      })
                      values['card-border-color-rgba'] = hexToRGB(values['card-border-color'],values['card-border-color-opacity'])
                      values['card-shadow-color-rgba'] = hexToRGB(values['card-shadow-color'],values['card-shadow-color-opacity'])
                      values['field-border-color-rgba'] = hexToRGB(values['field-border-color'],values['field-border-color-opacity'])
                      if (values['card-shadow-h-offset'] == ""){
                        values['card-shadow-h-offset'] = "0"
                      }
                      if (values['card-shadow-v-offset'] == ""){
                        values['card-shadow-v-offset'] = "0"
                      }
                      if (values['card-shadow-blur'] == ""){
                        values['card-shadow-blur'] = "0"
                      }
                      if (values['card-shadow-spread'] == ""){
                        values['card-shadow-spread'] = "0"
                      }


                      $('#card_view_sub_category').attr('data-list',JSON.stringify(values))
                    }
                    function cardViewLoadConfig(obj){
                      var attrData = $(obj).attr('data-list')
                      if (attrData != ''|| attrData !='{}' || attrData != 'null'){
                        var parsedAttrdata = JSON.parse(attrData)
                          $('#card_view_div').find('[data-css]').each(function(){
                            for (let i in parsedAttrdata){
                              if ($(this).attr('data-css') == i){
                                $(this).val(parsedAttrdata[i]).trigger('change')
                              }
                            }
                          })

                      }
                    }
                    function quickFilters_mul(obj){
                      $('#quick_filters_modal_id_mul').modal('show')
                      $('.dataTableModal_mul').modal('hide')
                      $('#dataTableModal').modal('hide')
                      var attrData = $(obj).attr('data-list')
                      if (attrData == ''|| attrData =='{}' || attrData == 'null'){

                      }else{
                        $('#quick_filters_modal_id').find('.modal-body').find('.quickFilters').find('.masterfomatting').remove()
                        var parsedAttrdata = JSON.parse(attrData)
                        for (let i in parsedAttrdata){
                          for (let k in parsedAttrdata[i]){
                            quickFiltersContent_mul(parsedAttrdata[i][k],k)
                          }
                        }
                      }
                    }
                    function quick_filters_modal_id_close_mul(obj){
                      $('#quick_filters_modal_id_mul').modal('hide')
                      $('.dataTableModal_mul').modal('show')
                      $('#dataTableModal').modal('show')
                    }
                    function quick_filters_modal_id_reset_mul(){
                      $('#quick_filters_modal_id_mul').find('.modal-body').find('.quickFilters').find('.masterfomatting').remove()
                      $('#quickFiltersBtn_mul').attr('data-list','')
                    }
                    function quick_filters_modal_id_save_mul(obj){
                      var filters = {}
                      var mainFilters = {}
                      var cards =  $('#quick_filters_modal_id_mul').find('.quickFilters').find('.masterfomatting')
                      for (let i = 0; i < cards.length; i++){
                        var singleCard = $('#quick_filters_modal_id_mul').find('.quickFilters').find('.masterfomatting').eq(i)

                        if ($(singleCard).find('.card-body').find('select').val() =='select_field'){
                          filters[$(singleCard).find('.card-header').find('select').val()] = {'filter':$(singleCard).find('.card-body').find('select').val(),'multiSelect':$(singleCard).find('.card-body').find('.checkboxinput').prop('checked')}
                        }else{
                          filters[$(singleCard).find('.card-header').find('select').val()] = {'filter':$(singleCard).find('.card-body').find('select').val()}
                        }
                      }
                      if (Object.keys(filters).length>0){
                        mainFilters[$('#selectTablePC').val()] = filters
                      }
                      $('#quickFiltersBtn_mul').attr('data-list',JSON.stringify(mainFilters))
                      $('#quick_filters_modal_id_mul').modal('hide')
                      $('.dataTableModal_mul').modal('show')
                      $('#dataTableModal').modal('show')
                    }
                    function quickFiltersContent_mul(dict_a,k){
                      var content = `
                      <div class="card collapsed-card masterfomatting" style="margin-top:10px;">
                        <div class="card-header row">
                          <div class="form-group col-9" style="display:flex; margin-bottom: 0px;">
                            <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the column:</p>
                            <div class="col-6">
                            <select class="select2 form-control columnNames" style="margin-left: 5px;" onchange="quickFilterChange(this)">
                              <option value="" disabled selected>Select column</option>
                            </select>
                              </div>
                            </div>
                              <div class="col-3">
                                <div class="card-tools float-right">
                                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                                  <button type="button" class="btn btn-tool" onclick="formattingRemoveContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                              </div>
                            </div>
                        </div>
                        <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">

                        </div>
                        </div>
                      </div>
                      </div>
                      `
                      var selectedTable = $('#selectTablePC').val()
                      var columnOptions = ''
                        $.ajax({
                          url: window.location.pathname,

                          data: {
                            'operation': 'formTableFields_title_row',
                            'tablesForm': JSON.stringify([selectedTable]),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            $('#quick_filters_modal_id_mul').find('.quickFilters').append(content)
                            var singleCard = $('#quick_filters_modal_id_mul').find('.quickFilters').find('.masterfomatting').slice(-1)
                            $(singleCard).find('.columnNames').empty()
                            $(singleCard).find('.columnNames').append(`<option value="" disabled selected>Select column</option>`)
                            for (let i in data.finalFieldList){
                              $(singleCard).find('.columnNames').append(`<option data-field="${data.finalFieldList[i]['fieldType']}" value="${data.finalFieldList[i]['fieldName']}">${data.finalFieldList[i]['verbose']}</option>`)
                            }
                            $(singleCard).find('.columnNames').select2()
                            if (k != undefined){
                              $(singleCard).find('.columnNames').val(k).trigger('change')
                              if (dict_a != undefined){
                                if (dict_a['filter'] == 'select_field'){
                                  $(singleCard).find('.card-body').find('select').val(dict_a['filter']).trigger('change')
                                  $(singleCard).find('.card-body').find('.checkboxinput').prop('checked',dict_a['multiSelect'])
                                }else{
                                  $(singleCard).find('.card-body').find('select').val(dict_a['filter']).trigger('change')
                                }

                              }
                            }

                          },
                          error: function () {
                            alert("Error");
                          }
                        })



                    }
                    function quickFilters(obj){
                      $('#quick_filters_modal_id').modal('show')
                      $('#dataTableModal').modal('hide')
                      var attrData = $(obj).attr('data-list')
                      if (attrData != ''|| attrData !='{}' || attrData != 'null'){
                        $('#quick_filters_modal_id').find('.modal-body').find('.quickFilters').find('.masterfomatting').remove()
                        var parsedAttrdata = JSON.parse(attrData)
                        for (let i in parsedAttrdata){
                          for (let k in parsedAttrdata[i]){
                            quickFiltersContent(parsedAttrdata[i][k],k)
                          }
                        }
                      }
                    }
                    function quick_filters_modal_id_close(obj){
                      $('#quick_filters_modal_id').modal('hide')
                      $('#dataTableModal').modal('show')
                    }
                    function quick_filters_modal_id_reset(obj){
                      $('#quick_filters_modal_id').find('.modal-body').find('.quickFilters').find('.masterfomatting').remove()
                      $('#quickFiltersBtn').attr('data-list','')
                    }
                    function quickFiltersContent(dict_a,k){
                      var content = `
                      <div class="card collapsed-card masterfomatting" style="margin-top:10px;">
                        <div class="card-header row">
                          <div class="form-group col-9" style="display:flex; margin-bottom: 0px;">
                            <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the column:</p>
                            <div class="col-6">
                            <select class="select2 form-control columnNames" style="margin-left: 5px;" onchange="quickFilterChange(this)">
                              <option value="" disabled selected>Select column</option>
                            </select>
                              </div>
                            </div>
                              <div class="col-3">
                                <div class="card-tools float-right">
                                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                                  <button type="button" class="btn btn-tool" onclick="formattingRemoveContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                              </div>
                            </div>
                        </div>
                        <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">

                        </div>
                        </div>
                      </div>
                      </div>
                      `
                      var selectedTable = $('#selectTablePC').val()
                      var columnOptions = ''
                        $.ajax({
                          url: window.location.pathname,

                          data: {
                            'operation': 'formTableFields_title_row',
                            'tablesForm': JSON.stringify([selectedTable]),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            $('#quick_filters_modal_id').find('.quickFilters').append(content)
                            var singleCard = $('#quick_filters_modal_id').find('.quickFilters').find('.masterfomatting').slice(-1)
                            $(singleCard).find('.columnNames').empty()
                            $(singleCard).find('.columnNames').append(`<option value="" disabled selected>Select column</option>`)
                            for (let i in data.finalFieldList){
                              if (data.finalFieldList[i]['use_seconds'] != null && data.finalFieldList[i]['use_seconds'] != ''){
                                $(singleCard).find('.columnNames').append(`<option data-field="${data.finalFieldList[i]['fieldType']}" data-sec="${data.finalFieldList[i]['use_seconds']}" value="${data.finalFieldList[i]['fieldName']}">${data.finalFieldList[i]['verbose']}</option>`)
                              }else{
                                $(singleCard).find('.columnNames').append(`<option data-field="${data.finalFieldList[i]['fieldType']}" value="${data.finalFieldList[i]['fieldName']}">${data.finalFieldList[i]['verbose']}</option>`)
                              }
                            }
                            $(singleCard).find('.columnNames').select2()
                            if (k != undefined){
                              $(singleCard).find('.columnNames').val(k).trigger('change')
                              if (dict_a != undefined){
                                if (dict_a['filter'] == 'select_field'){
                                  $(singleCard).find('.card-body').find('select').val(dict_a['filter']).trigger('change')
                                  $(singleCard).find('.card-body').find('.checkboxinput').prop('checked',dict_a['multiSelect'])
                                }else{
                                  $(singleCard).find('.card-body').find('select').val(dict_a['filter']).trigger('change')
                                }

                              }
                            }

                          },
                          error: function () {
                            alert("Error");
                          }
                        })



                    }
                    function quickFilterChange(obj){
                      var filterVal = $(obj).val()
                      var filterFieldType = $(obj).find(":selected").attr('data-field')
                      var card = $(obj).parent().parent().parent().parent()
                      $(card).find('.card-body').empty()
                      if (filterFieldType == 'CharField'){
                        $(card).find('.card-body').append(`
                        <div class="row">
                          <div class="col-6">
                            <p style="font-weight: bold;">Select filter type:</p>
                            <select class="select2 form-control" style="margin-left: 5px;" onchange="filterSelectChange(this)">
                              <option value="" disabled selected>Select filter</option>
                              <option value="select_field">Select field</option>
                            </select>
                          </div>
                        </div>
                        `)
                        $(card).find('.card-body').find('select').each(function(){
    $(this).select2()
  })
                      }else if(filterFieldType == 'DateField'){
                        $(card).find('.card-body').append(`
                        <div class="row">
                          <div class="col-6">
                            <p style="font-weight: bold;">Select filter type:</p>
                            <select class="select2 form-control" style="margin-left: 5px;" onchange="filterSelectChange(this)">
                              <option value="" disabled selected>Select filter</option>
                              <option value="DateField">Date Field</option>
                            </select>
                          </div>
                        </div>
                        `)
                        $(card).find('.card-body').find('select').each(function(){
    $(this).select2()
  })
                      }else if(filterFieldType == 'DateTimeField'){
                        $(card).find('.card-body').append(`
                        <div class="row">
                          <div class="col-6">
                            <p style="font-weight: bold;">Select filter type:</p>
                            <select class="select2 form-control" style="margin-left: 5px;" onchange="filterSelectChange(this)">
                              <option value="" disabled selected>Select filter</option>
                              <option value="DateTimeField" data-sec="${$(obj).find(":selected").attr('data-sec')}">Date Time Field</option>
                            </select>
                          </div>
                        </div>
                        `)
                        $(card).find('.card-body').find('select').each(function(){
    $(this).select2()
  })
                      }else if(filterFieldType == 'TimeField'){
                        $(card).find('.card-body').append(`
                        <div class="row">
                          <div class="col-6">
                            <p style="font-weight: bold;">Select filter type:</p>
                            <select class="select2 form-control" style="margin-left: 5px;" onchange="filterSelectChange(this)">
                              <option value="" disabled selected>Select filter</option>
                              <option value="TimeField" data-sec="${$(obj).find(":selected").attr('data-sec')}">Time Field</option>
                            </select>
                          </div>
                        </div>
                        `)
                        $(card).find('.card-body').find('select').each(function(){
    $(this).select2()
  })
                      }else if(filterFieldType == 'DateTimeRangeField'){
                        $(card).find('.card-body').append(`
                        <div class="row">
                          <div class="col-6">
                            <p style="font-weight: bold;">Select filter type:</p>
                            <select class="select2 form-control" style="margin-left: 5px;" onchange="filterSelectChange(this)">
                              <option value="" disabled selected>Select filter</option>
                              <option value="DateTimeRangeField">Date Time Range Field</option>
                            </select>
                          </div>
                        </div>
                        `)
                        $(card).find('.card-body').find('select').each(function(){
    $(this).select2()
  })
                      }else if(filterFieldType == 'DateRangeField'){
                        $(card).find('.card-body').append(`
                        <div class="row">
                          <div class="col-6">
                            <p style="font-weight: bold;">Select filter type:</p>
                            <select class="select2 form-control" style="margin-left: 5px;" onchange="filterSelectChange(this)">
                              <option value="" disabled selected>Select filter</option>
                              <option value="DateRangeField">Date Range Field</option>
                            </select>
                          </div>
                        </div>
                        `)
                        $(card).find('.card-body').find('select').each(function(){

    $(this).select2()
  })
                      }else if(filterFieldType == 'TimeRangeField'){
                        $(card).find('.card-body').append(`
                        <div class="row">
                          <div class="col-6">
                            <p style="font-weight: bold;">Select filter type:</p>
                            <select class="select2 form-control" style="margin-left: 5px;" onchange="filterSelectChange(this)">
                              <option value="" disabled selected>Select filter</option>
                              <option value="TimeRangeField">Time Range Field</option>
                            </select>
                          </div>
                        </div>
                        `)
                        $(card).find('.card-body').find('select').each(function(){

    $(this).select2()
  })
                      }else if(filterFieldType == 'IntegerField' || filterFieldType == 'BigIntegerField' || filterFieldType == 'FloatField'){
                        $(card).find('.card-body').append(`
                        <div class="row">
                          <div class="col-6">
                            <p style="font-weight: bold;">Select filter type:</p>
                            <select class="select2 form-control" style="margin-left: 5px;" onchange="filterSelectChange(this)">
                              <option value="" disabled selected>Select filter</option>
                              <option value="range_field">Range field</option>
                            </select>
                          </div>
                        </div>
                        `)
                        $(card).find('.card-body').find('select').each(function(){

    $(this).select2()
  })
                      }else if(filterFieldType == 'BooleanField'){
                        $(card).find('.card-body').append(`
                        <div class="row">
                          <div class="col-6">
                            <p style="font-weight: bold;">Select filter type:</p>
                            <select class="select2 form-control" style="margin-left: 5px;" onchange="filterSelectChange(this)">
                              <option value="" disabled selected>Select filter</option>
                              <option value="booleanField">Boolean field</option>
                            </select>
                          </div>
                        </div>
                        `)
                        $(card).find('.card-body').find('select').each(function(){

    $(this).select2()
  })
                      }
                      else{
                        $(card).find('.card-body').append(`
                        <div class="row">
                          <div class="col-6">
                            <p style="font-weight: bold;">Select filter type:</p>
                            <select class="select2 form-control" style="margin-left: 5px;" onchange="filterSelectChange(this)">
                              <option value="" disabled selected>Select filter</option>
                              <option value="select_field">Select field</option>
                            </select>
                          </div>
                        </div>
                        `)
                        $(card).find('.card-body').find('select').each(function(){

    $(this).select2()
  })
                      }
                    }
                    var quickFiltersmultiSelectCheckbox = 0
                    function filterSelectChange(obj){
                      quickFiltersmultiSelectCheckbox++
                      $(obj).parent().next().remove()
                      if ($(obj).val() =='select_field'){
                        $(obj).parent().parent().append(`
                        <div class="col-6">
                          <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="checkboxinput custom-control-input" id="multiSelectCheckbox${quickFiltersmultiSelectCheckbox}">
                            <label for="multiSelectCheckbox${quickFiltersmultiSelectCheckbox}" class="custom-control-label">
                              Multi Select
                            </label>
                          </div>
                        </div>
                        `)
                      }
                    }
                    function quick_filters_modal_id_save(obj){
                      var filters = {}
                      var mainFilters = {}
                      var cards =  $('#quick_filters_modal_id').find('.quickFilters').find('.masterfomatting')
                      for (let i = 0; i < cards.length; i++){
                        var singleCard = $('#quick_filters_modal_id').find('.quickFilters').find('.masterfomatting').eq(i)
                        if ($(singleCard).find('.card-body').find('select').val() =='select_field'){
                          filters[$(singleCard).find('.card-header').find('select').val()] = {'filter':$(singleCard).find('.card-body').find('select').val(),'multiSelect':$(singleCard).find('.card-body').find('.checkboxinput').prop('checked')}
                        }else if ($(singleCard).find('.card-body').find('select').val() =='TimeField'){
                          filters[$(singleCard).find('.card-header').find('select').val()] = {'filter':$(singleCard).find('.card-body').find('select').val(),'use_sec':$(singleCard).find('.card-body').find('select').find(":selected").attr('data-sec')}
                        }else if ($(singleCard).find('.card-body').find('select').val() =='DateTimeField'){
                          filters[$(singleCard).find('.card-header').find('select').val()] = {'filter':$(singleCard).find('.card-body').find('select').val(),'use_sec':$(singleCard).find('.card-body').find('select').find(":selected").attr('data-sec')}
                        }else{
                          filters[$(singleCard).find('.card-header').find('select').val()] = {'filter':$(singleCard).find('.card-body').find('select').val()}
                        }
                      }
                      if (Object.keys(filters).length>0){
                        mainFilters[$('#selectTablePC').val()] = filters
                      }
                      $('#quickFiltersBtn').attr('data-list',JSON.stringify(mainFilters))
                      $('#quick_filters_modal_id').modal('hide')
                      $('#dataTableModal').modal('show')
                    }
                    function quickFilters_multiple(obj){
                      $('#quick_filters_modal_id').modal('show')
                      $('#dataTableModal').modal('hide')
                      var attrData = $(obj).attr('data-list')
                      if (attrData == ''|| attrData =='{}' || attrData == 'null'){

                      }else{
                        $('#quick_filters_modal_id').find('.modal-body').find('.quickFilters').find('.masterfomatting').remove()
                        var parsedAttrdata = JSON.parse(attrData)
                        for (let i in parsedAttrdata){
                          for (let k in parsedAttrdata[i]){
                            quickFiltersContent_multiple(parsedAttrdata[i][k],k,i)
                          }
                        }
                      }

                    }
                    function quickFiltersContent_multiple(dict_a,k,p){
                      var content = `
                      <div class="card collapsed-card masterfomatting" style="margin-top:10px;">
                        <div class="card-header row">
                          <div class="form-group col-7" style="display:flex; margin-bottom: 0px;">
                            <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select Table:</p>
                          <div class="col-10" style="margin-left:15px;">
                          <select class="select2 form-control tableNames" style="margin-left: 5px;" onchange="quickFiltersColumnContent(this)">
                            <option value="" disabled selected>Select Table</option>
                          </select>
                          </div>
                        </div>
                        <div class="form-group col-7" style="display:flex; margin-bottom: 0px;">
                          <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select Column:</p>
                          <div class="col-10">
                          <select class="select2 form-control columnNames"  style="margin-left: 5px;" onchange="quickFilterChange(this)">
                            <option value="" disabled selected>Select Columns</option>
                          </select>
                          </div>
                        </div>
                              <div class="col-5">
                                <div class="card-tools float-right">
                                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                                  <button type="button" class="btn btn-tool" onclick="formattingRemoveContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                              </div>
                            </div>
                        </div>
                        <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">

                        </div>
                        </div>
                      </div>
                      </div>
                      `
                      $('#quick_filters_modal_id').find('.quickFilters').append(content)
                      var lastCard = $('#quick_filters_modal_id').find('.quickFilters').find('.masterfomatting').slice(-1)
                      var tables = $('#selectTablePC').val()
                      $(lastCard).find('.tableNames').empty()
                      $(lastCard).find('.tableNames').append(`<option value="" disabled selected>Select Table</option>`)
                      for (let i in tables){
                        $(lastCard).find('.tableNames').append(`<option value="${tables[i]}">${tables[i]}</option>`)
                      }
                      $(lastCard).find('select').each(function(){
    $(this).select2()
  })
                      if (p!= undefined){
                        $(lastCard).find('.tableNames').val(p).trigger('change')
                      }
                      if (k!= undefined){
                        $(lastCard).find('.columnNames').attr('data-val',k)
                      }
                      if (dict_a!= undefined){
                        $(lastCard).find('.columnNames').attr('data-dict',JSON.stringify(dict_a))
                      }
                    }
                    function quickFiltersColumnContent(obj){
                      var columnSelect =  $(obj).parent().parent().parent().find('.columnNames')
                      var selectedTable = $(obj).val()
                      var columnOptions = ''
                        $.ajax({
                          url: window.location.pathname,

                          data: {
                            'operation': 'formTableFields_title_row',
                            'tablesForm': JSON.stringify([selectedTable]),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            columnSelect.empty()
                            columnSelect.append(`<option value="" disabled selected>Select column</option>`)
                            for (let i in data.finalFieldList){
                              columnSelect.append(`<option data-field="${data.finalFieldList[i]['fieldType']}" value="${data.finalFieldList[i]['fieldName']}">${data.finalFieldList[i]['verbose']}</option>`)
                            }
                            columnSelect.select2()
                            if (columnSelect.attr('data-val')!= undefined){
                              columnSelect.val(columnSelect.attr('data-val')).trigger('change')
                            }
                            if (columnSelect.attr('data-dict')!= undefined){
                              var dict_a = JSON.parse(columnSelect.attr('data-dict'))
                              if (dict_a['filter'] == 'select_field'){
                                $(obj).parent().parent().parent().parent().find('.card-body').find('select').val(dict_a['filter']).trigger('change')
                                $(obj).parent().parent().parent().parent().find('.card-body').find('.checkboxinput').prop('checked',dict_a['multiSelect'])
                              }else{
                                $(obj).parent().parent().parent().parent().find('.card-body').find('select').val(dict_a['filter']).trigger('change')
                              }
                            }

                          },
                          error: function () {
                            alert("Error");
                          }
                        })
                    }
                    function quick_filters_modal_id_save_multiple(obj){
                      var mainFilters = {}
                      var cards =  $('#quick_filters_modal_id').find('.quickFilters').find('.masterfomatting')
                      for (let i = 0; i < cards.length; i++){
                        var filters = {}
                        var singleCard = $('#quick_filters_modal_id').find('.quickFilters').find('.masterfomatting').eq(i)
                        if ($(singleCard).find('.card-body').find('select').val() =='select_field'){
                          filters[$(singleCard).find('.card-header').find('.columnNames').val()] = {'filter':$(singleCard).find('.card-body').find('select').val(),'multiSelect':$(singleCard).find('.card-body').find('.checkboxinput').prop('checked')}
                        }else{
                          filters[$(singleCard).find('.card-header').find('.columnNames').val()] = {'filter':$(singleCard).find('.card-body').find('select').val()}
                        }
                        if ($(singleCard).find('.card-header').find('.tableNames').val() in mainFilters){
                          Object.assign(mainFilters[$(singleCard).find('.card-header').find('.tableNames').val()] , filters)
                        }else{
                          Object.assign(mainFilters, {[$(singleCard).find('.card-header').find('.tableNames').val()]:filters})
                        }
                      }
                      $('#quickFiltersBtn').attr('data-list',JSON.stringify(mainFilters))
                      $('#quick_filters_modal_id').modal('hide')
                      $('#dataTableModal').modal('show')
                    }
                    function saveButtonsGroupedTogether(obj){
                      var values = {}
                      var moreValues = {}
                      moreValues['dropDown'] = $('#buttonsGroupedTogetherDiv').find('select').val()
                      moreValues['dropDowntext'] = $('#buttonsGroupedTogetherDiv').find('.textinput').val()
                      values[$('#selectTablePC').val()] = moreValues
                      $('#buttonsGroupedTogether').attr('data-list',JSON.stringify(values))
                    }
                    function buttonsGroupedTogetherClick(obj){
                      $('#buttonsGroupedTogetherDiv').find('select').each(function(){
    $(this).select2()
  })
                      var attrData = $(obj).attr('data-list')
                      if (attrData == ''|| attrData =='{}' || attrData == 'null'){
                        $('#buttonsGroupedTogetherDiv').find('select').val([]).trigger('change')
                      $('#buttonsGroupedTogetherDiv').find('.textinput').val('Buttons drop down').trigger('change')
                      }else{
                        var parsedAttrdata = JSON.parse(attrData)
                        $('#buttonsGroupedTogetherDiv').find('select').val(parsedAttrdata[$('#selectTablePC').val()]['dropDown']).trigger('change')
                        $('#buttonsGroupedTogetherDiv').find('.textinput').val(parsedAttrdata[$('#selectTablePC').val()]['dropDowntext']).trigger('change')
                      }
                    }
                    function resetButtonsGroupedTogether(obj){
                      event.preventDefault()
                      $('#buttonsGroupedTogether').attr('data-list','')
                      $('#buttonsGroupedTogetherDiv').find('select').val([]).trigger('change')
                      $('#buttonsGroupedTogetherDiv').find('.textinput').val('Buttons drop down').trigger('change')
                    }
                    function Pagination(obj){
                      $("#paginationDiv").css("display","block");
                      $("#paginationSelect").select2({'tags':true})
                      let list = []
                      let list1 = [];
                      list = [
                        '1', '5', '10', '25', '50', '75', '100', 'All'
                      ]
                      if([null,undefined].includes($("#pagination").attr("data-list"))){
                        list1 = list;
                      } else {
                        if(!($("#pagination").attr("data-list")).includes("[")){
                          list1 = list;
                        } else {
                          list1 = JSON.parse($("#pagination").attr("data-list"));
                          for(let i in list1){
                            if((list.includes(list1[i]))){
                            } else{
                              list.push(list1[i]);
                            }
                          }
                        }
                      }
                      $("#paginationSelect").empty();
                      for(let i in list){
                        $("#paginationSelect").append(`<option value="${list[i]}">${list[i]}</option>`)
                      }
                      $("#paginationSelect").val(list1).trigger("change")
                    }
                    function Pagination_mul(obj){
                      $("#paginationDiv_mul").css("display","block");
                      $("#paginationSelect_mul").select2({'tags':true})
                      let list = []
                      let list1 = [];
                      list = [
                        '1', '5', '10', '25', '50', '75', '100', 'All'
                      ]
                      if([null,undefined].includes($("#pagination_mul").attr("data-list"))){
                        list1 = list;
                      } else {
                        if(!($("#pagination_mul").attr("data-list")).includes("[")){
                          list1 = list;
                        } else {
                          list1 = JSON.parse($("#pagination_mul").attr("data-list"));
                          for(let i in list1){
                            if((list.includes(list1[i]))){
                            } else{
                              list.push(list1[i]);
                            }
                          }
                        }
                      }
                      $("#paginationSelect_mul").empty();
                      for(let i in list){
                        $("#paginationSelect_mul").append(`<option value="${list[i]}">${list[i]}</option>`)
                      }
                      $("#paginationSelect_mul").val(list1).trigger("change")
                    }


                    $('#action_btn_config_group_together').change(function () {
                      if (this.checked == true){
                        if ($('#selectTemplate').val() == 'Multiple table'){
                          $('#configure_actionbuttonid_multiple').attr('data-list','');
                          $('#configure_actionbuttonid_multiple').css('display','none');
                          $('#configure_action_column_id').css('display','block');
                          $('.listview_actionSubElements').find('#div_id_active').find('[name="PDF Action Button"]').prop('disabled',true);
                        }else{
                          $('#configure_actionbuttonid').attr('data-list','');
                          $('#configure_actionbuttonid').css('display','none');
                          $('#configure_action_column_id').css('display','block');
                          $('.listview_actionSubElements').find('#div_id_active').find('[name="PDF Action Button"]').prop('disabled',false);
                        }

                      }else{
                        if ($('#selectTemplate').val() == 'Multiple table'){
                          $('#configure_actionbuttonid_multiple').css('display','block');
                          $('#configure_action_column_id').attr('data-list','');
                          $('#configure_action_column_id').css('display','none');
                          $('.listview_actionSubElements').find('#div_id_active').find('[name="PDF Action Button"]').prop('disabled',true);
                        }else{
                          $('#configure_actionbuttonid').css('display','block');
                          $('#configure_action_column_id').attr('data-list','');
                          $('#configure_action_column_id').css('display','none');
                          $('.listview_actionSubElements').find('#div_id_active').find('[name="PDF Action Button"]').prop('disabled',true);
                        }

                      }
                   });
                   function configureActionColumnMultiple(obj){
                    $('#dataTableModal').modal('hide')
                    $('#action_column_modal_id').modal('show')
                    var attrData = $(obj).attr('data-list')
                    if (attrData == ''|| attrData =='{}' || attrData == 'null'){

                    }else{
                      var parsedAttrdata = JSON.parse(attrData)
                      for (let i in parsedAttrdata){
                        contentActionColumnMultiple()
                        var singleCard = $('#action_column_modal_id').find('.modal-body').find('.masterfomatting').slice(-1)
                        $(singleCard).find('.columnNames').val(i).trigger('change')
                        $(singleCard).find('.textinput').val(parsedAttrdata[i]['columnHeader']).trigger('change')
                        $(singleCard).find('.checkboxinput').prop('checked',parsedAttrdata[i]['elipsesTrigger'])
                      }
                    }
                   }
                   var contentActionColumnMultipleCheckBoxInput = 0
                   function contentActionColumnMultiple(obj){
                    contentActionColumnMultipleCheckBoxInput++
                    var content = `
                    <div class="card collapsed-card masterfomatting" style="margin-top:10px;">
                      <div class="card-header row">
                        <div class="form-group col-7" style="display:flex; margin-bottom: 0px;">
                          <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the table:</p>
                          <div class="col-8">
                          <select class="select2 form-control columnNames" style="margin-left: 5px;">
                            <option value="" disabled selected>Select table</option>
                          </select>
                            </div>
                          </div>
                            <div class="col-4">
                              <div class="card-tools float-right">
                                <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                                <button type="button" class="btn btn-tool" onclick="formattingRemoveContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                            </div>
                          </div>
                      </div>
                      <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
                        <div class="row">
                          <div class="col-6">
                              <p style="font-weight: bold;">Header of column:</p>
                              <input type="text" data-css="text" class="textinput textInput form-control "></div>
                              <div class="form-group col-6">
                                <div class="custom-control custom-checkbox">
                                  <input type="checkbox" id="elipses_trigger${contentActionColumnMultipleCheckBoxInput}" class="checkboxinput custom-control-input">
                                  <label for="elipses_trigger${contentActionColumnMultipleCheckBoxInput}" class="custom-control-label">
                                    Elipses Trigger
                                  </label>
                                </div>
                            </div>
                            </div>
                      </div>
                      </div>
                    </div>
                    </div>
                    `
                    $('#action_column_modal_id').find('.modal-body').append(content)
                    var singleCard = $('#action_column_modal_id').find('.modal-body').find('.masterfomatting').slice(-1)
                    var tables = $('#selectTablePC').val()
                    $(singleCard).find('.columnNames').empty()
                    $(singleCard).find('.columnNames').append(`<option value="" disabled="" selected="">Select table</option>`)
                    for (let i in tables){
                      $(singleCard).find('.columnNames').append(`<option value="${tables[i]}">${tables[i]}</option>`)
                    }
                    $(singleCard).find('.columnNames').select2()
                   }
                   function action_column_modal_id_save_multiple(obj){
                      var values ={}
                      var cards = $('#action_column_modal_id').find('.modal-body').find('.masterfomatting')
                      for (let i = 0; i < cards.length; i++) {
                        var singleCard = $('#action_column_modal_id').find('.modal-body').find('.masterfomatting').eq(i)
                        values[$(singleCard).find('.columnNames').val()] = {'columnHeader':$(singleCard).find('.textinput').val(),'elipsesTrigger':$(singleCard).find('.checkboxinput').prop('checked')}
                      }
                      $('#configure_action_column_id').attr('data-list',JSON.stringify(values))
                      $('#dataTableModal').modal('show')
                      $('#action_column_modal_id').modal('hide')
                   }
                   function action_column_modal_id_reset_multiple(obj){
                    $('#dataTableModal').modal('show')
                    $('#action_column_modal_id').modal('hide')
                    $('#configure_action_column_id').attr('data-list','')
                    $('#action_column_modal_id').find('.modal-body').find('.masterfomatting').remove()
                   }
                   function action_column_modal_id_close(obj){
                    $('#dataTableModal').modal('show')
                    $('#action_column_modal_id').modal('hide')
                  }
                   function populateButtonDropdownMultipleContent(obj)  {
                    return(`
                      <div class="card collapsed-card masterfomatting" style="margin-top:10px;">
                        <div class="card-header row">
                          <div class="form-group col-7" style="display:flex; margin-bottom: 0px;">
                            <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the table:</p>
                            <div class="col-8">
                            <select class="select2 form-control columnNames" onchange="buttonDropdownMultipleOnChange(this)" style="margin-left: 5px;">
                              <option value="" disabled selected>Select table</option>
                            </select>
                              </div>
                            </div>
                              <div class="col-4">
                                <div class="card-tools float-right">
                                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                                  <button type="button" class="btn btn-tool" onclick="formattingRemoveContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                              </div>
                            </div>
                        </div>
                        <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
                          <div class="columnHeaders">
                            <p style="font-weight: bold;">Select buttons to add in drop down :</p>
                            <select class="buttons-select" multiple>
                              <option value="uploadButton">Upload</option>
                              <option value="saveTemplateButton">Save Template</option>
                              <option value="example1_expand">Expand</option>
                              <option value="plotCharts">Plot Chart</option>
                              <option value="setAlertBtn">Set alert</option>
                              <option value="filter_button_list_view">Filter</option>
                              <option value="saveEditListView">Save Edited Data</option>
                              <option value="editListView">Edit Mode</option>
                              <option value="tablegenerator_">Paste tabular data</option>
                              <option value="listview_clearall_">Delete all data</option>
                              <option value="find_replace_">Find and replace</option>
                              <option value="freeze_pane_">Freeze Panes</option>
                              <option value="extract_data_">Extract Data</option>
                              <option value="formatter_">Formatters</option>
                              <option value="showTransactions">View Transaction Status</option>
                              <option value="addComp_field_">Add Computed Fields</option>
                              <option value="bulk_update">Bulk Update</option>
                              <option value="conditional_delete">Conditional Delete</option>
                              <option value="multiple_delete_perm">Delete Multiple(Permanent)</option>
                              <option value="multiple_delete_temp">Delete Multiple(Temporary)</option>
                              <option value="approve_all_ApprovalTemplate">Approve all</option>
                              <option value="reject_all_ApprovalTemplate">Reject all</option>
                              <option value="multiple_approve">Approve Multiple</option>
                              <option value="multiple_reject">Reject Multiple</option>
                            </select>
                            <p style="font-weight: bold;">Text for dropdown button:</p>
                            <input type="text" class="textinput textInput form-control buttons-text ">
                          </div>
                        </div>
                        </div>
                      </div>
                      </div>
                      `)
                   }
                   function populateButtonDropdownMultiple(obj){
                    var content = populateButtonDropdownMultipleContent()
                    $('#buttonsGroupedTogetherDiv').find('.buttons-dropdown-body').append(content)
                    var singleCard = $('#buttonsGroupedTogetherDiv').find('.buttons-dropdown-body').find('.masterfomatting').slice(-1)
                    for (let i in $('#selectTablePC').val()){
                      $(singleCard).find('.columnNames').append(`<option value="${$('#selectTablePC').val()[i]}">${$('#selectTablePC').val()[i]}</option>`)
                    }
                    $(singleCard).find('select').each(function(){
    $(this).select2()
  })
                   }
                   function buttonsGroupedTogetherClickMultiple(obj){
                      $('#buttonsGroupedTogetherDiv').find('.buttons-dropdown-body').find('.masterfomatting').remove()
                      var attrData = $(obj).attr('data-list')
                      if (attrData == ''|| attrData =='{}' || attrData == 'null'){

                      }else{
                        var parsedAttrdata = JSON.parse(attrData)
                        for (let i in parsedAttrdata){
                          populateButtonDropdownMultiple()
                          var lastCard = $('#buttonsGroupedTogetherDiv').find('.buttons-dropdown-body').find('.masterfomatting').slice(-1)
                          $(lastCard).find('.columnNames').val(i).trigger('change')
                          $(lastCard).find('.buttons-select').val(parsedAttrdata[i]['dropDown']).trigger('change')
                          $(lastCard).find('.textinput').val(parsedAttrdata[i]['dropDowntext']).trigger('change')
                        }
                      }
                      $('#buttonsGroupedTogetherDiv').find('select').each(function(){
    $(this).select2()
  })
                   }
                   function buttonDropdownMultipleOnChange(obj){
                    var singelCard = $(obj).parent().parent().parent().parent()
                    $(singelCard).find('.textinput').val('Buttons drop down').trigger('change')
                   }
                   function saveButtonsGroupedTogetherMultiple(obj){
                    var values = {}
                    var cards = $('#buttonsGroupedTogetherDiv').find('.buttons-dropdown-body').find('.masterfomatting')
                    for (let i = 0; i < cards.length; i++) {
                      var values2 = {}
                      var singleCard = $('#buttonsGroupedTogetherDiv').find('.buttons-dropdown-body').find('.masterfomatting').eq(i)
                      var selectedTable =  $(singleCard).find('.columnNames').val()
                      values2['dropDown'] = $(singleCard).find('.buttons-select').val()
                      values2['dropDowntext'] = $(singleCard).find('.textinput').val()
                      if (selectedTable in values){
                        Object.assign(values[selectedTable], values2)
                      }else{
                        Object.assign(values, {[selectedTable]:values2})
                      }
                    }
                    $('#buttonsGroupedTogether').attr('data-list',JSON.stringify(values))
                   }
                    var styllingActionButtonContentIndex = 0
                    function contentConfigureAction(){
                      styllingActionButtonContentIndex++
                      return(`
                        <div class="card collapsed-card multipleJs masterstyling" id="masterstylingactionbuttons${styllingActionButtonContentIndex}" style="margin-left:-12px;margin-right: -12px;">
                          <div class="card-header row">
                            <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
                              <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the Button:</p>
                              <div class="col-4">
                              <select class="select2 form-control selectButtonsOptions" onchange="actionButtonsSelectedButtonName(this)" style="margin-left: 5px;">
                                <option value="" disabled selected>Select Button</option>
                                </select>
                                </div>
                              </div>
                                <div class="col-2">
                                  <div class="card-tools float-right">
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                                    <button type="button" class="btn btn-tool" onclick="uploadRemoveEditButtonContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                                </div>
                              </div>
                          </div>
                          <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
                            <div class="row" style="padding-left: 15px;">
                              <div class="col-4">
                                <p style="font-weight: bold;">Text of button:</p>
                                <input type="text"  data-css="text" class="textinput textInput form-control ">
                              </div>
                              <div class="col-4">
                                  <p style="font-weight: bold;">Select text color:</p>
                                  <input type="color" value="#ffffff" class="form-control" data-css="color">
                              </div>
                              <div class="col-4">
                                  <p style="font-weight: bold;">Select background color:</p>
                                  <div class="input-group">
                                    <input type="color" value="#565a5e" class="form-control " data-css="background-color">
                                    <select class="select2 form-control" data-css="opacity" >
                                      <option value="1" selected >None</option>
                                      <option value="0.9">0.9</option>
                                      <option value="0.8">0.8</option>
                                      <option value="0.7">0.7</option>
                                      <option value="0.8">0.8</option>
                                      <option value="0.7">0.7</option>
                                      <option value="0.6">0.6</option>
                                      <option value="0.5">0.5</option>
                                      <option value="0.4">0.4</option>
                                      <option value="0.3">0.3</option>
                                      <option value="0.2">0.2</option>
                                      <option value="0.1">0.1</option>
                                      <option value="0">0</option>
                                    </select>
                                </div>
                              </div>
                            </div>
                            <div class="row" style="padding-left: 15px; padding-top:15px;">
                                <div class="col-4" >
                                <p style="font-weight: bold;">Select border type:</p>
                                <select class="select2 form-control" data-css="border-style" >
                                    <option value="none">No border</option>
                                    <option value="dotted" >Dotted</option>
                                    <option value="dashed" >Dashed</option>
                                    <option value="solid" >Solid</option>
                                    <option value="double" >Double</option>
                                    <option value="groove" >Groove</option>
                                    <option value="ridge" >Ridge</option>
                                    <option value="inset" >Inset</option>
                                    <option value="outset" >Outset</option>
                                    <option value="dotted dashed solid double" >Dotted dashed solid double</option>
                                </select>
                                </div>
                                <div class="col-4">
                                <p style="font-weight: bold;">Select border width:</p>
                                <div class="input-group">
                                    <input type="float" class="form-control" data-css="border-width" >
                                    <select class="select2 form-control" data-css="border-measure">
                                      <option value="">None</option>
                                      <option value="px">px</option>
                                    </select>
                                </div>
                                </div>
                                <div class="col-4">
                                  <p style="font-weight: bold;">Select border color:</p>
                                  <input type="color" class="form-control" data-css="border-color" >
                                </div>
                            </div>
                            <div class="row" style="padding-left: 15px; padding-top:15px;">
                              <div class="col-4" >
                                <p style="font-weight: bold;">Select icon to add:</p>
                                <button class="btn btn-primary moreIconActionButtons" type="button" onclick="iconsPackMoreIcons(this)" data-list="">
                                  Icon Selector
                                </button>

                              </div>
                              <div class="col-4">
                                <p style="font-weight: bold;">Select icon color:</p>
                                <input type="color" value="#ffffff" class="form-control" data-css="icon-color">
                              </div>
                              <div class="col-4" >
                                <p style="font-weight: bold;">Select button size:</p>
                                <select class="select2 form-control" data-css="font-size">
                                  <option value="none">Normal</option>
                                  <option value="10px">Xtra small</option>
                                  <option value="12px">Small</option>
                                  <option value="16px">Medium</option>
                                  <option value="20px">Large</option>
                                  <option value="24px">Xtra large</option>
                                </select>
                              </div>

                            </div>
                            <div class="row" style="padding-left: 15px; padding-top:15px;">
                              <div class="col-4">
                                <p style="font-weight: bold;">Select hover action:</p>
                                <select class="select2 form-control" onchange="computationhoverOptionsEditButton(this)" data-css="hoveractions">
                                  <option value="none">No Effect</option>
                                  <option value="Color">Color</option>
                                  <option value="Gradient">Gradient</option>
                                  <option value="textsize">Text-size</option>
                                </select>
                              </div>
                              <div class="col-4">
                                <p style="font-weight: bold;">Column header:</p>
                                <input type="text"  data-css="column-header" class="textinput textInput form-control ">
                              </div>
                          </div>
                          <div class="row hoverButton" style="padding-left: 15px; padding-top:15px; width: 100%; display: flex;">

                          </div>
                          </div>
                        </div>
                        </div>`)
                    }
                    function resetActionButtons(obj){
                      $('#actionButtonsConfigurationModal').find('.modal-body').find('.masterstyling').remove()
                      $('#actionButtonsConfigurationModal').find('#actionBtnOrder').attr('data-list','')
                      var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record']`).prop('checked')
                        var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
                        var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
                        var viewRecord = $('.listview_actionSubElements').find(`[id='View Record']`).prop('checked')
                        var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
                        $('#actionButtonsConfigurationModal').find('.sortable-order').empty()
                        for (let i in actionBtn){
                          if (actionBtn[i]== true){
                            $('#actionButtonsConfigurationModal').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${i}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${i}</li>`);
                          }
                        }
                        $.ajax({
                          url: window.location.pathname,
                          data: { 'model_name': $('#selectTablePC').val(), 'operation': 'fecthing_verbose_name_action_config' },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            var listColumns = data.columns__dict
                            for (let [key, value] of Object.entries(listColumns)){
                              $('#actionButtonsConfigurationModal').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${key}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${value}</li>`);
                            }
                            $('#actionButtonsConfigurationModal').find('.sortable-order').sortable()

                          },
                          error: function () {
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        })
                    }
                    function saveColumnOrderActionButtons(obj){
                      var columnOrderDict = []
                      $('#actionButtonsConfigurationModal').find(".sortable-order").children().each(function() {
                        columnOrderDict.push($(this).attr("name"))
                      })
                      $('#actionButtonsConfigurationModal').find('#actionBtnOrder').attr('data-list',JSON.stringify(columnOrderDict))
                    }
                    function actionButtonsSelectedButtonName(obj){
                      $(obj).parent().parent().parent().parent().find('[data-css]').eq(0).val($(obj).find("option:selected").text()).trigger('change')
                      $(obj).parent().parent().parent().parent().find(`[data-css='column-header']`).val($(obj).find("option:selected").text()).trigger('change')
                    }
                    function populateActionButtons(obj){
                      var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record']`).prop('checked')
                      var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
                      var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
                      var viewRecord = $('.listview_actionSubElements').find(`[id='View Record']`).prop('checked')
                      var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
                      var content = contentConfigureAction()
                      $('#actionButtonsConfigurationModal').find('.modal-body').append(content)
                      var singleCard = $('#actionButtonsConfigurationModal').find('.modal-body').find('.masterstyling').slice(-1)
                      $(singleCard).find('.selectButtonsOptions').empty()
                      $(singleCard).find('.selectButtonsOptions').append(`<option value="" disabled="" selected="">Select Button</option>`)
                      for (let i in actionBtn){
                        if (actionBtn[i]== true){
                          $(singleCard).find('.selectButtonsOptions').append(`<option value="${i}" >${i}</option>`)
                        }
                      }
                      $(singleCard).find('select').each(function(){
    $(this).select2()
  })
                    }
                    function saveConfigurationModal(obj){
                      var cards = $('#actionButtonsConfigurationModal').find('.masterstyling')
                      var fullValues = {}
                      var lastValues = {}
                      var lengthOfCards = cards.length;
                      for (let i = 0; i < lengthOfCards; i++) {
                        var values = {}
                        var singleCard = $('#actionButtonsConfigurationModal').find('.masterstyling').eq(i)
                        var selectedButton = $(singleCard).find('.selectButtonsOptions').val()
                        $(singleCard).find('[data-css]').each(function(){values[$(this).attr('data-css')] = $(this).val()})
                        values['data-icon'] = $(singleCard).find('.moreIconActionButtons').attr('data-list')
                        values['rgba'] = hexToRGB(values['background-color'],values['opacity'])
                        fullValues[selectedButton] = values
                      }
                      var columnOrderDict = $('#actionButtonsConfigurationModal').find('#actionBtnOrder').attr('data-list')
                      if (columnOrderDict!= ""){
                        columnOrderDict = JSON.parse(columnOrderDict)
                        fullValues['columnOrder'] = columnOrderDict
                      }
                      if (Object.keys(fullValues).length > 0){
                        lastValues[$('#selectTablePC').val()] = fullValues
                      }
                      $('#configure_actionbuttonid').attr('data-list',JSON.stringify(lastValues))
                      $('#actionButtonsConfigurationModal').modal('hide')
                      $('#dataTableModal').modal('show')
                    }
                    function action_column_modal_id_reset(obj){
                      $('#dataTableModal').modal('show')
                      $('#action_column_modal_id').modal('hide')
                      $('#configure_action_column_id').attr('data-list','')
                      $('#action_column_modal_id').find('.textinput').val('').trigger('change')
                      $('#action_column_modal_id').find('#elipses_trigger').prop('checked',false)
                    }
                    $('.listview_actionSubElements').find('#div_id_active').find('[name="PDF Action Button"]').on('change',function(){
                      if ($(this).prop('checked') ==true){
                        $('#action_column_modal_id_pdf').find('.action_column_modal_id_pdf_1').find('select,input').prop('disabled',false);
                        $('#configure_action_pdf_id').css('display','block');
                        action_column_modal_id_pdf_save()
                      }else{
                        $('#action_column_modal_id_pdf').find('[data-logo-change]').val('no').trigger('change');
                        $('#action_column_modal_id_pdf').find('[data-stylling-change]').val('no').trigger('change');
                        $('#action_column_modal_id_pdf').find('.action_column_modal_id_pdf_1').find('select,input').prop('disabled',true);
                        $('#configure_action_pdf_id').css('display','none');
                        $('#configure_action_pdf_id').attr('data-list','');
                      }
                    })
                    function logo_add_action_column_modal_id_pdf(obj){
                      if ($(obj).val() =='yes'){
                        $('#action_column_modal_id_pdf').find('[data-logo]').css('display','block');
                      }else{
                        $('#action_column_modal_id_pdf').find('[data-logo]').css('display','none');
                      }
                    }
                    function styllings_action_column_modal_id_pdf(obj){
                      if ($(obj).val() =='yes'){
                        $('#action_column_modal_id_pdf').find('[data-stylling]').css('display','block');
                      }else{
                        $('#action_column_modal_id_pdf').find('[data-stylling]').css('display','none');
                      }
                    }
                    function ajax_drop_fields_pdf_action_button(dict){
                      $.ajax({
                        url: window.location.pathname,

                        data: {
                          'operation': 'formTableFieldsAll',
                          'tablesForm': JSON.stringify([$('#selectTablePC').val()]),
                        },
                        type: "POST",
                        dataType: "json",
                        success: function (data) {
                          $('#action_column_modal_id_pdf').find('[data-css-drop=drop-fields]').empty()
                          $('#selectColumnForPDFLVColAlignment').empty()
                          $("#selectColumnForPDFLVColAlignment").append('<option val="" disabled selected>Select Column</option>');
                          for(j in data.finalFieldList){
                            $('#action_column_modal_id_pdf').find('[data-css-drop=drop-fields]').append(
                              `<option value="${data.finalFieldList[j]['verbose']}">${data.finalFieldList[j]['verbose']}</option>`
                            )
                            $('#selectColumnForPDFLVColAlignment').append(
                              `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                            )
                          }
                          if (dict != undefined){
                            $('#action_column_modal_id_pdf').find('[data-css-drop=drop-fields]').val(dict).trigger('change')
                          }
                        },
                        error: function () {
                          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                        }
                      })
                    }
                    function configure_action_pdf(obj){
                      $('#action_column_modal_id_pdf').modal('show')
                      $('#dataTableModal').modal('hide')
                      var attrData = $(obj).attr('data-list')
                      if (attrData == ''|| attrData =='{}' || attrData == 'null'){
                        ajax_drop_fields_pdf_action_button()
                      }else{
                        var parsedAttrdata = JSON.parse(attrData)
                        for(let i in parsedAttrdata){
                          var modal = $('#action_column_modal_id_pdf')
                          $('#pdfDataLayoutOption').val(parsedAttrdata[i]["layout"]).trigger('select2:select');
                          $('#pdfDataLayoutOption').val(parsedAttrdata[i]["layout"]).trigger('change');
                          $('#pdfEmbeddedDataLayoutOption').val(parsedAttrdata[i]["layout_embedded"]).trigger('select2:select');
                          $('#pdfEmbeddedDataLayoutOption').val(parsedAttrdata[i]["layout_embedded"]).trigger('change');
                          if ('embeded_table_content_in' in parsedAttrdata[i]){
                            modal.find('#embeded_table_content_in').prop('checked',parsedAttrdata[i]['embeded_table_content_in'])
                          }
                          ajax_drop_fields_pdf_action_button(parsedAttrdata[i]['data-drop-fields'])
                          if (parsedAttrdata[i]['logo_add'] =='yes'){
                            modal.find('[data-logo-change]').val(parsedAttrdata[i]['logo_add']).trigger('change')
                            modal.find('[data-logo-place]').val(parsedAttrdata[i]['data-logo-place']).trigger('change')
                            $("#action_column_modal_id_pdf_logo_img").siblings(".custom-file-label").addClass("selected").html(parsedAttrdata[i]['add_logo'].replace('C:\\fakepath\\', ''));
                          }else{
                            modal.find('[data-logo-change]').val(parsedAttrdata[i]['logo_add']).trigger('change')
                          }
                          if(parsedAttrdata[i]['data-stylling'] =='yes'){
                            modal.find('[data-stylling-change]').val(parsedAttrdata[i]['data-stylling']).trigger('change');
                            modal.find('[data-css]').each(function(){
                              if($(this).attr('data-css') in parsedAttrdata[i]){
                                $(this).val(parsedAttrdata[i][$(this).attr('data-css')]).trigger('change')
                              }
                            })
                          }else{
                            modal.find('[data-stylling-change]').val(parsedAttrdata[i]['data-stylling']).trigger('change');
                          }
                          if (parsedAttrdata[i]["column_alignment"]) {
                            $('#selectGlobalHeaderPDFLVColumnAlignment').val(parsedAttrdata[i]["column_alignment"]["global_header"]).trigger("select2:select")
                            $('#selectGlobalHeaderPDFLVColumnAlignment').val(parsedAttrdata[i]["column_alignment"]["global_header"]).trigger("change");
                            $('#selectGlobalContentPDFLVColumnAlignment').val(parsedAttrdata[i]["column_alignment"]["global_content"]).trigger("select2:select");
                            $('#selectGlobalContentPDFLVColumnAlignment').val(parsedAttrdata[i]["column_alignment"]["global_content"]).trigger("change");
                          }
                          if (parsedAttrdata[i]['data-column-width']== 'manual'){
                            modal.find('[data-column-width]').val(parsedAttrdata[i]['data-column-width']).trigger('change');

                            modal.find('#action_column_modal_id_pdf_column_width_fieldcontainer').find('.form-inline').each(function(){
                              if($(this).find('label').attr('data-value') && $(this).find('input').attr('data-column')){
                                if($(this).find('label').attr('data-value') in parsedAttrdata[i]['columns_width_manual']){
                                  $(this).find('input').val(parsedAttrdata[i]['columns_width_manual'][$(this).find('label').attr('data-value')]).trigger('change')
                                }
                              }
                            })
                          }else{
                            modal.find('[data-column-width]').val(parsedAttrdata[i]['data-column-width']).trigger('change');
                          }
                        }

                      }

                    }
                    function action_column_modal_id_pdf_close(obj){
                      $('#action_column_modal_id_pdf').modal('hide')
                      $('#dataTableModal').modal('show')
                    }
                    function action_column_modal_id_pdf_save(obj){
                      var modal = $('#action_column_modal_id_pdf')
                      var values = {}
                      values['pdf_action_button'] = $('.listview_actionSubElements').find('#div_id_active').find('[name="PDF Action Button"]').prop('checked')
                      values['layout'] = $('#pdfDataLayoutOption').val();
                      values['layout_embedded'] = $('#pdfEmbeddedDataLayoutOption').val();
                      values['embeded_table_content_in'] = $('#embeded_table_content_in').prop('checked')
                      if ($('.listview_actionSubElements').find('#div_id_active').find('[name="PDF Action Button"]').prop('checked')){
                        values['data-drop-fields'] = modal.find('[data-css-drop]').val()
                        if (modal.find('[data-logo-change]').val() =='yes'){
                          values['logo_add'] = modal.find('[data-logo-change]').val()
                          values['data-logo-place'] = modal.find('[data-logo-place]').val()
                          values['add_logo'] = $('#action_column_modal_id_pdf_logo_img').val()
                          var fileInput = document.getElementById('action_column_modal_id_pdf_logo_img');
                          if (fileInput.files.length > 0) {
                            var fileNames = fileInput.files[0].name;
                            values['parameter'] = fileNames;
                            values['add_logo'] = fileNames;
                            let formData = new FormData($("#action_column_modal_id_pdf_form_post")[0]);
                            formData.append("operation", "saveApprovalAttachmentPDFLogo");

                            $.ajax({
                              url:window.location.pathname,
                              data: formData,
                              type: 'POST',
                              cache: false,
                              contentType: false,
                              processData: false,
                              success: function (data) {

                              },
                              error: ()=>{
                                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                              }
                            });
                          } else if ($("#action_column_modal_id_pdf_logo_img").siblings(".custom-file-label").hasClass("selected")) {
                            values['parameter'] = $("#action_column_modal_id_pdf_logo_img").siblings(".custom-file-label").html();
                            values['add_logo'] = $("#action_column_modal_id_pdf_logo_img").siblings(".custom-file-label").html();
                          } else {

                          }
                        }else{
                          values['logo_add'] = modal.find('[data-logo-change]').val()
                        }
                        if (modal.find('[data-stylling-change]').val() =='yes'){
                          values['data-stylling'] = modal.find('[data-stylling-change]').val();
                          modal.find('[data-css]').each(function(){
                            values[$(this).attr('data-css')] = $(this).val()
                          })
                        }else{
                          values['data-stylling'] = modal.find('[data-stylling-change]').val();
                        }
                        values['header_font_size'] = $('#lvPDFHeaderFontSize').val();
                        values['content_font_size'] = $('#lvPDFBodyFontSize').val();
                        var pdfColumnAlignmentConfig = {};
                        pdfColumnAlignmentConfig['global_header'] = $('#selectGlobalHeaderPDFLVColumnAlignment').val();
                        pdfColumnAlignmentConfig['global_content'] = $('#selectGlobalContentPDFLVColumnAlignment').val();
                        var inidividualFieldConfig = {};
                        $('#pdfColumnAlignmentContainer').find('.row.col-12').each(function(){
                          var fieldName = $(this).find('.col-4').eq(0).find('strong').attr('data-value');
                          var headerAlignment = $(this).find('.col-4').eq(1).find('.header').val();
                          var contentAlignment = $(this).find('.col-4').eq(2).find('.content').val();
                          inidividualFieldConfig[fieldName] = {header: headerAlignment, content: contentAlignment};
                        });
                        pdfColumnAlignmentConfig['field_level_config'] = inidividualFieldConfig;
                        values['column_alignment'] = pdfColumnAlignmentConfig;

                        if(modal.find('[data-column-width]').val() =='manual'){
                          values['data-column-width'] = modal.find('[data-column-width]').val()
                          var column_wdths = {}
                          modal.find('#action_column_modal_id_pdf_column_width_fieldcontainer').find('.form-inline').each(function(){
                            if($(this).find('label').attr('data-value') && $(this).find('input').attr('data-column')){
                              column_wdths[$(this).find('label').attr('data-value')] = $(this).find('input').val()
                            }
                          })
                          values['columns_width_manual'] = column_wdths
                        }else{
                          values['data-column-width'] = modal.find('[data-column-width]').val()
                        }
                      }
                      var main_values ={}
                      main_values[$('#selectTablePC').val()] = values
                      $('#configure_action_pdf_id').attr('data-list',JSON.stringify(main_values))
                      $('#action_column_modal_id_pdf').modal('hide')
                      $('#dataTableModal').modal('show')
                    }
                    function column_width_action_column_modal_id_pdf(obj){
                      if ($(obj).val() == 'manual'){
                        $.ajax({
                          url: window.location.pathname,
                          async: false,
                          data: {
                            'operation': 'fetchColumnsList',
                            'table_name': $('#selectTablePC').val(),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            $('#action_column_modal_id_pdf_column_width_fieldcontainer').empty();
                            $("#action_column_modal_id_pdf_column_width_fieldcontainer").append(`<div class='form-inline'><label class='col-7'>Field Name</label><label class='col-5'>Width</label></div>`);
                            for (i in data['field_list']) {
                              $("#action_column_modal_id_pdf_column_width_fieldcontainer").append(`<div class='form-inline'><label class="col-7" data-value="${i}">${data['field_list'][i]}</label><input type="number" class="numberinput form-control col-5" step="5" data-column="${i}"></div>`);
                            }

                          }, error: ()=>{
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        });
                      }else{
                        $('#action_column_modal_id_pdf_column_width_fieldcontainer').empty();
                      }

                    }
                    function restrictLogoSize(logofield){
                      var file = document.getElementById(logofield)
                      if(file.files[0].size > 200000){
                          Swal.fire({text:"File size should not exceed 200kb!",icon:"warning"}).then((result)=>{
                              if(result.isConfirmed){
                              file.value = "";
                              $(file).siblings(".custom-file-label").html("Upload File")
                              }
                          })
                          }
                          else{
                          restrictLogoType(logofield)
                          }
                      }
                      function restrictLogoType(logofield)  {
                        var file = document.getElementById(logofield)
                        var fileName = file.value
                        idxDot = fileName.lastIndexOf(".") + 1;
                        extFile = fileName.substr(idxDot, fileName.length).toLowerCase();
                        text="Only jpg/jpeg and png files are allowed!"
                        condition = extFile!="jpg" && extFile!="jpeg" && extFile!="png"
                        if (condition){
                          Swal.fire({text:text,icon:"warning"}).then((result)=>{
                            if(result.isConfirmed){
                              file.value = "";
                              $(file).siblings(".custom-file-label").html("Upload File")
                            }
                          })
                        }
                          else{
                            restrictLogoResolution(logofield)
                          }
                        }
                        function restrictLogoResolution(logofield){
                          var file = document.getElementById(logofield)
                          if(logofield=="action_column_modal_id_pdf_logo_img"){
                              var maxwidth = 200
                              var maxheight = 60
                              var img = new Image();
                              img.src = window.URL.createObjectURL( file.files[0] );
                              img.onload = function()
                              {
                              var width = this.naturalWidth,height = this.naturalHeight;

                              if(width>maxwidth || height>maxheight){
                                  Swal.fire({text:"Resolution of the file exceeds the given limit!",icon:"warning"}).then((result)=>{
                                  if(result.isConfirmed){
                                      file.value = "";
                                      $(file).siblings(".custom-file-label").html("Upload File")
                                  }
                                  })
                              }
                              };
                          }
                          }

                    function configureActionColumn(obj){
                      $('#dataTableModal').modal('hide')
                      $('#action_column_modal_id').modal('show')
                      var attrData = $(obj).attr('data-list')
                      if (attrData == ''|| attrData =='{}' || attrData == 'null'){
                        $('#action_column_modal_id').find('.textinput').val('').trigger('change')
                        $('#action_column_modal_id').find('#elipses_trigger').prop('checked',false)
                      }else{
                        var parsedAttrdata = JSON.parse(attrData)
                        $('#action_column_modal_id').find('.textinput').val(parsedAttrdata[$('#selectTablePC').val()]['columnHeader']).trigger('change')
                        $('#action_column_modal_id').find('#elipses_trigger').prop('checked',parsedAttrdata[$('#selectTablePC').val()]['elipsesTrigger'])
                      }
                    }
                    function action_column_modal_id_close(obj){
                      $('#dataTableModal').modal('show')
                      $('#action_column_modal_id').modal('hide')
                    }
                    function action_column_modal_id_save(obj){
                      var values = {}
                      values[$('#selectTablePC').val()] = {'columnHeader':$('#action_column_modal_id').find('.textinput').val(),'elipsesTrigger':$('#action_column_modal_id').find('#elipses_trigger').prop('checked')}
                      $('#configure_action_column_id').attr('data-list',JSON.stringify(values))
                      $('#dataTableModal').modal('show')
                      $('#action_column_modal_id').modal('hide')
                    }
                    function addListviewModalConfigsMultiple(dict,tablename){
                      var content = `
                      <div class="card collapsed-card masterfomatting" style="margin-top:10px;">
                        <div class="card-header row">
                          <div class="form-group col-7" style="display:flex; margin-bottom: 0px;">
                            <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the table:</p>
                            <div class="col-8">
                            <select class="select2 form-control columnNames" style="margin-left: 5px;">
                              <option value="" disabled selected>Select table</option>
                            </select>
                              </div>
                            </div>
                              <div class="col-4">
                                <div class="card-tools float-right">
                                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                                  <button type="button" class="btn btn-tool" onclick="formattingRemoveContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                              </div>
                            </div>
                        </div>
                        <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
                          <div class="row text-headers">
                            <div class="col-12">
                              <p style="font-weight: bold;">Configure edit list view modal header:</p>
                              <input type="text" class="textInput form-control ">
                            </div>
                          </div>
                        </div>
                        </div>
                      </div>
                      </div>
                      `
                      $('#edit_list_view_modal_configuration_modal').find('.modal-body').find('.card-repos').append(content)
                      var singleCard = $('#edit_list_view_modal_configuration_modal').find('.modal-body').find('.card-repos').find('.masterfomatting').slice(-1)
                      var tables = $('#selectTablePC').val()
                      $(singleCard).find('.columnNames').empty()
                      $(singleCard).find('.columnNames').append(`<option value="" disabled="" selected="">Select table</option>`)
                      for (let i in tables){
                        $(singleCard).find('.columnNames').append(`<option value="${tables[i]}">${tables[i]}</option>`)
                      }
                      $(singleCard).find('.columnNames').select2()
                      if(dict!= undefined && tablename != undefined){
                        $(singleCard).find('.columnNames').val(tablename).trigger('change')
                        $(singleCard).find('.textInput').val(dict['header_text']).trigger('change')
                      }
                    }
                    function configure_edit_list_view_modal_header(obj){
                      $('#edit_list_view_modal_configuration_modal').modal('show')
                      $('#dataTableModal').modal('hide')
                      var attrData = $(obj).attr('data-list')
                      if ($('#selectTemplate').val() =='Multiple table'){
                        if (attrData == ''|| attrData =='{}' || attrData == 'null'){
                          $('#edit_list_view_modal_configuration_modal').find('.text-headers').find('.card-repos').empty()
                        }else{
                          var parsedAttrdata = JSON.parse(attrData)
                          $('#edit_list_view_modal_configuration_modal').find('.text-headers').find('.card-repos').empty()
                          for (let i in parsedAttrdata){
                            addListviewModalConfigsMultiple(parsedAttrdata[i],i)
                          }
                        }
                      }else{
                        if (attrData == ''|| attrData =='{}' || attrData == 'null'){
                          $('#edit_list_view_modal_configuration_modal').find('.text-headers').find('input').val('').trigger('change')
                        }else{
                          var parsedAttrdata = JSON.parse(attrData)
                          $('#edit_list_view_modal_configuration_modal').find('.text-headers').find('input').val(parsedAttrdata[$('#selectTablePC').val()]['header_text']).trigger('change')
                        }
                      }
                    }
                    function configure_edit_list_view_modal_header_close(obj){
                      $('#edit_list_view_modal_configuration_modal').modal('hide')
                      $('#dataTableModal').modal('show')
                    }
                    function configure_edit_list_view_modal_header_save(obj){
                      $('#edit_list_view_modal_configuration_modal').modal('hide')
                      $('#dataTableModal').modal('show')
                      if ($('#selectTemplate').val() == 'Multiple table'){
                        var values = {}
                        var cards = $('#edit_list_view_modal_configuration_modal').find('.modal-body').find('.card-repos').find('.masterfomatting')
                        for (let i = 0; i < cards.length; i++) {
                          var singleCard = $('#edit_list_view_modal_configuration_modal').find('.modal-body').find('.card-repos').find('.masterfomatting').eq(i)
                          values[$(singleCard).find('.columnNames').val()] = {'header_text':$(singleCard).find('.textInput').val()}
                        }
                        $('#configure_edit_list_view_header_modal').attr('data-list',JSON.stringify(values))
                      }else{
                        var values = {}
                        values['header_text'] = $('#edit_list_view_modal_configuration_modal').find('.text-headers').find('input').val()
                        $('#configure_edit_list_view_header_modal').attr('data-list',JSON.stringify({[$('#selectTablePC').val()]:values}))
                      }
                    }
                    function configureActionBtn(obj){
                      $('#actionButtonsConfigurationModal').modal('show')
                      $('#dataTableModal').modal('hide')
                      var attrData = $(obj).attr('data-list')
                      if (attrData == ''|| attrData =='{}' || attrData == 'null'){
                        var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record']`).prop('checked')
                        var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
                        var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
                        var viewRecord = $('.listview_actionSubElements').find(`[id='View Record']`).prop('checked')
                        var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
                        $('#actionButtonsConfigurationModal').find('.sortable-order').empty()
                        for (let i in actionBtn){
                          if (actionBtn[i]== true){
                            $('#actionButtonsConfigurationModal').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${i}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${i}</li>`);
                          }
                        }
                        $.ajax({
                          url: window.location.pathname,
                          data: { 'model_name': $('#selectTablePC').val(), 'operation': 'fecthing_verbose_name_action_config' },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            var listColumns = data.columns__dict
                            for (let [key, value] of Object.entries(listColumns)){
                              $('#actionButtonsConfigurationModal').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${key}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${value}</li>`);
                            }
                            $('#actionButtonsConfigurationModal').find('.sortable-order').sortable()

                          },
                          error: function () {
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        })
                      }else {
                        $('#actionButtonsConfigurationModal').find('.modal-body').find('.masterstyling').remove()
                        var parsedAttrdata = JSON.parse(attrData)
                        var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record']`).prop('checked')
                        var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
                        var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
                        var viewRecord = $('.listview_actionSubElements').find(`[id='View Record']`).prop('checked')
                        var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
                        for (let i in parsedAttrdata){
                          for (let j in parsedAttrdata[i]){
                            if (j in actionBtn){
                              populateActionButtons()
                              var singleCard = $('#actionButtonsConfigurationModal').find('.modal-body').find('.masterstyling').slice(-1)
                              $(singleCard).find('.selectButtonsOptions').val(j).trigger('change')
                              for (let k in parsedAttrdata[i][j]){
                                $(singleCard).find('[data-css]').each(function(){
                                  if ($(this).attr('data-css') == k){
                                    $(this).val(parsedAttrdata[i][j][k]).trigger('change')
                                  }
                                })
                              }
                              $(singleCard).find('.moreIconActionButtons').attr('data-list',parsedAttrdata[i][j]['data-icon'])
                            }
                          }
                          if ('columnOrder' in parsedAttrdata[i]){
                            $('#actionButtonsConfigurationModal').find('#actionBtnOrder').attr('data-list',JSON.stringify(parsedAttrdata[i]['columnOrder']))
                            $('#actionButtonsConfigurationModal').find('.sortable-order').empty()
                            for (let l in parsedAttrdata[i]['columnOrder']){
                              $('#actionButtonsConfigurationModal').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${parsedAttrdata[i]['columnOrder'][l]}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${parsedAttrdata[i]['columnOrder'][l]}</li>`);
                            }
                            $('#actionButtonsConfigurationModal').find('.sortable-order').sortable()
                          }else{
                            $('#actionButtonsConfigurationModal').find('.sortable-order').empty()
                            for (let l in actionBtn){
                              if (actionBtn[l]== true){
                                $('#actionButtonsConfigurationModal').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${l}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${l}</li>`);
                              }
                            }
                            $.ajax({
                              url: window.location.pathname,
                              data: { 'model_name': $('#selectTablePC').val(), 'operation': 'fecthing_verbose_name_action_config' },
                              type: "POST",
                              dataType: "json",
                              success: function (data) {
                                var listColumns = data.columns__dict
                                for (let [key, value] of Object.entries(listColumns)){
                                  $('#actionButtonsConfigurationModal').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${key}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${value}</li>`);
                                }
                                $('#actionButtonsConfigurationModal').find('.sortable-order').sortable()

                              },
                              error: function () {
                                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                              }
                            })
                          }
                        }
                      }

                    }
                    function closeConfigurationModal(obj){
                      $('#actionButtonsConfigurationModal').modal('hide')
                      $('#dataTableModal').modal('show')
                    }
                    var styllingActionButtonContentIndexMultiple = 0
                    function contentConfigureActionMultiple(){
                      styllingActionButtonContentIndexMultiple++
                      return(`
                        <div class="card collapsed-card multipleJs masterstyling" id="masterstylingactionbuttons${styllingActionButtonContentIndexMultiple}" style="margin-left:-12px;margin-right: -12px;">
                          <div class="card-header row">
                            <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 10px;">
                              <p style="margin-right: 16px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the table: </p>
                              <div class="col-4">
                              <select class="select2 form-control selectTableOptions " style="margin-left: 17px;" >
                                <option value="" disabled selected>Select table</option>
                              </select>
                                </div>
                              </div>
                            <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
                              <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the button:</p>
                              <div class="col-4">
                              <select class="select2 form-control selectButtonsOptions" onchange="actionButtonsSelectedButtonName(this)" style="margin-left: 5px;">
                                <option value="" disabled selected>Select Button</option>
                                </select>
                                </div>
                              </div>
                                <div class="col-2">
                                  <div class="card-tools float-right">
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                                    <button type="button" class="btn btn-tool" onclick="uploadRemoveEditButtonContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                                </div>
                              </div>
                          </div>
                          <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
                            <div class="row" style="padding-left: 15px;">
                              <div class="col-4">
                                <p style="font-weight: bold;">Text of button:</p>
                                <input type="text"  data-css="text" class="textinput textInput form-control ">
                              </div>
                              <div class="col-4">
                                  <p style="font-weight: bold;">Select text color:</p>
                                  <input type="color" value="#ffffff" class="form-control" data-css="color">
                              </div>
                              <div class="col-4">
                                  <p style="font-weight: bold;">Select background color:</p>
                                  <div class="input-group">
                                    <input type="color" value="#565a5e" class="form-control " data-css="background-color">
                                    <select class="select2 form-control" data-css="opacity" >
                                      <option value="1" selected >None</option>
                                      <option value="0.9">0.9</option>
                                      <option value="0.8">0.8</option>
                                      <option value="0.7">0.7</option>
                                      <option value="0.8">0.8</option>
                                      <option value="0.7">0.7</option>
                                      <option value="0.6">0.6</option>
                                      <option value="0.5">0.5</option>
                                      <option value="0.4">0.4</option>
                                      <option value="0.3">0.3</option>
                                      <option value="0.2">0.2</option>
                                      <option value="0.1">0.1</option>
                                      <option value="0">0</option>
                                    </select>
                                </div>
                              </div>
                            </div>
                            <div class="row" style="padding-left: 15px; padding-top:15px;">
                                <div class="col-4" >
                                <p style="font-weight: bold;">Select border type:</p>
                                <select class="select2 form-control" data-css="border-style" >
                                    <option value="none">No border</option>
                                    <option value="dotted" >Dotted</option>
                                    <option value="dashed" >Dashed</option>
                                    <option value="solid" >Solid</option>
                                    <option value="double" >Double</option>
                                    <option value="groove" >Groove</option>
                                    <option value="ridge" >Ridge</option>
                                    <option value="inset" >Inset</option>
                                    <option value="outset" >Outset</option>
                                    <option value="dotted dashed solid double" >Dotted dashed solid double</option>
                                </select>
                                </div>
                                <div class="col-4">
                                <p style="font-weight: bold;">Select border width:</p>
                                <div class="input-group">
                                    <input type="float" class="form-control" data-css="border-width" >
                                    <select class="select2 form-control" data-css="border-measure">
                                      <option value="">None</option>
                                      <option value="px">px</option>
                                    </select>
                                </div>
                                </div>
                                <div class="col-4">
                                  <p style="font-weight: bold;">Select border color:</p>
                                  <input type="color" class="form-control" data-css="border-color" >
                                </div>
                            </div>
                            <div class="row" style="padding-left: 15px; padding-top:15px;">
                              <div class="col-4" >
                                <p style="font-weight: bold;">Select icon to add:</p>
                                <button class="btn btn-primary moreIconActionButtons" type="button" onclick="iconsPackMoreIconsMultiple(this)" data-list="">
                                  Icon Selector
                                </button>

                              </div>
                              <div class="col-4">
                                <p style="font-weight: bold;">Select icon color:</p>
                                <input type="color" value="#ffffff" class="form-control" data-css="icon-color">
                              </div>
                              <div class="col-4" >
                                <p style="font-weight: bold;">Select button size:</p>
                                <select class="select2 form-control" data-css="font-size">
                                  <option value="none">Normal</option>
                                  <option value="10px">Xtra small</option>
                                  <option value="12px">Small</option>
                                  <option value="16px">Medium</option>
                                  <option value="20px">Large</option>
                                  <option value="24px">Xtra large</option>
                                </select>
                              </div>

                            </div>
                            <div class="row" style="padding-left: 15px; padding-top:15px;">
                              <div class="col-4">
                                <p style="font-weight: bold;">Select hover action:</p>
                                <select class="select2 form-control" onchange="computationhoverOptionsEditButton(this)" data-css="hoveractions">
                                  <option value="none">No Effect</option>
                                  <option value="Color">Color</option>
                                  <option value="Gradient">Gradient</option>
                                  <option value="textsize">Text-size</option>
                                </select>
                              </div>
                              <div class="col-4">
                                <p style="font-weight: bold;">Column header:</p>
                                <input type="text"  data-css="column-header" class="textinput textInput form-control ">
                              </div>
                          </div>
                          <div class="row hoverButton" style="padding-left: 15px; padding-top:15px; width: 100%; display: flex;">

                          </div>
                          </div>
                        </div>
                        </div>`)
                    }
                    function contentConfigureTableOrderMultiple(obj){
                      return(`
                        <div class="card collapsed-card multipleJs masterTableOrder" style="margin-left:-12px;margin-right: -12px;">
                          <div class="card-header row">
                            <div class="form-group col-10" style="display:flex; align-items: center;margin-bottom: 10px;">
                              <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the table:</p>
                              <div class="col-4">
                              <select class="select2 form-control selectTableOptions " onchange="tableOrderOnchangeMultiple(this)" style="margin-left: 17px;" >
                                <option value="" disabled selected>Select table</option>
                              </select>
                                </div>
                                <div class="float-right" style="margin-left: 40px;">
                                  <a data-toggle="dropdown" aria-expanded="false" data-list=""><i class="fa-solid fa-arrow-down-short-wide fa-2x" aria-hidden="true" style="color:var(--primary-color);"></i>&nbsp;</a>
                                  <div class="dropdown-menu dropdown-menu-lg dropdown-menu-left" style="height: fit-content;min-width: 12em;border-radius: 1rem;overflow-y: auto;margin:0 !important;padding-top: 0 !important;">
                                    <div class="yourapps-dropdown" data-list="">
                                      <span>Column Order</span>
                                      <a class="btn btn-secondary text-light" onclick="saveColumnOrderActionButtonsMultiple(this)">Save</a>
                                    </div>
                                    <div class="apps-dropdownItems">
                                      <ul class="sortable-order col pt-2" style="list-style: none;">
                                      </ul>
                                    </div>
                                  </div>
                                </div>
                              </div>
                                <div class="col-2" style="margin-top: 10px;">
                                  <div class="card-tools float-right">
                                    <button type="button" class="btn btn-tool" onclick="uploadRemoveEditButtonContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                                </div>
                              </div>
                          </div>

                        </div>
                        </div>`)
                    }
                    function saveColumnOrderActionButtonsMultiple(obj){
                      var columnOrderDict = []
                      $(obj).parent().parent().find(".sortable-order").children().each(function() {
                        columnOrderDict.push($(this).attr("name"))
                      })
                      $(obj).parent().attr('data-list',JSON.stringify(columnOrderDict))
                    }
                    function tableOrderOnchangeMultiple(obj){
                      var singleCard = $(obj).parent().parent().parent().parent()
                      var attrData = $(singleCard).find('.yourapps-dropdown').attr('data-list')
                      if (attrData != ""){
                        var parsedAttrdata = JSON.parse(attrData)
                        $(singleCard).find('.sortable-order').empty()
                        for (let i in parsedAttrdata){
                          $(singleCard).find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${parsedAttrdata[i]}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${parsedAttrdata[i]}</li>`);
                        }
                        $(singleCard).find('.sortable-order').sortable()
                      }else{
                        var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record']`).prop('checked')
                        var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
                        var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
                        var viewRecord = $('.listview_actionSubElements').find(`[id='View Record']`).prop('checked')
                        var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
                        $(singleCard).find('.sortable-order').empty()
                        for (let i in actionBtn){
                          if (actionBtn[i]== true){
                            $(singleCard).find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${i}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${i}</li>`);
                          }
                        }
                        $.ajax({
                          url: window.location.pathname,
                          data: { 'model_name': $(obj).val(), 'operation': 'fecthing_verbose_name_action_config' },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            var listColumns = data.columns__dict
                            for (let [key, value] of Object.entries(listColumns)){
                              $(singleCard).find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${key}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${value}</li>`);
                            }
                            $(singleCard).find('.sortable-order').sortable()

                          },
                          error: function () {
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        })
                      }

                    }
                    function populateTableOrderMultiple(obj){
                      var content = contentConfigureTableOrderMultiple()
                      $('#actionButtonsConfigurationModalMultiple').find('.small_container').append(content)
                      var singleCard = $('#actionButtonsConfigurationModalMultiple').find('.small_container').find('.masterTableOrder').slice(-1)
                      var tables = $('#selectTablePC').val()
                      $(singleCard).find('.selectTableOptions').empty()
                      $(singleCard).find('.selectTableOptions').append(`<option value="" disabled selected>Select table</option>`)
                      for (let i in tables){
                        $(singleCard).find('.selectTableOptions').append(`<option value="${tables[i]}">${tables[i]}</option>`)
                      }
                      $(singleCard).find('select').each(function(){
    $(this).select2()
  })
                    }
                    function resetActionButtonsMultiple(obj){
                      $('#actionButtonsConfigurationModalMultiple').find('.main_container').find('.masterstyling').remove()
                      $('#actionButtonsConfigurationModalMultiple').find('.small_container').find('.masterTableOrder').remove()
                    }
                    function configureActionBtnMultiple(obj){
                      $('#actionButtonsConfigurationModalMultiple').modal('show')
                      $('#dataTableModal').modal('hide')
                      var attrData = $(obj).attr('data-list')
                      if (attrData == ''|| attrData =='{}' || attrData == 'null'){
                        $('#actionButtonsConfigurationModalMultiple').find('.main_container').find('.masterstyling').remove()
                        $('#actionButtonsConfigurationModalMultiple').find('.small_container').find('.masterTableOrder').remove()
                      }else{
                        var parsedAttrdata = JSON.parse(attrData)
                        $('#actionButtonsConfigurationModalMultiple').find('.main_container').find('.masterstyling').remove()
                        $('#actionButtonsConfigurationModalMultiple').find('.small_container').find('.masterTableOrder').remove()
                        var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record']`).prop('checked')
                        var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
                        var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
                        var viewRecord = $('.listview_actionSubElements').find(`[id='View Record']`).prop('checked')
                        var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
                        for(let i in parsedAttrdata){
                          for (let j in parsedAttrdata[i]){
                            if (j in actionBtn){
                              populateActionButtonsMultiple()
                              var singleCard = $('#actionButtonsConfigurationModalMultiple').find('.main_container').find('.masterstyling').slice(-1)
                              $(singleCard).find('.selectButtonsOptions').val(j).trigger('change')
                              $(singleCard).find('.selectTableOptions').val(i).trigger('change')
                              for (let k in parsedAttrdata[i][j]){
                                $(singleCard).find('[data-css]').each(function(){
                                  if ($(this).attr('data-css') == k){
                                    $(this).val(parsedAttrdata[i][j][k]).trigger('change')
                                  }
                                })
                              }
                              $(singleCard).find('.moreIconActionButtons').attr('data-list',parsedAttrdata[i][j]['data-icon'])
                            }
                            if ('columnOrder' == j){
                              populateTableOrderMultiple()
                              var singleCard = $('#actionButtonsConfigurationModalMultiple').find('.small_container').find('.masterTableOrder').slice(-1)
                              $(singleCard).find('.yourapps-dropdown').attr('data-list',JSON.stringify(parsedAttrdata[i][j]))
                              $(singleCard).find('.selectTableOptions').val(i).trigger('change')

                            }
                          }

                        }
                      }
                    }
                    function populateActionButtonsMultiple(obj){
                      var content = contentConfigureActionMultiple()
                      $('#actionButtonsConfigurationModalMultiple').find('.main_container').append(content)
                      var singleCard = $('#actionButtonsConfigurationModalMultiple').find('.masterstyling').slice(-1)
                      var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record']`).prop('checked')
                      var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
                      var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
                      var viewRecord = $('.listview_actionSubElements').find(`[id='View Record']`).prop('checked')
                      var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
                      for (let i in actionBtn){
                        if (actionBtn[i]== true){
                          $(singleCard).find('.selectButtonsOptions').append(`<option value="${i}">${i}</option>`);
                        }
                      }
                      var tables = $('#selectTablePC').val()
                      $(singleCard).find('.selectTableOptions').empty()
                      $(singleCard).find('.selectTableOptions').append(`<option value="" disabled selected>Select table</option>`)
                      for (let i in tables){
                        $(singleCard).find('.selectTableOptions').append(`<option value="${tables[i]}">${tables[i]}</option>`)
                      }
                      $(singleCard).find('select').each(function(){
    $(this).select2()
  })
                    }
                    function saveIcon_action_buttons_multiple(obj){
                      var index = $(obj).attr('data-list')
                      $('#moreicons_action_buttons_multiple').find(".icon_a").each(function(){
                        if ($(this).attr('selected_a') =='true'){
                          var selectedIcon = $(this).attr('data-class')
                          $('#actionButtonsConfigurationModalMultiple').find(`#${index}`).find('.moreIconActionButtons').attr('data-list',selectedIcon)
                        }
                      })

                    }
                    function iconsPackMoreIconsMultiple(obj){
                      $('#moreicons_action_buttons_multiple').find(".icon_a").attr("selected_a", "false");
                      $('#moreicons_action_buttons_multiple').find(".icon_a").css("background-color", "#f9f9f9");
                      $('#moreicons_action_buttons_multiple').find(".icon_a").css("color", "black");
                      var index = $(obj).parent().parent().parent().parent().attr('id')
                      $('#moreicons_action_buttons_multiple').find('#saveIcon_action_buttons_multiple').attr('data-list',index)
                      var selectedIcon = $(obj).attr('data-list')
                      if (selectedIcon != ''){
                        $('#moreicons_action_buttons_multiple').find(".icon_a").each(function(){
                          if ($(this).attr('data-class') == selectedIcon){
                            $(this).attr("selected_a", "true");
                            $(this).css("background-color", "var(--primary-color)");
                            $(this).css("color", "white");
                          }
                        })
                      }
                      $('#moreicons_action_buttons_multiple').modal('show')
                    }
                    function searchIcons_action_buttons_multiple(obj){
                      var input, filter, ul, div, li, a, i, txtValue, h5;
                      input = obj;
                      if (input.value.length > 0) {
                        $("#icons_category_action_buttons_multiple").css("display", "none")
                        $("#icons_without_category_action_buttons_multiple").css("display", "block")
                        filter = input.value.toUpperCase();
                        div = document.getElementById("icons_without_category_action_buttons_multiple");
                        ul = document.getElementsByTagName("ul");
                        li = div.getElementsByTagName("li");
                        for (i = 0; i < li.length; i++) {
                          a = li[i].getElementsByTagName("a")[0];
                          txtValue = a.getAttribute("data-class");
                          if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            li[i].style.display = "";
                          } else {
                            li[i].style.display = "none";
                          }
                        }
                      }
                      else {
                        $("#icons_category_action_buttons_multiple").css("display", "block")
                        $("#icons_without_category_action_buttons_multiple").css("display", "none")
                      }
                    }
                    function closeConfigurationModalMultiple(obj){
                      $('#actionButtonsConfigurationModalMultiple').modal('hide')
                      $('#dataTableModal').modal('show')
                    }
                    function saveConfigurationModalMultiple(obj){
                      var cards = $('#actionButtonsConfigurationModalMultiple').find('.masterstyling')
                      var lastValues = {}
                      var lengthOfCards = cards.length;
                      for (let i = 0; i < lengthOfCards; i++) {
                        var values = {}
                        var singleCard = $('#actionButtonsConfigurationModalMultiple').find('.masterstyling').eq(i)
                        var selectedTable = $(singleCard).find('.selectTableOptions').val()
                        var selectedButton = $(singleCard).find('.selectButtonsOptions').val()
                        $(singleCard).find('[data-css]').each(function(){values[$(this).attr('data-css')] = $(this).val()})
                        values['data-icon'] = $(singleCard).find('.moreIconActionButtons').attr('data-list')
                        values['rgba'] = hexToRGB(values['background-color'],values['opacity'])
                        if (selectedTable in lastValues){
                          Object.assign(lastValues[selectedTable], {[selectedButton]:values})
                        }else{
                          Object.assign(lastValues, {[selectedTable]:{[selectedButton]:values},})
                        }
                      }
                      var tableOrderCards = $('#actionButtonsConfigurationModalMultiple').find('.masterTableOrder')
                      var lengthOfTableOrderCards = tableOrderCards.length;
                      for (let i = 0; i < lengthOfTableOrderCards; i++){
                        var singleCard = $('#actionButtonsConfigurationModalMultiple').find('.masterTableOrder').eq(i)
                        var selectedTable = $(singleCard).find('.selectTableOptions').val()
                        var attrData = $(singleCard).find('.yourapps-dropdown').attr('data-list')
                        if (attrData != ""){
                          attrData = JSON.parse(attrData)
                          if (selectedTable in lastValues){
                            Object.assign(lastValues[selectedTable], {'columnOrder':attrData})
                          }else{
                            Object.assign(lastValues, {[selectedTable]:{'columnOrder':attrData},})
                          }
                        }

                      }
                      $('#configure_actionbuttonid_multiple').attr('data-list',JSON.stringify(lastValues))
                      $('#actionButtonsConfigurationModalMultiple').modal('hide')
                      $('#dataTableModal').modal('show')
                    }
                    function iconsPackMoreIcons(obj){
                      $('#moreicons_action_buttons').find(".icon_a").attr("selected_a", "false");
                      $('#moreicons_action_buttons').find(".icon_a").css("background-color", "#f9f9f9");
                      $('#moreicons_action_buttons').find(".icon_a").css("color", "black");
                      var index = $(obj).parent().parent().parent().parent().attr('id')
                      $('#moreicons_action_buttons').find('#saveIcon_action_buttons').attr('data-list',index)
                      var selectedIcon = $(obj).attr('data-list')
                      if (selectedIcon != ''){
                        $('#moreicons_action_buttons').find(".icon_a").each(function(){
                          if ($(this).attr('data-class') == selectedIcon){
                            $(this).attr("selected_a", "true");
                            $(this).css("background-color", "var(--primary-color)");
                            $(this).css("color", "white");
                          }
                        })
                      }
                      $('#moreicons_action_buttons').modal('show')
                    }
                    function saveIcon_action_buttons(obj){
                      var index = $(obj).attr('data-list')
                      if($("#selectTemplate").val() == "Multi Dropdown View"){
                        $('#moreicons_action_buttons').find(".icon_a").each(function(){
                          if ($(this).attr('selected_a') =='true'){
                            var selectedIcon = $(this).attr('data-class')
                            $('#actionButtonsConfigurationModal_mul').find(`#${index}`).find('.moreIconActionButtons').attr('data-list',selectedIcon)
                          }
                        })
                      }else{
                        $('#moreicons_action_buttons').find(".icon_a").each(function(){
                          if ($(this).attr('selected_a') =='true'){
                            var selectedIcon = $(this).attr('data-class')
                            $('#actionButtonsConfigurationModal').find(`#${index}`).find('.moreIconActionButtons').attr('data-list',selectedIcon)
                          }
                        })
                      }


                    }
                    function searchIcons_action_buttons(obj){
                      var input, filter, ul, div, li, a, i, txtValue, h5;
                      input = obj;
                      if (input.value.length > 0) {
                        $("#icons_category_action_buttons").css("display", "none")
                        $("#icons_without_category_action_buttons").css("display", "block")
                        filter = input.value.toUpperCase();
                        div = document.getElementById("icons_without_category_action_buttons");
                        ul = document.getElementsByTagName("ul");
                        li = div.getElementsByTagName("li");
                        for (i = 0; i < li.length; i++) {
                          a = li[i].getElementsByTagName("a")[0];
                          txtValue = a.getAttribute("data-class");
                          if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            li[i].style.display = "";
                          } else {
                            li[i].style.display = "none";
                          }
                        }
                      }
                      else {
                        $("#icons_category_action_buttons").css("display", "block")
                        $("#icons_without_category_action_buttons").css("display", "none")
                      }
                    }
                    function moreIcons(obj){
                      event.preventDefault()
                      $('#moreicons').modal('show')
                    }
                    function searchIcons_button_stylling(obj){
                      var input, filter, ul, div, li, a, i, txtValue, h5;
                      input = obj;
                      if (input.value.length > 0) {
                        $("#icons_category_button_stylling").css("display", "none")
                        $("#icons_without_category_button_stylling").css("display", "block")
                        filter = input.value.toUpperCase();
                        div = document.getElementById("icons_without_category_button_stylling");
                        ul = document.getElementsByTagName("ul");
                        li = div.getElementsByTagName("li");
                        for (i = 0; i < li.length; i++) {
                          a = li[i].getElementsByTagName("a")[0];
                          txtValue = a.getAttribute("data-class");
                          if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            li[i].style.display = "";
                          } else {
                            li[i].style.display = "none";
                          }
                        }
                      }
                      else {
                        $("#icons_category_button_stylling").css("display", "block")
                        $("#icons_without_category_button_stylling").css("display", "none")
                      }
                    }
                    function searchIcons(obj) {
                      var input, filter, ul, div, li, a, i, txtValue, h5;
                      input = obj;
                      if (input.value.length > 0) {
                        $("#icons_category").css("display", "none")
                        $("#icons_without_category").css("display", "block")
                        filter = input.value.toUpperCase();
                        div = document.getElementById("icons_without_category");
                        ul = document.getElementsByTagName("ul");
                        li = div.getElementsByTagName("li");
                        for (i = 0; i < li.length; i++) {
                          a = li[i].getElementsByTagName("a")[0];
                          txtValue = a.getAttribute("data-class");
                          if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            li[i].style.display = "";
                          } else {
                            li[i].style.display = "none";
                          }
                        }
                      }
                      else {
                        $("#icons_category").css("display", "block")
                        $("#icons_without_category").css("display", "none")
                      }
                    }
                    var string = `<div class="row" white-space="nowrap">`
                    var list = ["fas fa-compass", "fas fa-address-card", "fas fa-clipboard", "fas fa-wallet", "fas fa-dollar-sign", "fas fa-table", "fas fa-atom", "fas fa-tasks", "fas fa-th", "fas fa-business-time", "fas fa-chart-area", "fas fa-chart-line", "fas fa-chart-bar", 'fas fa-chart-pie', "fas fa-sitemap", "fas fa-highlighter", "fas fa-th-large", "fas fa-globe", "fas fa-paperclip", "fas fa-project-diagram", "fas fa-print", "fas fa-i-cursor", "fas fa-indent", "fas fa-list-alt", "fas fa-list-ul", "fas fa-outdent", "far fa-building", "fas fa-bullseye", "fas fa-calendar", "far fa-compass"]
                    for (i = 0; i < list.length; i++) {
                      if ($('.listoficon2').attr('icon-selected') == list[i]) {

                        string += `<div class="col-2 icons"><a href="#" ><i class="${list[i]} singleIcon" style="font-size:1rem;color: white;font-size: 1rem;background: var(--primary-color);padding: 5px;border-radius: 5px;" ></i>&nbsp&nbsp</a></div>`
                      }
                      else {
                        string += `<div class="col-2 icons"><a href="#" ><i class="${list[i]} singleIcon" style="font-size:1rem;color: black;font-size: 1rem;background: #fff;padding: 5px;border-radius: 5px;" ></i>&nbsp&nbsp</a></div>`
                      }
                    }
                    string += `</div>`
                    $('#tableNameDiv').find('.listoficontitlename').append(string)
                    function customColorChange(obj){
                      viewC.style.backgroundColor = $(obj).val()
                      hexC.textContent = $(obj).val()
                    }


                    function pick() {
                      viewC.style.backgroundColor = view.style.backgroundColor
                      hexC.textContent = hex.textContent
                    }
                    function moreColors(obj){
                      event.preventDefault()
                      $('#morecolors').modal('show')
                    }
                    function saveIconColor(obj){
                      $(".app_icon_color_code .color-checkspan").empty()
                      $(".app_icon_color_code .color-checkspan").attr("id","")
                    }
                    function mouseOverColor(a, b) {
                      view.style.backgroundColor = a
                      hex.textContent = a
                    }
                    var color = ['dc143c', 'ff8c00', 'ffd700', '32cd32', '40e0d0', '00bfff', '1e90ff', 'ff1493', '9400d3', '696969','f0f8ff','fffacd','fce8b1','f5cedb','c9dcf2','bce6cd']
                    var code = ""

                    for (i = 0; i < color.length; i++) {
                      code += '<div class="col-2 color-checkspan" style="background-color:#' + color[i] + '"></div><br>'
                    }

                    $('#tableNameDiv').find(".app_icon_color_code").html(code);
                    $(".app_icon_color_code .color-checkspan").click(function () {
                      $(".app_icon_color_code .color-checkspan").empty()
                      $(".app_icon_color_code .color-checkspan").attr("id","")
                      $(this).empty()
                      $(this).append('<i class="fa-solid fa-check" style="margin-top: 6px;margin-left: 8px;"></i>');
                      $(this).attr("id", "selectedIconColor")
                    })
                    $('.singleIcon').click(function(){
                      $('.singleIcon').css("color", "black");
                      $('.singleIcon').css("background", "#fff");
                      $('.singleIcon').attr("id", "");
                      $(this).attr("id", "selectedIcon")
                      $(this).css("color", "white");
                      $(this).css("background", "var(--primary-color)");
                    })
                    $(".icon_a").click(function () {
                      $(".icon_a").attr("selected_a", "false");
                      $(".icon_a").css("background-color", "#f9f9f9");
                      $(".icon_a").css("color", "black");
                      $(this).attr("selected_a", "true");
                      $(this).css("background-color", "var(--secondary-color)");
                      $(this).css("color", "white");
                    })
                    function resetButtonTitleName(obj){
                      event.preventDefault()
                      $('.singleIcon').css("color", "black");
                      $('.singleIcon').css("background", "#fff");
                      $('.singleIcon').attr("id", "");
                      $(".icon_a").attr("selected_a", "false");
                      $(".icon_a").css("background-color", "#f9f9f9");
                      $(".icon_a").css("color", "black");
                      $(".app_icon_color_code .color-checkspan").empty()
                      $(".app_icon_color_code .color-checkspan").attr("id","")
                      $('#hexC').empty()
                      viewC.style.backgroundColor = null
                      $('#titleNameBtn').attr('data-list','')
                      $('#pagination').attr('data-list','')
                      $('#tableNameDiv').find('.textInput').val('').trigger('change')
                    }
                    function saveIconTitleName(obj){
                      $('.singleIcon').css("color", "black");
                      $('.singleIcon').css("background", "#fff");
                      $('.singleIcon').attr("id", "");
                    }
                    function saveTableNameDiv(obj){
                      var outerIconColor = false
                      var iconColorSelected = ''
                      var outerIcon = false
                      var iconSelected = ''
                      $(".app_icon_color_code .color-checkspan").each(function(){
                        if ($(this).attr('id') == 'selectedIconColor'){
                          outerIconColor = true
                          iconColorSelected = $(this).css('background-color')
                        }
                      })
                      if (outerIconColor == false){
                        iconColorSelected = $('#viewC').css('background-color')
                      }
                      $('.singleIcon').each(function(){
                        if ($(this).attr('id') == 'selectedIcon'){
                          outerIcon = true
                          iconSelected = $(this).attr('class')
                        }
                        if (outerIcon == false){
                          $(".icon_a").each(function(){
                            if ($(this).attr('selected_a') == 'true'){
                              iconSelected = $(this).attr('data-class')
                            }
                          })
                        }
                      })

                      var selectedTableNameText = $('#tableNameDiv').find('.textInput').val()
                      var values = {}
                      if (selectedTableNameText != ''&& iconSelected !=''){
                        values[selectedTableNameText] = {'icon':iconSelected,'iconColor':iconColorSelected}
                      }

                      $('#titleNameBtn').attr('data-list',JSON.stringify(values))
                    }
                    function parseColor(color) {
                      var arr=[]; color.replace(/[\d+\.]+/g, function(v) { arr.push(parseFloat(v)); });
                      return "#" + arr.slice(0, 3).map(toHex).join("")
                    }
                    function toHex(int) {
                        var hex = int.toString(16);
                        return hex.length == 1 ? "0" + hex : hex;
                    }
                    function titleName(obj){
                      $('.singleIcon').css("color", "black");
                      $('.singleIcon').css("background", "#fff");
                      $('.singleIcon').attr("id", "");
                      $(".icon_a").attr("selected_a", "false");
                      $(".icon_a").css("background-color", "#f9f9f9");
                      $(".icon_a").css("color", "black");
                      $(".app_icon_color_code .color-checkspan").empty()
                      $(".app_icon_color_code .color-checkspan").attr("id","")
                      $('#hexC').empty()
                      viewC.style.backgroundColor = null
                      $('#tableNameDiv').find('.textInput').val($('#selectTablePC').val()).trigger('change')
                      var attrData = $(obj).attr('data-list')
                      if (attrData == ''|| attrData =='{}'){

                      }else {
                        var parsedAttrdata = JSON.parse(attrData)
                        for (let i in parsedAttrdata){
                          $('#tableNameDiv').find('.textInput').val(i).trigger('change')
                          var outerIcon = false
                          var outerIconColor = false
                            $('.singleIcon').each(function(){
                              if ($(this).attr('class') == parsedAttrdata[i]['icon']){
                                outerIcon = true
                                $(this).attr("id", "selectedIcon")
                                $(this).css("color", "white");
                                $(this).css("background", "var(--primary-color)");
                              }
                            })
                            if (outerIcon == false){
                              $(".icon_a").each(function(){
                                if ($(this).attr('data-class') == parsedAttrdata[i]['icon']){
                                  $(this).attr("selected_a", "true");
                                  $(this).css("background-color", "var(--primary-color)");
                                  $(this).css("color", "white");
                                }
                              })
                            }
                            $(".app_icon_color_code .color-checkspan").each(function(){
                              if ($(this).css('background-color') == parsedAttrdata[i]['iconColor']){
                                outerIconColor = true
                                $(this).empty()
                                $(this).append('<i class="fa-solid fa-check" style="margin-top: 6px;margin-left: 8px;"></i>');
                                $(this).attr("id", "selectedIconColor")
                              }
                            })
                            if (outerIconColor == false){
                              $('#viewC').css('background-color',parsedAttrdata[i]['iconColor'])
                              hexC.textContent = parseColor(parsedAttrdata[i]['iconColor'])
                            }
                        }
                      }
                    }
                    function titleNameMultipleModal(obj){
                      $('#dataTableModal').modal('hide')
                      $('#titleNameMultipleModal').modal('show');

                    }
                    function titleNameMultipleModalClose(obj){
                      $('#dataTableModal').modal('show')
                      $('#titleNameMultipleModal').modal('hide');
                    }
                    var titleNameMultipleContentCardNo = 0
                    function titleNameMultipleModalContent(obj){
                      var content = titleNameMultipleContent()
                      $('#titleNameMultipleModal').find('.modal-body').append(content)
                      var addedCard =$('#titleNameMultipleModal').find('.modal-body').find(`#masterstyling${titleNameMultipleContentCardNo}`).slice(-1)
                      var tableList = $('#selectTablePC').val()
                      for (let i in tableList){
                        $(addedCard).find('.TableMultiple').append(`
                      <option value="${tableList[i]}">${tableList[i]}</option>
                      `)
                      }
                      var color = ['dc143c', 'ff8c00', 'ffd700', '32cd32', '40e0d0', '00bfff', '1e90ff', 'ff1493', '9400d3', '696969','f0f8ff','fffacd','fce8b1','f5cedb','c9dcf2','bce6cd','ff8c9f','d6aaf0','755b31','992e90']
                      var code = ""

                      for (i = 0; i < color.length; i++) {
                        code += '<div class="col-2 color-checkspanMultiple" style="background-color:#' + color[i] + '"></div><br>'
                      }

                      $(addedCard).find(".app_icon_color_codeMultiple").html(code);

                      var string = `<div class="row" white-space="nowrap">`
                        var list = ["fas fa-compass", "fas fa-address-card", "fas fa-clipboard", "fas fa-wallet", "fas fa-dollar-sign", "fas fa-table", "fas fa-atom", "fas fa-tasks", "fas fa-th", "fas fa-business-time", "fas fa-chart-area", "fas fa-chart-line", "fas fa-chart-bar", 'fas fa-chart-pie', "fas fa-sitemap", "fas fa-highlighter", "fas fa-th-large", "fas fa-globe", "fas fa-paperclip", "fas fa-project-diagram", "fas fa-print", "fas fa-i-cursor", "fas fa-indent", "fas fa-list-alt", "fas fa-list-ul", "fas fa-outdent", "far fa-building", "fas fa-bullseye", "fas fa-calendar", "far fa-compass"]
                        for (i = 0; i < list.length; i++) {
                          if ($('.listoficon2').attr('icon-selected') == list[i]) {

                            string += `<div class="col-2 icons"><a href="#" ><i class="${list[i]} singleIconMultiple" style="font-size:1rem;color: white;font-size: 1rem;background: var(--primary-color);padding: 5px;border-radius: 5px;" ></i>&nbsp&nbsp</a></div>`
                          }
                          else {
                            string += `<div class="col-2 icons"><a href="#" ><i class="${list[i]} singleIconMultiple" style="font-size:1rem;color: black;font-size: 1rem;background: #fff;padding: 5px;border-radius: 5px;" ></i>&nbsp&nbsp</a></div>`
                          }
                        }
                        string += `</div>`
                        $(addedCard).find('.listoficontitlenameMultiple').append(string)
                        $(".app_icon_color_codeMultiple .color-checkspanMultiple").click(function () {
                          $(this).parent().parent().find(".app_icon_color_codeMultiple .color-checkspanMultiple").empty()
                          $(this).parent().parent().find(".app_icon_color_codeMultiple .color-checkspanMultiple").attr("id","")
                          $(this).empty()
                          $(this).append('<i class="fa-solid fa-check" style="margin-top: 7px;margin-left: 19px;"></i>');
                          $(this).attr("id", "selectedIconColor")
                          $(this).parent().parent().find('.more-iconcolors-buttonMultiple').attr('data-list','');
                        })
                        $('.singleIconMultiple').click(function(){
                          $(this).parent().parent().parent().parent().parent().find('.singleIconMultiple').css("color", "black");
                          $(this).parent().parent().parent().parent().parent().find('.singleIconMultiple').css("background", "#fff");
                          $(this).parent().parent().parent().parent().parent().find('.singleIconMultiple').attr("id", "");
                          $(this).attr("id", "selectedIcon")
                          $(this).css("color", "white");
                          $(this).css("background", "var(--primary-color)");
                          $(this).parent().parent().find('.more-icons-buttonMultiple').attr('data-list','');
                        })
                        $(".icon_aMultiple").click(function () {
                          $(".icon_aMultiple").attr("selected_a", "false");
                          $(".icon_aMultiple").css("background-color", "#f9f9f9");
                          $(".icon_aMultiple").css("color", "black");
                          $(this).attr("selected_a", "true");
                          $(this).css("background-color", "var(--primary-color)");
                          $(this).css("color", "white");
                        })
                        $(addedCard).find('select').each(function(){
    $(this).select2()
  })
                    }
                    function pickMultiple() {
                      viewCMultiple.style.backgroundColor = viewMultiple.style.backgroundColor
                      hexCMultiple.textContent = hexMultiple.textContent
                    }
                    function mouseOverColorMultiple(a,b){
                      viewMultiple.style.backgroundColor = a
                      hexMultiple.textContent = a
                    }
                    function customColorChangeMultiple(obj){
                      viewCMultiple.style.backgroundColor = $(obj).val()
                      hexCMultiple.textContent = $(obj).val()
                    }

                    function titleNameMultipleContent(){
                      titleNameMultipleContentCardNo++;
                      return(`
                      <div class="card collapsed-card" id="masterstyling${titleNameMultipleContentCardNo}" style="margin-left:-12px;margin-right: -12px;">
                        <div class="card-header row">
                          <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
                            <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select table:</p>
                            <div class="col-4" style="margin-left:8px;">
                              <select  class="select2 form-control TableMultiple" onchange="tableNameTitleNameMultiple(this)">
                                <option value="" disabled selected>Tables</option>
                              </select>
                              </div>
                          </div>
                              <div class="col-2">
                                <div class="card-tools float-right">
                                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                                  <button type="button" class="btn btn-tool" onclick="removeContentTitleNameMultiple(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                              </div>
                            </div>
                        </div>
                        <div class="card-body" style="max-height: 25rem;">
                          <h6>Select icon and color</h6>
                          <div class="row" style="margin-bottom:18px;">
                            <div class="col-6">
                              <div class="row app_icon_color_codeMultiple">

                              </div>
                              <button class="more_colors more-iconcolors-buttonMultiple"  onClick="moreColorsMultiple(this)" >more colors</button>
                            </div>
                            <div class="col-6">
                              <div class="listoficontitlenameMultiple">

                              </div>
                              <button class="more_colors more-icons-buttonMultiple"  onclick="moreIconsMultiple(this)"style="margin-top: -5px;">more icons</button>
                            </div>
                            <div class="col-6">
                              <h6>Select table name</h6>
                              <input type="text" class="textinput textInput form-control  ">
                            </div>

                          </div>
                        </div>
                      </div>`)

                    }
                    function moreColorsMultiple(obj){
                      $('#morecolorsMultiple').modal('show')
                      $('#hexCMultiple').empty()
                      viewCMultiple.style.backgroundColor = null
                      $('#hexMultiple').empty()
                      viewMultiple.style.backgroundColor = null
                      $('#custom-color-iconMultiple').val('#000000').trigger('change')
                      var index = $(obj).parent().parent().parent().parent().attr('id')
                      $('#morecolorsMultiple').find('#save-morecolorsMultiple').attr('data-list',index)
                      if ($(obj).attr('data-list')){
                      var selectedColor = $(obj).attr('data-list')
                      if (selectedColor != ''){
                        viewCMultiple.style.backgroundColor = selectedColor
                        hexCMultiple.textContent = parseColor(selectedColor)
                      }
                    }
                    }
                    function saveIconColorMultiple(obj){
                      var index = $(obj).attr('data-list')
                      var selectedColor = viewCMultiple.style.backgroundColor
                      $('#titleNameMultipleModal').find(`#${index}`).find('.more-iconcolors-buttonMultiple').attr('data-list',selectedColor)
                      $('#titleNameMultipleModal').find(`#${index}`).find('.color-checkspanMultiple').empty()
                      $('#titleNameMultipleModal').find(`#${index}`).find('.color-checkspanMultiple').attr("id","")
                    }
                    function moreIconsMultiple(obj){
                      $('#moreiconsMultiple').find(".icon_aMultiple").attr("selected_a", "false");
                      $('#moreiconsMultiple').find(".icon_aMultiple").css("background-color", "#f9f9f9");
                      $('#moreiconsMultiple').find(".icon_aMultiple").css("color", "black");
                      var index = $(obj).parent().parent().parent().parent().attr('id')
                      $('#moreiconsMultiple').find('#save-moreIconsMultiple').attr('data-list',index)
                      var selectedIcon = $(obj).attr('data-list')
                      if (selectedIcon != ''){
                        $('#moreiconsMultiple').find(".icon_aMultiple").each(function(){
                          if ($(this).attr('data-class') == selectedIcon){
                            $(this).attr("selected_a", "true");
                            $(this).css("background-color", "var(--primary-color)");
                            $(this).css("color", "white");
                          }
                        })
                      }
                      $('#moreiconsMultiple').modal('show')

                    }
                    function saveIconTitleNameMultiple(obj){
                      var index = $(obj).attr('data-list')
                      $('#moreiconsMultiple').find(".icon_aMultiple").each(function(){
                        if ($(this).attr('selected_a') =='true'){
                          var selectedIcon = $(this).attr('data-class')
                          $('#titleNameMultipleModal').find(`#${index}`).find('.more-icons-buttonMultiple').attr('data-list',selectedIcon)
                        }
                      })
                      $('#titleNameMultipleModal').find(`#${index}`).find('.singleIconMultiple').css("color", "black");
                      $('#titleNameMultipleModal').find(`#${index}`).find('.singleIconMultiple').css("background", "#fff");
                      $('#titleNameMultipleModal').find(`#${index}`).find('.singleIconMultiple').attr("id", "");
                    }
                    function searchIconsMultiple() {
                      var input, filter, ul, div, li, a, i, txtValue, h5;
                      input = document.getElementById("search-icons");
                      if (input.value.length > 0) {
                        $("#icons_categoryMultiple").css("display", "none")
                        $("#icons_without_categoryMultiple").css("display", "block")
                        filter = input.value.toUpperCase();
                        div = document.getElementById("icons_without_categoryMultiple");
                        ul = document.getElementsByTagName("ul");
                        li = div.getElementsByTagName("li");
                        for (i = 0; i < li.length; i++) {
                          a = li[i].getElementsByTagName("a")[0];
                          txtValue = a.getAttribute("data-class");
                          if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            li[i].style.display = "";
                          } else {
                            li[i].style.display = "none";
                          }
                        }
                      }
                      else {
                        $("#icons_categoryMultiple").css("display", "block")
                        $("#icons_without_categoryMultiple").css("display", "none")
                      }
                    }
                    function removeContentTitleNameMultiple(obj){
                      $(obj).parent().parent().parent().parent().remove()
                    }
                    function tableNameTitleNameMultiple(obj){
                      $(obj).parent().parent().parent().parent().find('.card-body').find('.textinput').val($(obj).val()).trigger('change')
                    }
                    function titleNameMultipleModalSave(obj){
                      var card = $("#titleNameMultipleModal").find('.card')
                      var lengthOfCards = card.length;
                      var values = {}
                      for (let i = 0; i < lengthOfCards; i++) {
                        var outerIconColor = false
                        var iconColorSelected = ''
                        var outerIcon = false
                        var iconSelected = ''
                        var singleCard = $("#titleNameMultipleModal").find('.card').eq(i)
                        $(singleCard).find('.color-checkspanMultiple').each(function(){
                          if ($(this).attr('id') == 'selectedIconColor'){
                            outerIconColor = true
                            iconColorSelected = $(this).css('background-color')
                          }
                        })
                        if (outerIconColor == false){
                          iconColorSelected = $(singleCard).find('.more-iconcolors-buttonMultiple').attr('data-list')
                        }
                        $(singleCard).find('.singleIconMultiple').each(function(){
                          if ($(this).attr('id') == 'selectedIcon'){
                            outerIcon = true
                            iconSelected = $(this).attr('class')
                          }
                        })
                        if (outerIcon == false){
                          iconSelected = $(singleCard).find('.more-icons-buttonMultiple').attr('data-list')
                        }
                        values[$(singleCard).find('.TableMultiple').val()] = {'icon':iconSelected,'iconColor':iconColorSelected,tableName:$(singleCard).find('.textinput').val()}
                      }
                      $('#titleNameBtn').attr('data-list',JSON.stringify(values))
                      $('#dataTableModal').modal('show')
                      $('#titleNameMultipleModal').modal('hide');
                    }
                    function titleNameMultiple(obj){
                      var attrData = $(obj).attr('data-list')
                      if (attrData == ''|| attrData =='{}'){

                      }else{
                        var parsedAttrdata = JSON.parse(attrData)
                        $('#titleNameMultipleModal').find('.modal-body').empty()
                        $('#titleNameMultipleModal').find('.modal-body').append(`
                        <div class="card-header">
                          <div class="float-right" style="margin-right: 6px;">
                            <button onclick="titleNameMultipleModalContent(this)" class="btn btn-primary" type="button">Add title name <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
                          </div>
                        </div>
                        `)
                        var k = 0
                        for (let i in parsedAttrdata){
                          titleNameMultipleModalContent()
                          var singleCard = $('#titleNameMultipleModal').find('.card').eq(k)
                          $(singleCard).find('.TableMultiple').val(i).trigger('change')
                          var outerIcon = false
                          var outerIconColor = false
                          $(singleCard).find('.singleIconMultiple').each(function(){
                            if ($(this).attr('class') == parsedAttrdata[i]['icon']){
                              outerIcon = true
                              $(this).attr("id", "selectedIcon")
                              $(this).css("color", "white");
                              $(this).css("background", "var(--primary-color)");
                            }
                          })
                          if (outerIcon == false){
                            $(singleCard).find('.more-icons-buttonMultiple').attr('data-list',parsedAttrdata[i]['icon'])
                          }
                          $(singleCard).find(".app_icon_color_codeMultiple .color-checkspanMultiple").each(function(){
                            if ($(this).css('background-color') == parsedAttrdata[i]['iconColor']){
                              outerIconColor = true
                              $(this).empty()
                              $(this).append('<i class="fa-solid fa-check" style="margin-top: 7px;margin-left: 19px;"></i>');
                              $(this).attr("id", "selectedIconColor")
                            }
                          })
                          if (outerIconColor == false){
                            $(singleCard).find('.more-iconcolors-buttonMultiple').attr('data-list',parsedAttrdata[i]['iconColor'])
                          }
                          $(singleCard).find('.textinput').val(parsedAttrdata[i]['tableName']).trigger('change')
                          k = k + 1
                        }
                      }
                    }
                    document.getElementById('selectAll_listAction').onclick = function() {
                      var checkboxes = $("#ListView_Action").find(".listofActions").find('input[type=checkbox]')

                      document.getElementById('save_actionbuttonid').disabled=false
                      document.getElementById('notrequiredListView_Action').checked=false
                      for (var checkbox of checkboxes) {
                        if ($("#selectTemplate").val() == "Approval Template" && checkbox.checked == false){
                          checkbox.removeAttribute('disabled');
                        }
                        if(checkbox.getAttribute('name') != "NotRequiredListView_Action" && checkbox.getAttribute('name') != "Perm Delete Record" && checkbox.getAttribute('name') != "Temp Delete Record"){

                          if(checkbox.getAttribute('name') == "Delete Record"){
                            checkbox.checked = this.checked;
                            if (checkbox.checked){
                              $('.listview_actionSubElements').find('input[type=checkbox]').eq(2).parent().parent().css("display","block")
                              $('.listview_actionSubElements').find('input[type=checkbox]').eq(3).parent().parent().css("display","block")
                              $('.listview_actionSubElements').find('input[type=checkbox]').eq(2).prop('checked',true)
                              $('.listview_actionSubElements').find('input[type=checkbox]').eq(3).prop('checked',true)
                            }else{
                              $('.listview_actionSubElements').find('input[type=checkbox]').eq(2).parent().parent().css("display","none")
                              $('.listview_actionSubElements').find('input[type=checkbox]').eq(3).parent().parent().css("display","none")
                              $('.listview_actionSubElements').find('input[type=checkbox]').eq(2).prop('checked',false)
                              $('.listview_actionSubElements').find('input[type=checkbox]').eq(3).prop('checked',false)
                            }
                          }else{
                            checkbox.checked = this.checked;
                            if((checkbox.getAttribute('name') == "Approve" || checkbox.getAttribute('name') == "Reject" || checkbox.getAttribute('name') == "Enable Comments" || checkbox.getAttribute('name') == "Delegate Approval" || checkbox.getAttribute('name') == "Approval Wall" || checkbox.getAttribute('name') == "Send to previous approver") && ($("#selectTemplate").val() != "Approval Template")){
                              checkbox.checked = this.unchecked;
                            }
                            if (checkbox.getAttribute('name') == "PDF Action Button"){
                              checkbox.checked = this.unchecked;
                            }
                          }
                        }
                      }

                    }

                    document.getElementById('notrequiredListView_Action').onclick = function() {
                      if(this.checked == true){
                        $("#ListView_Action").find(".listofActions").find('input[type=checkbox]').each(function(){
                          this.checked=false
                        })
                        document.getElementById('selectAll_listAction').checked=false
                        document.getElementById('action_btn_config_group_together').checked=false
                      }
                      document.getElementById('save_actionbuttonid').disabled=false
                    }

                    $("#ListView_Action").find(".listofActions").find('input[type=checkbox]').on('change',function(){
                      if(this.checked == false){

                        document.getElementById('notrequiredListView_Action').checked=false
                        document.getElementById('selectAll_listAction').checked=false

                      }else{
                        document.getElementById('notrequiredListView_Action').checked=false
                      }
                    })


                    $("#toggleeditcolAlign").on("change", function() {
                      $("#labelSelectionColAli").toggle()
                    });

                    function addPageRowAlign(verboseNameAlign) {
                      if (verboseNameAlign == undefined) {
                        $.ajax({
                              url: window.location.pathname,
                              data: {
                                'operation': 'dropFieldList',
                                'tableName':modelName,
                              },
                              type: "POST",
                              dataType: "json",
                              success: function (data) {
                                  verboseNameAlign = {}
                                  for (var i = 0; i < data.fieldList.length; i++) {
                                    verboseNameAlign[data.fieldNameList[i]] = data.fieldList[i]
                                  }

                                  $(".labelrowAlign").append(`
                                  <div class="newrowpageAlign mb-2 mx-1 px-3">
                                    <div class="row">
                                    <div class="col-4">
                                      <div class="col-12 list-group">
                                        <select name="column" class="form-control select23 pageFieldClass1Align label_name_op">
                                            <option value="" disabled></option>
                                          </select>
                                      </div>

                                    </div>
                                    <div class="col-4" >
                                      <div class="col-12 list-group">
                                        <select name="header" class="form-control select23">
                                            <option value="dt-head-center">Center</option>
                                            <option value="dt-head-left">Left</option>
                                            <option value="dt-head-right">Right</option>
                                          </select>
                                      </div>
                                      </div>
                                      <div class="col-4">
                                      <div class="col-12 list-group">
                                        <select name="body" class="form-control select23">
                                            <option value="dt-body-center">Center</option>
                                            <option value="dt-body-left">Left</option>
                                            <option value="dt-body-right">Right</option>
                                          </select>
                                      </div>
                                      </div>
                                    </div>
                                  </div>`);
                                  for (let [key,value] of Object.entries(verboseNameAlign)) {
                                    $(".label_name_op").last().append(`<option value="${key}">${value}</option>`)
                                  }
                                  var additionalFields = $("#appFields_ref_cols").val();
                                  var reloadConfig = $("#appFields_ref_table").attr("data-data");
                                  if (additionalFields.length > 0) {
                                    for (let ext of additionalFields) {
                                      $(".label_name_op").last().append(`<option value="${ext}">${ext}</option>`)
                                    }
                                  } else if (reloadConfig) {
                                    reloadConfig = JSON.parse(reloadConfig);
                                    for (let ext of reloadConfig) {
                                      $(".label_name_op").last().append(`<option value="${ext}">${ext}</option>`)
                                    }
                                  }
                                  $(".select23").select2()
                                },
                              error: function () {
                                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                              }

                        })
                      }else{

                        $(".labelrowAlign").append(`
                        <div class="newrowpageAlign mb-2 mx-1 px-3">
                          <div class="row">
                          <div class="col-4">
                            <div class="col-12 list-group">
                              <select name="column" class="form-control select23 pageFieldClass1Align label_name_op">
                                  <option value="" disabled></option>
                                </select>
                            </div>

                          </div>
                          <div class="col-4">
                            <div class="col-12 list-group">
                              <select name="header" class="form-control select23">
                                  <option value="dt-head-center">Center</option>
                                  <option value="dt-head-left">Left</option>
                                  <option value="dt-head-right">Right</option>
                                </select>
                            </div>
                            </div>
                            <div class="col-4">
                            <div class="col-12 list-group">
                              <select name="body" class="form-control select23">
                                  <option value="dt-body-center">Center</option>
                                  <option value="dt-body-left">Left</option>
                                  <option value="dt-body-right">Right</option>
                                </select>
                            </div>
                            </div>
                          </div>
                        </div>`);
                        for (let [key,value] of Object.entries(verboseNameAlign)) {
                          $(".label_name_op").last().append(`<option value="${key}">${value}</option>`)
                        }
                        var additionalFields = $("#appFields_ref_cols").val();
                        var reloadConfig = $("#appFields_ref_table").attr("data-data");
                        if (additionalFields.length > 0) {
                          for (let ext of additionalFields) {
                            $(".label_name_op").last().append(`<option value="${ext}">${ext}</option>`)
                          }
                        } else if (reloadConfig) {
                          reloadConfig = JSON.parse(reloadConfig);
                          for (let ext of reloadConfig) {
                            $(".label_name_op").last().append(`<option value="${ext}">${ext}</option>`)
                          }
                        }
                        $(".select23").select2()
                      }
                    }

                    function delPageRowAlign() {
                        $(".pageFieldClass1Align").last().parent().parent().parent().parent().remove()
                    }

                  </script>
                  <!-- Action End -->

                  <div id='Custom' class="subCategories" style="display:none;">
                    <p style="margin-left: 34%;font-size:larger"><strong>Custom columns</strong></p>

                      <div class="form-group" style="margin-left:5%;">
                        <div class="form-group col-12" id='customColumnDisp'>
                          <label class="acies_label col-md-12">Columns with values as list of dictionaries</label>
                          <select id="customColumn" class="select2 form-control" name="template" multiple>
                          </select>
                        </div>
                        </div>
                      <button type="button" class="btn btn-primary saveElementsButton" data-subCategory="Custom" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;">Save</button>
                  </div>
                  <div id='customTemplateListView' class="subCategories" style="display:none;">
                    <p style="margin-left: 34%;font-size:larger"><strong>Custom template</strong></p>

                      <div class="form-group" style="margin-left:5%;">
                        <div id="div_id_active" class="custom-control custom-checkbox">
                          <input type="checkbox" name="customTemplateListView" class="checkboxinput custom-control-input notRequired" id="customTemplateCheck">
                          <label for="customTemplateCheck" class="custom-control-label">
                            Custom template
                          </label>
                        </div>
                      </div>
                      <button type="button" class="btn btn-primary saveElementsButton" data-subCategory="customTemplateListView" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;">Save</button>
                  </div>
                  <div id='Alert' class="subCategories" style="display:none;">
                    <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Alert</p>

                      <div class="form-group" style="margin-left:35%;">
                          <div id="div_id_active" class="custom-control custom-checkbox">
                            <input type="checkbox" name="NotRequiredAlert" class="checkboxinput custom-control-input notRequired" id="notrequiredAlert">
                            <label for="notrequiredAlert" class="custom-control-label">
                              Not Required
                            </label>
                          </div>
                        </div>
                        <div class="alertSubElements elementCheckboxes">
                        {%for i in alertSubElements%}
                          <div class="form-group" style="margin-left:1rem;">
                            <div id="div_id_active" class="custom-control custom-checkbox">
                              <input type="checkbox" name="{{i}}" class="checkboxinput custom-control-input" id="{{i}}">
                              <label for="{{i}}" class="custom-control-label">
                                {{i}}
                              </label>
                            </div>
                          </div>
                        {%endfor%}
                      </div>
                      <button type="button" class="btn btn-primary saveElementsButton" data-subCategory="Alert" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" disabled>Save</button>
                  </div>
                  <!-- Formatter -->
                  <div id='Formatter' class="subCategories" style="display:none;">
                    <p style="margin-left: 45%;font-size:larger"><strong>Formatter</strong></p>

                    <div class="form-group" style="margin-left:5%;display:none;" id="showformatTable">
                      <div class="form-group col-12" id='formatTableDisp'>
                        <label class="acies_label col-md-12">Select Tables</label>
                        <select id="formatTab" class="select2 form-control" name="template" multiple>
                        </select>
                      </div>
                      </div>

                      <div class="form-group" style="margin-left:5%;">
                        <div class="form-group col-12" id='formatColumnDisp'>
                          <label class="acies_label col-md-12">Select columns</label>
                          <select id="formatColumn" class="select2 form-control" name="template" multiple>
                          </select>
                        </div>
                        </div>

                        <div class="row">
                          <table class="table table-bordered table-hover fformatTable" style="overflow: auto;margin-left: 2rem;">
                            <thead class="thead-dark">
                              <tr>
                                <th scope="col" style="text-align: center;">Table name</th>
                                <th scope="col" style="text-align: center;">Column name</th>
                                <th scope="col" style="text-align: center;">Action</th>
                              </tr>
                            </thead>
                            <tbody id="formatterTable">

                            </tbody>
                          </table>
                        </div>

                      <input type="hidden" id="configFormat" value="" data-config_formatter="">
                      <button type="button" class="btn btn-primary saveElementsButton" data-subCategory="Custom" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;">Save</button>
                  </div>
              </div>
            </div>
            </form>
          </div>


          </div>
          <div class='card' id="muldrop_list_config_view">
              <div class='card-header' style="padding:0rem;">
                <h5 style="margin-left: -1.5rem;margin-bottom: 0rem;">
                  <button class="btn" style="pointer-events: none; color:black;height: 2rem;border-color:none;color:var(--primary-color);padding-top:0.2rem;font-weight: bold;margin-left: 2rem;">&nbsp;Sub Category Configurations&nbsp;
                  </button></h5>
              </div>
              <div class='card-body' style="max-height:20rem;overflow-y: auto;">
                <form id="labelSelection_mul" method="post">
                  {% csrf_token %}
                  <div class='mb-2 mt-4 mx-1 px-3'>
                    <div class="row">
                      <div class="col-6">
                      <h7 style="font-weight:bold">Default View</h7> <br> <br>
                      <select class="form-control select23 default_mul_view">
                      </select>
                    </div>
                  </div>
                  <br>
                    <div class="row">
                      <div class="col-7">
                        <h7 style="font-weight:bold">View name</h7> <br> <br>
                      </div>
                      <div class="col-5 subElementCards">
                        <h7 style="font-weight:bold">Configuration</h7>
                        <i nrow="0" id="addPageRowID_mul" class="fas fa-plus" onclick="addPageRow_mul()"
                          style="font-size: 17px;cursor: pointer;float: right;">
                        </i>
                        </div>
                      </div>
                    </div>
                  </form>
                <div class="labelrow_mul"></div>
              </div>
          </div>
          <script>
            $(".select23").select2()
            function addPageRow_mul() {
                              $("#addPageRowID_mul").attr('nrow', Number($("#addPageRowID_mul").attr('nrow')) + 1)
                              $(".labelrow_mul").append(`
                                <div class="newrowpage_mul mb-2 mx-1 px-3">
                                  <div class="row">
                                  <div class="col-7" id=''>
                                    <div class="col-12 list-group">
                                      <input type="text" name="labelName_Field" class="pageFieldClass_mul textinput textInput form-control labelmul_op">
                                    </div>

                                  </div>
                                  <div class="col-5 subElementCards">
                                    <div class="row">
                                      <div class="col-10 list-group">
                                        <button type="button" class="btn btn-primary rounded pageFieldClass_mul mulConfig_listview">Configure listview</button>
                                      </div>
                                      <i class="fas fa-times" onclick="delPageRow_mul(this)"
                                        style="font-size: 17px;cursor: pointer;float: right;margin-left: 10px;margin-top:0.45rem;">
                                      </i>
                                    </div>
                                    </div>
                                  </div>
                                </div>`);
                                $(".select23").select2()
                                $('.mulConfig_listview').off('click').on('click', function(){
                                  $('.dataTableModal_mul').modal('show')
                                  $('#formattingColumnBtn_mul').attr('data-list','');
                                  $('#formattingColumnBtn_mul').attr('data-listtwo','');
                                  $('#configure_actionbuttonid_mul').attr('data-list','');
                                  $('#configure_action_column_id_mul').attr('data-list','');
                                  $('#buttonsGroupedTogetherDiv_mul').css('display','none');
                                  $('#buttonsGroupedTogether_mul').attr('data-list','');
                                  $('#formattingColumnBtn_mul').attr('data-listthree','');
                                  $('#group_by_action_btn_sub_mul').attr('data-list','');
                                  $('#group_by_action_mul').css('display','none');
                                  $('#group_by_action_btn_sub_mul').attr('data-list','');
                                  $('#columnNamesRenamesButton_mul').attr('data-list','');
                                  $('#allow_checkbox_column_rename').prop('checked',false);
                                  $('#columnNamesRenamesModal').find('.body-column-header-name').empty();
                                  quick_filters_modal_id_reset_mul();
                                  resetButtonTitleRow_mul()
                                  $('#formattingColumns_mul').find('.formatting-body').empty()
                                  $('#formattingColumns_mul').css('display','none');
                                  $('#titleNameBtn_mul').attr('data-list','');
                                  $("#pagination").attr("data-list","");
                                  $('#titleName_mul').css('display','none');
                                  listViewReset_Mul()
                                  multable_viewname = $(this).parent().parent().parent().parent().find('.pageFieldClass_mul').val()
                                  eqBuilder(`computationMultiTable_${multable_viewname}_${$("#tabHeaderListView").val()}`, "", "modelelementid2")
                                  list_view_config_load_multiple(multable_viewname)
                                })
                                $(".labelmul_op").focusout(function(){
                                  label_name = $(this).val()
                                  index_qw = $(this).parent().parent().parent().parent().index()
                                  $.ajax({
                                        url: window.location.pathname,
                                        data: {
                                            'operation': 'checkview_name',
                                            'label_name': label_name,
                                        },
                                        type: "POST",
                                        dataType: "json",
                                        success: function (data) {
                                            if(data.match == "no"){
                                              Swal.fire({icon: 'warning',text: 'The View name can only have alphanumeric, underscore, space and hyphen.'});
                                              $(".labelrow_mul").find('.labelmul_op').eq(index_qw).val("").trigger("change")
                                            }
                                        },
                                        error: function () {
                                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                        }
                                    });
                                })
                            }
              function delPageRow_mul(This) {
                              if ($("#addPageRowID_mul").attr('nrow') != "0") {
                                $("#addPageRowID_mul").attr('nrow', Number($("#addPageRowID_mul").attr('nrow')) - 1)
                                delete multable_config[$(".pageFieldClass_mul").last().parent().parent().parent().parent().find('.pageFieldClass_mul').val()]
                                delete multable_config_comp[$(".pageFieldClass_mul").last().parent().parent().parent().parent().find('.pageFieldClass_mul').val()]
                                $(This).parent().parent().parent().parent().remove()
                                if(Object.keys(multable_config).length == 0) {
                                  $('#saveListViewConfig')[0].disabled=true
                                }
                                $('.default_mul_view').empty()
                                for(let [key,value] of Object.entries(multable_config) ){
                                    $(".default_mul_view").append(`<option values='${key}'>${key}</option>`);
                                }
                              }
                            }
          </script>
      </div>
    </div>
      <div class="row">
      <div class="col-12">
        <div class="card">
          <div class='card-header' style='padding:0rem;'><h5 style="margin-bottom: 0rem;">
            <button class="btn" style='pointer-events: none; color:white;height: 2rem;width:7rem;border-color:none;color:var(--primary-color);padding-top:0.2rem;font-weight: bold;'>&nbsp;Preview&nbsp;
            </button></h5>
              <div id="create_view_display_selection_id" class="custom-control custom-checkbox" style="align-self: center;  margin-left: auto;display:none" >
                <input type="checkbox" name="create_view_display_selection" class="checkboxinput custom-control-input" id="create_view_display_selection" >
                <label for="create_view_display_selection" class="custom-control-label float-right" checked>
                      Show create view as tab&nbsp;&nbsp;&nbsp;
                </label>
              </div>
              <div id="2selectblock" style="align-self: center; margin-left: auto;padding:15px;display: none;margin-top:-50px" class="form-inline">
                <div class="d-flex flex-row-reverse mt-4 pr-2">
                  <div class="modal fade" id="tablemapmodal" role="dialog" data-focus="false" class="">
                    <div class="modal-dialog" style="max-width:500px;">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <!-- Modal header-->
                        <div class="modal-header">
                          <h6 class="modal-title">Add mapping</h6>
                          <button type="button" class="close" onclick="$('#tablemapmodal').modal('hide')">&times;</button>
                        </div>
                        <!-- Modal body-->
                        <div class="modal-body">
                          <div class="row d-flex justify-content-center mr-4">
                            <button onclick="addrowmap()" class="btn btn-sm" style="margin-left: auto;background: var(--primary-color);color: white;">
                              <i class="fa fa-plus"></i></button>
                            </div>
                          <div class="row d-flex justify-content-center">
                            <div id="addrowm">
                          </div>
                        </div>
                            </div>
                        <!-- Modal footer-->
                        <div class="modal-footer">
                          <button type="button" class="btn btn-primary btn-xs" id="tablemapsave" onclick="$('#tablemapmodal').modal('hide')">Save</button>
                        </div>
                      </div>
                    </div>
                  </div><script>$(`#select2`).select2()
                    </script>

                  <button class="btn btn-sm btn-secondary d-flex justify-content-end" data-toggle="modal" data-target="#tablemapmodal" onclick="" id="map-save-data" table-map-data="">Add createview mapping</button>
                  </div>

                  </div>
          </div>
            <div id="previewCard"></div>

          </div>
        </div>
      </div>
      </div>
      <div id="listViewModalFooterContainer" class="modal-footer">
        <input type="button" name="save" value="Compare With Existing" class="btn btn-primary buttonstyling acies_btn acies_btn-primary compareWithExisting" style="margin-right:4px;display: none;">
        <button type="button" class="btn btn-primary previewCustomTemplate" onclick="fetchTemplate.call(this,'fetchListViewConfigProcessCanvas')" disabled>Custom Template</button>
        <button type="button" class="btn btn-primary" id='resetListViewConfig'>Reset</button>
        <button type="button" class="btn btn-primary" id='saveListViewConfig' disabled>Save</button>
      </div>
    </div>
    </div>
  </div>

    <div class="modal fade dataTableModal_mul" role="dialog" data-focus="false" aria-labelledby="dataTableModalLabel_mul" aria-hidden="true">

      <div class="modal-fullscreen" role="document" style="padding: 1rem;">
        <div class="modal-content">
           <div class="modal-header" style='background:#565a5e; color:white;'>
            <h5 class="modal-title" id="dataTableModalLabel" style="margin-left: 40%;">Configure elements</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" style="overflow-y: scroll ;max-height: 80%;">
            <div class="row">
            <div class="col-5">
              <div class='card'>
                <div class='card-header' style='padding:0rem;'><h5 style="margin-left: -1.5rem;margin-bottom: 0rem;">
                  <button class="btn" style='pointer-events: none; color:black;height: 2rem;border-color:none;color:var(--primary-color);padding-top:0.2rem;width: 10rem;font-weight: bold;'>&nbsp;Category&nbsp;
                  </button></h5></div>

                <div class='card-body' style="max-height:18rem;overflow-y: auto;">
                  <form id="categoryForm" method="post">
                    {% csrf_token %}
                    <div class="row">
                  <div class="form-group col-12" id="basicfilter_add_def_mul">
                    <label class="acies_label col-md-12">Set Default Filter:</label>
                    <input type='button' id="basicfilter_add_mul" data-toggle="modal" data-target="#basicfilter_mul" value='Add Default Filter' style='border-radius: 5px; color: white; width:100%; background-color: rgb(86, 90, 94); border-color: rgb(86, 90, 94);'>

                    <script>
                      $("#basicfilter_add_mul").on('click',function(){
                       let basicfilter_config =  $("#saveBasicfilter_mul").attr('data-basicfilter-config')
                       if(basicfilter_config && basicfilter_config!=""){
                        basicfilter_config = JSON.parse(basicfilter_config)
                        $(document).find('#basicfilter_items_mul').find('.filter-table').empty()
                        if(basicfilter_config.length >0){
                          let current_table_name = $('#selectTablePC').val()
                                                    for(let i=0;i<basicfilter_config.length;i++){
                            let curr_value = ""
                            let column_name = basicfilter_config[i]['column_name']
                            let condition_name= basicfilter_config[i]['condition']
                            let input_value= basicfilter_config[i]['input_value']
                            if(basicfilter_config[i].hasOwnProperty('current_value')){
                               curr_value = basicfilter_config[i]['current_value']
                            }else{
                               curr_value = ""
                            }
                            if(basicfilter_config[i].hasOwnProperty('constraint_name')){
                              constraint_name = basicfilter_config[i]['constraint_name']
                            }else{
                                constraint_name = ""
                            }
                            if(basicfilter_config[i].hasOwnProperty('rule_set')){
                                rule_set = basicfilter_config[i]['rule_set']
                            }else{
                                rule_set = ""
                            }
                            if(basicfilter_config[i]['table_name'] ==current_table_name ){
                              $(document).find("#basicfilter_condition_dropdown_mul").find('.dropdown-item').find(`a[name='${column_name}']`).click()
                              let current_div = $(document).find('#basicfilter_items_mul').find('.filter-table').find(`tr[data-position=${i}]`).find('td').eq(2).find('div')
                              $(document).find('#basicfilter_items_mul').find('.filter-table').find(`tr[data-position=${i}]`).find('td').eq(1).find('div').find('select').val(condition_name).trigger('change')
                              $(document).find('#basicfilter_items_mul').find('.filter-table').find(`tr[data-position=${i}]`).find('td').eq(3).find('.basicfilter_curr_val').val(curr_value).trigger('change')
                              $(document).find('#basicfilter_items_mul').find('.filter-table').find(`tr[data-position=${i}]`).find('td').eq(4).find('.basicfilter_constraint').val(constraint_name).trigger('change')
                              $(document).find('#basicfilter_items_mul').find('.filter-table').find(`tr[data-position=${i}]`).find('td').eq(5).find('.basicfilter_ruleset').val(rule_set).trigger('change')


                              if(typeof(input_value) === "string" && input_value !== null){
                                setTimeout(function(){
                              if(current_div.find(`select option[value='${input_value}']`).length <= 0){
                                    current_div.find('select').append(`<option value='${input_value}'>${input_value}</option>`)
                                   }
                                current_div.find('.basic_table_valuer_mul').val(input_value).trigger('change')
                             },1000)
                              }else if(typeof(input_value) === 'object' && input_value !== null){
                                if(current_div.find(`.basic_table_valuer_mul`).attr('data-type')=="ForeignKey"){
                                setTimeout(function(){
                                  current_div.find('.basic_table_valuer_mul').val(input_value).trigger('change')
                                  },1000)
                              }else{
                                let output_html ="";
                                $.each(input_value, function(key,value){
                                  if(current_div.find(`.basic_table_valuer_mul option[value='${value}']`).length <= 0 && current_div.find(`.basic_table_valuer_mul`).attr('data-type')!="ForeignKey"){
                                    output_html+=`<option value='${value}' selected>${value}</option>`
                                  }
                                })
                                let change_select = $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${i}]`).find('td').eq(2).find("input[type='number']").parent().html()
                                let change_select_fk = $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${i}]`).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                                if(change_select){
                                  change_select = change_select.replace('<input','<select')
                                  change_select = change_select + "</select>"
                                  $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${i}]`).find('td').eq(2).find("input[type='number']").parent().html(change_select)
                                }
                                let field_type = $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${i}]`).find('.basic_table_valuer_mul').attr('type')
                                if(['date','datetime-local','time'].includes(field_type) ==false){
                                  $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${i}]`).find('.basic_table_valuer_mul').select2({multiple: true,tags:true,allowClear: false})
                                  $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${i}]`).find(".select2-selection--multiple").css({"max-height": "8rem", "overflow": "auto" })
                                }
                                current_div.find('.basic_table_valuer_mul').val(input_value).trigger('change')
                                current_div.find('.basic_table_valuer_mul').append(output_html)

                              }

                            }
                          }
                        }
                        }
                       }
                      })


                          function basicfilter_conditional_table_mul() {
                            $('#saveBasicfilter_mul').removeAttr('data-shapeid');
                            $('#saveBasicfilter_mul').removeAttr('data-basicfilter-config');
                            $('#basicfilter_items_mul').find('.filter-table').empty()
                            $("#basicfilter_condition_dropdown_mul").empty()
                            if($("#selectTablePC").val()){
                              $.ajax({
                                url: window.location.pathname,
                                data: {
                                  'model_name': $("#selectTablePC").val(),
                                  'operation': 'conditional_table',
                                },
                                type: "POST",
                                dataType: "json",
                                success: function (data) {
                                  var label_column = data.label_columns
                                for (const [key, value] of Object.entries(label_column)) {
                                  $("#basicfilter_condition_dropdown_mul").append(
                                      '<li class="dropdown-item"><a href="javascript:void(0)" name=' +
                                      key + ' class="basic_filter_btn_mul">' + value + '</a></li>');
                                  }
                                  var form_fields = data.form_fields
                                  $('.basic_filter_btn_mul').off('click').on('click', function () {
                                    var name = $(this).attr('name');
                                    var text = $(this).text();
                                    var STRING = data.form_fields[name]
                                    var rowCount=   $('.filter-table tr').length;
                                    $('#basicfilter_items_mul').find('.filter-table').append(STRING);

                                    $('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).attr('name',name)
                                    $('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).attr('data-position',rowCount)
                                    let field_datatype= $('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find('input').attr('type')

                                    let change_select  =$('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html()
                                    let change_select_fk  =$('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                                    if(change_select){
                                      change_select = change_select.replace('<input','<select')
                                    change_select = change_select + "</select>"
                                    $('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html(change_select)
                                    $('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("select[type='text']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer_mul')
                                    }else if(change_select_fk){
                                    change_select_fk = change_select_fk.replace('<input','<select')
                                    change_select_fk = change_select_fk + "</select>"
                                    $('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html(change_select_fk)
                                    $('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("select[type='number'][data-type='ForeignKey']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer_mul')
                                    }else if (['date','datetime-local','time'].includes(field_datatype)){
                                      $('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='IN']`).remove()
                                      $('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='NOT IN']`).remove()
                                    }
                                    $('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).find('td').eq(3).remove()
                                    $('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).find('td').eq(2).find("input").addClass('basic_table_valuer_mul')
                                    $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('.select2bs4').removeAttr('onchange')

                                    $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).addClass(`d-flex`)
                                    $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).css({'text-align':'left'})
                                    $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('td').css('width','25%')
                                    $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(1).find('div').css('max-width','10em')

                                    $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('td:nth-child(1),td:nth-child(2)').find("select").each(function () {
                                      $(this).select2({width:'100%'});
                                    })

                                    $('#basicfilter_items_mul').find('.filter-table').find('tr').eq(-1).append(
                                          `
                                          <td class="dt-center">
                                          <div>
                                            <div style="max-width: 10em;">
                                          <select class="form-control select2bs4 basicfilter_curr_val" name=${name} data-dropdown_purpose="select_constant_val">
                                              <option value="" selected>Select Variable</option>
                                              <option value="curr_user">Current User</option>
                                              <option value="curr_date">Current Date</option>
                                              <option value="curr_last_login_date">Current user's last login date</option>
                                              <option value="curr_firstname">Current user's first name</option>
                                              <option value="curr_lastname">Current user's last name</option>
                                              <option value="curr_email">Current user's email</option>
                                              <option value="curr_joined_date">Current user's joined date</option>
                                              <option value="curr_name">Current user's name</option>
                                              <option value="curr_last_pass_date">Current user's last password update date</option>
                                              <option value="curr_tenant">Current user's tenant</option>
                                          </select>
                                        </div>
                                          </div>
                                          </td>

                                        <td class="dt-center">
                                          <div class="" style="max-width:25em;">
                                          <input type="text" name=${name} class="form-control basicfilter_constraint" placeholder="Constraint name"/>
                                          </div>
                                        </td>

                                        <td class="dt-center">
                                          <div class="" style="max-width:25em;">
                                          <input type="text" name=${name} class="form-control basicfilter_ruleset" placeholder="Rule set"/>
                                          </div>
                                        </td>
                                          `
                                      )

                                      $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('.select2bs4').select2({width:'100%',tags:true})
                                $.ajax({
                                      url: window.location.pathname,
                                      data: {
                                        'model_name': $("#selectTablePC").val(),
                                        'field_name':$(this).attr('name'),
                                        'operation': 'conditional_table_value',
                                      },
                                      type: "POST",
                                      dataType: "json",
                                      success: function (data) {
                                        if(data.hasOwnProperty('field_data')){
                                          data_list =JSON.parse(data.field_data)
                                          $('#basicfilter_items_mul').find('.filter-table').find(`tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='text']").empty()
                                          let row_data_dict =[]
                                          for(let i=0;i<data_list.length;i++){
                                            if (data.original_fk.length > 0){
                                              if(data.original_fk[i]=="NULL"){
                                                $('#basicfilter_items_mul').find('.filter-table').find(`tr[data-position=${rowCount}]`).find('td').eq(2).find('select').append(`<option value='${data.original_fk[i]}'>${data_list[i]}</option>`)
                                              }else{
                                                $('#basicfilter_items_mul').find('.filter-table').find(`tr[data-position=${rowCount}]`).find('td').eq(2).find('select').append(`<option value='${parseInt(data.original_fk[i])}'>${data_list[i]}</option>`)
                                                $('#basicfilter_items_mul').find('.filter-table').find(`tr[data-position=${rowCount}]`).find('td').eq(1).find('select').find("option").each(function(){
                                                    if($(this).attr("value") == "Greater than" || $(this).attr("value") == "Smaller than"){
                                                        $(this).remove();
                                                    }
                                                  })
                                              }
                                                } else {
                                                  $('#basicfilter_items_mul').find('.filter-table').find(`tr[data-position=${rowCount}]`).find('td').eq(2).find('select').append(`<option value='${data_list[i]}'>${data_list[i]}</option>`)
                                                }
                                          }
                                        }
                                      },
                                      error: function () {
                                        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                      }
                                    });
                                    $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('.select2bs4').on('change',function(){
                                      let in_operand = ['IN','NOT IN']
                                      let valuer = $(this).val()
                                      if(in_operand.includes(valuer) ==true){
                                        let change_select  =$('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html()
                                        let change_select_fk  =$('#basicfilter_items').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                                        if(change_select){

                                        change_select = change_select.replace('<input','<select')
                                          change_select = change_select + "</select>"
                                          $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html(change_select)
                                      }
                                      let field_type = $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('.basic_table_valuer_mul').attr('type')
                                      if(['date','datetime-local','time'].includes(field_type) ==false){
                                          $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('.basic_table_valuer_mul').select2({multiple: true,tags:true,allowClear: false})
                                        $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find(".select2-selection--multiple").css({"max-height": "8rem", "overflow": "auto" })
                                        }

                                      }else{
                                        let change_select  =$('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html()
                                        if(change_select ){
                                          change_select = change_select.replace('<select','<input')
                                          change_select = change_select.replace('</select>','')
                                          if($('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").attr(`data-type`) != 'ForeignKey'){
                                            $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html(change_select)
                                            $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").removeClass('select2-hidden-accessible')
                                            $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('td').eq(2).find('span').remove('span')
                                          }else{
                                            $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('.basic_table_valuer_mul').select2({multiple: false,tags:true,allowClear: false})
                                          }
                                        }

                                        let field_type = $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('.basic_table_valuer_mul').attr('type')
                                        if(['date','datetime-local','time'].includes(field_type)==false){
                                          if($('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('.basic_table_valuer_mul').attr('type') =="text"){
                                            $('#basicfilter_items_mul').find(`.filter-table tr[data-position=${rowCount}]`).find('.basic_table_valuer_mul').select2({multiple: false,tags:true,allowClear: false})
                                          }
                                        }

                                      }
                                    })
                                    $('.remove_filter').on('click', removefilter);
                                    function removefilter() {
                                      $(this).closest("tr").remove();

                                      $('#basicfilter_items_mul').find(`.filter-table`).each(function(){
                                        var rowCount=   $('.filter-table tr').length;
                                        for(let rc=0;rc<rowCount;rc++){
                                          $('#basicfilter_items_mul').find(`.filter-table`).find('tr').eq(rc).attr('data-position',rc)
                                        }

                                      })
                                    }
                                  });
                                },
                                error: function () {
                                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                }
                              });
                            }
                          }
                    </script>
                    <!-- Modal for Filter -->
                    <div class="modal" id="basicfilter_mul" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="basicfilter" aria-hidden="true" >
                      <div class="modal-dialog modal-lg modal-dialog-centered" style="justify-content: center;">
                        <div class="modal-content" style="width: 100%;" >

                          <div class="modal-header" style="width:100%;background:#565a5e;text-align: center;justify-content: center;">
                            <h6 class="modal-title" style="color:white;margin:auto;font-weight:bold;">Set Default Filter</h6>

                          </div>

                          <div class="modal-body" style="height:300px;">
                            <div style="margin-top:2em;">
                              <div class="btn-group">

                                  <button type="button" class="btn btn-default dropdown-toggle basicfilter_dropdown_toggle mr-auto" data-toggle="dropdown">
                                    {{_("Add Condition")}}
                                    <span class="caret"></span>
                                  </button>


                                <ul class="dropdown-menu" id="basicfilter_condition_dropdown_mul" style="max-height:10rem; overflow-y:auto;">
                                </ul>
                              </div>
                              <div class="row" id="basicfilter_items_mul">
                                <table class="table filter-table">
                                </table>
                              </div>
                            </div>
                          </div>

                          <div class="modal-footer">
                            <button type="button" id="saveBasicfilter_mul" class="btn btn-primary rounded px-2"  style="color:white;" >Save</button>
                            <button type="button" class="btn btn-primary  rounded px-2 closeBasicFilter" onclick="$('#basicfilter_mul').modal('hide')">Close</button>
                          </div>

                        </div>
                      </div>
                    </div>

                  </div>

                    <div class="form-group col-12" id="selectMultiConfig_def_mul">
                      <label class="acies_label col-md-12">Related Create View Template:</label>
                      <select id="selectMultiConfig_mul" class="select2 form-control" name="template">
                      </select>
                   </div>
                  <div class="form-group col-12" id="dropFields_def_mul">
                    <label class="acies_label col-md-12">Drop Fields:</label>
                    <select id="dropFields_mul" class="select2 form-control dropclass_mul" name="dropfields_mul" multiple>

                    </select>
                  </div>
                  <div class="form-group col-12" id="dropFieldsLVUpload_def_mul">
                    <label class="acies_label col-md-12">Drop Fields while downloading PDF format:</label>
                    <select id="dropFieldsLVUpload_mul" class="select2 form-control dropclass_mul" name="dropfields_mul" multiple>

                    </select>
                    <small id="text_for_mandatory_mul" class="form-text" style="display: none; color: red">Mandatory fields are dropped in the table selected. Consider not dropping the column/s or check that the column/s are auto-computed.</small>
                  </div>
                  <script>
                    var mandatory_field_list2 = []
                    $("#selectTablePC").on('change', function(){
                      $('#text_for_mandatory_mul').hide()
                      var table = $("#selectTablePC").val()
                      $.ajax({
                        url: window.location.pathname,

                        data: {
                          'operation': 'dropFieldList',
                          'tableName':table,
                        },
                        type: "POST",
                        dataType: "json",
                        success: function (data) {
                          mandatory_field_list2 = data.mandatory_fields
                        },
                        error: function () {
                          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                        }
                      })
                    })
                    function checkSelectedValues3() {
                      var cols = $('#dropFieldsLVUpload_mul').val() || [];

                      var hasMatchingValue = cols.some(function (value) {
                        return mandatory_field_list2.includes(value);
                      });

                      $('#text_for_mandatory_mul').toggle(hasMatchingValue);
                    }

                    $('#dropFieldsLVUpload_mul').on('change', function () {
                      checkSelectedValues3();
                    });

                  </script>
                  <div class="form-group col-12" id="restrictFields_def_mul">
                    <label class="acies_label col-md-12">Fields to be locked for edit:</label>
                    <select id="restrictFields_mul" class="select2 form-control dropclass_mul" name="restrictfields_mul" multiple>
                    </select>
                  </div>
                  <div class="form-group col-12" id="groupFields_def_mul">
                    <label class="acies_label col-md-12">User groups for field edit restriction:</label>
                    <select id="groupFields_mul" class="select2 form-control" name="groupfields_mul" multiple>
                    </select>
                    <small class="form-text">*Users belonging to these groups wont be able to edit locked fields.</small>
                  </div>
                  <div class="form-group col-12" id="groupFields_restrictview_def_mul">
                    <label class="acies_label col-md-12">User groups for View restriction:</label>
                    <select id="groupFields_restrictview_mul" class="select2 form-control" name="groupFields_restrictview_mul" multiple>
                    </select>
                    <small class="form-text">*Users belonging to these groups will be able to see the current view.</small>
                  </div>
                  <div class="form-group col-12" id="editFields_def_mul">
                    <label class="acies_label col-md-12">Fields not to be displayed for edit:</label>
                    <select id="editFieldsNS_mul" class="select2 form-control" name="editFieldsNS_mul" multiple>
                    </select>
                  </div>

                  <div class='card customListViewMessages_multidropdown card col-12'>
                    <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Custom Messages
                      <input type="checkbox" id="toggleCustomListViewMessages_multidropdown" class="float-right mt-2 checkboxinput custom-checkbox">
                    </div>
                    <script>
                      $("#toggleCustomListViewMessages_multidropdown").on("change", function() {
                        if($(this).prop("checked")){
                          $("#customListViewMessagesDiv_multidropdown").show()
                        }else{
                          $("#customListViewMessagesDiv_multidropdown").hide()
                        }


                    });
                    </script>
                    <div class='card-body' id="customListViewMessagesDiv_multidropdown" style="display:none;">
                      <div class="nav flex-column nav-tabs customMeassagesNav" id="" role="tablist">

                        <a class="nav-item nav-link nav-accordion list_view" id="save_actions_edit_message_multidropdown-tab" data-target="save_actions_edit_message_multidropdown-content"  aria-controls="save_actions_edit_message_multidropdown" aria-selected="true">Set Success Message on editing data<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="save_actions_edit_message_multidropdown-content" aria-controls="save_actions_edit_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="save_actions_edit_message_multidropdown" name="save_actions_edit_message" type="text" value="Record updated successfully!" data-value="Record updated successfully!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="save_actions_edit_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="bulk_update_success_message_multidropdown-tab" data-target="bulk_update_success_message_multidropdown-content"  aria-controls="bulk_update_success_message_multidropdown" aria-selected="true">Set Success Message on bulk update<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="bulk_update_success_message_multidropdown-content" aria-controls="bulk_update_success_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="bulk_update_success_message_multidropdown" name="bulk_update_success_message" type="text" value="Data updated successfully!" data-value="Record updated successfully!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="bulk_update_success_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="confirm_delete_message_multidropdown-tab" data-target="confirm_delete_message_multidropdown-content"  aria-controls="confirm_delete_message_multidropdown" aria-selected="true">Confimation message before deleting all data<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="confirm_delete_message_multidropdown-content" aria-controls="confirm_delete_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="confirm_delete_message_multidropdown" name="confirm_delete_message" type="text" value="This will delete all the records from the table. Are you sure? Click Yes to confirm or No if you do not wish to reset it." data-value="This will delete all the records from the table. Are you sure? Click Yes to confirm or No if you do not wish to reset it." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="confirm_delete_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-question msg_icon" data-value="fas fa-question msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="unable_delete_foreignkey_message_multidropdown-tab" data-target="unable_delete_foreignkey_message_multidropdown-content"  aria-controls="unable_delete_foreignkey_message_multidropdown" aria-selected="true">Message if unable to delete data due to Foreign key references<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="unable_delete_foreignkey_message_multidropdown-content" aria-controls="unable_delete_foreignkey_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="unable_delete_foreignkey_message_multidropdown" name="unable_delete_foreignkey_message" type="text" value="Other tables have Foreign Key references to this table, unable to delete data." data-value="Other tables have Foreign Key references to this table, unable to delete data." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="unable_delete_foreignkey_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="unable_delete_notable_message_multidropdown-tab" data-target="unable_delete_notable_message_multidropdown-content"  aria-controls="unable_delete_notable_message_multidropdown" aria-selected="true">Message if table doesn't exist while deleting all data<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="unable_delete_notable_message_multidropdown-content" aria-controls="unable_delete_notable_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="unable_delete_notable_message_multidropdown" name="unable_delete_notable_message" type="text" value="Table does not exist." data-value="Table does not exist." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="unable_delete_notable_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="successful_delete_message_multidropdown-tab" data-target="successful_delete_message_multidropdown-content"  aria-controls="successful_delete_message_multidropdown" aria-selected="true">Success message on successfully deleting all data<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="successful_delete_message_multidropdown-content" aria-controls="successful_delete_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="successful_delete_message_multidropdown" name="successful_delete_message" type="text" value="Data deleted successfully!" data-value="Data deleted successfully!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="successful_delete_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="confirm_permanent_delete_message_multidropdown-tab" data-target="confirm_permanent_delete_message_multidropdown-content"  aria-controls="confirm_permanent_delete_message_multidropdown" aria-selected="true">Confirmation message on deleting record from actions<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="confirm_permanent_delete_message_multidropdown-content" aria-controls="confirm_permanent_delete_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="confirm_permanent_delete_message_multidropdown" name="confirm_permanent_delete_message" type="text" value="Are you sure you want to delete this record?" data-value="Are you sure you want to delete this record?" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="confirm_permanent_delete_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-question msg_icon" data-value="fas fa-question msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="successful_permanent_delete_message_multidropdown-tab" data-target="successful_permanent_delete_message_multidropdown-content"  aria-controls="successful_permanent_delete_message_multidropdown" aria-selected="true">Success message on deleting record from actions<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="successful_permanent_delete_message_multidropdown-content" aria-controls="successful_permanent_delete_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="successful_permanent_delete_message_multidropdown" name="successful_permanent_delete_message" type="text" value="Record deleted successfully." data-value="Record deleted successfully." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="successful_permanent_delete_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="confirm_temp_delete_message_multidropdown-tab" data-target="confirm_temp_delete_message_multidropdown-content"  aria-controls="confirm_temp_delete_message_multidropdown" aria-selected="true">Confirmation message on temporarily deleting record from actions<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="confirm_temp_delete_message_multidropdown-content" aria-controls="confirm_temp_delete_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="confirm_temp_delete_message_multidropdown" name="confirm_temp_delete_message" type="text" value="Are you sure you want to delete this record temporarily?" data-value="Are you sure you want to delete this record temporarily?" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="confirm_temp_delete_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-question msg_icon" data-value="fas fa-question msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="successful_temp_delete_message_multidropdown-tab" data-target="successful_temp_delete_message_multidropdown-content"  aria-controls="successful_temp_delete_message_multidropdown" aria-selected="true">Success message on temporarily deleting record from actions<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="successful_temp_delete_message_multidropdown-content" aria-controls="successful_temp_delete_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="successful_temp_delete_message_multidropdown" name="successful_temp_delete_message" type="text" value="Data has been temporarily deleted." data-value="Data has been temporarily deleted." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="successful_temp_delete_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="confirm_conditional_temp_delete_message_multidropdown-tab" data-target="confirm_conditional_temp_delete_message_multidropdown-content"  aria-controls="confirm_conditional_temp_delete_message_multidropdown" aria-selected="true">Confirmation message on temporarily deleting data from conditional delete<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="confirm_conditional_temp_delete_message_multidropdown-content" aria-controls="confirm_conditional_temp_delete_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="confirm_conditional_temp_delete_message_multidropdown" name="confirm_conditional_temp_delete_message" type="text" value="Are you sure you want to temporarily delete this data?" data-value="Are you sure you want to temporarily delete this data?" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="confirm_conditional_temp_delete_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="success_conditional_temp_delete_message_multidropdown-tab" data-target="success_conditional_temp_delete_message_multidropdown-content"  aria-controls="success_conditional_temp_delete_message_multidropdown" aria-selected="true">Success message on temporarily deleting data from conditional delete<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="success_conditional_temp_delete_message_multidropdown-content" aria-controls="success_conditional_temp_delete_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="success_conditional_temp_delete_message_multidropdown" name="success_conditional_temp_delete_message" type="text" value="Data has been temporarily deleted." data-value="Data has been temporarily deleted." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="success_conditional_temp_delete_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="confirm_conditional_perm_delete_message_multidropdown-tab" data-target="confirm_conditional_perm_delete_message_multidropdown-content"  aria-controls="confirm_conditional_perm_delete_message_multidropdown" aria-selected="true">Confirmation message on permanently deleting data from conditional delete<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="confirm_conditional_perm_delete_message_multidropdown-content" aria-controls="confirm_conditional_perm_delete_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="confirm_conditional_perm_delete_message_multidropdown" name="confirm_conditional_perm_delete_message" type="text" value="Are you sure you want to permanently delete this data?" data-value="Are you sure you want to permanently delete this data?" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="confirm_conditional_perm_delete_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="success_conditional_perm_delete_message_multidropdown-tab" data-target="success_conditional_perm_delete_message_multidropdown-content"  aria-controls="success_conditional_perm_delete_message_multidropdown" aria-selected="true">Success message on permanently deleting data from conditional delete<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="success_conditional_perm_delete_message_multidropdown-content" aria-controls="success_conditional_perm_delete_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="success_conditional_perm_delete_message_multidropdown" name="success_conditional_perm_delete_message" type="text" value="Data deleted successfully." data-value="Data deleted successfully." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="success_conditional_perm_delete_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="confirm_multiple_delete_perm_message_multidropdown-tab" data-target="confirm_multiple_delete_perm_message_multidropdown-content"  aria-controls="confirm_multiple_delete_perm_message_multidropdown" aria-selected="true">Confirmation message on permanently deleting from multiple delete<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="confirm_multiple_delete_perm_message_multidropdown-content" aria-controls="confirm_multiple_delete_perm_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="confirm_multiple_delete_perm_message_multidropdown" name="confirm_multiple_delete_perm_message" type="text" value="Are you sure you want to permanently delete this data?" data-value="Are you sure you want to permanently delete this data?" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="confirm_multiple_delete_perm_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="success_multiple_delete_perm_message_multidropdown-tab" data-target="success_multiple_delete_perm_message_multidropdown-content"  aria-controls="success_multiple_delete_perm_message_multidropdown" aria-selected="true">Success message on permanently deleting data from multiple delete<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="success_multiple_delete_perm_message_multidropdown-content" aria-controls="success_multiple_delete_perm_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="success_multiple_delete_perm_message_multidropdown" name="success_multiple_delete_perm_message" type="text" value="Data deleted successfully." data-value="Data deleted successfully." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="success_multiple_delete_perm_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="confirm_multiple_delete_temp_message_multidropdown-tab" data-target="confirm_multiple_delete_temp_message_multidropdown-content"  aria-controls="confirm_multiple_delete_temp_message_multidropdown" aria-selected="true">Confirmation message on temporarily deleting multiple selection<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="confirm_multiple_delete_temp_message_multidropdown-content" aria-controls="confirm_multiple_delete_temp_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="confirm_multiple_delete_temp_message_multidropdown" name="confirm_multiple_delete_temp_message" type="text" value="Are you sure you want to temporarily delete this data?" data-value="Are you sure you want to temporarily delete this data?" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="confirm_multiple_delete_temp_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="success_multiple_delete_temp_message_multidropdown-tab" data-target="success_multiple_delete_temp_message_multidropdown-content"  aria-controls="success_multiple_delete_temp_message_multidropdown" aria-selected="true">Success message on temporarily deleting multiple selection<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="success_multiple_delete_temp_message_multidropdown-content" aria-controls="success_multiple_delete_temp_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="success_multiple_delete_temp_message_multidropdown" name="success_multiple_delete_temp_message" type="text" value="Data has been temporarily deleted." data-value="Data has been temporarily deleted." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="success_multiple_delete_temp_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="add_computed_message_multidropdown-tab" data-target="add_computed_message_multidropdown-content"  aria-controls="add_computed_message_multidropdown" aria-selected="true">Set Success Message on adding computed fields<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="add_computed_message_multidropdown-content" aria-controls="add_computed_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="add_computed_message_multidropdown" name="add_computed_message" type="text" value="Operation Successful!" data-value="Operation Successful!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="add_computed_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="remove_computed_message_multidropdown-tab" data-target="remove_computed_message_multidropdown-content"  aria-controls="remove_computed_message_multidropdown" aria-selected="true">Set Success Message on removing computed fields<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="remove_computed_message_multidropdown-content" aria-controls="remove_computed_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="remove_computed_message_multidropdown" name="remove_computed_message" type="text" value="Operation Successful!" data-value="Operation Successful!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="remove_computed_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="remove_select_column_computed_message_multidropdown-tab" data-target="remove_select_column_computed_message_multidropdown-content"  aria-controls="remove_select_column_computed_message_multidropdown" aria-selected="true">Warning Message to select column before removing computed fields<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="remove_select_column_computed_message_multidropdown-content" aria-controls="remove_select_column_computed_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="remove_select_column_computed_message_multidropdown" name="remove_select_column_computed_message" type="text" value="Kindly select a column." data-value="Kindly select a column." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="remove_select_column_computed_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="remove_new_computed_message_multidropdown-tab" data-target="remove_new_computed_message_multidropdown-content"  aria-controls="remove_new_computed_message_multidropdown" aria-selected="true">Warning Message on trying to remove new computed fields<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="remove_new_computed_message_multidropdown-content" aria-controls="remove_new_computed_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="remove_new_computed_message_multidropdown" name="remove_new_computed_message" type="text" value="Unable to perform the operation in the new field." data-value="Unable to perform the operation in the new field." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="remove_new_computed_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="remove_existing_computed_message_multidropdown-tab" data-target="remove_existing_computed_message_multidropdown-content"  aria-controls="remove_existing_computed_message_multidropdown" aria-selected="true">Warning Message to select exisiting field checkbox before removing computed fields<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="remove_existing_computed_message_multidropdown-content" aria-controls="remove_existing_computed_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="remove_existing_computed_message_multidropdown" name="remove_existing_computed_message" type="text" value="Please select the existing field checkbox and the field name." data-value="Please select the existing field checkbox and the field name." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="remove_existing_computed_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="confirm_remove_computed_message_multidropdown-tab" data-target="confirm_remove_computed_message_multidropdown-content"  aria-controls="confirm_remove_computed_message_multidropdown" aria-selected="true">Confirmation alert before removing computed fields<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="confirm_remove_computed_message_multidropdown-content" aria-controls="confirm_remove_computed_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="confirm_remove_computed_message_multidropdown" name="confirm_remove_computed_message" type="text" value="Remove the computed field calculation?\n\nClick 'Yes' to confirm or 'No' if you do not wish to remove it." data-value="Remove the computed field calculation?\n\nClick 'Yes' to confirm or 'No' if you do not wish to remove it." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="confirm_remove_computed_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-question msg_icon" data-value="fas fa-question msg_icon"  style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="file_upload_successful_message_multidropdown-tab" data-target="file_upload_successful_message_multidropdown-content"  aria-controls="file_upload_successful_message_multidropdown" aria-selected="true">Success Message on file upload<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="file_upload_successful_message_multidropdown-content" aria-controls="file_upload_successful_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="file_upload_successful_message_multidropdown" name="file_upload_successful_message" type="text" value="Upload successful!" data-value="Upload successful!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="file_upload_successful_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="choose_file_bulk_update_message_multidropdown-tab" data-target="choose_file_bulk_update_message_multidropdown-content"  aria-controls="choose_file_bulk_update_message_multidropdown" aria-selected="true">Warning Message to choose a file for Bulk update<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="choose_file_bulk_update_message_multidropdown-content" aria-controls="choose_file_bulk_update_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="choose_file_bulk_update_message_multidropdown" name="choose_file_bulk_update_message" type="text" value="Please choose a file to upload." data-value="Please choose a file to upload." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="choose_file_bulk_update_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="choose_identifiers_bulk_update_message_multidropdown-tab" data-target="choose_identifiers_bulk_update_message_multidropdown-content"  aria-controls="choose_identifiers_bulk_update_message_multidropdown" aria-selected="true">Warning Message to select identifier columns for Bulk update<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="choose_identifiers_bulk_update_message_multidropdown-content" aria-controls="choose_identifiers_bulk_update_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="choose_identifiers_bulk_update_message_multidropdown" name="choose_identifiers_bulk_update_message" type="text" value="Please select identifier columns." data-value="Please select identifier columns." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="choose_identifiers_bulk_update_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="select_columns_bulk_update_message_multidropdown-tab" data-target="select_columns_bulk_update_message_multidropdown-content"  aria-controls="select_columns_bulk_update_message_multidropdown" aria-selected="true">Warning Message to select columns to update<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="select_columns_bulk_update_message_multidropdown-content" aria-controls="select_columns_bulk_update_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="select_columns_bulk_update_message_multidropdown" name="select_columns_bulk_update_message" type="text" value="Please select columns to update." data-value="Please select columns to update." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="select_columns_bulk_update_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-exclamation msg_icon" data-value="fas fa-exclamation msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="save_formatters_message_multidropdown-tab" data-target="save_formatters_message_multidropdown-content"  aria-controls="save_formatters_message_multidropdown" aria-selected="true">Success Message on successfully saving formatters<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="save_formatters_message_multidropdown-content" aria-controls="save_formatters_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="save_formatters_message_multidropdown" name="save_formatters_message" type="text" value="Configurations saved successfully!" data-value="Configurations saved successfully!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="save_formatters_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="edit_approval_message_multidropdown-tab" data-target="edit_approval_message_multidropdown-content"  aria-controls="edit_approval_message_multidropdown" aria-selected="true">Set Message if data is sent for Approval on editing<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="edit_approval_message_multidropdown-content" aria-controls="edit_approval_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="edit_approval_message_multidropdown" name="edit_approval_message" type="text" value="Transaction update request has been sent for approval." data-value="Transaction update request has been sent for approval." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="edit_approval_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion list_view" id="upload_approval_message_multidropdown-tab" data-target="upload_approval_message_multidropdown-content"  aria-controls="upload_approval_message" aria-selected="true">Set Message if data is sent for Approval on file upload <span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="upload_approval_message_multidropdown-content" aria-controls="upload_approval_message_multidropdown-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="upload_approval_message_multidropdown" name="upload_approval_message" type="text" value="Data has been sent for approval." data-value="Data has been sent for approval." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" for="upload_approval_message_multidropdown" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>


                  <div class="form-group col-12" id="buttonStyling_def_mul">
                    <button class="btn btn-primary" style="width:100%;" id="listViewButtonId_mul" data-list="" onclick="listViewButtonStyling(this)" >Configure Button Styling</button>
                  </div>

                  <div class="form-group" style="padding-top: 1rem;padding-left: 0.5rem;width:100%;">
                  <div class="row">
                    <div class="col-4" id="eqbuilder_def_mul">
                      <button class="btn btn-primary eqbuilder_mul_Cl" id="eqbuilder_mul" data-list="" type="button" >Configure Computed View</button>
                    </div>
                    <div class="col-4" id="remove_eqbuilder_def_mul">
                      <button class="btn btn-primary" id="remove_eqbuilder_mul" type="button" >Remove Computed View</button>
                    </div>
                    <div class="col-4">
                      <button class="btn btn-primary" id="columnNamesRenamesButton_mul" type="button" onclick="columnHeaderRename(this)" data-list="">Column Header Rename</button>
                    </div>
                  </div>

              </div>
                </div>
              </form>
                </div>

              </div>
              </div>
                <div class="col-7">
              <div class='card' id="def_list_config_view_mul">
                <div class='card-header' style='padding:0rem;'><h5 style="margin-left: -0.5rem;margin-bottom: 0rem;"><button class="btn" style='pointer-events: none; color:white;height: 2rem;width:10rem;border-color:none;color:var(--primary-color);padding-top:0.2rem;font-weight: bold;'>&nbsp;Sub-Category&nbsp;</button></h5></div>
                <div class='card-body' style="max-height: 18rem;overflow-y: auto;">
                  <form id="subCategoryForm_mul" method="post">
                    {% csrf_token %}
                    <div class="row">
                    <div class="col-3" id='subCategoryButtons_mul' style="height: 15.5rem; overflow-y: scroll;">
                        {%for i in listViewSubElements%}
                          {% if i != "Filter" %}
                          <button type="button" value="{{i}}" class="btn btn-primary subCategory"
                            style="height: 25px;width:70%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;word-break:break-all;"
                            >{{i}}
                          </button>
                          {% else %}
                          <button type="button" value="{{i}}" class="btn btn-primary subCategory"
                            style="height: 25px;width:65%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                            disabled>{{i}}
                          </button>
                          {% endif %}
                        <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                          <br>
                          <br>
                        {%endfor%}
                        <button type="button" value="Group By" class="btn btn-primary subCategory" id="group_by_action_btn_sub_mul" data-list="" style="height: 25px; width: 65%; border-radius: 5px; color: white; padding-left: 9px; padding-top: 2px; background-color: rgb(86, 90, 94); border-color: rgb(86, 90, 94);" onclick="group_by_action_btn_mul(this)">Group By
                        </button>
                        <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                        <br>
                        <br>
                        <button type="button" value="custom column" class="btn btn-primary subCategory"
                            style="height: 25px;width:65%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                            >Columns
                        </button>

                        <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                        <br>
                        <br>
                        <button type="button" value="custom template" class="btn btn-primary subCategory"
                            style="height: 25px;width:65%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                            >Template
                        </button>
                        <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                        <br>
                        <br>
                        <button id="hyperlinkingBtn_mul" data-list="" onclick="hyperlinking(this)" type="button" value="hyperlinking tables" class="btn btn-primary subCategory"
                            style="height: 25px;width:70%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                            >Hyperlinking
                        </button>
                        <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                        <br>
                        <br>
                        <button id="formattingColumnBtn_mul" data-list="" data-listtwo="" data-listthree="" onclick="formattingColumn_mul(this)" type="button" value="formatting columns" class="btn btn-primary subCategory"
                          style="height: 25px;width:70%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                          >Design
                        </button>
                        <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                        <br>
                        <br>
                        <button id="titleNameBtn_mul" data-list="" onclick="titleName_mul(this)" type="button" value="title name_mul" class="btn btn-primary subCategory"
                          style="height: 25px;width:70%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                          >Title Name
                        </button>
                        <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                        <br>
                        <br>
                        <button id="buttonsGroupedTogether_mul" data-list="" onclick="buttonsGroupedTogetherClick_mul(this)"  type="button" value="Buttons Grouped Together_mul" class="btn btn-primary subCategory"
                          style="height: 25px;width:70%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                          >Grouping
                        </button>
                        <span style="margin-left:0.8rem;"><i class="fa fa-check-circle" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                        <br>
                        <br>
                        <button id="pagination_mul" data-list="" onclick="Pagination_mul(this)" type="button" value="Pagination_mul" class="btn btn-primary subCategory"
                          style="height: 25px;width:70%;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;"
                          >Pagination
                        </button>
                        <span style="margin-left:0.8rem;"><i class="fa fa-check-circle pageCheck_mul" style="color:green;font-size: 1rem;display:none;" aria-hidden="true"></i></span>
                        <br>
                        <br>
                    </div>
                    <!-- Sub sub-elements config -->
                    <div class="col-9 subElementCards" style="height: 15.5rem; overflow-y: scroll;">
                      <div id='Datatable_mul' class="subCategories" style="display:none;">
                       <p style="margin-left: 20%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Data Table</p>

                          <div class="form-group" style="margin-left:35%;">
                              <div id="div_id_active_mul" class="custom-control custom-checkbox">
                                <input type="checkbox" name="NotRequiredDT" class="checkboxinput custom-control-input notRequired" id="notrequiredDT_mul" value="1">
                                <label for="notrequiredDT_mul" class="custom-control-label">
                                  Not Required
                                </label>
                              </div>


                            </div>
                            <div class="dataTableSubElements elementCheckboxes">
                              <div id="div_id_active_mul" class="custom-control custom-checkbox" style="margin-left:35%;">
                                <input type="checkbox" name="SelectAll" class="checkboxinput custom-control-input" id="selectAll_mul" value="1">
                                <label for="selectAll_mul" class="custom-control-label"> Select All</label></div><br>
                            {%for i in dataTableSubElements%}
                              <div class="form-group listofDataTableSubElements" style="margin-left:1rem;">
                                <div id="div_id_active_mul" class="custom-control custom-checkbox">
                                  {% if i == "Extract Data" %}
                                  <input type="checkbox" name="{{i}}" class="checkboxinput custom-control-input extract_data_cb" id="{{i}}_mul">
                                  {% else %}
                                  <input type="checkbox" name="{{i}}" class="checkboxinput custom-control-input" id="{{i}}_mul">
                                  {% endif %}
                                  <label for="{{i}}_mul" class="custom-control-label">
                                    {{i}}
                                  </label>
                                </div>
                                {% if i == "Extract Data" %}
                                <input type="text" id="fn_extact_data_mul" style="margin-left: 20px;margin-top: 5px;display:none;" placeholder="Add custom file name">
                                {% endif %}
                              </div>
                            {%endfor%}
                          </div>

                          <script>
                            $(".extract_data_cb").on('change', function(){
                              if ($(this).is(':checked')){
                                $('#fn_extact_data_mul').css('display', 'block');
                              } else {
                                $('#fn_extact_data_mul').css('display', 'none');
                              }
                            });
                            document.getElementById('selectAll_mul').onclick = function() {
                              var checkboxes = $(this).parent().parent().find('input[type=checkbox]')

                              var save_btn= document.getElementById('save_buttonid_mul')
                              save_btn.disabled=false
                              for (var checkbox of checkboxes) {
                                if((checkbox.getAttribute('name') == "Approve all" || checkbox.getAttribute('name') == "Reject all" || checkbox.getAttribute('name') == "Approve Multiple" || checkbox.getAttribute('name') == "Reject Multiple" ) && ($("#selectTemplate").val() != "Approval Template")){
                                  checkbox.checked = this.unchecked;
                                }
                                else{
                                  checkbox.checked = this.checked;
                                  }
                                }
                              $(".extract_data_cb").trigger("change");
                            }
                            $(document).ready(function(){
                              $('.dataTableSubElements').find('.listofDataTableSubElements').each(function(){
                                at_name = $(this).find('input').attr('name')
                                if(["Reject all"].includes(at_name) || ["Approve all"].includes(at_name) || ["Approve Multiple"].includes(at_name) || ["Reject Multiple"].includes(at_name)){
                                  $(this).find('input').attr("onchange","checkTemplateApproval.call(this)")
                                }
                              })
                            })
                          </script>




                          <button type="button" id="save_buttonid_mul" class="btn btn-primary saveElementsButton" data-subCategory="Data table" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" disabled>Save</button>
                      </div>
                      <div id='hyperlinkingTables_mul' class="subCategories" style="display:none;">
                        <div style="margin-bottom:10px;">
                          <label class="acies_label col-md-12">Master Table Column:</label>
                          <select id="selectHyperLinkedColumnMasterPC_mul" class="select2 form-control" name="table">
                            <option value="" disabled selected>Master Table Column</option>
                          </select>
                        </div>
                        <div style="margin-bottom:10px;">
                          <label class="acies_label col-md-12">linked Table:</label>
                          <select onchange="hyperlinking1(this)" id="selectHyperLinkedTablePC_mul" class="select2 form-control" name="table">
                            <option value="" disabled selected>linked Table</option>
                            {% for i in tableList%}
                            <option value="{{i}}">{{i}}</option>
                            {%endfor%}
                          </select>
                        </div>
                        <div style="margin-bottom:10px;">
                          <label class="acies_label col-md-12">Linked Table Column:</label>
                          <select id="selectHyperLinkedColumnPC_mul" class="select2 form-control" name="table">
                            <option value="" disabled selected>Linked Table Column</option>
                          </select>
                        </div>
                        <div style="margin-bottom:10px;">
                          <label class="acies_label col-md-12">Linked Table Additional Column:</label>
                          <select id="selectHyperLinkedAdditionalPC_mul" class="select2 form-control" name="table" multiple>

                          </select>
                        </div>
                        <button type="button" onclick="extractTheHyperLinkValues(this)" id="save_buttonid_hyperlinking_mul" class="btn btn-primary saveElementsButton" data-subCategory="Hyperlinking table" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" >Save</button>
                      </div>
                      <div id='formattingColumns_mul' class="subCategories" style="display:none;">
                        <div class="row">
                        <div class="col-12">
                          <div class="float-right" style="margin-right: 6px;">
                            <button onclick="populateFrmattingColumns_mul(this)" class="btn btn-primary" type="button"><i class="fas fa-plus" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add Column Formatting</button>
                          </div>
                        </div>
                      </div>
                      <div class="formatting-body">

                      </div>
                      <button type="button" onclick="saveFormattingColumns_mul(this)" id="save_buttonid_formatting_mul" class="btn btn-primary saveElementsButton" data-subCategory="formatting column" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;margin-top:1rem;" >Save</button>
                      <hr style="height:2px;border-width:0;color:gray;background-color:gray">
                      <div class="titleRow_mul">
                        <h6 style="font-weight: bold;">Select stylling of title row</h6>
                      <div class="row">
                        <div class="col-6">
                          <p style="font-weight: bold;">Select text color:</p>
                          <input type="color" value="#ffffff" class="form-control" data-textmain="color">
                        </div>
                        <div class="col-6">
                          <p style="font-weight: bold;">Select BG color:</p>
                          <input type="color" value="#ffffff" class="form-control" data-bgmain="color">
                        </div>
                      </div>
                      <div class="row" style="padding-top:10px;padding-bottom:10px;">
                        <div class="col-6">
                          <p style="font-weight: bold;">Select font style:</p>
                          <select class="select2 form-control" data-fontmain="text">
                            <option value="" disabled="" selected="">Select font</option>
                            <option value="Arial_sans-serif">Arial (sans-serif)</option>
                            <option value="Verdana_sans-serif">Verdana (sans-serif)</option>
                            <option value="Helvetica_sans-serif">Helvetica (sans-serif)</option>
                            <option value="Tahoma_sans-serif">Tahoma (sans-serif)</option>
                            <option value="Trebuchet MS_sans-serif">Trebuchet MS (sans-serif)</option>
                            <option value="Times New Roman_serif">Times New Roman (serif)</option>
                            <option value="Georgia_serif">Georgia (serif)</option>
                            <option value="Garamond_serif">Garamond (serif)</option>
                            <option value="Courier New_monospace">Courier New (monospace)</option>
                            <option value="Brush Script MT_cursive">Brush Script MT (cursive)</option>
                          </select>
                        </div>
                        <div class="col-6">
                          <p style="font-weight: bold;">Select font size:</p>
                          <select class="select2 form-control" data-sizemain="size">
                            <option value="0.8rem" selected>Normal</option>
                            <option value="0.7rem">Xtra small</option>
                            <option value="0.9rem">Medium</option>
                            <option value="1rem">Large</option>
                            <option value="1.1rem">Xtra large</option>
                          </select>
                        </div>
                      </div>
                        <div class="row">
                          <div class="col-12">
                            <div class="float-right" style="margin-right: 6px;">
                              <button onclick="titleRowPopulateContent_mul(this)" class="btn btn-primary" type="button"><i class="fas fa-plus" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Exception</button>
                            </div>
                          </div>
                        </div>
                        <div class="title-row-body_mul">

                        </div>
                      </div>
                      <div>
                        <button type="button" onclick="savetitlerow_mul(this)" id="save_buttonid_titlerow_mul" class="btn btn-primary saveElementsButton" data-subCategory="formatting column" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" >Save</button>
                        <button class="more_colors" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="resetButtonTitleRow_mul(this)">Reset</button>
                      </div>
                      <hr style="height:2px;border-width:0;color:gray;background-color:gray">
                      <div class="columnHeaders">
                        <p style="font-weight: bold;">Select column headers to hide:</p>
                        <select class="columnHeadersSelect" multiple>
                        </select>
                        <div style="margin-top:1rem;">
                          <button type="button" class="btn btn-primary" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="saveColumnHeadersHide_mul(this)">Save</button>
                          <button class="more_colors" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="resetColumnHeadersHide_mul(this)">Reset</button>
                        </div>
                      </div>
                      </div>
                      <div id='paginationDiv_mul' class="subCategories" style="display:none;margin-left:15px;">
                        <div class="card-header">
                          <h3>Pagination</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                              <div class="col-12">
                                <select class="form-control select2" id="paginationSelect_mul" onchange="PaginationSelect_mul(this)" multiple>

                                </select>
                              </div>
                            </div>
                            <div class="col-12 mt-3">
                              <button type="button" onClick="SavePagination_mul(this)" class="btn btn-primary saveElementsButton" data-subCategory="table name" style="height:1.5rem;padding-top: 0.1rem;" >Save</button>
                            </div>
                        </div>
                      </div>
                      <div id='titleName_mul' class="subCategories" style="display:none;">
                        <h6>Select icon and color</h6>
                        <div class="row" style="margin-bottom:18px;">
                          <div class="col-6">
                            <div class="row app_icon_color_code">

                            </div>
                            <button class="more_colors" id="more-iconcolors-button" onClick="moreColors(this)" >more colors</button>
                          </div>
                          <div class="col-6">
                            <div class="listoficontitlename">

                            </div>
                            <button class="more_colors" id="more-icons" onclick="moreIcons(this)"style="margin-top: -5px;">more icons</button>
                          </div>
                          <div class="col-6">
                            <h6>Select table name</h6>
                            <input type="text" class="textinput textInput form-control  ">
                          </div>
                          <div class="col-6">
                            <button class="more_colors" onClick="resetButtonTitleName_mul(this)">Reset</button>
                          </div>
                        </div>
                      <button type="button" onclick="saveTitleName_mul(this)" id="save_buttonid_TitleName_mul" class="btn btn-primary saveElementsButton" data-subCategory="title name_mul" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" >Save</button>
                      </div>
                      <div id="buttonsGroupedTogetherDiv_mul" class="subCategories" style="display:none;margin-left:15px;">
                        <div class="columnHeaders">
                          <p style="font-weight: bold;">Select buttons to add in drop down :</p>
                          <select multiple>
                            <option value="uploadButton">Upload</option>
                            <option value="saveTemplateButton">Save Template</option>
                            <option value="example1_expand">Expand</option>
                            <option value="plotCharts">Plot Chart</option>
                            <option value="setAlertBtn">Set alert</option>
                            <option value="filter_button_list_view">Filter</option>
                            <option value="saveEditListView">Save Edited Data</option>
                            <option value="editListView">Edit Mode</option>
                            <option value="tablegenerator_">Paste tabular data</option>
                            <option value="listview_clearall_">Delete all data</option>
                            <option value="find_replace_">Find and replace</option>
                            <option value="freeze_pane_">Freeze Panes</option>
                            <option value="extract_data_">Extract Data</option>
                            <option value="formatter_">Formatters</option>
                            <option value="showTransactions">View Transaction Status</option>
                            <option value="addComp_field_">Add Computed Fields</option>
                            <option value="bulk_update">Bulk Update</option>
                            <option value="conditional_delete">Conditional Delete</option>
                            <option value="approve_all_ApprovalTemplate">Approve all</option>
                            <option value="reject_all_ApprovalTemplate">Reject all</option>
                          </select>
                          <p style="font-weight: bold;">Text for dropdown button:</p>
                          <input type="text" class="textinput textInput form-control  ">
                          <div style="margin-top:1rem;">
                            <button type="button" class="btn btn-primary" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="saveButtonsGroupedTogether_mul(this)">Save</button>
                            <button class="more_colors" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="resetButtonsGroupedTogether_mul(this)">Reset</button>
                          </div>
                        </div>
                      </div>
                      <div id='Chart_mul' class="subCategories" style="display:none;">
                        <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Chart</p>

                          <div class="form-group" style="margin-left:35%;">
                              <div id="div_id_active_mul" class="custom-control custom-checkbox">
                                <input type="checkbox" name="NotRequiredChart" class="checkboxinput custom-control-input notRequired" id="notrequiredChart_mul" >
                                <label for="notrequiredChart_mul" class="custom-control-label">
                                  Not Required
                                </label>
                              </div>
                            </div>
                            <div class="chartSubElements elementCheckboxes">
                            {%for i in chartSubElements%}
                              <div class="form-group" style="margin-left:1rem;">
                                <div id="div_id_active_mul" class="custom-control custom-checkbox">
                                  <input type="checkbox" name="{{i}}" class="checkboxinput custom-control-input" id="{{i}}_mul">
                                  <label for="{{i}}_mul" class="custom-control-label">
                                    {{i}}
                                  </label>
                                </div>
                              </div>
                            {%endfor%}
                          </div>
                          <button type="button" class="btn btn-primary saveElementsButton" data-subCategory="Chart" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" disabled>Save</button>
                      </div>
                      <div id='Filter_mul' class="subCategories" style="display:none;">
                        <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Filter</p>

                          <div class="form-group" style="margin-left:35%;">
                              <div id="div_id_active_mul" class="custom-control custom-checkbox">
                                <input type="checkbox" name="NotRequiredFilter" class="checkboxinput custom-control-input notRequired" id="notrequiredFilter_mul">
                                <label for="notrequiredFilter_mul" class="custom-control-label">
                                  Not Required
                                </label>
                              </div>
                            </div>
                            <div class="filterSubElements elementCheckboxes">
                            {%for i in filterSubElements%}
                              <div class="form-group" style="margin-left:1rem;">
                                <div id="div_id_active_mul" class="custom-control custom-checkbox">
                                  <input type="checkbox" name="{{i}}" class="checkboxinput custom-control-input" id="{{i}}elements_mul">
                                  <label for="{{i}}elements_mul" class="custom-control-label">
                                    {{i}}
                                  </label>
                                </div>

                              </div>
                            {%endfor%}
                          </div>
                          <div style="width: 20em;margin-left: 15px;">
                          <select class='select2 form-control  mt-2' id="custom_field_daterange_selection_mul">
                            <option value=""selected>-----</option>
                          </select>
                          </div>
                          <br>
                          <button type="button" class="btn btn-primary saveElementsButton" data-subCategory="Filter" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" disabled>Save</button>
                          <hr style="height:2px;border-width:0;color:gray;background-color:gray">
                          <button onclick="quickFilters_mul(this)" class="btn btn-primary float-right" type="button" id="quickFiltersBtn_mul" data-list="">Quick filters</button>
                        </div>

                      <!-- Action -->
                      <div id='JSAttributes_mul' class="subCategories" style="display:none;">
                        <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;JS Attributes</p>

                          <div class="form-group">
                            <select class='select2 form-control  mt-2' id="selectLVJSAttribute_mul">
                              <option value="" selected>-----</option>
                              <option value="restrictMSEdit">Restrict edit of existing selections (Multi-select)</option>
                            </select>
                          </div>
                          <button type="button" id="saveJSAttributeButton_mul" class="btn btn-primary saveElementsButton" data-subCategory="JS Attributes" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;">Save</button>
                      </div>
                      <div id='group_by_action_mul' class="subCategories" style="display:none;">
                        <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Group By</p>
                        <p style="margin-left: 24%;font-size:small;">If configured this will disable the action buttons</p>
                        <div class="row">
                          <div class="col-6">
                            <div style="margin-left: 50%;" id="div_id_active" class="custom-control custom-checkbox">
                              <input type="checkbox" name="group_by_action_checkbox_mul" class="checkboxinput custom-control-input" id="group_by_action_checkbox_mul" onchange="group_by_action_checkbox_onchange_mul(this)">
                              <label for="group_by_action_checkbox_mul" class="custom-control-label">
                                Not Required
                              </label>
                            </div>
                          </div>
                          <div class="col-6">
                            <div style="margin-left: 24%;" id="div_id_active" class="custom-control custom-checkbox">
                              <input type="checkbox" name="group_by_action_checkbox_user_configuration_mul" class="checkboxinput custom-control-input" id="group_by_action_checkbox_user_configuration_mul">
                              <label for="group_by_action_checkbox_user_configuration_mul" class="custom-control-label">
                                Allow users to configure group-by views?
                              </label>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <div class="float-right" style="margin-right: 6px;">
                              <button onclick="group_by_action_add_levels_mul(this)" class="btn btn-primary add_level" type="button"><i class="fas fa-plus" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add Levels</button>
                              <button onclick="group_by_action_reset_mul(this)" class="btn btn-primary" type="button">Reset</button>
                            </div>
                          </div>
                        </div>

                        <div class="group_by_action_levels_mul" style="margin-left: 1rem">
                          <hr style="height:2px;border-width:0;color:gray;background-color:gray">
                        </div>

                        <div class="group_by_action_columns_mul" style="margin-left: 1rem;margin-top:1rem;">
                          <p style="font-weight: bold;">Select columns:</p>
                          <select class="select2 form-control" multiple onchange="group_by_action_columns_operation_mul(this)"></select>
                          <div class="operation_div">
                          </div>
                        </div>
                        <div style="margin-top:1rem;">
                          <button type="button" class="btn btn-primary saveElementsButton" data-subcategory="Group by" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="group_by_action_save_mul(this)">Save</button>
                        </div>
                      </div>

                      <div id='ListView_Action_mul' class="subCategories" style="display:none;">
                        <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Action</p>

                          <div class="form-group" style="margin-left:35%;">
                              <div id="div_id_active_mul" class="custom-control custom-checkbox">
                                <input type="checkbox" name="NotRequiredListView_Action_mul" class="checkboxinput custom-control-input notRequiredAction" id="notrequiredListView_Action_mul" >
                                <label for="notrequiredListView_Action_mul" class="custom-control-label">
                                  Not Required
                                </label>
                              </div>
                            </div>
                            <div id="div_id_active_mul" class="custom-control custom-checkbox" style="margin-left:35%;">
                              <input type="checkbox" name="SelectAll_listAction" class="checkboxinput custom-control-input" id="selectAll_listAction_mul" value="1">
                              <label for="selectAll_listAction_mul" class="custom-control-label"> Select All</label></div>
                              <div class="custom-control custom-checkbox" style="margin-left:35%;margin-top:3%">
                                <input type="checkbox" name="action_btn_config_group_together_mul" class="checkboxinput custom-control-input" id="action_btn_config_group_together_mul" >
                                <label for="action_btn_config_group_together_mul" class="custom-control-label"> Group Together</label></div><br>
                            <div class="listview_actionSubElements elementCheckboxes">

                            {%for i in listview_action%}
                              <div class="form-group listofActions" style="margin-left:1rem;">
                                <div id="div_id_active_mul" class="custom-control custom-checkbox">
                                  <input type="checkbox" name="{{i}}" class="checkboxinput custom-control-input" id="{{i}}_mul">
                                  <label for="{{i}}_mul" class="custom-control-label">
                                    {{i}}
                                  </label>
                                  {% if i == "Delete Record"%}
                                  <ul>
                                    <li style="list-style-type: none;margin-left: -2.5rem;padding-top: 1rem; display:none;">
                                      <div id="div_id_active_perm_mul" class="custom-control custom-checkbox">
                                        <input type="checkbox" name="Perm Delete Record" class="checkboxinput custom-control-input" id="Perm Delete Record mul">
                                        <label for="Perm Delete Record mul" class="custom-control-label">
                                          Permanent Delete Record
                                        </label>
                                      </div>
                                    </li>
                                    <li style="list-style-type: none;margin-left: -2.5rem;padding-top: 1rem;display:none;">
                                      <div id="div_id_active_temp_mul" class="custom-control custom-checkbox">
                                        <input type="checkbox" name="Temp Delete Record" class="checkboxinput custom-control-input" id="Temp Delete Record mul">
                                        <label for="Temp Delete Record mul" class="custom-control-label">
                                          Temporary Delete Record
                                        </label>
                                      </div>
                                    </li>
                                  </ul>
                                  {% endif %}
                                </div>
                              </div>
                            {%endfor%}
                          </div>
                          <div class="row">
                            <button type="button" id="save_actionbuttonid_mul" class="btn btn-primary saveElementsButton" data-subCategory="Action" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" disabled>Save</button>
                            <button type="button" class="btn btn-primary" id="configure_actionbuttonid_mul" data-list="" onclick="configureActionBtn_mul(this)" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;">Configure Action Buttons</button>
                            <button type="button" class="btn btn-primary" id="configure_action_column_id_mul" data-list="" onclick="configureActionColumn(this)" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;">Configure Action Column</button>
                          </div>
                      </div>
                      <script>
                        function onchange_card_header_config_switch(obj){
                          if ($(obj).prop('checked')){
                            $(obj).closest('.card_header_config').find('.numberinput').prop('disabled',true)
                          }else{
                            $(obj).closest('.card_header_config').find('.numberinput').prop('disabled',false)
                          }
                        }
                        function save_card_header_configs(obj){
                          var values = {}
                          if ($('#formattingColumns').find('.card_header_config').find('#card_header_config_switch').prop('checked')){
                            values['card_header_config_switch'] = $('#formattingColumns').find('.card_header_config').find('#card_header_config_switch').prop('checked')
                          }else{
                            values['card_header_config_switch'] = $('#formattingColumns').find('.card_header_config').find('#card_header_config_switch').prop('checked')
                            values['card_header_text_size'] = $('#formattingColumns').find('.card_header_config').find('.numberinput').val()
                          }
                          $('#formattingColumnBtn').attr('data-listfour',JSON.stringify(values))
                        }
                        function reset_card_header_configs(obj){
                          event.preventDefault()
                          $('#formattingColumns').find('.card_header_config').find('.numberinput').prop('disabled',false)
                          $('#formattingColumns').find('.card_header_config').find('.numberinput').val('').trigger('change')
                          $('#formattingColumns').find('.card_header_config').find('#card_header_config_switch').prop('checked',false)
                        }
                        function saveColumnHeadersHide_mul(obj){
                          var values = {}
                          var columnHeadersHidden =  $('#formattingColumns_mul').find('.columnHeaders').find('.columnHeadersSelect').val()
                          values[$('#selectTablePC').val()] = columnHeadersHidden
                          $('#formattingColumnBtn_mul').attr('data-listthree',JSON.stringify(values))
                        }
                        function resetColumnHeadersHide_mul(obj){
                          event.preventDefault()
                          $('#formattingColumnBtn_mul').attr('data-listthree','')
                          $('#formattingColumns_mul').find('.columnHeaders').find('.columnHeadersSelect').val([]).trigger('change')
                        }
                        $('#action_btn_config_group_together_mul').change(function () {
                          if (this.checked == true){
                            $('#configure_actionbuttonid_mul').attr('data-list','');
                            $('#configure_actionbuttonid_mul').css('display','none');
                            $('#configure_action_column_id_mul').css('display','block');
                          }else{
                            $('#configure_actionbuttonid_mul').css('display','block');
                            $('#configure_action_column_id_mul').css('display','none');
                          }
                       })

                       function populateActionButtons_mul(obj){
                        var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record_mul']`).prop('checked')
                        var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
                        var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
                        var viewRecord = $('.listview_actionSubElements').find(`[id='View Record_mul']`).prop('checked')
                        var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
                        var content = contentConfigureAction()
                        $('#actionButtonsConfigurationModal_mul').find('.modal-body').append(content)
                        var singleCard = $('#actionButtonsConfigurationModal_mul').find('.modal-body').find('.masterstyling').slice(-1)
                        $(singleCard).find('.selectButtonsOptions').empty()
                        $(singleCard).find('.selectButtonsOptions').append(`<option value="" disabled="" selected="">Select Button</option>`)
                        for (let i in actionBtn){
                          if (actionBtn[i]== true){
                            $(singleCard).find('.selectButtonsOptions').append(`<option value="${i}" >${i}</option>`)
                          }
                        }
                        $(singleCard).find('select').each(function(){
    $(this).select2()
  })
                       }
                       function saveConfigurationModal_mul(obj){
                        var cards = $('#actionButtonsConfigurationModal_mul').find('.masterstyling')
                        var fullValues = {}
                        var lastValues = {}
                        var lengthOfCards = cards.length;
                        for (let i = 0; i < lengthOfCards; i++) {
                          var values = {}
                          var singleCard = $('#actionButtonsConfigurationModal_mul').find('.masterstyling').eq(i)
                          var selectedButton = $(singleCard).find('.selectButtonsOptions').val()
                          $(singleCard).find('[data-css]').each(function(){values[$(this).attr('data-css')] = $(this).val()})
                          values['data-icon'] = $(singleCard).find('.moreIconActionButtons').attr('data-list')
                          values['rgba'] = hexToRGB(values['background-color'],values['opacity'])
                          fullValues[selectedButton] = values
                        }
                        var columnOrderDict = $('#actionButtonsConfigurationModal_mul').find('#actionBtnOrder_mul').attr('data-list')
                        if (columnOrderDict!= ""){
                          columnOrderDict = JSON.parse(columnOrderDict)
                          fullValues['columnOrder'] = columnOrderDict
                        }
                        if (Object.keys(fullValues).length > 0){
                          lastValues[$('#selectTablePC').val()] = fullValues
                        }
                        $('#configure_actionbuttonid_mul').attr('data-list',JSON.stringify(lastValues))
                        $('#actionButtonsConfigurationModal_mul').modal('hide')
                        $('.dataTableModal_mul').modal('show')
                        $('#dataTableModal').modal('show')
                       }
                       function resetActionButtons_mul(obj){
                        $('#actionButtonsConfigurationModal_mul').find('.modal-body').find('.masterstyling').remove()
                        $('#actionButtonsConfigurationModal_mul').find('#actionBtnOrder_mul').attr('data-list','')
                        var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record_mul']`).prop('checked')
                        var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
                        var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
                        var viewRecord = $('.listview_actionSubElements').find(`[id='View Record_mul']`).prop('checked')
                        var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
                          $('#actionButtonsConfigurationModal_mul').find('.sortable-order').empty()
                          for (let i in actionBtn){
                            if (actionBtn[i]== true){
                              $('#actionButtonsConfigurationModal_mul').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${i}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${i}</li>`);
                            }
                          }
                          $.ajax({
                            url: window.location.pathname,
                            data: { 'model_name': $('#selectTablePC').val(), 'operation': 'fecthing_verbose_name_action_config' },
                            type: "POST",
                            dataType: "json",
                            success: function (data) {
                              var listColumns = data.columns__dict
                              for (let [key, value] of Object.entries(listColumns)){
                                $('#actionButtonsConfigurationModal_mul').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${key}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${value}</li>`);
                              }
                              $('#actionButtonsConfigurationModal_mul').find('.sortable-order').sortable()

                            },
                            error: function () {
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                            }
                          })
                       }
                       function saveColumnOrderActionButtons_mul(obj){
                        var columnOrderDict = []
                        $('#actionButtonsConfigurationModal_mul').find(".sortable-order").children().each(function() {
                          columnOrderDict.push($(this).attr("name"))
                        })
                        $('#actionButtonsConfigurationModal_mul').find('#actionBtnOrder_mul').attr('data-list',JSON.stringify(columnOrderDict))
                       }
                       function closeConfigurationModal_mul(obj){
                        $('#actionButtonsConfigurationModal_mul').modal('hide')
                        $('.dataTableModal_mul').modal('show')
                        $('#dataTableModal').modal('show')
                       }
                       function action_column_modal_id_reset(obj){
                        if ($('#selectTemplate').val() == "Multi Dropdown View"){
                          $('.dataTableModal_mul').modal('show')
                          $('#dataTableModal').modal('show')
                          $('#configure_action_column_id_mul').attr('data-list','');
                        }else{
                          $('#dataTableModal').modal('show')
                          $('#configure_action_column_id').attr('data-list','');
                        }
                        $('#action_column_modal_id').modal('hide')
                        $('#action_column_modal_id').find('.textinput').val('').trigger('change')
                        $('#action_column_modal_id').find('#elipses_trigger').prop('checked',false)
                      }
                      function configureActionColumn(obj){
                        if ($('#selectTemplate').val() == "Multi Dropdown View"){
                          $('.dataTableModal_mul').modal('hide')
                          $('#dataTableModal').modal('hide')
                        }else{
                          $('#dataTableModal').modal('hide')
                        }
                        $('#action_column_modal_id').modal('show')
                        var attrData = $(obj).attr('data-list')
                        if (attrData == ''|| attrData =='{}' || attrData == 'null'){
                          $('#action_column_modal_id').find('.textinput').val('').trigger('change')
                          $('#action_column_modal_id').find('#elipses_trigger').prop('checked',false)
                        }else{
                          var parsedAttrdata = JSON.parse(attrData)
                          $('#action_column_modal_id').find('.textinput').val(parsedAttrdata[$('#selectTablePC').val()]['columnHeader']).trigger('change')
                          $('#action_column_modal_id').find('#elipses_trigger').prop('checked',parsedAttrdata[$('#selectTablePC').val()]['elipsesTrigger'])
                        }
                      }
                      function action_column_modal_id_close(obj){
                        if ($('#selectTemplate').val() == "Multi Dropdown View"){
                          $('.dataTableModal_mul').modal('show')
                          $('#dataTableModal').modal('show')
                        }else{
                          $('#dataTableModal').modal('show')
                        }
                        $('#action_column_modal_id').modal('hide')
                      }
                      function action_column_modal_id_save(obj){
                        var values = {}
                        values[$('#selectTablePC').val()] = {'columnHeader':$('#action_column_modal_id').find('.textinput').val(),'elipsesTrigger':$('#action_column_modal_id').find('#elipses_trigger').prop('checked')}

                        if ($('#selectTemplate').val() == "Multi Dropdown View"){
                          $('.dataTableModal_mul').modal('show')
                          $('#dataTableModal').modal('show')
                          $('#configure_action_column_id_mul').attr('data-list',JSON.stringify(values))
                        }else{
                          $('#dataTableModal').modal('show')
                          $('#configure_action_column_id').attr('data-list',JSON.stringify(values))
                        }
                        $('#action_column_modal_id').modal('hide')
                      }

                       function configureActionBtn_mul(obj){
                        $('#actionButtonsConfigurationModal_mul').modal('show')
                        $('.dataTableModal_mul').modal('hide')
                        $('#dataTableModal').modal('hide')
                        var attrData = $(obj).attr('data-list')
                        if (attrData == ''|| attrData =='{}' || attrData == 'null'){
                          var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record_mul']`).prop('checked')
                          var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
                          var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
                          var viewRecord = $('.listview_actionSubElements').find(`[id='View Record_mul']`).prop('checked')
                          var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
                          $('#actionButtonsConfigurationModal_mul').find('.sortable-order').empty()
                          for (let i in actionBtn){
                            if (actionBtn[i]== true){
                              $('#actionButtonsConfigurationModal_mul').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${i}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${i}</li>`);
                            }
                          }
                          $.ajax({
                            url: window.location.pathname,
                            data: { 'model_name': $('#selectTablePC').val(), 'operation': 'fecthing_verbose_name_action_config' },
                            type: "POST",
                            dataType: "json",
                            success: function (data) {
                              var listColumns = data.columns__dict
                              for (let [key, value] of Object.entries(listColumns)){
                                $('#actionButtonsConfigurationModal_mul').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${key}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${value}</li>`);
                              }
                              $('#actionButtonsConfigurationModal_mul').find('.sortable-order').sortable()

                            },
                            error: function () {
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                            }
                          })
                        }else {
                          $('#actionButtonsConfigurationModal_mul').find('.modal-body').find('.masterstyling').remove()
                          var parsedAttrdata = JSON.parse(attrData)
                          var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record_mul']`).prop('checked')
                          var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
                          var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
                          var viewRecord = $('.listview_actionSubElements').find(`[id='View Record_mul']`).prop('checked')
                          var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
                          for (let i in parsedAttrdata){
                            for (let j in parsedAttrdata[i]){
                              if (j in actionBtn){
                                populateActionButtons_mul()
                                var singleCard = $('#actionButtonsConfigurationModal_mul').find('.modal-body').find('.masterstyling').slice(-1)
                                $(singleCard).find('.selectButtonsOptions').val(j).trigger('change')
                                for (let k in parsedAttrdata[i][j]){
                                  $(singleCard).find('[data-css]').each(function(){
                                    if ($(this).attr('data-css') == k){
                                      $(this).val(parsedAttrdata[i][j][k]).trigger('change')
                                    }
                                  })
                                }
                                $(singleCard).find('.moreIconActionButtons').attr('data-list',parsedAttrdata[i][j]['data-icon'])
                              }
                            }
                            if ('columnOrder' in parsedAttrdata[i]){
                              $('#actionButtonsConfigurationModal_mul').find('#actionBtnOrder_mul').attr('data-list',JSON.stringify(parsedAttrdata[i]['columnOrder']))
                              $('#actionButtonsConfigurationModal_mul').find('.sortable-order').empty()
                              for (let l in parsedAttrdata[i]['columnOrder']){
                                $('#actionButtonsConfigurationModal_mul').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${parsedAttrdata[i]['columnOrder'][l]}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${parsedAttrdata[i]['columnOrder'][l]}</li>`);
                              }
                              $('#actionButtonsConfigurationModal_mul').find('.sortable-order').sortable()
                            }else{
                              $('#actionButtonsConfigurationModal_mul').find('.sortable-order').empty()
                              for (let l in actionBtn){
                                if (actionBtn[l]== true){
                                  $('#actionButtonsConfigurationModal_mul').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${l}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${l}</li>`);
                                }
                              }
                              $.ajax({
                                url: window.location.pathname,
                                data: { 'model_name': $('#selectTablePC').val(), 'operation': 'fecthing_verbose_name_action_config' },
                                type: "POST",
                                dataType: "json",
                                success: function (data) {
                                  var listColumns = data.columns__dict
                                  for (let [key, value] of Object.entries(listColumns)){
                                    $('#actionButtonsConfigurationModal_mul').find('.sortable-order').append(`<li class="btn btn-sm btn-light col" name="${key}"><span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${value}</li>`);
                                  }
                                  $('#actionButtonsConfigurationModal_mul').find('.sortable-order').sortable()

                                },
                                error: function () {
                                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                }
                              })
                            }
                          }
                        }

                       }
                        var string = `<div class="row" white-space="nowrap">`
                        var list = ["fas fa-compass", "fas fa-address-card", "fas fa-clipboard", "fas fa-wallet", "fas fa-dollar-sign", "fas fa-table", "fas fa-atom", "fas fa-tasks", "fas fa-th", "fas fa-business-time", "fas fa-chart-area", "fas fa-chart-line", "fas fa-chart-bar", 'fas fa-chart-pie', "fas fa-sitemap", "fas fa-highlighter", "fas fa-th-large", "fas fa-globe", "fas fa-paperclip", "fas fa-project-diagram", "fas fa-print", "fas fa-i-cursor", "fas fa-indent", "fas fa-list-alt", "fas fa-list-ul", "fas fa-outdent", "far fa-building", "fas fa-bullseye", "fas fa-calendar", "far fa-compass"]
                        for (i = 0; i < list.length; i++) {
                          if ($('.listoficon2').attr('icon-selected') == list[i]) {

                            string += `<div class="col-2 icons"><a href="#" ><i class="${list[i]} singleIcon" style="font-size:1rem;color: white;font-size: 1rem;background: var(--primary-color);padding: 5px;border-radius: 5px;" ></i>&nbsp&nbsp</a></div>`
                          }
                          else {
                            string += `<div class="col-2 icons"><a href="#" ><i class="${list[i]} singleIcon" style="font-size:1rem;color: black;font-size: 1rem;background: #fff;padding: 5px;border-radius: 5px;" ></i>&nbsp&nbsp</a></div>`
                          }
                        }
                        string += `</div>`
                        $('#titleName_mul').find('.listoficontitlename').append(string)
                        var color = ['dc143c', 'ff8c00', 'ffd700', '32cd32', '40e0d0', '00bfff', '1e90ff', 'ff1493', '9400d3', '696969','f0f8ff','fffacd','fce8b1','f5cedb','c9dcf2','bce6cd']
                        var code = ""

                        for (i = 0; i < color.length; i++) {
                          code += '<div class="col-2 color-checkspan" style="background-color:#' + color[i] + '"></div><br>'
                        }

                        $('#titleName_mul').find(".app_icon_color_code").html(code);
                        $(".app_icon_color_code .color-checkspan").click(function () {
                          $(".app_icon_color_code .color-checkspan").empty()
                          $(".app_icon_color_code .color-checkspan").attr("id","")
                          $(this).empty()
                          $(this).append('<i class="fa-solid fa-check" style="margin-top: 6px;margin-left: 8px;"></i>');
                          $(this).attr("id", "selectedIconColor")
                        })
                        $('.singleIcon').click(function(){
                          $('.singleIcon').css("color", "black");
                          $('.singleIcon').css("background", "#fff");
                          $('.singleIcon').attr("id", "");
                          $(this).attr("id", "selectedIcon")
                          $(this).css("color", "white");
                          $(this).css("background", "var(--primary-color)");
                        })
                        $(".icon_a").click(function () {
                          $(".icon_a").attr("selected_a", "false");
                          $(".icon_a").css("background-color", "#f9f9f9");
                          $(".icon_a").css("color", "black");
                          $(this).attr("selected_a", "true");
                          $(this).css("background-color", "var(--secondary-color)");
                          $(this).css("color", "white");
                        })
                        function resetButtonTitleName_mul(obj){
                          event.preventDefault()
                          $('.singleIcon').css("color", "black");
                          $('.singleIcon').css("background", "#fff");
                          $('.singleIcon').attr("id", "");
                          $(".icon_a").attr("selected_a", "false");
                          $(".icon_a").css("background-color", "#f9f9f9");
                          $(".icon_a").css("color", "black");
                          $(".app_icon_color_code .color-checkspan").empty()
                          $(".app_icon_color_code .color-checkspan").attr("id","")
                          $('#hexC').empty()
                          viewC.style.backgroundColor = null
                          $('#titleNameBtn_mul').attr('data-list','')
                          $('#titleName_mul').find('.textInput').val('').trigger('change')
                        }
                        function titleName_mul(obj){
                          $('.singleIcon').css("color", "black");
                          $('.singleIcon').css("background", "#fff");
                          $('.singleIcon').attr("id", "");
                          $(".icon_a").attr("selected_a", "false");
                          $(".icon_a").css("background-color", "#f9f9f9");
                          $(".icon_a").css("color", "black");
                          $(".app_icon_color_code .color-checkspan").empty()
                          $(".app_icon_color_code .color-checkspan").attr("id","")
                          $('#hexC').empty()
                          viewC.style.backgroundColor = null
                          $('#titleName_mul').find('.textInput').val($('#selectTablePC').val()).trigger('change')
                          var attrData = $(obj).attr('data-list')
                          if (attrData == ''|| attrData =='{}'){

                          }else {
                            var parsedAttrdata = JSON.parse(attrData)
                            for (let i in parsedAttrdata){
                              $('#titleName_mul').find('.textInput').val(i).trigger('change')
                              var outerIcon = false
                              var outerIconColor = false
                                $('.singleIcon').each(function(){
                                  if ($(this).attr('class') == parsedAttrdata[i]['icon']){
                                    outerIcon = true
                                    $(this).attr("id", "selectedIcon")
                                    $(this).css("color", "white");
                                    $(this).css("background", "var(--primary-color)");
                                  }
                                })
                                if (outerIcon == false){
                                  $(".icon_a").each(function(){
                                    if ($(this).attr('data-class') == parsedAttrdata[i]['icon']){
                                      $(this).attr("selected_a", "true");
                                      $(this).css("background-color", "var(--primary-color)");
                                      $(this).css("color", "white");
                                    }
                                  })
                                }
                                $(".app_icon_color_code .color-checkspan").each(function(){
                                  if ($(this).css('background-color') == parsedAttrdata[i]['iconColor']){
                                    outerIconColor = true
                                    $(this).empty()
                                    $(this).append('<i class="fa-solid fa-check" style="margin-top: 6px;margin-left: 8px;"></i>');
                                    $(this).attr("id", "selectedIconColor")
                                  }
                                })
                                if (outerIconColor == false){
                                  $('#viewC').css('background-color',parsedAttrdata[i]['iconColor'])
                                  hexC.textContent = parseColor(parsedAttrdata[i]['iconColor'])
                                }
                            }
                          }
                        }
                        function saveTitleName_mul(obj){
                          var outerIconColor = false
                          var iconColorSelected = ''
                          var outerIcon = false
                          var iconSelected = ''
                          $(".app_icon_color_code .color-checkspan").each(function(){
                            if ($(this).attr('id') == 'selectedIconColor'){
                              outerIconColor = true
                              iconColorSelected = $(this).css('background-color')
                            }
                          })
                          if (outerIconColor == false){
                            iconColorSelected = $('#viewC').css('background-color')
                          }
                          $('.singleIcon').each(function(){
                            if ($(this).attr('id') == 'selectedIcon'){
                              outerIcon = true
                              iconSelected = $(this).attr('class')
                            }
                            if (outerIcon == false){
                              $(".icon_a").each(function(){
                                if ($(this).attr('selected_a') == 'true'){
                                  iconSelected = $(this).attr('data-class')
                                }
                              })
                            }
                          })

                          var selectedTableNameText = $('#titleName_mul').find('.textInput').val()
                          var values = {}
                          if (selectedTableNameText != ''&& iconSelected !=''){
                            values[selectedTableNameText] = {'icon':iconSelected,'iconColor':iconColorSelected}
                          }

                          $('#titleNameBtn_mul').attr('data-list',JSON.stringify(values))
                        }
                        function saveButtonsGroupedTogether_mul(obj){
                          var values = {}
                          var moreValues = {}
                          moreValues['dropDown'] = $('#buttonsGroupedTogetherDiv_mul').find('select').val()
                          moreValues['dropDowntext'] = $('#buttonsGroupedTogetherDiv_mul').find('.textinput').val()
                          values[$('#selectTablePC').val()] = moreValues
                          $('#buttonsGroupedTogether_mul').attr('data-list',JSON.stringify(values))
                        }
                        function buttonsGroupedTogetherClick_mul(obj){
                          $('#buttonsGroupedTogetherDiv_mul').find('select').each(function(){
    $(this).select2()
  })
                          var attrData = $(obj).attr('data-list')
                          if (attrData == ''|| attrData =='{}' || attrData == 'null'){
                            $('#buttonsGroupedTogetherDiv_mul').find('select').val([]).trigger('change')
                          $('#buttonsGroupedTogetherDiv_mul').find('.textinput').val('Buttons drop down').trigger('change')
                          }else{
                            var parsedAttrdata = JSON.parse(attrData)
                            $('#buttonsGroupedTogetherDiv_mul').find('select').val(parsedAttrdata[$('#selectTablePC').val()]['dropDown']).trigger('change')
                            $('#buttonsGroupedTogetherDiv_mul').find('.textinput').val(parsedAttrdata[$('#selectTablePC').val()]['dropDowntext']).trigger('change')
                          }
                        }
                        function resetButtonsGroupedTogether_mul(obj){
                          event.preventDefault()
                          $('#buttonsGroupedTogether_mul').attr('data-list','')
                          $('#buttonsGroupedTogetherDiv_mul').find('select').val([]).trigger('change')
                          $('#buttonsGroupedTogetherDiv_mul').find('.textinput').val('Buttons drop down').trigger('change')
                        }

                        document.getElementById('selectAll_listAction_mul').onclick = function() {
                          var checkboxes = $("#ListView_Action_mul").find(".listofActions").find('input[type=checkbox]')

                          document.getElementById('save_actionbuttonid_mul').disabled=false
                          document.getElementById('notrequiredListView_Action_mul').checked=false
                          for (var checkbox of checkboxes) {
                            if(checkbox.getAttribute('name') != "NotRequiredListView_Action_mul" && checkbox.getAttribute('name') != "Perm Delete Record" && checkbox.getAttribute('name') != "Temp Delete Record"){

                              if(checkbox.getAttribute('name') == "Delete Record"){
                                checkbox.checked = this.checked;
                                if(checkbox.checked== true){
                                  $("#ListView_Action_mul").find('.listview_actionSubElements').find('input[type=checkbox]').eq(2).parent().parent().css("display","block")
                                  $("#ListView_Action_mul").find('.listview_actionSubElements').find('input[type=checkbox]').eq(3).parent().parent().css("display","block")
                                  $("#ListView_Action_mul").find('.listview_actionSubElements').find('input[type=checkbox]').eq(2).prop('checked',true)
                                  $("#ListView_Action_mul").find('.listview_actionSubElements').find('input[type=checkbox]').eq(3).prop('checked',true)
                                }
                                else{
                                  $("#ListView_Action_mul").find('.listview_actionSubElements').find('input[type=checkbox]').eq(2).parent().parent().css("display","none")
                                  $("#ListView_Action_mul").find('.listview_actionSubElements').find('input[type=checkbox]').eq(3).parent().parent().css("display","none")
                                  $("#ListView_Action_mul").find('.listview_actionSubElements').find('input[type=checkbox]').eq(2).prop('checked',false)
                                  $("#ListView_Action_mul").find('.listview_actionSubElements').find('input[type=checkbox]').eq(3).prop('checked',false)
                                }
                              }else{
                                checkbox.checked = this.checked;
                                if((checkbox.getAttribute('name') == "Approve" || checkbox.getAttribute('name') == "Reject" || checkbox.getAttribute('name') == "Delegate Approval" || checkbox.getAttribute('name') == "Enable Comments" || checkbox.getAttribute('name') == "Approval Wall" || checkbox.getAttribute('name') == "Send to previous approver") && ($("#selectTemplate").val() != "Approval Template")){
                                  checkbox.checked = this.unchecked;
                                }
                                if (checkbox.getAttribute('name') == "PDF Action Button"){
                                  checkbox.checked = this.unchecked;
                                }
                              }
                            }
                          }

                        }

                        document.getElementById('notrequiredListView_Action_mul').onclick = function() {
                          if(this.checked == true){
                            $("#ListView_Action_mul").find(".listofActions").find('input[type=checkbox]').each(function(){
                              this.checked=false
                            })
                            document.getElementById('selectAll_listAction_mul').checked=false

                          }
                          document.getElementById('save_actionbuttonid_mul').disabled=false
                        }

                        $("#ListView_Action_mul").find(".listofActions").find('input[type=checkbox]').on('change',function(){
                          if(this.checked == false){

                            document.getElementById('notrequiredListView_Action_mul').checked=false
                            document.getElementById('selectAll_listAction_mul').checked=false

                          }else{
                            document.getElementById('notrequiredListView_Action_mul').checked=false
                          }
                        })




                      </script>

                      <script>
                        $(document).ready(function(){
                          $('.listview_actionSubElements').find('.listofActions').each(function(){
                            at_name = $(this).find('input').attr('name')
                            if(["Approve", "Delegate Approval", "Reject", "Send to previous approver", "Approval Wall", "Enable Comments"].includes(at_name)){
                              $(this).find('input').attr("onchange","checkTemplateApproval.call(this)")
                            }
                          })
                        })

                      </script>

                      <!-- Action End -->

                      <div id='Custom_mul' class="subCategories" style="display:none;">
                        <p style="margin-left: 34%;font-size:larger"><strong>Custom columns</strong></p>

                          <div class="form-group" style="margin-left:5%;">
                            <div class="form-group col-12" id='customColumnDisp_mul'>
                              <label class="acies_label col-md-12">Columns with values as list of dictionaries</label>
                              <select id="customColumn_mul" class="select2 form-control" name="template" multiple>
                              </select>
                            </div>
                            </div>
                          <button type="button" class="btn btn-primary saveElementsButton" data-subCategory="Custom" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;">Save</button>
                      </div>
                      <div id='customTemplateListView_mul' class="subCategories" style="display:none;">
                        <p style="margin-left: 34%;font-size:larger"><strong>Custom template</strong></p>

                          <div class="form-group" style="margin-left:5%;">
                            <div id="div_id_active_mul" class="custom-control custom-checkbox">
                              <input type="checkbox" name="customTemplateListView" class="checkboxinput custom-control-input notRequired" id="customTemplateCheck_mul">
                              <label for="customTemplateCheck_mul" class="custom-control-label">
                                Custom template
                              </label>
                            </div>
                          </div>
                          <button type="button" class="btn btn-primary saveElementsButton" data-subCategory="customTemplateListView" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;">Save</button>
                      </div>
                      <div id='Alert_mul' class="subCategories" style="display:none;">
                        <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Alert</p>

                          <div class="form-group" style="margin-left:35%;">
                              <div id="div_id_active_mul" class="custom-control custom-checkbox">
                                <input type="checkbox" name="NotRequiredAlert" class="checkboxinput custom-control-input notRequired" id="notrequiredAlert_mul">
                                <label for="notrequiredAlert_mul" class="custom-control-label">
                                  Not Required
                                </label>
                              </div>
                            </div>
                            <div class="alertSubElements elementCheckboxes">
                            {%for i in alertSubElements%}
                              <div class="form-group" style="margin-left:1rem;">
                                <div id="div_id_active_mul" class="custom-control custom-checkbox">
                                  <input type="checkbox" name="{{i}}" class="checkboxinput custom-control-input" id="{{i}}_mul">
                                  <label for="{{i}}_mul" class="custom-control-label">
                                    {{i}}
                                  </label>
                                </div>
                              </div>
                            {%endfor%}
                          </div>
                          <button type="button" class="btn btn-primary saveElementsButton" data-subCategory="Alert" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" disabled>Save</button>
                      </div>
                      <!-- Formatter -->
                      <div id='Formatter_mul' class="subCategories" style="display:none;">
                        <p style="margin-left: 45%;font-size:larger"><strong>Formatter</strong></p>

                        <div class="form-group" style="margin-left:5%;display:none;" id="showformatTable_mul">
                          <div class="form-group col-12" id='formatTableDisp_mul'>
                            <label class="acies_label col-md-12">Select Tables</label>
                            <select id="formatTab_mul" class="select2 form-control" name="template" multiple>
                            </select>
                          </div>
                          </div>

                          <div class="form-group" style="margin-left:5%;">
                            <div class="form-group col-12" id='formatColumnDisp_mul'>
                              <label class="acies_label col-md-12">Select columns</label>
                              <select id="formatColumn_mul" class="select2 form-control" name="template" multiple>
                              </select>
                            </div>
                            </div>

                            <div class="row">
                              <table class="table table-bordered table-hover fformatTable" style="overflow: auto;margin-left: 2rem;">
                                <thead class="thead-dark">
                                  <tr>
                                    <th scope="col" style="text-align: center;">Table name</th>
                                    <th scope="col" style="text-align: center;">Column name</th>
                                    <th scope="col" style="text-align: center;">Action</th>
                                  </tr>
                                </thead>
                                <tbody id="formatterTable_mul">

                                </tbody>
                              </table>
                            </div>

                          <input type="hidden" id="configFormat_mul" value="" data-config_formatter="">
                          <button type="button" class="btn btn-primary saveElementsButton" data-subCategory="Custom" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;">Save</button>
                      </div>
                  </div>
                </div>
                </form>
              </div>


              </div>
          </div>
        </div>
          <div class="row">
          <div class="col-12">
            <div class="card">
              <div class='card-header' style='padding:0rem;'><h5 style="margin-bottom: 0rem;">
                <button class="btn" style='pointer-events: none; color:white;height: 2rem;width:7rem;border-color:none;color:var(--primary-color);padding-top:0.2rem;font-weight: bold;'>&nbsp;Preview&nbsp;
                </button></h5>
                  <div id="create_view_display_selection_id_mul" class="custom-control custom-checkbox" style="align-self: center;  margin-left: auto;display:none" >
                    <input type="checkbox" name="create_view_display_selection" class="checkboxinput custom-control-input" id="create_view_display_selection_mul" >
                    <label for="create_view_display_selection_mul" class="custom-control-label float-right" checked>
                          Show create view as tab&nbsp;&nbsp;&nbsp;
                    </label>
                  </div>
                  <div id="2selectblock_mul" style="align-self: center; margin-left: auto;padding:15px;display: none;margin-top:-50px" class="form-inline">
                    <div class="d-flex flex-row-reverse mt-4 pr-2">
                      <div class="modal fade" id="tablemapmodal_mul" role="dialog" data-focus="false" class="">
                        <div class="modal-dialog" style="max-width:500px;">
                          <!-- Modal content-->
                          <div class="modal-content">
                            <!-- Modal header-->
                            <div class="modal-header">
                              <h6 class="modal-title">Add mapping</h6>
                              <button type="button" class="close" onclick="$('#tablemapmodal_mul').modal('hide')">&times;</button>
                            </div>
                            <!-- Modal body-->
                            <div class="modal-body">
                              <div class="row d-flex justify-content-center mr-4">
                                <button onclick="addrowmap()" class="btn btn-sm" style="margin-left: auto;background: var(--primary-color);color: white;">
                                  <i class="fa fa-plus"></i></button>
                                </div>
                              <div class="row d-flex justify-content-center">
                                <div id="addrowm">
                              </div>
                            </div>
                                </div>
                            <!-- Modal footer-->
                            <div class="modal-footer">
                              <button type="button" class="btn btn-primary btn-xs" id="tablemapsave_mul" onclick="$('#tablemapmodal_mul').modal('hide')">Save</button>
                            </div>
                          </div>
                        </div>
                      </div><script>$(`#select2`).select2()
                        </script>

                      <button class="btn btn-sm btn-secondary d-flex justify-content-end" data-toggle="modal" data-target="#tablemapmodal_mul" onclick="" id="map-save-data_mul" table-map-data="">Add createview mapping</button>
                      </div>

                      </div>
              </div>
                <div id="previewCard_mul"></div>

              </div>
            </div>
          </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id='saveListViewConfig_mul' disabled>Save</button>
          </div>
        </div>
        </div>
      </div>

    <div class="modal fade" id="decisionModal" role="dialog" data-focus="false" aria-labelledby="decisionModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="decisionModalLabel">Configure decision elements</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="max-height: 45rem;">
          <div><b style="font-weight:400;position:relative;bottom:8px;">Name of decision element:</b><span
              id="decision_name" contenteditable="true" textarea
              style="display:inline-block;padding:3px;min-width:14em;max-width:14em;overflow:hidden;margin-left:2.2em;"></span>
          </div>
          <br>
          <div><b style="font-weight:400;position:relative;bottom:8px;">Purpose of decision element:</b><span
              id="decision_purpose" contenteditable="true" textarea
              style="display:inline-block;padding:3px;min-width:14em;max-width:14em;overflow:hidden;margin-left:1.3em;"></span>
          </div>
          <br>
          <div class="row">
            <div class="col-2">
              <b style="font-weight:400;">Type of decision element:</b>
            </div>
            <div class="col-3" style="margin-left:-1em;">
              <select class="select2 form-control" id="decision_config" name="sel">
                <option value="" disabled selected>--------</option>
                <option value="Approval">Approval</option>
              </select>
            </div>
          </div>
          <br>
          <div id="carouselExampleIndicators" class="carousel slide" data-interval="false" style="display:none;">
            <div class="card">
              <div class="card-body" style="min-height:20rem;max-height: 30rem;overflow-y: scroll;">

                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <div class='card'>
                      <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Configure
                        Decision Rule</div>
                      <div class='card-body'>
                        <div class="row" style="width: 100%;display: flex;justify-content: flex-end; align-items: center;">
                          <div id="defaultValueConfigDecision" class="custom-control custom-checkbox" style="margin-right:1%;">
                            <input type="checkbox" name="defaultValueConfigDecision" id="selectAllDecison" class="checkboxinput custom-control-input" value="0">
                            <label for="selectAllDecison" class="custom-control-label">
                              Always send for approval
                            </label>
                          </div>
                          <div id="addrow">
                            <i class="fa fa-plus" aria-hidden="true"
                              style="color:var(--primary-color);float:right;font-size:large;"></i>
                          </div>
                        </div>
                        <div>
                          <table class="table" id="config_table">
                            <thead style="text-align:center">
                              <tr>
                                <th>Sr.no</th>
                                <th>Condition Name</th>
                                <th>Configure Rule</th>
                              </tr>
                            </thead>
                            <tbody style="text-align:center" id="configuration_row">
                              <tr>
                                <td>1</td>
                                <td><span contenteditable="true" textarea
                                    style="display: inline-block;min-width: 10em;max-width:10em;overflow:hidden"></span>
                                </td>
                                <td><button type="button" class="btn btn-xs btn-primary configure_button"
                                    href="#carouselExampleIndicators" data-slide="next">Configure</button></td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="carousel-item">
                    <div class='card'>
                      <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Condition
                        set:</div>
                      <div class='card-body'>
                        <div>Condition Name:<b id="condition_name_append"></b></div>
                        <br>
                        <br>
                        <div class="row">
                          <div class="col-5">
                            <select id="select_conditionTable" class="select2 form-control" name="table">
                              <option value="" disabled selected>Table name</option>
                              {% for i in tableList%}
                              <option value="{{i}}">{{i}}</option>
                              {%endfor%}
                            </select>
                          </div>
                        </div>

                        <div style="margin-top:2em;">
                          <div class="btn-group">
                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                              {{_("Add Condition")}}
                              <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" id="condition_dropdown_decision" style="height: 32vh;">
                            </ul>
                          </div>
                          <div class="row" id="items">
                            <table id="decisionBoxTable" class="table filter-table">
                            </table>
                          </div>
                        </div>

                        <button type="button" style="float:right" id="save_and_finalize"
                          class="btn btn-xs btn-primary" href="#carouselExampleIndicators" data-slide="next">Save and
                          finalize</button>
                        <button type="button" style="float:right" id="save_and_add_condition"
                          class="btn btn-xs btn-primary mr-1" href="#carouselExampleIndicators" data-slide="prev">Save
                          and add condition</button>
                      </div>
                    </div>
                  </div>
                  <div class="carousel-item">
                    <div class='card collapsed-card'>
                      <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold; display:flex;">
                        <span>Configure Approval Settings</span>
                        <div class="card-tools" style="float:right;margin-left:auto;">
                          <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i></button>
                        </div>
                      </div>
                      <div class='card-body'>
                        <div style="margin-top:2em;">
                          <div class="row" style="margin-top: 5px;">
                            <div class="col-6">
                              <b>Configure Action:</b>
                              <div class="mt-1">
                                <select class="select2 form-control" id="config_button" name="sel">
                                  <option val="approval">Set Approval</option>
                                  <option val="alert" disabled>Set Alert</option>
                                  <option val="email">Set Approval and Email</option>
                                </select>
                              </div>
                              <br>
                              <b>Select SMTP Configuration:</b>
                              <div class="mt-1">
                                <select class="select2 form-control" id="config_smtp_button" name="sel_smtp">
                                  <option value="default" selected>Default</option>
                                  {% for iden in smtp_iden %}
                                    <option value="{{iden}}">{{iden}}</option>
                                  {% endfor %}
                                </select>
                              </div>
                              <br>
                              <div class="row" id="email_list" style="display:none;">
                                <!-- To -->
                                <div class="card collapsed-card">
                                  <div class="card-header" style="color:var(--primary-color); font-weight: bold;">
                                    <span>To:</span>
                                    <div class="card-tools" style="float:right;margin-left:auto;">
                                      <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i></button>
                                    </div>
                                  </div>
                                  <div class="card-body">
                                    <div class="form-group col-12">
                                      <label>Approval - Recipient Type:</label>
                                      <select class="form-control select2" id="approval_mailer_type">
                                        <option value='static'>Static Email IDs</option>
                                        <option value='dynamic_approver'>Dynamic - Approver(s) Of the Entry</option>
                                        <option value='dynamic_user'>Dynamic - User Who Created/ Modified the Entry</option>
                                      </select>
                                    </div>
                                    <div class="form-group col-12" id="approval_email_container">
                                      <label>Approval - Email Notification List:</label>
                                      <select class="form-control select2email" id="approval_email_list" multiple></select>
                                    </div>
                                    <br>
                                    <div class="form-group col-12">
                                      <label>Approval Decision - Recipient Type:</label>
                                      <select class="form-control select2" id="approval_decision_mailer_type">
                                        <option value='static'>Static Email IDs</option>
                                        <option value='dynamic_approver'>Dynamic - Approver(s) Of the Entry</option>
                                        <option value='dynamic_user'>Dynamic - User Who Created/ Modified the Entry</option>
                                      </select>
                                    </div>
                                    <div class="form-group col-12" id="approval_email_decision_container">
                                      <label>Approval Decision - Email Notification List:</label>
                                      <select class="form-control select2email" id="approval_email_decision" multiple></select>
                                    </div>
                                  </div>
                                </div>
                                <!-- CC -->
                                <div class="card collapsed-card">
                                  <div class="card-header" style="color:var(--primary-color); font-weight: bold;">
                                    <span>CC:</span>
                                    <div class="card-tools" style="float:right;margin-left:auto;">
                                      <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i></button>
                                    </div>
                                  </div>
                                  <div class="card-body">
                                    <div class="form-group col-12">
                                      <label>Approval - Recipient Type:</label>
                                      <select class="form-control select2" id="approval_mailer_typeCC">
                                        <option value='static'>Static Email IDs</option>
                                        <option value='dynamic_approver'>Dynamic - Approver(s) Of the Entry</option>
                                        <option value='dynamic_user'>Dynamic - User Who Created/ Modified the Entry</option>
                                      </select>
                                    </div>
                                    <div class="form-group col-12" id="approval_email_containerCC">
                                      <label>Approval - Email Notification List:</label>
                                      <select class="form-control select2email" id="approval_email_listCC" multiple></select>
                                    </div>
                                    <br>
                                    <div class="form-group col-12">
                                      <label>Approval Decision - Recipient Type:</label>
                                      <select class="form-control select2" id="approval_decision_mailer_typeCC">
                                        <option value='static'>Static Email IDs</option>
                                        <option value='dynamic_approver'>Dynamic - Approver(s) Of the Entry</option>
                                        <option value='dynamic_user'>Dynamic - User Who Created/ Modified the Entry</option>
                                      </select>
                                    </div>
                                    <div class="form-group col-12" id="approval_email_decision_containerCC">
                                      <label>Approval Decision - Email Notification List:</label>
                                      <select class="form-control select2email" id="approval_email_decisionCC" multiple></select>
                                    </div>
                                  </div>
                                </div>
                                <!-- BCC -->
                                <div class="card collapsed-card">
                                  <div class="card-header" style="color:var(--primary-color); font-weight: bold;">
                                    <span>BCC:</span>
                                    <div class="card-tools" style="float:right;margin-left:auto;">
                                      <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i></button>
                                    </div>
                                  </div>
                                  <div class="card-body">
                                    <div class="form-group col-12">
                                      <label>Approval - Recipient Type:</label>
                                      <select class="form-control select2" id="approval_mailer_typeBCC">
                                        <option value='static'>Static Email IDs</option>
                                        <option value='dynamic_approver'>Dynamic - Approver(s) Of the Entry</option>
                                        <option value='dynamic_user'>Dynamic - User Who Created/ Modified the Entry</option>
                                      </select>
                                    </div>
                                    <div class="form-group col-12" id="approval_email_containerBCC">
                                      <label>Approval - Email Notification List:</label>
                                      <select class="form-control select2email" id="approval_email_listBCC" multiple></select>
                                    </div>
                                    <br>
                                    <div class="form-group col-12">
                                      <label>Approval Decision - Recipient Type:</label>
                                      <select class="form-control select2" id="approval_decision_mailer_typeBCC">
                                        <option value='static'>Static Email IDs</option>
                                        <option value='dynamic_approver'>Dynamic - Approver(s) Of the Entry</option>
                                        <option value='dynamic_user'>Dynamic - User Who Created/ Modified the Entry</option>
                                      </select>
                                    </div>
                                    <div class="form-group col-12" id="approval_email_decision_containerBCC">
                                      <label>Approval Decision - Email Notification List:</label>
                                      <select class="form-control select2email" id="approval_email_decisionBCC" multiple></select>
                                    </div>
                                  </div>
                                </div>

                                <div class="custom-control custom-checkbox col-12" style="margin:1.5%">
                                  <input type="checkbox" name="approvalInMailApprovalOption" class="checkboxinput custom-control-input" id="approvalInMailApprovalOption">
                                  <label for="approvalInMailApprovalOption" class="custom-control-label">
                                    Allow In-Mail Approval/ Rejection?
                                  </label>
                                </div>

                                <div class="custom-control custom-checkbox col-12" style="margin:1.5%">
                                  <input type="checkbox" name="mailForApproverAdded" class="checkboxinput custom-control-input" id="mailForApproverAdded" onclick="toggleswal()">
                                  <label for="mailForApproverAdded" class="custom-control-label">
                                    Send Mail to new Approver added?
                                  </label>
                                  <ul>
                                    <li style="list-style-type: none;margin-left: -2.5rem;padding-top: 1rem; display:none;" id="notify_existing_li">
                                      <div class="custom-control custom-checkbox">
                                        <input type="checkbox" name="notify_existing" class="checkboxinput custom-control-input" id="notify_existing">
                                        <label for="notify_existing" class="custom-control-label">
                                          Notify existing approvers when new approvers are added
                                        </label>
                                      </div>
                                    </li>
                                  </ul>
                                </div>
                                <script>
                                  function toggleswal(){
                                    if($('#mailForApproverAdded').is(':checked')){
                                        Swal.fire({
                                          icon : 'question',
                                          text:`Do you want to notify the existing approvers when new approvers are added?`,
                                          showDenyButton: true,
                                          confirmButtonText: 'Yes',
                                          denyButtonText: `No`,
                                        }).then((result) => {
                                          if (result.isConfirmed) {
                                            $('#notify_existing_li').css('display', 'block')
                                            $('#notify_existing').prop('checked', true);
                                          }
                                          else if(result.isDenied){
                                            $('#notify_existing').prop('checked', false);
                                          }
                                        })
                                      }
                                  }
                                </script>

                                <div class="custom-control custom-checkbox col-12" style="margin:1.5%">
                                  <input type="checkbox" name="approvalSkipLevelOption" class="checkboxinput custom-control-input" id="approvalSkipLevelOption">
                                  <label for="approvalSkipLevelOption" class="custom-control-label">
                                    Skip approval level if creator is the approver?
                                  </label>
                                </div>

                                <div class="custom-control custom-checkbox col-12" style="margin:1.5%">
                                  <input type="checkbox" name="approvalSendAttachmentWithDecisionMail" class="checkboxinput custom-control-input" id="approvalSendAttachmentWithDecisionMail">
                                  <label for="approvalSendAttachmentWithDecisionMail" class="custom-control-label">
                                    Send configured attachments with Approval Decision Emails?
                                  </label>
                                </div>

                                <div class="form-group col-12">
                                  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#approval_notification_dialog">Compose Approval Notification Message</button>
                                  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#approval_decision_dialog">Compose Approval Decision Message</button>
                                  <button type="button" class = "btn btn-primary" data-toggle="modal" data-target="#approval_notification_dialog_send_back" style="margin:2px">Compose Notification for Sending Back to Previous Approver</button>
                                  <button type="button" class = "btn btn-primary" data-toggle="modal" data-target="#approval_notification_dialog_delegate" style="margin:2px">Compose Notification message for Approval Delegation</button>
                                  <button type="button" class = "btn btn-primary" data-toggle="modal" data-target="#approval_notification_dialog_mention" style="margin:2px">Compose Notification message for Mentions</button>
                                </div>
                              </div>
                            </div>
                            <div class="col-6">
                              <div class="row">
                                <div class="col-12 form-group">
                                <label for="allowUsersToSetApprovers">Control Level for Approval Assignment by The User:</label>
                                <select name="allowUsersToSetApprovers" id="allowUsersToSetApprovers" class="select2 form-control">
                                    <option value='disallow' selected>Dis-Allow Selection of Approval Parameters</option>
                                    <option value='allow_group'>Allow Selection of Approval Parameters and Approver Group(s)</option>
                                    <option value='allow_user'>Allow Selection of Approval Parameters and Approver User(s)</option>
                                  </select>
                                </div>
                                <div class="col-12 form-group" id="maximum_approvers_div" style="display: none;">
                                  <label for="maximum_approvers">Set Maximum Count on Approvers Added by User:</label>
                                  <input type="number" name="maximum_approvers" id="maximum_approvers" class="form-control numberinput" min="1" oninput="validity.valid||(value='1');">
                                </div>
                                <div class="col-12 form-group" id="maximum_levels_div" style="display: none;">
                                  <label for="maximum_levels">Set Maximum Count on Approver Levels that can be Added by User:</label>
                                  <input type="number" name="maximum_levels" id="maximum_levels" class="form-control numberinput" min="1" oninput="validity.valid||(value='1');">
                                </div>
                                <div class="col-12 form-group">
                                  <label for="allowUsersToSetApproversDispFields">User Display Fields:</label>
                                  <select name="allowUsersToSetApproversDispFields" id="allowUsersToSetApproversDispFields" class="select2 form-control" multiple>
                                    {% for k,v in user_column_list.items %}
                                      <option value='{{k}}'>{{v}}</option>
                                    {% endfor %}
                                    </select>
                                </div>
                                <div class="col-12 form-group">
                                  <label for="allowUsersToSetApproversDispFormat">User Display Fields Format:</label>
                                  <select name="allowUsersToSetApproversDispFormat" id="allowUsersToSetApproversDispFormat" class="select2 form-control">
                                    <option value="" selected disabled>Select One</option>
                                    <option value="comma_sep">Comma Separated</option>
                                    <option value="space_sep">Space Separated</option>
                                    </select>
                                </div>
                                <div class="col-12 form-group">
                                  <label for="selectApproverType">Select Approver Type:</label>
                                  <select class="select2 form-control" id="selectApproverType">
                                    <option value='several' selected>Several Approvers</option>
                                    <option value='joint'>Joint Approvers</option>
                                  </select>
                                </div>
                                <div class="col-12 form-group">
                                  <label for="selectApprovalType">Select Approval Type:</label>
                                  <select class="select2 form-control" id="selectApprovalType">
                                    <option value='static'>Static Group Based</option>
                                    <option value='static_user'>Static User Based</option>
                                    <option value='dynamic_group'>Dynamic Group Based</option>
                                    <option value='dynamic_user'>Dynamic User Based</option>
                                    <option value='dynamic_master_group'>Dynamic Group Master Based</option>
                                    <option value='dynamic_master_user'>Dynamic User Master Based</option>
                                    <option value='hierarchical'>Hierarchical Group Based</option>
                                    <option value='hierarchical_user'>Hierarchical User Based</option>
                                    <option value='multi_level'>Multi-Level Approval</option>
                                  </select>
                                </div>

                                <!-- Static Group Based -->
                                <div class="col-12 form-group" id="staticGroupBasedContainer">
                                  <label for="select2multiple">Select Approver Group:</label>
                                  <select class="select2 form-control js-example-basic-multiple" id="select2multiple"
                                    style="min-height:29px;max-height:29px;height:29px;" multiple="multiple">
                                    {% for i in groupList%}
                                    <option value='{{i}}'>{{i}}</option>
                                    {% endfor %}
                                  </select>
                                </div>

                                <!-- Static User Based -->
                                <div class="col-12 form-group" id="staticUserBasedContainer" style="display: none;">
                                  <label for="selectApproverUsers">Select Approvers:</label>
                                  <select class="select2 form-control js-example-basic-multiple" id="selectApproverUsers"
                                    style="min-height:29px;max-height:29px;height:29px;" multiple="multiple">
                                  </select>
                                </div>

                                <!-- Dynamic Group Based -->
                                <div class="col-12 form-group" id="dynamicGroupBasedContainer" style="display: none;">
                                  <div class="row">
                                    <div class="col-12">
                                      <label for="selectApproverGroupTable">Select Table:</label>
                                      <select class="select2 form-control js-example-basic-multiple" id="selectApproverGroupTable"
                                        style="min-height:29px;max-height:29px;height:29px;">
                                        {% for i in tableList%}
                                          <option value="{{i}}">{{i}}</option>
                                        {%endfor%}
                                      </select>
                                    </div>
                                    <div class="col-12">
                                      <label for="selectApproverGroupField">Select Field to Identify Approver Group:</label>
                                      <select class="select2 form-control js-example-basic-multiple" id="selectApproverGroupField"
                                        style="min-height:29px;max-height:29px;height:29px;">
                                      </select>
                                    </div>
                                  </div>
                                </div>

                                <!-- Dynamic User Based -->
                                <div class="col-12 form-group" id="dynamicUserBasedContainer" style="display: none;">
                                  <div class="row">
                                    <div class="col-12">
                                      <label for="selectApproverUserTable">Select Table:</label>
                                      <select class="select2 form-control js-example-basic-multiple" id="selectApproverUserTable"
                                        style="min-height:29px;max-height:29px;height:29px;">
                                        {% for i in tableList%}
                                          <option value="{{i}}">{{i}}</option>
                                        {%endfor%}
                                      </select>
                                    </div>
                                    <div class="col-12">
                                      <label for="selectApproverUserField">Select Field to Identify Approver Group:</label>
                                      <select class="select2 form-control js-example-basic-multiple" id="selectApproverUserField"
                                        style="min-height:29px;max-height:29px;height:29px;">
                                      </select>
                                    </div>
                                  </div>
                                </div>


                                <!-- Dynamic Group Based -->
                                <div class="col-12 form-group" id="dynamicGroupMasterBasedContainer" style="display: none;">
                                  <div class="row">
                                    <div class="col-12">
                                      <label for="selectApproverGroupEntryParameter">Select Entry Parameter:</label>
                                      <select class="select2 form-control js-example-basic-multiple" id="selectApproverGroupEntryParameter"
                                        style="min-height:29px;max-height:29px;height:29px;">
                                        <option value='user_username' selected>Username of User Creating Entry</option><
                                        <option value='user_email'>Email Id of User Creating Entry</option><
                                        <option value='extract_from_entry'>Extract Parameter From Field in Entry</option><
                                      </select>
                                    </div>
                                    <div id="dynamicParameterFromEntryContainer" class='col-12' style='display:none'>
                                      <div class="col-12">
                                        <label for="selectTableForParameter">Select Table:</label>
                                        <select class="select2 form-control" id="selectTableForParameter">
                                          {% for i in tableList%}
                                            <option value="{{i}}">{{i}}</option>
                                          {%endfor%}
                                        </select>
                                      </div>
                                      <div class="col-12">
                                        <label for="selectFieldForParameter">Select Field to Extract Parameter:</label>
                                        <select class="select2 form-control" id="selectFieldForParameter">
                                        </select>
                                      </div>
                                    </div>
                                    <div class="col-12">
                                      <br>
                                      <button type="button" id="dynamicMasterBasedApprovalAddButton" class="btn btn-primary">Add Level</button>
                                      <br>
                                    </div>
                                    <div id="masterLevelContainer" class="col-12">
                                      <div class="masterBasedApprovalLevel col-12" style="border-bottom:lightgray solid 1px;border-top:lightgray solid 1px; padding-bottom: 0.5rem; padding-top: 0.5rem;">
                                        <div class="col-12">
                                          <label>Select Table For Parameter Mapping:</label>
                                          <select class="select2 form-control paramterMappingTable">
                                            {% for i in tableList%}
                                              <option value="{{i}}">{{i}}</option>
                                            {%endfor%}
                                          </select>
                                        </div>
                                        <div class="col-12">
                                          <label for="paramterMappingField">Select Field For Parameter Mapping:</label>
                                          <select class="select2 form-control paramterMappingField">
                                          </select>
                                        </div>
                                        <div class="col-12">
                                          <label for="">Select Field For Identifying Approver:</label>
                                          <select class="select2 form-control paramterMappingApproverField">
                                          </select>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>

                                <!-- Dynamic Hierarchical Based -->
                                <div class="col-12" id="hierarchyGroupBasedContainer" style="display: none;">
                                  <div class="row">
                                    <div class="col-12 form-group">
                                      <label for="selectApprovalHierarchyGroup">Select Hierarchy Group:</label>
                                      <select class="select2 form-control" id="selectApprovalHierarchyGroup">
                                      </select>
                                    </div>
                                    <div class="col-12 form-group">
                                      <label for="selectApprovalHierarchyStartingLevel">Select Starting Level:</label>
                                      <select class="select2 form-control" id="selectApprovalHierarchyStartingLevel">
                                      </select>
                                    </div>
                                    <div class="col-12 form-group">
                                      <label for="selectApprovalHierarchyEndingingLevel">Select Ending Level:</label>
                                      <select class="select2 form-control" id="selectApprovalHierarchyEndingingLevel">
                                      </select>
                                    </div>
                                  </div>
                                </div>

                                <div class="col-12">
                                  <button type="button" id="multiLevelApprovalButton" class="btn btn-primary" style="display:none;">Configure Multi-Level Approval</button>
                                </div>

                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card collapsed-card">
                      <div class="card-header" style="font-size: medium; color:var(--primary-color); font-weight: bold; display:flex;">
                        <span>Configure Actions for Approver</span>
                        <div class="card-tools" style="float:right;margin-left:auto;">
                          <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i></button>
                        </div>
                      </div>
                      <div class="card-body">
                        <div class="row modifyColumn" style="display:flex">
                          <div class="col-12">
                            <h5>Configure Fields Approver Can Update</h5>
                          </div>
                          <hr>
                          <div class="col-6 form-group">
                            <label for="modifyColumnTable">Select Tables:</label>
                            <select class="form-control select2" id="modifyColumnTable" onchange="populateModifyColumn.call(this)" multiple>
                              {% for i in tableList%}
                              <option value="{{i}}">{{i}}</option>
                              {%endfor%}
                            </select>
                          </div>
                          <div class="col-6 form-group">
                            <label for="modifyColumn_">Select Fields:</label>
                            <select class="form-control select2" id="modifyColumn_" multiple>
                            </select>
                          </div>
                        </div>
                        <hr>
                        <div class="row">
                          <div class="col-12">
                            <h5>Configure Approval Decision Delegation Settings</h5>
                          </div>
                          <div class="form-group col-6">
                            <label for="allowApprovalAssignment">Select Control:</label>
                            <select class="form-control select2" id="allowApprovalAssignment">
                              <option value="disallow" selected>Dis-allow Delegation of Approval Decision</option>
                              <option value="allow">Allow Delegation of Approval Decision</option>
                            </select>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <span class="carousel-control-prev-icon carousel-control-prev" href="#carouselExampleIndicators"
                  role="button" data-slide="prev" aria-hidden="true" style="background-color:black;"></span>
                <span class="sr-only">Previous</span>

                <span class="carousel-control-next-icon carousel-control-next" href="#carouselExampleIndicators"
                  role="button" data-slide="next" aria-hidden="true" style="background-color:black;"></span>
                <span class="sr-only">Next</span>

              </div>
            </div>
          </div>

          <br>
          <div id='decisiontable'></div>
          <div id='decisiontablefield'></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="savedecbox">Save changes</button>
        </div>

      </div>
    </div>
  </div>
  <!-- Table Header Modal -->
<div class="modal" id="tableHeaderModal"  role="dialog" data-focus="false" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document" style="width:100%">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLabel">Table Header Configuration</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="$('#dataTableModal').modal('show')">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">
        <span id="addHeaderBtn" class="Add btn btn-primary" onclick="addHeader.call(this)" style="cursor: pointer;">Add+</span>
<div class="all-fields">
  <style>.table-header-fields span:nth-child(even){display:none
  }
  .cancel:hover{
    color:red
  }
  </style>
  <div class="table-header-fields" style="position:relative">


    <input style="width:80%;margin:10px 0px" class="form-control select-header" type="text"  placeholder="Add Header" />
    <select style="width:80%;margin:10px 0px"  class="form-control select-subheader select2"  multiple>

    </select>

    <p class="cancel" style="position:absolute;left: 85%;bottom: 20%;cursor:pointer; font-size: 1rem;" title="Remove Column Grouping" ><i class="fa fa-times-circle" aria-hidden="true"></i>
    </p>
  </div>

</div>

      </div>
      <div class="modal-footer">

        <button type="button" id="saveHeaderSubheader" class="btn btn-primary" onclick="saveHeaderSubheader()">Save changes</button>
      </div>
    </div>
  </div>
</div>

  <!-- Table Header Modal end-->
  <div class="modal fade" id="viewDetailsColumnAlignmentModal" role="dialog" data-focus="false" aria-labelledby="viewDetailsColumnAlignmentModal"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Embedded Table Column Alignment</h5>
        </div>
        <div class="modal-body" style="overflow-y: scroll ;max-height: 34rem;">
          <div class="accordion" id="accordionColumnAlignment">
            <div class="card">
              <div class="card-header" id="headingColumnAlignmentOne">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseColumnAlignmentOne" aria-expanded="true" aria-controls="collapseColumnAlignmentOne">
                    Transaction Data View
                  </button>
                </h2>
              </div>

              <div id="collapseColumnAlignmentOne" class="collapse show" aria-labelledby="headingColumnAlignmentOne" data-parent="#accordionColumnAlignment">
                <div class="card-body">
                  <div class="row">
                    <div class="col-6">
                      <label>Global Header Alignment:</label>
                      <select class="select2 form-control" id="selectGlobalHeaderTDColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-6">
                      <label>Global Content Alignment:</label>
                      <select class="select2 form-control" id="selectGlobalContentTDColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                  <hr>
                  <br>
                  <div class="row">
                    <div class="col-4"><strong>Field</strong></div>
                    <div class="col-4"><strong>Header Alignment</strong></div>
                    <div class="col-4"><strong>Content Alignment</strong></div>
                  </div>
                  <br>
                  <div class="row" id="tDataColumnAlignmentContainer">
                    <div class="row col-12">
                      <div class="col-4"><strong>Column</strong></div>
                      <div class="col-4">
                        <select class="select2 form-control header">
                          <option value="">Select Alignment</option>
                          <option value="left">Left</option>
                          <option value="center">Center</option>
                          <option value="right">Right</option>
                        </select>
                      </div>
                      <div class="col-4">
                        <select class="select2 form-control content">
                          <option value="">Select Alignment</option>
                          <option value="left">Left</option>
                          <option value="center">Center</option>
                          <option value="right">Right</option>
                        </select>
                      </div>
                    </div>
                    <div class="row col-12">
                      <div class="col-4"><strong>Value</strong></div>
                      <div class="col-4">
                        <select class="select2 form-control header">
                          <option value="">Select Alignment</option>
                          <option value="left">Left</option>
                          <option value="center">Center</option>
                          <option value="right">Right</option>
                        </select>
                      </div>
                      <div class="col-4">
                        <select class="select2 form-control content">
                          <option value="">Select Alignment</option>
                          <option value="left">Left</option>
                          <option value="center">Center</option>
                          <option value="right">Right</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header" id="headingColumnAlignmentTwo">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseColumnAlignmentTwo" aria-expanded="false" aria-controls="collapseColumnAlignmentTwo">
                    Audit Trail
                  </button>
                </h2>
              </div>
              <div id="collapseColumnAlignmentTwo" class="collapse" aria-labelledby="headingColumnAlignmentTwo" data-parent="#accordionColumnAlignment">
                <div class="card-body">
                  <div class="row">
                    <div class="col-6">
                      <label>Global Header Alignment:</label>
                      <select class="select2 form-control" id="selectAuditTGlobalHeaderColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-6">
                      <label>Global Content Alignment:</label>
                      <select class="select2 form-control" id="selectAuditTGlobalContentColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                  <hr>
                  <br>
                  <div class="row">
                    <div class="col-4"><strong>Field</strong></div>
                    <div class="col-4"><strong>Header Alignment</strong></div>
                    <div class="col-4"><strong>Content Alignment</strong></div>
                  </div>
                  <br>
                  <div class="row auditTrailFieldLevelContainer">
                    <div class="col-4"><strong>Level</strong></div>
                    <div class="col-4">
                      <select class="select2 form-control header">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-4">
                      <select class="select2 form-control content">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                  <div class="row auditTrailFieldLevelContainer">
                    <div class="col-4"><strong>Action</strong></div>
                    <div class="col-4">
                      <select class="select2 form-control header">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-4">
                      <select class="select2 form-control content">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                  <div class="row auditTrailFieldLevelContainer">
                    <div class="col-4"><strong>User</strong></div>
                    <div class="col-4">
                      <select class="select2 form-control header">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-4">
                      <select class="select2 form-control content">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                  <div class="row auditTrailFieldLevelContainer">
                    <div class="col-4"><strong>Time</strong></div>
                    <div class="col-4">
                      <select class="select2 form-control header">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-4">
                      <select class="select2 form-control content">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                  <div class="row auditTrailFieldLevelContainer">
                    <div class="col-4"><strong>Value</strong></div>
                    <div class="col-4">
                      <select class="select2 form-control header">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-4">
                      <select class="select2 form-control content">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header" id="headingColumnAlignmentThree">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseColumnAlignmentThree" aria-expanded="false" aria-controls="collapseColumnAlignmentThree">
                    Approval Level Config
                  </button>
                </h2>
              </div>
              <div id="collapseColumnAlignmentThree" class="collapse" aria-labelledby="headingColumnAlignmentThree" data-parent="#accordionColumnAlignment">
                <div class="card-body">
                  <div class="row">
                    <div class="col-6">
                      <label>Global Header Alignment:</label>
                      <select class="select2 form-control" id="selectLevelConfigGlobalHeaderColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-6">
                      <label>Global Content Alignment:</label>
                      <select class="select2 form-control" id="selectLevelConfigGlobalContentColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                  <hr>
                  <br>
                  <div class="row">
                    <div class="col-4"><strong>Field</strong></div>
                    <div class="col-4"><strong>Header Alignment</strong></div>
                    <div class="col-4"><strong>Content Alignment</strong></div>
                  </div>
                  <br>
                  <div class="row levelConfigFieldLevelContainer">
                    <div class="col-4"><strong>Approval Type</strong></div>
                    <div class="col-4">
                      <select class="select2 form-control header">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-4">
                      <select class="select2 form-control content">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                  <div class="row levelConfigFieldLevelContainer">
                    <div class="col-4"><strong>Approver Type</strong></div>
                    <div class="col-4">
                      <select class="select2 form-control header">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-4">
                      <select class="select2 form-control content">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                  <div class="row levelConfigFieldLevelContainer">
                    <div class="col-4"><strong>Approver</strong></div>
                    <div class="col-4">
                      <select class="select2 form-control header">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-4">
                      <select class="select2 form-control content">
                        <option value="">Select Alignment</option>
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header" id="headingColumnAlignmentFour">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseColumnAlignmentFour" aria-expanded="false" aria-controls="collapseColumnAlignmentFour">
                    Approver User/ Group
                  </button>
                </h2>
              </div>
              <div id="collapseColumnAlignmentFour" class="collapse" aria-labelledby="headingColumnAlignmentFour" data-parent="#accordionColumnAlignment">
                <div class="card-body">
                  <div class="row">
                    <div class="col-6">
                      <label>Global Header Alignment:</label>
                      <select class="select2 form-control" id="selectApproversGlobalHeaderColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-6">
                      <label>Global Content Alignment:</label>
                      <select class="select2 form-control" id="selectApproversGlobalContentColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header" id="headingColumnAlignmentFive">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseColumnAlignmentFive" aria-expanded="false" aria-controls="collapseColumnAlignmentFive">
                    Approval Decision Email List
                  </button>
                </h2>
              </div>
              <div id="collapseColumnAlignmentFive" class="collapse" aria-labelledby="headingColumnAlignmentFive" data-parent="#accordionColumnAlignment">
                <div class="card-body">
                  <div class="row">
                    <div class="col-6">
                      <label>Global Header Alignment:</label>
                      <select class="select2 form-control" id="selectApprovalEmailGlobalHeaderColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-6">
                      <label>Global Content Alignment:</label>
                      <select class="select2 form-control" id="selectApprovalEmailGlobalContentColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header" id="headingColumnAlignmentSix">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseColumnAlignmentSix" aria-expanded="false" aria-controls="collapseColumnAlignmentSix">
                    Approved By
                  </button>
                </h2>
              </div>
              <div id="collapseColumnAlignmentSix" class="collapse" aria-labelledby="headingColumnAlignmentSix" data-parent="#accordionColumnAlignment">
                <div class="card-body">
                  <div class="row">
                    <div class="col-6">
                      <label>Global Header Alignment:</label>
                      <select class="select2 form-control" id="selectApprovedByGlobalHeaderColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-6">
                      <label>Global Content Alignment:</label>
                      <select class="select2 form-control" id="selectApprovedByGlobalContentColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header" id="headingColumnAlignmentSeven">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseColumnAlignmentSeven" aria-expanded="false" aria-controls="collapseColumnAlignmentSeven">
                    Approval Comments
                  </button>
                </h2>
              </div>
              <div id="collapseColumnAlignmentSeven" class="collapse" aria-labelledby="headingColumnAlignmentSeven" data-parent="#accordionColumnAlignment">
                <div class="card-body">
                  <div class="row">
                    <div class="col-6">
                      <label>Global Header Alignment:</label>
                      <select class="select2 form-control" id="selectApprovalCommentsGlobalHeaderColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-6">
                      <label>Global Content Alignment:</label>
                      <select class="select2 form-control" id="selectApprovalCommentsGlobalContentColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="accordion" id="accordionColumnAlignmentViewDetail">
            <div class="card">
              <div class="card-header" id="headingColumnAlignmentVDOne">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseColumnAlignmentVDOne" aria-expanded="true" aria-controls="collapseColumnAlignmentVDOne">
                    View Details Config
                  </button>
                </h2>
              </div>

              <div id="collapseColumnAlignmentVDOne" class="collapse show" aria-labelledby="headingColumnAlignmentVDOne" data-parent="#accordionColumnAlignment">
                <div class="card-body">
                  <div class="row">
                    <div class="col-6">
                      <label>Select Column:</label>
                      <select class="select2 form-control" id="selectColumnForVDColAlignment">
                        <option value="">Select Column</option>
                      </select>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-6">
                      <label>Global Header Alignment:</label>
                      <select class="select2 form-control" id="selectGlobalHeaderVDColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                    <div class="col-6">
                      <label>Global Content Alignment:</label>
                      <select class="select2 form-control" id="selectGlobalContentVDColumnAlignment">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                      </select>
                    </div>
                  </div>
                  <hr>
                  <br>
                  <div class="row">
                    <div class="col-6">
                      <label>Master Table:</label>
                      <select class="select2 form-control" id="selectTableVDColumnAlignment">
                        <option value="" disabled selected>Select Table</option>
                        {% for i in tableList %}
                        <option value="{{i}}">{{i}}</option>
                        {% endfor %}
                      </select>
                    </div>
                    <div class="col-6">
                      <label>Select Column:</label>
                      <select class="select2 form-control" id="selectColumnVDColumnAlignment">
                        <option value="">Select Column</option>
                      </select>
                    </div>
                  </div>
                  <hr>
                  <br>
                  <div class="row">
                    <div class="col-4"><strong>Field</strong></div>
                    <div class="col-4"><strong>Header Alignment</strong></div>
                    <div class="col-4"><strong>Content Alignment</strong></div>
                  </div>
                  <br>
                  <div class="row" id="vDataColumnAlignmentContainer">

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="saveApprovalTColumnAlignmentButton">Save</button>
        </div>
      </div>
    </div>
  </div>


   <!-- Table Header Modal end-->
   <div class="modal fade" id="createViewColumnAlignmentModal" role="dialog" data-focus="false" aria-labelledby="createViewColumnAlignmentModal"
   aria-hidden="true">
   <div class="modal-dialog modal-lg" role="document">
     <div class="modal-content">
       <div class="modal-header">
         <h5 class="modal-title">Embedded Table Column Alignment</h5>
       </div>
       <div class="modal-body" style="overflow-y: scroll ;max-height: 34rem;">
         <div class="accordion" id="accordionColumnAlignmentCreateView">
           <div class="card">
             <div class="card-header" id="headingColumnAlignmentCVOne">
               <h2 class="mb-0">
                 <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseColumnAlignmentCVOne" aria-expanded="true" aria-controls="collapseColumnAlignmentCVOne">
                   View History Config
                 </button>
               </h2>
             </div>
             <div id="collapseColumnAlignmentCVOne" class="collapse show" aria-labelledby="headingColumnAlignmentCVOne" data-parent="#accordionColumnAlignmentCreateView">
               <div class="card-body">
                 <div class="row">
                   <div class="col-6">
                     <label>Global Header Alignment:</label>
                     <select class="select2 form-control" id="selectGlobalHeaderVHCVColumnAlignment">
                       <option value="left">Left</option>
                       <option value="center" selected>Center</option>
                       <option value="right">Right</option>
                     </select>
                   </div>
                   <div class="col-6">
                     <label>Global Content Alignment:</label>
                     <select class="select2 form-control" id="selectGlobalContentVHCVColumnAlignment">
                       <option value="left">Left</option>
                       <option value="center" selected>Center</option>
                       <option value="right">Right</option>
                     </select>
                   </div>
                 </div>
                 <hr>
                 <br>
                 <div class="row">
                   <div class="col-6">
                     <label>Select Column:</label>
                     <select class="select2 form-control" id="selectColumnVHCVColumnAlignment">
                       <option value="">Select Column</option>
                     </select>
                   </div>
                 </div>
                 <hr>
                 <br>
                 <div class="row">
                   <div class="col-4"><strong>Field</strong></div>
                   <div class="col-4"><strong>Header Alignment</strong></div>
                   <div class="col-4"><strong>Content Alignment</strong></div>
                 </div>
                 <br>
                 <div class="row" id="vHCVColumnAlignmentContainer">

                 </div>
               </div>
             </div>
           </div>

           <div class="card">
            <div class="card-header" id="headingColumnAlignmentCVTwo">
              <h2 class="mb-0">
                <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseColumnAlignmentCVTwo" aria-expanded="true" aria-controls="collapseColumnAlignmentCVTwo">
                  View Rejected Records Config
                </button>
              </h2>
            </div>
            <div id="collapseColumnAlignmentCVTwo" class="collapse" aria-labelledby="headingColumnAlignmentCVTwo" data-parent="#accordionColumnAlignmentCreateView">
              <div class="card-body">
                <div class="row">
                  <div class="col-6">
                    <label>Global Header Alignment:</label>
                    <select class="select2 form-control" id="selectGlobalHeaderVRCVColumnAlignment">
                      <option value="left">Left</option>
                      <option value="center" selected>Center</option>
                      <option value="right">Right</option>
                    </select>
                  </div>
                  <div class="col-6">
                    <label>Global Content Alignment:</label>
                    <select class="select2 form-control" id="selectGlobalContentVRCVColumnAlignment">
                      <option value="left">Left</option>
                      <option value="center" selected>Center</option>
                      <option value="right">Right</option>
                    </select>
                  </div>
                </div>
                <hr>
                <br>
                <div class="row">
                  <div class="col-6">
                    <label>Select Column:</label>
                    <select class="select2 form-control" id="selectColumnVRCVColumnAlignment">
                      <option value="">Select Column</option>
                    </select>
                  </div>
                </div>
                <hr>
                <br>
                <div class="row">
                  <div class="col-4"><strong>Field</strong></div>
                  <div class="col-4"><strong>Header Alignment</strong></div>
                  <div class="col-4"><strong>Content Alignment</strong></div>
                </div>
                <br>
                <div class="row" id="vRCVColumnAlignmentContainer">

                </div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header" id="headingColumnAlignmentCVThree">
              <h2 class="mb-0">
                <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseColumnAlignmentCVThree" aria-expanded="true" aria-controls="collapseColumnAlignmentCVThree">
                  View Draft Entries Config
                </button>
              </h2>
            </div>
            <div id="collapseColumnAlignmentCVThree" class="collapse" aria-labelledby="headingColumnAlignmentCVThree" data-parent="#accordionColumnAlignmentCreateView">
              <div class="card-body">
                <div class="row">
                  <div class="col-6">
                    <label>Global Header Alignment:</label>
                    <select class="select2 form-control" id="selectGlobalHeaderVDCVColumnAlignment">
                      <option value="left">Left</option>
                      <option value="center" selected>Center</option>
                      <option value="right">Right</option>
                    </select>
                  </div>
                  <div class="col-6">
                    <label>Global Content Alignment:</label>
                    <select class="select2 form-control" id="selectGlobalContentVDCVColumnAlignment">
                      <option value="left">Left</option>
                      <option value="center" selected>Center</option>
                      <option value="right">Right</option>
                    </select>
                  </div>
                </div>
                <hr>
                <br>
                <div class="row">
                  <div class="col-6">
                    <label>Select Column:</label>
                    <select class="select2 form-control" id="selectColumnVDCVColumnAlignment">
                      <option value="">Select Column</option>
                    </select>
                  </div>
                </div>
                <hr>
                <br>
                <div class="row">
                  <div class="col-4"><strong>Field</strong></div>
                  <div class="col-4"><strong>Header Alignment</strong></div>
                  <div class="col-4"><strong>Content Alignment</strong></div>
                </div>
                <br>
                <div class="row" id="vDCVColumnAlignmentContainer">

                </div>
              </div>
            </div>
          </div>
         </div>
       </div>
       <div class="modal-footer">
         <button class="btn button-primary" type="button" id="saveCreateViewColumnAlignmentButton">Save</button>
       </div>
     </div>
   </div>
 </div>

 <!-- Table Header Modal end-->
  <div class="modal fade" id="flowController" role="dialog" data-focus="false" aria-labelledby="flowControllerLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="flowControllerLabel">Configure</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="overflow-y: scroll ;max-height: 34rem;">
          <div class="card flowBodyCard" id="augmentation">
            <div class="card-header">
              <p class="card-title">Process flow control configuration</p>
            </div>
            <div class="card-body augmentationBody">
              <div class="row">
                <div class="col-3">
                  <label>Table:</label>
                  <select class="select2 form-control augmentationTable" onchange="augmentationTable.call(this)" name="tableform2" multiple>
                    {% for i in tableList %}
                    <option value="{{i}}">{{i}}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
              <div class="row indAugmentation">
                <div class="col-3">
                  <label>Column:</label>
                  <select class="select2 form-control augmentationColumn" onchange="populateAugmentationValue.call(this)">
                  </select>
                </div>
                <div class="col-3">
                  <label>Condition:</label>
                  <select class="select2 form-control augmentationCond" onchange="changeAugmentationSelectTag.call(this)">
                    <option value="" disabled selected>Select condition</option>
                    <option value="Equal to">Equal to</option>
                    <option value="IN">In</option>
                    <option value="Not Equal to">Not Equal to</option>
                    <option value="NOT IN">Not In</option>
                    <option value="Greater than">Greater than</option>
                    <option value="Smaller than">Smaller than</option>
                    <option value="Starts with">Starts with</option>
                    <option value="Ends with">Ends with</option>
                  </select>
                </div>
                <div class="col-3">
                  <label>Value:</label>
                  <select class="select2 form-control augmentationValue">
                  </select>
                </div>
                <div class="col-2">
                  <label>Move to:</label>
                  <select class="select2 form-control augmentationNextElement">
                  </select>
                </div>
                <div class="col-1">
                  <i class="fas fa-plus" data-toggle="tooltip" title="Add process flow control condition" onclick="addIndAugmentation.call(this)" style="font-size: initial;"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button onclick="saveFlowController.call(this)" class="btn button-primary" style="background:#565a5e; color:white;">Save</button>
        </div>
      </div>
    </div>
  </div>
  <!--Upload Button Modal-->
  <div class="modal" id="uploadButtonModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
    <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document" style="width: 100%;">
      <div class="modal-content">
        <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
          <h5 class="modal-title" style="">Configure Button Styling</h5>
        </div>
        <div class="modal-body">
          <div class="card-header">
            <div class="float-right" style="margin-right: 6px;">
              <button onclick="uploadpopulateContent(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
            </div>
          </div>


        </div>
        <div class="modal-footer">
          <button class="btn btn-primary closeCustomButton" onClick="uploadcloseEditButton(this)" type="button">
            Close
          </button>
          <button class="btn btn-primary saveCustomButton" onClick="uploadSaveEditButton(this)" type="button"  style="margin-left: 0.5rem;">
            Save
          </button>
        </div>
      </div>
    </div>
  </div>
<!---->
<!--compuatation Button Modal-->
<div class="modal" id="computationButtonModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true" >
  <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document" style="width: 100%;">
    <div class="modal-content">
      <div class="modal-header" style='background:#565a5e; color:white; display: flex;justify-content: center;'>
        <h5 class="modal-title" style="">Configure Button Styling</h5>
      </div>
      <div class="modal-body">
        <div class="card-header">
          <div class="float-right" style="margin-right: 6px;">
            <button onclick="computationpopulateContent(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>


      </div>
      <div class="modal-footer">
        <button class="btn btn-primary closeCustomButton" onClick="computationcloseEditButton(this)" type="button">
          Close
        </button>
        <button class="btn btn-primary saveCustomButton" onClick="computationSaveEditButton(this)" type="button"  style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Multi-Level Approal Modal-->
<div class="modal" id="multiLevelApprovalModal" data-focus="false" role="dialog" aria-labelledby="multiLevelApprovalModal" aria-hidden="true" >
  <div class="modal-dialog modal-xl modal-dialog-scrollable" role="document" style="width: 45%;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Configure Multi-Level Approval</h5>
      </div>
      <div class="modal-body">
        <div>
          <button onclick="addApprovalLevel()" class="btn btn-primary" style="float: right;" type="button"><i class="fas fa-plus"></i> Add Approval Level</button>
        </div>
        <br>
        <hr>
        <div class="row" id="approvalLevelContainer" style="width:100%; min-height:15rem; max-height:40rem; overflow-y: auto;">

        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" data-dismiss="modal" type="button">
          Close
        </button>
        <button class="btn btn-primary" type="button" id="saveMultiLevelApprovalButton" style="margin-left: 0.5rem;">
          Save
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="approvalMessageDynamicTableModal" role="dialog" data-focus="false" aria-labelledby="approvalMessageDynamicTableModal" aria-hidden="true">
  <div class="modal-md modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Columns To Display:</h5>
        <button type="button" class="close" aria-label="Close" onclick="closeDynamicNot.call(this)">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="col-12 form-group">
          <label for="selectTableAMDT">Select Table:</label>
          <select id="selectTableAMDT" class="select2 form-control">
            <option value="" selected disabled>Select Table</option>
            {% for i in tableList %}
              <option value="{{i}}">{{i}}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="selectColumnsAMDT">Select Columns:</label>
          <select id="selectColumnsAMDT" class="select2 form-control" multiple>

          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveApprovalMessageDynamicTable" class="btn btn-primary" data-dismiss="modal">Save</button>
        <button type="button" class="btn btn-primary" onclick="closeDynamicNot.call(this)">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="approvalMessageDynamicTableModal_send_back" role="dialog" data-focus="false" aria-labelledby="approvalMessageDynamicTableModal_send_back" aria-hidden="true">
  <div class="modal-md modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Columns To Display:</h5>
        <button type="button" class="close" aria-label="Close" onclick="closeDynamicNot_send_back.call(this)">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="col-12 form-group">
          <label for="selectTableAMDT_send_back">Select Table:</label>
          <select id="selectTableAMDT_send_back" class="select2 form-control">
            <option value="" selected disabled>Select Table</option>
            {% for i in tableList %}
              <option value="{{i}}">{{i}}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="selectColumnsAMDT_send_back">Select Columns:</label>
          <select id="selectColumnsAMDT_send_back" class="select2 form-control" multiple>

          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveApprovalMessageDynamicTable_send_back" class="btn btn-primary" data-dismiss="modal">Save</button>
        <button type="button" class="btn btn-primary" onclick="closeDynamicNot_send_back.call(this)">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="approvalMessageDynamicTableModal_delegate" role="dialog" data-focus="false" aria-labelledby="approvalMessageDynamicTableModal_delegate" aria-hidden="true">
  <div class="modal-md modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Columns To Display:</h5>
        <button type="button" class="close" aria-label="Close" onclick="closeDynamicNot_delegate.call(this)">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="col-12 form-group">
          <label for="selectTableAMDT_delegate">Select Table:</label>
          <select id="selectTableAMDT_delegate" class="select2 form-control">
            <option value="" selected disabled>Select Table</option>
            {% for i in tableList %}
              <option value="{{i}}">{{i}}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="selectColumnsAMDT_delegate">Select Columns:</label>
          <select id="selectColumnsAMDT_delegate" class="select2 form-control" multiple>

          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveApprovalMessageDynamicTable_delegate" class="btn btn-primary" data-dismiss="modal">Save</button>
        <button type="button" class="btn btn-primary" onclick="closeDynamicNot_delegate.call(this)">Cancel</button>
      </div>
    </div>
  </div>
</div>



<div class="modal fade" id="approvalSubjectDynamicTable" role="dialog" data-focus="false" aria-labelledby="approvalSubjectDynamicTable" aria-hidden="true">
  <div class="modal-md modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Columns To Display:</h5>
        <button type="button" class="close" aria-label="Close" onclick="closeDynamic.call(this)">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="col-12 form-group">
          <label for="selectTableSubject">Select Table:</label>
          <select id="selectTableSubject" class="select2 form-control">
            <option value="" selected disabled>Select Table</option>
            {% for i in tableList %}
              <option value="{{i}}">{{i}}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="selectColumnsSubject">Select Columns:</label>
          <select id="selectColumnsSubject" class="select2 form-control" multiple>

          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveSubjectTable" class="btn btn-primary">Save</button>
        <button type="button" class="btn btn-primary" onclick="closeDynamic.call(this)">Cancel</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="approvalSubjectDynamicTable_send_back" role="dialog" data-focus="false" aria-labelledby="approvalSubjectDynamicTable_send_back" aria-hidden="true">
  <div class="modal-md modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Columns To Display:</h5>
        <button type="button" class="close" aria-label="Close" onclick="closeDynamic_send_back.call(this)">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="col-12 form-group">
          <label for="selectTableSubject_send_back">Select Table:</label>
          <select id="selectTableSubject_send_back" class="select2 form-control">
            <option value="" selected disabled>Select Table</option>
            {% for i in tableList %}
              <option value="{{i}}">{{i}}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="selectColumnsSubject_send_back">Select Columns:</label>
          <select id="selectColumnsSubject_send_back" class="select2 form-control" multiple>

          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveSubjectTable_send_back" class="btn btn-primary">Save</button>
        <button type="button" class="btn btn-primary" onclick="closeDynamic_send_back.call(this)">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="approvalSubjectDynamicTable_delegate" role="dialog" data-focus="false" aria-labelledby="approvalSubjectDynamicTable_delegate" aria-hidden="true">
  <div class="modal-md modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Columns To Display:</h5>
        <button type="button" class="close" aria-label="Close" onclick="closeDynamic_delegate.call(this)">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="col-12 form-group">
          <label for="selectTableSubject_delegate">Select Table:</label>
          <select id="selectTableSubject_delegate" class="select2 form-control">
            <option value="" selected disabled>Select Table</option>
            {% for i in tableList %}
              <option value="{{i}}">{{i}}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="selectColumnsSubject_delegate">Select Columns:</label>
          <select id="selectColumnsSubject_delegate" class="select2 form-control" multiple>

          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveSubjectTable_delegate" class="btn btn-primary">Save</button>
        <button type="button" class="btn btn-primary" onclick="closeDynamic_delegate.call(this)">Cancel</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="approvalSubjectDynamicTable_mention" role="dialog" data-focus="false" aria-labelledby="approvalSubjectDynamicTable_mention" aria-hidden="true">
  <div class="modal-md modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Columns To Display:</h5>
        <button type="button" class="close" aria-label="Close" onclick="closeDynamic_mention.call(this)">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="col-12 form-group">
          <label for="selectTableSubject_mention">Select Table:</label>
          <select id="selectTableSubject_mention" class="select2 form-control">
            <option value="" selected disabled>Select Table</option>
            {% for i in tableList %}
              <option value="{{i}}">{{i}}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="selectColumnsSubject_mention">Select Columns:</label>
          <select id="selectColumnsSubject_mention" class="select2 form-control" multiple>

          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveSubjectTable_mention" class="btn btn-primary">Save</button>
        <button type="button" class="btn btn-primary" onclick="closeDynamic_mention.call(this)">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="approvalNotificationMessageDynamicTableModal" role="dialog" data-focus="false" aria-labelledby="approvalMessageDynamicTableModal" aria-hidden="true">
  <div class="modal-md modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Columns To Display:</h5>
        <button type="button" class="close" data-dismiss="modal" data-toggle="modal" href="#approval_decision_dialog" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="col-12 form-group">
          <label for="selectTableANMDT">Select Table:</label>
          <select id="selectTableANMDT" class="select2 form-control">
            <option value="" selected disabled>Select Table</option>
            {% for i in tableList %}
              <option value="{{i}}">{{i}}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-12 form-group">
          <label for="selectColumnsANMDT">Select Columns:</label>
          <select id="selectColumnsANMDT" class="select2 form-control" multiple>

          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveApprovalNotificationMessageDynamicTable" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" href="#approval_decision_dialog">Save</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" href="#approval_decision_dialog">Cancel</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="approvalCustomButtonModal" role="dialog" data-focus="false" aria-labelledby="approvalCustomButtonModal" aria-hidden="true">
  <div class="modal-md modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Columns To Display:</h5>
        <button type="button" class="close" data-dismiss="modal" data-toggle="modal" href="#approval_notification_dialog" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-6 form-group">
            <label for="selectButtonText">Text:</label>
            <input type="text" name="selectButtonText" id="selectButtonText" class="textInput form-control">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonType">Type:</label>
            <select id="selectButtonType" class="select2 form-control">
              <option value="submit">Submit</option>
              <option value="save">Save</option>
              <option value="reset">Reset</option>
            </select>
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonTextColor">Text Color:</label>
            <input type="color" class="form-control colorpicker" name="selectButtonTextColor" id="selectButtonTextColor" value="#ffffff">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonTextBackgroundColor">Background Color:</label>
            <input type="color" class="form-control colorpicker" name="selectButtonTextBackgroundColor" id="selectButtonTextBackgroundColor" value="var(--primary-color)">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonBorderRadius">Border Radius(in px):</label>
            <input type="range" class="custom-range" name="selectButtonBorderRadius" id="selectButtonBorderRadius" min="0" max="20">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveApprovalCustomButton" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" href="#approval_notification_dialog">Save</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" href="#approval_notification_dialog">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="approvalCustomButtonModal_send_back" role="dialog" data-focus="false" aria-labelledby="approvalCustomButtonModal_send_back" aria-hidden="true">
  <div class="modal-md modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Columns To Display:</h5>
        <button type="button" class="close" data-dismiss="modal" data-toggle="modal" href="#approval_notification_dialog_send_back" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-6 form-group">
            <label for="selectButtonText_send_back">Text:</label>
            <input type="text" name="selectButtonText_send_back" id="selectButtonText_send_back" class="textInput form-control">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonType_send_back">Type:</label>
            <select id="selectButtonType_send_back" class="select2 form-control">
              <option value="submit">Submit</option>
              <option value="save">Save</option>
              <option value="reset">Reset</option>
            </select>
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonTextColor_send_back">Text Color:</label>
            <input type="color" class="form-control colorpicker" name="selectButtonTextColor_send_back" id="selectButtonTextColor_send_back" value="#ffffff">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonTextBackgroundColor_send_back">Background Color:</label>
            <input type="color" class="form-control colorpicker" name="selectButtonTextBackgroundColor_send_back" id="selectButtonTextBackgroundColor_send_back" value="var(--primary-color)">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonBorderRadius_send_back">Border Radius(in px):</label>
            <input type="range" class="custom-range" name="selectButtonBorderRadius_send_back" id="selectButtonBorderRadius_send_back" min="0" max="20">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveApprovalCustomButton_send_back" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" href="#approval_notification_dialog_send_back">Save</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" href="#approval_notification_dialog_send_back">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="approvalCustomButtonModal_delegate" role="dialog" data-focus="false" aria-labelledby="approvalCustomButtonModal_delegate" aria-hidden="true">
  <div class="modal-md modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Columns To Display:</h5>
        <button type="button" class="close" data-dismiss="modal" data-toggle="modal" href="#approval_notification_dialog_delegate" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-6 form-group">
            <label for="selectButtonText_delegate">Text:</label>
            <input type="text" name="selectButtonText_delegate" id="selectButtonText_delegate" class="textInput form-control">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonType_delegate">Type:</label>
            <select id="selectButtonType_delegate" class="select2 form-control">
              <option value="submit">Submit</option>
              <option value="save">Save</option>
              <option value="reset">Reset</option>
            </select>
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonTextColor_delegate">Text Color:</label>
            <input type="color" class="form-control colorpicker" name="selectButtonTextColor_delegate" id="selectButtonTextColor_delegate" value="#ffffff">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonTextBackgroundColor_delegatek">Background Color:</label>
            <input type="color" class="form-control colorpicker" name="selectButtonTextBackgroundColor_delegate" id="selectButtonTextBackgroundColor_delegate" value="var(--primary-color)">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonBorderRadius_delegate">Border Radius(in px):</label>
            <input type="range" class="custom-range" name="selectButtonBorderRadius_delegate" id="selectButtonBorderRadius_delegate" min="0" max="20">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveApprovalCustomButton_delegate" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" href="#approval_notification_dialog_delegate">Save</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" href="#approval_notification_dialog_delegate">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="approvalCustomButtonModal_mention" role="dialog" data-focus="false" aria-labelledby="approvalCustomButtonModal_mention" aria-hidden="true">
  <div class="modal-md modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Columns To Display:</h5>
        <button type="button" class="close" data-dismiss="modal" data-toggle="modal" href="#approval_notification_dialog_mention" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-6 form-group">
            <label for="selectButtonText_mention">Text:</label>
            <input type="text" name="selectButtonText_mention" id="selectButtonText_mention" class="textInput form-control">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonType_mention">Type:</label>
            <select id="selectButtonType_mention" class="select2 form-control">
              <option value="submit">Submit</option>
              <option value="save">Save</option>
              <option value="reset">Reset</option>
            </select>
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonTextColor_mention">Text Color:</label>
            <input type="color" class="form-control colorpicker" name="selectButtonTextColor_mention" id="selectButtonTextColor_mention" value="#ffffff">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonTextBackgroundColor_mentionk">Background Color:</label>
            <input type="color" class="form-control colorpicker" name="selectButtonTextBackgroundColor_mention" id="selectButtonTextBackgroundColor_mention" value="var(--primary-color)">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonBorderRadius_mention">Border Radius(in px):</label>
            <input type="range" class="custom-range" name="selectButtonBorderRadius_mention" id="selectButtonBorderRadius_mention" min="0" max="20">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveApprovalCustomButton_mention" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" href="#approval_notification_dialog_mention">Save</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" href="#approval_notification_dialog_mention">Cancel</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="approvalDCustomButtonModal" role="dialog" data-focus="false" aria-labelledby="approvalDCustomButtonModal" aria-hidden="true">
  <div class="modal-md modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Columns To Display:</h5>
        <button type="button" class="close" data-dismiss="modal" data-toggle="modal" href="#approval_decision_dialog" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-6 form-group">
            <label for="selectButtonTextD">Text:</label>
            <input type="text" name="selectButtonTextD" id="selectButtonTextD" class="textInput form-control">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonTypeD">Type:</label>
            <select id="selectButtonTypeD" class="select2 form-control">
              <option value="submit">Submit</option>
              <option value="save">Save</option>
              <option value="reset">Reset</option>
            </select>
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonTextColorD">Text Color:</label>
            <input type="color" class="form-control colorpicker" name="selectButtonTextColorD" id="selectButtonTextColor" value="#ffffff">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonTextBackgroundColorD">Background Color:</label>
            <input type="color" class="form-control colorpicker" name="selectButtonTextBackgroundColorD" id="selectButtonTextBackgroundColor" value="var(--primary-color)">
          </div>
          <div class="col-6 form-group">
            <label for="selectButtonBorderRadiusD">Border Radius(in px):</label>
            <input type="range" class="custom-range" name="selectButtonBorderRadiusD" id="selectButtonBorderRadiusD" min="0" max="20">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveApprovalDCustomButton" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" href="#approval_decision_dialog">Save</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" href="#approval_decision_dialog">Cancel</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="approvalNotificationAttachmentModal" role="dialog" data-focus="false" aria-labelledby="approvalAttachmentModal" aria-hidden="true">
  <div class="modal-lg modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Attachments:</h5>
        <button type="button" class="close" onclick="closeAttachment.call(this)" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="max-height: 85vh;overflow-y:auto;">
        <form method="post" id="approvalAttachmentForm" enctype="multipart/form-data">
          <div class="col-6 form-group">
            <label for="selectAttachmentType">Attachment Type:</label>
            <select id="selectAttachmentType" name="selectAttachmentType" class="select2 form-control">
              <option value="" disabled selected>Select Attachment Type</option>
              <option value="static">Static Uploaded</option>
              <option value="dynamic">Dynamically Generated</option>
            </select>
          </div>
          <div class="col-6 form-group">
            <label for="addUserUploadedFilesAsAttachment">Add User Files Uploaded As Attachment:</label>
            <select id="addUserUploadedFilesAsAttachment" name="addUserUploadedFilesAsAttachment" class="select2 form-control">
              <option value="Yes" selected>Yes</option>
              <option value="No">No</option>
            </select>
          </div>
          <div class="custom-file col-12 form-group" id="uploadAttachmentContainer" style="display: none;">
            <input type="file" class="custom-file-input" id="uploadApprovalAttachments" name="uploadApprovalAttachments" multiple>
            <label class="custom-file-label" for="uploadApprovalAttachments">Choose file</label>
          </div>
          <div class="col-6 form-group" id="dynamicAttachmentContainer" style="display: none;">
            <label for="selectDynamicAttachment">Select Document:</label>
            <select id="selectDynamicAttachment" name="selectDynamicAttachment" class="select2 form-control">
              <option value="" selected disabled>---</option>
              <option value="pdf">PDF Of The Transaction</option>
              <option value="csv">Excel(CSV) Of The Transaction</option>
            </select>
          </div>
          <div class="row filterbtnSchedule" style="align-items:end;">
            <div class="col-4 form-group">
              <label>Select table:</label>
              <select class="select2 form-control" id="dynamicAttachmentPDFDataDropTableFilter">
                <option value="" selected>Select table</option>
                {% for i in tableList%}
                  <option value="{{i}}">{{i}}</option>
                {%endfor%}
              </select>
            </div>
            <div class="col-4 form-group">
              <label>Select columns:</label>
              <select class="select2 form-control" id="dynamicAttachmentPDFDataDropColumnsFilter" multiple>
              </select>
            </div>
            <div class="col-2 form-group">
              <button type="button" id="filterAppNotBtn" data-toggle="modal" data-target="#basicfilter_schedule" class="btn btn-primary">Add Filter</button>
            </div>
          </div>
          <div class="row" id="dynamicAttachmentPDFUnderlyingTableContainer" style="display: none;">
            <div class="col-4 form-group">
              <label>Select underlying table for approval data:</label>
              <select class="select2 form-control" id="dynamicAttachmentPDFDataDropTableFilterUnderlying">
                <option value="" selected>Select table</option>
                {% for i in tableList%}
                  <option value="{{i}}">{{i}}</option>
                {%endfor%}
              </select>
            </div>
            <div class="col-4 form-group">
              <label>Select columns:</label>
              <select class="select2 form-control" id="dynamicAttachmentPDFDataDropColumnsFilterUnderlying" multiple>
              </select>
            </div>
          </div>
          <div class="row" id="dynamicAttachmentPDFContainer" style="display: none;">
            <div class="col-12">
              <div class="row">
                <div class="col-5 form-group">
                  <label>Data Layout Option:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFDataLayoutOption">
                    <option value="horizontal" selected>Horizontal</option>
                    <option value="vertical">Vertical</option>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-5 form-group">
                  <label>Select table for dropping fields:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFDataDropTable">
                    <option value="" selected>Select table</option>
                    {% for i in tableList%}
                      <option value="{{i}}">{{i}}</option>
                    {%endfor%}
                  </select>
                </div>
                <div class="col-7 form-group">
                  <label>Select fields to drop:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFDataDropColumns" multiple>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-5 form-group">
                  <label>Additional columns for workflow details:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFTransData" multiple>
                    <option value="approval_level_config">Approver details</option>
                    <option value="audit_log">Audit log</option>
                    <option value="approver_type">Approver type</option>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-3 form-group">
                  <label for="dynamicAttachmentPDFAddLogo">Add Logo:</label>
                  <select id="dynamicAttachmentPDFAddLogo" name="dynamicAttachmentPDFAddLogo" class="select2 form-control">
                    <option value="" selected>---</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                  </select>
                </div>
                <div class="col-3 form-group" id="dynamicAttachmentPDFLogoPlacementContainer" style="display: none;">
                  <label for="dynamicAttachmentPDFLogoPlacement">Logo Placement:</label>
                  <select id="dynamicAttachmentPDFLogoPlacement" name="dynamicAttachmentPDFLogoPlacement" class="select2 form-control">
                    <option value="top_left" selected>Top Left</option>
                    <option value="top_right">Top Right</option>
                    <option value="bottom_left">Bottom Left</option>
                    <option value="bottom_right">Bottom Right</option>
                  </select>
                </div>
                <div class="col-6 form-group" id="dynamicAttachmentPDFLogoContainer" style="display: none;">
                  <label>Upload Logo:</label>
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" id="dynamicAttachmentsPDFLogo" name="dynamicAttachmentsPDFLogo" accept="image/*">
                    <label class="custom-file-label" for="dynamicAttachmentsPDFLogo">Choose file</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12">
              <div class="row">
                <div class="col-4 form-group">
                  <label for="dynamicAttachmentPDFCustomizeStyle">Customize Table Styling Properties:</label>
                  <select id="dynamicAttachmentPDFCustomizeStyle" name="dynamicAttachmentPDFCustomizeStyle" class="select2 form-control">
                    <option value="" selected>---</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                  </select>
                </div>
                <br>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFHeaderBGColorContainer">
                  <label for="dynamicAttachmentPDFHeaderBGColor">Header Background Color:</label>
                  <input type="color" class="colorinput form-control" id="dynamicAttachmentPDFHeaderBGColor" name="dynamicAttachmentPDFHeaderBGColor" value='#000000'>
                </div>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFHeaderTextColorContainer">
                  <label for="dynamicAttachmentPDFHeaderTextColor">Header Text Color:</label>
                  <input type="color" class="colorinput form-control" id="dynamicAttachmentPDFHeaderTextColor" name="dynamicAttachmentPDFHeaderTextColor" value='#ffffff'>
                </div>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFCellBGColorContainer">
                  <label for="dynamicAttachmentPDFCellBGColor">Cell Background Color:</label>
                  <input type="color" class="colorinput form-control" id="dynamicAttachmentPDFCellBGColor" name="dynamicAttachmentPDFCellBGColor" value='#ffffff'>
                </div>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFCellTextColorContainer">
                  <label for="dynamicAttachmentPDFCellTextColor">Cell Text Color:</label>
                  <input type="color" class="colorinput form-control" id="dynamicAttachmentPDFCellTextColor" name="dynamicAttachmentPDFCellTextColor" value='#000000'>
                </div>
                <br>
                <hr>
                <br>
                <div class="col-6" style="display:none;" id="columnAlignmentGlobalHContainerAN">
                  <label>Global Header Alignment:</label>
                  <select class="select2 form-control" id="selectGlobalHeaderPDFANColumnAlignment">
                    <option value="left">Left</option>
                    <option value="center" selected>Center</option>
                    <option value="right">Right</option>
                  </select>
                </div>
                <div class="col-6" style="display:none;" id="columnAlignmentGlobalCContainerAN">
                  <label>Global Content Alignment:</label>
                  <select class="select2 form-control" id="selectGlobalContentPDFANColumnAlignment">
                    <option value="left">Left</option>
                    <option value="center" selected>Center</option>
                    <option value="right">Right</option>
                  </select>
                </div>
                <br>
                <div class="col-6" style="display:none;" id="columnAlignmentTableContainerAN">
                  <label for="selectTableForPDFANColAlignment">Select Table:</label>
                  <select id="selectTableForPDFANColAlignment" class="select2 form-control">
                    <option value="" selected disabled>Select Table</option>
                    {% for i in tableList %}
                      <option value="{{i}}">{{i}}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="col-6" style="display:none;" id="columnAlignmentColumnContainerAN">
                  <label>Select Column:</label>
                  <select class="select2 form-control" id="selectColumnForPDFANColAlignment">
                    <option value="">Select Column</option>
                  </select>
                </div>
                <div class="col-12" style="display:none;" id="columnAlignmentCustomizeContainerAN">
                  <br>
                  <div class="row">
                    <div class="col-4"><strong>Field</strong></div>
                    <div class="col-4"><strong>Header Alignment</strong></div>
                    <div class="col-4"><strong>Content Alignment</strong></div>
                  </div>
                  <div class="row" id="pdfColumnAlignmentContainerAN">

                  </div>
                </div>
                <br>
                <hr>
                <br>
                <div class="col-6 form-group" id="dynamicAttachmentRowHeightContainer" style="display:none;">
                  <label for="dynamicAttachmentPDFTableRowHeight">Row Height:</label>
                  <input type="number" class="numberinput form-control" id="dynamicAttachmentPDFTableRowHeight" name="dynamicAttachmentPDFTableRowHeight" step="5" min="10" max="100" value='40'>
                </div>
                <div class="col-6 form-group" id="dynamicAttachmentColumnWidthContainer" style="display:none;">
                  <label for="dynamicAttachmentPDFTableColumnWidth">Column Width:</label>
                  <select id="dynamicAttachmentPDFTableColumnWidth" name="dynamicAttachmentPDFTableColumnWidth" class="select2 form-control">
                    <option value="auto" selected>Auto Assign</option>
                    <option value="manual">Set Manually</option>
                  </select>
                </div>
                <div class="col-4 form-group" id="dynamicAttachmentColumnStaticWidthContainer" style="display:none;">
                  <label for="dynamicAttachmentPDFTableColumnStaticWidth">Static Width For All The Columns (in px):</label>
                  <input type="number" class="numberinput form-control" id="dynamicAttachmentPDFTableColumnStaticWidth" name="dynamicAttachmentPDFTableColumnStaticWidth" step="1" min="10">
                </div>
                <div class="col-6" id="dynamicAttachmentColumnWidthTableContainer" style="display:none;">
                  <label for="dynamicAttachmentPDFTableColumnWidthTable">Static Table:</label>
                  <select id="dynamicAttachmentPDFTableColumnWidthTable" class="select2 form-control">
                    <option value="" selected disabled>Select Table</option>
                    {% for i in tableList %}
                      <option value="{{i}}">{{i}}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="col-6" id="dynamicAttachmentColumnWidthFieldContainer" style="display:none;max-height: 10rem; overflow-y: auto;">

                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveApprovalAttachments" class="btn btn-primary"><i class="fas fa-save"></i> Save</button>
        <button type="button" id="resetApprovalAttachments" class="btn btn-primary" onclick="closeAttachment.call(this)"><i class="fas fa-refresh" aria-hidden="true"></i> Reset</button>
        <button type="button" class="btn btn-primary" onclick="closeAttachment.call(this)"><i class="fas fa-times"></i> Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="approvalNotificationAttachmentModal_send_back" role="dialog" data-focus="false" aria-labelledby="approvalAttachmentModal_send_back" aria-hidden="true">
  <div class="modal-lg modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Attachments:</h5>
        <button type="button" class="close" onclick="closeAttachment_send_back.call(this)" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="max-height: 85vh;overflow-y:auto;">
        <form method="post" id="approvalAttachmentForm_send_back" enctype="multipart/form-data">
          <div class="col-6 form-group">
            <label for="selectAttachmentType_send_back">Attachment Type:</label>
            <select id="selectAttachmentType_send_back" name="selectAttachmentType_send_back" class="select2 form-control">
              <option value="" disabled selected>Select Attachment Type</option>
              <option value="static">Static Uploaded</option>
              <option value="dynamic">Dynamically Generated</option>
            </select>
          </div>
          <div class="col-6 form-group">
            <label for="addUserUploadedFilesAsAttachment_send_back">Add User Files Uploaded As Attachment:</label>
            <select id="addUserUploadedFilesAsAttachment_send_back" name="addUserUploadedFilesAsAttachment_send_back" class="select2 form-control">
              <option value="Yes" selected>Yes</option>
              <option value="No">No</option>
            </select>
          </div>
          <div class="custom-file col-12 form-group" id="uploadAttachmentContainer_send_back" style="display: none;">
            <input type="file" class="custom-file-input" id="_send_back" name="uploadApprovalAttachments_send_back" multiple>
            <label class="custom-file-label" for="uploadApprovalAttachments_send_back">Choose file</label>
          </div>
          <div class="col-6 form-group" id="dynamicAttachmentContainer_send_back" style="display: none;">
            <label for="selectDynamicAttachment_send_back">Select Document:</label>
            <select id="selectDynamicAttachment_send_back" name="selectDynamicAttachment_send_back" class="select2 form-control">
              <option value="" selected disabled>---</option>
              <option value="pdf">PDF Of The Transaction</option>
              <option value="csv">Excel(CSV) Of The Transaction</option>
            </select>
          </div>
          <div class="row filterbtnSchedule" style="align-items:end;">
            <div class="col-4 form-group">
              <label>Select table for data:</label>
              <select class="select2 form-control" id="dynamicAttachmentPDFDataDropTableFilter_send_back">
                <option value="" selected>Select table</option>
                {% for i in tableList%}
                  <option value="{{i}}">{{i}}</option>
                {%endfor%}
              </select>
            </div>
            <div class="col-4 form-group">
              <label>Select columns:</label>
              <select class="select2 form-control" id="dynamicAttachmentPDFDataDropColumnsFilter_send_back" multiple>
              </select>
            </div>
            <div class="col-2 form-group">
              <button type="button" id="filterAppNotBtn_send_back" data-toggle="modal" data-target="#basicfilter_schedule_send_back" class="btn btn-primary">Add Filter</button>
            </div>
          </div>
          <div class="row" id="dynamicAttachmentPDFContainer_send_back" style="display: none;">
            <div class="col-12">
              <div class="row">
                <div class="col-5 form-group">
                  <label>Data Layout Option:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFDataLayoutOption_send_back">
                    <option value="horizontal" selected>Horizontal</option>
                    <option value="vertical">Vertical</option>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-5 form-group">
                  <label>Select table for dropping fields:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFDataDropTable_send_back">
                    <option value="" selected>Select table</option>
                    {% for i in tableList%}
                      <option value="{{i}}">{{i}}</option>
                    {%endfor%}
                  </select>
                </div>
                <div class="col-7 form-group">
                  <label>Select fields to drop:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFDataDropColumns_send_back" multiple>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-5 form-group">
                  <label>Additional columns for workflow details:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFTransData_send_back" multiple>
                    <option value="approval_level_config">Approver details</option>
                    <option value="audit_log">Audit log</option>
                    <option value="approver_type">Approver type</option>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-3 form-group">
                  <label for="dynamicAttachmentPDFAddLogo_send_back">Add Logo:</label>
                  <select id="dynamicAttachmentPDFAddLogo_send_back" name="dynamicAttachmentPDFAddLogo_send_back" class="select2 form-control">
                    <option value="" selected>---</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                  </select>
                </div>
                <div class="col-3 form-group" id="dynamicAttachmentPDFLogoPlacementContainer_send_back" style="display: none;">
                  <label for="dynamicAttachmentPDFLogoPlacement_send_back">Logo Placement:</label>
                  <select id="dynamicAttachmentPDFLogoPlacement_send_back" name="dynamicAttachmentPDFLogoPlacement_send_back" class="select2 form-control">
                    <option value="top_left" selected>Top Left</option>
                    <option value="top_right">Top Right</option>
                    <option value="bottom_left">Bottom Left</option>
                    <option value="bottom_right">Bottom Right</option>
                  </select>
                </div>
                <div class="col-6 form-group" id="dynamicAttachmentPDFLogoContainer_send_back" style="display: none;">
                  <label>Upload Logo:</label>
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" id="dynamicAttachmentsPDFLogo_send_back" name="dynamicAttachmentsPDFLogo" accept="image/*">
                    <label class="custom-file-label" for="dynamicAttachmentsPDFLogo_send_back">Choose file</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12">
              <div class="row">
                <div class="col-4 form-group">
                  <label for="dynamicAttachmentPDFCustomizeStyle_send_back">Customize Table Styling Properties:</label>
                  <select id="dynamicAttachmentPDFCustomizeStyle_send_back" name="dynamicAttachmentPDFCustomizeStyle_send_back" class="select2 form-control">
                    <option value="" selected>---</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                  </select>
                </div>
                <br>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFHeaderBGColorContainer_send_back">
                  <label for="dynamicAttachmentPDFHeaderBGColor_send_back">Header Background Color:</label>
                  <input type="color" class="colorinput form-control" id="dynamicAttachmentPDFHeaderBGColor_send_back" name="dynamicAttachmentPDFHeaderBGColor_send_back" value='#000000'>
                </div>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFHeaderTextColorContainer_send_back">
                  <label for="dynamicAttachmentPDFHeaderTextColor_send_back">Header Text Color:</label>
                  <input type="color" class="colorinput form-control" id="dynamicAttachmentPDFHeaderTextColor_send_back" name="dynamicAttachmentPDFHeaderTextColor_send_back" value='#ffffff'>
                </div>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFCellBGColorContainer_send_back">
                  <label for="dynamicAttachmentPDFCellBGColor_send_back">Cell Background Color:</label>
                  <input type="color" class="colorinput form-control" id="dynamicAttachmentPDFCellBGColor_send_back" name="dynamicAttachmentPDFCellBGColor_send_back" value='#ffffff'>
                </div>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFCellTextColorContainer_send_back">
                  <label for="dynamicAttachmentPDFCellTextColor_send_back">Cell Text Color:</label>
                  <input type="color" class="colorinput form-control_send_back" id="dynamicAttachmentPDFCellTextColor_send_back" name="dynamicAttachmentPDFCellTextColor_send_back" value='#000000'>
                </div>
                <br>
                <hr>
                <br>
                <div class="col-6" style="display:none;" id="columnAlignmentGlobalHContainerAN_send_back">
                  <label>Global Header Alignment:</label>
                  <select class="select2 form-control" id="selectGlobalHeaderPDFANColumnAlignment_send_back">
                    <option value="left">Left</option>
                    <option value="center" selected>Center</option>
                    <option value="right">Right</option>
                  </select>
                </div>
                <div class="col-6" style="display:none;" id="columnAlignmentGlobalCContainerAN_send_back">
                  <label>Global Content Alignment:</label>
                  <select class="select2 form-control" id="selectGlobalContentPDFANColumnAlignment_send_back">
                    <option value="left">Left</option>
                    <option value="center" selected>Center</option>
                    <option value="right">Right</option>
                  </select>
                </div>
                <br>
                <div class="col-6" style="display:none;" id="columnAlignmentTableContainerAN_send_back">
                  <label for="selectTableForPDFANColAlignment_send_back">Select Table:</label>
                  <select id="selectTableForPDFANColAlignment_send_back" class="select2 form-control">
                    <option value="" selected disabled>Select Table</option>
                    {% for i in tableList %}
                      <option value="{{i}}">{{i}}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="col-6" style="display:none;" id="columnAlignmentColumnContainerAN_send_back">
                  <label>Select Column:</label>
                  <select class="select2 form-control" id="selectColumnForPDFANColAlignment_send_back">
                    <option value="">Select Column</option>
                  </select>
                </div>
                <div class="col-12" style="display:none;" id="columnAlignmentCustomizeContainerAN_send_back">
                  <br>
                  <div class="row">
                    <div class="col-4"><strong>Field</strong></div>
                    <div class="col-4"><strong>Header Alignment</strong></div>
                    <div class="col-4"><strong>Content Alignment</strong></div>
                  </div>
                  <div class="row" id="pdfColumnAlignmentContainerAN_send_back">

                  </div>
                </div>
                <br>
                <hr>
                <br>
                <div class="col-6 form-group" id="dynamicAttachmentRowHeightContainer_send_back" style="display:none;">
                  <label for="dynamicAttachmentPDFTableRowHeight_send_back">Row Height:</label>
                  <input type="number" class="numberinput form-control" id="dynamicAttachmentPDFTableRowHeight_send_back" name="dynamicAttachmentPDFTableRowHeight_send_back" step="5" min="10" max="100" value='40'>
                </div>
                <div class="col-6 form-group" id="dynamicAttachmentColumnWidthContainer_send_back" style="display:none;">
                  <label for="dynamicAttachmentPDFTableColumnWidth_send_back">Column Width:</label>
                  <select id="dynamicAttachmentPDFTableColumnWidth_send_back" name="dynamicAttachmentPDFTableColumnWidth_send_back" class="select2 form-control">
                    <option value="auto" selected>Auto Assign</option>
                    <option value="manual">Set Manually</option>
                  </select>
                </div>
                <div class="col-4 form-group" id="dynamicAttachmentColumnStaticWidthContainer_send_back" style="display:none;">
                  <label for="dynamicAttachmentPDFTableColumnStaticWidth_send_back">Static Width For All The Columns (in px):</label>
                  <input type="number" class="numberinput form-control" id="dynamicAttachmentPDFTableColumnStaticWidth_send_back" name="dynamicAttachmentPDFTableColumnStaticWidth_send_back" step="1" min="10">
                </div>
                <div class="col-6" id="dynamicAttachmentColumnWidthTableContainer_send_back" style="display:none;">
                  <label for="dynamicAttachmentPDFTableColumnWidthTable_send_back">Static Table:</label>
                  <select id="dynamicAttachmentPDFTableColumnWidthTable_send_back" class="select2 form-control">
                    <option value="" selected disabled>Select Table</option>
                    {% for i in tableList %}
                      <option value="{{i}}">{{i}}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="col-6" id="dynamicAttachmentColumnWidthFieldContainer_send_back" style="display:none;max-height: 10rem; overflow-y: auto;">

                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveApprovalAttachments_send_back" class="btn btn-primary"><i class="fas fa-save"></i> Save</button>
        <button type="button" id="resetApprovalAttachments_send_back" class="btn btn-primary" onclick="closeAttachment_send_back.call(this)"><i class="fas fa-refresh" aria-hidden="true"></i> Reset</button>
        <button type="button" class="btn btn-primary" onclick="closeAttachment_send_back.call(this)"><i class="fas fa-times"></i> Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="approvalNotificationAttachmentModal_delegate" role="dialog" data-focus="false" aria-labelledby="approvalAttachmentModal_delegate" aria-hidden="true">
  <div class="modal-lg modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Attachments:</h5>
        <button type="button" class="close" onclick="closeAttachment_delegate.call(this)" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="max-height: 85vh;overflow-y:auto;">
        <form method="post" id="approvalAttachmentForm_delegate" enctype="multipart/form-data">
          <div class="col-6 form-group">
            <label for="selectAttachmentType_delegate">Attachment Type:</label>
            <select id="selectAttachmentType_delegate" name="selectAttachmentType_delegate" class="select2 form-control">
              <option value="" disabled selected>Select Attachment Type</option>
              <option value="static">Static Uploaded</option>
              <option value="dynamic">Dynamically Generated</option>
            </select>
          </div>
          <div class="col-6 form-group">
            <label for="addUserUploadedFilesAsAttachment_delegate">Add User Files Uploaded As Attachment:</label>
            <select id="addUserUploadedFilesAsAttachment_delegate" name="addUserUploadedFilesAsAttachment_delegate" class="select2 form-control">
              <option value="Yes" selected>Yes</option>
              <option value="No">No</option>
            </select>
          </div>
          <div class="custom-file col-12 form-group" id="uploadAttachmentContainer_delegate" style="display: none;">
            <input type="file" class="custom-file-input" id="_send_back" name="uploadApprovalAttachments_delegate" multiple>
            <label class="custom-file-label" for="uploadApprovalAttachments_delegate">Choose file</label>
          </div>
          <div class="col-6 form-group" id="dynamicAttachmentContainer_delegate" style="display: none;">
            <label for="selectDynamicAttachment_delegate">Select Document:</label>
            <select id="selectDynamicAttachment_delegate" name="selectDynamicAttachment_delegate" class="select2 form-control">
              <option value="" selected disabled>---</option>
              <option value="pdf">PDF Of The Transaction</option>
              <option value="csv">Excel(CSV) Of The Transaction</option>
            </select>
          </div>
          <div class="row filterbtnSchedule" style="align-items:end;">
            <div class="col-4 form-group">
              <label>Select table for data:</label>
              <select class="select2 form-control" id="dynamicAttachmentPDFDataDropTableFilter_delegate">
                <option value="" selected>Select table</option>
                {% for i in tableList%}
                  <option value="{{i}}">{{i}}</option>
                {%endfor%}
              </select>
            </div>
            <div class="col-4 form-group">
              <label>Select columns:</label>
              <select class="select2 form-control" id="dynamicAttachmentPDFDataDropColumnsFilter_delegate" multiple>
              </select>
            </div>
            <div class="col-2 form-group">
              <button type="button" id="filterAppNotBtn_delegate" data-toggle="modal" data-target="#basicfilter_schedule_delegate" class="btn btn-primary">Add Filter</button>
            </div>
          </div>
          <div class="row" id="dynamicAttachmentPDFContainer_delegate" style="display: none;">
            <div class="col-12">
              <div class="row">
                <div class="col-5 form-group">
                  <label>Data Layout Option:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFDataLayoutOption_delegate">
                    <option value="horizontal" selected>Horizontal</option>
                    <option value="vertical">Vertical</option>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-5 form-group">
                  <label>Select table for dropping fields:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFDataDropTable_delegate">
                    <option value="" selected>Select table</option>
                    {% for i in tableList%}
                      <option value="{{i}}">{{i}}</option>
                    {%endfor%}
                  </select>
                </div>
                <div class="col-7 form-group">
                  <label>Select fields to drop:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFDataDropColumns_delegate" multiple>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-5 form-group">
                  <label>Additional columns for workflow details:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFTransData_delegate" multiple>
                    <option value="approval_level_config">Approver details</option>
                    <option value="audit_log">Audit log</option>
                    <option value="approver_type">Approver type</option>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-3 form-group">
                  <label for="dynamicAttachmentPDFAddLogo_delegate">Add Logo:</label>
                  <select id="dynamicAttachmentPDFAddLogo_delegate" name="dynamicAttachmentPDFAddLogo_delegate" class="select2 form-control">
                    <option value="" selected>---</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                  </select>
                </div>
                <div class="col-3 form-group" id="dynamicAttachmentPDFLogoPlacementContainer_delegate" style="display: none;">
                  <label for="dynamicAttachmentPDFLogoPlacement_delegate">Logo Placement:</label>
                  <select id="dynamicAttachmentPDFLogoPlacement_delegate" name="dynamicAttachmentPDFLogoPlacement_delegate" class="select2 form-control">
                    <option value="top_left" selected>Top Left</option>
                    <option value="top_right">Top Right</option>
                    <option value="bottom_left">Bottom Left</option>
                    <option value="bottom_right">Bottom Right</option>
                  </select>
                </div>
                <div class="col-6 form-group" id="dynamicAttachmentPDFLogoContainer_delegate" style="display: none;">
                  <label>Upload Logo:</label>
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" id="dynamicAttachmentsPDFLogo_delegate" name="dynamicAttachmentsPDFLogo" accept="image/*">
                    <label class="custom-file-label" for="dynamicAttachmentsPDFLogo_delegate">Choose file</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12">
              <div class="row">
                <div class="col-4 form-group">
                  <label for="dynamicAttachmentPDFCustomizeStyle_delegate">Customize Table Styling Properties:</label>
                  <select id="dynamicAttachmentPDFCustomizeStyle_delegate" name="dynamicAttachmentPDFCustomizeStyle_delegate" class="select2 form-control">
                    <option value="" selected>---</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                  </select>
                </div>
                <br>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFHeaderBGColorContainer_delegate">
                  <label for="dynamicAttachmentPDFHeaderBGColor_delegate">Header Background Color:</label>
                  <input type="color" class="colorinput form-control" id="dynamicAttachmentPDFHeaderBGColor_delegate" name="dynamicAttachmentPDFHeaderBGColor_delegate" value='#000000'>
                </div>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFHeaderTextColorContainer_delegate">
                  <label for="dynamicAttachmentPDFHeaderTextColor_delegate">Header Text Color:</label>
                  <input type="color" class="colorinput form-control" id="dynamicAttachmentPDFHeaderTextColor_delegate" name="dynamicAttachmentPDFHeaderTextColor_delegate" value='#ffffff'>
                </div>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFCellBGColorContainer_delegate">
                  <label for="dynamicAttachmentPDFCellBGColor_delegate">Cell Background Color:</label>
                  <input type="color" class="colorinput form-control" id="dynamicAttachmentPDFCellBGColor_delegate" name="dynamicAttachmentPDFCellBGColor_delegate" value='#ffffff'>
                </div>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFCellTextColorContainer_delegate">
                  <label for="dynamicAttachmentPDFCellTextColor_delegate">Cell Text Color:</label>
                  <input type="color" class="colorinput form-control_delegate" id="dynamicAttachmentPDFCellTextColor_delegate" name="dynamicAttachmentPDFCellTextColor_delegate" value='#000000'>
                </div>
                <br>
                <hr>
                <br>
                <div class="col-6" style="display:none;" id="columnAlignmentGlobalHContainerAN_delegate">
                  <label>Global Header Alignment:</label>
                  <select class="select2 form-control" id="selectGlobalHeaderPDFANColumnAlignment_delegate">
                    <option value="left">Left</option>
                    <option value="center" selected>Center</option>
                    <option value="right">Right</option>
                  </select>
                </div>
                <div class="col-6" style="display:none;" id="columnAlignmentGlobalCContainerAN_delegate">
                  <label>Global Content Alignment:</label>
                  <select class="select2 form-control" id="selectGlobalContentPDFANColumnAlignment_delegate">
                    <option value="left">Left</option>
                    <option value="center" selected>Center</option>
                    <option value="right">Right</option>
                  </select>
                </div>
                <br>
                <div class="col-6" style="display:none;" id="columnAlignmentTableContainerAN_delegate">
                  <label for="selectTableForPDFANColAlignment_delegate">Select Table:</label>
                  <select id="selectTableForPDFANColAlignment_delegate" class="select2 form-control">
                    <option value="" selected disabled>Select Table</option>
                    {% for i in tableList %}
                      <option value="{{i}}">{{i}}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="col-6" style="display:none;" id="columnAlignmentColumnContainerAN_delegate">
                  <label>Select Column:</label>
                  <select class="select2 form-control" id="selectColumnForPDFANColAlignment_delegate">
                    <option value="">Select Column</option>
                  </select>
                </div>
                <div class="col-12" style="display:none;" id="columnAlignmentCustomizeContainerAN_delegate">
                  <br>
                  <div class="row">
                    <div class="col-4"><strong>Field</strong></div>
                    <div class="col-4"><strong>Header Alignment</strong></div>
                    <div class="col-4"><strong>Content Alignment</strong></div>
                  </div>
                  <div class="row" id="pdfColumnAlignmentContainerAN_delegate">

                  </div>
                </div>
                <br>
                <hr>
                <br>
                <div class="col-6 form-group" id="dynamicAttachmentRowHeightContainer_delegate" style="display:none;">
                  <label for="dynamicAttachmentPDFTableRowHeight_delegate">Row Height:</label>
                  <input type="number" class="numberinput form-control" id="dynamicAttachmentPDFTableRowHeight_delegate" name="dynamicAttachmentPDFTableRowHeight_delegate" step="5" min="10" max="100" value='40'>
                </div>
                <div class="col-6 form-group" id="dynamicAttachmentColumnWidthContainer_delegate" style="display:none;">
                  <label for="dynamicAttachmentPDFTableColumnWidth_delegate">Column Width:</label>
                  <select id="dynamicAttachmentPDFTableColumnWidth_delegate" name="dynamicAttachmentPDFTableColumnWidth_delegate" class="select2 form-control">
                    <option value="auto" selected>Auto Assign</option>
                    <option value="manual">Set Manually</option>
                  </select>
                </div>
                <div class="col-4 form-group" id="dynamicAttachmentColumnStaticWidthContainer_delegate" style="display:none;">
                  <label for="dynamicAttachmentPDFTableColumnStaticWidth_delegate">Static Width For All The Columns (in px):</label>
                  <input type="number" class="numberinput form-control" id="dynamicAttachmentPDFTableColumnStaticWidth_delegate" name="dynamicAttachmentPDFTableColumnStaticWidth_delegate" step="1" min="10">
                </div>
                <div class="col-6" id="dynamicAttachmentColumnWidthTableContainer_delegate" style="display:none;">
                  <label for="dynamicAttachmentPDFTableColumnWidthTable_delegate">Static Table:</label>
                  <select id="dynamicAttachmentPDFTableColumnWidthTable_delegate" class="select2 form-control">
                    <option value="" selected disabled>Select Table</option>
                    {% for i in tableList %}
                      <option value="{{i}}">{{i}}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="col-6" id="dynamicAttachmentColumnWidthFieldContainer_delegate" style="display:none;max-height: 10rem; overflow-y: auto;">

                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveApprovalAttachments_delegate" class="btn btn-primary"><i class="fas fa-save"></i> Save</button>
        <button type="button" id="resetApprovalAttachments_delegate" class="btn btn-primary" onclick="closeAttachment_delegate.call(this)"><i class="fas fa-refresh" aria-hidden="true"></i> Reset</button>
        <button type="button" class="btn btn-primary" onclick="closeAttachment_delegate.call(this)"><i class="fas fa-times"></i> Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="approvalNotificationAttachmentModal_mention" role="dialog" data-focus="false" aria-labelledby="approvalAttachmentModal_mention" aria-hidden="true">
  <div class="modal-lg modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Attachments:</h5>
        <button type="button" class="close" onclick="closeAttachment_mention.call(this)" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="max-height: 85vh;overflow-y:auto;">
        <form method="post" id="approvalAttachmentForm_mention" enctype="multipart/form-data">
          <div class="col-6 form-group">
            <label for="selectAttachmentType_mention">Attachment Type:</label>
            <select id="selectAttachmentType_mention" name="selectAttachmentType_mention" class="select2 form-control">
              <option value="" disabled selected>Select Attachment Type</option>
              <option value="static">Static Uploaded</option>
              <option value="dynamic">Dynamically Generated</option>
            </select>
          </div>
          <div class="col-6 form-group">
            <label for="addUserUploadedFilesAsAttachment_mention">Add User Files Uploaded As Attachment:</label>
            <select id="addUserUploadedFilesAsAttachment_mention" name="addUserUploadedFilesAsAttachment_mention" class="select2 form-control">
              <option value="Yes" selected>Yes</option>
              <option value="No">No</option>
            </select>
          </div>
          <div class="custom-file col-12 form-group" id="uploadAttachmentContainer_mention" style="display: none;">
            <input type="file" class="custom-file-input" id="_send_back" name="uploadApprovalAttachments_mention" multiple>
            <label class="custom-file-label" for="uploadApprovalAttachments_mention">Choose file</label>
          </div>
          <div class="col-6 form-group" id="dynamicAttachmentContainer_mention" style="display: none;">
            <label for="selectDynamicAttachment_mention">Select Document:</label>
            <select id="selectDynamicAttachment_mention" name="selectDynamicAttachment_mention" class="select2 form-control">
              <option value="" selected disabled>---</option>
              <option value="pdf">PDF Of The Transaction</option>
              <option value="csv">Excel(CSV) Of The Transaction</option>
            </select>
          </div>
          <div class="row filterbtnSchedule" style="align-items:end;">
            <div class="col-4 form-group">
              <label>Select table for data:</label>
              <select class="select2 form-control" id="dynamicAttachmentPDFDataDropTableFilter_mention">
                <option value="" selected>Select table</option>
                {% for i in tableList%}
                  <option value="{{i}}">{{i}}</option>
                {%endfor%}
              </select>
            </div>
            <div class="col-4 form-group">
              <label>Select columns:</label>
              <select class="select2 form-control" id="dynamicAttachmentPDFDataDropColumnsFilter_mention" multiple>
              </select>
            </div>
            <div class="col-2 form-group">
              <button type="button" id="filterAppNotBtn_mention" data-toggle="modal" data-target="#basicfilter_schedule_mention" class="btn btn-primary">Add Filter</button>
            </div>
          </div>
          <div class="row" id="dynamicAttachmentPDFContainer_mention" style="display: none;">
            <div class="col-12">
              <div class="row">
                <div class="col-5 form-group">
                  <label>Data Layout Option:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFDataLayoutOption_mention">
                    <option value="horizontal" selected>Horizontal</option>
                    <option value="vertical">Vertical</option>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-5 form-group">
                  <label>Select table for dropping fields:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFDataDropTable_mention">
                    <option value="" selected>Select table</option>
                    {% for i in tableList%}
                      <option value="{{i}}">{{i}}</option>
                    {%endfor%}
                  </select>
                </div>
                <div class="col-7 form-group">
                  <label>Select fields to drop:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFDataDropColumns_mention" multiple>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-5 form-group">
                  <label>Additional columns for workflow details:</label>
                  <select class="select2 form-control" id="dynamicAttachmentPDFTransData_mention" multiple>
                    <option value="approval_level_config">Approver details</option>
                    <option value="audit_log">Audit log</option>
                    <option value="approver_type">Approver type</option>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-3 form-group">
                  <label for="dynamicAttachmentPDFAddLogo_mention">Add Logo:</label>
                  <select id="dynamicAttachmentPDFAddLogo_mention" name="dynamicAttachmentPDFAddLogo_mention" class="select2 form-control">
                    <option value="" selected>---</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                  </select>
                </div>
                <div class="col-3 form-group" id="dynamicAttachmentPDFLogoPlacementContainer_mention" style="display: none;">
                  <label for="dynamicAttachmentPDFLogoPlacement_mention">Logo Placement:</label>
                  <select id="dynamicAttachmentPDFLogoPlacement_mention" name="dynamicAttachmentPDFLogoPlacement_mention" class="select2 form-control">
                    <option value="top_left" selected>Top Left</option>
                    <option value="top_right">Top Right</option>
                    <option value="bottom_left">Bottom Left</option>
                    <option value="bottom_right">Bottom Right</option>
                  </select>
                </div>
                <div class="col-6 form-group" id="dynamicAttachmentPDFLogoContainer_mention" style="display: none;">
                  <label>Upload Logo:</label>
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" id="dynamicAttachmentsPDFLogo_mention" name="dynamicAttachmentsPDFLogo" accept="image/*">
                    <label class="custom-file-label" for="dynamicAttachmentsPDFLogo_mention">Choose file</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12">
              <div class="row">
                <div class="col-4 form-group">
                  <label for="dynamicAttachmentPDFCustomizeStyle_mention">Customize Table Styling Properties:</label>
                  <select id="dynamicAttachmentPDFCustomizeStyle_mention" name="dynamicAttachmentPDFCustomizeStyle_mention" class="select2 form-control">
                    <option value="" selected>---</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                  </select>
                </div>
                <br>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFHeaderBGColorContainer_mention">
                  <label for="dynamicAttachmentPDFHeaderBGColor_mention">Header Background Color:</label>
                  <input type="color" class="colorinput form-control" id="dynamicAttachmentPDFHeaderBGColor_mention" name="dynamicAttachmentPDFHeaderBGColor_mention" value='#000000'>
                </div>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFHeaderTextColorContainer_mention">
                  <label for="dynamicAttachmentPDFHeaderTextColor_mention">Header Text Color:</label>
                  <input type="color" class="colorinput form-control" id="dynamicAttachmentPDFHeaderTextColor_mention" name="dynamicAttachmentPDFHeaderTextColor_mention" value='#ffffff'>
                </div>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFCellBGColorContainer_mention">
                  <label for="dynamicAttachmentPDFCellBGColor_mention">Cell Background Color:</label>
                  <input type="color" class="colorinput form-control" id="dynamicAttachmentPDFCellBGColor_mention" name="dynamicAttachmentPDFCellBGColor_mention" value='#ffffff'>
                </div>
                <div class="col-4 form-group" style="display:none;" id="dynamicAttachmentPDFCellTextColorContainer_mention">
                  <label for="dynamicAttachmentPDFCellTextColor_mention">Cell Text Color:</label>
                  <input type="color" class="colorinput form-control_mention" id="dynamicAttachmentPDFCellTextColor_mention" name="dynamicAttachmentPDFCellTextColor_mention" value='#000000'>
                </div>
                <br>
                <hr>
                <br>
                <div class="col-6" style="display:none;" id="columnAlignmentGlobalHContainerAN_mention">
                  <label>Global Header Alignment:</label>
                  <select class="select2 form-control" id="selectGlobalHeaderPDFANColumnAlignment_mention">
                    <option value="left">Left</option>
                    <option value="center" selected>Center</option>
                    <option value="right">Right</option>
                  </select>
                </div>
                <div class="col-6" style="display:none;" id="columnAlignmentGlobalCContainerAN_mention">
                  <label>Global Content Alignment:</label>
                  <select class="select2 form-control" id="selectGlobalContentPDFANColumnAlignment_mention">
                    <option value="left">Left</option>
                    <option value="center" selected>Center</option>
                    <option value="right">Right</option>
                  </select>
                </div>
                <br>
                <div class="col-6" style="display:none;" id="columnAlignmentTableContainerAN_mention">
                  <label for="selectTableForPDFANColAlignment_mention">Select Table:</label>
                  <select id="selectTableForPDFANColAlignment_mention" class="select2 form-control">
                    <option value="" selected disabled>Select Table</option>
                    {% for i in tableList %}
                      <option value="{{i}}">{{i}}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="col-6" style="display:none;" id="columnAlignmentColumnContainerAN_mention">
                  <label>Select Column:</label>
                  <select class="select2 form-control" id="selectColumnForPDFANColAlignment_mention">
                    <option value="">Select Column</option>
                  </select>
                </div>
                <div class="col-12" style="display:none;" id="columnAlignmentCustomizeContainerAN_mention">
                  <br>
                  <div class="row">
                    <div class="col-4"><strong>Field</strong></div>
                    <div class="col-4"><strong>Header Alignment</strong></div>
                    <div class="col-4"><strong>Content Alignment</strong></div>
                  </div>
                  <div class="row" id="pdfColumnAlignmentContainerAN_mention">

                  </div>
                </div>
                <br>
                <hr>
                <br>
                <div class="col-6 form-group" id="dynamicAttachmentRowHeightContainer_mention" style="display:none;">
                  <label for="dynamicAttachmentPDFTableRowHeight_mention">Row Height:</label>
                  <input type="number" class="numberinput form-control" id="dynamicAttachmentPDFTableRowHeight_mention" name="dynamicAttachmentPDFTableRowHeight_mention" step="5" min="10" max="100" value='40'>
                </div>
                <div class="col-6 form-group" id="dynamicAttachmentColumnWidthContainer_mention" style="display:none;">
                  <label for="dynamicAttachmentPDFTableColumnWidth_mention">Column Width:</label>
                  <select id="dynamicAttachmentPDFTableColumnWidth_mention" name="dynamicAttachmentPDFTableColumnWidth_mention" class="select2 form-control">
                    <option value="auto" selected>Auto Assign</option>
                    <option value="manual">Set Manually</option>
                  </select>
                </div>
                <div class="col-4 form-group" id="dynamicAttachmentColumnStaticWidthContainer_mention" style="display:none;">
                  <label for="dynamicAttachmentPDFTableColumnStaticWidth_mention">Static Width For All The Columns (in px):</label>
                  <input type="number" class="numberinput form-control" id="dynamicAttachmentPDFTableColumnStaticWidth_mention" name="dynamicAttachmentPDFTableColumnStaticWidth_mention" step="1" min="10">
                </div>
                <div class="col-6" id="dynamicAttachmentColumnWidthTableContainer_mention" style="display:none;">
                  <label for="dynamicAttachmentPDFTableColumnWidthTable_mention">Static Table:</label>
                  <select id="dynamicAttachmentPDFTableColumnWidthTable_mention" class="select2 form-control">
                    <option value="" selected disabled>Select Table</option>
                    {% for i in tableList %}
                      <option value="{{i}}">{{i}}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="col-6" id="dynamicAttachmentColumnWidthFieldContainer_mention" style="display:none;max-height: 10rem; overflow-y: auto;">

                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" id="saveApprovalAttachments_mention" class="btn btn-primary"><i class="fas fa-save"></i> Save</button>
        <button type="button" id="resetApprovalAttachments_mention" class="btn btn-primary" onclick="closeAttachment_mention.call(this)"><i class="fas fa-refresh" aria-hidden="true"></i> Reset</button>
        <button type="button" class="btn btn-primary" onclick="closeAttachment_mention.call(this)"><i class="fas fa-times"></i> Cancel</button>
      </div>
    </div>
  </div>
</div>

<!---->
<div class="modal" id="basicfilter_schedule" role="dialog" data-focus="false" aria-labelledby="basicfilter_schedule" aria-hidden="true" >
  <div class="modal-dialog modal-lg modal-dialog-centered" style="justify-content: center;">
    <div class="modal-content" style="width: 100%;" >

      <div class="modal-header" style="width:100%;background:#565a5e;text-align: center;justify-content: center;">
        <h6 class="modal-title" style="color:white;margin:auto;font-weight:bold;">Set Filter</h6>

      </div>

      <div class="modal-body" style="height:300px;overflow-x:hidden;overflow-y:auto">
        <div style="margin-top:2em;">
          <div class="btn-group">

              <button type="button" class="btn btn-default dropdown-toggle basicfilter_dropdown_toggle mr-auto" data-toggle="dropdown">
                {{_("Add Condition")}}
                <span class="caret"></span>
              </button>


            <ul class="dropdown-menu" id="basicfilter_condition_dropdown_schedule" style="max-height:10rem; overflow-y:auto;">
            </ul>
          </div>
          <div class="row" id="basicfilter_items_schedule">
            <table class="table filter-table_schedule">
            </table>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" id="saveBasicfilter_schedule" class="btn btn-primary rounded px-2"  style="color:white;" >Save</button>
        <button type="button" class="btn btn-primary  rounded px-2 closeBasicFilter_schedule" onclick="$('#basicfilter_schedule').modal('hide')">Close</button>
      </div>

    </div>
  </div>
</div>

<div class="modal" id="basicfilter_schedule_send_back" role="dialog" data-focus="false" aria-labelledby="basicfilter_schedule_send_back" aria-hidden="true" >
  <div class="modal-dialog modal-lg modal-dialog-centered" style="justify-content: center;">
    <div class="modal-content" style="width: 100%;" >

      <div class="modal-header" style="width:100%;background:#565a5e;text-align: center;justify-content: center;">
        <h6 class="modal-title" style="color:white;margin:auto;font-weight:bold;">Set Filter</h6>

      </div>

      <div class="modal-body" style="height:300px;overflow-x:hidden;overflow-y:auto">
        <div style="margin-top:2em;">
          <div class="btn-group">

              <button type="button" class="btn btn-default dropdown-toggle basicfilter_dropdown_toggle mr-auto" data-toggle="dropdown">
                {{_("Add Condition")}}
                <span class="caret"></span>
              </button>


            <ul class="dropdown-menu" id="basicfilter_condition_dropdown_schedule_send_back" style="max-height:10rem; overflow-y:auto;">
            </ul>
          </div>
          <div class="row" id="basicfilter_items_schedule_send_back">
            <table class="table filter-table_schedule">
            </table>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" id="saveBasicfilter_schedule_send_back" class="btn btn-primary rounded px-2"  style="color:white;" >Save</button>
        <button type="button" class="btn btn-primary  rounded px-2 closeBasicFilter_schedule" onclick="$('#basicfilter_schedule_send_back').modal('hide')">Close</button>
      </div>

    </div>
  </div>
</div>

<div class="modal" id="basicfilter_schedule_delegate" role="dialog" data-focus="false" aria-labelledby="basicfilter_schedule_delegate" aria-hidden="true" >
  <div class="modal-dialog modal-lg modal-dialog-centered" style="justify-content: center;">
    <div class="modal-content" style="width: 100%;" >

      <div class="modal-header" style="width:100%;background:#565a5e;text-align: center;justify-content: center;">
        <h6 class="modal-title" style="color:white;margin:auto;font-weight:bold;">Set Filter</h6>

      </div>

      <div class="modal-body" style="height:300px;overflow-x:hidden;overflow-y:auto">
        <div style="margin-top:2em;">
          <div class="btn-group">

              <button type="button" class="btn btn-default dropdown-toggle basicfilter_dropdown_toggle mr-auto" data-toggle="dropdown">
                {{_("Add Condition")}}
                <span class="caret"></span>
              </button>


            <ul class="dropdown-menu" id="basicfilter_condition_dropdown_schedule_delegate" style="max-height:10rem; overflow-y:auto;">
            </ul>
          </div>
          <div class="row" id="basicfilter_items_schedule_delegate">
            <table class="table filter-table_schedule">
            </table>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" id="saveBasicfilter_schedule_delegate" class="btn btn-primary rounded px-2"  style="color:white;" >Save</button>
        <button type="button" class="btn btn-primary  rounded px-2 closeBasicFilter_schedule" onclick="$('#basicfilter_schedule_delegate').modal('hide')">Close</button>
      </div>

    </div>
  </div>
</div>


  <div class="modal fade" id="approval_notification_dialog"  role="dialog" data-focus="false" aria-labelledby="approval_notification_dialog" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="NotextLabel">Compose Approval Notification Message</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="placeholder-buttons">
            <button type="button" class="btn btn-primary" id="TransactionCreatedBy">Transaction Created By</button>
            <button type="button" class="btn btn-primary" id="TransactionTime">Transaction Time</button>
            <button type="button" class="btn btn-primary" id="TransactionApprovers">Transaction Approvers</button>
            <button type="button" class="btn btn-primary" id="TransactionValueNotification" onclick="openTableModal('approvalNotificationSubject','approval_notification_dialog')">Transaction Value</button>
          </div>
          <script>
            function openTableModal(element, modal){
              if(modal == "approval_notification_dialog"){
                $('#approval_notification_dialog').modal('hide')
                $("#approvalSubjectDynamicTable").attr("data-modal","approval_notification_dialog")
              }else if(modal == "schedulerModal"){
                $('#schedulerModal').modal('hide')
                $("#approvalSubjectDynamicTable").attr("data-modal","schedulerModal")
              }
              else{
                $('#approval_decision_dialog').modal('hide')
                $("#approvalSubjectDynamicTable").attr("data-modal","approval_decision_dialog")
              }

              $('#approvalSubjectDynamicTable').modal('show');
              $("#saveSubjectTable").attr("onclick",`appendMessage(${element},${modal})`)
            }

            function closeDynamic(){
              calling_modal = $('#approvalSubjectDynamicTable').attr("data-modal")
              $(`#${calling_modal}`).modal('show')
              $('#approvalSubjectDynamicTable').modal('hide');
            }

            function closeDynamicNot(){
              calling_modal = $('#approvalMessageDynamicTableModal').attr("data-modal")
              $(`#${calling_modal}`).modal('show')
              $('#approvalMessageDynamicTableModal').modal('hide');
            }

            $('#dynamicAttachmentPDFDataDropTable').off('select2:select').on('select2:select', function(){
              if($(this).val()){

                $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'dropFieldList',
                    'tableName':$(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#dynamicAttachmentPDFDataDropColumns').empty()
                    for (var i = 0; i < data.fieldList.length; i++) {
                          $('#dynamicAttachmentPDFDataDropColumns').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                        }
                      data_reload = $('#dynamicAttachmentPDFDataDropColumns').attr("data-data")
                      if(data_reload){
                        data_reload = JSON.parse(data_reload)
                        $('#dynamicAttachmentPDFDataDropColumns').val(data_reload).trigger('change')
                        $('#dynamicAttachmentPDFDataDropColumns').removeAttr("data-data")
                      }
                    },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              }else{
                $('#dynamicAttachmentPDFDataDropColumns').empty()
              }
            })

            $('#dynamicAttachmentPDFDataDropTableFilter').off('select2:select').on('select2:select', function(){
              if($(this).val()){
                if ($(this).val() == "ApprovalTable") {
                  $('#dynamicAttachmentPDFUnderlyingTableContainer').css('display', '');
                } else {
                  $('#dynamicAttachmentPDFUnderlyingTableContainer').css('display', 'none');
                }

                $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'dropFieldList',
                    'tableName':$(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#dynamicAttachmentPDFDataDropColumnsFilter').empty()
                    for (var i = 0; i < data.fieldList.length; i++) {
                          $('#dynamicAttachmentPDFDataDropColumnsFilter').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                        }
                      data_reload = $('#dynamicAttachmentPDFDataDropColumnsFilter').attr("data-data")
                      if(data_reload){
                        data_reload = JSON.parse(data_reload)
                        $('#dynamicAttachmentPDFDataDropColumnsFilter').val(data_reload).trigger('change')
                        $('#dynamicAttachmentPDFDataDropColumnsFilter').removeAttr("data-data")
                      }
                    },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              }else{
                $('#dynamicAttachmentPDFDataDropColumnsFilter').empty()
              }
            })

            $('#dynamicAttachmentPDFDataDropTableFilterUnderlying').off('select2:select').on('select2:select', function(){
              if($(this).val()){
                $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'dropFieldList',
                    'tableName':$(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#dynamicAttachmentPDFDataDropColumnsFilterUnderlying').empty()
                    for (var i = 0; i < data.fieldList.length; i++) {
                          $('#dynamicAttachmentPDFDataDropColumnsFilterUnderlying').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                        }
                      data_reload = $('#dynamicAttachmentPDFDataDropColumnsFilterUnderlying').attr("data-data")
                      if(data_reload){
                        data_reload = JSON.parse(data_reload)
                        $('#dynamicAttachmentPDFDataDropColumnsFilterUnderlying').val(data_reload).trigger('change')
                        $('#dynamicAttachmentPDFDataDropColumnsFilterUnderlying').removeAttr("data-data")
                      }
                    },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              }else{
                $('#dynamicAttachmentPDFDataDropColumnsFilterUnderlying').empty()
              }
            });

            $('#selectTableSubject').off('select2:select').on('select2:select', function(){
              $.ajax({
                url: window.location.pathname,
                async: false,
                data: {
                  'operation': 'fetchColumnsList',
                  'table_name': $(this).val(),
                },
                type: "POST",
                dataType: "json",
                success: function (data) {
                  $('#selectColumnsSubject').empty();
                  for (i in data['field_list']) {
                    $("#selectColumnsSubject").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                  }
                }, error: ()=>{
                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                }
              });
            });

            function appendMessage(textarea,modal){
              var columnsList = $('#selectColumnsSubject').val();
              $('#approvalMessageDynamicTableModal').modal('hide');
              if(modal.id == "approval_notification_dialog"){
                $('#approval_notification_dialog').modal('show')
              }else if(modal.id == "schedulerModal"){
                $('#schedulerModal').modal('show')
              }
              else{
                $('#approval_decision_dialog').modal('show')
              }

              for (i of columnsList) {
                textarea.value = textarea.value +` {Value-${i}}`
              }
            }


            $("#filterAppNotBtn").on('click',function(){
                   let basicfilter_config =  $("#saveBasicfilter_schedule").attr('data-basicfilter-config')
                   if(basicfilter_config && basicfilter_config!="" && basicfilter_config!="[]"){
                    basicfilter_config = JSON.parse(basicfilter_config)
                    $(document).find('#basicfilter_items_schedule').find('.filter-table_schedule').empty()
                    if(basicfilter_config.length >0){
                      let current_table_name = $('#dynamicAttachmentPDFDataDropTableFilter').val()
                      for(let i=0;i<basicfilter_config.length;i++){

                        let column_name = basicfilter_config[i]['column_name']
                        let condition_name= basicfilter_config[i]['condition']
                        let input_value= basicfilter_config[i]['input_value']
                        if(basicfilter_config[i].hasOwnProperty('current_value')){
                             curr_value = basicfilter_config[i]['current_value']
                          }else{
                             curr_value = ""
                          }
                        if(basicfilter_config[i].hasOwnProperty('constraintName')){
                            constraint_name = basicfilter_config[i]['constraintName']
                        }else{
                            constraint_name = ""
                        }
                        if(basicfilter_config[i].hasOwnProperty('ruleSet')){
                            rule_set = basicfilter_config[i]['ruleSet']
                        }else{
                            rule_set = ""
                        }
                        if(basicfilter_config[i]['table_name'] ==current_table_name ){
                          $(document).find("#basicfilter_condition_dropdown_schedule").find('.dropdown-item').find(`a[name='${column_name}']`).click()
                          let current_div = $(document).find('#basicfilter_items_schedule').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(2).find('div')
                          $(document).find('#basicfilter_items_schedule').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(1).find('div').find('select').val(condition_name).trigger('change')
                          $(document).find('#basicfilter_items_schedule').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(3).find('.basicfilter_curr_val').val(curr_value).trigger('change')
                          $(document).find('#basicfilter_items_schedule').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(4).find('.basicfilter_constraint').val(constraint_name).trigger('change')
                          $(document).find('#basicfilter_items_schedule').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(5).find('.basicfilter_ruleset').val(rule_set).trigger('change')

                          if(typeof(input_value) === "string" && input_value !== null){
                            setTimeout(function(){
                          if(current_div.find(`select option[value='${input_value}']`).length <= 0){
                                current_div.find('select').append(`<option value='${input_value}'>${input_value}</option>`)
                               }
                            current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                         },1000)
                          }else if(typeof(input_value) === 'object' && input_value !== null){
                            if(current_div.find(`.basic_table_valuer`).attr('data-type')=="ForeignKey"){
                            setTimeout(function(){
                              current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                              },1000)
                          }else{
                            let output_html ="";
                            $.each(input_value, function(key,value){

                              if(current_div.find(`.basic_table_valuer option[value='${value}']`).length <= 0 && current_div.find(`.basic_table_valuer`).attr('data-type')!="ForeignKey"){
                                output_html+=`<option value='${value}' selected>${value}</option>`
                              }
                            })
                            default_in_cond_reload(i);
                            current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                            current_div.find('.basic_table_valuer').append(output_html)

                          }

                          }
                      }

                    }
                    }
                   }
                  })

                  $(document).find("#dynamicAttachmentPDFDataDropTableFilter").on("change", function(){
                        $('#basicfilter_items_schedule').find('.filter-table').empty()
                        $("#basicfilter_condition_dropdown_schedule").empty()

                        if($("#dynamicAttachmentPDFDataDropTableFilter").val()){
                          $.ajax({
                            url: window.location.pathname,
                            data: {
                              'model_name': $("#dynamicAttachmentPDFDataDropTableFilter").val(),
                              'operation': 'conditional_table',
                            },
                            type: "POST",
                            dataType: "json",
                            success: function (data) {
                              var label_column = data.label_columns
                            for (const [key, value] of Object.entries(label_column)) {
                              $("#basicfilter_condition_dropdown_schedule").append(
                                  '<li class="dropdown-item"><a href="javascript:void(0)" name=' +
                                  key + ' class="basic_filter_btn_schedule">' + value + '</a></li>');
                              }
                              var form_fields = data.form_fields
                              $('.basic_filter_btn_schedule').off('click').on('click', function () {
                                var name = $(this).attr('name');
                                var text = $(this).text();
                                var STRING = data.form_fields[name]
                                var rowCount=   $('.filter-table_schedule tr').length;
                                $('#basicfilter_items_schedule').find('.filter-table_schedule').append(STRING);

                                $('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).attr('name',name)
                                $('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).attr('data-position',rowCount)
                                let field_datatype= $('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find('input').attr('type')

                                let change_select  =$('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html()
                                let change_select_fk  =$('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                                if(change_select){
                                  change_select = change_select.replace('<input','<select')
                                change_select = change_select + "</select>"
                                $('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html(change_select)
                                $('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("select[type='text']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                                }else if(change_select_fk){
                                change_select_fk = change_select_fk.replace('<input','<select')
                                change_select_fk = change_select_fk + "</select>"
                                $('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html(change_select_fk)
                                $('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("select[type='number'][data-type='ForeignKey']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                                }else if (['date','datetime-local','time'].includes(field_datatype)){
                                  $('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='IN']`).remove()
                                  $('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='NOT IN']`).remove()
                                }
                                $('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(3).remove()
                                $('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input").addClass('basic_table_valuer')
                                $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.select2bs4').removeAttr('onchange')

                                $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).addClass(`d-flex`)
                                $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).css({'text-align':'left'})
                                $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').css('width','25%')
                                $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(1).find('div').css('max-width','10em')

                                $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td:nth-child(1),td:nth-child(2)').find("select").each(function () {
                                  $(this).select2({width:'100%'});
                                })

                                $('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').eq(-1).append(
                                        `
                                        <td class="dt-center">
                                        <div>
                                          <div style="max-width: 15em;">
                                        <select class="form-control select2bs4 basicfilter_curr_val" name=${name} data-dropdown_purpose="select_constant_val">
                                            <option value="" disabled selected>Select Variable</option>
                                            <option value="curr_user">Recipient's Username</option>
                                            <option value="curr_date">Current Date</option>
                                            <option value="curr_datetime">Current Date & Time</option>
                                            <option value="curr_email">Recipient's Email Id</option>
                                        </select>
                                      </div>
                                        </div>
                                        </td>

                                        <td class="dt-center">
                                          <div class="" style="max-width:25em;">
                                          <input type="text" name=${name} class="form-control basicfilter_constraint" placeholder="Constraint name"/>
                                          </div>
                                        </td>

                                        <td class="dt-center">
                                          <div class="" style="max-width:25em;">
                                          <input type="text" name=${name} class="form-control basicfilter_ruleset" placeholder="Rule set"/>
                                          </div>
                                        </td>
                                        `
                                    )

                                  $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.select2bs4').select2({width:'100%',tags:true})

                                $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.select2bs4').on('change',function(){
                                  let in_operand = ['IN','NOT IN']
                                  let valuer = $(this).val()
                                  if(in_operand.includes(valuer) ==true){
                                    let change_select  =$('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html()
                                    let change_select_fk  =$('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                                    if(change_select){

                                    change_select = change_select.replace('<input','<select')
                                      change_select = change_select + "</select>"
                                      $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html(change_select)
                                  }
                                  let field_type = $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                                  if(['date','datetime-local','time'].includes(field_type) ==false){
                                      $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: true,tags:true,allowClear: false})
                                    $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find(".select2-selection--multiple").css({"max-height": "8rem", "overflow": "auto" })
                                    }

                                  }else{
                                    let change_select  =$('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html()
                                    if(change_select ){
                                      change_select = change_select.replace('<select','<input')
                                      change_select = change_select.replace('</select>','')
                                      if($('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").attr(`data-type`) != 'ForeignKey'){
                                        $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html(change_select)
                                        $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").removeClass('select2-hidden-accessible')
                                        $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find('span').remove('span')
                                      }else{
                                        $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                                      }
                                    }

                                    let field_type = $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                                    if(['date','datetime-local','time'].includes(field_type)==false){
                                      if($('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type') =="text"){
                                        $('#basicfilter_items_schedule').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                                      }
                                    }

                                  }
                                })
                                $('.remove_filter').on('click', removefilter);
                                function removefilter() {
                                  $(this).closest("tr").remove();

                                  $('#basicfilter_items_schedule').find(`.filter-table_schedule`).each(function(){
                                    var rowCount=   $('.filter-table_schedule tr').length;
                                    for(let rc=0;rc<rowCount;rc++){
                                      $('#basicfilter_items_schedule').find(`.filter-table_schedule`).find('tr').eq(rc).attr('data-position',rc)
                                    }

                                  })
                                }
                              });
                            },
                            error: function () {
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                            }
                          });
                        }
                      }
                  )

                  $("#saveBasicfilter_schedule").on('click',function(){
                    let tableName = $("#dynamicAttachmentPDFDataDropTableFilter").val();
                    let colsFilter = $('#dynamicAttachmentPDFDataDropColumnsFilter').val();
                    let attrName = 'data-basicfilter-config';
                    var basicfilter_condition_list = []
                    $('#basicfilter_items_schedule').find('.filter-table_schedule').find('tr').each(function(){
                      var table_details = {
                        table_name: tableName,
                        column_name: $(this).attr('name'),
                        condition:  $(this).find('td').eq(1).find('div').find('select').find('option:selected').val(),
                        input_value:$(this).find('td').eq(2).find('div').find('.basic_table_valuer').val(),
                        current_value: $(this).find('td').eq(3).find('div').find('.basicfilter_curr_val').val(),
                        constraintName : $(this).find('td').eq(4).find('div').find('.basicfilter_constraint').val(),
                        ruleSet : $(this).find('td').eq(5).find('div').find('.basicfilter_ruleset').val(),
                        btn_calling: $('#approvalMessageDynamicTableModal').attr("data-btn_calling"),
                        and_or: "AND",
                        cols_for_filter: colsFilter,
                      }
                      basicfilter_condition_list.push(table_details )
                    })
                    $("#saveBasicfilter_schedule").attr(attrName, JSON.stringify(basicfilter_condition_list))
                    Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
                    $('#basicfilter_schedule').modal('hide')
                  })

          </script>
          <div class="col-12 form-group">
            <label for="approvalNotificationSubject">Subject:</label>
            <textarea id="approvalNotificationSubject" class="form-control" style="padding: 1em;"></textarea>
          </div>
          <br>
          <div class="col-12">
            <strong>Body:</strong>
          </div>
        <form>
          <ul class="nav nav-tabs rtf_notification_action_tab" id="rtf_action_tab_id" role="tablist">
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link active" id="Text-tab" data-bs-toggle="tab" data-bs-target="Text" type="button" role="tab" aria-controls="Text" aria-selected="true">Text Format</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link " id="Insert-tab" data-bs-toggle="tab" data-bs-target="Insert" type="button" role="tab" aria-controls="Insert" aria-selected="false">Insert</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="Form-tab" data-bs-toggle="tab" data-bs-target="Form" type="button" role="tab" aria-controls="Form" aria-selected="false">Form</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="Page-Layout-tab" data-bs-toggle="tab" data-bs-target="Page Layout" type="button" role="tab" aria-controls="Page Layout" aria-selected="false">Page Layout</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="insert-dynamic-content-tab" data-bs-toggle="tab" data-bs-target="Insert Dynamic Content" type="button" role="tab" aria-controls="Insert Dynamic Content" aria-selected="false">Insert Dynamic Content</button>
            </li>
            <button class="ml-auto btn btn-primary" id="insert_attachment" type="button" data-config='{}'><i class="fas fa-paperclip"></i></button>
          </ul>
          <textarea id="email_message" name="email_message">&nbsp;&nbsp;</textarea>
        </form>
        <script>
          CKEDITOR.replace('email_message',{height: 300});
          CKEDITOR.config.removePlugins = 'exportpdf';
          CKEDITOR.config.extraPlugins = 'autocorrect';
            var form_rtf = ['CreateDiv,Anchor,Language,About,PasteText,PasteFromWord,Find,Replace,SelectAll,Scayt,Blockquote,Outdent,Indent,BulletedList,NumberedList,CopyFormatting,RemoveFormat,Bold,Italic,Underline,Strike,Subscript,Superscript,TextColor,BidiLtr,BidiRtl,Templates,Link,Unlink,Source,Save,NewPage,ExportPdf,Preview,Print,Styles,Format,Font,FontSize,BGColor,ShowBlocks,Maximize,JustifyLeft,JustifyCenter,JustifyRight,JustifyBlock,HorizontalRule,SpecialChar,PageBreak,Iframe,Flash,Table,Image,Smiley'];

            var home_rtf =['Source,Save,Templates,CreateDiv,Unlink,Anchor,Language,Link,Image,Flash,Table,HorizontalRule,SpecialChar,PageBreak,Iframe,ShowBlocks,Maximize,About,Print,Preview,ExportPdf,NewPage,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Smiley'];
            var tools_rtf =['Flash,About,Templates,Cut,Copy,Paste,PasteText,PasteFromWord,Redo,Undo,Find,Replace,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,Italic,Underline,Strike,Subscript,Superscript,CopyFormatting,RemoveFormat,Outdent,NumberedList,BulletedList,Indent,Blockquote,JustifyLeft,CreateDiv,JustifyCenter,JustifyRight,JustifyBlock,Language,BidiRtl,BidiLtr,Link,Unlink,Anchor,Image,Table,HorizontalRule,Smiley,SpecialChar,PageBreak,Iframe,Styles,Format,Font,FontSize,TextColor,BGColor'];
            var insert_rtf1 =['Source,Save,NewPage,ExportPdf,Preview,Print,Templates,PasteText,PasteFromWord,Replace,Find,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,BidiLtr,BidiRtl,Language,JustifyRight,JustifyBlock,JustifyCenter,CreateDiv,Indent,BulletedList,NumberedList,Outdent,Blockquote,JustifyLeft,CopyFormatting,RemoveFormat,Styles,Format,Font,FontSize,TextColor,BGColor,ShowBlocks,Maximize,About,Italic,Underline,Strike,Subscript,Superscript'];
            $(".rtf_notification_action_tab").find('li').each(function(){

              $(this).find('button').on('click',function(){

                $(".rtf_notification_action_tab").find('li').find('button').removeClass('active')
                $(this).addClass('active')
                if($(this).attr('data-bs-target') == "Form"){
                  var editor = CKEDITOR.instances['email_message'];
                  var editor_data = CKEDITOR.instances['email_message'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message',{height: 300,removeButtons:form_rtf[0], extraPlugins: 'autocorrect'});
                  setTimeout(()=>{CKEDITOR.instances['email_message'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                }
                else if ($(this).attr('data-bs-target') == "Text"){
                  var editor = CKEDITOR.instances['email_message'];
                  var editor_data = CKEDITOR.instances['email_message'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message',{height: 300,removeButtons:home_rtf[0] });
                  setTimeout(()=>{CKEDITOR.instances['email_message'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                }
                else if ($(this).attr('data-bs-target') == "Insert"){

                  var editor = CKEDITOR.instances['email_message'];
                  var editor_data = CKEDITOR.instances['email_message'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message',{height: 300,removeButtons: insert_rtf1[0] });
                  setTimeout(()=>{CKEDITOR.instances['email_message'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                  CKEDITOR.instances['email_message'].addCommand('addCustomButtons', {
                    exec: function(edt){
                      $('#approval_notification_dialog').modal('hide');
                      $('#approvalCustomButtonModal').modal('show');
                      $('#saveApprovalCustomButton').off('click').on('click', function(){
                        var buttonText = $('#selectButtonText').val();
                        var buttonType = $('#selectButtonType').val();
                        var buttonTextColor = $('#selectButtonTextColor').val();
                        var buttonTextBackgroundColor = $('#selectButtonTextBackgroundColor').val();
                        var buttonBorderRadius = $('#selectButtonBorderRadius').val();
                        edt.insertHtml(`<button type='${buttonType}' style='color:${buttonTextColor};background-color:${buttonTextBackgroundColor};border-radius:${buttonBorderRadius}px;'>${buttonText}</button>`, mode="unfiltered_html");
                      });
                    },
                    canUndo : true,
                    canEdit : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('AddCustomButton', {
                      label: "Custom Buttons",
                      command: 'addCustomButtons',
                      text: 'Custom Buttons',
                      icon: "{% static 'images/Base_theme/button.png' %}",
                      toolbar: "insert",
                  });
                }
                else if ($(this).attr('data-bs-target') == "Page Layout"){
                  var editor = CKEDITOR.instances['email_message'];
                  var editor_data = CKEDITOR.instances['email_message'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message',{height: 300,removeButtons:tools_rtf[0] });
                  setTimeout(()=>{CKEDITOR.instances['email_message'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                } else if ($(this).attr('data-bs-target') == "Insert Dynamic Content"){
                  var editor = CKEDITOR.instances['email_message'];
                  var editor_data = CKEDITOR.instances['email_message'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message',{height: 300,removeButtons:form_rtf[0]+home_rtf[0]+insert_rtf1[0]+tools_rtf[0]});
                  setTimeout(()=>{CKEDITOR.instances['email_message'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                  CKEDITOR.instances['email_message'].addCommand('addUserCreatingTransaction', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionCreatedBy}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('UserCTButton', {
                      label: "Transaction Created By",
                      command: 'addUserCreatingTransaction',
                      text: 'Transaction Created By',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });
                  CKEDITOR.instances['email_message'].addCommand('addApproversOfTransaction', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionApprovers}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('ApproverTButton', {
                      label: "Transaction Approver(s)",
                      command: 'addApproversOfTransaction',
                      text: 'Transaction Approver(s)',
                      icon: "{% static 'images/Base_theme/users.png' %}",
                  });
                  CKEDITOR.instances['email_message'].addCommand('addUserCreatingTransaction-Name', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionCreatedBy-Name}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('UserCTButton-Name', {
                      label: "Transaction Created By (Name)",
                      command: 'addUserCreatingTransaction-Name',
                      text: 'Transaction Created By (Name)',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });
                  CKEDITOR.instances['email_message'].addCommand('addApproversOfTransaction-Name', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionApprovers-Name}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('ApproverTButton-Name', {
                      label: "Transaction Approver(s) Name",
                      command: 'addApproversOfTransaction-Name',
                      text: 'Transaction Approver(s) Name',
                      icon: "{% static 'images/Base_theme/users.png' %}",
                  });
                  CKEDITOR.instances['email_message'].addCommand('addTransactionTime', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionTime}</span>`);
                    },
                    canUndo : true
                  });

                  CKEDITOR.instances['email_message'].addCommand('addApprovalLevelConfig', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApprovalLevelConfig}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('ApprovalLevelConfig', {
                      label: "Approval Level Config",
                      command: 'addApprovalLevelConfig',
                      text: 'Approval Level Config',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });

                  CKEDITOR.instances['email_message'].addCommand('addApproverAuditLog', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApproverAuditLog}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('ApproverAuditLog', {
                      label: "Approver Audit Log",
                      command: 'addApproverAuditLog',
                      text: 'Approver Audit Log',
                      icon: "{% static 'images/Base_theme/users.png' %}",
                  });

                  CKEDITOR.instances['email_message'].addCommand('addApprovalType', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApprovalType}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('ApprovalType', {
                      label: "Approval Type",
                      command: 'addApprovalType',
                      text: 'Approval Type',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });

                  CKEDITOR.instances['email_message'].addCommand('addApproveButton', {
                    exec: function(edt){
                      edt.insertHtml(`<a href="{ApproveButton}">Approve</a>`, mode="unfiltered_html");
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('ApproveButton', {
                      label: "Approve Transaction",
                      command: 'addApproveButton',
                      text: 'Approve Transaction',
                      icon: "{% static 'images/Base_theme/approved_2.png' %}",
                  });
                  
                  CKEDITOR.instances['email_message'].addCommand('addInAppApproveButton', {
                    exec: function(edt){
                      $('#approval_notification_dialog').modal('hide')
                      $('#appLinksRTFModal').modal('show');
                      $('#saveAppLinksRTF').off('click').on('click', function(){
                        $('#appLinksRTFModal').modal('hide');
                        $('#approval_notification_dialog').modal('show')
                        let process = $('#selectProcessAppLinks').val();
                        let subProcessCode = $('#selectSubprocessAppLinks').val();
                        edt.insertHtml(`<a href="{InAppApproveButton}/${subProcessCode}/">In-app Approve</a>`, mode="unfiltered_html");
                      });
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('InAppApproveButton', {
                      label: "Approve Transaction (Authenticated)",
                      command: 'addInAppApproveButton',
                      text: 'Approve Transaction (Authenticated)', 
                      icon: "{% static 'images/Base_theme/approved_2.png' %}",
                  });

                  CKEDITOR.instances['email_message'].addCommand('addAppLinks', {
                    exec: function(edt){
                      $('#approval_notification_dialog').modal('hide')

                      $('#appLinksRTFModal').modal('show');

                      $('#saveAppLinksRTF').off('click').on('click', function(){
                        $('#appLinksRTFModal').modal('hide');
                        $('#approval_notification_dialog').modal('show')
                        let process = $('#selectProcessAppLinks').val();
                        let subProcessCode = $('#selectSubprocessAppLinks').val();
                        let subProcessName = $('#selectSubprocessAppLinks > option:selected').text();
                        var linkHTML = `<a href="{domain}/users/{app_code}/User/${subProcessCode}/">${subProcessName}</a>`;
                        edt.insertHtml(linkHTML, mode="unfiltered_html");
                      })
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('addAppLinks', {
                      label: "App Screen Links",
                      command: 'addAppLinks',
                      text: 'App Screen Links',
                      icon: "{% static 'images/Base_theme/clock.png' %}",
                  });

                  CKEDITOR.instances['email_message'].addCommand('addRejectButton', {
                    exec: function(edt){
                      edt.insertHtml(`<a href="{RejectButton}">Reject</a>`, mode="unfiltered_html");
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('RejectButton', {
                      label: "Reject Transaction",
                      command: 'addRejectButton',
                      text: 'Reject Transaction',
                      icon: "{% static 'images/Base_theme/disapproved.png' %}",
                  });

                  CKEDITOR.instances['email_message'].addCommand('addInAppRejectButton', {
                    exec: function(edt){
                      $('#approval_notification_dialog').modal('hide')
                      $('#appLinksRTFModal').modal('show');
                      $('#saveAppLinksRTF').off('click').on('click', function(){
                        $('#appLinksRTFModal').modal('hide');
                        $('#approval_notification_dialog').modal('show')
                        let process = $('#selectProcessAppLinks').val();
                        let subProcessCode = $('#selectSubprocessAppLinks').val();
                        edt.insertHtml(`<a href="{InAppRejectButton}/${subProcessCode}/">In-app Reject</a>`, mode="unfiltered_html");
                      });
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('InAppRejectButton', {
                      label: "Reject Transaction (Authenticated)",
                      command: 'addInAppRejectButton',
                      text: 'Reject Transaction (Authenticated)', 
                      icon: "{% static 'images/Base_theme/disapproved.png' %}",
                  });

                  CKEDITOR.instances['email_message'].ui.addButton('TransactionTimeButton', {
                      label: "Time Of Transaction",
                      command: 'addTransactionTime',
                      text: 'Time Of Transaction',
                      icon: "{% static 'images/Base_theme/clock.png' %}",
                  });
                  CKEDITOR.instances['email_message'].addCommand('addTransaction', {
                    exec: function(edt){
                      $('#approval_notification_dialog').modal('hide')
                      $('#approvalMessageDynamicTableModal').attr("data-modal","approval_notification_dialog")
                      $('#approvalMessageDynamicTableModal').modal('show');
                      $('#selectTableAMDT').off('select2:select').on('select2:select', function(){
                        $.ajax({
                          url: window.location.pathname,
                          async: false,
                          data: {
                            'operation': 'fetchColumnsList',
                            'table_name': $(this).val(),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            $('#selectColumnsAMDT').empty();
                            for (i in data['field_list']) {
                              $("#selectColumnsAMDT").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                            }
                          }, error: ()=>{
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        });
                      });
                      $('#saveApprovalMessageDynamicTable').off('click').on('click', function(){
                        var columnsList = $('#selectColumnsAMDT').val();
                        $('#approvalMessageDynamicTableModal').modal('hide');
                        var tableHTML = `
                        <table cellspacing="1" cellpadding="1" class="table table-bordered table" style="border:1.5px solid black;max-height:100vw;overlow-x:auto;">
                          <thead style="border:1px solid black"><tr>
                          `;
                        var thHTML = '';
                        var valueHTML = "<tbody style='border:1px solid black'><tr style='border:1px solid black;'>";
                        for (i of columnsList) {
                          thHTML += `<th style='border:1px solid black;text-align:center;'>{VerboseName-${i}}</th>`
                          valueHTML += `<td style='border:1px solid black;text-align:center;'>{Value-${i}}</td>`
                        }
                        thHTML += "</tr></thead>"
                        valueHTML += "</tr></tbody>"
                        tableHTML += thHTML
                        tableHTML += valueHTML
                        tableHTML += `</table>`
                        $('#approval_notification_dialog').modal('show')
                        edt.insertHtml(tableHTML, mode="unfiltered_html");
                      })
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('RecordSentForApprovalButton', {
                      label: "Transaction Data Table",
                      command: 'addTransaction',
                      text: 'Transaction Data Table',
                      icon: "{% static 'images/Base_theme/datasheet.png' %}",
                  });
                  CKEDITOR.instances['email_message'].addCommand('addTransactionValue', {
                    exec: function(edt){
                      $('#approval_notification_dialog').modal('hide')
                      $('#approvalMessageDynamicTableModal').attr("data-modal","approval_notification_dialog")
                      $('#approvalMessageDynamicTableModal').modal('show');
                      $('#selectTableAMDT').off('select2:select').on('select2:select', function(){
                        $.ajax({
                          url: window.location.pathname,
                          async: false,
                          data: {
                            'operation': 'fetchColumnsList',
                            'table_name': $(this).val(),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            $('#selectColumnsAMDT').empty();
                            for (i in data['field_list']) {
                              $("#selectColumnsAMDT").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                            }
                          }, error: ()=>{
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        });
                      });
                      $('#saveApprovalMessageDynamicTable').on('click', function(){
                        var columnsList = $('#selectColumnsAMDT').val();
                        $('#approvalMessageDynamicTableModal').modal('hide');
                        $('#approval_notification_dialog').modal('show')
                        for (i of columnsList) {
                          edt.insertHtml(`<span>{Value-${i}}</span>`);
                        }
                      })
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message'].ui.addButton('RecordValuesButton', {
                      label: "Field Values From The Transaction",
                      command: 'addTransactionValue',
                      text: 'Field Values From The Transaction',
                      icon: "{% static 'images/Base_theme/sum.png' %}",
                  });

                }
              })

            })
          </script>
          <script>
            $('#TransactionCreatedBy').on('click', function(){
              $('#approvalNotificationSubject').val($('#approvalNotificationSubject').val() + ' {TransactionCreatedBy}');
            });
            $('#TransactionTime').on('click', function(){
              $('#approvalNotificationSubject').val($('#approvalNotificationSubject').val() + ' {TransactionTime}');
            });
            $('#TransactionApprovers').on('click', function(){
              $('#approvalNotificationSubject').val($('#approvalNotificationSubject').val() + ' {TransactionApprovers}');
            });
          </script>
          <script>
            $('#selectAttachmentType').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'static') {
                $('#uploadAttachmentContainer').css('display', 'block');
                $('#dynamicAttachmentContainer').css('display', 'none');
              } else if ($(this).val() == 'dynamic') {
                $('#uploadAttachmentContainer').css('display', 'none');
                $('#dynamicAttachmentContainer').css('display', 'block');
              } else {
                $('#uploadAttachmentContainer').css('display', 'none');
                $('#dynamicAttachmentContainer').css('display', 'none');
              }
            });
            $('#selectDynamicAttachment').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'pdf') {
                $('#dynamicAttachmentPDFContainer').css('display', 'block');
              } else {
                $('#dynamicAttachmentPDFContainer').css('display', 'none');
                $('.filterbtnSchedule').css('display', 'flex')
              }
            });
            $('#dynamicAttachmentPDFAddLogo').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'yes') {
                $('#dynamicAttachmentPDFLogoPlacementContainer').css('display', 'block');
                $('#dynamicAttachmentPDFLogoContainer').css('display', 'block');
              } else {
                $('#dynamicAttachmentPDFLogoPlacementContainer').css('display', 'none');
                $('#dynamicAttachmentPDFLogoContainer').css('display', 'none');
              }
            });
            $('#dynamicAttachmentPDFCustomizeStyle').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'yes') {
                $('#dynamicAttachmentRowHeightContainer').css('display', 'block');
                $('#dynamicAttachmentColumnWidthContainer').css('display', 'block');
                $('#dynamicAttachmentPDFHeaderBGColorContainer').css('display', 'block');
                $('#dynamicAttachmentPDFHeaderTextColorContainer').css('display', 'block');
                $('#dynamicAttachmentPDFCellBGColorContainer').css('display', 'block');
                $('#dynamicAttachmentPDFCellTextColorContainer').css('display', 'block');
                $('#columnAlignmentGlobalHContainerAN').css('display', 'block');
                $('#columnAlignmentGlobalCContainerAN').css('display', 'block');
                $('#columnAlignmentTableContainerAN').css('display', 'block');
                $('#columnAlignmentColumnContainerAN').css('display', 'block');
                $('#columnAlignmentCustomizeContainerAN').css('display', 'block');

              } else {
                $('#dynamicAttachmentRowHeightContainer').css('display', 'none');
                $('#dynamicAttachmentColumnWidthContainer').css('display', 'none');
                $('#dynamicAttachmentPDFHeaderBGColorContainer').css('display', 'none');
                $('#dynamicAttachmentPDFHeaderTextColorContainer').css('display', 'none');
                $('#dynamicAttachmentPDFCellBGColorContainer').css('display', 'none');
                $('#dynamicAttachmentPDFCellTextColorContainer').css('display', 'none');
                $('#columnAlignmentGlobalHContainerAN').css('display', 'none');
                $('#columnAlignmentGlobalCContainerAN').css('display', 'none');
                $('#columnAlignmentTableContainerAN').css('display', 'none');
                $('#columnAlignmentColumnContainerAN').css('display', 'none');
                $('#columnAlignmentCustomizeContainerAN').css('display', 'none');
              }
            });
            $('#dynamicAttachmentPDFTableColumnWidth').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'manual') {
                $('#dynamicAttachmentColumnWidthTableContainer').css('display', 'block');
                $('#dynamicAttachmentColumnWidthFieldContainer').css('display', 'block');
              } else {
                $('#dynamicAttachmentColumnWidthTableContainer').css('display', 'none');
                $('#dynamicAttachmentColumnWidthFieldContainer').css('display', 'none');
              }
            });
            $('#dynamicAttachmentPDFTableColumnWidthTable').off('select2:select').on('select2:select', function(){
              if ($(this).val()) {
                $.ajax({
                  url: window.location.pathname,
                  async: false,
                  data: {
                    'operation': 'fetchColumnsList',
                    'table_name': $(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#dynamicAttachmentColumnWidthFieldContainer').empty();
                    $("#dynamicAttachmentColumnWidthFieldContainer").append(`<div class='form-inline'><label class='col-7'>Field Name</label><label class='col-5'>Width</label></div>`);
                    for (i in data['field_list']) {
                      $("#dynamicAttachmentColumnWidthFieldContainer").append(`<div class='form-inline'><label class="col-7" data-value="${i}">${data['field_list'][i]}</label><input type="number" class="numberinput form-control col-5" step="5" data-column="${i}"></div>`);
                    }
                    if ($('#dynamicAttachmentColumnWidthFieldContainer').attr('data-config')) {
                      var existingConfig = JSON.parse($('#dynamicAttachmentColumnWidthFieldContainer').attr('data-config'));
                      for (i in existingConfig) {
                        $('#dynamicAttachmentColumnWidthFieldContainer').find(`input[data-column="${i}"]`).val(existingConfig[i]).trigger('change');
                      }
                    }
                  }, error: ()=>{
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                });
              } else {
                $('#dynamicAttachmentColumnWidthFieldContainer').empty();
              }
            });
            $('#selectTableForPDFANColAlignment').off('select2:select').on('select2:select', function(){
              if ($("#dynamicAttachmentPDFDataLayoutOption").val() == "horizontal") {
                if ($(this).val()) {
                  $.ajax({
                    url: window.location.pathname,
                    async: false,
                    data: {
                      'operation': 'fetchColumnsList',
                      'table_name': $(this).val(),
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                      $('#selectColumnForPDFANColAlignment').empty();
                      for (i in data['field_list']) {
                        $("#selectColumnForPDFANColAlignment").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                      }
                    }, error: ()=>{
                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
                  });
                } else {
                  $('#selectColumnForPDFANColAlignment').empty();
                }
              } else {
                $("#selectColumnForPDFANColAlignment").empty();
                $("#selectColumnForPDFANColAlignment").append('<option val="" disabled selected>Select Column</option>');
                $("#selectColumnForPDFANColAlignment").append('<option val="Field">Field</option>');
                $("#selectColumnForPDFANColAlignment").append('<option val="Value">Value</option>');
              }
            });
            $('#insert_attachment').off('click').on('click', function(){
              $('#approval_notification_dialog').modal('hide');
              $("#dynamicAttachmentPDFTransData").parent().css("display","block")
              $("#addUserUploadedFilesAsAttachment").parent().css("display","block")
              $(".filterbtnSchedule").css("display","none")
              $('#approvalNotificationAttachmentModal').modal('show');
              $('#approvalNotificationAttachmentModal').attr('data-calling','decision')
              $('#saveApprovalAttachments').off('click').on('click', function(){
                var attachmentConfig = {};
                if ($('#selectAttachmentType').val() == 'static') {
                  attachmentConfig['attachment_type'] = 'static';
                  var fileInput = document.getElementById('uploadApprovalAttachments');
                  var fileNames = [];
                  for (file of fileInput.files){
                    fileNames.push(file.name);
                  }
                  attachmentConfig['parameter'] = fileNames;
                  let formData = new FormData($("#approvalAttachmentForm")[0]);
                  formData.append("operation", "saveApprovalAttachmentFiles");
                  $.ajax({
                    url:window.location.pathname,
                    data: formData,
                    type: 'POST',
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: function (data) {

                    },
                    error: ()=>{
                        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
                  });
                } else if ($('#selectAttachmentType').val() == 'dynamic') {
                  attachmentConfig['attachment_type'] = 'dynamic';
                  attachmentConfig['parameter'] = $('#selectDynamicAttachment').val();
                  var additionalConfig = {};
                  if ($('#selectDynamicAttachment').val() == 'pdf') {
                    var layoutOption = $('#dynamicAttachmentPDFDataLayoutOption').val();
                    var addLogo = $('#dynamicAttachmentPDFAddLogo').val();
                    var customizeStyle = $('#dynamicAttachmentPDFCustomizeStyle').val();
                    var logoConfig = {};
                    var styleConfig = {};
                    var droptable = $("#dynamicAttachmentPDFDataDropTable").val()
                    var transDataCols = $("#dynamicAttachmentPDFTransData").val()
                    var dropcolumns = $("#dynamicAttachmentPDFDataDropColumns").val()
                    if (addLogo == 'yes') {
                      logoConfig = {
                        add_logo: addLogo,
                        placement: $('#dynamicAttachmentPDFLogoPlacement').val(),
                      };
                      var fileInput = document.getElementById('dynamicAttachmentsPDFLogo');
                      if (fileInput.files.length > 0) {
                        var fileNames = fileInput.files[0].name;
                        logoConfig['parameter'] = fileNames;
                        let formData = new FormData($("#approvalAttachmentForm")[0]);
                        formData.append("operation", "saveApprovalAttachmentPDFLogo");

                        $.ajax({
                          url:window.location.pathname,
                          data: formData,
                          type: 'POST',
                          cache: false,
                          contentType: false,
                          processData: false,
                          success: function (data) {

                          },
                          error: ()=>{
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        });
                      } else if ($("#dynamicAttachmentsPDFLogo").siblings(".custom-file-label").hasClass("selected")) {
                        logoConfig['parameter'] = $("#dynamicAttachmentsPDFLogo").siblings(".custom-file-label").html();
                      } else {

                      }
                    }
                    if (customizeStyle == 'yes') {
                      styleConfig = {
                        customize_style: customizeStyle,
                        header_bg_color: $('#dynamicAttachmentPDFHeaderBGColor').val(),
                        header_text_color: $('#dynamicAttachmentPDFHeaderTextColor').val(),
                        cell_bg_color: $('#dynamicAttachmentPDFCellBGColor').val(),
                        cell_text_color: $('#dynamicAttachmentPDFCellTextColor').val(),
                        row_height: $('#dynamicAttachmentPDFTableRowHeight').val(),
                        customize_column_width: $('#dynamicAttachmentPDFTableColumnWidth').val(),
                        static_column_width: $('#dynamicAttachmentPDFTableColumnStaticWidth').val(),
                      };
                      var columnWidthConfig = {};
                      if ($('#dynamicAttachmentPDFTableColumnWidth').val() == 'manual') {
                        if ($('#dynamicAttachmentPDFTableColumnWidthTable').val()) {
                          columnWidthConfig['table'] = $('#dynamicAttachmentPDFTableColumnWidthTable').val();
                          var customColumnWidth = {};
                          $('#dynamicAttachmentColumnWidthFieldContainer').find('input.col-5').each(function(){
                            if ($(this).val()) {
                              customColumnWidth[$(this).attr('data-column')] = $(this).val();
                            }
                          });
                          columnWidthConfig['field_config'] = customColumnWidth;
                        }
                      }
                      styleConfig['custom_column_field_level_config'] = columnWidthConfig;
                      var pdfColumnAlignmentConfig = {};
                      pdfColumnAlignmentConfig['global_header'] = $('#selectGlobalHeaderPDFANColumnAlignment').val();
                      pdfColumnAlignmentConfig['global_content'] = $('#selectGlobalContentPDFANColumnAlignment').val();
                      var inidividualFieldConfig = {};
                      $('#pdfColumnAlignmentContainerAN').find('.row.col-12').each(function(){
                        var fieldName = $(this).find('.col-4').eq(0).find('strong').attr('data-value');
                        var headerAlignment = $(this).find('.col-4').eq(1).find('.header').val();
                        var contentAlignment = $(this).find('.col-4').eq(2).find('.content').val();
                        inidividualFieldConfig[fieldName] = {header: headerAlignment, content: contentAlignment};
                      });
                      pdfColumnAlignmentConfig['field_level_config'] = inidividualFieldConfig;
                      styleConfig['column_alignment'] = pdfColumnAlignmentConfig;
                    }
                    additionalConfig['logoConfig'] = logoConfig;
                    additionalConfig['styleConfig'] = styleConfig;
                    additionalConfig['layoutOption'] = layoutOption;
                    additionalConfig["droptable"] = droptable;
                    additionalConfig["dropcolumns"] = dropcolumns;
                    additionalConfig["transDataCols"] = transDataCols;
                  }
                  attachmentConfig['additional_config'] = additionalConfig;
                }
                $('#insert_attachment').attr('data-config', JSON.stringify(attachmentConfig));
                closeAttachment()
              });
              $('#resetApprovalAttachments').off('click').on('click', function(){
                $('#uploadApprovalAttachments').val('').trigger('change');
                $('#insert_attachment').attr('data-config', JSON.stringify({}));
              });
            });
          </script>
          </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="approval_decision_dialog"  role="dialog" data-focus="false" aria-labelledby="approval_decision_dialog" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="NotextLabel">Compose Approval Decision Message</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style= "height: 70vh;overflow-y: auto">
          <div style="width: auto;background-color: var(--primary-color);text-align: center;color: white;font-weight: bold;padding: 10px;border-top-left-radius: 20px;border-top-right-radius: 20px;padding-left: 20px;margin-top: 20px;margin-bottom: 20px;">Compose  Approve Message</div>
          <div class="placeholder-buttons">
            <button type="button" class="btn btn-primary" id="TransactionCreatedByAN">Transaction Created By</button>
            <button type="button" class="btn btn-primary" id="TransactionCreatedBy-NameAN">Transaction Created By (Name)</button>
            <button type="button" class="btn btn-primary" id="TransactionTimeAN">Transaction Time</button>
            <button type="button" class="btn btn-primary" id="TransactionApproversAN">Transaction Approved By</button>
            <button type="button" class="btn btn-primary" id="TransactionApprovers-NameAN">Transaction Approved By (Name)</button>
            <button type="button" class="btn btn-primary" id="TransactionValueApproval" onclick="openTableModal('approvalNotificationSubjectAN','approval_decision_dialog')">Transaction Value</button>
          </div>
          <div class="form-group">
            <label for="approvalNotificationSubjectAN">Subject:</label>
            <textarea id="approvalNotificationSubjectAN" class="form-control" style="padding: 1em;"></textarea>
          </div>
          <br>
          <div class="">
            <strong>Body:</strong>
          </div>
          <form>

          <ul class="nav nav-tabs rtf_approved_action_tab" id="rtf_action_tab_id" role="tablist">
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link active" id="Text-tab_decision" data-bs-toggle="tab" data-bs-target="Text" type="button" role="tab" aria-controls="Text" aria-selected="true">Text Format</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link " id="Insert-tab_decision" data-bs-toggle="tab" data-bs-target="Insert" type="button" role="tab" aria-controls="Insert" aria-selected="false">Insert</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="Form-tab_decision" data-bs-toggle="tab" data-bs-target="Form" type="button" role="tab" aria-controls="Form" aria-selected="false">Form</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="Page-Layout-tab_decision" data-bs-toggle="tab" data-bs-target="Page Layout" type="button" role="tab" aria-controls="Page Layout" aria-selected="false">Page Layout</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="insert-dynamic-content-tab_decision" data-bs-toggle="tab" data-bs-target="Insert Dynamic Content" type="button" role="tab" aria-controls="Insert Dynamic Content" aria-selected="false">Insert Dynamic Content</button>
            </li>
          </ul>
            <textarea id="approval_decision_message_approve" name="approval_decision_message_approve">&nbsp;&nbsp;</textarea>
          </form>

          <div style="width: auto;background-color: var(--primary-color);text-align: center;color: white;font-weight: bold;padding: 10px;border-top-left-radius: 20px;border-top-right-radius: 20px;padding-left: 20px;margin-top: 20px;margin-bottom: 20px;"> Compose Reject Message</div>
          <div class="placeholder-buttons">
            <button type="button" class="btn btn-primary" id="TransactionCreatedByRN">Transaction Created By</button>
            <button type="button" class="btn btn-primary" id="TransactionCreatedBy-NameRN">Transaction Created By (Name)</button>
            <button type="button" class="btn btn-primary" id="TransactionTimeRN">Transaction Time</button>
            <button type="button" class="btn btn-primary" id="TransactionApproversRN">Transaction Rejected By</button>
            <button type="button" class="btn btn-primary" id="TransactionApprovers-NameRN">Transaction Rejected By (Name)</button>
            <button type="button" class="btn btn-primary" id="TransactionValueApproval" onclick="openTableModal('approvalNotificationSubjectRN','approval_decision_dialog')">Transaction Value</button>
          </div>
          <div class="form-group">
            <label for="approvalNotificationSubjectRN">Subject:</label>
            <textarea id="approvalNotificationSubjectRN" class="form-control" style="padding: 1em;"></textarea>
          </div>
          <br>
          <div class="">
            <strong>Body:</strong>
          </div>
          <form>

          <ul class="nav nav-tabs rtf_rejected_action_tab" id="rtf_action_tab_id" role="tablist">
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link active" id="Text-tab" data-bs-toggle="tab" data-bs-target="Text" type="button" role="tab" aria-controls="Text" aria-selected="true">Text Format</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link " id="Insert-tab" data-bs-toggle="tab" data-bs-target="Insert" type="button" role="tab" aria-controls="Insert" aria-selected="false">Insert</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="Form-tab" data-bs-toggle="tab" data-bs-target="Form" type="button" role="tab" aria-controls="Form" aria-selected="false">Form</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="Page-Layout-tab" data-bs-toggle="tab" data-bs-target="Page Layout" type="button" role="tab" aria-controls="Page Layout" aria-selected="false">Page Layout</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="insert-dynamic-content-tab" data-bs-toggle="tab" data-bs-target="Insert Dynamic Content" type="button" role="tab" aria-controls="Insert Dynamic Content" aria-selected="false">Insert Dynamic Content</button>
            </li>
          </ul>
            <textarea id="approval_decision_message_reject" name="approval_decision_message_reject">&nbsp;&nbsp;</textarea>
          </form>
          <script>
            CKEDITOR.replace('approval_decision_message_approve',{height: 200});
            CKEDITOR.config.removePlugins = 'exportpdf';
                    var form_rtf = ['CreateDiv,Anchor,Language,About,PasteText,PasteFromWord,Find,Replace,SelectAll,Scayt,Blockquote,Outdent,Indent,BulletedList,NumberedList,CopyFormatting,RemoveFormat,Bold,Italic,Underline,Strike,Subscript,Superscript,TextColor,BidiLtr,BidiRtl,Templates,Link,Unlink,Source,Save,NewPage,ExportPdf,Preview,Print,Styles,Format,Font,FontSize,BGColor,ShowBlocks,Maximize,JustifyLeft,JustifyCenter,JustifyRight,JustifyBlock,HorizontalRule,SpecialChar,PageBreak,Iframe,Flash,Table,Image,Smiley'];

                    var home_rtf =['Source,Save,Templates,CreateDiv,Unlink,Anchor,Language,Link,Image,Flash,Table,HorizontalRule,SpecialChar,PageBreak,Iframe,ShowBlocks,Maximize,About,Print,Preview,ExportPdf,NewPage,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Smiley'];
                    var tools_rtf =['Flash,About,Templates,Cut,Copy,Paste,PasteText,PasteFromWord,Redo,Undo,Find,Replace,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,Italic,Underline,Strike,Subscript,Superscript,CopyFormatting,RemoveFormat,Outdent,NumberedList,BulletedList,Indent,Blockquote,JustifyLeft,CreateDiv,JustifyCenter,JustifyRight,JustifyBlock,Language,BidiRtl,BidiLtr,Link,Unlink,Anchor,Image,Table,HorizontalRule,Smiley,SpecialChar,PageBreak,Iframe,Styles,Format,Font,FontSize,TextColor,BGColor'];
                    var insert_rtf3 =['Source,Save,NewPage,ExportPdf,Preview,Print,Templates,PasteText,PasteFromWord,Replace,Find,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,BidiLtr,BidiRtl,Language,JustifyRight,JustifyBlock,JustifyCenter,CreateDiv,Indent,BulletedList,NumberedList,Outdent,Blockquote,JustifyLeft,CopyFormatting,RemoveFormat,Styles,Format,Font,FontSize,TextColor,BGColor,ShowBlocks,Maximize,About,Italic,Underline,Strike,Subscript,Superscript'];
                    $(".rtf_approved_action_tab").find('li').each(function(){
                      $(this).find('button').on('click',function(){
                        $(".rtf_action_tab").find('li').find('button').removeClass('active')
                        $(this).addClass('active')
                        if($(this).attr('data-bs-target') == "Form"){
                          var editor = CKEDITOR.instances['approval_decision_message_approve'];
                          var editor_data = CKEDITOR.instances['approval_decision_message_approve'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('approval_decision_message_approve',{height: 200,removeButtons:form_rtf[0] });
                          setTimeout(()=>{CKEDITOR.instances['approval_decision_message_approve'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                        }
                        else if ($(this).attr('data-bs-target') == "Text"){
                          var editor = CKEDITOR.instances['approval_decision_message_approve'];
                          var editor_data = CKEDITOR.instances['approval_decision_message_approve'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('approval_decision_message_approve',{height: 200,removeButtons:home_rtf[0] });
                          setTimeout(()=>{CKEDITOR.instances['approval_decision_message_approve'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                        }
                        else if ($(this).attr('data-bs-target') == "Insert"){
                          var editor = CKEDITOR.instances['approval_decision_message_approve'];
                          var editor_data = CKEDITOR.instances['approval_decision_message_approve'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('approval_decision_message_approve',{height: 200,removeButtons:insert_rtf3[0] });
                          setTimeout(()=>{CKEDITOR.instances['approval_decision_message_approve'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                          CKEDITOR.instances['approval_decision_message_approve'].addCommand('addCustomButtons', {
                            exec: function(edt){
                              $('#approval_decision_dialog').modal('hide');
                              $('#approvalDCustomButtonModal').modal('show');
                              $('#saveApprovalDCustomButton').off('click').on('click', function(){
                                var buttonText = $('#selectButtonTextD').val();
                                var buttonType = $('#selectButtonTypeD').val();
                                var buttonTextColor = $('#selectButtonTextColorD').val();
                                var buttonTextBackgroundColor = $('#selectButtonTextBackgroundColorD').val();
                                var buttonBorderRadius = $('#selectButtonBorderRadiusD').val();
                                edt.insertHtml(`<button type='${buttonType}' style='color:${buttonTextColor};background-color:${buttonTextBackgroundColor};border-radius:${buttonBorderRadius}px;'>${buttonText}</button>`, mode="unfiltered_html");
                              });
                            },
                            canUndo : true,
                          });
                          CKEDITOR.instances['approval_decision_message_approve'].ui.addButton('AddCustomButton', {
                              label: "Custom Buttons",
                              command: 'addCustomButtons',
                              text: 'Custom Buttons',
                              icon: "{% static 'images/Base_theme/button.png' %}",
                              toolbar: "insert",
                          });
                        }
                        else if ($(this).attr('data-bs-target') == "Page Layout"){
                          var editor = CKEDITOR.instances['approval_decision_message_approve'];
                          var editor_data = CKEDITOR.instances['approval_decision_message_approve'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('approval_decision_message_approve',{height: 200,removeButtons:tools_rtf[0] });
                          setTimeout(()=>{CKEDITOR.instances['approval_decision_message_approve'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                        } else if ($(this).attr('data-bs-target') == "Insert Dynamic Content"){
                            var editor = CKEDITOR.instances['approval_decision_message_approve'];
                            var editor_data = CKEDITOR.instances['approval_decision_message_approve'].getData()
                            if (editor) { editor.destroy(true); }
                            CKEDITOR.replace('approval_decision_message_approve',{height: 200,removeButtons:form_rtf[0]+home_rtf[0]+insert_rtf1[0]+tools_rtf[0]});
                            setTimeout(()=>{CKEDITOR.instances['approval_decision_message_approve'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                            CKEDITOR.instances['approval_decision_message_approve'].addCommand('addUserCreatingTransaction', {
                              exec: function(edt){
                                edt.insertHtml(`<span>{TransactionCreatedBy}</span>`);
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].ui.addButton('UserCTButton', {
                                label: "Transaction Created By",
                                command: 'addUserCreatingTransaction',
                                text: 'Transaction Created By',
                                icon: "{% static 'images/Base_theme/user.png' %}",
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].addCommand('addTransactionApprovedBy', {
                              exec: function(edt){
                                edt.insertHtml(`<span>{TransactionApprovedBy}</span>`);
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].ui.addButton('TransactionApprovedByButton', {
                                label: "Transaction Approved By",
                                command: 'addTransactionApprovedBy',
                                text: 'Transaction Approved By',
                                icon: "{% static 'images/Base_theme/approved_2.png' %}",
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].addCommand('addUserCreatingTransaction-Name', {
                              exec: function(edt){
                                edt.insertHtml(`<span>{TransactionCreatedBy-Name}</span>`);
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].ui.addButton('UserCTButton-Name', {
                                label: "Transaction Created By (Name)",
                                command: 'addUserCreatingTransaction-Name',
                                text: 'Transaction Created By (Name)',
                                icon: "{% static 'images/Base_theme/user.png' %}",
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].addCommand('addTransactionApprovedBy-Name', {
                              exec: function(edt){
                                edt.insertHtml(`<span>{TransactionApprovedBy-Name}</span>`);
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].ui.addButton('TransactionApprovedByButton-Name', {
                                label: "Transaction Approved By (Name)",
                                command: 'addTransactionApprovedBy-Name',
                                text: 'Transaction Approved By (Name)',
                                icon: "{% static 'images/Base_theme/approved_2.png' %}",
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].addCommand('addApproverAuditLog', {
                              exec: function(edt){
                                edt.insertHtml(`<span>{ApproverAuditLog}</span>`);
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].ui.addButton('ApproverAuditLog', {
                                label: "Approver Audit Log",
                                command: 'addApproverAuditLog',
                                text: 'Approver Audit Log',
                                icon: "{% static 'images/Base_theme/users.png' %}",
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].addCommand('addApprovalType', {
                              exec: function(edt){
                                edt.insertHtml(`<span>{ApprovalType}</span>`);
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].ui.addButton('ApprovalType', {
                                label: "Approval Type",
                                command: 'addApprovalType',
                                text: 'Approval Type',
                                icon: "{% static 'images/Base_theme/user.png' %}",
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].addCommand('addApprovalLevelConfig', {
                              exec: function(edt){
                                edt.insertHtml(`<span>{ApprovalLevelConfig}</span>`);
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].ui.addButton('ApprovalLevelConfig', {
                                label: "Approval Level Config",
                                command: 'addApprovalLevelConfig',
                                text: 'Approval Level Config',
                                icon: "{% static 'images/Base_theme/user.png' %}",
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].addCommand('addTransactionTime', {
                              exec: function(edt){
                                edt.insertHtml(`<span>{TransactionTime}</span>`);
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].ui.addButton('TransactionTimeButton', {
                                label: "Time Of Transaction",
                                command: 'addTransactionTime',
                                text: 'Time Of Transaction',
                                icon: "{% static 'images/Base_theme/clock.png' %}",
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].addCommand('addTransactionApprovalTime', {
                              exec: function(edt){
                                edt.insertHtml(`<span>{TransactionApprovalTime}</span>`);
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].ui.addButton('TransactionApprovalTimeButton', {
                                label: "Transaction Approval Time",
                                command: 'addTransactionApprovalTime',
                                text: 'Transaction Approval Time',
                                icon: "{% static 'images/Base_theme/schedule.png' %}",
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].addCommand('addApperverComment', {
                              exec: function(edt){
                                edt.insertHtml(`<span>{TransactionApproverComment}</span>`);
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].ui.addButton('TransactionApproverCommentButton', {
                                label: "Transaction Approver's Comment",
                                command: 'addApperverComment',
                                text: "Transaction Approver's Comment",
                                icon: "{% static 'images/Base_theme/feedback.png' %}",
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].addCommand('addTransaction', {
                              exec: function(edt){
                                $('#approval_decision_dialog').modal('hide')
                                $('#approvalNotificationMessageDynamicTableModal').modal('show');
                                $('#selectTableANMDT').off('select2:select').on('select2:select', function(){
                                  $.ajax({
                                    url: window.location.pathname,
                                    async: false,
                                    data: {
                                      'operation': 'fetchColumnsList',
                                      'table_name': $(this).val(),
                                    },
                                    type: "POST",
                                    dataType: "json",
                                    success: function (data) {
                                      $('#selectColumnsANMDT').empty();
                                      for (i in data['field_list']) {
                                        $("#selectColumnsANMDT").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                                      }
                                    }, error: ()=>{
                                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                    }
                                  });
                                });
                                $('#saveApprovalNotificationMessageDynamicTable').off('click').on('click', function(){
                                  var columnsList = $('#selectColumnsANMDT').val();
                                  $('#approvalNotificationMessageDynamicTableModal').modal('hide');
                                  $('#approval_decision_dialog').modal('show')
                                  var tableHTML = `
                                  <table cellspacing="1" cellpadding="1" class="table table-bordered table" style="border:1.5px solid black;max-height:100vw;overlow-x:auto;">
                                    <thead style="border:1px solid black"><tr>
                                    `;
                                  var thHTML = '';
                                  var valueHTML = "<tbody style='border:1px solid black'><tr style='border:1px solid black;'>";
                                  for (i of columnsList) {
                                    thHTML += `<th style='border:1px solid black;text-align:center;'>{VerboseName-${i}}</th>`
                                    valueHTML += `<td style='border:1px solid black;text-align:center;'>{Value-${i}}</td>`
                                  }
                                  thHTML += "</tr></thead>"
                                  valueHTML += "</tr></tbody>"
                                  tableHTML += thHTML
                                  tableHTML += valueHTML
                                  tableHTML += `</table>`
                                  edt.insertHtml(tableHTML, mode="unfiltered_html");
                                })
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].ui.addButton('RecordSentForApprovalButton', {
                                label: "Transaction Data Table",
                                command: 'addTransaction',
                                text: 'Transaction Data Table',
                                icon: "{% static 'images/Base_theme/datasheet.png' %}",
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].addCommand('addTransactionValue', {
                              exec: function(edt){
                                $('#approval_decision_dialog').modal('hide')
                                $('#approvalNotificationMessageDynamicTableModal').modal('show');
                                $('#selectTableANMDT').off('select2:select').on('select2:select', function(){
                                  $.ajax({
                                    url: window.location.pathname,
                                    async: false,
                                    data: {
                                      'operation': 'fetchColumnsList',
                                      'table_name': $(this).val(),
                                    },
                                    type: "POST",
                                    dataType: "json",
                                    success: function (data) {
                                      $('#selectColumnsANMDT').empty();
                                      for (i in data['field_list']) {
                                        $("#selectColumnsANMDT").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                                      }
                                    }, error: ()=>{
                                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                    }
                                  });
                                });
                                $('#saveApprovalNotificationMessageDynamicTable').on('click', function(){
                                  var columnsList = $('#selectColumnsAMDT').val();
                                  $('#approvalNotificationMessageDynamicTableModal').modal('hide');
                                  $('#approval_decision_dialog').modal('show')
                                  for (i of columnsList) {
                                    edt.insertHtml(`<span>{Value-${i}}</span>`);
                                  }
                                })
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_approve'].ui.addButton('RecordValuesButton', {
                                label: "Field Values From The Transaction",
                                command: 'addTransactionValue',
                                text: 'Field Values From The Transaction',
                                icon: "{% static 'images/Base_theme/sum.png' %}",
                            });

                          }
                      })

                    })

            CKEDITOR.replace('approval_decision_message_reject',{height: 200});
            CKEDITOR.config.removePlugins = 'exportpdf';
                    var form_rtf = ['CreateDiv,Anchor,Language,About,PasteText,PasteFromWord,Find,Replace,SelectAll,Scayt,Blockquote,Outdent,Indent,BulletedList,NumberedList,CopyFormatting,RemoveFormat,Bold,Italic,Underline,Strike,Subscript,Superscript,TextColor,BidiLtr,BidiRtl,Templates,Link,Unlink,Source,Save,NewPage,ExportPdf,Preview,Print,Styles,Format,Font,FontSize,BGColor,ShowBlocks,Maximize,JustifyLeft,JustifyCenter,JustifyRight,JustifyBlock,HorizontalRule,SpecialChar,PageBreak,Iframe,Flash,Table,Image,Smiley'];
                    var insert_rtf =['CreateDiv,Anchor,Language,About,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,PasteText,PasteFromWord,Find,Replace,SelectAll,Scayt,Blockquote,Outdent,Indent,BulletedList,NumberedList,CopyFormatting,RemoveFormat,Bold,Italic,Underline,Strike,Subscript,Superscript,TextColor,BidiLtr,BidiRtl,Templates,Link,Unlink,Source,Save,NewPage,ExportPdf,Preview,Print,Styles,Format,Font,FontSize,BGColor,ShowBlocks,Maximize'];
                    var home_rtf =['Source,Save,Templates,CreateDiv,Unlink,Anchor,Language,Link,Image,Flash,Table,HorizontalRule,SpecialChar,PageBreak,Iframe,ShowBlocks,Maximize,About,Print,Preview,ExportPdf,NewPage,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Smiley'];
                    var tools_rtf =['Flash,About,Templates,Cut,Copy,Paste,PasteText,PasteFromWord,Redo,Undo,Find,Replace,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,Italic,Underline,Strike,Subscript,Superscript,CopyFormatting,RemoveFormat,Outdent,NumberedList,BulletedList,Indent,Blockquote,JustifyLeft,CreateDiv,JustifyCenter,JustifyRight,JustifyBlock,Language,BidiRtl,BidiLtr,Link,Unlink,Anchor,Image,Table,HorizontalRule,Smiley,SpecialChar,PageBreak,Iframe,Styles,Format,Font,FontSize,TextColor,BGColor'];
                    var insert_rtf4 =['Source,Save,NewPage,ExportPdf,Preview,Print,Templates,PasteText,PasteFromWord,Replace,Find,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,BidiLtr,BidiRtl,Language,JustifyRight,JustifyBlock,JustifyCenter,CreateDiv,Indent,BulletedList,NumberedList,Outdent,Blockquote,JustifyLeft,CopyFormatting,RemoveFormat,Styles,Format,Font,FontSize,TextColor,BGColor,ShowBlocks,Maximize,About,Italic,Underline,Strike,Subscript,Superscript'];
                    $(".rtf_rejected_action_tab").find('li').each(function(){
                      $(this).find('button').on('click',function(){
                        $(".rtf_action_tab").find('li').find('button').removeClass('active')
                        $(this).addClass('active')
                        if($(this).attr('data-bs-target') == "Form"){
                          var editor = CKEDITOR.instances['approval_decision_message_reject'];
                          var editor_data = CKEDITOR.instances['approval_decision_message_reject'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('approval_decision_message_reject',{height: 200,removeButtons:form_rtf[0] });
                          setTimeout(()=>{CKEDITOR.instances['approval_decision_message_reject'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                        }
                        else if ($(this).attr('data-bs-target') == "Text"){
                          var editor = CKEDITOR.instances['approval_decision_message_reject'];
                          var editor_data = CKEDITOR.instances['approval_decision_message_reject'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('approval_decision_message_reject',{height: 200,removeButtons:home_rtf[0] });
                          setTimeout(()=>{CKEDITOR.instances['approval_decision_message_reject'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                        }
                        else if ($(this).attr('data-bs-target') == "Insert"){
                          var editor = CKEDITOR.instances['approval_decision_message_reject'];
                          var editor_data = CKEDITOR.instances['approval_decision_message_reject'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('approval_decision_message_reject',{height: 200,removeButtons:insert_rtf4[0] });
                          setTimeout(()=>{CKEDITOR.instances['approval_decision_message_reject'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                          CKEDITOR.instances['approval_decision_message_reject'].addCommand('addCustomButtons', {
                            exec: function(edt){
                              $('#approval_decision_dialog').modal('hide');
                              $('#approvalDCustomButtonModal').modal('show');
                              $('#saveApprovalDCustomButton').off('click').on('click', function(){
                                var buttonText = $('#selectButtonTextD').val();
                                var buttonType = $('#selectButtonTypeD').val();
                                var buttonTextColor = $('#selectButtonTextColorD').val();
                                var buttonTextBackgroundColor = $('#selectButtonTextBackgroundColorD').val();
                                var buttonBorderRadius = $('#selectButtonBorderRadiusD').val();
                                edt.insertHtml(`<button type='${buttonType}' style='color:${buttonTextColor};background-color:${buttonTextBackgroundColor};border-radius:${buttonBorderRadius}px;'>${buttonText}</button>`, mode="unfiltered_html");
                              });
                            },
                            canUndo : true,
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].ui.addButton('AddCustomButton', {
                              label: "Custom Buttons",
                              command: 'addCustomButtons',
                              text: 'Custom Buttons',
                              icon: "{% static 'images/Base_theme/button.png' %}",
                              toolbar: "insert",
                          });
                        }
                        else if ($(this).attr('data-bs-target') == "Page Layout"){
                          var editor = CKEDITOR.instances['approval_decision_message_reject'];
                          var editor_data = CKEDITOR.instances['approval_decision_message_reject'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('approval_decision_message_reject',{height: 200,removeButtons:tools_rtf[0] });
                          setTimeout(()=>{CKEDITOR.instances['approval_decision_message_reject'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                        } else if ($(this).attr('data-bs-target') == "Insert Dynamic Content"){
                          var editor = CKEDITOR.instances['approval_decision_message_reject'];
                          var editor_data = CKEDITOR.instances['approval_decision_message_reject'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('approval_decision_message_reject',{height: 200,removeButtons:form_rtf[0]+home_rtf[0]+insert_rtf1[0]+tools_rtf[0]});
                          setTimeout(()=>{CKEDITOR.instances['approval_decision_message_reject'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                          CKEDITOR.instances['approval_decision_message_reject'].addCommand('addUserCreatingTransaction', {
                            exec: function(edt){
                              edt.insertHtml(`<span>{TransactionCreatedBy}</span>`);
                            },
                            canUndo : true
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].ui.addButton('UserCTButton', {
                              label: "Transaction Created By",
                              command: 'addUserCreatingTransaction',
                              text: 'Transaction Created By',
                              icon: "{% static 'images/Base_theme/user.png' %}",
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].addCommand('addTransactionRejectedBy', {
                            exec: function(edt){
                              edt.insertHtml(`<span>{TransactionRejectedBy}</span>`);
                            },
                            canUndo : true
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].ui.addButton('TransactionRejctedByButton', {
                              label: "Transaction Rejected By",
                              command: 'addTransactionRejectedBy',
                              text: 'Transaction Rejected By',
                              icon: "{% static 'images/Base_theme/disapproved.png' %}",
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].addCommand('addApprovalType', {
                              exec: function(edt){
                                edt.insertHtml(`<span>{ApprovalType}</span>`);
                              },
                              canUndo : true
                            });
                          CKEDITOR.instances['approval_decision_message_reject'].ui.addButton('ApprovalType', {
                              label: "Approval Type",
                              command: 'addApprovalType',
                              text: 'Approval Type',
                              icon: "{% static 'images/Base_theme/user.png' %}",
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].addCommand('addApprovalLevelConfig', {
                              exec: function(edt){
                                edt.insertHtml(`<span>{ApprovalLevelConfig}</span>`);
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_reject'].ui.addButton('ApprovalLevelConfig', {
                                label: "Approval Level Config",
                                command: 'addApprovalLevelConfig',
                                text: 'Approval Level Config',
                                icon: "{% static 'images/Base_theme/user.png' %}",
                            });
                          CKEDITOR.instances['approval_decision_message_reject'].addCommand('addTransactionTime', {
                            exec: function(edt){
                              edt.insertHtml(`<span>{TransactionTime}</span>`);
                            },
                            canUndo : true
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].ui.addButton('TransactionTimeButton', {
                              label: "Time Of Transaction",
                              command: 'addTransactionTime',
                              text: 'Time Of Transaction',
                              icon: "{% static 'images/Base_theme/clock.png' %}",
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].addCommand('addApproverAuditLog', {
                              exec: function(edt){
                                edt.insertHtml(`<span>{ApproverAuditLog}</span>`);
                              },
                              canUndo : true
                            });
                            CKEDITOR.instances['approval_decision_message_reject'].ui.addButton('ApproverAuditLog', {
                                label: "Approver Audit Log",
                                command: 'addApproverAuditLog',
                                text: 'Approver Audit Log',
                                icon: "{% static 'images/Base_theme/users.png' %}",
                            });
                          CKEDITOR.instances['approval_decision_message_reject'].addCommand('addTransactionRejectionTime', {
                            exec: function(edt){
                              edt.insertHtml(`<span>{TransactionRejectionTime}</span>`);
                            },
                            canUndo : true
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].ui.addButton('TransactionRejectionTimeButton', {
                              label: "Transaction Rejection Time",
                              command: 'addTransactionRejectionTime',
                              text: 'Transaction Rejection Time',
                              icon: "{% static 'images/Base_theme/expired.png' %}",
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].addCommand('addRejectionComment', {
                            exec: function(edt){
                              edt.insertHtml(`<span>{TransactionApproverComment}</span>`);
                            },
                            canUndo : true
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].ui.addButton('TransactionRejectionCommentButton', {
                              label: "Transaction Approver's Comment",
                              command: 'addRejectionComment',
                              text: "Transaction Approver's Comment",
                              icon: "{% static 'images/Base_theme/feedback.png' %}",
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].addCommand('addTransaction', {
                            exec: function(edt){
                              $('#approval_notification_dialog').modal('hide')
                              $('#approvalNotificationMessageDynamicTableModal').modal('show');
                              $('#selectTableANMDT').off('select2:select').on('select2:select', function(){
                                $.ajax({
                                  url: window.location.pathname,
                                  async: false,
                                  data: {
                                    'operation': 'fetchColumnsList',
                                    'table_name': $(this).val(),
                                  },
                                  type: "POST",
                                  dataType: "json",
                                  success: function (data) {
                                    $('#selectColumnsANMDT').empty();
                                    for (i in data['field_list']) {
                                      $("#selectColumnsANMDT").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                                    }
                                  }, error: ()=>{
                                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                  }
                                });
                              });
                              $('#saveApprovalNotificationMessageDynamicTable').off('click').on('click', function(){
                                var columnsList = $('#selectColumnsAMDT').val();
                                $('#approvalNotificationMessageDynamicTableModal').modal('hide');
                                var tableHTML = `
                                <table cellspacing="1" cellpadding="1" class="table table-bordered table" style="border:1.5px solid black;max-height:100vw;overlow-x:auto;">
                                  <thead style="border:1px solid black"><tr>
                                  `;
                                var thHTML = '';
                                var valueHTML = "<tbody style='border:1px solid black'><tr style='border:1px solid black;'>";
                                for (i of columnsList) {
                                  thHTML += `<th style='border:1px solid black;text-align:center;'>{VerboseName-${i}}</th>`
                                  valueHTML += `<td style='border:1px solid black;text-align:center;'>{Value-${i}}</td>`
                                }
                                thHTML += "</tr></thead>"
                                valueHTML += "</tr></tbody>"
                                tableHTML += thHTML
                                tableHTML += valueHTML
                                tableHTML += `</table>`
                                $('#approval_notification_dialog').modal('show')
                                edt.insertHtml(tableHTML, mode="unfiltered_html");
                              })
                            },
                            canUndo : true
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].ui.addButton('RecordSentForApprovalButton', {
                              label: "Transaction Data Table",
                              command: 'addTransaction',
                              text: 'Transaction Data Table',
                              icon: "{% static 'images/Base_theme/datasheet.png' %}",
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].addCommand('addTransactionValue', {
                            exec: function(edt){
                              $('#approval_notification_dialog').modal('hide')
                              $('#approvalNotificationMessageDynamicTableModal').modal('show');
                              $('#selectTableANMDT').off('select2:select').on('select2:select', function(){
                                $.ajax({
                                  url: window.location.pathname,
                                  async: false,
                                  data: {
                                    'operation': 'fetchColumnsList',
                                    'table_name': $(this).val(),
                                  },
                                  type: "POST",
                                  dataType: "json",
                                  success: function (data) {
                                    $('#selectColumnsANMDT').empty();
                                    for (i in data['field_list']) {
                                      $("#selectColumnsANMDT").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                                    }
                                  }, error: ()=>{
                                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                  }
                                });
                              });
                              $('#saveApprovalNotificationMessageDynamicTable').on('click', function(){
                                var columnsList = $('#selectColumnsAMDT').val();
                                $('#approvalNotificationMessageDynamicTableModal').modal('hide');
                                $('#approval_notification_dialog').modal('show')
                                for (i of columnsList) {
                                  edt.insertHtml(`<span>{Value-${i}}</span>`);
                                }
                              })
                            },
                            canUndo : true
                          });
                          CKEDITOR.instances['approval_decision_message_reject'].ui.addButton('RecordValuesButton', {
                              label: "Field Values From The Transaction",
                              command: 'addTransactionValue',
                              text: 'Field Values From The Transaction',
                              icon: "{% static 'images/Base_theme/sum.png' %}",
                          });

                        }
                      })

                    })
            </script>
            <script>
              $('#TransactionCreatedByAN').on('click', function(){
                $('#approvalNotificationSubjectAN').val($('#approvalNotificationSubjectAN').val() + ' {TransactionCreatedBy}');
              });
              $('#TransactionTimeAN').on('click', function(){
                $('#approvalNotificationSubjectAN').val($('#approvalNotificationSubjectAN').val() + ' {TransactionTime}');
              });
              $('#TransactionApproversAN').on('click', function(){
                $('#approvalNotificationSubjectAN').val($('#approvalNotificationSubjectAN').val() + ' {TransactionApprovedBy}');
              });
              $('#TransactionCreatedBy-NameAN').on('click', function(){
                $('#approvalNotificationSubjectAN').val($('#approvalNotificationSubjectAN').val() + ' {TransactionCreatedBy-Name}');
              });
              $('#TransactionApprovers-NameAN').on('click', function(){
                $('#approvalNotificationSubjectAN').val($('#approvalNotificationSubjectAN').val() + ' {TransactionApprovedBy-Name}');
              });
              $('#TransactionCreatedByRN').on('click', function(){
                $('#approvalNotificationSubjectRN').val($('#approvalNotificationSubjectRN').val() + ' {TransactionCreatedBy}');
              });
              $('#TransactionTimeRN').on('click', function(){
                $('#approvalNotificationSubjectRN').val($('#approvalNotificationSubjectRN').val() + ' {TransactionTime}');
              });
              $('#TransactionApproversRN').on('click', function(){
                $('#approvalNotificationSubjectRN').val($('#approvalNotificationSubjectRN').val() + ' {TransactionRejectedBy}');
              });
              $('#TransactionCreatedBy-NameRN').on('click', function(){
                $('#approvalNotificationSubjectRN').val($('#approvalNotificationSubjectRN').val() + ' {TransactionCreatedBy-Name}');
              });
              $('#TransactionApprovers-NameRN').on('click', function(){
                $('#approvalNotificationSubjectRN').val($('#approvalNotificationSubjectRN').val() + ' {TransactionRejectedBy-Name}');
              });
            </script>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


  <div class="modal fade" id="approval_notification_dialog_send_back"  role="dialog" data-focus="false" aria-labelledby="approval_notification_dialog_send_back" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="NotextLabel_send_back">Compose Notification for Sending Back to Previous Approver</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="placeholder-buttons">
            <button type="button" class="btn btn-primary" id="TransactionCreatedBy_send_back">Transaction Created By</button>
            <button type="button" class="btn btn-primary" id="TransactionTime_send_back">Transaction Time</button>
            <button type="button" class="btn btn-primary" id="TransactionApprovers_send_back">Transaction Approvers</button>
            <button type="button" class="btn btn-primary" id="TransactionValueNotification_send_back" onclick="openTableModal_send_back('approvalNotificationSubject_send_back','approval_notification_dialog_send_back')">Transaction Value</button>
          </div>
          <script>
            function openTableModal_send_back(element, modal){
              if(modal == "approval_notification_dialog_send_back"){
                $('#approval_notification_dialog_send_back').modal('hide')
                $("#approvalSubjectDynamicTable_send_back").attr("data-modal","approval_notification_dialog_send_back")
              }else if(modal == "schedulerModal_send_back"){
                $('#schedulerModal_send_back').modal('hide')
                $("#approvalSubjectDynamicTable_send_back").attr("data-modal","schedulerModal_send_back")
              }
              else{
                $('#approval_decision_dialog').modal('hide')
                $("#approvalSubjectDynamicTable_send_back").attr("data-modal","approval_decision_dialog_send_back")
              }

              $('#approvalSubjectDynamicTable_send_back').modal('show');
              $("#saveSubjectTable_send_back").attr("onclick",`appendMessage_send_back(${element},${modal})`)
            }

            function closeDynamic_send_back(){
              calling_modal = $('#approvalSubjectDynamicTable_send_back').attr("data-modal")
              $(`#${calling_modal}`).modal('show')
              $('#approvalSubjectDynamicTable_send_back').modal('hide');
            }

            function closeDynamicNot_send_back(){
              calling_modal = $('#approvalMessageDynamicTableModal_send_back').attr("data-modal")
              $(`#${calling_modal}`).modal('show')
              $('#approvalMessageDynamicTableModal_send_back').modal('hide');
            }

            $('#dynamicAttachmentPDFDataDropTable_send_back').off('select2:select').on('select2:select', function(){
              if($(this).val()){

                $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'dropFieldList',
                    'tableName':$(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#dynamicAttachmentPDFDataDropColumns_send_back').empty()
                    for (var i = 0; i < data.fieldList.length; i++) {
                          $('#dynamicAttachmentPDFDataDropColumns_send_back').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                        }
                      data_reload = $('#dynamicAttachmentPDFDataDropColumns_send_back').attr("data-data")
                      if(data_reload){
                        data_reload = JSON.parse(data_reload)
                        $('#dynamicAttachmentPDFDataDropColumns_send_back').val(data_reload).trigger('change')
                        $('#dynamicAttachmentPDFDataDropColumns_send_back').removeAttr("data-data")
                      }
                    },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              }else{
                $('#dynamicAttachmentPDFDataDropColumns_send_back').empty()
              }
            })

            $('#dynamicAttachmentPDFDataDropTableFilter_send_back').off('select2:select').on('select2:select', function(){
              if($(this).val()){

                $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'dropFieldList',
                    'tableName':$(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#dynamicAttachmentPDFDataDropColumnsFilter_send_back').empty()
                    for (var i = 0; i < data.fieldList.length; i++) {
                          $('#dynamicAttachmentPDFDataDropColumnsFilter_send_back').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                        }
                      data_reload = $('#dynamicAttachmentPDFDataDropColumnsFilter_send_back').attr("data-data")
                      if(data_reload){
                        data_reload = JSON.parse(data_reload)
                        $('#dynamicAttachmentPDFDataDropColumnsFilter_send_back').val(data_reload).trigger('change')
                        $('#dynamicAttachmentPDFDataDropColumnsFilter_send_back').removeAttr("data-data")
                      }
                    },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              }else{
                $('#dynamicAttachmentPDFDataDropColumnsFilter_send_back').empty()
              }
            })


            $('#selectTableSubject_send_back').off('select2:select').on('select2:select', function(){
              $.ajax({
                url: window.location.pathname,
                async: false,
                data: {
                  'operation': 'fetchColumnsList',
                  'table_name': $(this).val(),
                },
                type: "POST",
                dataType: "json",
                success: function (data) {
                  $('#selectColumnsSubject_send_back').empty();
                  for (i in data['field_list']) {
                    $("#selectColumnsSubject_send_back").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                  }
                }, error: ()=>{
                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                }
              });
            });

            function appendMessage_send_back(textarea,modal){
              var columnsList = $('#selectColumnsSubject_send_back').val();
              $('#approvalMessageDynamicTableModal_send_back').modal('hide');
              if(modal.id == "approval_notification_dialog_send_back"){
                $('#approval_notification_dialog_send_back').modal('show')
              }else if(modal.id == "schedulerModal_send_back"){
                $('#schedulerModal_send_back').modal('show')
              }
              else{
                $('#approval_decision_dialog_send_back').modal('show')
              }

              for (i of columnsList) {
                textarea.value = textarea.value +` {Value-${i}}`
              }
            }


            $("#filterAppNotBtn_send_back").on('click',function(){
                   let basicfilter_config =  $("#saveBasicfilter_schedule_send_back").attr('data-basicfilter-config')
                   if(basicfilter_config && basicfilter_config!="" && basicfilter_config!="[]"){
                    basicfilter_config = JSON.parse(basicfilter_config)
                    $(document).find('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').empty()
                    if(basicfilter_config.length >0){
                      let current_table_name = $('#dynamicAttachmentPDFDataDropTableFilter_send_back').val()
                      for(let i=0;i<basicfilter_config.length;i++){

                        let column_name = basicfilter_config[i]['column_name']
                        let condition_name= basicfilter_config[i]['condition']
                        let input_value= basicfilter_config[i]['input_value']
                        if(basicfilter_config[i].hasOwnProperty('current_value')){
                             curr_value = basicfilter_config[i]['current_value']
                          }else{
                             curr_value = ""
                          }
                        if(basicfilter_config[i].hasOwnProperty('constraint_name')){
                            constraint_name = basicfilter_config[i]['constraint_name']
                        }else{
                            constraint_name = ""
                        }
                        if(basicfilter_config[i].hasOwnProperty('rule_set')){
                            rule_set = basicfilter_config[i]['rule_set']
                        }else{
                            rule_set = ""
                        }
                        if(basicfilter_config[i]['table_name'] ==current_table_name ){
                          $(document).find("#basicfilter_condition_dropdown_schedule").find('.dropdown-item').find(`a[name='${column_name}']`).click()
                          let current_div = $(document).find('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(2).find('div')
                          $(document).find('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(3).find('.basicfilter_curr_val').val(curr_value).trigger('change')
                          $(document).find('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(1).find('div').find('select').val(condition_name).trigger('change')
                          $(document).find('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(4).find('.basicfilter_constraint').val(constraint_name).trigger('change')
                          $(document).find('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(5).find('.basicfilter_ruleset').val(rule_set).trigger('change')

                          if(typeof(input_value) === "string" && input_value !== null){
                            setTimeout(function(){
                          if(current_div.find(`select option[value='${input_value}']`).length <= 0){
                                current_div.find('select').append(`<option value='${input_value}'>${input_value}</option>`)
                               }
                            current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                         },1000)
                          }else if(typeof(input_value) === 'object' && input_value !== null){
                            if(current_div.find(`.basic_table_valuer`).attr('data-type')=="ForeignKey"){
                            setTimeout(function(){
                              current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                              },1000)
                          }else{
                            let output_html ="";
                            $.each(input_value, function(key,value){

                              if(current_div.find(`.basic_table_valuer option[value='${value}']`).length <= 0 && current_div.find(`.basic_table_valuer`).attr('data-type')!="ForeignKey"){
                                output_html+=`<option value='${value}' selected>${value}</option>`
                              }
                            })
                            default_in_cond_reload(i);
                            current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                            current_div.find('.basic_table_valuer').append(output_html)

                          }

                          }
                      }

                    }
                    }
                   }
                  })

                  $(document).find("#dynamicAttachmentPDFDataDropTableFilter_send_back").on("change", function(){
                        $('#basicfilter_items_schedule_send_back').find('.filter-table').empty()
                        $("#basicfilter_condition_dropdown_schedule_send_back").empty()

                        if($("#dynamicAttachmentPDFDataDropTableFilter_send_back").val()){
                          $.ajax({
                            url: window.location.pathname,
                            data: {
                              'model_name': $("#dynamicAttachmentPDFDataDropTableFilter_send_back").val(),
                              'operation': 'conditional_table',
                            },
                            type: "POST",
                            dataType: "json",
                            success: function (data) {
                              var label_column = data.label_columns
                            for (const [key, value] of Object.entries(label_column)) {
                              $("#basicfilter_condition_dropdown_schedule_send_back").append(
                                  '<li class="dropdown-item"><a href="javascript:void(0)" name=' +
                                  key + ' class="basic_filter_btn_schedule">' + value + '</a></li>');
                              }
                              var form_fields = data.form_fields
                              $('.basic_filter_btn_schedule').off('click').on('click', function () {
                                var name = $(this).attr('name');
                                var text = $(this).text();
                                var STRING = data.form_fields[name]
                                var rowCount=   $('.filter-table_schedule tr').length;
                                $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').append(STRING);

                                $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).attr('name',name)
                                $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).attr('data-position',rowCount)
                                let field_datatype= $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find('input').attr('type')

                                let change_select  =$('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html()
                                let change_select_fk  =$('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                                if(change_select){
                                  change_select = change_select.replace('<input','<select')
                                change_select = change_select + "</select>"
                                $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html(change_select)
                                $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("select[type='text']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                                }else if(change_select_fk){
                                change_select_fk = change_select_fk.replace('<input','<select')
                                change_select_fk = change_select_fk + "</select>"
                                $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html(change_select_fk)
                                $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("select[type='number'][data-type='ForeignKey']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                                }else if (['date','datetime-local','time'].includes(field_datatype)){
                                  $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='IN']`).remove()
                                  $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='NOT IN']`).remove()
                                }
                                $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(3).remove()
                                $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input").addClass('basic_table_valuer')
                                $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.select2bs4').removeAttr('onchange')

                                $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).addClass(`d-flex`)
                                $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).css({'text-align':'left'})
                                $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').css('width','25%')
                                $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(1).find('div').css('max-width','10em')

                                $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td:nth-child(1),td:nth-child(2)').find("select").each(function () {
                                  $(this).select2({width:'100%'});
                                })

                                $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').eq(-1).append(
                                        `
                                        <td class="dt-center" style="display:none">
                                        <div>
                                          <div style="max-width: 15em;">
                                        <select class="form-control select2bs4 basicfilter_curr_val" name=${name} data-dropdown_purpose="select_constant_val">
                                            <option value="" disabled selected>Select Variable</option>
                                            <option value="curr_user">Current User</option>
                                            <option value="curr_date">Current Date</option>
                                            <option value="curr_last_login_date">Current user's last login date</option>
                                            <option value="curr_firstname">Current user's first name</option>
                                            <option value="curr_lastname">Current user's last name</option>
                                            <option value="curr_email">Current user's email</option>
                                            <option value="curr_joined_date">Current user's joined date</option>
                                            <option value="curr_name">Current user's name</option>
                                            <option value="curr_last_pass_date">Current user's last password update date</option>
                                            <option value="curr_tenant">Current user's tenant</option>
                                        </select>
                                      </div>
                                        </div>
                                        </td>

                                        <td class="dt-center">
                                          <div class="" style="max-width:25em;">
                                          <input type="text" name=${name} class="form-control basicfilter_constraint" placeholder="Constraint name"/>
                                          </div>
                                        </td>

                                        <td class="dt-center">
                                          <div class="" style="max-width:25em;">
                                          <input type="text" name=${name} class="form-control basicfilter_ruleset" placeholder="Rule set"/>
                                          </div>
                                        </td>
                                        `
                                    )

                                  $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.select2bs4').select2({width:'100%',tags:true})

                                $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.select2bs4').on('change',function(){
                                  let in_operand = ['IN','NOT IN']
                                  let valuer = $(this).val()
                                  if(in_operand.includes(valuer) ==true){
                                    let change_select  =$('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html()
                                    let change_select_fk  =$('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                                    if(change_select){

                                    change_select = change_select.replace('<input','<select')
                                      change_select = change_select + "</select>"
                                      $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html(change_select)
                                  }
                                  let field_type = $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                                  if(['date','datetime-local','time'].includes(field_type) ==false){
                                      $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: true,tags:true,allowClear: false})
                                    $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find(".select2-selection--multiple").css({"max-height": "8rem", "overflow": "auto" })
                                    }

                                  }else{
                                    let change_select  =$('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html()
                                    if(change_select ){
                                      change_select = change_select.replace('<select','<input')
                                      change_select = change_select.replace('</select>','')
                                      if($('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").attr(`data-type`) != 'ForeignKey'){
                                        $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html(change_select)
                                        $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").removeClass('select2-hidden-accessible')
                                        $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find('span').remove('span')
                                      }else{
                                        $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                                      }
                                    }

                                    let field_type = $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                                    if(['date','datetime-local','time'].includes(field_type)==false){
                                      if($('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type') =="text"){
                                        $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                                      }
                                    }

                                  }
                                })
                                $('.remove_filter').on('click', removefilter);
                                function removefilter() {
                                  $(this).closest("tr").remove();

                                  $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule`).each(function(){
                                    var rowCount=   $('.filter-table_schedule tr').length;
                                    for(let rc=0;rc<rowCount;rc++){
                                      $('#basicfilter_items_schedule_send_back').find(`.filter-table_schedule`).find('tr').eq(rc).attr('data-position',rc)
                                    }

                                  })
                                }
                              });
                            },
                            error: function () {
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                            }
                          });
                        }
                      }
                  )

                  $("#saveBasicfilter_schedule_send_back").on('click',function(){
                    var basicfilter_condition_list = []
                    $('#basicfilter_items_schedule_send_back').find('.filter-table_schedule').find('tr').each(function(){
                      var table_details = {
                        table_name: $("#dynamicAttachmentPDFDataDropTableFilter_send_back").val(),
                        column_name: $(this).attr('name'),
                        condition:  $(this).find('td').eq(1).find('div').find('select').find('option:selected').val(),
                        input_value:$(this).find('td').eq(2).find('div').find('.basic_table_valuer').val(),
                        current_value: $(this).find('td').eq(3).find('div').find('.basicfilter_curr_val').val(),
                        constraint_name : $(this).find('td').eq(4).find('div').find('.basicfilter_constraint').val(),
                        rule_set : $(this).find('td').eq(5).find('div').find('.basicfilter_ruleset').val(),
                        btn_calling: $('#approvalMessageDynamicTableModal_send_back').attr("data-btn_calling"),
                        and_or: "AND",
                        cols_for_filter: $('#dynamicAttachmentPDFDataDropColumnsFilter_send_back').val()
                      }
                      basicfilter_condition_list.push(table_details )
                    })
                    $("#saveBasicfilter_schedule_send_back").attr('data-basicfilter-config',JSON.stringify(basicfilter_condition_list))
                    Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
                    $('#basicfilter_schedule_send_back').modal('hide')
                  })

          </script>
          <div class="col-12 form-group">
            <label for="approvalNotificationSubject_send_back">Subject:</label>
            <textarea id="approvalNotificationSubject_send_back" class="form-control" style="padding: 1em;"></textarea>
          </div>
          <br>
          <div class="col-12">
            <strong>Body:</strong>
          </div>
        <form>
          <ul class="nav nav-tabs rtf_notification_action_tab_send_back" id="rtf_action_tab_id_send_back" role="tablist">
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link active" id="Text-tab_send_back" data-bs-toggle="tab" data-bs-target="Text" type="button" role="tab" aria-controls="Text" aria-selected="true">Text Format</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link " id="Insert-tab_send_back" data-bs-toggle="tab" data-bs-target="Insert" type="button" role="tab" aria-controls="Insert" aria-selected="false">Insert</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="Form-tab_send_back" data-bs-toggle="tab" data-bs-target="Form" type="button" role="tab" aria-controls="Form" aria-selected="false">Form</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="Page-Layout-tab_send_back" data-bs-toggle="tab" data-bs-target="Page Layout" type="button" role="tab" aria-controls="Page Layout" aria-selected="false">Page Layout</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="insert-dynamic-content-tab_send_back" data-bs-toggle="tab" data-bs-target="Insert Dynamic Content" type="button" role="tab" aria-controls="Insert Dynamic Content" aria-selected="false">Insert Dynamic Content</button>
            </li>
            <button class="ml-auto btn btn-primary" id="insert_attachment_send_back" type="button" data-config='{}'><i class="fas fa-paperclip"></i></button>
          </ul>
          <textarea id="email_message_send_back" name="email_message_send_back">&nbsp;&nbsp;</textarea>
        </form>
        <script>
          CKEDITOR.replace('email_message_send_back',{height: 300});
          CKEDITOR.config.removePlugins = 'exportpdf';
          CKEDITOR.config.extraPlugins = 'autocorrect';
            var form_rtf = ['CreateDiv,Anchor,Language,About,PasteText,PasteFromWord,Find,Replace,SelectAll,Scayt,Blockquote,Outdent,Indent,BulletedList,NumberedList,CopyFormatting,RemoveFormat,Bold,Italic,Underline,Strike,Subscript,Superscript,TextColor,BidiLtr,BidiRtl,Templates,Link,Unlink,Source,Save,NewPage,ExportPdf,Preview,Print,Styles,Format,Font,FontSize,BGColor,ShowBlocks,Maximize,JustifyLeft,JustifyCenter,JustifyRight,JustifyBlock,HorizontalRule,SpecialChar,PageBreak,Iframe,Flash,Table,Image,Smiley'];

            var home_rtf =['Source,Save,Templates,CreateDiv,Unlink,Anchor,Language,Link,Image,Flash,Table,HorizontalRule,SpecialChar,PageBreak,Iframe,ShowBlocks,Maximize,About,Print,Preview,ExportPdf,NewPage,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Smiley'];
            var tools_rtf =['Flash,About,Templates,Cut,Copy,Paste,PasteText,PasteFromWord,Redo,Undo,Find,Replace,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,Italic,Underline,Strike,Subscript,Superscript,CopyFormatting,RemoveFormat,Outdent,NumberedList,BulletedList,Indent,Blockquote,JustifyLeft,CreateDiv,JustifyCenter,JustifyRight,JustifyBlock,Language,BidiRtl,BidiLtr,Link,Unlink,Anchor,Image,Table,HorizontalRule,Smiley,SpecialChar,PageBreak,Iframe,Styles,Format,Font,FontSize,TextColor,BGColor'];
            var insert_rtf1 =['Source,Save,NewPage,ExportPdf,Preview,Print,Templates,PasteText,PasteFromWord,Replace,Find,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,BidiLtr,BidiRtl,Language,JustifyRight,JustifyBlock,JustifyCenter,CreateDiv,Indent,BulletedList,NumberedList,Outdent,Blockquote,JustifyLeft,CopyFormatting,RemoveFormat,Styles,Format,Font,FontSize,TextColor,BGColor,ShowBlocks,Maximize,About,Italic,Underline,Strike,Subscript,Superscript'];
            $(".rtf_notification_action_tab_send_back").find('li').each(function(){

              $(this).find('button').on('click',function(){

                $(".rtf_notification_action_tab_send_back").find('li').find('button').removeClass('active')
                $(this).addClass('active')
                if($(this).attr('data-bs-target') == "Form"){
                  var editor = CKEDITOR.instances['email_message_send_back'];
                  var editor_data = CKEDITOR.instances['email_message_send_back'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_send_back',{height: 300,removeButtons:form_rtf[0], extraPlugins: 'autocorrect'});
                  setTimeout(()=>{CKEDITOR.instances['email_message_send_back'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                }
                else if ($(this).attr('data-bs-target') == "Text"){
                  var editor = CKEDITOR.instances['email_message_send_back'];
                  var editor_data = CKEDITOR.instances['email_message_send_back'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_send_back',{height: 300,removeButtons:home_rtf[0] });
                  setTimeout(()=>{CKEDITOR.instances['email_message_send_back'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                }
                else if ($(this).attr('data-bs-target') == "Insert"){

                  var editor = CKEDITOR.instances['email_message_send_back'];
                  var editor_data = CKEDITOR.instances['email_message_send_back'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_send_back',{height: 300,removeButtons: insert_rtf1[0] });
                  setTimeout(()=>{CKEDITOR.instances['email_message_send_back'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                  CKEDITOR.instances['email_message_send_back'].addCommand('addCustomButtons', {
                    exec: function(edt){
                      $('#approval_notification_dialog_send_back').modal('hide');
                      $('#approvalCustomButtonModal_send_back').modal('show');
                      $('#saveApprovalCustomButton_send_back').off('click').on('click', function(){
                        var buttonText = $('#selectButtonText_send_back').val();
                        var buttonType = $('#selectButtonType_send_back').val();
                        var buttonTextColor = $('#selectButtonTextColor_send_back').val();
                        var buttonTextBackgroundColor = $('#selectButtonTextBackgroundColor_send_back').val();
                        var buttonBorderRadius = $('#selectButtonBorderRadius_send_back').val();
                        edt.insertHtml(`<button type='${buttonType}' style='color:${buttonTextColor};background-color:${buttonTextBackgroundColor};border-radius:${buttonBorderRadius}px;'>${buttonText}</button>`, mode="unfiltered_html");
                      });
                    },
                    canUndo : true,
                    canEdit : true
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('AddCustomButton', {
                      label: "Custom Buttons",
                      command: 'addCustomButtons',
                      text: 'Custom Buttons',
                      icon: "{% static 'images/Base_theme/button.png' %}",
                      toolbar: "insert",
                  });
                }
                else if ($(this).attr('data-bs-target') == "Page Layout"){
                  var editor = CKEDITOR.instances['email_message_send_back'];
                  var editor_data = CKEDITOR.instances['email_message_send_back'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_send_back',{height: 300,removeButtons:tools_rtf[0] });
                  setTimeout(()=>{CKEDITOR.instances['email_message_send_back'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                } else if ($(this).attr('data-bs-target') == "Insert Dynamic Content"){
                  var editor = CKEDITOR.instances['email_message_send_back'];
                  var editor_data = CKEDITOR.instances['email_message_send_back'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_send_back',{height: 300,removeButtons:form_rtf[0]+home_rtf[0]+insert_rtf1[0]+tools_rtf[0]});
                  setTimeout(()=>{CKEDITOR.instances['email_message_send_back'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                  CKEDITOR.instances['email_message_send_back'].addCommand('addUserCreatingTransaction', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionCreatedBy}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('UserCTButton', {
                      label: "Transaction Created By",
                      command: 'addUserCreatingTransaction',
                      text: 'Transaction Created By',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });
                  CKEDITOR.instances['email_message_send_back'].addCommand('addApproversOfTransaction', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionApprovers}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('ApproverTButton', {
                      label: "Transaction Approver(s)",
                      command: 'addApproversOfTransaction',
                      text: 'Transaction Approver(s)',
                      icon: "{% static 'images/Base_theme/users.png' %}",
                  });
                  CKEDITOR.instances['email_message_send_back'].addCommand('addUserCreatingTransaction-Name', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionCreatedBy-Name}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('UserCTButton-Name', {
                      label: "Transaction Created By (Name)",
                      command: 'addUserCreatingTransaction-Name',
                      text: 'Transaction Created By (Name)',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });
                  CKEDITOR.instances['email_message_send_back'].addCommand('addApproversOfTransaction-Name', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionApprovers-Name}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('ApproverTButton-Name', {
                      label: "Transaction Approver(s) Name",
                      command: 'addApproversOfTransaction-Name',
                      text: 'Transaction Approver(s) Name',
                      icon: "{% static 'images/Base_theme/users.png' %}",
                  });
                  CKEDITOR.instances['email_message_send_back'].addCommand('addTransactionTime', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionTime}</span>`);
                    },
                    canUndo : true
                  });

                  CKEDITOR.instances['email_message_send_back'].addCommand('addApprovalLevelConfig', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApprovalLevelConfig}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('ApprovalLevelConfig', {
                      label: "Approval Level Config",
                      command: 'addApprovalLevelConfig',
                      text: 'Approval Level Config',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });

                  CKEDITOR.instances['email_message_send_back'].addCommand('addApproverAuditLog', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApproverAuditLog}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('ApproverAuditLog', {
                      label: "Approver Audit Log",
                      command: 'addApproverAuditLog',
                      text: 'Approver Audit Log',
                      icon: "{% static 'images/Base_theme/users.png' %}",
                  });

                  CKEDITOR.instances['email_message_send_back'].addCommand('addApprovalType', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApprovalType}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('ApprovalType', {
                      label: "Approval Type",
                      command: 'addApprovalType',
                      text: 'Approval Type',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });

                  CKEDITOR.instances['email_message_send_back'].addCommand('addApproveButton', {
                    exec: function(edt){
                      edt.insertHtml(`<a href="{ApproveButton}">Approve</a>`, mode="unfiltered_html");
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('ApproveButton', {
                      label: "Approve Transaction",
                      command: 'addApproveButton',
                      text: 'Approve Transaction',
                      icon: "{% static 'images/Base_theme/approved_2.png' %}",
                  });
                  CKEDITOR.instances['email_message_send_back'].addCommand('addRejectButton', {
                    exec: function(edt){
                      edt.insertHtml(`<a href="{RejectButton}">Reject</a>`, mode="unfiltered_html");
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('RejectButton', {
                      label: "Reject Transaction",
                      command: 'addRejectButton',
                      text: 'Reject Transaction',
                      icon: "{% static 'images/Base_theme/disapproved.png' %}",
                  });
                  CKEDITOR.instances['email_message_send_back'].addCommand('addCommentSendBack', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApprovalSentBackComment}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('TransactionApproverCommentButton', {
                      label: "Transaction Approver's Comment",
                      command: 'addCommentSendBack',
                      text: "Transaction Approver's Comment",
                      icon: "{% static 'images/Base_theme/feedback.png' %}",
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('TransactionTimeButton', {
                      label: "Time Of Transaction",
                      command: 'addTransactionTime',
                      text: 'Time Of Transaction',
                      icon: "{% static 'images/Base_theme/clock.png' %}",
                  });
                  CKEDITOR.instances['email_message_send_back'].addCommand('addTransaction', {
                    exec: function(edt){
                      $('#approval_notification_dialog_send_back').modal('hide')
                      $('#approvalSubjectDynamicTable_send_back').modal('hide')
                      $('#approvalMessageDynamicTableModal_send_back').attr("data-modal","approval_notification_dialog_send_back")
                      $('#approvalMessageDynamicTableModal_send_back').modal('show');
                      $('#selectTableAMDT_send_back').off('select2:select').on('select2:select', function(){
                        $.ajax({
                          url: window.location.pathname,
                          async: false,
                          data: {
                            'operation': 'fetchColumnsList',
                            'table_name': $(this).val(),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            $('#selectColumnsAMDT_send_back').empty();
                            for (i in data['field_list']) {
                              $("#selectColumnsAMDT_send_back").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                            }
                          }, error: ()=>{
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        });
                      });
                      $('#saveApprovalMessageDynamicTable_send_back').off('click').on('click', function(){
                        var columnsList = $('#selectColumnsAMDT_send_back').val();
                        $('#approvalMessageDynamicTableModal_send_back').modal('hide');
                        var tableHTML = `
                        <table cellspacing="1" cellpadding="1" class="table table-bordered table" style="border:1.5px solid black;max-height:100vw;overlow-x:auto;">
                          <thead style="border:1px solid black"><tr>
                          `;
                        var thHTML = '';
                        var valueHTML = "<tbody style='border:1px solid black'><tr style='border:1px solid black;'>";
                        for (i of columnsList) {
                          thHTML += `<th style='border:1px solid black;text-align:center;'>{VerboseName-${i}}</th>`
                          valueHTML += `<td style='border:1px solid black;text-align:center;'>{Value-${i}}</td>`
                        }
                        thHTML += "</tr></thead>"
                        valueHTML += "</tr></tbody>"
                        tableHTML += thHTML
                        tableHTML += valueHTML
                        tableHTML += `</table>`
                        $('#approval_notification_dialog_send_back').modal('show')
                        edt.insertHtml(tableHTML, mode="unfiltered_html");
                      })
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('RecordSentForApprovalButton', {
                      label: "Transaction Data Table",
                      command: 'addTransaction',
                      text: 'Transaction Data Table',
                      icon: "{% static 'images/Base_theme/datasheet.png' %}",
                  });
                  CKEDITOR.instances['email_message_send_back'].addCommand('addTransactionValue', {
                    exec: function(edt){
                      $('#approval_notification_dialog_send_back').modal('hide')
                      $('#approvalSubjectDynamicTable_send_back').modal('hide')
                      $('#approvalMessageDynamicTableModal_send_back').attr("data-modal","approval_notification_dialog_send_back")
                      $('#approvalMessageDynamicTableModal_send_back').modal('show');
                      $('#selectTableAMDT_send_back').off('select2:select').on('select2:select', function(){
                        $.ajax({
                          url: window.location.pathname,
                          async: false,
                          data: {
                            'operation': 'fetchColumnsList',
                            'table_name': $(this).val(),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            $('#selectColumnsAMDT_send_back').empty();
                            for (i in data['field_list']) {
                              $("#selectColumnsAMDT_send_back").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                            }
                          }, error: ()=>{
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        });
                      });
                      $('#saveApprovalMessageDynamicTable_send_back').on('click', function(){
                        var columnsList = $('#selectColumnsAMDT_send_back').val();
                        $('#approvalMessageDynamicTableModal_send_back').modal('hide');
                        $('#approval_notification_dialog_send_back').modal('show')
                        for (i of columnsList) {
                          edt.insertHtml(`<span>{Value-${i}}</span>`);
                        }
                      })
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_send_back'].ui.addButton('RecordValuesButton', {
                      label: "Field Values From The Transaction",
                      command: 'addTransactionValue',
                      text: 'Field Values From The Transaction',
                      icon: "{% static 'images/Base_theme/sum.png' %}",
                  });

                }
              })

            })
          </script>
          <script>
            $('#TransactionCreatedBy_send_back').on('click', function(){
              $('#approvalNotificationSubject_send_back').val($('#approvalNotificationSubject_send_back').val() + ' {TransactionCreatedBy_send_back}');
            });
            $('#TransactionTime_send_back').on('click', function(){
              $('#approvalNotificationSubject_send_back').val($('#approvalNotificationSubject_send_back').val() + ' {TransactionTime_send_back}');
            });
            $('#TransactionApprovers_send_back').on('click', function(){
              $('#approvalNotificationSubject_send_back').val($('#approvalNotificationSubject_send_back').val() + ' {TransactionApprovers_send_back}');
            });
          </script>
          <script>
            $('#selectAttachmentType_send_back').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'static') {
                $('#uploadAttachmentContainer_send_back').css('display', 'block');
                $('#dynamicAttachmentContainer_send_back').css('display', 'none');
              } else if ($(this).val() == 'dynamic') {
                $('#uploadAttachmentContainer_send_back').css('display', 'none');
                $('#dynamicAttachmentContainer_send_back').css('display', 'block');
              } else {
                $('#uploadAttachmentContainer_send_back').css('display', 'none');
                $('#dynamicAttachmentContainer_send_back').css('display', 'none');
              }
            });
            $('#selectDynamicAttachment_send_back').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'pdf') {
                $('#dynamicAttachmentPDFContainer_send_back').css('display', 'block');
              } else {
                $('#dynamicAttachmentPDFContainer_send_back').css('display', 'none');
                $('.filterbtnSchedule_send_back').css('display', 'flex')
              }
            });
            $('#dynamicAttachmentPDFAddLogo_send_back').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'yes') {
                $('#dynamicAttachmentPDFLogoPlacementContainer_send_back').css('display', 'block');
                $('#dynamicAttachmentPDFLogoContainer_send_back').css('display', 'block');
              } else {
                $('#dynamicAttachmentPDFLogoPlacementContainer_send_back').css('display', 'none');
                $('#dynamicAttachmentPDFLogoContainer_send_back').css('display', 'none');
              }
            });
            $('#dynamicAttachmentPDFCustomizeStyle_send_back').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'yes') {
                $('#dynamicAttachmentRowHeightContainer_send_back').css('display', 'block');
                $('#dynamicAttachmentColumnWidthContainer_send_back').css('display', 'block');
                $('#dynamicAttachmentPDFHeaderBGColorContainer_send_back').css('display', 'block');
                $('#dynamicAttachmentPDFHeaderTextColorContainer_send_back').css('display', 'block');
                $('#dynamicAttachmentPDFCellBGColorContainer_send_back').css('display', 'block');
                $('#dynamicAttachmentPDFCellTextColorContainer_send_back').css('display', 'block');
                $('#columnAlignmentGlobalHContainerAN_send_back').css('display', 'block');
                $('#columnAlignmentGlobalCContainerAN_send_back').css('display', 'block');
                $('#columnAlignmentTableContainerAN_send_back').css('display', 'block');
                $('#columnAlignmentColumnContainerAN_send_back').css('display', 'block');
                $('#columnAlignmentCustomizeContainerAN_send_back').css('display', 'block');

              } else {
                $('#dynamicAttachmentRowHeightContainer_send_back').css('display', 'none');
                $('#dynamicAttachmentColumnWidthContainer_send_back').css('display', 'none');
                $('#dynamicAttachmentPDFHeaderBGColorContainer_send_back').css('display', 'none');
                $('#dynamicAttachmentPDFHeaderTextColorContainer_send_back').css('display', 'none');
                $('#dynamicAttachmentPDFCellBGColorContainer_send_back').css('display', 'none');
                $('#dynamicAttachmentPDFCellTextColorContainer_send_back').css('display', 'none');
                $('#columnAlignmentGlobalHContainerAN_send_back').css('display', 'none');
                $('#columnAlignmentGlobalCContainerAN_send_back').css('display', 'none');
                $('#columnAlignmentTableContainerAN_send_back').css('display', 'none');
                $('#columnAlignmentColumnContainerAN_send_back').css('display', 'none');
                $('#columnAlignmentCustomizeContainerAN_send_back').css('display', 'none');
              }
            });
            $('#dynamicAttachmentPDFTableColumnWidth_send_back').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'manual') {
                $('#dynamicAttachmentColumnWidthTableContainer_send_back').css('display', 'block');
                $('#dynamicAttachmentColumnWidthFieldContainer_send_back').css('display', 'block');
              } else {
                $('#dynamicAttachmentColumnWidthTableContainer_send_back').css('display', 'none');
                $('#dynamicAttachmentColumnWidthFieldContainer_send_back').css('display', 'none');
              }
            });
            $('#dynamicAttachmentPDFTableColumnWidthTable_send_back').off('select2:select').on('select2:select', function(){
              if ($(this).val()) {
                $.ajax({
                  url: window.location.pathname,
                  async: false,
                  data: {
                    'operation': 'fetchColumnsList',
                    'table_name': $(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#dynamicAttachmentColumnWidthFieldContainer_send_back').empty();
                    $("#dynamicAttachmentColumnWidthFieldContainer_send_back").append(`<div class='form-inline'><label class='col-7'>Field Name</label><label class='col-5'>Width</label></div>`);
                    for (i in data['field_list']) {
                      $("#dynamicAttachmentColumnWidthFieldContainer_send_back").append(`<div class='form-inline'><label class="col-7" data-value="${i}">${data['field_list'][i]}</label><input type="number" class="numberinput form-control col-5" step="5" data-column="${i}"></div>`);
                    }
                    if ($('#dynamicAttachmentColumnWidthFieldContainer_send_back').attr('data-config')) {
                      var existingConfig = JSON.parse($('#dynamicAttachmentColumnWidthFieldContainer_send_back').attr('data-config'));
                      for (i in existingConfig) {
                        $('#dynamicAttachmentColumnWidthFieldContainer_send_back').find(`input[data-column="${i}"]`).val(existingConfig[i]).trigger('change');
                      }
                    }
                  }, error: ()=>{
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                });
              } else {
                $('#dynamicAttachmentColumnWidthFieldContainer_send_back').empty();
              }
            });
            $('#selectTableForPDFANColAlignment_send_back').off('select2:select').on('select2:select', function(){
              if ($("#dynamicAttachmentPDFDataLayoutOption_send_back").val() == "horizontal") {
                if ($(this).val()) {
                  $.ajax({
                    url: window.location.pathname,
                    async: false,
                    data: {
                      'operation': 'fetchColumnsList',
                      'table_name': $(this).val(),
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                      $('#selectColumnForPDFANColAlignment_send_back').empty();
                      for (i in data['field_list']) {
                        $("#selectColumnForPDFANColAlignment_send_back").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                      }
                    }, error: ()=>{
                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
                  });
                } else {
                  $('#selectColumnForPDFANColAlignment_send_back').empty();
                }
              } else {
                $("#selectColumnForPDFANColAlignment_send_back").empty();
                $("#selectColumnForPDFANColAlignment_send_back").append('<option val="" disabled selected>Select Column</option>');
                $("#selectColumnForPDFANColAlignment_send_back").append('<option val="Field">Field</option>');
                $("#selectColumnForPDFANColAlignment_send_back").append('<option val="Value">Value</option>');
              }
            });
            $('#insert_attachment_send_back').off('click').on('click', function(){
              $('#approval_notification_dialog_send_back').modal('hide');
              $("#dynamicAttachmentPDFTransData_send_back").parent().css("display","block")
              $("#addUserUploadedFilesAsAttachment_send_back").parent().css("display","block")
              $(".filterbtnSchedule").css("display","none")
              $('#approvalNotificationAttachmentModal_send_back').modal('show');
              $('#approvalNotificationAttachmentModal_send_back').attr('data-calling','decision')
              $('#saveApprovalAttachments_send_back').off('click').on('click', function(){
                var attachmentConfig = {};
                if ($('#selectAttachmentType_send_back').val() == 'static') {
                  attachmentConfig['attachment_type'] = 'static';
                  var fileInput = document.getElementById('uploadApprovalAttachments');
                  var fileNames = [];
                  for (file of fileInput.files){
                    fileNames.push(file.name);
                  }
                  attachmentConfig['parameter'] = fileNames;
                  let formData = new FormData($("#approvalAttachmentForm_send_back")[0]);
                  formData.append("operation", "saveApprovalAttachmentFiles");
                  $.ajax({
                    url:window.location.pathname,
                    data: formData,
                    type: 'POST',
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: function (data) {

                    },
                    error: ()=>{
                        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
                  });
                } else if ($('#selectAttachmentType_send_back').val() == 'dynamic') {
                  attachmentConfig['attachment_type'] = 'dynamic';
                  attachmentConfig['parameter'] = $('#selectDynamicAttachment_send_back').val();
                  var additionalConfig = {};
                  if ($('#selectDynamicAttachment_send_back').val() == 'pdf') {
                    var layoutOption = $('#dynamicAttachmentPDFDataLayoutOption_send_back').val();
                    var addLogo = $('#dynamicAttachmentPDFAddLogo_send_back').val();
                    var customizeStyle = $('#dynamicAttachmentPDFCustomizeStyle_send_back').val();
                    var logoConfig = {};
                    var styleConfig = {};
                    var droptable = $("#dynamicAttachmentPDFDataDropTable_send_back").val()
                    var transDataCols = $("#dynamicAttachmentPDFTransData_send_back").val()
                    var dropcolumns = $("#dynamicAttachmentPDFDataDropColumns_send_back").val()
                    if (addLogo == 'yes') {
                      logoConfig = {
                        add_logo: addLogo,
                        placement: $('#dynamicAttachmentPDFLogoPlacement_send_back').val(),
                      };
                      var fileInput = document.getElementById('dynamicAttachmentsPDFLogo_send_back');
                      if (fileInput.files.length > 0) {
                        var fileNames = fileInput.files[0].name;
                        logoConfig['parameter'] = fileNames;
                        let formData = new FormData($("#approvalAttachmentForm_send_back")[0]);
                        formData.append("operation", "saveApprovalAttachmentPDFLogo");

                        $.ajax({
                          url:window.location.pathname,
                          data: formData,
                          type: 'POST',
                          cache: false,
                          contentType: false,
                          processData: false,
                          success: function (data) {

                          },
                          error: ()=>{
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        });
                      } else if ($("#dynamicAttachmentsPDFLogo").siblings(".custom-file-label").hasClass("selected")) {
                        logoConfig['parameter'] = $("#dynamicAttachmentsPDFLogo").siblings(".custom-file-label").html();
                      } else {

                      }
                    }
                    if (customizeStyle == 'yes') {
                      styleConfig = {
                        customize_style: customizeStyle,
                        header_bg_color: $('#dynamicAttachmentPDFHeaderBGColor_send_back').val(),
                        header_text_color: $('#dynamicAttachmentPDFHeaderTextColor_send_back').val(),
                        cell_bg_color: $('#dynamicAttachmentPDFCellBGColor_send_back').val(),
                        cell_text_color: $('#dynamicAttachmentPDFCellTextColor_send_back').val(),
                        row_height: $('#dynamicAttachmentPDFTableRowHeight_send_back').val(),
                        customize_column_width: $('#dynamicAttachmentPDFTableColumnWidth_send_back').val(),
                        static_column_width: $('#dynamicAttachmentPDFTableColumnStaticWidth_send_back').val(),
                      };
                      var columnWidthConfig = {};
                      if ($('#dynamicAttachmentPDFTableColumnWidth_send_back').val() == 'manual') {
                        if ($('#dynamicAttachmentPDFTableColumnWidthTable_send_back').val()) {
                          columnWidthConfig['table'] = $('#dynamicAttachmentPDFTableColumnWidthTable_send_back').val();
                          var customColumnWidth = {};
                          $('#dynamicAttachmentColumnWidthFieldContainer_send_back').find('input.col-5').each(function(){
                            if ($(this).val()) {
                              customColumnWidth[$(this).attr('data-column')] = $(this).val();
                            }
                          });
                          columnWidthConfig['field_config'] = customColumnWidth;
                        }
                      }
                      styleConfig['custom_column_field_level_config'] = columnWidthConfig;
                      var pdfColumnAlignmentConfig = {};
                      pdfColumnAlignmentConfig['global_header'] = $('#selectGlobalHeaderPDFANColumnAlignment_send_back').val();
                      pdfColumnAlignmentConfig['global_content'] = $('#selectGlobalContentPDFANColumnAlignment_send_back').val();
                      var inidividualFieldConfig = {};
                      $('#pdfColumnAlignmentContainerAN_send_back').find('.row.col-12').each(function(){
                        var fieldName = $(this).find('.col-4').eq(0).find('strong').attr('data-value');
                        var headerAlignment = $(this).find('.col-4').eq(1).find('.header').val();
                        var contentAlignment = $(this).find('.col-4').eq(2).find('.content').val();
                        inidividualFieldConfig[fieldName] = {header: headerAlignment, content: contentAlignment};
                      });
                      pdfColumnAlignmentConfig['field_level_config'] = inidividualFieldConfig;
                      styleConfig['column_alignment'] = pdfColumnAlignmentConfig;
                    }
                    additionalConfig['logoConfig'] = logoConfig;
                    additionalConfig['styleConfig'] = styleConfig;
                    additionalConfig['layoutOption'] = layoutOption;
                    additionalConfig["droptable"] = droptable;
                    additionalConfig["dropcolumns"] = dropcolumns;
                    additionalConfig["transDataCols"] = transDataCols;
                  }
                  attachmentConfig['additional_config'] = additionalConfig;
                }
                $('#insert_attachment_send_back').attr('data-config', JSON.stringify(attachmentConfig));
                closeAttachment()
              });
              $('#resetApprovalAttachments_send_back').off('click').on('click', function(){
                $('#uploadApprovalAttachments_send_back').val('').trigger('change');
                $('#insert_attachment_send_back').attr('data-config', JSON.stringify({}));
              });
            });
          </script>
          </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="approval_notification_dialog_delegate"  role="dialog" data-focus="false" aria-labelledby="approval_notification_dialog_delegate" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="NotextLabel_delegate">Compose Notification message for Approval Delegation</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="placeholder-buttons">
            <button type="button" class="btn btn-primary" id="TransactionCreatedBy_delegate">Transaction Created By</button>
            <button type="button" class="btn btn-primary" id="TransactionTime_delegate">Transaction Time</button>
            <button type="button" class="btn btn-primary" id="TransactionApprovers_delegate">Transaction Approvers</button>
            <button type="button" class="btn btn-primary" id="TransactionValueNotification_delegate" onclick="openTableModal_delegate('approvalNotificationSubject_delegate','approval_notification_dialog_delegate')">Transaction Value</button>
          </div>
          <script>
            function openTableModal_delegate(element, modal){
              if(modal == "approval_notification_dialog_delegate"){
                $('#approval_notification_dialog_delegate').modal('hide')
                $("#approvalSubjectDynamicTable_delegate").attr("data-modal","approval_notification_dialog_delegate")
              }else if(modal == "schedulerModal_delegate"){
                $('#schedulerModal_delegate').modal('hide')
                $("#approvalSubjectDynamicTable_delegate").attr("data-modal","schedulerModal_delegate")
              }
              else{
                $('#approval_decision_dialog').modal('hide')
                $("#approvalSubjectDynamicTable_delegate").attr("data-modal","approval_decision_dialog_delegate")
              }

              $('#approvalSubjectDynamicTable_delegate').modal('show');
              $("#saveSubjectTable_delegate").attr("onclick",`appendMessage_delegate(${element},${modal})`)
            }

            function closeDynamic_delegate(){
              calling_modal = $('#approvalSubjectDynamicTable_delegate').attr("data-modal")
              $(`#${calling_modal}`).modal('show')
              $('#approvalSubjectDynamicTable_delegate').modal('hide');
            }

            function closeDynamicNot_delegate(){
              calling_modal = $('#approvalMessageDynamicTableModal_delegate').attr("data-modal")
              $(`#${calling_modal}`).modal('show')
              $('#approvalMessageDynamicTableModal_delegate').modal('hide');
            }

            $('#dynamicAttachmentPDFDataDropTable_delegate').off('select2:select').on('select2:select', function(){
              if($(this).val()){

                $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'dropFieldList',
                    'tableName':$(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#dynamicAttachmentPDFDataDropColumns_delegate').empty()
                    for (var i = 0; i < data.fieldList.length; i++) {
                          $('#dynamicAttachmentPDFDataDropColumns_delegate').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                        }
                      data_reload = $('#dynamicAttachmentPDFDataDropColumns_delegate').attr("data-data")
                      if(data_reload){
                        data_reload = JSON.parse(data_reload)
                        $('#dynamicAttachmentPDFDataDropColumns_delegate').val(data_reload).trigger('change')
                        $('#dynamicAttachmentPDFDataDropColumns_delegate').removeAttr("data-data")
                      }
                    },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              }else{
                $('#dynamicAttachmentPDFDataDropColumns_delegate').empty()
              }
            })

            $('#dynamicAttachmentPDFDataDropTableFilter_delegate').off('select2:select').on('select2:select', function(){
              if($(this).val()){

                $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'dropFieldList',
                    'tableName':$(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#dynamicAttachmentPDFDataDropColumnsFilter_delegate').empty()
                    for (var i = 0; i < data.fieldList.length; i++) {
                          $('#dynamicAttachmentPDFDataDropColumnsFilter_delegate').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                        }
                      data_reload = $('#dynamicAttachmentPDFDataDropColumnsFilter_delegate').attr("data-data")
                      if(data_reload){
                        data_reload = JSON.parse(data_reload)
                        $('#dynamicAttachmentPDFDataDropColumnsFilter_delegate').val(data_reload).trigger('change')
                        $('#dynamicAttachmentPDFDataDropColumnsFilter_delegate').removeAttr("data-data")
                      }
                    },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              }else{
                $('#dynamicAttachmentPDFDataDropColumnsFilter_delegate').empty()
              }
            })


            $('#selectTableSubject_delegate').off('select2:select').on('select2:select', function(){
              $.ajax({
                url: window.location.pathname,
                async: false,
                data: {
                  'operation': 'fetchColumnsList',
                  'table_name': $(this).val(),
                },
                type: "POST",
                dataType: "json",
                success: function (data) {
                  $('#selectColumnsSubject_delegate').empty();
                  for (i in data['field_list']) {
                    $("#selectColumnsSubject_delegate").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                  }
                }, error: ()=>{
                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                }
              });
            });

            function appendMessage_delegate(textarea,modal){
              var columnsList = $('#selectColumnsSubject_delegate').val();
              $('#approvalMessageDynamicTableModal_delegate').modal('hide');
              if(modal.id == "approval_notification_dialog_delegate"){
                $('#approval_notification_dialog_delegate').modal('show')
              }else if(modal.id == "schedulerModal_delegate"){
                $('#schedulerModal_delegate').modal('show')
              }
              else{
                $('#approval_decision_dialog_delegate').modal('show')
              }

              for (i of columnsList) {
                textarea.value = textarea.value +` {Value-${i}}`
              }
            }


            $("#filterAppNotBtn_delegate").on('click',function(){
                   let basicfilter_config =  $("#saveBasicfilter_schedule_delegate").attr('data-basicfilter-config')
                   if(basicfilter_config && basicfilter_config!="" && basicfilter_config!="[]"){
                    basicfilter_config = JSON.parse(basicfilter_config)
                    $(document).find('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').empty()
                    if(basicfilter_config.length >0){
                      let current_table_name = $('#dynamicAttachmentPDFDataDropTableFilter_delegate').val()
                      for(let i=0;i<basicfilter_config.length;i++){

                        let column_name = basicfilter_config[i]['column_name']
                        let condition_name= basicfilter_config[i]['condition']
                        let input_value= basicfilter_config[i]['input_value']
                        if(basicfilter_config[i].hasOwnProperty('current_value')){
                             curr_value = basicfilter_config[i]['current_value']
                          }else{
                             curr_value = ""
                          }
                        if(basicfilter_config[i].hasOwnProperty('constraint_name')){
                            constraint_name = basicfilter_config[i]['constraint_name']
                        }else{
                            constraint_name = ""
                        }
                        if(basicfilter_config[i].hasOwnProperty('rule_set')){
                            rule_set = basicfilter_config[i]['rule_set']
                        }else{
                            rule_set = ""
                        }
                        if(basicfilter_config[i]['table_name'] ==current_table_name ){
                          $(document).find("#basicfilter_condition_dropdown_schedule").find('.dropdown-item').find(`a[name='${column_name}']`).click()
                          let current_div = $(document).find('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(2).find('div')
                          $(document).find('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(3).find('.basicfilter_curr_val').val(curr_value).trigger('change')
                          $(document).find('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(1).find('div').find('select').val(condition_name).trigger('change')
                          $(document).find('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(4).find('.basicfilter_constraint').val(constraint_name).trigger('change')
                          $(document).find('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(5).find('.basicfilter_ruleset').val(rule_set).trigger('change')

                          if(typeof(input_value) === "string" && input_value !== null){
                            setTimeout(function(){
                          if(current_div.find(`select option[value='${input_value}']`).length <= 0){
                                current_div.find('select').append(`<option value='${input_value}'>${input_value}</option>`)
                               }
                            current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                         },1000)
                          }else if(typeof(input_value) === 'object' && input_value !== null){
                            if(current_div.find(`.basic_table_valuer`).attr('data-type')=="ForeignKey"){
                            setTimeout(function(){
                              current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                              },1000)
                          }else{
                            let output_html ="";
                            $.each(input_value, function(key,value){

                              if(current_div.find(`.basic_table_valuer option[value='${value}']`).length <= 0 && current_div.find(`.basic_table_valuer`).attr('data-type')!="ForeignKey"){
                                output_html+=`<option value='${value}' selected>${value}</option>`
                              }
                            })
                            default_in_cond_reload(i);
                            current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                            current_div.find('.basic_table_valuer').append(output_html)

                          }

                          }
                      }

                    }
                    }
                   }
                  })

                  $(document).find("#dynamicAttachmentPDFDataDropTableFilter_delegate").on("change", function(){
                        $('#basicfilter_items_schedule_delegate').find('.filter-table').empty()
                        $("#basicfilter_condition_dropdown_schedule_delegate").empty()

                        if($("#dynamicAttachmentPDFDataDropTableFilter_delegate").val()){
                          $.ajax({
                            url: window.location.pathname,
                            data: {
                              'model_name': $("#dynamicAttachmentPDFDataDropTableFilter_delegate").val(),
                              'operation': 'conditional_table',
                            },
                            type: "POST",
                            dataType: "json",
                            success: function (data) {
                              var label_column = data.label_columns
                            for (const [key, value] of Object.entries(label_column)) {
                              $("#basicfilter_condition_dropdown_schedule_delegate").append(
                                  '<li class="dropdown-item"><a href="javascript:void(0)" name=' +
                                  key + ' class="basic_filter_btn_schedule">' + value + '</a></li>');
                              }
                              var form_fields = data.form_fields
                              $('.basic_filter_btn_schedule').off('click').on('click', function () {
                                var name = $(this).attr('name');
                                var text = $(this).text();
                                var STRING = data.form_fields[name]
                                var rowCount=   $('.filter-table_schedule tr').length;
                                $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').append(STRING);

                                $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).attr('name',name)
                                $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).attr('data-position',rowCount)
                                let field_datatype= $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find('input').attr('type')

                                let change_select  =$('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html()
                                let change_select_fk  =$('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                                if(change_select){
                                  change_select = change_select.replace('<input','<select')
                                change_select = change_select + "</select>"
                                $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html(change_select)
                                $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("select[type='text']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                                }else if(change_select_fk){
                                change_select_fk = change_select_fk.replace('<input','<select')
                                change_select_fk = change_select_fk + "</select>"
                                $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html(change_select_fk)
                                $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("select[type='number'][data-type='ForeignKey']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                                }else if (['date','datetime-local','time'].includes(field_datatype)){
                                  $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='IN']`).remove()
                                  $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='NOT IN']`).remove()
                                }
                                $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(3).remove()
                                $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input").addClass('basic_table_valuer')
                                $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.select2bs4').removeAttr('onchange')

                                $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).addClass(`d-flex`)
                                $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).css({'text-align':'left'})
                                $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').css('width','25%')
                                $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(1).find('div').css('max-width','10em')

                                $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td:nth-child(1),td:nth-child(2)').find("select").each(function () {
                                  $(this).select2({width:'100%'});
                                })

                                $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').eq(-1).append(
                                        `
                                        <td class="dt-center" style="display:none">
                                        <div>
                                          <div style="max-width: 15em;">
                                        <select class="form-control select2bs4 basicfilter_curr_val" name=${name} data-dropdown_purpose="select_constant_val">
                                            <option value="" disabled selected>Select Variable</option>
                                            <option value="curr_user">Current User</option>
                                            <option value="curr_date">Current Date</option>
                                            <option value="curr_last_login_date">Current user's last login date</option>
                                            <option value="curr_firstname">Current user's first name</option>
                                            <option value="curr_lastname">Current user's last name</option>
                                            <option value="curr_email">Current user's email</option>
                                            <option value="curr_joined_date">Current user's joined date</option>
                                            <option value="curr_name">Current user's name</option>
                                            <option value="curr_last_pass_date">Current user's last password update date</option>
                                            <option value="curr_tenant">Current user's tenant</option>
                                        </select>
                                      </div>
                                        </div>
                                        </td>

                                        <td class="dt-center">
                                          <div class="" style="max-width:25em;">
                                          <input type="text" name=${name} class="form-control basicfilter_constraint" placeholder="Constraint name"/>
                                          </div>
                                        </td>

                                        <td class="dt-center">
                                          <div class="" style="max-width:25em;">
                                          <input type="text" name=${name} class="form-control basicfilter_ruleset" placeholder="Rule set"/>
                                          </div>
                                        </td>
                                        `
                                    )

                                  $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.select2bs4').select2({width:'100%',tags:true})

                                $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.select2bs4').on('change',function(){
                                  let in_operand = ['IN','NOT IN']
                                  let valuer = $(this).val()
                                  if(in_operand.includes(valuer) ==true){
                                    let change_select  =$('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html()
                                    let change_select_fk  =$('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                                    if(change_select){

                                    change_select = change_select.replace('<input','<select')
                                      change_select = change_select + "</select>"
                                      $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html(change_select)
                                  }
                                  let field_type = $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                                  if(['date','datetime-local','time'].includes(field_type) ==false){
                                      $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: true,tags:true,allowClear: false})
                                    $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find(".select2-selection--multiple").css({"max-height": "8rem", "overflow": "auto" })
                                    }

                                  }else{
                                    let change_select  =$('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html()
                                    if(change_select ){
                                      change_select = change_select.replace('<select','<input')
                                      change_select = change_select.replace('</select>','')
                                      if($('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").attr(`data-type`) != 'ForeignKey'){
                                        $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html(change_select)
                                        $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").removeClass('select2-hidden-accessible')
                                        $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find('span').remove('span')
                                      }else{
                                        $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                                      }
                                    }

                                    let field_type = $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                                    if(['date','datetime-local','time'].includes(field_type)==false){
                                      if($('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type') =="text"){
                                        $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                                      }
                                    }

                                  }
                                })
                                $('.remove_filter').on('click', removefilter);
                                function removefilter() {
                                  $(this).closest("tr").remove();

                                  $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule`).each(function(){
                                    var rowCount=   $('.filter-table_schedule tr').length;
                                    for(let rc=0;rc<rowCount;rc++){
                                      $('#basicfilter_items_schedule_delegate').find(`.filter-table_schedule`).find('tr').eq(rc).attr('data-position',rc)
                                    }

                                  })
                                }
                              });
                            },
                            error: function () {
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                            }
                          });
                        }
                      }
                  )

                  $("#saveBasicfilter_schedule_delegate").on('click',function(){
                    var basicfilter_condition_list = []
                    $('#basicfilter_items_schedule_delegate').find('.filter-table_schedule').find('tr').each(function(){
                      var table_details = {
                        table_name: $("#dynamicAttachmentPDFDataDropTableFilter_delegate").val(),
                        column_name: $(this).attr('name'),
                        condition:  $(this).find('td').eq(1).find('div').find('select').find('option:selected').val(),
                        input_value:$(this).find('td').eq(2).find('div').find('.basic_table_valuer').val(),
                        current_value: $(this).find('td').eq(3).find('div').find('.basicfilter_curr_val').val(),
                        constraint_name : $(this).find('td').eq(4).find('div').find('.basicfilter_constraint').val(),
                        rule_set : $(this).find('td').eq(5).find('div').find('.basicfilter_ruleset').val(),
                        btn_calling: $('#approvalMessageDynamicTableModal_delegate').attr("data-btn_calling"),
                        and_or: "AND",
                        cols_for_filter: $('#dynamicAttachmentPDFDataDropColumnsFilter_delegate').val()
                      }
                      basicfilter_condition_list.push(table_details )
                    })
                    $("#saveBasicfilter_schedule_delegate").attr('data-basicfilter-config',JSON.stringify(basicfilter_condition_list))
                    Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
                    $('#basicfilter_schedule_delegate').modal('hide')
                  })

          </script>
          <div class="col-12 form-group">
            <label for="approvalNotificationSubject_delegate">Subject:</label>
            <textarea id="approvalNotificationSubject_delegate" class="form-control" style="padding: 1em;"></textarea>
          </div>
          <br>
          <div class="col-12">
            <strong>Body:</strong>
          </div>
        <form>
          <ul class="nav nav-tabs rtf_notification_action_tab_delegate" id="rtf_action_tab_id_delegate" role="tablist">
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link active" id="Text-tab_delegate" data-bs-toggle="tab" data-bs-target="Text" type="button" role="tab" aria-controls="Text" aria-selected="true">Text Format</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link " id="Insert-tab_delegate" data-bs-toggle="tab" data-bs-target="Insert" type="button" role="tab" aria-controls="Insert" aria-selected="false">Insert</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="Form-tab_delegate" data-bs-toggle="tab" data-bs-target="Form" type="button" role="tab" aria-controls="Form" aria-selected="false">Form</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="Page-Layout-tab_delegate" data-bs-toggle="tab" data-bs-target="Page Layout" type="button" role="tab" aria-controls="Page Layout" aria-selected="false">Page Layout</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="insert-dynamic-content-tab_delegate" data-bs-toggle="tab" data-bs-target="Insert Dynamic Content" type="button" role="tab" aria-controls="Insert Dynamic Content" aria-selected="false">Insert Dynamic Content</button>
            </li>
            <button class="ml-auto btn btn-primary" id="insert_attachment_delegate" type="button" data-config='{}'><i class="fas fa-paperclip"></i></button>
          </ul>
          <textarea id="email_message_delegate" name="email_message_delegate">&nbsp;&nbsp;</textarea>
        </form>
        <script>
          CKEDITOR.replace('email_message_delegate',{height: 300});
          CKEDITOR.config.removePlugins = 'exportpdf';
          CKEDITOR.config.extraPlugins = 'autocorrect';
            var form_rtf = ['CreateDiv,Anchor,Language,About,PasteText,PasteFromWord,Find,Replace,SelectAll,Scayt,Blockquote,Outdent,Indent,BulletedList,NumberedList,CopyFormatting,RemoveFormat,Bold,Italic,Underline,Strike,Subscript,Superscript,TextColor,BidiLtr,BidiRtl,Templates,Link,Unlink,Source,Save,NewPage,ExportPdf,Preview,Print,Styles,Format,Font,FontSize,BGColor,ShowBlocks,Maximize,JustifyLeft,JustifyCenter,JustifyRight,JustifyBlock,HorizontalRule,SpecialChar,PageBreak,Iframe,Flash,Table,Image,Smiley'];

            var home_rtf =['Source,Save,Templates,CreateDiv,Unlink,Anchor,Language,Link,Image,Flash,Table,HorizontalRule,SpecialChar,PageBreak,Iframe,ShowBlocks,Maximize,About,Print,Preview,ExportPdf,NewPage,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Smiley'];
            var tools_rtf =['Flash,About,Templates,Cut,Copy,Paste,PasteText,PasteFromWord,Redo,Undo,Find,Replace,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,Italic,Underline,Strike,Subscript,Superscript,CopyFormatting,RemoveFormat,Outdent,NumberedList,BulletedList,Indent,Blockquote,JustifyLeft,CreateDiv,JustifyCenter,JustifyRight,JustifyBlock,Language,BidiRtl,BidiLtr,Link,Unlink,Anchor,Image,Table,HorizontalRule,Smiley,SpecialChar,PageBreak,Iframe,Styles,Format,Font,FontSize,TextColor,BGColor'];
            var insert_rtf1 =['Source,Save,NewPage,ExportPdf,Preview,Print,Templates,PasteText,PasteFromWord,Replace,Find,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,BidiLtr,BidiRtl,Language,JustifyRight,JustifyBlock,JustifyCenter,CreateDiv,Indent,BulletedList,NumberedList,Outdent,Blockquote,JustifyLeft,CopyFormatting,RemoveFormat,Styles,Format,Font,FontSize,TextColor,BGColor,ShowBlocks,Maximize,About,Italic,Underline,Strike,Subscript,Superscript'];
            $(".rtf_notification_action_tab_delegate").find('li').each(function(){

              $(this).find('button').on('click',function(){

                $(".rtf_notification_action_tab_delegate").find('li').find('button').removeClass('active')
                $(this).addClass('active')
                if($(this).attr('data-bs-target') == "Form"){
                  var editor = CKEDITOR.instances['email_message_delegate'];
                  var editor_data = CKEDITOR.instances['email_message_delegate'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_delegate',{height: 300,removeButtons:form_rtf[0], extraPlugins: 'autocorrect'});
                  setTimeout(()=>{CKEDITOR.instances['email_message_delegate'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                }
                else if ($(this).attr('data-bs-target') == "Text"){
                  var editor = CKEDITOR.instances['email_message_delegate'];
                  var editor_data = CKEDITOR.instances['email_message_delegate'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_delegate',{height: 300,removeButtons:home_rtf[0] });
                  setTimeout(()=>{CKEDITOR.instances['email_message_delegate'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                }
                else if ($(this).attr('data-bs-target') == "Insert"){

                  var editor = CKEDITOR.instances['email_message_delegate'];
                  var editor_data = CKEDITOR.instances['email_message_delegate'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_delegate',{height: 300,removeButtons: insert_rtf1[0] });
                  setTimeout(()=>{CKEDITOR.instances['email_message_delegate'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                  CKEDITOR.instances['email_message_delegate'].addCommand('addCustomButtons', {
                    exec: function(edt){
                      $('#approval_notification_dialog_delegate').modal('hide');
                      $('#approvalCustomButtonModal_delegate').modal('show');
                      $('#saveApprovalCustomButton_delegate').off('click').on('click', function(){
                        var buttonText = $('#selectButtonText_delegate').val();
                        var buttonType = $('#selectButtonType_delegate').val();
                        var buttonTextColor = $('#selectButtonTextColor_delegate').val();
                        var buttonTextBackgroundColor = $('#selectButtonTextBackgroundColor_delegate').val();
                        var buttonBorderRadius = $('#selectButtonBorderRadius_delegate').val();
                        edt.insertHtml(`<button type='${buttonType}' style='color:${buttonTextColor};background-color:${buttonTextBackgroundColor};border-radius:${buttonBorderRadius}px;'>${buttonText}</button>`, mode="unfiltered_html");
                      });
                    },
                    canUndo : true,
                    canEdit : true
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('AddCustomButton', {
                      label: "Custom Buttons",
                      command: 'addCustomButtons',
                      text: 'Custom Buttons',
                      icon: "{% static 'images/Base_theme/button.png' %}",
                      toolbar: "insert",
                  });
                }
                else if ($(this).attr('data-bs-target') == "Page Layout"){
                  var editor = CKEDITOR.instances['email_message_delegate'];
                  var editor_data = CKEDITOR.instances['email_message_delegate'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_delegate',{height: 300,removeButtons:tools_rtf[0] });
                  setTimeout(()=>{CKEDITOR.instances['email_message_delegate'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                } else if ($(this).attr('data-bs-target') == "Insert Dynamic Content"){
                  var editor = CKEDITOR.instances['email_message_delegate'];
                  var editor_data = CKEDITOR.instances['email_message_delegate'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_delegate',{height: 300,removeButtons:form_rtf[0]+home_rtf[0]+insert_rtf1[0]+tools_rtf[0]});
                  setTimeout(()=>{CKEDITOR.instances['email_message_delegate'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                  CKEDITOR.instances['email_message_delegate'].addCommand('addUserCreatingTransaction', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionCreatedBy}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('UserCTButton', {
                      label: "Transaction Created By",
                      command: 'addUserCreatingTransaction',
                      text: 'Transaction Created By',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });
                  CKEDITOR.instances['email_message_delegate'].addCommand('addApproversOfTransaction', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionApprovers}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('ApproverTButton', {
                      label: "Transaction Approver(s)",
                      command: 'addApproversOfTransaction',
                      text: 'Transaction Approver(s)',
                      icon: "{% static 'images/Base_theme/users.png' %}",
                  });
                  CKEDITOR.instances['email_message_delegate'].addCommand('addUserCreatingTransaction-Name', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionCreatedBy-Name}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('UserCTButton-Name', {
                      label: "Transaction Created By (Name)",
                      command: 'addUserCreatingTransaction-Name',
                      text: 'Transaction Created By (Name)',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });
                  CKEDITOR.instances['email_message_delegate'].addCommand('addApproversOfTransaction-Name', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionApprovers-Name}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('ApproverTButton-Name', {
                      label: "Transaction Approver(s) Name",
                      command: 'addApproversOfTransaction-Name',
                      text: 'Transaction Approver(s) Name',
                      icon: "{% static 'images/Base_theme/users.png' %}",
                  });
                  CKEDITOR.instances['email_message_delegate'].addCommand('addTransactionTime', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionTime}</span>`);
                    },
                    canUndo : true
                  });

                  CKEDITOR.instances['email_message_delegate'].addCommand('addApprovalLevelConfig', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApprovalLevelConfig}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('ApprovalLevelConfig', {
                      label: "Approval Level Config",
                      command: 'addApprovalLevelConfig',
                      text: 'Approval Level Config',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });

                  CKEDITOR.instances['email_message_delegate'].addCommand('addApproverAuditLog', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApproverAuditLog}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('ApproverAuditLog', {
                      label: "Approver Audit Log",
                      command: 'addApproverAuditLog',
                      text: 'Approver Audit Log',
                      icon: "{% static 'images/Base_theme/users.png' %}",
                  });

                  CKEDITOR.instances['email_message_delegate'].addCommand('addApprovalType', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApprovalType}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('ApprovalType', {
                      label: "Approval Type",
                      command: 'addApprovalType',
                      text: 'Approval Type',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });

                  CKEDITOR.instances['email_message_delegate'].addCommand('addApproveButton', {
                    exec: function(edt){
                      edt.insertHtml(`<a href="{ApproveButton}">Approve</a>`, mode="unfiltered_html");
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('ApproveButton', {
                      label: "Approve Transaction",
                      command: 'addApproveButton',
                      text: 'Approve Transaction',
                      icon: "{% static 'images/Base_theme/approved_2.png' %}",
                  });
                  CKEDITOR.instances['email_message_delegate'].addCommand('addRejectButton', {
                    exec: function(edt){
                      edt.insertHtml(`<a href="{RejectButton}">Reject</a>`, mode="unfiltered_html");
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('RejectButton', {
                      label: "Reject Transaction",
                      command: 'addRejectButton',
                      text: 'Reject Transaction',
                      icon: "{% static 'images/Base_theme/disapproved.png' %}",
                  });
                  CKEDITOR.instances['email_message_delegate'].addCommand('addCommentSendBack', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApprovalDelegateComment}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('TransactionApproverCommentButton', {
                      label: "Transaction Approver's Comment",
                      command: 'addCommentSendBack',
                      text: "Transaction Approver's Comment",
                      icon: "{% static 'images/Base_theme/feedback.png' %}",
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('TransactionTimeButton', {
                      label: "Time Of Transaction",
                      command: 'addTransactionTime',
                      text: 'Time Of Transaction',
                      icon: "{% static 'images/Base_theme/clock.png' %}",
                  });
                  CKEDITOR.instances['email_message_delegate'].addCommand('addTransaction', {
                    exec: function(edt){
                      $('#approval_notification_dialog_delegate').modal('hide')
                      $('#approvalSubjectDynamicTable_delegate').modal('hide')
                      $('#approvalMessageDynamicTableModal_delegate').attr("data-modal","approval_notification_dialog_delegate")
                      $('#approvalMessageDynamicTableModal_delegate').modal('show');
                      $('#selectTableAMDT_delegate').off('select2:select').on('select2:select', function(){
                        $.ajax({
                          url: window.location.pathname,
                          async: false,
                          data: {
                            'operation': 'fetchColumnsList',
                            'table_name': $(this).val(),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            $('#selectColumnsAMDT_delegate').empty();
                            for (i in data['field_list']) {
                              $("#selectColumnsAMDT_delegate").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                            }
                          }, error: ()=>{
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        });
                      });
                      $('#saveApprovalMessageDynamicTable_delegate').off('click').on('click', function(){
                        var columnsList = $('#selectColumnsAMDT_delegate').val();
                        $('#approvalMessageDynamicTableModal_delegate').modal('hide');
                        var tableHTML = `
                        <table cellspacing="1" cellpadding="1" class="table table-bordered table" style="border:1.5px solid black;max-height:100vw;overlow-x:auto;">
                          <thead style="border:1px solid black"><tr>
                          `;
                        var thHTML = '';
                        var valueHTML = "<tbody style='border:1px solid black'><tr style='border:1px solid black;'>";
                        for (i of columnsList) {
                          thHTML += `<th style='border:1px solid black;text-align:center;'>{VerboseName-${i}}</th>`
                          valueHTML += `<td style='border:1px solid black;text-align:center;'>{Value-${i}}</td>`
                        }
                        thHTML += "</tr></thead>"
                        valueHTML += "</tr></tbody>"
                        tableHTML += thHTML
                        tableHTML += valueHTML
                        tableHTML += `</table>`
                        $('#approval_notification_dialog_delegate').modal('show')
                        edt.insertHtml(tableHTML, mode="unfiltered_html");
                      })
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('RecordSentForApprovalButton', {
                      label: "Transaction Data Table",
                      command: 'addTransaction',
                      text: 'Transaction Data Table',
                      icon: "{% static 'images/Base_theme/datasheet.png' %}",
                  });
                  CKEDITOR.instances['email_message_delegate'].addCommand('addTransactionValue', {
                    exec: function(edt){
                      $('#approval_notification_dialog_delegate').modal('hide')
                      $('#approvalSubjectDynamicTable_delegate').modal('hide')
                      $('#approvalMessageDynamicTableModal_delegate').attr("data-modal","approval_notification_dialog_delegate")
                      $('#approvalMessageDynamicTableModal_delegate').modal('show');
                      $('#selectTableAMDT_delegate').off('select2:select').on('select2:select', function(){
                        $.ajax({
                          url: window.location.pathname,
                          async: false,
                          data: {
                            'operation': 'fetchColumnsList',
                            'table_name': $(this).val(),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            $('#selectColumnsAMDT_delegate').empty();
                            for (i in data['field_list']) {
                              $("#selectColumnsAMDT_delegate").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                            }
                          }, error: ()=>{
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        });
                      });
                      $('#saveApprovalMessageDynamicTable_delegate').on('click', function(){
                        var columnsList = $('#selectColumnsAMDT_delegate').val();
                        $('#approvalMessageDynamicTableModal_delegate').modal('hide');
                        $('#approval_notification_dialog_delegate').modal('show')
                        for (i of columnsList) {
                          edt.insertHtml(`<span>{Value-${i}}</span>`);
                        }
                      })
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_delegate'].ui.addButton('RecordValuesButton', {
                      label: "Field Values From The Transaction",
                      command: 'addTransactionValue',
                      text: 'Field Values From The Transaction',
                      icon: "{% static 'images/Base_theme/sum.png' %}",
                  });

                }
              })

            })
          </script>
          <script>
            $('#TransactionCreatedBy_delegate').on('click', function(){
              $('#approvalNotificationSubject_delegate').val($('#approvalNotificationSubject_delegate').val() + ' {TransactionCreatedBy_delegate}');
            });
            $('#TransactionTime_delegate').on('click', function(){
              $('#approvalNotificationSubject_delegate').val($('#approvalNotificationSubject_delegate').val() + ' {TransactionTime_delegate}');
            });
            $('#TransactionApprovers_delegate').on('click', function(){
              $('#approvalNotificationSubject_delegate').val($('#approvalNotificationSubject_delegate').val() + ' {TransactionApprovers_delegate}');
            });
          </script>
          <script>
            $('#selectAttachmentType_delegate').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'static') {
                $('#uploadAttachmentContainer_delegate').css('display', 'block');
                $('#dynamicAttachmentContainer_delegate').css('display', 'none');
              } else if ($(this).val() == 'dynamic') {
                $('#uploadAttachmentContainer_delegate').css('display', 'none');
                $('#dynamicAttachmentContainer_delegate').css('display', 'block');
              } else {
                $('#uploadAttachmentContainer_delegate').css('display', 'none');
                $('#dynamicAttachmentContainer_delegate').css('display', 'none');
              }
            });
            $('#selectDynamicAttachment_delegate').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'pdf') {
                $('#dynamicAttachmentPDFContainer_delegate').css('display', 'block');
              } else {
                $('#dynamicAttachmentPDFContainer_delegate').css('display', 'none');
                $('.filterbtnSchedule').css('display', 'flex')
              }
            });
            $('#dynamicAttachmentPDFAddLogo_delegate').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'yes') {
                $('#dynamicAttachmentPDFLogoPlacementContainer_delegate').css('display', 'block');
                $('#dynamicAttachmentPDFLogoContainer_delegate').css('display', 'block');
              } else {
                $('#dynamicAttachmentPDFLogoPlacementContainer_delegate').css('display', 'none');
                $('#dynamicAttachmentPDFLogoContainer_delegate').css('display', 'none');
              }
            });
            $('#dynamicAttachmentPDFCustomizeStyle_delegate').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'yes') {
                $('#dynamicAttachmentRowHeightContainer_delegate').css('display', 'block');
                $('#dynamicAttachmentColumnWidthContainer_delegate').css('display', 'block');
                $('#dynamicAttachmentPDFHeaderBGColorContainer_delegate').css('display', 'block');
                $('#dynamicAttachmentPDFHeaderTextColorContainer_delegate').css('display', 'block');
                $('#dynamicAttachmentPDFCellBGColorContainer_delegate').css('display', 'block');
                $('#dynamicAttachmentPDFCellTextColorContainer_delegate').css('display', 'block');
                $('#columnAlignmentGlobalHContainerAN_delegate').css('display', 'block');
                $('#columnAlignmentGlobalCContainerAN_delegate').css('display', 'block');
                $('#columnAlignmentTableContainerAN_delegate').css('display', 'block');
                $('#columnAlignmentColumnContainerAN_delegate').css('display', 'block');
                $('#columnAlignmentCustomizeContainerAN_delegate').css('display', 'block');

              } else {
                $('#dynamicAttachmentRowHeightContainer_delegate').css('display', 'none');
                $('#dynamicAttachmentColumnWidthContainer_delegate').css('display', 'none');
                $('#dynamicAttachmentPDFHeaderBGColorContainer_delegate').css('display', 'none');
                $('#dynamicAttachmentPDFHeaderTextColorContainer_delegate').css('display', 'none');
                $('#dynamicAttachmentPDFCellBGColorContainer_delegate').css('display', 'none');
                $('#dynamicAttachmentPDFCellTextColorContainer_delegate').css('display', 'none');
                $('#columnAlignmentGlobalHContainerAN_delegate').css('display', 'none');
                $('#columnAlignmentGlobalCContainerAN_delegate').css('display', 'none');
                $('#columnAlignmentTableContainerAN_delegate').css('display', 'none');
                $('#columnAlignmentColumnContainerAN_delegate').css('display', 'none');
                $('#columnAlignmentCustomizeContainerAN_delegate').css('display', 'none');
              }
            });
            $('#dynamicAttachmentPDFTableColumnWidth_delegate').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'manual') {
                $('#dynamicAttachmentColumnWidthTableContainer_delegate').css('display', 'block');
                $('#dynamicAttachmentColumnWidthFieldContainer_delegate').css('display', 'block');
              } else {
                $('#dynamicAttachmentColumnWidthTableContainer_delegate').css('display', 'none');
                $('#dynamicAttachmentColumnWidthFieldContainer_delegate').css('display', 'none');
              }
            });
            $('#dynamicAttachmentPDFTableColumnWidthTable_delegate').off('select2:select').on('select2:select', function(){
              if ($(this).val()) {
                $.ajax({
                  url: window.location.pathname,
                  async: false,
                  data: {
                    'operation': 'fetchColumnsList',
                    'table_name': $(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#dynamicAttachmentColumnWidthFieldContainer_delegate').empty();
                    $("#dynamicAttachmentColumnWidthFieldContainer_delegate").append(`<div class='form-inline'><label class='col-7'>Field Name</label><label class='col-5'>Width</label></div>`);
                    for (i in data['field_list']) {
                      $("#dynamicAttachmentColumnWidthFieldContainer_delegate").append(`<div class='form-inline'><label class="col-7" data-value="${i}">${data['field_list'][i]}</label><input type="number" class="numberinput form-control col-5" step="5" data-column="${i}"></div>`);
                    }
                    if ($('#dynamicAttachmentColumnWidthFieldContainer_delegate').attr('data-config')) {
                      var existingConfig = JSON.parse($('#dynamicAttachmentColumnWidthFieldContainer_delegate').attr('data-config'));
                      for (i in existingConfig) {
                        $('#dynamicAttachmentColumnWidthFieldContainer_delegate').find(`input[data-column="${i}"]`).val(existingConfig[i]).trigger('change');
                      }
                    }
                  }, error: ()=>{
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                });
              } else {
                $('#dynamicAttachmentColumnWidthFieldContainer_delegate').empty();
              }
            });
            $('#selectTableForPDFANColAlignment_delegate').off('select2:select').on('select2:select', function(){
              if ($("#dynamicAttachmentPDFDataLayoutOption_delegate").val() == "horizontal") {
                if ($(this).val()) {
                  $.ajax({
                    url: window.location.pathname,
                    async: false,
                    data: {
                      'operation': 'fetchColumnsList',
                      'table_name': $(this).val(),
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                      $('#selectColumnForPDFANColAlignment_delegate').empty();
                      for (i in data['field_list']) {
                        $("#selectColumnForPDFANColAlignment_delegate").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                      }
                    }, error: ()=>{
                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
                  });
                } else {
                  $('#selectColumnForPDFANColAlignment_delegate').empty();
                }
              } else {
                $("#selectColumnForPDFANColAlignment_delegate").empty();
                $("#selectColumnForPDFANColAlignment_delegate").append('<option val="" disabled selected>Select Column</option>');
                $("#selectColumnForPDFANColAlignment_delegate").append('<option val="Field">Field</option>');
                $("#selectColumnForPDFANColAlignment_delegate").append('<option val="Value">Value</option>');
              }
            });
            $('#insert_attachment_delegate').off('click').on('click', function(){
              $('#approval_notification_dialog_delegate').modal('hide');
              $("#dynamicAttachmentPDFTransData_delegate").parent().css("display","block")
              $("#addUserUploadedFilesAsAttachment_delegate").parent().css("display","block")
              $(".filterbtnSchedule").css("display","none")
              $('#approvalNotificationAttachmentModal_delegate').modal('show');
              $('#approvalNotificationAttachmentModal_delegate').attr('data-calling','decision')
              $('#saveApprovalAttachments_delegate').off('click').on('click', function(){
                var attachmentConfig = {};
                if ($('#selectAttachmentType_delegate').val() == 'static') {
                  attachmentConfig['attachment_type'] = 'static';
                  var fileInput = document.getElementById('uploadApprovalAttachments');
                  var fileNames = [];
                  for (file of fileInput.files){
                    fileNames.push(file.name);
                  }
                  attachmentConfig['parameter'] = fileNames;
                  let formData = new FormData($("#approvalAttachmentForm_delegate")[0]);
                  formData.append("operation", "saveApprovalAttachmentFiles");
                  $.ajax({
                    url:window.location.pathname,
                    data: formData,
                    type: 'POST',
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: function (data) {

                    },
                    error: ()=>{
                        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
                  });
                } else if ($('#selectAttachmentType_delegate').val() == 'dynamic') {
                  attachmentConfig['attachment_type'] = 'dynamic';
                  attachmentConfig['parameter'] = $('#selectDynamicAttachment_delegate').val();
                  var additionalConfig = {};
                  if ($('#selectDynamicAttachment_delegate').val() == 'pdf') {
                    var layoutOption = $('#dynamicAttachmentPDFDataLayoutOption_delegate').val();
                    var addLogo = $('#dynamicAttachmentPDFAddLogo_delegate').val();
                    var customizeStyle = $('#dynamicAttachmentPDFCustomizeStyle_delegate').val();
                    var logoConfig = {};
                    var styleConfig = {};
                    var droptable = $("#dynamicAttachmentPDFDataDropTable_delegate").val()
                    var transDataCols = $("#dynamicAttachmentPDFTransData_delegate").val()
                    var dropcolumns = $("#dynamicAttachmentPDFDataDropColumns_delegate").val()
                    if (addLogo == 'yes') {
                      logoConfig = {
                        add_logo: addLogo,
                        placement: $('#dynamicAttachmentPDFLogoPlacement_delegate').val(),
                      };
                      var fileInput = document.getElementById('dynamicAttachmentsPDFLogo_delegate');
                      if (fileInput.files.length > 0) {
                        var fileNames = fileInput.files[0].name;
                        logoConfig['parameter'] = fileNames;
                        let formData = new FormData($("#approvalAttachmentForm_delegate")[0]);
                        formData.append("operation", "saveApprovalAttachmentPDFLogo");

                        $.ajax({
                          url:window.location.pathname,
                          data: formData,
                          type: 'POST',
                          cache: false,
                          contentType: false,
                          processData: false,
                          success: function (data) {

                          },
                          error: ()=>{
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        });
                      } else if ($("#dynamicAttachmentsPDFLogo").siblings(".custom-file-label").hasClass("selected")) {
                        logoConfig['parameter'] = $("#dynamicAttachmentsPDFLogo").siblings(".custom-file-label").html();
                      } else {

                      }
                    }
                    if (customizeStyle == 'yes') {
                      styleConfig = {
                        customize_style: customizeStyle,
                        header_bg_color: $('#dynamicAttachmentPDFHeaderBGColor_delegate').val(),
                        header_text_color: $('#dynamicAttachmentPDFHeaderTextColor_delegate').val(),
                        cell_bg_color: $('#dynamicAttachmentPDFCellBGColor_delegate').val(),
                        cell_text_color: $('#dynamicAttachmentPDFCellTextColor_delegate').val(),
                        row_height: $('#dynamicAttachmentPDFTableRowHeight_delegate').val(),
                        customize_column_width: $('#dynamicAttachmentPDFTableColumnWidth_delegate').val(),
                        static_column_width: $('#dynamicAttachmentPDFTableColumnStaticWidth_delegate').val(),
                      };
                      var columnWidthConfig = {};
                      if ($('#dynamicAttachmentPDFTableColumnWidth_delegate').val() == 'manual') {
                        if ($('#dynamicAttachmentPDFTableColumnWidthTable_delegate').val()) {
                          columnWidthConfig['table'] = $('#dynamicAttachmentPDFTableColumnWidthTable_delegate').val();
                          var customColumnWidth = {};
                          $('#dynamicAttachmentColumnWidthFieldContainer_delegate').find('input.col-5').each(function(){
                            if ($(this).val()) {
                              customColumnWidth[$(this).attr('data-column')] = $(this).val();
                            }
                          });
                          columnWidthConfig['field_config'] = customColumnWidth;
                        }
                      }
                      styleConfig['custom_column_field_level_config'] = columnWidthConfig;
                      var pdfColumnAlignmentConfig = {};
                      pdfColumnAlignmentConfig['global_header'] = $('#selectGlobalHeaderPDFANColumnAlignment_delegate').val();
                      pdfColumnAlignmentConfig['global_content'] = $('#selectGlobalContentPDFANColumnAlignment_delegate').val();
                      var inidividualFieldConfig = {};
                      $('#pdfColumnAlignmentContainerAN_delegate').find('.row.col-12').each(function(){
                        var fieldName = $(this).find('.col-4').eq(0).find('strong').attr('data-value');
                        var headerAlignment = $(this).find('.col-4').eq(1).find('.header').val();
                        var contentAlignment = $(this).find('.col-4').eq(2).find('.content').val();
                        inidividualFieldConfig[fieldName] = {header: headerAlignment, content: contentAlignment};
                      });
                      pdfColumnAlignmentConfig['field_level_config'] = inidividualFieldConfig;
                      styleConfig['column_alignment'] = pdfColumnAlignmentConfig;
                    }
                    additionalConfig['logoConfig'] = logoConfig;
                    additionalConfig['styleConfig'] = styleConfig;
                    additionalConfig['layoutOption'] = layoutOption;
                    additionalConfig["droptable"] = droptable;
                    additionalConfig["dropcolumns"] = dropcolumns;
                    additionalConfig["transDataCols"] = transDataCols;
                  }
                  attachmentConfig['additional_config'] = additionalConfig;
                }
                $('#insert_attachment_delegate').attr('data-config', JSON.stringify(attachmentConfig));
                closeAttachment()
              });
              $('#resetApprovalAttachments_delegate').off('click').on('click', function(){
                $('#uploadApprovalAttachments_delegate').val('').trigger('change');
                $('#insert_attachment_delegate').attr('data-config', JSON.stringify({}));
              });
            });
          </script>
          </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


  <div class="modal fade" id="approval_notification_dialog_mention"  role="dialog" data-focus="false" aria-labelledby="approval_notification_dialog_mention" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="NotextLabel_mention">Compose Notification message for Approval Delegation</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="placeholder-buttons">
            <button type="button" class="btn btn-primary" id="TransactionCreatedBy_mention">Transaction Created By</button>
            <button type="button" class="btn btn-primary" id="TransactionTime_mention">Transaction Time</button>
            <button type="button" class="btn btn-primary" id="TransactionApprovers_mention">Transaction Approvers</button>
            <button type="button" class="btn btn-primary" id="TransactionValueNotification_mention" onclick="openTableModal_mention('approvalNotificationSubject_mention','approval_notification_dialog_mention')">Transaction Value</button>
          </div>
          <script>
            function openTableModal_mention(element, modal){
              if(modal == "approval_notification_dialog_mention"){
                $('#approval_notification_dialog_mention').modal('hide')
                $("#approvalSubjectDynamicTable_mention").attr("data-modal","approval_notification_dialog_mention")
              }else if(modal == "schedulerModal_mention"){
                $('#schedulerModal_mention').modal('hide')
                $("#approvalSubjectDynamicTable_mention").attr("data-modal","schedulerModal_mention")
              }
              else{
                $('#approval_decision_dialog').modal('hide')
                $("#approvalSubjectDynamicTable_mention").attr("data-modal","approval_decision_dialog_mention")
              }

              $('#approvalSubjectDynamicTable_mention').modal('show');
              $("#saveSubjectTable_mention").attr("onclick",`appendMessage_mention(${element},${modal})`)
            }

            function closeDynamic_mention(){
              calling_modal = $('#approvalSubjectDynamicTable_mention').attr("data-modal")
              $(`#${calling_modal}`).modal('show')
              $('#approvalSubjectDynamicTable_mention').modal('hide');
            }

            function closeDynamicNot_mention(){
              calling_modal = $('#approvalMessageDynamicTableModal_mention').attr("data-modal")
              $(`#${calling_modal}`).modal('show')
              $('#approvalMessageDynamicTableModal_mention').modal('hide');
            }

            $('#dynamicAttachmentPDFDataDropTable_mention').off('select2:select').on('select2:select', function(){
              if($(this).val()){

                $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'dropFieldList',
                    'tableName':$(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#dynamicAttachmentPDFDataDropColumns_mention').empty()
                    for (var i = 0; i < data.fieldList.length; i++) {
                          $('#dynamicAttachmentPDFDataDropColumns_mention').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                        }
                      data_reload = $('#dynamicAttachmentPDFDataDropColumns_mention').attr("data-data")
                      if(data_reload){
                        data_reload = JSON.parse(data_reload)
                        $('#dynamicAttachmentPDFDataDropColumns_mention').val(data_reload).trigger('change')
                        $('#dynamicAttachmentPDFDataDropColumns_mention').removeAttr("data-data")
                      }
                    },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              }else{
                $('#dynamicAttachmentPDFDataDropColumns_mention').empty()
              }
            })

            $('#dynamicAttachmentPDFDataDropTableFilter_mention').off('select2:select').on('select2:select', function(){
              if($(this).val()){

                $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'dropFieldList',
                    'tableName':$(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#dynamicAttachmentPDFDataDropColumnsFilter_mention').empty()
                    for (var i = 0; i < data.fieldList.length; i++) {
                          $('#dynamicAttachmentPDFDataDropColumnsFilter_mention').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                        }
                      data_reload = $('#dynamicAttachmentPDFDataDropColumnsFilter_mention').attr("data-data")
                      if(data_reload){
                        data_reload = JSON.parse(data_reload)
                        $('#dynamicAttachmentPDFDataDropColumnsFilter_mention').val(data_reload).trigger('change')
                        $('#dynamicAttachmentPDFDataDropColumnsFilter_mention').removeAttr("data-data")
                      }
                    },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              }else{
                $('#dynamicAttachmentPDFDataDropColumnsFilter_mention').empty()
              }
            })


            $('#selectTableSubject_mention').off('select2:select').on('select2:select', function(){
              $.ajax({
                url: window.location.pathname,
                async: false,
                data: {
                  'operation': 'fetchColumnsList',
                  'table_name': $(this).val(),
                },
                type: "POST",
                dataType: "json",
                success: function (data) {
                  $('#selectColumnsSubject_mention').empty();
                  for (i in data['field_list']) {
                    $("#selectColumnsSubject_mention").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                  }
                }, error: ()=>{
                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                }
              });
            });

            function appendMessage_mention(textarea,modal){
              var columnsList = $('#selectColumnsSubject_mention').val();
              $('#approvalMessageDynamicTableModal_mention').modal('hide');
              if(modal.id == "approval_notification_dialog_mention"){
                $('#approval_notification_dialog_mention').modal('show')
              }else if(modal.id == "schedulerModal_mention"){
                $('#schedulerModal_mention').modal('show')
              }
              else{
                $('#approval_decision_dialog_mention').modal('show')
              }

              for (i of columnsList) {
                textarea.value = textarea.value +` {Value-${i}}`
              }
            }


            $("#filterAppNotBtn_mention").on('click',function(){
                   let basicfilter_config =  $("#saveBasicfilter_schedule_mention").attr('data-basicfilter-config')
                   if(basicfilter_config && basicfilter_config!="" && basicfilter_config!="[]"){
                    basicfilter_config = JSON.parse(basicfilter_config)
                    $(document).find('#basicfilter_items_schedule_mention').find('.filter-table_schedule').empty()
                    if(basicfilter_config.length >0){
                      let current_table_name = $('#dynamicAttachmentPDFDataDropTableFilter_mention').val()
                      for(let i=0;i<basicfilter_config.length;i++){

                        let column_name = basicfilter_config[i]['column_name']
                        let condition_name= basicfilter_config[i]['condition']
                        let input_value= basicfilter_config[i]['input_value']
                        if(basicfilter_config[i].hasOwnProperty('current_value')){
                             curr_value = basicfilter_config[i]['current_value']
                          }else{
                             curr_value = ""
                          }
                        if(basicfilter_config[i].hasOwnProperty('constraint_name')){
                            constraint_name = basicfilter_config[i]['constraint_name']
                        }else{
                            constraint_name = ""
                        }
                        if(basicfilter_config[i].hasOwnProperty('rule_set')){
                            rule_set = basicfilter_config[i]['rule_set']
                        }else{
                            rule_set = ""
                        }
                        if(basicfilter_config[i]['table_name'] ==current_table_name ){
                          $(document).find("#basicfilter_condition_dropdown_schedule").find('.dropdown-item').find(`a[name='${column_name}']`).click()
                          let current_div = $(document).find('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(2).find('div')
                          $(document).find('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(3).find('.basicfilter_curr_val').val(curr_value).trigger('change')
                          $(document).find('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(1).find('div').find('select').val(condition_name).trigger('change')
                          $(document).find('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(4).find('.basicfilter_constraint').val(constraint_name).trigger('change')
                          $(document).find('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find(`tr[data-position=${i}]`).find('td').eq(5).find('.basicfilter_ruleset').val(rule_set).trigger('change')

                          if(typeof(input_value) === "string" && input_value !== null){
                            setTimeout(function(){
                          if(current_div.find(`select option[value='${input_value}']`).length <= 0){
                                current_div.find('select').append(`<option value='${input_value}'>${input_value}</option>`)
                               }
                            current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                         },1000)
                          }else if(typeof(input_value) === 'object' && input_value !== null){
                            if(current_div.find(`.basic_table_valuer`).attr('data-type')=="ForeignKey"){
                            setTimeout(function(){
                              current_div.find('.basic_table_valuer').val(input_value).trigger('change')
                              },1000)
                          }else{
                            let output_html ="";
                              $.each(input_value, function(key,value){

                                if(current_div.find(`.basic_table_valuer option[value='${value}']`).length <= 0 && current_div.find(`.basic_table_valuer`).attr('data-type')!="ForeignKey"){
                                  output_html+=`<option value='${value}' selected>${value}</option>`
                                }
                              })

                              setTimeout(function(){
                                current_div.find('.basic_table_valuer').val(JSON.stringify(input_value)).trigger('change')
                                current_div.find('.basic_table_valuer').append(output_html)
                              },2000)

                          }

                          }
                      }

                    }
                    }
                   }
                  })

                  $(document).find("#dynamicAttachmentPDFDataDropTableFilter_mention").on("change", function(){
                        $('#basicfilter_items_schedule_mention').find('.filter-table').empty()
                        $("#basicfilter_condition_dropdown_schedule_mention").empty()

                        if($("#dynamicAttachmentPDFDataDropTableFilter_mention").val()){
                          $.ajax({
                            url: window.location.pathname,
                            data: {
                              'model_name': $("#dynamicAttachmentPDFDataDropTableFilter_mention").val(),
                              'operation': 'conditional_table',
                            },
                            type: "POST",
                            dataType: "json",
                            success: function (data) {
                              var label_column = data.label_columns
                            for (const [key, value] of Object.entries(label_column)) {
                              $("#basicfilter_condition_dropdown_schedule_mention").append(
                                  '<li class="dropdown-item"><a href="javascript:void(0)" name=' +
                                  key + ' class="basic_filter_btn_schedule">' + value + '</a></li>');
                              }
                              var form_fields = data.form_fields
                              $('.basic_filter_btn_schedule').off('click').on('click', function () {
                                var name = $(this).attr('name');
                                var text = $(this).text();
                                var STRING = data.form_fields[name]
                                var rowCount=   $('.filter-table_schedule tr').length;
                                $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').append(STRING);

                                $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).attr('name',name)
                                $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).attr('data-position',rowCount)
                                let field_datatype= $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find('input').attr('type')

                                let change_select  =$('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html()
                                let change_select_fk  =$('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                                if(change_select){
                                  change_select = change_select.replace('<input','<select')
                                change_select = change_select + "</select>"
                                $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='text']").parent().html(change_select)
                                $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("select[type='text']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                                }else if(change_select_fk){
                                change_select_fk = change_select_fk.replace('<input','<select')
                                change_select_fk = change_select_fk + "</select>"
                                $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html(change_select_fk)
                                $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("select[type='number'][data-type='ForeignKey']").select2({width:'100%',tags:true,placeholder:'Enter value'}).addClass('basic_table_valuer')
                                }else if (['date','datetime-local','time'].includes(field_datatype)){
                                  $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='IN']`).remove()
                                  $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(1).find('select').find(`option[value='NOT IN']`).remove()
                                }
                                $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(3).remove()
                                $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).find('td').eq(2).find("input").addClass('basic_table_valuer')
                                $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.select2bs4').removeAttr('onchange')

                                $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).addClass(`d-flex`)
                                $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).css({'text-align':'left'})
                                $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').css('width','25%')
                                $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(1).find('div').css('max-width','10em')

                                $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td:nth-child(1),td:nth-child(2)').find("select").each(function () {
                                  $(this).select2({width:'100%'});
                                })

                                $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').eq(-1).append(
                                        `
                                        <td class="dt-center" style="display:none">
                                        <div>
                                          <div style="max-width: 15em;">
                                        <select class="form-control select2bs4 basicfilter_curr_val" name=${name} data-dropdown_purpose="select_constant_val">
                                            <option value="" disabled selected>Select Variable</option>
                                            <option value="curr_user">Current User</option>
                                            <option value="curr_date">Current Date</option>
                                            <option value="curr_last_login_date">Current user's last login date</option>
                                            <option value="curr_firstname">Current user's first name</option>
                                            <option value="curr_lastname">Current user's last name</option>
                                            <option value="curr_email">Current user's email</option>
                                            <option value="curr_joined_date">Current user's joined date</option>
                                            <option value="curr_name">Current user's name</option>
                                            <option value="curr_last_pass_date">Current user's last password update date</option>
                                            <option value="curr_tenant">Current user's tenant</option>
                                        </select>
                                      </div>
                                        </div>
                                        </td>

                                        <td class="dt-center">
                                          <div class="" style="max-width:25em;">
                                          <input type="text" name=${name} class="form-control basicfilter_constraint" placeholder="Constraint name"/>
                                          </div>
                                        </td>

                                        <td class="dt-center">
                                          <div class="" style="max-width:25em;">
                                          <input type="text" name=${name} class="form-control basicfilter_ruleset" placeholder="Rule set"/>
                                          </div>
                                        </td>
                                        `
                                    )

                                  $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.select2bs4').select2({width:'100%',tags:true})

                                $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.select2bs4').on('change',function(){
                                  let in_operand = ['IN','NOT IN']
                                  let valuer = $(this).val()
                                  if(in_operand.includes(valuer) ==true){
                                    let change_select  =$('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html()
                                    let change_select_fk  =$('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number'][data-type='ForeignKey']").parent().html()

                                    if(change_select){

                                    change_select = change_select.replace('<input','<select')
                                      change_select = change_select + "</select>"
                                      $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").parent().html(change_select)
                                  }
                                  let field_type = $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                                  if(['date','datetime-local','time'].includes(field_type) ==false){
                                      $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: true,tags:true,allowClear: false})
                                    $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find(".select2-selection--multiple").css({"max-height": "8rem", "overflow": "auto" })
                                    }

                                  }else{
                                    let change_select  =$('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html()
                                    if(change_select ){
                                      change_select = change_select.replace('<select','<input')
                                      change_select = change_select.replace('</select>','')
                                      if($('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").attr(`data-type`) != 'ForeignKey'){
                                        $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("select[type='number']").parent().html(change_select)
                                        $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find("input[type='number']").removeClass('select2-hidden-accessible')
                                        $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('td').eq(2).find('span').remove('span')
                                      }else{
                                        $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                                      }
                                    }

                                    let field_type = $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type')
                                    if(['date','datetime-local','time'].includes(field_type)==false){
                                      if($('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').attr('type') =="text"){
                                        $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule tr[data-position=${rowCount}]`).find('.basic_table_valuer').select2({multiple: false,tags:true,allowClear: false})
                                      }
                                    }

                                  }
                                })
                                $('.remove_filter').on('click', removefilter);
                                function removefilter() {
                                  $(this).closest("tr").remove();

                                  $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule`).each(function(){
                                    var rowCount=   $('.filter-table_schedule tr').length;
                                    for(let rc=0;rc<rowCount;rc++){
                                      $('#basicfilter_items_schedule_mention').find(`.filter-table_schedule`).find('tr').eq(rc).attr('data-position',rc)
                                    }

                                  })
                                }
                              });
                            },
                            error: function () {
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                            }
                          });
                        }
                      }
                  )

                  $("#saveBasicfilter_schedule_mention").on('click',function(){
                    var basicfilter_condition_list = []
                    $('#basicfilter_items_schedule_mention').find('.filter-table_schedule').find('tr').each(function(){
                      var table_details = {
                        table_name: $("#dynamicAttachmentPDFDataDropTableFilter_mention").val(),
                        column_name: $(this).attr('name'),
                        condition:  $(this).find('td').eq(1).find('div').find('select').find('option:selected').val(),
                        input_value:$(this).find('td').eq(2).find('div').find('.basic_table_valuer').val(),
                        current_value: $(this).find('td').eq(3).find('div').find('.basicfilter_curr_val').val(),
                        constraint_name : $(this).find('td').eq(4).find('div').find('.basicfilter_constraint').val(),
                        rule_set : $(this).find('td').eq(5).find('div').find('.basicfilter_ruleset').val(),
                        btn_calling: $('#approvalMessageDynamicTableModal_mention').attr("data-btn_calling"),
                        and_or: "AND",
                        cols_for_filter: $('#dynamicAttachmentPDFDataDropColumnsFilter_mention').val()
                      }
                      basicfilter_condition_list.push(table_details )
                    })
                    $("#saveBasicfilter_schedule_mention").attr('data-basicfilter-config',JSON.stringify(basicfilter_condition_list))
                    Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
                    $('#basicfilter_schedule_mention').modal('hide')
                  })

          </script>
          <div class="col-12 form-group">
            <label for="approvalNotificationSubject_mention">Subject:</label>
            <textarea id="approvalNotificationSubject_mention" class="form-control" style="padding: 1em;"></textarea>
          </div>
          <br>
          <div class="col-12">
            <strong>Body:</strong>
          </div>
        <form>
          <ul class="nav nav-tabs rtf_notification_action_tab_mention" id="rtf_action_tab_id_mention" role="tablist">
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link active" id="Text-tab_mention" data-bs-toggle="tab" data-bs-target="Text" type="button" role="tab" aria-controls="Text" aria-selected="true">Text Format</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link " id="Insert-tab_mention" data-bs-toggle="tab" data-bs-target="Insert" type="button" role="tab" aria-controls="Insert" aria-selected="false">Insert</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="Form-tab_mention" data-bs-toggle="tab" data-bs-target="Form" type="button" role="tab" aria-controls="Form" aria-selected="false">Form</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="Page-Layout-tab_mention" data-bs-toggle="tab" data-bs-target="Page Layout" type="button" role="tab" aria-controls="Page Layout" aria-selected="false">Page Layout</button>
            </li>
            <li class="nav-item" role="presentation" style="margin-left: 2px;">
              <button class="nav-link" id="insert-dynamic-content-tab_mention" data-bs-toggle="tab" data-bs-target="Insert Dynamic Content" type="button" role="tab" aria-controls="Insert Dynamic Content" aria-selected="false">Insert Dynamic Content</button>
            </li>
            <button class="ml-auto btn btn-primary" id="insert_attachment_mention" type="button" data-config='{}'><i class="fas fa-paperclip"></i></button>
          </ul>
          <textarea id="email_message_mention" name="email_message_mention">&nbsp;&nbsp;</textarea>
        </form>
        <script>
          CKEDITOR.replace('email_message_mention',{height: 300});
          CKEDITOR.config.removePlugins = 'exportpdf';
          CKEDITOR.config.extraPlugins = 'autocorrect';
            var form_rtf = ['CreateDiv,Anchor,Language,About,PasteText,PasteFromWord,Find,Replace,SelectAll,Scayt,Blockquote,Outdent,Indent,BulletedList,NumberedList,CopyFormatting,RemoveFormat,Bold,Italic,Underline,Strike,Subscript,Superscript,TextColor,BidiLtr,BidiRtl,Templates,Link,Unlink,Source,Save,NewPage,ExportPdf,Preview,Print,Styles,Format,Font,FontSize,BGColor,ShowBlocks,Maximize,JustifyLeft,JustifyCenter,JustifyRight,JustifyBlock,HorizontalRule,SpecialChar,PageBreak,Iframe,Flash,Table,Image,Smiley'];

            var home_rtf =['Source,Save,Templates,CreateDiv,Unlink,Anchor,Language,Link,Image,Flash,Table,HorizontalRule,SpecialChar,PageBreak,Iframe,ShowBlocks,Maximize,About,Print,Preview,ExportPdf,NewPage,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Smiley'];
            var tools_rtf =['Flash,About,Templates,Cut,Copy,Paste,PasteText,PasteFromWord,Redo,Undo,Find,Replace,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,Italic,Underline,Strike,Subscript,Superscript,CopyFormatting,RemoveFormat,Outdent,NumberedList,BulletedList,Indent,Blockquote,JustifyLeft,CreateDiv,JustifyCenter,JustifyRight,JustifyBlock,Language,BidiRtl,BidiLtr,Link,Unlink,Anchor,Image,Table,HorizontalRule,Smiley,SpecialChar,PageBreak,Iframe,Styles,Format,Font,FontSize,TextColor,BGColor'];
            var insert_rtf1 =['Source,Save,NewPage,ExportPdf,Preview,Print,Templates,PasteText,PasteFromWord,Replace,Find,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,BidiLtr,BidiRtl,Language,JustifyRight,JustifyBlock,JustifyCenter,CreateDiv,Indent,BulletedList,NumberedList,Outdent,Blockquote,JustifyLeft,CopyFormatting,RemoveFormat,Styles,Format,Font,FontSize,TextColor,BGColor,ShowBlocks,Maximize,About,Italic,Underline,Strike,Subscript,Superscript'];
            $(".rtf_notification_action_tab_mention").find('li').each(function(){

              $(this).find('button').on('click',function(){

                $(".rtf_notification_action_tab_mention").find('li').find('button').removeClass('active')
                $(this).addClass('active')
                if($(this).attr('data-bs-target') == "Form"){
                  var editor = CKEDITOR.instances['email_message_mention'];
                  var editor_data = CKEDITOR.instances['email_message_mention'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_mention',{height: 300,removeButtons:form_rtf[0], extraPlugins: 'autocorrect'});
                  setTimeout(()=>{CKEDITOR.instances['email_message_mention'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                }
                else if ($(this).attr('data-bs-target') == "Text"){
                  var editor = CKEDITOR.instances['email_message_mention'];
                  var editor_data = CKEDITOR.instances['email_message_mention'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_mention',{height: 300,removeButtons:home_rtf[0] });
                  setTimeout(()=>{CKEDITOR.instances['email_message_mention'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                }
                else if ($(this).attr('data-bs-target') == "Insert"){

                  var editor = CKEDITOR.instances['email_message_mention'];
                  var editor_data = CKEDITOR.instances['email_message_mention'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_mention',{height: 300,removeButtons: insert_rtf1[0] });
                  setTimeout(()=>{CKEDITOR.instances['email_message_mention'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                  CKEDITOR.instances['email_message_mention'].addCommand('addCustomButtons', {
                    exec: function(edt){
                      $('#approval_notification_dialog_mention').modal('hide');
                      $('#approvalCustomButtonModal_mention').modal('show');
                      $('#saveApprovalCustomButton_mention').off('click').on('click', function(){
                        var buttonText = $('#selectButtonText_mention').val();
                        var buttonType = $('#selectButtonType_mention').val();
                        var buttonTextColor = $('#selectButtonTextColor_mention').val();
                        var buttonTextBackgroundColor = $('#selectButtonTextBackgroundColor_mention').val();
                        var buttonBorderRadius = $('#selectButtonBorderRadius_mention').val();
                        edt.insertHtml(`<button type='${buttonType}' style='color:${buttonTextColor};background-color:${buttonTextBackgroundColor};border-radius:${buttonBorderRadius}px;'>${buttonText}</button>`, mode="unfiltered_html");
                      });
                    },
                    canUndo : true,
                    canEdit : true
                  });
                  CKEDITOR.instances['email_message_mention'].ui.addButton('AddCustomButton', {
                      label: "Custom Buttons",
                      command: 'addCustomButtons',
                      text: 'Custom Buttons',
                      icon: "{% static 'images/Base_theme/button.png' %}",
                      toolbar: "insert",
                  });
                }
                else if ($(this).attr('data-bs-target') == "Page Layout"){
                  var editor = CKEDITOR.instances['email_message_mention'];
                  var editor_data = CKEDITOR.instances['email_message_mention'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_mention',{height: 300,removeButtons:tools_rtf[0] });
                  setTimeout(()=>{CKEDITOR.instances['email_message_mention'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                } else if ($(this).attr('data-bs-target') == "Insert Dynamic Content"){
                  var editor = CKEDITOR.instances['email_message_mention'];
                  var editor_data = CKEDITOR.instances['email_message_mention'].getData()
                  if (editor) { editor.destroy(true); }
                  CKEDITOR.replace('email_message_mention',{height: 300,removeButtons:form_rtf[0]+home_rtf[0]+insert_rtf1[0]+tools_rtf[0]});
                  setTimeout(()=>{CKEDITOR.instances['email_message_mention'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                  CKEDITOR.instances['email_message_mention'].addCommand('addUserCreatingTransaction', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionCreatedBy}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_mention'].ui.addButton('UserCTButton', {
                      label: "Transaction Created By",
                      command: 'addUserCreatingTransaction',
                      text: 'Transaction Created By',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });
                  CKEDITOR.instances['email_message_mention'].addCommand('addUserCreatingTransaction-Name', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionCreatedBy-Name}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_mention'].ui.addButton('UserCTButton-Name', {
                      label: "Transaction Created By (Name)",
                      command: 'addUserCreatingTransaction-Name',
                      text: 'Transaction Created By (Name)',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });

                  CKEDITOR.instances['email_message_mention'].addCommand('addTransactionTime', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{TransactionTime}</span>`);
                    },
                    canUndo : true
                  });

                  CKEDITOR.instances['email_message_mention'].addCommand('addApprovalLevelConfig', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApprovalLevelConfig}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_mention'].ui.addButton('ApprovalLevelConfig', {
                      label: "Approval Level Config",
                      command: 'addApprovalLevelConfig',
                      text: 'Approval Level Config',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });

                  CKEDITOR.instances['email_message_mention'].addCommand('addAppLinks', {
                    exec: function(edt){
                      $('#approval_notification_dialog_mention').modal('hide')

                      $('#appLinksRTFModal').modal('show');

                      $('#saveAppLinksRTF').off('click').on('click', function(){
                        $('#appLinksRTFModal').modal('hide');
                        $('#approval_notification_dialog_mention').modal('show')
                        let process = $('#selectProcessAppLinks').val();
                        let subProcessCode = $('#selectSubprocessAppLinks').val();
                        let subProcessName = $('#selectSubprocessAppLinks > option:selected').text();
                        var linkHTML = `<a href="{domain}/users/{app_code}/User/${subProcessCode}/">${subProcessName}</a>`;
                        edt.insertHtml(linkHTML, mode="unfiltered_html");
                      })
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_mention'].ui.addButton('addAppLinks', {
                      label: "App Screen Links",
                      command: 'addAppLinks',
                      text: 'App Screen Links',
                      icon: "{% static 'images/Base_theme/clock.png' %}",
                  });

                  CKEDITOR.instances['email_message_mention'].addCommand('addApproverAuditLog', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApproverAuditLog}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_mention'].ui.addButton('ApproverAuditLog', {
                      label: "Approver Audit Log",
                      command: 'addApproverAuditLog',
                      text: 'Approver Audit Log',
                      icon: "{% static 'images/Base_theme/users.png' %}",
                  });

                  CKEDITOR.instances['email_message_mention'].addCommand('addApprovalType', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApprovalType}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_mention'].ui.addButton('ApprovalType', {
                      label: "Approval Type",
                      command: 'addApprovalType',
                      text: 'Approval Type',
                      icon: "{% static 'images/Base_theme/user.png' %}",
                  });

                  CKEDITOR.instances['email_message_mention'].addCommand('addCommentMention', {
                    exec: function(edt){
                      edt.insertHtml(`<span>{ApprovalmentionComment}</span>`);
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_mention'].ui.addButton('TransactionApproverCommentButton', {
                      label: "Referrer's Comment",
                      command: 'addCommentMention',
                      text: "Referrer's Comment",
                      icon: "{% static 'images/Base_theme/feedback.png' %}",
                  });
                  CKEDITOR.instances['email_message_mention'].ui.addButton('TransactionTimeButton', {
                      label: "Time Of Transaction",
                      command: 'addTransactionTime',
                      text: 'Time Of Transaction',
                      icon: "{% static 'images/Base_theme/clock.png' %}",
                  });
                  CKEDITOR.instances['email_message_mention'].addCommand('addTransaction', {
                    exec: function(edt){
                      $('#approval_notification_dialog_mention').modal('hide')
                      $('#approvalSubjectDynamicTable_mention').modal('hide')
                      $('#approvalMessageDynamicTableModal_mention').attr("data-modal","approval_notification_dialog_mention")
                      $('#approvalMessageDynamicTableModal_mention').modal('show');
                      $('#selectTableAMDT_mention').off('select2:select').on('select2:select', function(){
                        $.ajax({
                          url: window.location.pathname,
                          async: false,
                          data: {
                            'operation': 'fetchColumnsList',
                            'table_name': $(this).val(),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            $('#selectColumnsAMDT_mention').empty();
                            for (i in data['field_list']) {
                              $("#selectColumnsAMDT_mention").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                            }
                          }, error: ()=>{
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        });
                      });
                      $('#saveApprovalMessageDynamicTable_mention').off('click').on('click', function(){
                        var columnsList = $('#selectColumnsAMDT_mention').val();
                        $('#approvalMessageDynamicTableModal_mention').modal('hide');
                        var tableHTML = `
                        <table cellspacing="1" cellpadding="1" class="table table-bordered table" style="border:1.5px solid black;max-height:100vw;overlow-x:auto;">
                          <thead style="border:1px solid black"><tr>
                          `;
                        var thHTML = '';
                        var valueHTML = "<tbody style='border:1px solid black'><tr style='border:1px solid black;'>";
                        for (i of columnsList) {
                          thHTML += `<th style='border:1px solid black;text-align:center;'>{VerboseName-${i}}</th>`
                          valueHTML += `<td style='border:1px solid black;text-align:center;'>{Value-${i}}</td>`
                        }
                        thHTML += "</tr></thead>"
                        valueHTML += "</tr></tbody>"
                        tableHTML += thHTML
                        tableHTML += valueHTML
                        tableHTML += `</table>`
                        $('#approval_notification_dialog_mention').modal('show')
                        edt.insertHtml(tableHTML, mode="unfiltered_html");
                      })
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_mention'].ui.addButton('RecordSentForApprovalButton', {
                      label: "Transaction Data Table",
                      command: 'addTransaction',
                      text: 'Transaction Data Table',
                      icon: "{% static 'images/Base_theme/datasheet.png' %}",
                  });
                  CKEDITOR.instances['email_message_mention'].addCommand('addTransactionValue', {
                    exec: function(edt){
                      $('#approval_notification_dialog_mention').modal('hide')
                      $('#approvalSubjectDynamicTable_mention').modal('hide')
                      $('#approvalMessageDynamicTableModal_mention').attr("data-modal","approval_notification_dialog_mention")
                      $('#approvalMessageDynamicTableModal_mention').modal('show');
                      $('#selectTableAMDT_mention').off('select2:select').on('select2:select', function(){
                        $.ajax({
                          url: window.location.pathname,
                          async: false,
                          data: {
                            'operation': 'fetchColumnsList',
                            'table_name': $(this).val(),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                            $('#selectColumnsAMDT_mention').empty();
                            for (i in data['field_list']) {
                              $("#selectColumnsAMDT_mention").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                            }
                          }, error: ()=>{
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        });
                      });
                      $('#saveApprovalMessageDynamicTable_mention').on('click', function(){
                        var columnsList = $('#selectColumnsAMDT_mention').val();
                        $('#approvalMessageDynamicTableModal_mention').modal('hide');
                        $('#approval_notification_dialog_mention').modal('show')
                        for (i of columnsList) {
                          edt.insertHtml(`<span>{Value-${i}}</span>`);
                        }
                      })
                    },
                    canUndo : true
                  });
                  CKEDITOR.instances['email_message_mention'].ui.addButton('RecordValuesButton', {
                      label: "Field Values From The Transaction",
                      command: 'addTransactionValue',
                      text: 'Field Values From The Transaction',
                      icon: "{% static 'images/Base_theme/sum.png' %}",
                  });

                }
              })

            })
          </script>
          <script>
            $('#TransactionCreatedBy_mention').on('click', function(){
              $('#approvalNotificationSubject_mention').val($('#approvalNotificationSubject_mention').val() + ' {TransactionCreatedBy}');
            });
            $('#TransactionTime_mention').on('click', function(){
              $('#approvalNotificationSubject_mention').val($('#approvalNotificationSubject_mention').val() + ' {TransactionTime}');
            });
            $('#TransactionApprovers_mention').on('click', function(){
              $('#approvalNotificationSubject_mention').val($('#approvalNotificationSubject_mention').val() + ' {TransactionApprovers}');
            });
          </script>
          <script>
            $('#selectAttachmentType_mention').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'static') {
                $('#uploadAttachmentContainer_mention').css('display', 'block');
                $('#dynamicAttachmentContainer_mention').css('display', 'none');
              } else if ($(this).val() == 'dynamic') {
                $('#uploadAttachmentContainer_mention').css('display', 'none');
                $('#dynamicAttachmentContainer_mention').css('display', 'block');
              } else {
                $('#uploadAttachmentContainer_mention').css('display', 'none');
                $('#dynamicAttachmentContainer_mention').css('display', 'none');
              }
            });
            $('#selectDynamicAttachment_mention').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'pdf') {
                $('#dynamicAttachmentPDFContainer_mention').css('display', 'block');
              } else {
                $('#dynamicAttachmentPDFContainer_mention').css('display', 'none');
                $('.filterbtnSchedule').css('display', 'flex')
              }
            });
            $('#dynamicAttachmentPDFAddLogo_mention').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'yes') {
                $('#dynamicAttachmentPDFLogoPlacementContainer_mention').css('display', 'block');
                $('#dynamicAttachmentPDFLogoContainer_mention').css('display', 'block');
              } else {
                $('#dynamicAttachmentPDFLogoPlacementContainer_mention').css('display', 'none');
                $('#dynamicAttachmentPDFLogoContainer_mention').css('display', 'none');
              }
            });
            $('#dynamicAttachmentPDFCustomizeStyle_mention').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'yes') {
                $('#dynamicAttachmentRowHeightContainer_mention').css('display', 'block');
                $('#dynamicAttachmentColumnWidthContainer_mention').css('display', 'block');
                $('#dynamicAttachmentPDFHeaderBGColorContainer_mention').css('display', 'block');
                $('#dynamicAttachmentPDFHeaderTextColorContainer_mention').css('display', 'block');
                $('#dynamicAttachmentPDFCellBGColorContainer_mention').css('display', 'block');
                $('#dynamicAttachmentPDFCellTextColorContainer_mention').css('display', 'block');
                $('#columnAlignmentGlobalHContainerAN_mention').css('display', 'block');
                $('#columnAlignmentGlobalCContainerAN_mention').css('display', 'block');
                $('#columnAlignmentTableContainerAN_mention').css('display', 'block');
                $('#columnAlignmentColumnContainerAN_mention').css('display', 'block');
                $('#columnAlignmentCustomizeContainerAN_mention').css('display', 'block');

              } else {
                $('#dynamicAttachmentRowHeightContainer_mention').css('display', 'none');
                $('#dynamicAttachmentColumnWidthContainer_mention').css('display', 'none');
                $('#dynamicAttachmentPDFHeaderBGColorContainer_mention').css('display', 'none');
                $('#dynamicAttachmentPDFHeaderTextColorContainer_mention').css('display', 'none');
                $('#dynamicAttachmentPDFCellBGColorContainer_mention').css('display', 'none');
                $('#dynamicAttachmentPDFCellTextColorContainer_mention').css('display', 'none');
                $('#columnAlignmentGlobalHContainerAN_mention').css('display', 'none');
                $('#columnAlignmentGlobalCContainerAN_mention').css('display', 'none');
                $('#columnAlignmentTableContainerAN_mention').css('display', 'none');
                $('#columnAlignmentColumnContainerAN_mention').css('display', 'none');
                $('#columnAlignmentCustomizeContainerAN_mention').css('display', 'none');
              }
            });
            $('#dynamicAttachmentPDFTableColumnWidth_mention').off('select2:select').on('select2:select', function(){
              if ($(this).val() == 'manual') {
                $('#dynamicAttachmentColumnWidthTableContainer_mention').css('display', 'block');
                $('#dynamicAttachmentColumnWidthFieldContainer_mention').css('display', 'block');
              } else {
                $('#dynamicAttachmentColumnWidthTableContainer_mention').css('display', 'none');
                $('#dynamicAttachmentColumnWidthFieldContainer_mention').css('display', 'none');
              }
            });
            $('#dynamicAttachmentPDFTableColumnWidthTable_mention').off('select2:select').on('select2:select', function(){
              if ($(this).val()) {
                $.ajax({
                  url: window.location.pathname,
                  async: false,
                  data: {
                    'operation': 'fetchColumnsList',
                    'table_name': $(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#dynamicAttachmentColumnWidthFieldContainer_mention').empty();
                    $("#dynamicAttachmentColumnWidthFieldContainer_mention").append(`<div class='form-inline'><label class='col-7'>Field Name</label><label class='col-5'>Width</label></div>`);
                    for (i in data['field_list']) {
                      $("#dynamicAttachmentColumnWidthFieldContainer_mention").append(`<div class='form-inline'><label class="col-7" data-value="${i}">${data['field_list'][i]}</label><input type="number" class="numberinput form-control col-5" step="5" data-column="${i}"></div>`);
                    }
                    if ($('#dynamicAttachmentColumnWidthFieldContainer_mention').attr('data-config')) {
                      var existingConfig = JSON.parse($('#dynamicAttachmentColumnWidthFieldContainer_mention').attr('data-config'));
                      for (i in existingConfig) {
                        $('#dynamicAttachmentColumnWidthFieldContainer_mention').find(`input[data-column="${i}"]`).val(existingConfig[i]).trigger('change');
                      }
                    }
                  }, error: ()=>{
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                });
              } else {
                $('#dynamicAttachmentColumnWidthFieldContainer_mention').empty();
              }
            });
            $('#selectTableForPDFANColAlignment_mention').off('select2:select').on('select2:select', function(){
              if ($("#dynamicAttachmentPDFDataLayoutOption_mention").val() == "horizontal") {
                if ($(this).val()) {
                  $.ajax({
                    url: window.location.pathname,
                    async: false,
                    data: {
                      'operation': 'fetchColumnsList',
                      'table_name': $(this).val(),
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                      $('#selectColumnForPDFANColAlignment_mention').empty();
                      for (i in data['field_list']) {
                        $("#selectColumnForPDFANColAlignment_mention").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                      }
                    }, error: ()=>{
                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
                  });
                } else {
                  $('#selectColumnForPDFANColAlignment_mention').empty();
                }
              } else {
                $("#selectColumnForPDFANColAlignment_mention").empty();
                $("#selectColumnForPDFANColAlignment_mention").append('<option val="" disabled selected>Select Column</option>');
                $("#selectColumnForPDFANColAlignment_mention").append('<option val="Field">Field</option>');
                $("#selectColumnForPDFANColAlignment_mention").append('<option val="Value">Value</option>');
              }
            });
            $('#insert_attachment_mention').off('click').on('click', function(){
              $('#approval_notification_dialog_mention').modal('hide');
              $("#dynamicAttachmentPDFTransData_mention").parent().css("display","block")
              $("#addUserUploadedFilesAsAttachment_mention").parent().css("display","block")
              $(".filterbtnSchedule").css("display","none")
              $('#approvalNotificationAttachmentModal_mention').modal('show');
              $('#approvalNotificationAttachmentModal_mention').attr('data-calling','decision')
              $('#saveApprovalAttachments_mention').off('click').on('click', function(){
                var attachmentConfig = {};
                if ($('#selectAttachmentType_mention').val() == 'static') {
                  attachmentConfig['attachment_type'] = 'static';
                  var fileInput = document.getElementById('uploadApprovalAttachments');
                  var fileNames = [];
                  for (file of fileInput.files){
                    fileNames.push(file.name);
                  }
                  attachmentConfig['parameter'] = fileNames;
                  let formData = new FormData($("#approvalAttachmentForm_mention")[0]);
                  formData.append("operation", "saveApprovalAttachmentFiles");
                  $.ajax({
                    url:window.location.pathname,
                    data: formData,
                    type: 'POST',
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: function (data) {

                    },
                    error: ()=>{
                        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
                  });
                } else if ($('#selectAttachmentType_mention').val() == 'dynamic') {
                  attachmentConfig['attachment_type'] = 'dynamic';
                  attachmentConfig['parameter'] = $('#selectDynamicAttachment_mention').val();
                  var additionalConfig = {};
                  if ($('#selectDynamicAttachment_mention').val() == 'pdf') {
                    var layoutOption = $('#dynamicAttachmentPDFDataLayoutOption_mention').val();
                    var addLogo = $('#dynamicAttachmentPDFAddLogo_mention').val();
                    var customizeStyle = $('#dynamicAttachmentPDFCustomizeStyle_mention').val();
                    var logoConfig = {};
                    var styleConfig = {};
                    var droptable = $("#dynamicAttachmentPDFDataDropTable_mention").val()
                    var transDataCols = $("#dynamicAttachmentPDFTransData_mention").val()
                    var dropcolumns = $("#dynamicAttachmentPDFDataDropColumns_mention").val()
                    if (addLogo == 'yes') {
                      logoConfig = {
                        add_logo: addLogo,
                        placement: $('#dynamicAttachmentPDFLogoPlacement_mention').val(),
                      };
                      var fileInput = document.getElementById('dynamicAttachmentsPDFLogo_mention');
                      if (fileInput.files.length > 0) {
                        var fileNames = fileInput.files[0].name;
                        logoConfig['parameter'] = fileNames;
                        let formData = new FormData($("#approvalAttachmentForm_mention")[0]);
                        formData.append("operation", "saveApprovalAttachmentPDFLogo");

                        $.ajax({
                          url:window.location.pathname,
                          data: formData,
                          type: 'POST',
                          cache: false,
                          contentType: false,
                          processData: false,
                          success: function (data) {

                          },
                          error: ()=>{
                              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        });
                      } else if ($("#dynamicAttachmentsPDFLogo").siblings(".custom-file-label").hasClass("selected")) {
                        logoConfig['parameter'] = $("#dynamicAttachmentsPDFLogo").siblings(".custom-file-label").html();
                      } else {

                      }
                    }
                    if (customizeStyle == 'yes') {
                      styleConfig = {
                        customize_style: customizeStyle,
                        header_bg_color: $('#dynamicAttachmentPDFHeaderBGColor_mention').val(),
                        header_text_color: $('#dynamicAttachmentPDFHeaderTextColor_mention').val(),
                        cell_bg_color: $('#dynamicAttachmentPDFCellBGColor_mention').val(),
                        cell_text_color: $('#dynamicAttachmentPDFCellTextColor_mention').val(),
                        row_height: $('#dynamicAttachmentPDFTableRowHeight_mention').val(),
                        customize_column_width: $('#dynamicAttachmentPDFTableColumnWidth_mention').val(),
                        static_column_width: $('#dynamicAttachmentPDFTableColumnStaticWidth_mention').val(),
                      };
                      var columnWidthConfig = {};
                      if ($('#dynamicAttachmentPDFTableColumnWidth_mention').val() == 'manual') {
                        if ($('#dynamicAttachmentPDFTableColumnWidthTable_mention').val()) {
                          columnWidthConfig['table'] = $('#dynamicAttachmentPDFTableColumnWidthTable_mention').val();
                          var customColumnWidth = {};
                          $('#dynamicAttachmentColumnWidthFieldContainer_mention').find('input.col-5').each(function(){
                            if ($(this).val()) {
                              customColumnWidth[$(this).attr('data-column')] = $(this).val();
                            }
                          });
                          columnWidthConfig['field_config'] = customColumnWidth;
                        }
                      }
                      styleConfig['custom_column_field_level_config'] = columnWidthConfig;
                      var pdfColumnAlignmentConfig = {};
                      pdfColumnAlignmentConfig['global_header'] = $('#selectGlobalHeaderPDFANColumnAlignment_mention').val();
                      pdfColumnAlignmentConfig['global_content'] = $('#selectGlobalContentPDFANColumnAlignment_mention').val();
                      var inidividualFieldConfig = {};
                      $('#pdfColumnAlignmentContainerAN_mention').find('.row.col-12').each(function(){
                        var fieldName = $(this).find('.col-4').eq(0).find('strong').attr('data-value');
                        var headerAlignment = $(this).find('.col-4').eq(1).find('.header').val();
                        var contentAlignment = $(this).find('.col-4').eq(2).find('.content').val();
                        inidividualFieldConfig[fieldName] = {header: headerAlignment, content: contentAlignment};
                      });
                      pdfColumnAlignmentConfig['field_level_config'] = inidividualFieldConfig;
                      styleConfig['column_alignment'] = pdfColumnAlignmentConfig;
                    }
                    additionalConfig['logoConfig'] = logoConfig;
                    additionalConfig['styleConfig'] = styleConfig;
                    additionalConfig['layoutOption'] = layoutOption;
                    additionalConfig["droptable"] = droptable;
                    additionalConfig["dropcolumns"] = dropcolumns;
                    additionalConfig["transDataCols"] = transDataCols;
                  }
                  attachmentConfig['additional_config'] = additionalConfig;
                }
                $('#insert_attachment_mention').attr('data-config', JSON.stringify(attachmentConfig));
                closeAttachment()
              });
              $('#resetApprovalAttachments_mention').off('click').on('click', function(){
                $('#uploadApprovalAttachments_mention').val('').trigger('change');
                $('#insert_attachment_mention').attr('data-config', JSON.stringify({}));
              });
            });
          </script>
          </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


  <div class="modal fade" id="YesText" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="Yestext" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="YestextLabel">Yes condition on decision box</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Yes text box for decision.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="IdforYes">Save changes</button>
        </div>
      </div>
    </div>
  </div>


  <div class="modal fade" id="NoText" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="Notext" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="NotextLabel">No condition on decision box</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>No text box for decision.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="IdforNo">Save changes</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="chartModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="chartModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width: 40rem;">
      <div class="modal-content">
        <div class="modal-header" style='background:#565a5e; color:white;'>
          <h5 class="modal-title" id="chartModalLabel" style="margin-left: 26.5%;">Configure analysis elements</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="height:70vh;overflow-y:scroll;">
          <div class='card'>
            <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Feature selection</div>
            <div class='card-body'>
              <form id="analysisForm" method="post">
                {% csrf_token %}
                <div class="row">
                  <div class="form-group col-6">
                    <input type="text" placeholder="Tab Header" class="tabHeader" id="tabHeaderAnalysis" data-spanID="analysisErrorSpan">
                  </div>
                </div>
                  <div class="row" style="color:red;display: none;">
                    <div class="form-group col-12">
                      <span id="#analysisErrorSpan">
                      Tab header must contain unique values. A tab with the same name already exists in the sub-process.
                    </span>
                    </div>
                  </div>
                  <div class="row tabHeaderEmptyValidation" style="color:red;display:none;">
                    <div class="form-group col-12">
                      <span>
                        Tab header is a mandatory field.
                      </span>
                    </div>
                  </div>
                  <br>
                  <script language="javascript">
                    function toggle(source){
                      checkboxes = document.getElementsByName('ab');
                      var n=checkboxes.length;
                      for(var i=0;i<n;i++){
                        checkboxes[i].checked=source.checked;
                      }
                    }
                  </script>
                  <div class="form-group row" style="margin-left:0.5%">
                    <div id="div_id_active" class="custom-control custom-checkbox">
                      <input type="checkbox" onclick="toggle(this)" name="SelectAll" class="checkboxinput custom-control-input selectAll" id="SelectAll">
                      <label for="SelectAll" class="custom-control-label">
                        Select All
                      </label>
                    </div>

                  </div>
                  <div class="form-group row" style="margin-left:0.5%">
                    <div id="div_id_active" class="custom-control custom-checkbox">
                      <input type="checkbox" name="ab" class="checkboxinput custom-control-input tabConfigs" id="tabConfigs">
                      <label for="tabConfigs" class="custom-control-label">
                        Tab Configs
                      </label>
                    </div>
                  </div>
                  <div class="form-group row" style="margin-left:0.5%">
                    <div id="div_id_active" class="custom-control custom-checkbox">
                      <input type="checkbox" name="ab" class="checkboxinput custom-control-input plotChart" id="plotChart">
                      <label for="plotChart" class="custom-control-label">
                        Plot charts
                      </label>
                    </div>
                  </div>
                  <div class="form-group row" style="margin-left:0.5%">
                    <div id="div_id_active" class="custom-control custom-checkbox">
                      <input type="checkbox" name="ab" class="checkboxinput custom-control-input addTabs" id="addTabs">
                      <label for="addTabs" class="custom-control-label">
                        Add tabs
                      </label>
                    </div>
                  </div>
                  <div class="form-group row" style="margin-left:0.5%">
                    <div id="div_id_active" class="custom-control custom-checkbox">
                      <input type="checkbox" name="ab" class="checkboxinput custom-control-input pdf" id="pdf">
                      <label for="pdf" class="custom-control-label">
                        PDF
                      </label>
                    </div>
                  </div>
                  <div class="form-group row" style="margin-left:0.5%">
                    <div id="div_id_active" class="custom-control custom-checkbox">
                      <input type="checkbox" name="ab" class="checkboxinput custom-control-input saveTabsButton" id="saveTabsButton">
                      <label for="saveTabsButton" class="custom-control-label">
                        Save
                      </label>
                    </div>
                  </div>
                  <div class="form-group row" style="margin-left:0.5%">
                    <div id="div_id_active" class="custom-control custom-checkbox">
                      <input type="checkbox" name="ab" class="checkboxinput custom-control-input plotChart" id="share_with_group">
                      <label for="share_with_group" class="custom-control-label">
                        Save and share with groups
                      </label>
                    </div>
                  </div>
                  <div class="form-group row" style="margin-left:0.5%">
                    <div id="div_id_active" class="custom-control custom-checkbox">
                      <input type="checkbox" name="ab" class="checkboxinput custom-control-input plotChart" id="global_settings">
                      <label for="global_settings" class="custom-control-label">
                        Global Settings
                      </label>
                    </div>
                  </div>
                  <br>
                  <div class="form-group row form-inline" style="margin-left:0.5%">
                    <label>
                      Number of tabs: &nbsp;
                    </label>
                    <input type="number" min="0" name="tabNumber" id="tabNumber" style="text-align:center;">
                  </div>
                  <br>
                  <div class="form-group row form-inline" style="margin-left:0.5%">
                    <label>
                      Layout: &nbsp;
                    </label>
                    <div class="col-6">
                      <select id="selectAnalysisLayout" class="select2 form-control" name="template">
                        form-control" name="template">
                        <option value="No layout">No layout</option>
                        <option value="Landscape">Landscape</option>
                        <option value="Portrait">Portrait</option>
                      </select>
                    </div>

                  </div>
                <div class="form-group row form-inline" style="margin-left:0.5%">
                  <label>
                    Template: &nbsp;
                  </label>
                  <div class="col-6">
                    <select id="selectAnalysisTemplate" class="select2 form-control">
                      <option value="System defined template">System defined template</option>
                      <option value="Custom defined template">Custom defined template</option>
                    </select>
                  </div>
                </div>
                <div class="form-group row form-inline" style="margin-left:0.5%">
                  <label>
                    Dashboard index tab: &nbsp;
                  </label>
                  <div class="col-6">
                    <select id="dashboardIndex" class="select2 form-control">
                      <option value="Required">Required</option>
                      <option value="Not required">Not required</option>
                    </select>
                  </div>
                </div>
              <div class="form-group row form-inline" style="margin-left:0.5%">
                  <label>
                    Published dashboard index tab: &nbsp;
                  </label>
                  <div class="col-6">
                  <select id="publishDashboardIndex" class="select2 form-control">
                    <option value="Required">Required</option>
                    <option value="Not required">Not required</option>
                  </select>
                </div>
              </div>
              <div class="form-group row form-inline" id="indexTemplates" style="margin-left:0.5%">
                <label>
                 Index tab templates: &nbsp;
                </label>
                <div class="col-6">
                  <select id="dashboardIndexTemplate" class="select2 form-control" onchange="templateChange(this.value)">
                    <option value="Template1">Default Template</option>
                    <option value="Template2">Template 2</option>
                    <option value="Template3">Template 3</option>
                    <option value="Template4">Template 4</option>
                    <option value="Template5">Template 5</option>
                  </select>
                </div>
              </div>
              <script>
              function templateChange(template){
                src="/static/images/index_tab_templates/"+template+".png"
                $(".indextab-preview").attr("src",src)
              }
              </script>
              <div class="form-group row form-inline" id="indexTemplates" style="margin-left:0.5%">
                <label>
                 Preview
                </label>
                <div class="col-12">
                  <img class="indextab-preview" src="{% static 'images/index_tab_templates/Template1.png' %}" alt="">
                </div>
              </div>
                <br>
                  <div class="form-group row form-inline" style="margin-left:0.5%">
                    <label>
                      Analysis Package: &nbsp;
                    </label>
                    <div class="col-6">
                    <select id="selectAnalysisPackage" class="select2 form-control" name="template">
                      <option value="" disabled selected></option>
                      <option value="Analysis Pack - II (Advanced)">Visualization</option>
                    </select>
                  </div>

                </div>

                <button class="btn btn-primary popoverval" id="check5"  type="button" data-toggle="collapse" data-target="#collapseExample2" aria-expanded="false" aria-controls="collapseExample">
                  Icon Selector
                </button>

                  <button class="btn btn-primary" id="analysisButtonId" data-list="" onclick="analysisButtonStyling(this)" style="margin-left:20px;">Configure Button Styling</button>

                <div class="collapse" id="collapseExample2">
                  <div class="card card-body listoficon">



                    </div>
                  </div>

            </form>
          </div>

        </div>

        <div class='card customProcessMessages'>
          <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Custom Messages
            <input type="checkbox" id="toggleCustomMessagesAnalysis" class="float-right mt-2 checkboxinput custom-checkbox">
          </div>
          <script>
            $("#toggleCustomMessagesAnalysis").on("change", function() {
            $("#customMessagesDivAnalysis").toggle()

          });
          </script>
          <div class='card-body' id="customMessagesDivAnalysis" style="display:none;">
            <div class="nav flex-column nav-tabs customMeassagesNav" id="" role="tablist">
              <a class="nav-item nav-link nav-accordion_analysis" id="published-tab" data-target="published-content"  aria-controls="published" aria-selected="true">Set Message on successfully publishing dashboard<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
              <div class="nav-item nav-link"  id="published-content" aria-controls="published-content" aria-selected="false" style="display: none">
                <div class="row">
                  <div class="col-md-4">
                    Message
                  </div>
                  <div class="col-md-8">
                    <input id="published_message" name="published_message" type="text" value="" class="form-control textInput c_msg_input">
                  </div>
                  <div class="col-md-4">
                    <button type="button" class= "btn btn-primary" for="published_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons_analysis(this)">Choose Icon</button>
                  </div>
                  <div class="col-md-8">
                    <i class="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                  </div>
                </div>
              </div>
              <div class="dropdown-divider"></div>
              <a class="nav-item nav-link nav-accordion_analysis" id="share_dashboard-tab" data-target="share_dashboard-content"  aria-controls="share_dashboard" aria-selected="true">Set Message on Sharing dashboard<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
              <div class="nav-item nav-link"  id="share_dashboard-content" aria-controls="share_dashboard-content" aria-selected="false" style="display: none">
                <div class="row">
                  <div class="col-md-12 mb-2">
                    <div class="placeholder_buttons">
                      <button  class="btn btn-primary" onclick="$('#share_dashboard_message').val($('#share_dashboard_message').val() + '\{GroupName\}')">Group(s) Name</button>
                    </div>
                  </div>
                  <div class="col-md-4">
                    Message
                  </div>
                  <div class="col-md-8">
                    <input id="share_dashboard_message" name="share_dashboard_message" type="text" value="" class="form-control textInput c_msg_input">
                  </div>
                  <div class="col-md-4">
                    <button type="button" class= "btn btn-primary" for="share_dashboard_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons_analysis(this)">Choose Icon</button>
                  </div>
                  <div class="col-md-8">
                    <i class="fas fa-question msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>


        <div class="modal fade" id="choose_icons_alert_analysis" tabindex="-1" role="dialog" data-focus="false" aria-labelledby="basicModal" aria-hidden="true">
          <div class="modal-dialog modal-lg-center" style="max-width: 500px; max-height: 500px;margin-top:90px;">
            <div class="modal-content" >
              <div class="modal-header" style="max-height: 500px; margin: 10px;">
                <h4 class="modal-title">Choose Icons</h4>
              </div>
              <div class="modal-body" >
                <div class="list_of_icons_alert">
                </div>
                <div style="margin-top:10px; margin-left:16px;">
                  <button class="more_colors" id="alert_moreicons_button_analysis" data-toggle="modal" data-target="#moreicons_alert_analysis" data-backdrop="static" data-keyboard="false">More icons</button>
                </div>
              </div>
              <div class="modal-footer d-flex justify-content-between" >
                <button type="button" class="btn buttonfooter" onclick="$('#choose_icons_alert_analysis').modal('hide');" >Cancel <i class="fas fa-times"></i></button>
                <button type="button" class="btn buttonfooter" onclick="$('#choose_icons_alert_analysis').modal('hide');" style="justify-content: flex-end"  onclick="">Save  <i class="fa-solid fa-floppy-disk"></i></button>
              </div>
            </div>
          </div>
        </div>
        <div class="modal fade" id="moreicons_alert_analysis">
          <div class="modal-dialog modal-dialog-centered" style="max-width: 1022px;" role="document">
            <div class="modal-content" style="min-height: 400px;width:100%">
              <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLongTitle">More Icons</h4>
              </div>
              <div class="modal-body">
                <input type="text textInput" style="margin: 10px auto;height: 28px;padding: 5px;border: 1px solid lightgrey;border-radius: 4px;" name="search-icons-alert" id="search-icons-alert" onkeyup="searchAlertIcons_analysis(this)" placeholder="Search Icons">
                <div class="wrapper" style="height: 426px; overflow-y: auto;">
                  <div id="icons_category_alert_analysis">
                    {% for category,icons in icons_data.items %}
                    <h5>{{category}}</h5>
                    <ul class="icon-picker-list" id="icons_cat_alert">
                      {% for i in icons %}

                      <li id="icon_cat">
                        <a class="icon_alert" data-class="{{i}}" data-index="">
                          <span class="{{i}}" aria-hidden="true"></span>
                        </a>
                      </li>
                      {% endfor %}
                    </ul>

                    {% endfor %}

                  </div>
                  <div class="icons_without_category_alert" id="icons_without_category_alert_analysis" style="display: none;">
                    <ul class="icon-picker-list" id="icons_without_cat_alert">
                      {% for i in icons_without_category %}
                      <li id="icon_without_cat">
                        <a class="icon_alert" data-class="{{i}}" data-index="">
                          <span class="{{i}}" aria-hidden="true"></span>
                        </a>
                      </li>
                      {% endfor %}
                    </ul>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="$('#moreicons_alert_analysis').modal('hide');">Close <span aria-hidden="true">&times;</span></button>
                <button type="button" class="btn btn-primary" onclick="$('#moreicons_alert_analysis').modal('hide');">Save <i class="fa-solid fa-floppy-disk" style="color: white;"></i></button>
              </div>
            </div>
          </div>
        </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary previewCustomTemplate" onclick="fetchTemplate.call(this,'fetchAnalysisConfigProcessCanvas')" disabled>Custom Template</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="saveAnalysisConfig">Save changes</button>
        </div>
      </div>
      <script>
        var string = `<div class="row" white-space="nowrap">`
        var iconlist = ["fas fa-compass", "fas fa-address-card", "fas fa-clipboard", "fas fa-wallet", "fas fa-dollar-sign", "fas fa-table", "fas fa-atom", "fas fa-tasks", "fas fa-th", "fas fa-business-time", "fas fa-chart-area", "fas fa-chart-line", "fas fa-chart-bar", 'fas fa-chart-pie', "fas fa-sitemap", "fas fa-highlighter", "fas fa-th-large", "fas fa-globe", "fas fa-paperclip", "fas fa-project-diagram", "fas fa-print", "fas fa-i-cursor", "fas fa-indent", "fas fa-list-alt", "fas fa-list-ul", "fas fa-outdent", "far fa-building", "fas fa-bullseye", "fas fa-calendar", "far fa-compass"]
        for (i = 0; i < iconlist.length; i++) {
            if(iconlist.length){
            string += `<div class="col-2 icons"><a href="#" ><i class="${iconlist[i]} listoficonalert" style="font-size:1rem;color: black;font-size: 1rem;background: #fff;padding:0px;border-radius: 5px;" ></i>&nbsp&nbsp</a></div>`
            }
        }
        string += `</div>`

        $(".list_of_icons_alert").append(string)

        $('.listoficonalert').on("click", function () {
          $('.listoficonalert').each(function () {
            $(this).css("color", "black");
            $(this).css("background", "#fff");
          });
          $(this).attr("id", "selected_icon")
          $(this).css("color", "white");
          $(this).css("background", "var(--primary-color)");
          var selectedIcon1 = $(this).attr("class").split(" ")[1]
          selectedIcon = `fa ${selectedIcon1}`

          icon_for = $(this).closest("#choose_icons_alert_analysis").attr("data-for-id")
          $(`#${icon_for}`).attr("data-selectd_icon",selectedIcon)
          $(`#${icon_for}`).closest(".nav-item").find(".msg_icon").attr("class",`fa ${selectedIcon1} msg_icon`)

          $(".icon_alert").each(function(){
            $(this).removeAttr("selected_a");
            $(this).css("background-color", "#f9f9f9");
            $(this).css("color","black");
          })
        })

        function choose_alert_icons_analysis (element){

          $('#choose_icons_alert_analysis').modal('show');
          $('#choose_icons_alert_analysis').attr("data-for-id",$(element).attr("for"))

          $("#alert_moreicons_button_analysis").attr("data-for-id",$(element).attr("for"))
        }

        $("#alert_moreicons_button_analysis").click(function(){
          $("#moreicons_alert_analysis").attr("data-for-id",$(this).attr("data-for-id"))
        })


        // more icons
        $(".icon_alert").click(function () {

          $(".icon_alert").attr("selected_a", "false");
          $(".icon_alert").css("background-color", "#f9f9f9");
          $(".icon_alert").css("color", "black");

          $(this).attr("selected", "true");
          $(this).css("background-color", "var(--primary-color)");
          $(this).css("color", "var(--font-hover-color)");

          var selectedIcon = $(this).attr("data-class")

          icon_for = $(this).closest("#moreicons_alert_analysis").attr("data-for-id")
          $(`#${icon_for}`).attr("data-selectd_icon",selectedIcon)
          $(`#${icon_for}`).closest(".nav-item").find(".msg_icon").attr("class",`fa ${selectedIcon} msg_icon`)

          var list_icons = document.querySelectorAll(".icons a .listoficonalert")
          list_icons.forEach(element => {
            id = element.id
            element.removeAttribute('id')
            element.style.backgroundColor = "white"
            element.style.color = "black"
          })
        })


        function searchAlertIcons_analysis(obj) {
          var input, filter, ul, div, li, a, i, txtValue, h5;
          input = obj;
          if (input.value.length > 0) {
            $("#icons_category_alert_analysis").css("display", "none")
            $("#icons_without_category_alert_analysis").css("display", "block")
            filter = input.value.toUpperCase();
            div = document.getElementById("icons_without_category_alert_analysis");
            ul = document.getElementsByTagName("ul");
            li = div.getElementsByTagName("li");
            for (i = 0; i < li.length; i++) {
              a = li[i].getElementsByTagName("a")[0];
              txtValue = a.getAttribute("data-class");
              if (txtValue.toUpperCase().indexOf(filter) > -1) {
                li[i].style.display = "";
              } else {
                li[i].style.display = "none";
              }
            }
          }
          else {
            $("#icons_category_alert_analysis").css("display", "block")
            $("#icons_without_category_alert_analysis").css("display", "none")
          }
        }

        $(".nav-accordion_analysis").click(function(){
          var content = $(this).attr("data-target")
          if($(`#${content}`).css("display") == "none"){
          $(`#${content}`).slideDown();
          $(this).children("span").html('<i class="fa fa-chevron-up" style="float: right;"></i>')
          }else{
          $(`#${content}`).slideUp();
          $(this).children("span").html('<i class="fa fa-chevron-down" style="float: right;"></i>')
          }
        })
      </script>
    </div>
  </div>

  <div class="modal fade" id="computationModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="computationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header" style='background:#565a5e; color:white;'>
          <h5 class="modal-title" id="computationModalLabel" style="margin-left: 45%;">Computation</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="overflow-y: scroll ;max-height: 34rem;">
          <div class='card'>
            <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Select Model</div>
            <div class='card-body' id="computationModelContainer">
              <div class="row">
                <div class="form-group col-12">
                  <input type="text" placeholder="Tab header name" id="tabHeaderComp">
                </div>
                <div class="form-group col-4">
                  <select id="selectComputationModel" class="select2 form-control" name="computationModel">
                    <option value="" disabled selected>Models</option>
                    {% for i in computationModelList %}
                    <option value="{{i}}">{{i}}</option>
                    {%endfor%}
                  </select>
                </div>
                <br>
                <div class="form-group col-4">
                  <select id="selectComputationTemplate" class="select2 form-control">
                    <option value="System defined template">System defined template</option>
                    <option value="Custom defined template">Custom defined template</option>
                  </select>
                </div>
                <br>
                <div class="form-group col-4">
                  <select id="selectComputationPrevRun" class="select2 form-control">
                    <option value="yes">Show Previous Run</option>
                    <option value="no">Hide Previous Run</option>
                  </select>
                </div>
                <div class="col-4">
                  <button onclick="computationButtonStyling(this)" id="computationButtonId" data-list="" class="btn btn-primary">Configure Button Styling</button>
                </div>
                <div class="col-4">
                  <button onclick="computationConfigureGlobalVariables.call(this)" id="computationConfigureGlobalVariableId" data-list="" class="btn btn-primary">Configure Global Variables</button>
                </div>
                <div  class="custom-control custom-checkbox col-4">
                  <input type="checkbox" id="configure_scenario_btn" name="configure_scenario_btn" class="checkboxinput custom-control-input">
                  <label for="configure_scenario_btn" class="custom-control-label">Configure scenario button</label>
              </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-xs btn-primary previewCustomTemplate" onclick="fetchTemplate.call(this,'fetchComputationConfigProcessCanvas')" disabled>Custom Template</button>
          <button type="button" class="btn btn-xs btn-primary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-xs btn-primary" id="saveComputationModel">Save</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="configureGlobalVariableModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="configureGlobalVariableModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header" style='background:#565a5e; color:white;'>
          <h5 class="modal-title" id="configureGlobalVariableModalLabel">Configure Global Variables</h5>
        </div>
        <div class="modal-body">
          <button id="select_global_variable_button" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
            Select Global Variable
            <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" id="select_global_variable_dropdown" style="max-height:20rem;"></ul>
            <div id="global_variable_configs">

            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-xs btn-primary" onclick="closeGlobalVariableConfigs.call(this)">Close</button>
          <button type="button" class="btn btn-xs btn-primary" onclick="saveGlobalVariableConfigs.call(this)">Save</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="gVar_filter_modal">
    <div class="modal-dialog modal-lg modal-dialog-centered" style="max-width: 1090px;">
    <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
        <h6 class="modal-title">Set Conditions for Global Variable</h6>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
            <div class="btn-group">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                {{_("Add Filter")}}
                <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" id="gVar_condition_dropdown" style="max-height:20rem;">
                </ul>
            </div>
            <div class="row" id="items">
                <table class="table" id="gVar_filter_table">
                </table>
            </div>
        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
            <button type="button" class="btn buttonfooter" data-dismiss="modal">Close</button>
            <button type="button" id="gVar_filter_btn_saveVariable" class="btn buttonfooter" data-dismiss="modal">Save</button>
        </div>
    </div>
    </div>
  </div>


  <div class="modal fade" id="documentModal" role="dialog" data-focus="false" aria-labelledby="documentModalLabel" aria-hidden="true"  style= "height: 100%;">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header" style='background:#565a5e; color:white;text-align: center;'>
          <h5 class="modal-title" id="documentModalLabel" style="width:100%;text-align: center;">Configure Upload elements</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style= "height: 74vh;overflow-y: auto">

          <div class='card'>
          <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Configure Upload</div>
          <div class='card-body' style="overflow-y: scroll ;max-height: 32rem;">
            <form id="ConfigureUploadform" method="post">
              {% csrf_token %}
              <div class="row">
                <div class="form-group col-6" style="margin-left:0.5rem;">
                  <input type="text" placeholder="Tab Header" class="tabHeader" id="tabHeaderDocument" data-spanID="documentErrorSpan">
                </div>
              </div>
              <div class="row" style="color:red;display: none;">
                <div class="form-group col-12">
                  <span id="#documentErrorSpan">
                  Tab header must contain unique values. A tab with the same name already exists in the sub-process.
                </span>
                </div>
              </div>
              <div class="row tabHeaderEmptyValidation" style="color:red;display:none;">
                <div class="form-group col-12">
                  <span>
                    Tab header is a mandatory field.
                  </span>
                </div>
              </div>
              <div class="form-group col-12">
                <select id="selectDataconnector" class="select2 form-control" name="template">
                <option value="" disabled selected>Data Connector</option>
                {% for i in dataconnector%}
                 <option value="{{i}}">{{i}}</option>
                {%endfor%}
                </select>
              </div>
              <div class="form-group col-12">
                <select id="selectUploadTemplate" class="select2 form-control">
                  <option value="System defined template">System defined template</option>
                  <option value="Custom defined template">Custom defined template</option>
                </select>
              </div>
              <div class="form-group col-12">
                <select id="selectDocumentTable" class="select2 form-control" name="table" multiple size="{{tableList.length}}"data-placeholder="Table Name">

                  {% for i in tableList%}
                  <option value="{{i}}">{{i}}</option>
                  {%endfor%}
                </select>
              </div>

              <div class="form-group col-12" id="dropFields_upload">
                <div>
                  <input type='button' id="dropFields_add_upload" data-toggle="modal" data-target="#dropFieldsAddUpload" data-data="{}" onclick="showDropFieldsUpload.call(this)" value='Configure Drop Fields while Downloading Format' style='border-radius: 5px; color: white; width:100%; background-color: rgb(86, 90, 94); border-color: rgb(86, 90, 94);'>
                </div>
                <script>
                  var mandatory_fields = {}
                  var mandate = false
                  function showDropFieldsUpload(){
                    tables_selected = $("#selectDocumentTable").val()
                    reload_data = $(this).attr("data-data")
                    reload_data = JSON.parse(reload_data)
                    if(tables_selected.constructor === Array ){
                      $('#dropFieldsAddUpload').find('.modal-body').empty()
                      for(let i in tables_selected){
                        $('#dropFieldsAddUpload').find('.modal-body').append(`<div class='form-group'>
                          <label class="acies_label col-md-12">Drop fields while downloading format for ${tables_selected[i]}:</label>
                          <select id="dropFieldsUpload_${i}" class="select2 form-control dropclass" name="${tables_selected[i]}" multiple>

                          </select>
                        </div>`)
                        $(`#dropFieldsUpload_${i}`).select2()

                        $.ajax({
                                url: window.location.pathname,

                                data: {
                                  'operation': 'dropFieldList',
                                  'tableName':tables_selected[i],
                                  'index': i,
                                },
                                type: "POST",
                                dataType: "json",
                                success: function (data) {
                                    ind = data.index
                                    table_name = data.table_name
                                    mandatory_fields[table_name] = data.mandatory_fields
                                    $(`#dropFieldsUpload_${ind}`).empty()

                                    for (var i = 0; i < data.fieldList.length; i++) {
                                          $(`#dropFieldsUpload_${ind}`).append(new Option(data.fieldList[i], data.fieldNameList[i]));
                                        }

                                    reload_val = reload_data[table_name]
                                    $(`#dropFieldsUpload_${ind}`).val(reload_val).trigger('change')
                                  },
                                error: function () {
                                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                }
                        })
                      }
                    }

                    $("#saveDropFieldsAddUpload").off('click').on('click', function(){
                        dropMul = {}
                        $('#dropFieldsAddUpload').find('.modal-body').find('select').each(function(){
                          dropMul[$(this).attr('name')] = $(this).val()
                        })
                        for (var key in dropMul) {
                          if (dropMul.hasOwnProperty(key) && mandatory_fields.hasOwnProperty(key)) {
                            var list1 = dropMul[key];
                            var list2 = mandatory_fields[key];

                            for (var i = 0; i < list1.length; i++) {
                              if (list2.includes(list1[i])) {
                                mandate = true
                                Swal.fire({
                                  icon: 'warning',
                                  text: "Mandatory fields are dropped in one or more of the tables selected. Consider not dropping the column/s or check that the column/s are auto-computed.",
                                  showCancelButton: true,
                                  confirmButtonText: 'Continue',
                                  cancelButtonText: 'Cancel',
                                }).then((result)=>{
                                  if(result.isConfirmed){
                                    $("#dropFields_add_upload").attr('data-data',JSON.stringify(dropMul))
                                    $('#dropFieldsAddUpload').modal('hide')
                                  }
                                })
                              }
                              else{
                                mandate = false
                              }
                            }
                          }
                        }
                        if(!mandate){
                          $("#dropFields_add_upload").attr('data-data',JSON.stringify(dropMul))
                          $('#dropFieldsAddUpload').modal('hide')
                        }
                    })
                  }
                </script>
                <div class="modal" id="dropFieldsAddUpload" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="dropFieldsAddUpload" aria-hidden="true" >
                  <div class="modal-dialog modal-lg modal-dialog-centered" style="justify-content: center;">
                    <div class="modal-content" style="width: 100%;" >

                      <div class="modal-header" style="width:100%;background:#565a5e;text-align: center;justify-content: center;">
                        <h6 class="modal-title" style="color:white;margin:auto;font-weight:bold;">Configure Drop Fields while Downloading Format</h6>

                      </div>

                      <div class="modal-body" style="height:200px;overflow-x:hidden;overflow-y:auto">

                      </div>

                      <div class="modal-footer">
                        <button type="button" id="saveDropFieldsAddUpload" class="btn btn-primary rounded px-2" >Save</button>
                        <button type="button" class="btn btn-primary  rounded px-2 closeBasicFilter" onclick="$('#dropFieldsAddUpload').modal('hide')">Close</button>
                      </div>

                    </div>
                  </div>
                </div>

              </div>
              <div class="form-group col-12">
                <label class="acies_label col-md-12">Escape Special Characters:</label>
                <select id="selectCharactersToBeEscapedBU" class="select2 form-control" name="selectCharactersToBeEscapedBU" multiple>
                  <option value=">">></option>
                  <option value="<"><</option>
                  <option value="&">&</option>
                  <option value="=">=</option>
                  <option value="+">+</option>
                  <option value="-">-</option>
                  <option value="@">@</option>
                </select>
              </div>
              <div class="form-group col-12">
                <div class="uploadview_custom_messages card form-group col-12">
                  <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Custom Messages
                    <input type="checkbox" id="toggleCustomUploadViewMessages" class="float-right mt-2 checkboxinput custom-checkbox">
                    <script>
                      $("#toggleCustomUploadViewMessages").on("change", function() {
                        if($(this).prop("checked")){
                          $("#customUploadViewMessagesDiv").show()
                        }
                        else{
                          $("#customUploadViewMessagesDiv").hide()
                        }

                    });
                    </script>
                    <div class='card-body' id="customUploadViewMessagesDiv" style="display:none; padding: 1.25rem 0px">
                      <div class="nav flex-column nav-tabs customMeassagesNav" id="" role="tablist">
                        <a class="nav-item nav-link nav-accordion" id="successful_validation-tab" data-target="successful_validation-content"  aria-controls="successful_validation" aria-selected="true" style="color: black;font-size: 13px;font-weight: normal;">Set Message on successful validations<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="successful_validation-content" aria-controls="successful_validation-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4" style="color: black;font-size: 13px;font-weight: normal;">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="successful_validation_message" name="successful_validation_message" style="color: black;font-size: 13px;font-weight: normal;" type="text" value="Validations successful! Uploading in progress..." data-value="Validations successful! Uploading in progress..." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" style="font-size: 13px;font-weight: normal;" for="successful_validation_message" data-toggle="modal" style="margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;color: black;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion" style="color: black;font-size: 13px;font-weight: normal;" id="successful_upload-tab" data-target="successful_upload-content"  aria-controls="successful_upload" aria-selected="true">Set Message on successful upload<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="successful_upload-content" aria-controls="successful_upload-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4" style="color: black;font-size: 13px;font-weight: normal;">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="successful_upload_message" name="successful_upload_message" style="color: black;font-size: 13px;font-weight: normal;" type="text" value="File uploaded successfully!" data-value="File uploaded successfully!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" style="font-size: 13px;font-weight: normal;" for="successful_upload_message" data-toggle="modal" style="margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;color: black;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion" style="color: black;font-size: 13px;font-weight: normal;" id="computation_configured-tab" data-target="computation_configured-content"  aria-controls="computation_configured" aria-selected="true">Set Message on successfully configuring Computation Logic<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="computation_configured-content" aria-controls="computation_configured-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4" style="color: black;font-size: 13px;font-weight: normal;">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="computation_configured_message" name="computation_configured_message" style="color: black;font-size: 13px;font-weight: normal;" type="text" value="Configuration saved successfully!" data-value="Configuration saved successfully!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" style="font-size: 13px;font-weight: normal;" for="computation_configured_message" data-toggle="modal" style="margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;color: black;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion" style="color: black;font-size: 13px;font-weight: normal;" id="save_column_mapper-tab" data-target="save_column_mapper-content"  aria-controls="save_column_mapper" aria-selected="true">Set Message on successfully configuring Column Mappper<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="save_column_mapper-content" aria-controls="save_column_mapper-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4" style="color: black;font-size: 13px;font-weight: normal;">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="save_column_mapper_message" name="save_column_mapper_message" style="color: black;font-size: 13px;font-weight: normal;" type="text" value="Configuration saved successfully!" data-value="Configuration saved successfully!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" style="font-size: 13px;font-weight: normal;" for="save_column_mapper_message" data-toggle="modal" style="margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;color: black;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion" style="color: black;font-size: 13px;font-weight: normal;" id="submit_mapper_config-tab" data-target="submit_mapper_config-content"  aria-controls="submit_mapper_config" aria-selected="true">Set Message on successfully submitting Column Mappper configuration<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="submit_mapper_config-content" aria-controls="submit_mapper_config-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4" style="color: black;font-size: 13px;font-weight: normal;">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="submit_mapper_config_message" name="submit_mapper_config_message" style="color: black;font-size: 13px;font-weight: normal;" type="text" value="Mapper configuration submitted successfully!" data-value="Mapper configuration submitted successfully!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" style="font-size: 13px;font-weight: normal;" for="submit_mapper_config_message" data-toggle="modal" style="margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;color: black;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion" style="color: black;font-size: 13px;font-weight: normal;" id="select_table_mapper_config-tab" data-target="select_table_mapper_config-content"  aria-controls="select_table_mapper_config" aria-selected="true">Set Warning message if Table name is not selected for Column Mappper configuration<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="select_table_mapper_config-content" aria-controls="select_table_mapper_config-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4" style="color: black;font-size: 13px;font-weight: normal;">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="select_table_mapper_config_message" name="select_table_mapper_config_message" style="color: black;font-size: 13px;font-weight: normal;" type="text" value="Select a Table Name!" data-value="Select a Table Name!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" style="font-size: 13px;font-weight: normal;" for="select_table_mapper_config_message" data-toggle="modal" style="margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;color: black;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion" style="color: black;font-size: 13px;font-weight: normal;" id="sent_approval_upload-tab" data-target="sent_approval_upload-content"  aria-controls="sent_approval_upload" aria-selected="true">Set message if Data is sent for Approval<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="sent_approval_upload-content" aria-controls="sent_approval_upload-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-12 mb-2">
                              <div class="placeholder_buttons">
                                <button style="font-size: 13px;font-weight: normal;" class="btn btn-primary" onclick="event.preventDefault();$('#sent_approval_upload_message').val($('#sent_approval_upload_message').val() + '\{Table Name\}')">Table Name</button>
                              </div>
                            </div>
                            <div class="col-md-4" style="color: black;font-size: 13px;font-weight: normal;">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="sent_approval_upload_message" name="sent_approval_upload_message" style="color: black;font-size: 13px;font-weight: normal;" type="text" value="Row(s) of {Table Name} has been sent for approval." data-value="Row(s) of {Table Name} has been sent for approval." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" style="font-size: 13px;font-weight: normal;" for="sent_approval_upload_message" data-toggle="modal" style="margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;color: black;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion" style="color: black;font-size: 13px;font-weight: normal;" id="connection_validation_message-tab" data-target="connection_validation_message-content"  aria-controls="connection_validation_message" aria-selected="true">Set Message on successful configuration of connection in SFTP connectors<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="connection_validation_message-content" aria-controls="connection_validation_message-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4" style="color: black;font-size: 13px;font-weight: normal;">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="connection_validation_message" style="color: black;font-size: 13px;font-weight: normal;" name="connection_validation_message" type="text" value="Validation Succesful!" data-value="Validation Succesful!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" style="font-size: 13px;font-weight: normal;" for="connection_validation_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-check msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a class="nav-item nav-link nav-accordion" style="color: black;font-size: 13px;font-weight: normal;" id="invalid_credentials_message-tab" data-target="invalid_credentials_message-content"  aria-controls="invalid_credentials_message" aria-selected="true">Set Message on invalid credentials while configuring connection in SFTP connectors<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="invalid_credentials_message-content" aria-controls="invalid_credentials_message-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-4" style="color: black;font-size: 13px;font-weight: normal;">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="invalid_credentials_message" style="color: black;font-size: 13px;font-weight: normal;" name="invalid_credentials_message" type="text" value="Invalid Credentials." data-value="Invalid Credentials." class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" style="font-size: 13px;font-weight: normal;" for="invalid_credentials_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-times msg_icon" data-value="fas fa-times msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <a class="nav-item nav-link nav-accordion" style="color: black;font-size: 13px;font-weight: normal;" id="validation_failure_message-tab" data-target="validation_failure_message-content"  aria-controls="validation_failure_message" aria-selected="true">Set Data Validation Failure Message on File upload using SFTP connectors<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="validation_failure_message-content" aria-controls="validation_failure_message-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-12 mb-2">
                              <div class="placeholder_buttons">
                                <button style="font-size: 13px;font-weight: normal;" class="btn btn-primary" onclick="event.preventDefault();$('#validation_failure_message').val($('#validation_failure_message').val() + '\{Validation Message\}')">Validation Message</button>
                              </div>
                            </div>
                            <div class="col-md-4" style="color: black;font-size: 13px;font-weight: normal;">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="validation_failure_message" style="color: black;font-size: 13px;font-weight: normal;" name="validation_failure_message" type="text" value="Data Validation Error! \n {Validation Message}" data-value="Data Validation Error! \n {Validation Message}" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" style="font-size: 13px;font-weight: normal;" for="validation_failure_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-times msg_icon" data-value="fas fa-times msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                        <a class="nav-item nav-link nav-accordion" style="color: black;font-size: 13px;font-weight: normal;" id="export_successful_message-tab" data-target="export_successful_message-content"  aria-controls="export_successful_message" aria-selected="true">Set successful export of data to Table using SFTP connectors<span><i class="fa fa-chevron-down" style="float: right;"></i></span> </a>
                        <div class="nav-item nav-link"  id="export_successful_message-content" aria-controls="export_successful_message-content" aria-selected="false" style="display: none">
                          <div class="row">
                            <div class="col-md-12 mb-2">
                              <div class="placeholder_buttons">
                                <button style="font-size: 13px;font-weight: normal;" class="btn btn-primary" onclick="event.preventDefault();$('#export_successful_message').val($('#export_successful_message').val() + '\{Table Name\}')">Table Name</button>
                              </div>
                            </div>
                            <div class="col-md-4" style="color: black;font-size: 13px;font-weight: normal;">
                              Message
                            </div>
                            <div class="col-md-8">
                              <input id="export_successful_message" style="color: black;font-size: 13px;font-weight: normal;" name="export_successful_message" type="text" value="Data exported to {Table Name} successfully!" data-value="Data exported to {Table Name} successfully!" class="form-control textInput c_msg_input">
                            </div>
                            <div class="col-md-4">
                              <button type="button" class= "btn btn-primary" style="font-size: 13px;font-weight: normal;" for="export_successful_message" data-toggle="modal" style="width:100%;margin-top: 15px;" onclick="choose_alert_icons(this)">Choose Icon</button>
                            </div>
                            <div class="col-md-8">
                              <i class="fas fa-check msg_icon" data-value="fas fa-times msg_icon" style="font-size: 30px;margin-top: 15px;"></i>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="custom-control custom-checkbox" style="margin-top: 3%;">
                <input type="checkbox" id="allow_upload_custV" name="allow_upload_custV" class="checkboxinput custom-control-input" value="copy">
                <label for="allow_upload_custV" class="custom-control-label">Allow user to add custom validation ?</label>
              </div>

              <div class="custom-control custom-checkbox" style="margin-top: 1%;">
                <input type="checkbox" id="allow_map_column" name="allow_map_column" class="checkboxinput custom-control-input" value="copy">
                <label for="allow_map_column" class="custom-control-label">Allow user to configure map column ?</label>
              </div>

              <div class="custom-control custom-checkbox" style="margin-top: 1%;">
                <input type="checkbox" id="allow_comp_logic" name="allow_comp_logic" class="checkboxinput custom-control-input" value="copy">
                <label for="allow_comp_logic" class="custom-control-label">Allow user to configure computation logic ?</label>
              </div>

              <div class="custom-control custom-checkbox" style="margin-top: 1%;">
                <input type="checkbox" id="allow_stfp_upload" name="allow_stfp_upload" class="checkboxinput custom-control-input">
                <label for="allow_stfp_upload" class="custom-control-label">Allow SFTP upload ?</label>
              </div>

              <div class="custom-control custom-checkbox" style="margin-top: 1%;">
                <input type="checkbox" id="allow_upload_compute" name="allow_upload_compute" class="checkboxinput custom-control-input">
                <label for="allow_upload_compute" class="custom-control-label">Run compute on upload ?</label>
              </div>

              <br>
              <div class="form-group row computeUploadCard" style="display:none">
                <div class="col-md-4">
                  <label class="acies_label">Table:</label>
                  <select id="upload_comp_table" class="select2 form-control" name="upload_comp_table">
                    <option value="" selected disabled>Choose one</option>
                    {% for i in tableList%}
                      <option value="{{i}}">{{i}}</option>
                    {%endfor%}
                  </select>
                </div>
                <div class="col-md-4">
                  <label class="acies_label">Computation model:</label>
                  <select id="upload_comp_model" class="select2 form-control" name="upload_comp_model">
                    <option value="" selected disabled>Choose one</option>
                    {% for i in computationModelList%}
                      <option value="{{i}}">{{i}}</option>
                    {%endfor%}
                  </select>
                </div>
                <div class="col-md-4">
                  <label class="acies_label">Import element:</label>
                  <select id="upload_comp_importEle" class="select2 form-control" name="upload_comp_importEle">
                  </select>
                </div>
              </div>

              <br>
              <button class="btn btn-primary popoverval" id="check6"  type="button" data-toggle="collapse" data-target="#collapseExample10" aria-expanded="false" aria-controls="collapseExample10">
                Icon Selector
              </button>
              <button class="btn btn-primary" id="uploadButtonId" data-list="" onclick="uploadButtonStyling(this)" style="margin-left:5px;">Configure Button Styling</button>
              <button class="btn btn-primary customValbtnDev" style="margin-left:5px;" type="button" data-process_type="upload" data-toggle="modal" data-target="#customValidationDev" onclick="showValModal(this)">Custom Validation</button>
              <button  name="fieldUploadMapper"  type="button" style="margin-left: 5px;" class="btn btn-primary fieldUploadMapperButton"  data-table-name="" data-toggle="modal" data-target="#fieldUploadMapper">Map Columns
              </button>
              <button  name="computedFieldMapper"  type="button" class="btn btn-primary computedFieldMapperButton"  data-table-name="" data-toggle="modal" data-target="#computedFieldMapper" onclick="CompMapperDev(this)">&nbsp;Add Computation Logic
              </button>
              <div class="collapse" id="collapseExample10">
                <div class="card card-body listoficon">
                </div>
                </div>

              </div>
            </form>
          </div>

          <div class='card' >
            <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Select Components</div>
            <div id ="Uploadcheckbox" class="selectComponents " style="overflow-y: auto;">
              <div id="div_id_active" class="custom-control custom-checkbox" style="margin-left:2.5rem;">
                <input type="checkbox" name="select_All" class="checkboxinput custom-control-input" id="select_All" >
                <label for="select_All" class="custom-control-label"> Select All</label>
              </div><br>
              <div class="form-group" style="margin-left:2.5rem;">
                <div id="div_id_active" class="custom-control custom-checkbox">
                  <input type="checkbox" name="ignore_ne+'1'" class="checkboxinput custom-control-input uploadScreen-input" id="ignore_ne+'1'">
                  <label for="ignore_ne+'1'" class="custom-control-label">
                    Prompt to ignore non-existing columns or not
                  </label>
                </div>
              </div>
              <div class="form-group" style="margin-left:2.5rem;">
                <div id="" class="custom-control custom-checkbox">
                  <input type="checkbox" name="tableShow+'1'" class="checkboxinput custom-control-input uploadScreen-input" id="tableShow+'1'">
                  <label for="tableShow+'1'" class="custom-control-label">
                    Show table information
                  </label>
                </div>
              </div>
              {%for i in selectComponents%}
                <div class="form-group" style="margin-left:2.5rem;">
                  <div id="div_id_active" class="custom-control custom-checkbox">
                    <input type="checkbox" name="{{i}}" class="checkboxinput custom-control-input uploadScreen-input" id="{{i}}+'1'">
                    <label for="{{i}}+'1'" class="custom-control-label">
                      {{i}}
                    </label>
                  </div>
                </div>
              {%endfor%}
              <div class="form-group" style="margin-left:2.5rem;">
                <div id="" class="custom-control custom-checkbox">
                  <input type="checkbox" name="downloadFormatBtn+'1'" class="checkboxinput custom-control-input uploadScreen-input" id="downloadFormatBtn+'1'">
                  <label for="downloadFormatBtn+'1'" class="custom-control-label">
                    Download Format
                  </label>
                </div>
              </div>
              <div class="form-group" style="margin-left:2.5rem;">
                <div id="" class="custom-control custom-checkbox">
                  <input type="checkbox" name="downloadDataBtn+'1'" class="checkboxinput custom-control-input uploadScreen-input" id="downloadDataBtn+'1'">
                  <label for="downloadDataBtn+'1'" class="custom-control-label">
                    Show "Download data" button
                  </label>
                </div>
              </div>
              <div class="form-group" style="margin-left:2.5rem;">
                <div id="" class="custom-control custom-checkbox">
                  <input type="checkbox" name="uploadHistoryBtn+'1'" class="checkboxinput custom-control-input uploadScreen-input" id="uploadHistoryBtn+'1'">
                  <label for="uploadHistoryBtn+'1'" class="custom-control-label">
                    Show "Upload history" button
                  </label>
                </div>
              </div>
              <div class="form-group" style="margin-left:2.5rem;">
                <div id="" class="custom-control custom-checkbox">
                  <input type="checkbox" name="lastUploadErrorsBtn+'1'" class="checkboxinput custom-control-input uploadScreen-input" id="lastUploadErrorsBtn+'1'">
                  <label for="lastUploadErrorsBtn+'1'" class="custom-control-label">
                    Show "Last upload errors" button
                  </label>
                </div>
              </div>
              <div class="form-group" style="margin-left:2.5rem;">
                <div id="" class="custom-control custom-checkbox">
                  <input type="checkbox" name="detailedErrorLogBtn+'1'" class="checkboxinput custom-control-input uploadScreen-input" id="detailedErrorLogBtn+'1'">
                  <label for="detailedErrorLogBtn+'1'" class="custom-control-label">
                    Show "Detailed error log" button
                  </label>
                </div>
              </div>
              <div class="form-group" style="margin-left:2.5rem;">
                <div id="" class="custom-control custom-checkbox">
                  <input type="checkbox" name="advance_setting_check+'1'" class="checkboxinput custom-control-input uploadScreen-input" id="advance_setting_check+'1'">
                  <label for="advance_setting_check+'1'" class="custom-control-label">
                    Advance settings
                  </label>
                </div>
              </div>
              <script>

                document.getElementById('select_All').onclick = function() {
                var checkboxes1 = $(this).parent().parent().find('input[type=checkbox]')
                for (var checkbox of checkboxes1) {
                checkbox.checked = this.checked;
                }}

              </script>

            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary previewCustomTemplate" onclick="fetchTemplate.call(this,'fetchUploadConfigProcessCanvas')" disabled>Custom Template</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal" id="close">Close</button>
          <button type="button" class="btn btn-primary" id="savedocumentConfig"  >Save</button>
          <script>
          document.getElementById('close').onclick = function() {
            var self=document.getElementById('select_All')
            var checkboxes1 = $(self).parent().parent().find('input[type=checkbox]')
          for (var checkbox of checkboxes1) {
            checkbox.checked = self.unchecked;
          }
            $('.selectComponents').css('display','none');
            $('#selectDocumentTable').val('').trigger("change");
            $('#selectDataconnector').val('').trigger("change");
            $('#configuration_val_row_dev').empty()
            $('.customValbtnDev').attr('data-data_config','{}')
            $('.carousel').carousel(0);
            $("#allow_upload_custV").prop("checked",false);
            $("#allow_map_column").prop("checked",false);
            $("#allow_comp_logic").prop("checked",false);
            $("#allow_stfp_upload").prop("checked",false);
            $('#custom_validation_table_dev').empty()
            $('.computedFieldMapperButton').attr('data-data_config','{}')
            $('#custommValidationSelection_dev').val('').trigger('change')
            $('#custommValidationSelection_dev').empty()
            $('.fieldUploadMapperButton').attr('data-data_config','[]')
            $("#allow_upload_compute").prop("checked",false);
            $("#allow_upload_compute").trigger('change')
            $('#upload_comp_table').val('').trigger("change");
            $('#upload_comp_model').val('').trigger("change");
            $('#upload_comp_importEle').empty();
            }

            $("#allow_upload_compute").on("change",function(){
              if($(this).prop("checked")){
                $(".computeUploadCard").css("display","flex")
              }else{
                $(".computeUploadCard").css("display","none")
              }
            })

            $("#upload_comp_model").on("change", function(){

              if($(this).val()){
                $.ajax({
                  url: window.location.pathname,
                  data: {
                    'operation': 'get_import_name_comp',
                    'model_name': $(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#upload_comp_importEle').empty();
                    $("#upload_comp_importEle").append(`<option value="" selected disabled>Choose one</option>`)
                    for (let [key,value] of Object.entries(data)) {
                      $("#upload_comp_importEle").append(`<option value="${key}">${value}</option>`);
                    }

                    reload = $('#upload_comp_importEle').attr("data-data")
                    if(reload){
                      $("#upload_comp_importEle").val(reload).trigger('change')
                    }
                  }, error: ()=>{
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                });
              }

            })


          </script>
        </div>

      </div>
    </div>
  </div>

  <div class="modal fade" id="ocrModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="ocrModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header" style='background:#565a5e; color:white;'>
          <h5 class="modal-title" id="ocrModalLabel" style="margin-left: 26.5%;">Configure OCR</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class='card'>
            <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Feature selection
            </div>
            <div class='card-body'>
              <form id="analysisForm" method="post">
                {% csrf_token %}
                <div class="row">
                  <div class="form-group col-6">
                    <input type="text" placeholder="Tab Header" class="tabHeader" id="tabHeaderOcr"
                      data-spanID="analysisErrorSpan">
                  </div>
                </div>
                <div class="row" style="color:red;display: none;">
                  <div class="form-group col-12">
                    <span id="#analysisErrorSpan">
                      Tab header must contain unique values. A tab with the same name already exists in the sub-process.
                    </span>
                  </div>
                </div>
                <div class="row tabHeaderEmptyValidation" style="color:red;display:none;">
                  <div class="form-group col-12">
                    <span>
                      Tab header is a mandatory field.
                    </span>
                  </div>
                </div>

                <div class="form-group row form-inline" style="margin-left:0.5%">
                  <label>
                    Enter Table Name: &nbsp;
                  </label>
                  <div class="col-6">
                    <select id="tablenameocr" class="select2 form-control" name="template">
                      <option value="" disabled selected></option>
                      {% for i in tableList%}
                      <option value="{{i}}">{{i}}</option>
                      {%endfor%}
                    </select>
                  </div>
                </div>
                <div class="form-group row form-inline" style="margin-left:0.5%">
                  <label>
                    Select column name: &nbsp;
                  </label>

                  <div class="col-6">
                    <select id="columnocr" multiple class="select2 form-control" name="template">

                    </select>
                  </div>
                </div>

                <br>
                <div class="form-group row form-inline" style="margin-left:0.5%">
                  <label>
                    Accuracy percentage: &nbsp;
                  </label>
                  <input type="number" min="0" max="100" name="tabNumber" id="ocrperc" style="text-align:center;">
                </div>

                <div class="form-group row form-inline" style="margin-left:0.5%">
                  <label>
                    Select Operation Type: &nbsp;
                  </label>
                  <div class="col-6">
                    <select id="selectOperationocr" class="select2 form-control" name="template">
                      <option value="" disabled selected></option>
                      <option value="single_image">Single Image</option>
                      <option value="pdf" disbaled>PDF</option>
                      <option value="folder" disabled>Folder with images</option>
                    </select>
                  </div>

                </div>
                    <button class="btn btn-primary popoverval" id="check8" type="button" data-toggle="collapse"
                    data-target="#collapseExample11" aria-expanded="false" aria-controls="collapseExample11">
                    Icon Selector
                  </button>
                <div class="collapse" id="collapseExample11">
                  <div class="card card-body listoficon">
                  </div>
                </div>

              </form>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="SaveButtonOcr">Save changes</button>
        </div>

      </div>
    </div>
  </div>


  <div class="modal fade" id="pivotReportModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="pivotReportModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header" style='background:#565a5e; color:white;'>
          <h5 class="modal-title" id="pivotReportModalLabel" style="margin-left: 26.5%;">Configure Pivot Report</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class='card'>
            <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Pivot Report Configuration
            </div>
            <div class='card-body'>
              <form id="analysisForm" method="post">
                {% csrf_token %}
                <div class="row">
                  <div class="form-group col-6">
                    <input type="text" placeholder="Tab Header" class="tabHeader" id="tabHeaderPivotReport"
                      data-spanID="analysisErrorSpan">
                  </div>
                </div>
                <div class="row" style="color:red;display: none;">
                  <div class="form-group col-12">
                    <span id="#analysisErrorSpan">
                      Tab header must contain unique values. A tab with the same name already exists in the sub-process.
                    </span>
                  </div>
                </div>
                <div class="row tabHeaderEmptyValidation" style="color:red;display:none;">
                  <div class="form-group col-12">
                    <span>
                      Tab header is a mandatory field.
                    </span>
                  </div>
                </div>
                <br>

                <h7 style= "font-weight:bold">Category Name:&nbsp;</h7>
                <div class="pivot_category_name_div list-group" id="formfieldList" >
                  <input  id='pivot_category_name' class="form-control p-2" style="padding-left:4px;"  placeholder="Enter Category Name">
                </div>
                <br>
                <h7 style= "font-weight:bold">Report Name:&nbsp;</h7>
                <div class="pivot_report_name_div list-group" id="formfieldList" >
                  <input id='pivot_report_name' class="form-control p-2" style="padding-left:4px;"  placeholder="Enter Report Name">
                </div>
                <br>
                <button class="btn btn-primary popoverval" id="check12"  type="button" data-toggle="collapse" data-target="#collapseExample12" aria-expanded="false" aria-controls="collapseExample12">
                  Icon Selector
                </button>
              <div class="collapse" id="collapseExample12">
                <div class="card card-body listoficon">
                </div>
                </div>

              </form>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="SaveButtonPivotReport">Save changes</button>
        </div>

      </div>
    </div>
  </div>
</div>


  <div class="modal fade" id="ProcessModal" role="dialog" data-focus="false" aria-labelledby="ProcessModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="chartModalLabel">Process Tagging</h5>
          <a {% if current_application_code != 'App0' %} {% if current_application_code == 'Dev' %} {% if current_dev_mode == 'Edit' %} {% if edit_app_code != 'Not Selected' %} href="{% url 'users:homePage' edit_app_code %}" {% else %} href="{% url 'users:homePage' 'Dev' %}" {% endif %} {% elif current_dev_mode == 'Build' %} {% if build_app_code != 'Not Selected' %} href="{% url 'users:homePage' build_app_code current_dev_mode %}" {% else %} href="{% url 'users:select_application' %}"  {% endif %}  {% endif %} {% else %} href="{% url 'users:homePage' current_application_code 'User' %}" {% endif %} {% else %} href="{% url 'users:select_application' %}" {% endif %}>
          <i class="fa fa-home" style="font-size:1.5rem;  color:var(--modal-fontColor);cursor: pointer;"></i></a>
        </div>

        <div class="modal-body">
          <div class='card'>
             <div class='card-body' id='processSubProcessTagging'>
              <form id="ProcessForm" method="post">
                {% csrf_token %}
                <div class="row">
                <div class="form-group col-6">
                    <select id='selectProcess' class="select2 form-control" name="Process" required onchange="ajaxfunction()">
                      <option value="" disabled selected>Select Process</option>
                      {% for i in processList%}
                      <option value="{{i.item_code}}">{{i.item_name}}</option>
                      {%endfor%}
                    </select>
                </div>
                <div class="form-group col-6">
                  <select class="select2 form-control" name="subprocesslist" id='subprocess' required>
                    <option value="" disabled selected>Select Subprocess</option>
                  </select>
              </div>
            </div>
            <div id="noteXMLFile"></div>
          </div>
          </div>
      </div>
        <div class="modal-footer">

          <button id='savetag' type="button" class="btn buttonfooter" style="width:75px;">Save</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="appLinksRTFModal" role="dialog" data-focus="false" aria-labelledby="appLinksRTFModal" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="chartModalLabel">Select Screen</h5>
        </div>
        <div class="modal-body">
          <div class='card'>
             <div class='card-body'>
                <div class="row">
                  <div class="form-group col-6">
                    <select id='selectProcessAppLinks' class="select2 form-control" name="selectProcessAppLinks" required onchange="fetchSubprocess()">
                      <option value="" disabled selected>Select Process</option>
                      {% for i in processList%}
                      <option value="{{i.item_code}}">{{i.item_name}}</option>
                      {%endfor%}
                    </select>
                  </div>
                  <div class="form-group col-6">
                    <select class="select2 form-control" name="selectSubprocessAppLinks" id='selectSubprocessAppLinks' required>
                      <option value="" disabled selected>Select Subprocess</option>
                    </select>
                  </div>
              </div>
            </div>
          </div>
      </div>
        <div class="modal-footer">

          <button id='saveAppLinksRTF' type="button" class="btn buttonfooter" style="width:75px;">Save</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="JSConfig" tabindex="-1" data-focus="false" role="dialog" style="overflow-y:auto;" aria-labelledby="chart1ModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="chart1ModalLabel">Configure field attributes</h5>
          <button type="button" class="closeJs" onclick="backtoformmodal(0)" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p style="display: none;">Select the column name to configure</p>
            <select id='selectField' class="no class" name="SelectedFields" style="display: none;">
              <option value="" disabled selected>Select Field</option>
            </select>
            <p></p>
          <div class="card collapsed-card multipleJs">
            <div class="card-header">
              <p class="card-title">Configure JS</p>
              <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i></button>
                <button type="button" class="btn btn-tool" onclick="multipleJsCard.call(this)">Add js attr</i></button>
              </div>
            </div>
            <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
              <p style="font-weight: bold;">Select the field property</p>
              <select class="select2 form-control selectJSproperty" name="SelectedJS" onchange="selectJSpropertyFunc.call(this)">
                <option value="" disabled selected>Select Field property</option>
                {% for i in JSfunctions%}
                  <option value="{{i}}">{{i}}</option>
                {%endfor%}
              </select><p></p>
              <div  id="cascadingCard1" style="display: none;" >
                <div class="card card-default collapsed-card">
                  <div class="card-header">
                    <p class="card-title">Cascading level 0</p>

                    <div class="card-tools">
                      <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i></button>
                      <button type="button" class="btn btn-tool" onclick="cascadingCard.call(this)">Add levels</i></button>
                    </div>
                  </div>
                  <div class="card-body">
                    <p class="autopopulate1" style="font-weight:bold;">Select source table</p>
                    <div class="" id="masterTableCascading1">
                      <select class="masterTableSelectCascading1 select2 form-control" onchange="selectColFromTable.call(this)">
                        <option value="" selected>Select master table</option>
                        {% for i in tableList%}
                        <option value="{{i}}">{{i}}</option>
                        {%endfor%}
                      </select>
                    </div><br>
                    <div class="autopopulate1" style="font-weight: bold;">Criteria field mapping through source table column</div><br>
                    <div class="row" id="indFieldTypeCascading1">
                      <div class="col-6" style="display: inline-block;">
                        <p>Current table field:</p>
                        <select class="select2 form-control indFieldTypeSelectCascading1">
                          <option value="" selected>Dependent field mapping through source table column</option>
                        </select>
                      </div>
                      <div class="col-6" style="display: inline-block;">
                        <p>Mapping table field:</p>
                        <select class="select2 form-control commonCol indFieldTypeMapperCascading1">
                          <option value="" selected>Select mapping field</option>
                        </select>
                      </div>
                    </div><br>
                    <div class="autopopulate1" style="display: flex; align-items: center; justify-content: space-between;" style="font-weight: bold;"><span style="font-weight: bold;">Select dependent field</span> <span class="float-right" style="font-size: 23px;" onclick="addIndField.call(this,'Cascading1')">+</span></div><br>
                    <div class="row" id="depFieldTypeCascading1">
                      <div class="col-12">
                        <div class="col-6" style="display: inline-block;">
                          <p>Current table field:</p>
                          <select class="depFieldTypeSelectCascading1 select2 form-control " onchange="casadingColOption.call(this)">
                            <option value="" selected>Select independent field</option>
                          </select>
                        </div>
                        <div class="col-5" style="display: inline-block;margin-left:-3px">
                          <p>Mapping table field:</p>
                          <select class="depFieldTypeMapperCascading1 select2 form-control commonCol">
                            <option value="" selected>Select mapping field</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="linked-field">
                <p style="font-weight: bold;">Select Parent-Child</p>
                <select class="select2 form-control selectpctype" name="Selectedpc">
                  <option value="" disabled selected>Select Field property</option>
                    <option value="parent">Parent</option>
                    <option value="child">Child</option>
                </select><p></p>
              </div>
              <div class="linked-field">
                <p style="font-weight: bold;">Select Parent Column</p>
                <select class="select2 form-control selectparentcolumn" name="selectparentcolumn" >
                  <option value="" selected>Select Parent Column</option>
                  {% for i in data.finalFieldList%}
                    <option value="{{i}}">{{i}}</option>
                  {%endfor%}
                </select> <br><br>
              </div>
              <div class="linked-field">
                <p style="font-weight: bold;">Select Default Value</p>
                <select class="select2 form-control selectdefcolumn" name="selectdefcolumn" >
                </select> <br><br>
              </div>
              <p class="autopopulate" style="font-weight: bold;">Select source table</p>
              <div class="masterTable" style="display: none;">
                <select  class="select2 form-control masterTableSelect">
                  <option value="" selected>Select master table</option>
                  {% for i in tableList%}
                  <option value="{{i}}">{{i}}</option>
                  {%endfor%}
                </select>
              </div><br>
              <div class="autopopulate" style="font-weight: bold;">Criteria field mapping through source table column</div><br>
              <div class="row" id="indFieldType" style="display: none;">
                <div class="col-6" style="display: inline-block;">
                  <p>Source table field:</p>
                  <select  class="select2 form-control indFieldTypeSelect">
                    <option value="" selected>Dependent field mapping through source table column</option>
                  </select>
                </div>
                <div class="col-6" style="display: inline-block;">
                  <p>Mapping table field:</p>
                  <select  class="select2 form-control commonCol indFieldTypeMapper">
                    <option value="" selected>Select mapping field</option>
                  </select>
                </div>
              </div><br>
              <div class="autopopulate" style="display: flex; align-items: center; justify-content: space-between;" style="font-weight: bold;"><span style="font-weight: bold;">Select dependent field</span> <span class="float-right" style="font-size: 23px;" onclick="addIndField.call(this)">+</span></div><br>
              <div class="row" id="depFieldType" style="display: none;">
                <div class="col-12">
                  <div class="col-6" style="display: inline-block;">
                    <p>Current table field:</p>
                    <select class="depFieldTypeSelect select2 form-control ">
                      <option value="" selected>Select independent field</option>
                    </select>
                  </div>
                  <div class="col-5" style="display: inline-block;margin-left:-3px">
                    <p>Mapping table field:</p>
                    <select class="depFieldTypeMapper select2 form-control commonCol" onchange="check_master_foreignkey.call(this,'Auto-populate')">
                      <option value="" selected>Select mapping field</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      <div class="modal-footer">
        <button type="button" id='savecreateview' class="btn btn-primary"  onclick="backtoformmodal(1)">Save field</button>
      </div>
      </div>
    </div>


  </div>
  <div class="modal fade" id="schedulerModal" role="dialog" data-focus="false" aria-labelledby="schedulerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header" style='background:#565a5e; color:white;'>
          <h5 class="modal-title" id="schedulerModalLabel" style="margin-left: 35%;">Configure scheduler elements</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="overflow-y: scroll ;max-height: 30rem;">
          <div class="card">
            <div class="card-body">
              <div class="form-row">
                <div class="form-group col-6">
                  <label for="name_email">Name:</label>
                  <input type="text" id="name_email" class="textinput textInput form-control" >
                </div>
                <div class="form-group col-6">
                  <label for="selectTask">Task:</label>
                  <select class="select2 form-control" id="selectTask" name="selectTask">
                    <option value="Email" selected >Action based Email</option>
                    <option value="Schedule" >Schedule email</option>
                    <option value="ConditionBased" >Condition based Email</option>
                    <option value="RecurrenceBased" >Recurrence based Email</option>
                    <option value="RecurrenceBasedAction" >Recurrence with action based Email</option>
                  </select>
                </div>
              </div>
            </div>
        </div>
        <br>
        <div class="card" id="emailScheduleCard" style="display:none;">
          <div class="card-header">
            <h3 class="card-title">Schedule Message</h3>
          </div>

          <div class="card-body">

            <div class="card collapsed-card">
              <div class="card-header" style="color:var(--primary-color); font-weight: bold;">
                <span>Configure details:</span>
                <div class="card-tools" style="float:right;margin-left:auto;">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i></button>
                </div>
              </div>
              <div class="card-body">

                <div class="row">
                  <div class="form-group col-3">
                    <label for="schedulerEmailIntervalStartDate">Start Date:</label>
                    <div class="input-group date">
                      <input type="date" class="form-control" name="schedulerEmailIntervalStartDate" id="schedulerEmailIntervalStartDate" placeholder="DD-MM-YYYY">
                    </div>
                  </div>
                  <div class="form-group col-3">
                    <label for="schedulerEmailIntervalEndDate">End Date:</label>
                    <div class="input-group date">
                      <input type="date" class="form-control" name="schedulerEmailIntervalEndDate" id="schedulerEmailIntervalEndDate" placeholder="DD-MM-YYYY">
                    </div>
                  </div>
                  <div class="form-group col-3">
                    <label for="selectSchedulerEmailIntervalPeriodicity">Period of Execution:</label>
                    <select class="select2 form-control" name="selectSchedulerEmailIntervalPeriodicity" id="selectSchedulerEmailIntervalPeriodicity">
                      <option value="" selected>Select Period</option>
                      <option value="Daily">Daily</option>
                      <option value="Weekly">Weekly</option>
                      <option value="Monthly">Monthly</option>
                      <option value="Monthly/5th day">Monthly/5th day</option>
                      <option value="Quarterly">Quarterly</option>
                      <option value="Pre-Quarterly">Pre-Quarterly</option>
                      <option value="Yearly">Yearly</option>
                      <option value="Hourly">Hourly</option>
                      <option value="Every N Minutes">Every N Minutes</option>
                    </select>
                  </div>
                  <div class="form-group col-3">
                    <label for="selectSchedulerEmailIntervalTime">Time (in UTC):</label>
                    <div class="input-group date">
                      <input type="time" class="form-control" name="selectSchedulerEmailIntervalTime" id="selectSchedulerEmailIntervalTime" placeholder="HH:MM">
                    </div>
                  </div>
                  <div class="form-group col-3">
                    <label for="selectSchedulerEmailFrequency">Frequency:</label>
                    <input type="number" class="form-control numberinput" name="selectSchedulerEmailFrequency" id="selectSchedulerEmailFrequency" min="1">
                  </div>
                </div>

              </div>
            </div>

          </div>
        </div>
        <br>
        <div class="card" id="conditionScheduleCard" style="display:none;">
          <div class="card-header">
            <h3 class="card-title">Add conditions</h3>
          </div>

          <div class="card-body" style="overflow: auto;max-height: 15rem;">
            <div class="row" style="justify-content:space-between;">
              <div class="form-group col-3">
                <label for="selectSchedulerCondType">Type of Condition:</label>
                <select class="select2 form-control" name="selectSchedulerCondType" id="selectSchedulerCondType">
                  <option value="" selected>Select one</option>
                  <option value="group_based">Group based</option>
                  <option value="trans_based">Transaction data based</option>
                </select>
              </div>
              <div class="form-group col-3">
                <button class="btn btn-primary schedule_master_btn" onclick="addConNewScheduler.call(this,event)" style="float:right;" >Add Condition</button>
              </div>
            </div>

            <div class="schedulerCondRow col-12">

            </div>
          </div>
        </div>

        <div class="card" id="recurrConditionScheduleCard" style="display:none;">
          <div class="card-header">
            <h3 class="card-title">Set user action(s) on which the recurring emails should be stopped</h3>
          </div>

          <div class="card-body">
            <div class="row">
              <div class="form-group col-3">
                <label for="selectSchRecDecision">Select decision element:</label>
                <select class="select2 form-control" name="selectSchRecDecision" id="selectSchRecDecision" onchange="selectSchRecDecisionChange(this)">
                  <option value="" selected>Select one</option>
                </select>
              </div>

              <div class="form-group col-3">
                <label for="selectSchRecAction">Select action:</label>
                <select class="select2 form-control" name="selectSchRecAction" id="selectSchRecAction" multiple>
                  <option value="Approved">Approval</option>
                  <option value="Rejected">Rejection</option>
                </select>
              </div>
            </div>

          </div>
        </div>
        <br>
        <div class="card" id="emailMailConfigCard" style="display:none;">
          <div class="card-header">
            <h3 class="card-title">Email Configuration</h3>
          </div>

          <div class="card-body">

            <div class="form-group">
              <label>Select SMTP Configuration:</label>
              <select class="select2 form-control" id="from_email">
                <option value="default" selected>Default</option>
                {% for iden in smtp_iden %}
                  <option value="{{iden}}">{{iden}}</option>
                {% endfor %}
              </select>
            </div>

            <div class="form-group custom-control custom-checkbox">
              <input type="checkbox" name="skipEmailifNoData" class="checkboxinput custom-control-input notRequired" id="skipEmailifNoData" value="skipEmailifNoData">
              <label for="skipEmailifNoData" class="custom-control-label">Skip recipient if dynamic data is not present?</label>
            </div>

            <div class="form-group">
              <label>Trigger email for:</label>
              <select class="select2 form-control" id="trigger_email_for" multiple>
                <option value="save">Createview - Save</option>
                <option value="draft">Createview - Save As Draft</option>
                <option value="edit">Listview - Edit</option>
                <option value="delete">Listview - Delete</option>
                <option value="temp_delete">Listview - Temp Delete</option>
                <option value="edit_mode">Listview - Edit Mode</option>
                <option value="tab_data">Listview - Paste Tabular Data</option>
                <option value="delete_all">Listview - Delete All Data</option>
                <option value="upload_lv">Listview - Upload</option>
                <option value="comp">Computation - Run Model</option>
                <option value="upload">BulkUpload - Upload</option>
              </select>
            </div>

            <div id="email_list_main">
              <!-- To -->
              <div class="card collapsed-card">
                <div class="card-header" style="color:var(--primary-color); font-weight: bold;">
                  <span>To:</span>
                  <div class="card-tools" style="float:right;margin-left:auto;">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i></button>
                  </div>
                </div>
                <div class="card-body">
                  <div class="form-group col-12">
                    <label>Recipient Type:</label>
                    <select class="form-control select2" id="approval_mailer_type_main">
                      <option value='' selected>Choose one</option>
                      <option value='static'>Static Email IDs</option>
                      <option value='dynamic'>Dynamic Email IDs</option>
                      <option value='dynamic_master_user'>Dynamic User (Master Based)</option>
                      <option value='static_user'>Static users</option>
                      <option value='static_groups'>Static groups</option>
                      <option value='dynamic_user'>Dynamic - User Who Created/ Modified the Entry</option>
                      <option value='dynamic_approver' disabled>Dynamic - Approver(s) of the record</option>
                    </select>
                  </div>
                  <div class="form-group col-12" id="approval_email_container_main" style="display:none;">
                    <label>Email Notification List:</label>
                    <select class="form-control select2email" id="approval_email_list_main" multiple></select>
                  </div>
                  <br>
                  <div class="form-group col-12" style="display:none;">
                    <label>Select table:</label>
                    <select class="form-control select2" id="approval_dynamic_type_table_main">
                      <option value='' selected>Choose table</option>
                      {% for i in tableList%}
                        <option value="{{i}}">{{i}}</option>
                      {%endfor%}
                    </select>
                  </div>
                  <div class="form-group col-12" id="approval_email_decision_container_main" style="display:none;">
                    <label>Select column for Email IDs</label>
                    <select class="form-control select2" id="approval_dynamic_email_list_main">

                    </select>
                  </div>
                  <!-- Static Group Based -->
                  <div class="col-12 form-group" id="staticGroupBasedContainerTo" style="display: none;">
                    <label for="select2multiple_to">Select Group:</label>
                    <select class="select2 form-control js-example-basic-multiple" id="select2multiple_to"
                      style="min-height:29px;max-height:29px;height:29px;" multiple="multiple">
                      {% for i in groupList%}
                      <option value='{{i}}'>{{i}}</option>
                      {% endfor %}
                    </select>
                  </div>

                  <!-- Static User Based -->
                  <div class="col-12 form-group" id="staticUserBasedContainerTo" style="display: none;">
                    <label for="selectApproverUsersTo">Select Users:</label>
                    <select class="select2 form-control js-example-basic-multiple" id="selectApproverUsersTo"
                      style="min-height:29px;max-height:29px;height:29px;" multiple="multiple">
                      {% for i in usersList%}
                      <option value='{{i}}'>{{i}}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
              </div>
              <!-- CC -->
              <div class="card collapsed-card">
                <div class="card-header" style="color:var(--primary-color); font-weight: bold;">
                  <span>CC:</span>
                  <div class="card-tools" style="float:right;margin-left:auto;">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i></button>
                  </div>
                </div>
                <div class="card-body">
                  <div class="form-group col-12">
                    <label>Recipient Type:</label>
                    <select class="form-control select2" id="approval_mailer_type_main_cc">
                      <option value='' selected>Choose one</option>
                      <option value='static'>Static Email IDs</option>
                      <option value='dynamic'>Dynamic Email IDs</option>
                      <option value='dynamic_master_user'>Dynamic User (Master Based)</option>
                      <option value='static_user'>Static users</option>
                      <option value='static_groups'>Static groups</option>
                      <option value='dynamic_user'>Dynamic - User Who Created/ Modified the Entry</option>
                      <option value='dynamic_approver' disabled>Dynamic - Approver(s) of the record</option>
                    </select>
                  </div>
                  <div class="form-group col-12" id="approval_email_container_main_cc" style="display:none;">
                    <label>Email Notification List:</label>
                    <select class="form-control select2email" id="approval_email_list_main_cc" multiple></select>
                  </div>
                  <br>
                  <div class="form-group col-12" style="display:none;">
                    <label>Select table:</label>
                    <select class="form-control select2" id="approval_dynamic_type_table_main_cc">
                      <option value='' selected>Choose table</option>
                      {% for i in tableList%}
                        <option value="{{i}}">{{i}}</option>
                      {%endfor%}
                    </select>
                  </div>
                  <div class="form-group col-12" id="approval_email_decision_container_main_cc" style="display:none;">
                    <label>Select column for Email IDs</label>
                    <select class="form-control select2" id="approval_dynamic_email_list_main_cc">

                    </select>
                  </div>
                  <!-- Static Group Based -->
                  <div class="col-12 form-group" id="staticGroupBasedContainerToCC" style="display: none;">
                    <label for="select2multiple_toCC">Select Group:</label>
                    <select class="select2 form-control js-example-basic-multiple" id="select2multiple_toCC"
                      style="min-height:29px;max-height:29px;height:29px;" multiple="multiple">
                      {% for i in groupList%}
                      <option value='{{i}}'>{{i}}</option>
                      {% endfor %}
                    </select>
                  </div>

                  <!-- Static User Based -->
                  <div class="col-12 form-group" id="staticUserBasedContainerToCC" style="display: none;">
                    <label for="selectApproverUsersToCC">Select Users:</label>
                    <select class="select2 form-control js-example-basic-multiple" id="selectApproverUsersToCC"
                      style="min-height:29px;max-height:29px;height:29px;" multiple="multiple">
                      {% for i in usersList%}
                      <option value='{{i}}'>{{i}}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
              </div>
              <!-- BCC -->
              <div class="card collapsed-card">
                <div class="card-header" style="color:var(--primary-color); font-weight: bold;">
                  <span>BCC:</span>
                  <div class="card-tools" style="float:right;margin-left:auto;">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i></button>
                  </div>
                </div>
                <div class="card-body">
                  <div class="form-group col-12">
                    <label>Recipient Type:</label>
                    <select class="form-control select2" id="approval_mailer_type_main_bcc">
                      <option value='' selected>Choose one</option>
                      <option value='static'>Static Email IDs</option>
                      <option value='dynamic'>Dynamic Email IDs</option>
                      <option value='dynamic_master_user'>Dynamic User (Master Based)</option>
                      <option value='static_user'>Static users</option>
                      <option value='static_groups'>Static groups</option>
                      <option value='dynamic_user'>Dynamic - User Who Created/ Modified the Entry</option>
                      <option value='dynamic_approver' disabled>Dynamic - Approver(s) of the record</option>
                    </select>
                  </div>
                  <div class="form-group col-12" id="approval_email_container_main_bcc" style="display:none;">
                    <label>Email Notification List:</label>
                    <select class="form-control select2email" id="approval_email_list_main_bcc" multiple></select>
                  </div>
                  <br>
                  <div class="form-group col-12" style="display:none;">
                    <label>Select table:</label>
                    <select class="form-control select2" id="approval_dynamic_type_table_main_bcc">
                      <option value='' selected>Choose table</option>
                      {% for i in tableList%}
                        <option value="{{i}}">{{i}}</option>
                      {%endfor%}
                    </select>
                  </div>
                  <div class="form-group col-12" id="approval_email_decision_container_main_bcc" style="display:none;">
                    <label>Select column for Email IDs</label>
                    <select class="form-control select2" id="approval_dynamic_email_list_main_bcc">

                    </select>
                  </div>
                  <!-- Static Group Based -->
                  <div class="col-12 form-group" id="staticGroupBasedContainerToBCC" style="display: none;">
                    <label for="select2multiple_toBCC">Select Group:</label>
                    <select class="select2 form-control js-example-basic-multiple" id="select2multiple_toBCC"
                      style="min-height:29px;max-height:29px;height:29px;" multiple="multiple">
                      {% for i in groupList%}
                      <option value='{{i}}'>{{i}}</option>
                      {% endfor %}
                    </select>
                  </div>

                  <!-- Static User Based -->
                  <div class="col-12 form-group" id="staticUserBasedContainerToBCC" style="display: none;">
                    <label for="selectApproverUsersToBCC">Select Users:</label>
                    <select class="select2 form-control js-example-basic-multiple" id="selectApproverUsersToBCC"
                      style="min-height:29px;max-height:29px;height:29px;" multiple="multiple">
                      {% for i in usersList%}
                      <option value='{{i}}'>{{i}}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
              </div>

            </div>

          </div>
        </div>
        <br>
          <div class="card" id="emailCard" style="display:none;">
            <div class="card-header">
              <h3 class="card-title">Compose Message</h3>
            </div>
            <!-- /.card-header -->
            <div class="card-body">

              <div>
                <button type="button" class="btn btn-primary" id="TransactionCreatedByMain">Transaction Created By</button>
                <button type="button" class="btn btn-primary" id="TransactionTimeMain">Transaction Time</button>
                <button type="button" class="btn btn-primary" id="TransactionValueNotificationMain" onclick="openTableModal('subject_email','schedulerModal')">Transaction Value</button>
              </div>
              <br>
              <div class="form-group">
                <label>Subject:</label>
                <input class="form-control" id="subject_email" >
              </div>
              <br>
              <div class="form-group">

                  <form>
                    <ul class="nav nav-tabs rtf_action_tab" id="rtf_action_tab_id" role="tablist">
                      <li class="nav-item" role="presentation" style="margin-left: 2px;">
                        <button class="nav-link active" id="Text-tab" data-bs-toggle="tab" data-bs-target="Text" type="button" role="tab" aria-controls="Text" aria-selected="true">Text Format</button>
                      </li>
                      <li class="nav-item" role="presentation" style="margin-left: 2px;">
                        <button class="nav-link " id="Insert-tab" data-bs-toggle="tab" data-bs-target="Insert" type="button" role="tab" aria-controls="Insert" aria-selected="false">Insert</button>
                      </li>
                      <li class="nav-item" role="presentation" style="margin-left: 2px;">
                        <button class="nav-link" id="Form-tab" data-bs-toggle="tab" data-bs-target="Form" type="button" role="tab" aria-controls="Form" aria-selected="false">Form</button>
                      </li>
                      <li class="nav-item" role="presentation" style="margin-left: 2px;">
                        <button class="nav-link" id="Page-Layout-tab" data-bs-toggle="tab" data-bs-target="Page Layout" type="button" role="tab" aria-controls="Page Layout" aria-selected="false">Page Layout</button>
                      </li>
                      <li class="nav-item" role="presentation" style="margin-left: 2px;">
                        <button class="nav-link" id="insert-dynamic-content-tab" data-bs-toggle="tab" data-bs-target="Insert Dynamic Content" type="button" role="tab" aria-controls="Insert Dynamic Content" aria-selected="false">Insert Dynamic Content</button>
                      </li>
                      <button class="ml-auto btn btn-primary" id="insert_attachment_main" type="button" data-config="{}"><i class="fas fa-paperclip"></i></button>
                    </ul>
                    <textarea id="text_email" name="text_email">&nbsp;</textarea>
                  </form>
                  <script>

                    CKEDITOR.replace('text_email',{height: 300});
                    CKEDITOR.config.removePlugins = 'exportpdf';
                    var form_rtf = ['CreateDiv,Anchor,Language,About,PasteText,PasteFromWord,Find,Replace,SelectAll,Scayt,Blockquote,Outdent,Indent,BulletedList,NumberedList,CopyFormatting,RemoveFormat,Bold,Italic,Underline,Strike,Subscript,Superscript,TextColor,BidiLtr,BidiRtl,Templates,Link,Unlink,Source,Save,NewPage,ExportPdf,Preview,Print,Styles,Format,Font,FontSize,BGColor,ShowBlocks,Maximize,JustifyLeft,JustifyCenter,JustifyRight,JustifyBlock,HorizontalRule,SpecialChar,PageBreak,Iframe,Flash,Table,Image,Smiley'];

                    var home_rtf =['Source,Save,Templates,CreateDiv,Unlink,Anchor,Language,Link,Image,Flash,Table,HorizontalRule,SpecialChar,PageBreak,Iframe,ShowBlocks,Maximize,About,Print,Preview,ExportPdf,NewPage,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Smiley'];
                    var tools_rtf =['Flash,About,Templates,Cut,Copy,Paste,PasteText,PasteFromWord,Redo,Undo,Find,Replace,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,Italic,Underline,Strike,Subscript,Superscript,CopyFormatting,RemoveFormat,Outdent,NumberedList,BulletedList,Indent,Blockquote,JustifyLeft,CreateDiv,JustifyCenter,JustifyRight,JustifyBlock,Language,BidiRtl,BidiLtr,Link,Unlink,Anchor,Image,Table,HorizontalRule,Smiley,SpecialChar,PageBreak,Iframe,Styles,Format,Font,FontSize,TextColor,BGColor'];
                    var insert_rtf2 =['Source,Save,NewPage,ExportPdf,Preview,Print,Templates,PasteText,PasteFromWord,Replace,Find,SelectAll,Scayt,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Bold,BidiLtr,BidiRtl,Language,JustifyRight,JustifyBlock,JustifyCenter,CreateDiv,Indent,BulletedList,NumberedList,Outdent,Blockquote,JustifyLeft,CopyFormatting,RemoveFormat,Styles,Format,Font,FontSize,TextColor,BGColor,ShowBlocks,Maximize,About,Italic,Underline,Strike,Subscript,Superscript'];
                    $(".rtf_action_tab").find('li').each(function(){
                      $(this).find('button').on('click',function(){
                        $(".rtf_action_tab").find('li').find('button').removeClass('active')
                        $(this).addClass('active')
                        if($(this).attr('data-bs-target') == "Form"){
                          var editor = CKEDITOR.instances['text_email'];
                          var editor_data = CKEDITOR.instances['text_email'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('text_email',{height: 300,removeButtons:form_rtf[0] });
                          setTimeout(()=>{CKEDITOR.instances['text_email'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                        }
                        else if ($(this).attr('data-bs-target') == "Text"){
                          var editor = CKEDITOR.instances['text_email'];
                          var editor_data = CKEDITOR.instances['text_email'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('text_email',{height: 300,removeButtons:home_rtf[0] });
                          setTimeout(()=>{CKEDITOR.instances['text_email'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                        }
                        else if ($(this).attr('data-bs-target') == "Insert"){
                          var editor = CKEDITOR.instances['text_email'];
                          var editor_data = CKEDITOR.instances['text_email'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('text_email',{height: 300,removeButtons:insert_rtf2[0] });
                          setTimeout(()=>{CKEDITOR.instances['text_email'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                        }
                        else if ($(this).attr('data-bs-target') == "Page Layout"){
                          var editor = CKEDITOR.instances['text_email'];
                          var editor_data = CKEDITOR.instances['text_email'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('text_email',{height: 300,removeButtons:tools_rtf[0] });
                          setTimeout(()=>{CKEDITOR.instances['text_email'].insertHtml(editor_data, mode="unfiltered_html")}, 300)

                        }
                        else if ($(this).attr('data-bs-target') == "Insert Dynamic Content"){
                          var editor = CKEDITOR.instances['text_email'];
                          var editor_data = CKEDITOR.instances['text_email'].getData()
                          if (editor) { editor.destroy(true); }
                          CKEDITOR.replace('text_email',{height: 300,removeButtons:form_rtf[0]+home_rtf[0]+insert_rtf2[0]+tools_rtf[0]});
                          setTimeout(()=>{CKEDITOR.instances['text_email'].insertHtml(editor_data, mode="unfiltered_html")}, 300)
                          CKEDITOR.instances['text_email'].addCommand('addUserCreatingTransaction', {
                            exec: function(edt){
                              edt.insertHtml(`<span>{TransactionCreatedBy}</span>`);
                            },
                            canUndo : true
                          });
                          CKEDITOR.instances['text_email'].ui.addButton('UserCTButton', {
                              label: "Transaction Created By",
                              command: 'addUserCreatingTransaction',
                              text: 'Transaction Created By',
                              icon: "{% static 'images/Base_theme/user.png' %}",
                          });
                          CKEDITOR.instances['text_email'].addCommand('addUserCreatingTransaction-Name', {
                            exec: function(edt){
                              edt.insertHtml(`<span>{TransactionCreatedBy-Name}</span>`);
                            },
                            canUndo : true
                          });
                          CKEDITOR.instances['text_email'].ui.addButton('UserCTButton-Name', {
                              label: "Transaction Created By (Name)",
                              command: 'addUserCreatingTransaction-Name',
                              text: 'Transaction Created By (Name)',
                              icon: "{% static 'images/Base_theme/user.png' %}",
                          });
                          CKEDITOR.instances['text_email'].addCommand('addTransactionTime', {
                            exec: function(edt){
                              edt.insertHtml(`<span>{TransactionTime}</span>`);
                            },
                            canUndo : true
                          });
                          CKEDITOR.instances['text_email'].ui.addButton('TransactionTimeButton', {
                              label: "Time Of Transaction",
                              command: 'addTransactionTime',
                              text: 'Time Of Transaction',
                              icon: "{% static 'images/Base_theme/clock.png' %}",
                          });
                          CKEDITOR.instances['text_email'].addCommand('addAppLinks', {
                            exec: function(edt){
                              $('#schedulerModal').modal('hide')

                              $('#appLinksRTFModal').modal('show');

                              $('#saveAppLinksRTF').off('click').on('click', function(){
                                $('#appLinksRTFModal').modal('hide');
                                $('#schedulerModal').modal('show')
                                let process = $('#selectProcessAppLinks').val();
                                let subProcessCode = $('#selectSubprocessAppLinks').val();
                                let subProcessName = $('#selectSubprocessAppLinks > option:selected').text();
                                var linkHTML = `<a href="{domain}/users/{app_code}/User/${subProcessCode}/">${subProcessName}</a>`;
                                edt.insertHtml(linkHTML, mode="unfiltered_html");
                              })
                            },
                            canUndo : true
                          });
                          CKEDITOR.instances['text_email'].ui.addButton('addAppLinks', {
                              label: "App Screen Links",
                              command: 'addAppLinks',
                              text: 'App Screen Links',
                              icon: "{% static 'images/Base_theme/clock.png' %}",
                          });
                          CKEDITOR.instances['text_email'].addCommand('addTransaction', {
                            exec: function(edt){
                              $('#schedulerModal').modal('hide')

                              $('#approvalMessageDynamicTableModal').modal('show');
                              $('#approvalMessageDynamicTableModal').attr("data-modal","schedulerModal")
                              $('#approvalMessageDynamicTableModal').attr("data-btn_calling","ttable")


                              $('#selectTableAMDT').off('select2:select').on('select2:select', function(){
                                $.ajax({
                                  url: window.location.pathname,
                                  async: false,
                                  data: {
                                    'operation': 'fetchColumnsList',
                                    'table_name': $(this).val(),
                                  },
                                  type: "POST",
                                  dataType: "json",
                                  success: function (data) {
                                    $('#selectColumnsAMDT').empty();
                                    for (i in data['field_list']) {
                                      $("#selectColumnsAMDT").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                                    }
                                  }, error: ()=>{
                                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                  }
                                });
                              });
                              $('#saveApprovalMessageDynamicTable').off('click').on('click', function(){
                                var columnsList = $('#selectColumnsAMDT').val();
                                $('#approvalMessageDynamicTableModal').modal('hide');
                                var tableHTML = `
                                <table cellspacing="1" cellpadding="1" class="table table-bordered table" style="border:1.5px solid black;max-height:100vw;overlow-x:auto;">
                                  <thead style="border:1px solid black"><tr>
                                  `;
                                var thHTML = '';
                                var valueHTML = "<tbody style='border:1px solid black'><tr style='border:1px solid black;'>";
                                for (i of columnsList) {
                                  thHTML += `<th style='border:1px solid black;text-align:center;'>{VerboseName-${i}}</th>`
                                  valueHTML += `<td style='border:1px solid black;text-align:center;'>{Value-${i}}</td>`
                                }
                                thHTML += "</tr></thead>"
                                valueHTML += "</tr></tbody>"
                                tableHTML += thHTML
                                tableHTML += valueHTML
                                tableHTML += `</table>`
                                $('#schedulerModal').modal('show')
                                edt.insertHtml(tableHTML, mode="unfiltered_html");
                              })
                            },
                            canUndo : true
                          });
                          CKEDITOR.instances['text_email'].ui.addButton('RecordSentForApprovalButton', {
                              label: "Transaction Data Table",
                              command: 'addTransaction',
                              text: 'Transaction Data Table',
                              icon: "{% static 'images/Base_theme/datasheet.png' %}",
                          });
                          CKEDITOR.instances['text_email'].addCommand('addTransactionValue', {
                            exec: function(edt){
                              $('#schedulerModal').modal('hide')


                              $('#approvalMessageDynamicTableModal').modal('show');
                              $('#approvalMessageDynamicTableModal').attr("data-modal","schedulerModal")
                              $('#approvalMessageDynamicTableModal').attr("data-btn_calling","tvalue")
                              $('#selectTableAMDT').off('select2:select').on('select2:select', function(){
                                $.ajax({
                                  url: window.location.pathname,
                                  async: false,
                                  data: {
                                    'operation': 'fetchColumnsList',
                                    'table_name': $(this).val(),
                                  },
                                  type: "POST",
                                  dataType: "json",
                                  success: function (data) {
                                    $('#selectColumnsAMDT').empty();
                                    for (i in data['field_list']) {
                                      $("#selectColumnsAMDT").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                                    }
                                  }, error: ()=>{
                                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                  }
                                });
                              });
                              $('#saveApprovalMessageDynamicTable').on('click', function(){
                                var columnsList = $('#selectColumnsAMDT').val();
                                $('#approvalMessageDynamicTableModal').modal('hide');
                                $('#schedulerModal').modal('show')
                                for (i of columnsList) {
                                  edt.insertHtml(`<span>{Value-${i}}</span>`);
                                }
                              })
                            },
                            canUndo : true
                          });
                          CKEDITOR.instances['text_email'].ui.addButton('RecordValuesButton', {
                              label: "Field Values From The Transaction",
                              command: 'addTransactionValue',
                              text: 'Field Values From The Transaction',
                              icon: "{% static 'images/Base_theme/sum.png' %}",
                          });

                        }
                      })

                    })

                    $("#approval_mailer_type_main").off("select2:select").on("select2:select", function(){
                      if($(this).val() == "static"){
                        $("#approval_email_container_main").css("display","block")
                        $("#approval_dynamic_type_table_main").parent().css("display","none")
                        $("#approval_dynamic_email_list_main").parent().css("display","none")
                        $("#staticGroupBasedContainerTo").css("display","none")
                        $("#staticUserBasedContainerTo").css("display","none")
                      }else if($(this).val() == "dynamic" || $(this).val() == "dynamic_master_user"){
                        $("#approval_email_container_main").css("display","none")
                        $("#approval_dynamic_type_table_main").parent().css("display","block")
                        $("#approval_dynamic_email_list_main").parent().css("display","block")
                        $("#staticGroupBasedContainerTo").css("display","none")
                        $("#staticUserBasedContainerTo").css("display","none")
                      }else if($(this).val() == "dynamic_user"){
                        $("#approval_email_container_main").css("display","none")
                        $("#approval_dynamic_type_table_main").parent().css("display","none")
                        $("#approval_dynamic_email_list_main").parent().css("display","none")
                        $("#staticGroupBasedContainerTo").css("display","none")
                        $("#staticUserBasedContainerTo").css("display","none")
                      }else if($(this).val() == "static_user"){
                        $("#approval_email_container_main").css("display","none")
                        $("#approval_dynamic_type_table_main").parent().css("display","none")
                        $("#approval_dynamic_email_list_main").parent().css("display","none")
                        $("#staticGroupBasedContainerTo").css("display","none")
                        $("#staticUserBasedContainerTo").css("display","block")
                      }else if($(this).val() == "static_groups"){
                        $("#approval_email_container_main").css("display","none")
                        $("#approval_dynamic_type_table_main").parent().css("display","none")
                        $("#approval_dynamic_email_list_main").parent().css("display","none")
                        $("#staticGroupBasedContainerTo").css("display","block")
                        $("#staticUserBasedContainerTo").css("display","none")
                      }else{
                        $("#approval_email_container_main").css("display","none")
                        $("#approval_dynamic_type_table_main").parent().css("display","none")
                        $("#approval_dynamic_email_list_main").parent().css("display","none")
                        $("#staticGroupBasedContainerTo").css("display","none")
                        $("#staticUserBasedContainerTo").css("display","none")
                      }

                    })

                    $("#approval_mailer_type_main_cc").off("select2:select").on("select2:select", function(){
                      if($(this).val() == "static"){
                        $("#approval_email_container_main_cc").css("display","block")
                        $("#approval_dynamic_type_table_main_cc").parent().css("display","none")
                        $("#approval_dynamic_email_list_main_cc").parent().css("display","none")
                        $("#staticGroupBasedContainerToCC").css("display","none")
                        $("#staticUserBasedContainerToCC").css("display","none")
                      }else if($(this).val() == "dynamic"  || $(this).val() == "dynamic_master_user"){
                        $("#approval_email_container_main_cc").css("display","none")
                        $("#approval_dynamic_type_table_main_cc").parent().css("display","block")
                        $("#approval_dynamic_email_list_main_cc").parent().css("display","block")
                        $("#staticGroupBasedContainerToCC").css("display","none")
                        $("#staticUserBasedContainerToCC").css("display","none")
                      }else if($(this).val() == "dynamic_user"){
                        $("#approval_email_container_main_cc").css("display","none")
                        $("#approval_dynamic_type_table_main_cc").parent().css("display","none")
                        $("#approval_dynamic_email_list_main_cc").parent().css("display","none")
                        $("#staticGroupBasedContainerToCC").css("display","none")
                        $("#staticUserBasedContainerToCC").css("display","none")
                      }else if($(this).val() == "static_user"){
                        $("#approval_email_container_main_cc").css("display","none")
                        $("#approval_dynamic_type_table_main_cc").parent().css("display","none")
                        $("#approval_dynamic_email_list_main_cc").parent().css("display","none")
                        $("#staticGroupBasedContainerToCC").css("display","none")
                        $("#staticUserBasedContainerToCC").css("display","block")
                      }else if($(this).val() == "static_groups"){
                        $("#approval_email_container_main_cc").css("display","none")
                        $("#approval_dynamic_type_table_main_cc").parent().css("display","none")
                        $("#approval_dynamic_email_list_main_cc").parent().css("display","none")
                        $("#staticGroupBasedContainerToCC").css("display","block")
                        $("#staticUserBasedContainerToCC").css("display","none")
                      }else{
                        $("#approval_email_container_main_cc").css("display","none")
                        $("#approval_dynamic_type_table_main_cc").parent().css("display","none")
                        $("#approval_dynamic_email_list_main_cc").parent().css("display","none")
                        $("#staticGroupBasedContainerToCC").css("display","none")
                        $("#staticUserBasedContainerToCC").css("display","none")
                      }
                    })

                    $("#approval_mailer_type_main_bcc").off("select2:select").on("select2:select", function(){
                      if($(this).val() == "static"){
                        $("#approval_email_container_main_bcc").css("display","block")
                        $("#approval_dynamic_type_table_main_bcc").parent().css("display","none")
                        $("#approval_dynamic_email_list_main_bcc").parent().css("display","none")
                        $("#staticGroupBasedContainerToBCC").css("display","none")
                        $("#staticUserBasedContainerToBCC").css("display","none")
                      }else if($(this).val() == "dynamic"  || $(this).val() == "dynamic_master_user"){
                        $("#approval_email_container_main_bcc").css("display","none")
                        $("#approval_dynamic_type_table_main_bcc").parent().css("display","block")
                        $("#approval_dynamic_email_list_main_bcc").parent().css("display","block")
                        $("#staticGroupBasedContainerToBCC").css("display","none")
                        $("#staticUserBasedContainerToBCC").css("display","none")
                      }else if($(this).val() == "dynamic_user"){
                        $("#approval_email_container_main_bcc").css("display","none")
                        $("#approval_dynamic_type_table_main_bcc").parent().css("display","none")
                        $("#approval_dynamic_email_list_main_bcc").parent().css("display","none")
                        $("#staticGroupBasedContainerToBCC").css("display","none")
                        $("#staticUserBasedContainerToBCC").css("display","none")
                      }else if($(this).val() == "static_user"){
                        $("#approval_email_container_main_bcc").css("display","none")
                        $("#approval_dynamic_type_table_main_bcc").parent().css("display","none")
                        $("#approval_dynamic_email_list_main_bcc").parent().css("display","none")
                        $("#staticGroupBasedContainerToBCC").css("display","none")
                        $("#staticUserBasedContainerToBCC").css("display","block")
                      }else if($(this).val() == "static_groups"){
                        $("#approval_email_container_main_bcc").css("display","none")
                        $("#approval_dynamic_type_table_main_bcc").parent().css("display","none")
                        $("#approval_dynamic_email_list_main_bcc").parent().css("display","none")
                        $("#staticGroupBasedContainerToBCC").css("display","block")
                        $("#staticUserBasedContainerToBCC").css("display","none")
                      }else{
                        $("#approval_email_container_main_bcc").css("display","none")
                        $("#approval_dynamic_type_table_main_bcc").parent().css("display","none")
                        $("#approval_dynamic_email_list_main_bcc").parent().css("display","none")
                        $("#staticGroupBasedContainerToBCC").css("display","none")
                        $("#staticUserBasedContainerToBCC").css("display","none")
                      }
                    })

                    $("#approval_dynamic_type_table_main").off("select2:select").on("select2:select", function(){
                      if($(this).val()){
                        $.ajax({
                          url: window.location.pathname,

                          data: {
                            'operation': 'dropFieldList',
                            'tableName':$(this).val(),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                              $(`#approval_dynamic_email_list_main`).empty()

                              for (var i = 0; i < data.fieldList.length; i++) {
                                    $(`#approval_dynamic_email_list_main`).append(new Option(data.fieldList[i], data.fieldNameList[i]));
                                  }

                              reload_val = $(`#approval_dynamic_email_list_main`).attr("data-data")
                              $(`#approval_dynamic_email_list_main`).val(reload_val).trigger('change')
                              $(`#approval_dynamic_email_list_main`).removeAttr("data-data")
                            },
                          error: function () {
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        })
                      }
                    })

                    $("#approval_dynamic_type_table_main_cc").off("select2:select").on("select2:select", function(){
                      if($(this).val()){
                        $.ajax({
                          url: window.location.pathname,

                          data: {
                            'operation': 'dropFieldList',
                            'tableName':$(this).val(),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                              $(`#approval_dynamic_email_list_main_cc`).empty()

                              for (var i = 0; i < data.fieldList.length; i++) {
                                    $(`#approval_dynamic_email_list_main_cc`).append(new Option(data.fieldList[i], data.fieldNameList[i]));
                                  }

                              reload_val = $(`#approval_dynamic_email_list_main_cc`).attr("data-data")
                              $(`#approval_dynamic_email_list_main_cc`).val(reload_val).trigger('change')
                              $(`#approval_dynamic_email_list_main_cc`).removeAttr("data-data")
                            },
                          error: function () {
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        })
                      }
                    })

                    $("#approval_dynamic_type_table_main_bcc").off("select2:select").on("select2:select", function(){
                      if($(this).val()){
                        $.ajax({
                          url: window.location.pathname,

                          data: {
                            'operation': 'dropFieldList',
                            'tableName':$(this).val(),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                              $(`#approval_dynamic_email_list_main_bcc`).empty()

                              for (var i = 0; i < data.fieldList.length; i++) {
                                    $(`#approval_dynamic_email_list_main_bcc`).append(new Option(data.fieldList[i], data.fieldNameList[i]));
                                  }

                              reload_val = $(`#approval_dynamic_email_list_main_bcc`).attr("data-data")
                              $(`#approval_dynamic_email_list_main_bcc`).val(reload_val).trigger('change')
                              $(`#approval_dynamic_email_list_main_bcc`).removeAttr("data-data")
                            },
                          error: function () {
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                        })
                      }
                    })

                    $('#TransactionCreatedByMain').on('click', function(){
                      if($('#TransactionCreatedByMain').text() == "Transaction Created By"){
                        $('#subject_email').val($('#subject_email').val() + ' {TransactionCreatedBy}');
                      }else{
                        $('#subject_email').val($('#subject_email').val() + ' {RecipientOfMail}');
                      }

                    });
                    $('#TransactionTimeMain').on('click', function(){
                      $('#subject_email').val($('#subject_email').val() + ' {TransactionTime}');
                    });

                    function closeAttachment(){
                      let calling = $('#approvalNotificationAttachmentModal').attr('data-calling')
                      if(calling == "decision" || calling == undefined){
                        $('#approval_notification_dialog').modal('show');
                        $('#approvalNotificationAttachmentModal').modal('hide')
                        $('#approvalNotificationAttachmentModal').removeAttr('data-calling')
                      }else{
                        $('#schedulerModal').modal('show');
                        $('#approvalNotificationAttachmentModal').modal('hide')
                        $('#approvalNotificationAttachmentModal').removeAttr('data-calling')
                      }
                    }

                    $('#insert_attachment_main').off('click').on('click', function(){
                      $('#schedulerModal').modal('hide');
                      $("#dynamicAttachmentPDFTransData").parent().css("display","none")
                      $('#approvalNotificationAttachmentModal').modal('show');
                      $('#approvalNotificationAttachmentModal').attr('data-calling','mail')
                      $("#addUserUploadedFilesAsAttachment").parent().css("display","none")
                      $(".filterbtnSchedule").css("display","flex")
                      $('#saveApprovalAttachments').off('click').on('click', function(){
                        var attachmentConfig = {};
                        if ($('#selectAttachmentType').val() == 'static') {
                          attachmentConfig['attachment_type'] = 'static';
                          var fileInput = document.getElementById('uploadApprovalAttachments');
                          var fileNames = [];
                          for (file of fileInput.files){
                            fileNames.push(file.name);
                          }
                          attachmentConfig['parameter'] = fileNames;
                          let formData = new FormData($("#approvalAttachmentForm")[0]);
                          formData.append("operation", "saveApprovalAttachmentFiles");
                          $.ajax({
                            url:window.location.pathname,
                            data: formData,
                            type: 'POST',
                            cache: false,
                            contentType: false,
                            processData: false,
                            success: function (data) {

                            },
                            error: ()=>{
                                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                            }
                          });
                        } else if ($('#selectAttachmentType').val() == 'dynamic') {
                          attachmentConfig['attachment_type'] = 'dynamic';
                          attachmentConfig['parameter'] = $('#selectDynamicAttachment').val();
                          var additionalConfig = {};
                          if ($('#selectDynamicAttachment').val() == 'pdf') {
                            var layoutOption = $('#dynamicAttachmentPDFDataLayoutOption').val();
                            var addLogo = $('#dynamicAttachmentPDFAddLogo').val();
                            var customizeStyle = $('#dynamicAttachmentPDFCustomizeStyle').val();
                            var logoConfig = {};
                            var styleConfig = {};
                            var droptable = $("#dynamicAttachmentPDFDataDropTable").val()
                            var transDataCols = $("#dynamicAttachmentPDFTransData").val()
                            var dropcolumns = $("#dynamicAttachmentPDFDataDropColumns").val()
                            if (addLogo == 'yes') {
                              logoConfig = {
                                add_logo: addLogo,
                                placement: $('#dynamicAttachmentPDFLogoPlacement').val(),
                              };
                              var fileInput = document.getElementById('dynamicAttachmentsPDFLogo');
                              if (fileInput.files.length > 0) {
                                var fileNames = fileInput.files[0].name;
                                logoConfig['parameter'] = fileNames;
                                let formData = new FormData($("#approvalAttachmentForm")[0]);
                                formData.append("operation", "saveApprovalAttachmentPDFLogo");

                                $.ajax({
                                  url:window.location.pathname,
                                  data: formData,
                                  type: 'POST',
                                  cache: false,
                                  contentType: false,
                                  processData: false,
                                  success: function (data) {

                                  },
                                  error: ()=>{
                                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                                  }
                                });
                              } else if ($("#dynamicAttachmentsPDFLogo").siblings(".custom-file-label").hasClass("selected")) {
                                logoConfig['parameter'] = $("#dynamicAttachmentsPDFLogo").siblings(".custom-file-label").html();
                              } else {

                              }
                            }
                            if (customizeStyle == 'yes') {
                              styleConfig = {
                                customize_style: customizeStyle,
                                header_bg_color: $('#dynamicAttachmentPDFHeaderBGColor').val(),
                                header_text_color: $('#dynamicAttachmentPDFHeaderTextColor').val(),
                                cell_bg_color: $('#dynamicAttachmentPDFCellBGColor').val(),
                                cell_text_color: $('#dynamicAttachmentPDFCellTextColor').val(),
                                row_height: $('#dynamicAttachmentPDFTableRowHeight').val(),
                                customize_column_width: $('#dynamicAttachmentPDFTableColumnWidth').val(),
                                static_column_width: $('#dynamicAttachmentPDFTableColumnStaticWidth').val(),
                              };
                              var columnWidthConfig = {};
                              if ($('#dynamicAttachmentPDFTableColumnWidth').val() == 'manual') {
                                if ($('#dynamicAttachmentPDFTableColumnWidthTable').val()) {
                                  columnWidthConfig['table'] = $('#dynamicAttachmentPDFTableColumnWidthTable').val();
                                  var customColumnWidth = {};
                                  $('#dynamicAttachmentColumnWidthFieldContainer').find('input.col-5').each(function(){
                                    if ($(this).val()) {
                                      customColumnWidth[$(this).attr('data-column')] = $(this).val();
                                    }
                                  });
                                  columnWidthConfig['field_config'] = customColumnWidth;
                                }
                              }
                              styleConfig['custom_column_field_level_config'] = columnWidthConfig;
                              var pdfColumnAlignmentConfig = {};
                              pdfColumnAlignmentConfig['global_header'] = $('#selectGlobalHeaderPDFANColumnAlignment').val();
                              pdfColumnAlignmentConfig['global_content'] = $('#selectGlobalContentPDFANColumnAlignment').val();
                              var inidividualFieldConfig = {};
                              $('#pdfColumnAlignmentContainerAN').find('.row.col-12').each(function(){
                                var fieldName = $(this).find('.col-4').eq(0).find('strong').attr('data-value');
                                var headerAlignment = $(this).find('.col-4').eq(1).find('.header').val();
                                var contentAlignment = $(this).find('.col-4').eq(2).find('.content').val();
                                inidividualFieldConfig[fieldName] = {header: headerAlignment, content: contentAlignment};
                              });
                              pdfColumnAlignmentConfig['field_level_config'] = inidividualFieldConfig;
                              styleConfig['column_alignment'] = pdfColumnAlignmentConfig;
                            }
                            additionalConfig['logoConfig'] = logoConfig;
                            additionalConfig['styleConfig'] = styleConfig;
                            additionalConfig['layoutOption'] = layoutOption;
                            additionalConfig["droptable"] = droptable;
                            additionalConfig["dropcolumns"] = dropcolumns;
                            additionalConfig["transDataCols"] = transDataCols;
                          }

                          let scheduler_table = $("#dynamicAttachmentPDFDataDropTableFilter").val()
                          let scheduler_columns = $("#dynamicAttachmentPDFDataDropColumnsFilter").val()
                          let scheduler_table_underlying = $("#dynamicAttachmentPDFDataDropTableFilterUnderlying").val()
                          let scheduler_columns_underlying = $("#dynamicAttachmentPDFDataDropColumnsFilterUnderlying").val()
                          let scheduler_filter = $("#saveBasicfilter_schedule").attr("data-basicfilter-config")
                          if(scheduler_filter){
                            scheduler_filter = JSON.parse(scheduler_filter)
                          }else{
                            scheduler_filter = []
                          }

                          if($("#approvalNotificationAttachmentModal").attr("data-calling") == "mail"){
                            scheduler_data_config = {
                              "scheduler_table": scheduler_table,
                              "scheduler_columns": scheduler_columns,
                              "scheduler_table_underlying": scheduler_table_underlying,
                              "scheduler_columns_underlying": scheduler_columns_underlying,
                              "scheduler_filter":scheduler_filter,
                            }

                            additionalConfig['scheduler_data_config'] = scheduler_data_config
                          }

                          attachmentConfig['additional_config'] = additionalConfig;
                        }
                        $('#insert_attachment_main').attr('data-config', JSON.stringify(attachmentConfig));
                        closeAttachment()
                      });
                      $('#resetApprovalAttachments').off('click').on('click', function(){
                        $('#uploadApprovalAttachments').val('').trigger('change');
                        $('#insert_attachment_main').attr('data-config', JSON.stringify({}));
                      });
                    });

                    </script>

                  </div>

            </div>

          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" id="saveSchedulerConfig">Save</button>
        </div>
      </div>
    </div>
  </div>

    <!-- Dependency Modal -->
    <div class="modal" id="dependencyChecker">
      <div class="modal-dialog modal-lg modal-dialog-centered" style="justify-content: center;">
        <div class="modal-content" style="width: 50%;text-align: center;justify-content: center;" >

          <div class="modal-header" style="background:#565a5e;color:white;">
            <h6 class="modal-title">Related Application Dependencies</h6>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>

          <div class="modal-body" style="height: 8rem;overflow: auto;">
              <table class="table">
                  <tbody id="dependencyTable" >

                  </tbody>
              </table>
          </div>

          <div class="modal-footer">
            <button type="button" id="btn_dependencySave" class="btn btn-primary btn-xs mx-2 rounded px-2" data-dismiss="modal">Save</button>
            <button type="button" class="btn btn-primary btn-xs mx-2 rounded px-2" data-dismiss="modal">Close</button>
          </div>

        </div>
      </div>
    </div>

<!-- formatter modal -->
    <div class="modal" id="fmodal">
      <div class="modal-dialog modal-lg modal-dialog-centered" style="justify-content: center;">
        <div class="modal-content" style="width: 70%;text-align: center;justify-content: center;" >

          <div class="modal-header" style="background:#565a5e;color:white;">
            <h6 class="modal-title" style="flex: auto;">Apply Formatters</h6>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>

          <div class="modal-body" style="height: 12rem;overflow: auto;">

            <div class="form-group">
              <select class="select2 form-control" name="formatoptions" id="formatOption">
                <option value="" disabled selected> Choose formatter </option>
                <option value='number' id="numberFormat">Number</option>
                <option value='currency' id="currencyFormat">Currency</option>
                <option value='date' id="dateFormat">Date</option>
                <option value='time' id='timeFormat'>Time</option>
                <option value='percentage' id='percentageFormat'>Percentage</option>
                <option value='scientific' id='scientificFormat'>Scientific</option>
              </select>
            </div>

            <div class="row">
            <div class="form-group col-6" style="display:none;" id="Dformat">
              <label for="decimalFormat">Decimal places: </label>
              <input type="number" name="decimalFormat" id="decimalFormat" class="textinput textInput form-control" min="0">
            </div>
            <br>
            <div class="form-group custom-control custom-checkbox" style="display:none;margin-top: 2rem;margin-left: 3rem" id="SFormat">
                <input type="checkbox" name="sepFormatter" class="checkboxinput custom-control-input notRequired" id="sepFormat" value="sepFormatter">
                <label for="sepFormat" class="custom-control-label">Use 1000 Separator</label>
            </div>
            <br>
            <div class="form-group col-6" style="display:none;" id="syFormat">
              <label for="symbolFormat">Symbol</label>
              <select class="select2 form-control" name="symbolFormat" id="symbolFormat">
                <option value="" disabled selected> None </option>
              </select>
            </div>
            <br>
            <div class="form-group col-6" style="display:none;" id="DTFormat">
              <label for="formatdate">Select Date Format: </label>
              <select class="select2 form-control" name="formatdate" id="formatDate">
                <option value="" disabled selected> None </option>
                <option value='%Y-%m-%d' id="dformat1">YYYY-MM-DD</option>
                <option value='%d-%m-%Y' id="dformat2">DD-MM-YYYY</option>
                <option value='%m-%d-%Y' id="dformat3">MM-DD-YYYY</option>
                <option value='%d %B %Y' id='dformat4'>14 March 2020</option>
              </select>
            </div>
            <br>
            <div class="form-group col-6" style="display:none;" id="TimefFormat">
              <label for="formattime">Select Time Format: </label>
              <select class="select2 form-control" name="formattime" id="formatTime">
                <option value="" disabled selected> None </option>
                <option value='%H:%M' id="tformat1">24 hrs</option>
                <option value='%I:%M %p' id="tformat2">12 hrs</option>
                <option value='%H:%M:%S' id="tformat3">24 hrs with seconds</option>
                <option value='%I:%M:%S %p' id='tformat4'>12 hrs with seconds</option>
              </select>
            </div>
          </div>

          </div>

          <div class="modal-footer">
            <button type="button" id="btn_formatSave" class="btn btn-primary btn-xs mx-2 rounded px-2" data-dismiss="modal">Save</button>
            <button type="button" class="btn btn-primary btn-xs mx-2 rounded px-2" data-dismiss="modal">Close</button>
          </div>

        </div>
      </div>
    </div>

    <!-- End Dependency Modal -->
        <!-- Loads and initializes the library -->

        <!-- <script type="text/javascript" src="{%static 'vendor/Base_theme/mxGraph/mxClient1.js'%}"></script> -->
      <!--Grapejs Design Modal-->
      <div class="modal" id="designModal">
        <div class="" style="height:100vh;overflow:auto;background:whitesmoke;z-index:10;position: relative;">
          <div class="modal-content" style="width:100%;height:100%;text-align: center;justify-content: center;" >
            <div class="modal-header" style="background:#565a5e;color:white;">
              <h6 class="modal-title">Custom Template</h6>
              <button type="button" class="close" onclick="closeDesignModal.call(this)">&times;</button>
            </div>

            <div id="gjs" style="height: 0px; overflow: hidden">

              <style>
                .clearfix {
                  clear: both;
                }
                .header-banner {
                  padding-top: 35px;
                  padding-bottom: 100px;
                  color: #ffffff;
                  font-family: Helvetica, serif;
                  font-weight: 100;
                  background-image: url("https://grapesjs.com/img/bg-gr-v.png"),
                    url("https://grapesjs.com/img/work-desk.jpg");
                  background-attachment: scroll, scroll;
                  background-position: left top, center center;
                  background-repeat: repeat-y, no-repeat;
                  background-size: contain, cover;
                }
                .container-width {
                  width: 90%;
                  max-width: 1150px;
                  margin: 0 auto;
                }
                .logo-container {
                  float: left;
                  width: 50%;
                }
                .logo {
                  background-color: #fff;
                  border-radius: 5px;
                  width: 130px;
                  padding: 10px;
                  min-height: 30px;
                  text-align: center;
                  line-height: 30px;
                  color: #4d114f;
                  font-size: 23px;
                }
                .menu {
                  float: right;
                  width: 50%;
                }
                .menu-item {
                  float: right;
                  font-size: 15px;
                  color: #eee;
                  width: 130px;
                  padding: 10px;
                  min-height: 50px;
                  text-align: center;
                  line-height: 30px;
                  font-weight: 400;
                }
                .lead-title {
                  margin: 150px 0 30px 0;
                  font-size: 40px;
                }
                .sub-lead-title {
                  max-width: 650px;
                  line-height: 30px;
                  margin-bottom: 30px;
                  color: #c6c6c6;
                }
                .lead-btn {
                  margin-top: 15px;
                  padding: 10px;
                  width: 190px;
                  min-height: 30px;
                  font-size: 20px;
                  text-align: center;
                  letter-spacing: 3px;
                  line-height: 30px;
                  background-color: #d983a6;
                  border-radius: 5px;
                  transition: all 0.5s ease;
                  cursor: pointer;
                }
                .lead-btn:hover {
                  background-color: #ffffff;
                  color: #4c114e;
                }
                .lead-btn:active {
                  background-color: #4d114f;
                  color: #fff;
                }
                .flex-sect {
                  background-color: #fafafa;
                  padding: 100px 0;
                  font-family: Helvetica, serif;
                }
                .flex-title {
                  margin-bottom: 15px;
                  font-size: 2em;
                  text-align: center;
                  font-weight: 700;
                  color: #555;
                  padding: 5px;
                }
                .flex-desc {
                  margin-bottom: 55px;
                  font-size: 1em;
                  color: rgba(0, 0, 0, 0.5);
                  text-align: center;
                  padding: 5px;
                }
                .cards {
                  padding: 20px 0;
                  display: flex;
                  justify-content: space-around;
                  flex-flow: wrap;
                }
                .card {
                  background-color: white;
                  height: 300px;
                  width: 300px;
                  margin-bottom: 30px;
                  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.2);
                  border-radius: 2px;
                  transition: all 0.5s ease;
                  font-weight: 100;
                  overflow: hidden;
                }
                .card:hover {
                  margin-top: -5px;
                  box-shadow: 0 20px 30px 0 rgba(0, 0, 0, 0.2);
                }
                .card-header {
                  height: 155px;
                  background-image: url("https://placehold.it/350x250/78c5d6/fff/image1.jpg");
                  background-size: cover;
                  background-position: center center;
                }
                .card-body {
                  padding: 15px 15px 5px 15px;
                  color: #555;
                }
                .card-title {
                  font-size: 1.4em;
                  margin-bottom: 5px;
                }
                .card-sub-title {
                  color: #b3b3b3;
                  font-size: 1em;
                  margin-bottom: 15px;
                }
                .card-desc {
                  font-size: 0.85rem;
                  line-height: 17px;
                }
                .am-sect {
                  padding-top: 100px;
                  padding-bottom: 100px;
                  font-family: Helvetica, serif;
                }
                .img-phone {
                  float: left;
                }
                .am-container {
                  display: flex;
                  flex-wrap: wrap;
                  align-items: center;
                  justify-content: space-around;
                }
                .am-content {
                  float: left;
                  padding: 7px;
                  width: 490px;
                  color: #444;
                  font-weight: 100;
                  margin-top: 50px;
                }
                .am-pre {
                  padding: 7px;
                  color: #b1b1b1;
                  font-size: 15px;
                }
                .am-title {
                  padding: 7px;
                  font-size: 25px;
                  font-weight: 400;
                }
                .am-desc {
                  padding: 7px;
                  font-size: 17px;
                  line-height: 25px;
                }
                .am-post {
                  padding: 7px;
                  line-height: 25px;
                  font-size: 13px;
                }
                .blk-sect {
                  padding-top: 100px;
                  padding-bottom: 100px;
                  background-color: #222222;
                  font-family: Helvetica, serif;
                }
                .blk-title {
                  color: #fff;
                  font-size: 25px;
                  text-align: center;
                  margin-bottom: 15px;
                }
                .blk-desc {
                  color: #b1b1b1;
                  font-size: 15px;
                  text-align: center;
                  max-width: 700px;
                  margin: 0 auto;
                  font-weight: 100;
                }
                .price-cards {
                  margin-top: 70px;
                  display: flex;
                  flex-wrap: wrap;
                  align-items: center;
                  justify-content: space-around;
                }
                .price-card-cont {
                  width: 300px;
                  padding: 7px;
                  float: left;
                }
                .price-card {
                  margin: 0 auto;
                  min-height: 350px;
                  background-color: #d983a6;
                  border-radius: 5px;
                  font-weight: 100;
                  color: #fff;
                  width: 90%;
                }
                .pc-title {
                  font-weight: 100;
                  letter-spacing: 3px;
                  text-align: center;
                  font-size: 25px;
                  background-color: rgba(0, 0, 0, 0.1);
                  padding: 20px;
                }
                .pc-desc {
                  padding: 75px 0;
                  text-align: center;
                }
                .pc-feature {
                  color: rgba(255, 255, 255, 0.5);
                  background-color: rgba(0, 0, 0, 0.1);
                  letter-spacing: 2px;
                  font-size: 15px;
                  padding: 10px 20px;
                }
                .pc-feature:nth-of-type(2n) {
                  background-color: transparent;
                }
                .pc-amount {
                  background-color: rgba(0, 0, 0, 0.1);
                  font-size: 35px;
                  text-align: center;
                  padding: 35px 0;
                }
                .pc-regular {
                  background-color: #da78a0;
                }
                .pc-enterprise {
                  background-color: #d66a96;
                }
                .footer-under {
                  background-color: #312833;
                  padding-bottom: 100px;
                  padding-top: 100px;
                  min-height: 500px;
                  color: #eee;
                  position: relative;
                  font-weight: 100;
                  font-family: Helvetica, serif;
                }
                .led {
                  border-radius: 100%;
                  width: 10px;
                  height: 10px;
                  background-color: rgba(0, 0, 0, 0.15);
                  float: left;
                  margin: 2px;
                  transition: all 5s ease;
                }
                .led:hover {
                  background-color: #c29fca;
                  box-shadow: 0 0 5px #9d7aa5, 0 0 10px #e6c3ee;
                  transition: all 0s ease;
                }
                .copyright {
                  background-color: rgba(0, 0, 0, 0.15);
                  color: rgba(238, 238, 238, 0.5);
                  bottom: 0;
                  padding: 1em 0;
                  position: absolute;
                  width: 100%;
                  font-size: 0.75em;
                }
                .made-with {
                  float: left;
                  width: 50%;
                  padding: 5px 0;
                }
                .foot-social-btns {
                  display: none;
                  float: right;
                  width: 50%;
                  text-align: right;
                  padding: 5px 0;
                }
                .footer-container {
                  display: flex;
                  flex-wrap: wrap;
                  align-items: stretch;
                  justify-content: space-around;
                }
                .foot-list {
                  float: left;
                  width: 200px;
                }
                .foot-list-title {
                  font-weight: 400;
                  margin-bottom: 10px;
                  padding: 0.5em 0;
                }
                .foot-list-item {
                  color: rgba(238, 238, 238, 0.8);
                  font-size: 0.8em;
                  padding: 0.5em 0;
                }
                .foot-list-item:hover {
                  color: rgba(238, 238, 238, 1);
                }
                .foot-form-cont {
                  width: 300px;
                  float: right;
                }
                .foot-form-title {
                  color: rgba(255, 255, 255, 0.75);
                  font-weight: 400;
                  margin-bottom: 10px;
                  padding: 0.5em 0;
                  text-align: right;
                  font-size: 2em;
                }
                .foot-form-desc {
                  font-size: 0.8em;
                  color: rgba(255, 255, 255, 0.55);
                  line-height: 20px;
                  text-align: right;
                  margin-bottom: 15px;
                }

                .form {
                  border-radius: 3px;
                  padding: 10px 15px;
                  background-color: rgba(0, 0, 0, 0.2);
                }

                .input,
                .textarea,
                .select,
                .sub-input {
                  width: 100%;
                  margin-bottom: 15px;
                  padding: 7px 10px;
                  border-radius: 2px;
                  color: #fff;
                  background-color: #554c57;
                  border: none;
                }

                .select {
                  height: 30px;
                }

                .label {
                  width: 100%;
                  display: block;
                }

                .button,
                .sub-btn {
                  width: 100%;
                  margin: 15px 0;
                  background-color: #785580;
                  border: none;
                  color: #fff;
                  border-radius: 2px;
                  padding: 7px 10px;
                  font-size: 1em;
                  cursor: pointer;
                }
                .sub-btn:hover {
                  background-color: #91699a;
                }
                .sub-btn:active {
                  background-color: #573f5c;
                }
                .blk-row::after {
                  content: "";
                  clear: both;
                  display: block;
                }
                .blk-row {
                  padding: 10px;
                }
                .blk1 {
                  width: 100%;
                  padding: 10px;
                  min-height: 75px;
                }
                .blk2 {
                  float: left;
                  width: 50%;
                  padding: 10px;
                  min-height: 75px;
                }
                .blk3 {
                  float: left;
                  width: 33.3333%;
                  padding: 10px;
                  min-height: 75px;
                }
                .blk37l {
                  float: left;
                  width: 30%;
                  padding: 10px;
                  min-height: 75px;
                }
                .blk37r {
                  float: left;
                  width: 70%;
                  padding: 10px;
                  min-height: 75px;
                }
                .heading {
                  padding: 10px;
                }
                .paragraph {
                  padding: 10px;
                }

                .bdg-sect {
                  padding-top: 100px;
                  padding-bottom: 100px;
                  font-family: Helvetica, serif;
                  background-color: #fafafa;
                }
                .bdg-title {
                  text-align: center;
                  font-size: 2em;
                  margin-bottom: 55px;
                  color: #555555;
                }
                .badges {
                  padding: 20px;
                  display: flex;
                  justify-content: space-around;
                  align-items: flex-start;
                  flex-wrap: wrap;
                }
                .badge {
                  width: 290px;
                  font-family: Helvetica, serif;
                  background-color: white;
                  margin-bottom: 30px;
                  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.2);
                  border-radius: 3px;
                  font-weight: 100;
                  overflow: hidden;
                  text-align: center;
                }
                .badge-header {
                  height: 115px;
                  background-image: url("https://grapesjs.com/img/bg-gr-v.png"),
                    url("https://grapesjs.com/img/work-desk.jpg");
                  background-position: left top, center center;
                  background-attachment: scroll, fixed;
                  overflow: hidden;
                }
                .blurer {
                  filter: blur(5px);
                }
                .badge-name {
                  font-size: 1.4em;
                  margin-bottom: 5px;
                }
                .badge-role {
                  color: #777;
                  font-size: 1em;
                  margin-bottom: 25px;
                }
                .badge-desc {
                  font-size: 0.85rem;
                  line-height: 20px;
                }
                .badge-avatar {
                  width: 100px;
                  height: 100px;
                  border-radius: 100%;
                  border: 5px solid #fff;
                  box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.2);
                  margin-top: -75px;
                  position: relative;
                }
                .badge-body {
                  margin: 35px 10px;
                }
                .badge-foot {
                  color: #fff;
                  background-color: #a290a5;
                  padding-top: 13px;
                  padding-bottom: 13px;
                  display: flex;
                  justify-content: center;
                }
                .badge-link {
                  height: 35px;
                  width: 35px;
                  line-height: 35px;
                  font-weight: 700;
                  background-color: #fff;
                  color: #a290a5;
                  display: block;
                  border-radius: 100%;
                  margin: 0 10px;
                }
                .quote {
                  color: #777;
                  font-weight: 300;
                  padding: 10px;
                  box-shadow: -5px 0 0 0 #ccc;
                  font-style: italic;
                  margin: 20px 30px;
                }

                @media (max-width: 768px) {
                  .foot-form-cont {
                    width: 400px;
                  }
                  .foot-form-title {
                    width: autopx;
                  }
                }

                @media (max-width: 480px) {
                  .foot-lists {
                    display: none;
                  }
                }
              </style>
            </div>

            <div id="info-panel" style="display: none">
              <div class="info-panel-label">

              </div>
            </div>
            <form id='form1' method='post'>{% csrf_token %}</form>

            <div class="modal-footer">
              <button onclick="restoreL3.call(this)" type="button" class="btn btn-primary btn-xs mx-2 rounded px-2 restoreL3" style="display:none" data-toggle="tooltip" title="This will take back to the system defined L3 template">Reset design mode</button>
              <button type="button" id="" class="btn btn-primary btn-xs mx-2 rounded px-2 savebtn" data-dismiss="modal">Save</button>
              <button type="button" id="staticPageSave" onclick="staticHtmlSave.call(this)" class="btn btn-primary btn-xs mx-2 rounded px-2" data-dismiss="modal" style="display:none">Save</button>
            </div>

          </div>
        </div>
      </div>
      <!------------------------->
      <!--Grapejs config modal-->
      <div class="modal fade" id="l3Component" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="uploadLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="uploadLabel" style="margin:auto">Select Component</h5>
            </div>
            <div class="modal-body">
              <div class='card'>
                 <div class='card-body' id='processSubProcessTagging'>
                    <div class="row">
                      <div class="form-group col-4">
                        <select class="select2 form-control selectProcessName" name="Process" required disabled>
                        </select>
                      </div>
                      <div class="form-group col-4">
                        <select class="select2 form-control selectSubProcessName" name="subprocesslist" required disabled>
                        </select>
                      </div>
                      <div class="form-group col-4">
                        <select class="select2 form-control" name="subprocesslist" id='l3ComponentNames' required>
                          <option value="" disabled selected>Select L3 Component</option>
                        </select>
                    </div>
                  </div>
              </div>
              </div>
          </div>
            <div class="modal-footer">
              <button onclick="populateL3Component.call(this)" type="button" class="btn btn-primary l3ComponentBtn" style="background-color:#343a40;color: whitesmoke;">Save</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal fade" id="widgetmodal" tabindex="-1" data-focus="false" role="dialog">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header" style="background-color: whitesmoke">
              <h5 class="modal-title" id="exampleModalLongTitle" style="margin-left: auto; color: var(--primary-color);">Save Widget</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="col-12">
                  <div class="d-flex justify-content-center">
                    <button class="btn btn-primary buttonstyling acies_btn acies_btn-primary button_standard_save newpanelbtn" style="background-color:#343a40;color: whitesmoke;">
                      Create New Panel
                    </button>
                    <button class="btn ml-3 btn-outline-primary existingpanelbtn" style="background-color:#343a40;color: whitesmoke;">
                      Add to existing panel
                    </button>
                  </div>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-12">
                  <form action="" class="newpanelform" style="display: none">
                    <div class="form-row">
                      <div class="col-6">
                        <div class="form-group">
                          <input
                            type="text"
                            class="form-control newpanelname"
                            placeholder="Panel Name"
                            required
                          />
                        </div>
                      </div>
                      <div class="col-6">
                        <div class="form-group">

                          <select id="newiconselect" class=" form-control">
                            <option value="fas fa-chart-pie"> &#xf14e; </option>
                            <option value="fas fa-table"> &#xf0ce; </option>
                            <option value="fas fa-chart-pie">&#xf200; </option>
                            <option value="fas fa-tasks"> &#xf0ae; </option>
                            <option value="fas fa-th"> &#xf00a; </option>
                            <option value="fa fa-bank"> &#xf19c; </option>
                            <option value="fas fa-chart-area"> &#xf1fe; </option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="col-12">
                        <input
                            type="text"
                            class="form-control newwidgetname"
                            placeholder="Widget Name"
                            required
                          />
                      </div>
                    </div>
                    <div class="form-row mt-4">
                      {% if is_superuser_ %}
                      <div class="col-6">
                        <div class="d-flex justify-content-center">
                          <button class="savenewwidgetbtn btn btn-primary" style="background-color:#343a40;color: whitesmoke;">
                            Save widget
                          </button>
                        </div>
                      </div>
                      <div class="col-6">
                        <div class="d-flex justify-content-center">
                          <button class="savenewwidgetbtnstd btn btn-primary" style="background-color:#343a40;color: whitesmoke;">
                            System defined widgets
                          </button>
                        </div>
                      </div>
                      {% endif %}
                      {% if not is_superuser_ %}
                      <div class="col-12">
                        <div class="d-flex justify-content-center">
                          <button class="savenewwidgetbtn btn btn-primary" style="background-color:#343a40;color: whitesmoke;">
                            Save Widget
                          </button>
                        </div>
                      </div>
                      {% endif %}
                    </div>
                  </form>
                  <form action="" class="existingpanelform" style="display: none">
                    <div class="form-row">
                      <div class="col-6">
                        <div class="form-group">
                          <select
                            id="panelname"
                            class="form-control" name="state" style="width: 100%;height: 40px;"></select>

                        </div>
                      </div>
                      <div class="col-6">
                        <div class="form-group">

                          <select id="iconselect" class="form-control">
                            <option value="fa fa-compass"> &#xf14e; </option>
                            <option value="fas fa-table"> &#xf0ce; </option>
                            <option value="fas fa-chart-pie"> 	&#xf200; </option>
                            <option value="fas fa-tasks"> &#xf0ae; </option>
                            <option value="fas fa-th"> &#xf00a; </option>
                            <option value="fa fa-bank"> &#xf19c; </option>
                            <option value="fas fa-chart-area"> &#xf1fe; </option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="col-12">
                        <input
                            type="text"
                            class="form-control existingwidgetname"
                            placeholder="Widget Name"
                            required
                          />
                      </div>
                    </div>
                    <div class="form-row mt-4">
                      {% if is_superuser_ %}
                      <div class="col-6">
                        <div class="d-flex justify-content-center">
                          <button class="saveexistingwidgetbtn btn btn-primary" style="background-color:#343a40;color: whitesmoke;">
                            Save widget
                          </button>
                        </div>
                      </div>
                      <div class="col-6">
                        <div class="d-flex justify-content-center">
                          <button class="saveexistingwidgetbtnstd btn btn-primary" style="background-color:#343a40;color: whitesmoke;">
                            System defined widgets
                          </button>
                        </div>
                      </div>
                      {% endif %}
                      {% if not is_superuser_ %}
                      <div class="col-12">
                        <div class="d-flex justify-content-center">
                          <button class="saveexistingwidgetbtn btn btn-primary" style="background-color:#343a40;color: whitesmoke;">
                            Save Widget
                          </button>
                        </div>
                      </div>
                      {% endif %}
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!------------------------->
      <div class="modal" id="EBDisplayModel">
        <div>
            <div style="height:100vh;overflow:auto;background:whitesmoke;z-index:10;position: relative;">

                <div id="EBbody">

                    <div class="overlay" id="overlay" style="display:none;"></div>
                    <div class="popup" id="popup" style="display:none;">
                        <div class="popup-inner">
                            <input type="button" name="Close" class="s3-btn-close" onclick="popupClose();" value="&times;">

                            <h2 id='funcHeading' style="font-size:28px"></h2>
                            <br />
                            <div id="funcInput" class='ScrollStyle'>
                            </div>
                            <p id='funcDesc' style="font-size:22px;"></p>
                        </div>
                    </div>

                    <div class="equation-left">
                        <div class="fav-functions">
                            <div class="functions-search">
                                <h2>Favourite Functions</h2>
                            </div>

                            <div id="favouriteList">

                            </div>
                        </div>

                        <div class="eq-functions">
                            <div class="functions-search">
                                <h2>Search Functions</h2>
                                <div class="searchWrapper">
                                    <input type="text" name="searchBar" id="searchBar"
                                        placeholder="Search for a function" />
                                </div>
                            </div>

                            <div id="functionsList">

                            </div>
                        </div>
                    </div>
                    <div class="equation-right">
                        <div class="search-table">
                            <div class="searchWrapper">
                                <input type="text" name="searchTable" id="searchTable" placeholder="Search for table" />
                            </div>
                             <div id="tableList">
                              {% for l in tableList%}
                                <div onClick='selectTable(`{{l}}`)' class="tableItem btn-xs btn">
                                  <p class="tableItemP"
                                      onClick="selectTable(e.target.value);changeTableandColumns(e.target.value)"
                                      value="{{l}}">{{l}}</p>
                                </div>
                              {%endfor%}
                              </div>
                        </div>
                        <div id='selectedTablesDiv'>

                        </div>
                        <div id="table-columns" class="dragAreaPossible"></div>
                        <div class="eq-workspace">
                            <div class="workspace-left" style="height:73vh;">
                                <div class="ebSteps">
                                    <h2>Steps</h2>
                                    <div id="stepNumsEb"></div>
                                </div>
                                <div class="ebFunctions dragAreaPossible">
                                    <h2>Functions</h2>
                                </div>
                                <div id="dataElementParent" class="ebDataElements">
                                    <h2>Data Elements</h2>
                                </div>
                            </div>
                            <div class="workspace-right" style="height:73vh">
                                <h2>Preview</h2>
                                <div id="functionPreviews"></div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="modal-footer">
                    <button type="button" id="where_condition" class="btn btn-primary btn-xs rounded">Configure where condition</button>
                    <button type="button" class="btn btn-primary btn-xs mx-2 rounded px-2" id="export_data_equ">Export Data to DB</button>
                    <button type="button" class="btn btn-primary btn-xs mx-2 rounded px-2 closeEqBuilder" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary btn-xs mx-2 rounded px-2" id="save_workflow_equ">Save</button>
                </div>
            </div>
        </div>
    </div>
      <!------------------------->
    <!-----Flow Link Modal------>
    <div class="modal fade" id="flowLinkModal" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="pivotReportModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header" style='background:#565a5e; color:white;'>
            <h5 class="modal-title" style="margin-left: 29.5%;">Link flow between subprocess</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class='card'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Link flow
              </div>
              <div class='card-body'>
                <div class="row">
                  <div class="col-4">
                    <label>Link name:</label>
                    <input class="form-control" id="flowLinkName" required>
                  </div>
                  <div class="col-4" style="display:none">
                    <label for="flowLinkElement">Select element:</label>
                    <select class="select2 form-control" name="flowLinkElement" id="flowLinkElement">
                    </select>
                  </div>
                  <div class="col-4">
                    <label for="flowLinkSubprocess">Select sub-process:</label>
                    <select class="select2 form-control" name="flowLinkSubprocess" id="flowLinkSubprocess">
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="saveFlowLink" onclick="saveFlowLink.call(this)">Save changes</button>
          </div>

        </div>
      </div>
    </div>
    <!-------------------------->
    <!-------------------------->
    <div class="modal fade" id="flowLinkModalTo" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="pivotReportModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header" style='background:#565a5e; color:white;'>
            <h5 class="modal-title" style="margin-left: 29.5%;">Link flow between subprocess</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class='card'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Link flow
              </div>
              <div class='card-body'>
                <div class="row">
                  <div class="col-4">
                    <label>Link name:</label>
                    <select class="select2 form-control" name="flowLinkElement" id="flowLinkNameOption">
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="saveFlowLinkTo" onclick="saveFlowLinkTo.call(this)">Save changes</button>
          </div>

        </div>
      </div>
    </div>
    <!-------------------------->
    <div class="modal fade" id="schedulerFlowModal" role="dialog" data-focus="false" aria-labelledby="schedulerFlowModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header" style='background:#565a5e; color:white;'>
            <h5 class="modal-title" id="schedulerFLowModalLabel" style="margin-left: 35%;">Scheduled flow</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" style="overflow-y: scroll ;max-height: 30rem;">
            <div class="card">
              <div class="card-body scheduleFlowBody">
                <div class="row">
                  <i class="fa fa-plus-square fa-2x" onclick="addScheduleFlow.call(this)" style="color:var(--primary-color);margin-left: auto;margin-bottom: 10px;"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="saveSchedulerFlow" onclick="saveSchedulerFlow.call(this)">Save changes</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="flowDetail" tabindex="0" role="dialog" data-focus="false" aria-labelledby="formModalLabel" aria-hidden="true" >
      <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Configure Process Scheduler</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="form-group col-5">
              <label for="selectSchedulerType">Select Type of Scheduler:</label>
              <select class="select2 form-control" name="selectSchedulerType" id="selectSchedulerType">
                <option value="scheduleBlock">Schedule Block(s)</option>
                <option value="scheduleFlow">Schedule Entire Flow</option>
              </select>
            </div>
            <div id="flowDetailBodyNew" style="height: 15rem;width: 99%; border: 1px solid black; border-radius: 5px;">

            </div>
            <div id="blockDetailContainer" style="display: none;">
              <div>
                <button type="button" class="btn btn-primary" style="float:right;" id="addBlockJob">Add Job</button>
              </div>
              <div class="row">
                <div class="form-group col-5 ml-1 mr-1" id="blockTriggerDetailContainer">
                  <label for="selectSchedulerTrigger">Execute Action On:</label>
                  <select class="select2 form-control" name="selectSchedulerTrigger" id="selectSchedulerTrigger">
                    <option value="trigger">Successful Completion of Preceding Element's Action</option>
                    <option value="interval">An Interval of Time (Auto Run)</option>
                  </select>
                </div>
                <div class="form-group col-5 ml-1 mr-1" id="blockActionDetailContainer">
                  <label for="selectSchedulerAction">Action To Be Performed:</label>
                  <select class="select2 form-control" name="selectSchedulerAction" id="selectSchedulerAction">
                    <option value="" selected>Select Action</option>
                  </select>
                  <small class="form-text" style="display: none;">Selected block doesnt support any action that can be scheduled.</small>
                </div>
                <div class="form-group col-1 ml-1 mr-1" id="blockActionConditionDetailContainer" style="margin: auto;">
                  <button type="button" class="btn btn-secondary rounded" id="actionConditionDetailButton"><i class="fas fa-filter"></i></button>
                </div>
              </div>
              <div class="row" id="triggerExecutionDetailsContainer">
                <div class="form-group col-4">
                  <label for="selectSchedulerTriggerAction">Preceding Element's Action:</label>
                  <select class="select2 form-control" name="selectSchedulerTriggerAction" id="selectSchedulerTriggerAction">
                    <option value="" selected>Select Action</option>
                  </select>
                </div>
              </div>
              <br>
              <div class="row" id="blockRetryDetailsContainer">
                <div class="form-group col-4">
                  <label for="selectSchedulerRetry">Retry Executing Action For:</label>
                  <input type="number" class="form-control numberinput" step=1 min=0 name="selectSchedulerRetry" id="selectSchedulerRetry" placeholder="Number of Retries">
                </div>
                <div class="form-group col-4">
                  <label for="selectSchedulerRetryInterval">Interval Between Retries (in minutes):</label>
                  <input type="number" class="form-control numberinput" step=1 min=0 name="selectSchedulerRetryInterval" id="selectSchedulerRetryInterval" placeholder="Interval Between Retries">
                </div>
              </div>
              <br>
              <div class="row" id="intervalExecutionDetailsContainer" style="display:none;">
                <div class="form-group col-3">
                  <label for="schedulerIntervalStartDate">Start Date:</label>
                  <div class="input-group date">
                    <input type="date" class="form-control" name="schedulerIntervalStartDate" id="schedulerIntervalStartDate" placeholder="DD-MM-YYYY">
                  </div>
                </div>
                <div class="form-group col-3">
                  <label for="schedulerIntervalEndDate">End Date:</label>
                  <div class="input-group date">
                    <input type="date" class="form-control" name="schedulerIntervalEndDate" id="schedulerIntervalEndDate" placeholder="DD-MM-YYYY">
                  </div>
                </div>
                <div class="form-group col-3">
                  <label for="selectSchedulerIntervalPeriodicity">Period of Execution:</label>
                  <select class="select2 form-control" name="selectSchedulerIntervalPeriodicity" id="selectSchedulerIntervalPeriodicity">
                    <option value="" selected>Select Period</option>
                    <option value="Every N Minutes">Every N Minutes</option>
                    <option value="Hourly">Every N Hours</option>
                    <option value="Daily">Daily</option>
                    <option value="Weekly">Weekly</option>
                    <option value="Monthly">Monthly</option>
                    <option value="Monthly/5th day">Monthly/5th day</option>
                    <option value="Quarterly">Quarterly</option>
                    <option value="Pre-Quarterly">Pre-Quarterly</option>
                    <option value="Yearly">Yearly</option>
                  </select>
                </div>
                <div class="form-group col-3" id="schedulerIntervalTimeContainer">
                  <label for="selectSchedulerIntervalTime">Time of Execution:</label>
                  <div class="input-group date">
                    <input type="time" class="form-control" name="selectSchedulerIntervalTime" id="selectSchedulerIntervalTime" placeholder="HH:MM">
                  </div>
                </div>
                <div class="form-group col-3" id="schedulerIntervalFrequencyContainer" style="display: none;">
                  <label for="selectSchedulerIntervalFrequency">Interval:</label>
                  <input type="number" step="1" min="1" max="60" class="form-control numberinput" name="selectSchedulerIntervalFrequency" id="selectSchedulerIntervalFrequency">
                </div>
              </div>
              <div class="row" id="additionalJobConfigContainer">

              </div>
              <div class="row" style="justify-content: flex-end;">
                <button id="saveBlockSchedulerConfig" class="btn btn-primary mr-2">Save Block Config</button>
              </div>
            </div>
            <br>
            <div class="card" id="flowDetailContainer" style="display: none;">
              <div class="card-header">Configure Flow Execution Details</div>
              <div class="card-body">
                <div class="row">
                  <div class="form-group col-5 ml-1 mr-1" id="blockTriggerDetailContainer">
                    <label for="selectFlowSchedulerTrigger">Execute Flow On:</label>
                    <select class="select2 form-control" name="selectFlowSchedulerTrigger" id="selectFlowSchedulerTrigger">
                      <option value="interval">An Interval of Time (Auto Run)</option>
                      <option value="trigger" disabled>Successful Completion of Preceding Element's Action</option>
                    </select>
                  </div>
                  <div class="form-group col-4">
                    <label for="selectFlowSchedulerRetry">Retry Failed Executing Action For:</label>
                    <input type="number" class="form-control numberinput" step=1 min=0 name="selectFlowSchedulerRetry" id="selectFlowSchedulerRetry" placeholder="Number of Retries">
                  </div>
                  <div class="form-group col-5">
                    <label for="selectFlowSchedulerRetryInterval">Interval Between Retries (in minutes):</label>
                    <input type="number" class="form-control numberinput" step=1 min=0 name="selectFlowSchedulerRetryInterval" id="selectFlowSchedulerRetryInterval" placeholder="Interval Between Retries">
                  </div>
                </div>
                <br>
                <div class="row">
                  <div class="form-group col-3">
                    <label for="flowSchedulerIntervalStartDate">Start Date:</label>
                    <div class="input-group date">
                      <input type="date" class="form-control" name="flowSchedulerIntervalStartDate" id="flowSchedulerIntervalStartDate" placeholder="DD-MM-YYYY">
                    </div>
                  </div>
                  <div class="form-group col-3">
                    <label for="flowSchedulerIntervalEndDate">End Date:</label>
                    <div class="input-group date">
                      <input type="date" class="form-control" name="flowSchedulerIntervalEndDate" id="flowSchedulerIntervalEndDate" placeholder="DD-MM-YYYY">
                    </div>
                  </div>
                  <div class="form-group col-3">
                    <label for="selectFlowSchedulerIntervalPeriodicity">Period of Execution:</label>
                    <select class="select2 form-control" name="selectFlowSchedulerIntervalPeriodicity" id="selectFlowSchedulerIntervalPeriodicity">
                      <option value="" selected>Select Period</option>
                      <option value="Every N Minutes">Every N Minutes</option>
                      <option value="Hourly">Every N Hours</option>
                      <option value="Daily">Daily</option>
                      <option value="Weekly">Weekly</option>
                      <option value="Monthly">Monthly</option>
                      <option value="Monthly/5th day">Monthly/5th day</option>
                      <option value="Quarterly">Quarterly</option>
                      <option value="Pre-Quarterly">Pre-Quarterly</option>
                      <option value="Yearly">Yearly</option>
                    </select>
                  </div>
                  <div class="form-group col-3">
                    <label for="selectFlowSchedulerIntervalTime">Time of Execution:</label>
                    <div class="input-group date">
                      <input type="time" class="form-control" name="selectFlowSchedulerIntervalTime" id="selectFlowSchedulerIntervalTime" placeholder="HH:MM">
                    </div>
                  </div>
                  <div class="form-group col-3" id="flowSchedulerIntervalFrequencyContainer" style="display: none;">
                    <label for="selectFlowSchedulerIntervalFrequency">Interval:</label>
                    <input type="number" step="1" min="1" max="60" class="form-control numberinput" name="selectFlowSchedulerIntervalFrequency" id="selectFlowSchedulerIntervalFrequency">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button id="resetProcessSchedulerConfig" class="btn btn-primary">Reset Scheduler</button>
            <button id="saveProcessSchedulerConfig" class="btn btn-primary">Schedule</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Scheduler Condition Config Modal -->
    <div class="modal fade" id="schedulerConditionConfigModal" aria-labelledby="schedulerConditionConfigModal" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header" style='background:#565a5e; color:white;'>
            <h5 class="modal-title" style="margin-left: 29.5%;">Setup Conditions For Scheduled Action Execution</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <h6>Conditions on Approval Information</h6>
              <hr>
              <div class="btn-group">
                <button type="button" class="btn btn-default dropdown-toggle mr-auto" data-toggle="dropdown">
                  {{_("Add Condition")}}
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" id="schedulerActionApprovalFilter" style="max-height:10rem; overflow-y:auto;">
                </ul>
              </div>
              <br>
              <table class="table" id="schedulerApprovalFilterTable">
              </table>
            </div>
            <hr>
            <div>
              <h6>Conditions on Underlying Data</h6>
              <hr>
              <div class="form-group col-5">
                <label for="selectUnderlyingTable">Select Underlying Table:</label>
                <select id="selectUnderlyingTable" class="select2 form-control" name="selectUnderlyingTable">
                  <option value="" disabled selected>Table name</option>
                  {% for i in tableList%}
                  <option value="{{i}}">{{i}}</option>
                  {%endfor%}
                </select>
              </div>
              <div class="btn-group">
                <button type="button" class="btn btn-default dropdown-toggle mr-auto" data-toggle="dropdown">
                  {{_("Add Condition")}}
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" id="schedulerActionUnderlyingFilter" style="max-height:10rem; overflow-y:auto;">
                </ul>
              </div>
              <br>
              <table class="table" id="schedulerUnderlyingFilterTable">
              </table>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="saveSchedulerActionConditions">Save changes</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Static page -->
    <div class="modal fade" id="staticPage" tabindex="-1" data-focus="false" role="dialog" aria-labelledby="pivotReportModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header" style='background:#565a5e; color:white;'>
            <h5 class="modal-title" style="margin-left: 29.5%;">Create flex pages</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class='card'>
              <div class='card-header' style="font-size: medium; color:var(--primary-color); font-weight: bold;">Flex page
              </div>
              <div class='card-body'>
                <div class="row">
                  <div class="col-4">
                    <label>Tab header name:</label>
                    <input class="form-control" id="templateName" required>
                  </div>
                  <div class="col-4">
                    <label>Display type:</label>
                    <select class="select2 form-control" name="flowLinkElement" id="displayType">
                      <option value="tab">Tab</option>
                      <option value="screen">Entire screen</option>
                    </select>
                  </div>
                  <div class="col-4">
                    <button type="button" class="btn btn-primary" onclick="reloadStaticPages.call(this)">Design page</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" onclick="staticPageSave().call(this)">Save changes</button>
          </div>

        </div>
      </div>
    </div>
    <!------------------>
    <div class="modal" id="breadcrumbsModal">
      <div class="modal-dialog modal-xl modal-dialog-centered" style="justify-content: center;">
        <div class="modal-content" style="width: 70%;text-align: center;justify-content: center;" >

          <div class="modal-header" style="background:#565a5e;color:white;">
            <h6 class="modal-title" style="flex: auto;">Design breadcrumbs</h6>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>

          <div class="modal-body" style="height: 12rem;overflow: auto;">
            <div class="row">
              <div class="col-4">
                <select class="select2 form-control" id="breadcrumbsChange" onchange="breadcrumbsChange.call(this)">
                  <option value="default">Default</option>
                  <option value="no">No breadcrumbs</option>
                  <option value="custom">custom</option>
                </select>
              </div>
            </div>
            <div class="row" style="margin-top:10px; display:block">
              <div class="card">
                <div class="card-header">
                  <h6>Preview</h6>
                </div>
                <div class="card-body">
                  <div class="col-12 default" id="PN4">

                  </div>
                  <div class="col-12 custom" id="PN5" style="display:none;">
                    <i class="fas fa-plus" style="float: right;font-size: larger;" onclick="addBreadcrumbs.call(this)"></i>
                    <i class="fas fa-remove" style="float: right;font-size: larger;margin-right: 15px;" onclick="removeBreadcrumbs.call(this)"></i>
                    <div class="row">
                      <div class="col-3">
                        <input class="form-control breadcrumbsValue" style="margin-bottom:10px;">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer">
            <button type="button" onclick="saveBreadcrumbs.call(this)" class="btn btn-primary btn-xs mx-2 rounded px-2" data-dismiss="modal">Save</button>
            <button type="button" class="btn btn-primary btn-xs mx-2 rounded px-2" data-dismiss="modal">Close</button>
          </div>

        </div>
      </div>
    </div>

    <!------------------>
    <div class="modal fade" id="schedulerFlowModalCondition" role="dialog" data-focus="false" aria-labelledby="schedulerFlowModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header" style='background:#565a5e; color:white;'>
            <h5 class="modal-title" style="margin-left: 35%;">Condition</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" style="overflow-y: scroll ;max-height: 30rem;">
            <div class="card">
              <div class="card-header">
                <p class="card-title">Condition</p>
                <div class="card-tools float-right">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                </div>
              </div>
              <div class="card-body schedulerBody">
                <div class="row">
                  <i class="fa fa-plus-square fa-2x" onclick="addIndScheduler.call(this)" style="color:var(--primary-color);margin-left: auto;margin-bottom: 10px;"></i>
                </div>
                <div class="row schedulerUserValidation" style="margin-top:0px;">
                  <div class="col-3">
                    <label>Table:</label>
                    <select class="select2 form-control schedulerTable" onchange="schedulerTable.call(this)" name="tableform2">
                      {% for i in tableList %}
                      <option value="{{i}}">{{i}}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
                <div class="row indScheduler schedulerUserValidation">
                  <div class="col-4">
                    <label>Column:</label>
                    <select class="select2 form-control schedulerColumn" >
                    </select>
                  </div>
                  <div class="col-4">
                    <label>Condition:</label>
                    <select class="select2 form-control schedulerCond" onchange="changeSchedulerSelectTag.call(this)">
                      <option value="" disabled selected>Select condition</option>
                      <option value="Equal to">Equal to</option>
                      <option value="IN">In</option>
                      <option value="Not Equal to">Not Equal to</option>
                      <option value="NOT IN">Not In</option>
                      <option value="Greater than">Greater than</option>
                      <option value="Smaller than">Smaller than</option>
                      <option value="Starts with">Starts with</option>
                      <option value="Ends with">Ends with</option>
                    </select>
                  </div>
                  <div class="col-3">
                    <label>Value:</label>
                    <select class="select2 form-control schedulerValue">
                    </select>
                  </div>
                  <div class="col-1">
                    <i class="fas fa-remove" onclick="removeIndScheduler.call(this)" style="font-size: initial;"></i>
                  </div>
                </div>
              </div>
              <div class="card-footer">
                <button class="btn btn-primary" onclick="saveSchedulerCondition.call(this)">Save</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!------------------>
    <div class="modal fade" id="scheduleProcess" role="dialog" data-focus="false" aria-labelledby="scheduleProcessLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header" style='background:#565a5e; color:white;'>
            <h5 class="modal-title" id="scheduleProcessLabel" style="margin-left: auto;text-align: center;">Scheduled subprocess</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" style="overflow-y: scroll ;max-height: 30rem;">
            <div class="card">
              <div class="card-body scheduleFlowBody1s">
                <div class="row">
                  <div class="col-4">
                    <label>Start date</label>
                    <input class="form-control scheduleDate" type="date"/>
                  </div>
                  <div class="col-4 scheduleIntervalCommon" style="">
                    <label>Schedule Interval</label>
                    <select class="select2 form-control scheduleIntervalDay">
                      <option value="" disabled selected>Select Schedule Interval</option>
                      <option value="Daily">Daily</option>
                      <option value="Weekly">Weekly</option>
                      <option value="Monthly">Monthly</option>
                      <option value="Monthly/5th day">Monthly/5th day</option>
                      <option value="Quarterly">Quarterly</option>
                      <option value="Pre-Quarterly">Pre-Quarterly</option>
                      <option value="Yearly">Yearly</option>
                    </select>
                  </div>
                  <div class="col-4">
                    <label>Interval</label>
                    <input class="form-control scheduleTime" type="time"/>
                  </div>
                  <div class="col-4">
                    <label>Retry interval (minutes)</label>
                    <input class="form-control scheduleInterval" type="number"/>
                  </div>
                  <div class="col-4">
                    <label>Retry</label>
                    <input class="form-control scheduleRepeat" type="number"/>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="saveSchedule" onclick="resetSchedule.call(this)">Reset</button>
            <button type="button" class="btn btn-primary" id="saveSchedule" onclick="saveSchedule.call(this)">Save changes</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal" id="multiselectConditionModal">
      <div class="modal-dialog modal-xl modal-dialog-centered" style="justify-content: center;">
        <div class="modal-content" style="text-align: center;justify-content: center;" >

          <div class="modal-header" style="background:#565a5e;color:white;">
            <h6 class="modal-title" style="flex: auto;">Multiselect condition</h6>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>

          <div class="modal-body" style="height: 20rem;overflow: auto;">
            <div class="row">
              <div class="col-12">
                <i class="fa fa-plus-square fa-2x" data-toggle="tooltip" title="Add condition" onclick="addMultiselectCond.call(this)" style="float:right;color:var(--primary-color);cursor: pointer;" data-tooltip="Add condition"></i>
              </div>
            </div>
            <div class="row mainCont" style="margin-top:10px; display:block">
            </div>
          </div>

          <div class="modal-footer">
            <button type="button" onclick="saveMultiselectCondition.call(this)" class="btn btn-primary btn-xs mx-2 rounded px-2" data-dismiss="modal">Save</button>
            <button type="button" class="btn btn-primary btn-xs mx-2 rounded px-2" data-dismiss="modal">Close</button>
          </div>

        </div>
      </div>
    </div>
    <!------------------>
      <link rel="stylesheet" href="{% static 'css/ebstyle.css' %}">
      <style>
        h2 {
          font-size: medium;
        }
        .ebDataElementsDiv {
          margin-bottom: 5px;
        }
        .popup {
          height:80%;
        }
        .select2-dropdown {
          z-index:9999
        }
      </style>
      <script type="text/javascript" src="{%static 'js/ebjavascript.min.js'%}"></script>
      <script type="text/javascript" src="{% static 'js/Kore_TI_js/htmlGeneratorScript.min.js' %}"></script>
        <script type="text/javascript">


            $(window).on("load", function () {
              $('.geFooterContainer').css('display','none')
              $('#ProcessModal').modal({backdrop: 'static', keyboard: false})
              $('#ProcessModal').modal('show')
            });


            // Parses URL parameters. Supported parameters are:
            // - lang=xy: Specifies the language of the user interface.
            // - touch=1: Enables a touch-style user interface.
            // - storage=local: Enables HTML5 local storage.
            // - chrome=0: Chromeless mode.
            var urlParams = (function (url) {
                var result = new Object();
                var idx = url.lastIndexOf('?');

                if (idx > 0) {
                    var params = url.substring(idx + 1).split('&');

                    for (var i = 0; i < params.length; i++) {
                        idx = params[i].indexOf('=');

                        if (idx > 0) {
                            result[params[i].substring(0, idx)] = params[i].substring(idx + 1);
                        }
                    }
                }

            return result;
        })(window.location.href);

        // Default resources are included in grapheditor resources
        mxLoadResources = false;
    </script>
    <script>
    var currentDevMod = "{{current_dev_mode}}";
    </script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/mxClient.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/js/Init.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/deflate/pako.min.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/deflate/base64.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/jscolor/jscolor.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/sanitizer/sanitizer.min.js'%}"></script>
    <!-- <script type="text/javascript" src="../../../src/js/mxClient.js"></script> -->

    <script type="text/javascript" src="{%static 'vendor/mxGraph/js/EditorUi.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/js/Editor.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/js/Sidebar.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/js/Graph.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/js/Format.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/js/Shapes.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/js/Actions.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/js/Menus.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/js/Toolbar.js'%}"></script>
    <script type="text/javascript" src="{%static 'vendor/mxGraph/js/Dialogs.js'%}"></script>


    <!-- <body class="geEditor"> -->
    <script type="text/javascript">

        function getxml() {
            var temp = localStorage['testing.xml'];
            var encoder = new mxCodec();
            var node = encoder.encode(graph.getmodel());
            var xml = mxutils.getxml(node);
        }
        var editorUiInit;
        var editorCopy;
        // Extends EditorUi to update I/O action states based on availability of backend
        (function () {
            editorUiInit = EditorUi.prototype.init;

            EditorUi.prototype.init = function () {
                editorCopy=this
                editorUiInit.apply(this, arguments);
                this.actions.get('export').setEnabled(true);

                // Updates action states which require a backend

            };

            // Adds required resources (disables loading of fallback properties, this can only
            // be used if we know that all keys are defined in the language specific file)
            mxResources.loadDefaultBundle = false;
            var bundle = mxResources.getDefaultBundle(src = "{%static 'vendor/mxGraph/js/resources/grapheditor'%}", mxLanguage) ||
                mxResources.getSpecialBundle(src = "{%static 'vendor/mxGraph/resources/js/grapheditor'%}", mxLanguage);
            // Fixes possible asynchronous requests
            mxUtils.getAll([bundle, src = "{%static 'vendor/mxGraph/styles/default.html'%}"], function (xhr) {
                // Adds bundle text to resources
                mxResources.parse(xhr[0].getText());

                // Configures the default graph theme.
                var themes = new Object();
                themes[Graph.prototype.defaultThemeName] = xhr[1].getDocumentElement();

                // Main
                new EditorUi(new Editor(urlParams['chrome'] == '0', themes));
            }, function () {
                document.body.innerHTML = '<center style="margin-top:10%;">Error loading resource files. Please check browser console.</center>';
            });
        })();


    </script>



    <script>
      localStorage.clear();
      var ctoken = $('form').find("input[name='csrfmiddlewaretoken']").attr('value')
        $.ajaxSetup({
            beforeSend: function (xhr, settings) {
              xhr.setRequestHeader("X-CSRFToken", ctoken);

            }
          });
        $('.select2').select2();
        var process_code;
          document.getElementById('selectProcess').onchange = function() { ajaxfunction()}
          $('#subprocess').on("select2:select",function(){
            $('#noteXMLFile').empty()
            $('#savetag')[0].disabled=false
          });

          function fetchSubprocess(){
            let selectedProcessRTF = $('#selectProcessAppLinks').val()
            $.ajax({
              url: `/users/${app_code2}/${current_dev_mode2}/processCreationsave/`,
              data: {
                'data_list': JSON.stringify({ data1: selectedProcessRTF }),
                'operation': 'cascading'
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                $("#selectSubprocessAppLinks").empty();
                for (let [key, value] of Object.entries(data.code)) {
                  $('#selectSubprocessAppLinks').append(`<option value='${key}'>${value}</option>`);
                }
              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
          }

          function ajaxfunction(){
            $('#noteXMLFile').empty()
            $('#savetag')[0].disabled=false

            process_code = $('#selectProcess').val()
            let url_string = window.location.pathname
            let f_occ = url_string.indexOf('/', url_string.indexOf('/') + 1)
            let s_occ = url_string.indexOf('/', url_string.indexOf('/') + f_occ +1)
            let t_occ = url_string.indexOf('/', url_string.indexOf('/') + s_occ +1)
            let app_code2 = url_string.substring(f_occ+1,s_occ)
            let current_dev_mode2 = url_string.substring(s_occ+1,t_occ)
            let modes = ["Build","Edit"]
            let url = ""
            if(current_dev_mode2 != "Build" && current_dev_mode2 != "Edit"){
              current_dev_mode2 = "User"
            }
            $.ajax({
              url: `/users/${app_code2}/${current_dev_mode2}/processCreationsave/`,
              data: {
                'data_list': JSON.stringify({ data1: process_code }),
                'operation': 'cascading'
              },
              type: "POST",
              dataType: "json",
              success: function (data) {

                $("#subprocess option").remove();
                for (var i = 0; i < data.data.length; i++) {
                  $('#subprocess').append(new Option(data.data[i], data.data[i]));
                }

              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
          }
          var process_name;
          var subprocess_name;

          $('#savetag').on('click', function () {
          process_name = $('#selectProcess option:selected').text()
          var pn = $('#selectProcess')
          subprocess_name = $('#subprocess').val()
          document.getElementById('PN1').innerText = " Process: " + process_name
          document.getElementById('PN2').innerText = " Subprocess: " +subprocess_name
          let html = ""
          html = "<b>Home > " + process_name + " > " + subprocess_name + " > element_name</b>"
          $("#PN4").html(html)
          $('#graphContainerID').attr('data-process_code',process_code)
          $('#graphContainerID').attr('data-sub_process_name',subprocess_name)

          if(process_name!=null && subprocess_name!=null ){
              $.ajax({
                    url: window.location.pathname,

                    data: {
                      'operation': 'processTagging',
                      'processName':process_name,
                      'subProcessName':subprocess_name,
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                      $(".version").empty()
                      $(".version").append(`<option value="" disbaled selected>Select version</option>`);
                      for(let i = 0; i < data.version.length; i++){
                        $(".version").append(`<option value="${data.version[i]}">${data.version[i]}</option>`)
                      }
                      if(data.hover_option=='no'){

                      $('.popoverval').attr('disabled',true)


                        var string3=`<div class="row" white-space="nowrap"><a href="#" ><i class="fas fa-plus listoficons" style="font-size:1rem;border:1px solid rgb(184, 134, 11)" ></i>&nbsp&nbsp</a></div><br>`
                        $('.listoficon').append(string3)

                      }else{

              if(data.hover_option=='yes'){
                   var string=`<div class="row" white-space="nowrap">`
                   var list=["fas fa-compass","fas fa-table","fas fa-atom","fas fa-tasks","fas fa-th","fas fa-business-time","fas fa-chart-area","fas fa-chart-line","fas fa-chart-bar",'fas fa-chart-pie',"fas fa-sitemap","fas fa-highlighter","fas fa-th-large","fas fa-globe","fas fa-paperclip","fas fa-project-diagram","fas fa-print","fas fa-i-cursor","fas fa-indent","fas fa-list-alt","fas fa-list-ul","fas fa-outdent","far fa-building","fas fa-bullseye","fas fa-calendar","far fa-compass"]
                    for(i=0; i<list.length;i++){
                      string+= `<a href="#" ><i class="${list[i]} listoficons" style="font-size:1rem" ></i>&nbsp&nbsp</a>`
                    }
                    string+=`</div><br>`
                    $('.listoficon').append(string)
                     $('.listoficons').on("click",function(){

                       $('.listoficons').each(function(){
                         $(this).css("border","")
                       })
                       $(this).css("border","1px solid rgb(184, 134, 11)")


                     })

             }
                      }

                      if(data.xml!=undefined){
                        $('#savetag')[0].disabled=true
                        var xmlFlowchart=data.xml
                        $('#noteXMLFile').empty()
                        $('#noteXMLFile').append(
                        `<br><p style="margin-left:0.2rem;"><strong>Note:</strong>&nbsp;A flowchart with the selected process-sub process combination already exists.</p>
                          <button type="button" class="btn buttonfooter" id="importXML" style="width:75px;">Import</button>`
                      )
                        var ui = editorCopy;
                        var editor = ui.editor;
                        var graph = editor.graph;
                        var doc = mxUtils.parseXml(xmlFlowchart);
                        $('#importXML').click(function(){
                          editor.graph.setSelectionCells(editor.graph.importGraphModel(doc.documentElement));

                          $('#ProcessModal').modal("hide")
                        })
                      }
                      else{
                        $('#ProcessModal').modal("hide")
                      }
                      $('#graphContainerID').attr('data-subprocess_code',data.subprocess_code);

                    },
                    error: function () {
                      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                    }
            })
          }

          })
    </script>

<!-- Computation -->
<script>
  function computationButtonStyling(obj){
    $('#computationModal').modal('hide')
      var attrData = $(obj).attr('data-list')
      if (attrData == ''|| attrData =='{}'){

      }else {
        var parsedAttrdata = JSON.parse(attrData)
        $('#computationButtonModal').find('.modal-body').empty()
        $('#computationButtonModal').find('.modal-body').append(`
        <div class="card-header">
          <div class="float-right" style="margin-right: 6px;">
            <button onclick="computationpopulateContent(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>
        `)
        i = 0
        for (var key in parsedAttrdata){
          var content = computationEditButtonContent()
          $('#computationButtonModal').find('.modal-body').append(content)
          var singleCard = $('#computationButtonModal').find('.masterstyling').eq(i)
          $(singleCard).find('.selectButtonsOptions').val(key).trigger('change')
          for (var key2 in parsedAttrdata[key]){
            $(singleCard).find('[data-css]').each(function(){
              if ($(this).attr('data-css') == key2){
                $(this).val(parsedAttrdata[key][key2]).trigger('change')
              }
            })
          }
          $(singleCard).find('.iconappend').attr('data-list',parsedAttrdata[key]['data-icon'])
          i = i + 1
      }
      }
  $('#computationButtonModal').modal('show')
  $('#computationButtonModal').find('select').each(function(){
    $(this).select2()
  })
  }
  function computationpopulateContent(obj){
    var content = computationEditButtonContent()
        $('#computationButtonModal').find('.modal-body').append(content)
        $('#computationButtonModal').find('select').each(function(){
    $(this).select2()
  })
  }
  function computationSelectedButtonName(obj){
    $(obj).parent().parent().parent().parent().find('[data-css]').eq(0).val($(obj).find("option:selected").text()).trigger('change')
  }
  var computationEditButtonFunctionCall = 0
  function computationEditButtonContent(){
    computationEditButtonFunctionCall++;
          return(`
          <div class="card collapsed-card multipleJs masterstyling" id="computation_master_styling${computationEditButtonFunctionCall}" style="margin-left:-12px;margin-right: -12px;">
            <div class="card-header row">
              <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
                <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the Button:</p>
                <div class="col-4">
                <select class="select2 form-control selectButtonsOptions" onchange="computationSelectedButtonName(this)" style="margin-left: 5px;">
                  <option value="" disabled selected>Select Button</option>
                  <option value="computationrunmodel">Run Model</option>
                  <option value="computationuploadconfigurescenarios">Configure Scenarios</option>
                  </select>
                  </div>
                </div>
                  <div class="col-2">
                    <div class="card-tools float-right">
                      <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                      <button type="button" class="btn btn-tool" onclick="uploadRemoveEditButtonContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                  </div>
                </div>
            </div>
            <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
              <div class="row" style="padding-left: 15px;">
                <div class="col-4">
                  <p style="font-weight: bold;">Text of button:</p>
                  <input type="text"  data-css="text" class="textinput textInput form-control ">
                </div>
                <div class="col-4">
                    <p style="font-weight: bold;">Select text color:</p>
                    <input type="color" value="#ffffff" class="form-control" data-css="color">
                </div>
                <div class="col-4">
                    <p style="font-weight: bold;">Select background color:</p>
                    <div class="input-group">
                      <input type="color" value="#565a5e" class="form-control " data-css="background-color">
                      <select class="select2 form-control" data-css="opacity" >
                        <option value="1" selected >None</option>
                        <option value="0.9">0.9</option>
                        <option value="0.8">0.8</option>
                        <option value="0.7">0.7</option>
                        <option value="0.8">0.8</option>
                        <option value="0.7">0.7</option>
                        <option value="0.6">0.6</option>
                        <option value="0.5">0.5</option>
                        <option value="0.4">0.4</option>
                        <option value="0.3">0.3</option>
                        <option value="0.2">0.2</option>
                        <option value="0.1">0.1</option>
                        <option value="0">0</option>
                      </select>
                  </div>
                </div>
              </div>
              <div class="row" style="padding-left: 15px; padding-top:15px;">
                  <div class="col-4" >
                  <p style="font-weight: bold;">Select border type:</p>
                  <select class="select2 form-control" data-css="border-style" >
                      <option value="none">No border</option>
                      <option value="dotted" >Dotted</option>
                      <option value="dashed" >Dashed</option>
                      <option value="solid" >Solid</option>
                      <option value="double" >Double</option>
                      <option value="groove" >Groove</option>
                      <option value="ridge" >Ridge</option>
                      <option value="inset" >Inset</option>
                      <option value="outset" >Outset</option>
                      <option value="dotted dashed solid double" >Dotted dashed solid double</option>
                  </select>
                  </div>
                  <div class="col-4">
                  <p style="font-weight: bold;">Select border width:</p>
                  <div class="input-group">
                      <input type="float" class="form-control" data-css="border-width" >
                      <select class="select2 form-control" data-css="border-measure">
                        <option value="">None</option>
                        <option value="px">px</option>
                      </select>
                  </div>
                  </div>
                  <div class="col-4">
                    <p style="font-weight: bold;">Select border color:</p>
                    <input type="color" class="form-control" data-css="border-color" >
                  </div>
              </div>
              <div class="row" style="padding-left: 15px; padding-top:15px;">
                <div class="col-4" >
                  <p style="font-weight: bold;">Select icon to add:</p>
                  <button class="btn btn-primary iconappend" type="button" onclick="icon_button_selector(this)" data-list="">
                    Icon Selector
                  </button>
                </div>
                <div class="col-4">
                  <p style="font-weight: bold;">Select icon color:</p>
                  <input type="color" value="#ffffff" class="form-control" data-css="icon-color">
                </div>
                <div class="col-4" >
                  <p style="font-weight: bold;">Select button size:</p>
                  <select class="select2 form-control" data-css="font-size">
                    <option value="none">Normal</option>
                    <option value="10px">Xtra small</option>
                    <option value="12px">Small</option>
                    <option value="16px">Medium</option>
                    <option value="20px">Large</option>
                    <option value="24px">Xtra large</option>
                  </select>
                </div>

              </div>
              <div class="row" style="padding-left: 15px; padding-top:15px;">
                <div class="col-4">
                  <p style="font-weight: bold;">Select hover action:</p>
                  <select class="select2 form-control" onchange="computationhoverOptionsEditButton(this)" data-css="hoveractions">
                    <option value="none">No Effect</option>
                    <option value="Color">Color</option>
                    <option value="Gradient">Gradient</option>
                    <option value="textsize">Text-size</option>
                  </select>
                </div>
                <div class="col-4">
                  <p style="font-weight: bold;">Select shape:</p>
                  <select class="select2 form-control" data-css="shape">
                    <option value="">Select Shape</option>
                    <option value="square">Square</option>
                    <option value="circle">Circle</option>
                    <option value="oval">Oval</option>
                    <option value="rectangle">Rectangle</option>
                    <option value="parallelogram">Parallelogram</option>
                  </select>
                </div>
            </div>
            <div class="row hoverButton" style="padding-left: 15px; padding-top:15px; width: 100%; display: flex;">

            </div>
            </div>
          </div>
          </div>`)
  }
  function computationhoverOptionsEditButton(obj){
    var value = $(obj).val()
          if (value == 'Color'){
            $(obj).parent().parent().parent().find('.hoverButton').empty()
            $(obj).parent().parent().parent().find('.hoverButton').append(`
            <div class="col-4" >
              <p style="font-weight: bold;">Color of hover:</p>
              <input type="color" class="form-control stylingJsFieldColorInput" data-css="hover-color" value="#ffffff" required>
            </div>
            `)
          }else if (value == 'Gradient'){
            $(obj).parent().parent().parent().find('.hoverButton').empty()
            $(obj).parent().parent().parent().find('.hoverButton').append(`
            <div class="col-4" >
              <p style="font-weight: bold;">Select type of gradient:</p>
              <select class="select2 Gradeints form-control" data-css="type-gradient" required=""  >
                <option value="linear-gradient">Linear Gradients</option>
                <option value="radial-gradient">Radial Gradients</option>
                <option value="conic-gradient">Conic Gradients</option>
              </select>
            </div>
            <div class="col-4" >
              <p style="font-weight: bold;">Color 1:</p>
              <input type="color" class="form-control stylingJsFieldColorInput" data-css="gradient-color-1" required>
            </div>
            <div class="col-4" >
              <p style="font-weight: bold;">Color 2:</p>
              <input type="color" class="form-control stylingJsFieldColorInput" data-css="gradient-color-2" required>
            </div>
            `)
          }else if (value == 'textsize'){
            $(obj).parent().parent().parent().find('.hoverButton').empty()
            $(obj).parent().parent().parent().find('.hoverButton').append(`
            <div class="col-4" >
              <p style="font-weight: bold;">Select size:</p>
              <select class="select2 form-control" data-css="hover-text-size" required=""  >
                <option value="none">Normal</option>
                <option value="10px">Xtra small</option>
                <option value="12px">Small</option>
                <option value="16px">Medium</option>
                <option value="20px">Large</option>
                <option value="24px">Xtra large</option>
              </select>
            </div>
            `)
          }else if (value == 'none'){
            $(obj).parent().parent().parent().find('.hoverButton').empty()
          }
          $('#computationButtonModal').find('.hoverButton').find('select').each(function(){
    $(this).select2()
  })
          $('#actionButtonsConfigurationModal').find('.hoverButton').find('select').each(function(){
    $(this).select2()
  })
  }
  function icon_button_selector(obj){
    $('#moreicons_button_stylling').modal('show')
    var modalId = $(obj).closest('.modal').attr('id')
    var cardId = $(obj).closest('.masterstyling').attr('id')
    $('#moreicons_button_stylling').find('#saveIcon_button_stylling').attr('data-modal',modalId)
    $('#moreicons_button_stylling').find('#saveIcon_button_stylling').attr('data-card',cardId)
    var selectedIcon = $(obj).attr('data-list')
    if (selectedIcon != ''){
      $('#moreicons_button_stylling').find(".icon_a").each(function(){
        if ($(this).attr('data-class') == selectedIcon){
          $(this).attr("selected_a", "true");
          $(this).css("background-color", "var(--secondary-color)");
          $(this).css("color", "white");
        }else{
          $(this).attr("selected_a", "false");
          $(this).css("background-color", "#f9f9f9");
          $(this).css("color", "black");
        }
      })
    }else{
      $(".icon_a").attr("selected_a", "false");
      $(".icon_a").css("background-color", "#f9f9f9");
      $(".icon_a").css("color", "black");
    }

  }
  function saveIcon_button_stylling(obj){
    var modal = $(obj).attr('data-modal')
    var card = $(obj).attr('data-card')
    $('#moreicons_button_stylling').find(".icon_a").each(function(){
      if ($(this).attr('selected_a') =='true'){
        var selectedIcon = $(this).attr('data-class')
        $(`#${modal}`).find(`#${card}`).find('.iconappend').attr('data-list',selectedIcon)
      }
    })
  }
  function computationcloseEditButton(obj){
    $('#computationModal').modal('show')
    $('#computationButtonModal').modal('hide')
  }
  function extractconfigureActionColumn_mul(obj){
    var buttonValues = $('#configure_action_column_id_mul').attr('data-list')
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }
  function computationSaveEditButton(obj){
    var cards = $('#computationButtonModal').find('.masterstyling')
        var fullValues = {}
        var lengthOfCards = cards.length;
        for (let i = 0; i < lengthOfCards; i++) {
          var values = {}
          var singleCard = $('#computationButtonModal').find('.masterstyling').eq(i)
          var selectedButton = $(singleCard).find('.selectButtonsOptions').val()
          $(singleCard).find('[data-css]').each(function(){values[$(this).attr('data-css')] = $(this).val()})
          values['data-icon'] = $(singleCard).find('.iconappend').attr('data-list')
          values['rgba'] = hexToRGB(values['background-color'],values['opacity'])
          fullValues[selectedButton] = values
        }
        $('#computationButtonId').attr('data-list',JSON.stringify(fullValues))
        $('#computationButtonModal').modal('hide')
        $("#computationModal").modal('show')
  }
  function extractComputationButtons(obj){
    var buttonValues = $('#computationButtonId').attr('data-list')
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }
function extractconfigureActionColumn(obj){
  var buttonValues = $('#configure_action_column_id').attr('data-list')
  if (buttonValues == '' || buttonValues == '{}' ){
    return null
  }else {
    var parsedValues = JSON.parse(buttonValues)
    return parsedValues
  }
}
function extractconfigurePdfActionColumn(obj){
  var buttonValues = $('#configure_action_pdf_id').attr('data-list')
  if (buttonValues == '' || buttonValues == '{}' ){
    return null
  }else {
    var parsedValues = JSON.parse(buttonValues)
    return parsedValues
  }
}
function extractQuickFiltersColumn(obj){
  var buttonValues = $('#quickFiltersBtn').attr('data-list')
  if (buttonValues == '' || buttonValues == '{}' ){
    return null
  }else {
    var parsedValues = JSON.parse(buttonValues)
    return parsedValues
  }
}
function extractGroupByConfigs(obj){
  if ($('#selectTemplate').val() == 'Multi Dropdown View'){
    var buttonValues = $('#group_by_action_btn_sub_mul').attr('data-list')
  }else{
    var buttonValues = $('#group_by_action_btn_sub').attr('data-list')
  }

  if (buttonValues == '' || buttonValues == '{}' ){
    return null
  }else {
    var parsedValues = JSON.parse(buttonValues)
    return parsedValues
  }
}
  function extractButtonsGrouping(obj){
    var buttonValues = $('#buttonsGroupedTogether').attr('data-list')
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }
  function extractActionButtons(obj){
    var buttonValues = $('#configure_actionbuttonid').attr('data-list')
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }
  function extractActionButtonsMultiple(obj){
    var buttonValues = $('#configure_actionbuttonid_multiple').attr('data-list')
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }
  function extractButtonsGrouping_mul(obj){
    var buttonValues = $('#buttonsGroupedTogether_mul').attr('data-list')
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }
  function extractQuickFiltersColumn_mul(obj){
    var buttonValues = $('#quickFiltersBtn_mul').attr('data-list')
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }
  function extractActionButtons_mul(obj){
    var buttonValues = $('#configure_actionbuttonid_mul').attr('data-list')
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }
  function extractTitleName(obj){
    var buttonValues = $('#titleNameBtn').attr('data-list')
    if ($('#selectTemplate').val() == "Multiple table"){
      return null
    }else{
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }
}
  function extractTitleName_mul(obj){
    var buttonValues = $('#titleNameBtn_mul').attr('data-list')
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }
  function extractTitleNameMultiple(obj){
    var buttonValues = $('#titleNameBtn').attr('data-list')
  if ($('#selectTemplate').val() == "Multiple table"){
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }else{
    return null
  }
}
function computationConfigureGlobalVariables(){
  if($('#selectComputationModel').val() === null){
    return
  }
  $.ajax({
      url: window.location.pathname,
      data: {
        'operation': 'get_global_variable_dropdowns_with_table_names',
        'modelName': $('#selectComputationModel').val(),
      },
      type: "POST",
      dataType: "json",
      success: function(data){
        $('#computationModal').modal('hide')
        $("#configureGlobalVariableModal").modal('show')

        let global_configs_dict = $("#computationConfigureGlobalVariableId").attr('data-list')

        $("#select_global_variable_dropdown").empty()
          let dropdown_table_dict = data['response']
          let g_vars = Object.keys(dropdown_table_dict)
          g_vars.forEach((g_var)=>{
            $("#select_global_variable_dropdown").append(`<li class="dropdown-item"><a href="javascript:void(0)" parent_table="` + dropdown_table_dict[g_var] + `" class="global_variable_option">` + g_var + `</a></li`)
          })
          $(".global_variable_option").click(function(){
            let parent_table = $(this).attr('parent_table')
            let gvar_name = $(this).text().trim()

            let rows = document.querySelectorAll("#global_variable_configs .row")
                var hasButton = false;
                rows.forEach(function(row) {
                    var anchorTag = row.querySelector('a');
                    if (anchorTag && anchorTag.textContent.trim() === gvar_name) {
                      hasButton = true;
                        }
                })
            if(!hasButton){
              $("#global_variable_configs").append(
                `<div class="row" style="margin-bottom: 8px;align-items: center;">
                  <a href="javascript:void(0)" name="${gvar_name}" class="col-5 ml-auto fa fa-times remove_gvar" style="color: var(--primary-color,var(--primary,darkgoldenrod))">
                    <b style="font-family:Arial;font-size: 15px;font-weight:200;"> &nbsp;`+ gvar_name +`</b>
                  </a>
                  <button onclick="setDropdownFilters.call(this)" data-list="" class="btn btn-primary col-6" parent_table=${parent_table}><a class="fa fa-filter"></a> Filter</button>
                </div>`)
              }
          })
          if(global_configs_dict !== undefined && global_configs_dict != "" && global_configs_dict != '{}'){
            $("#global_variable_configs").empty()
            populateGlobalConfigs(JSON.parse(global_configs_dict))
          }
      }
    })
  }
  $(document).on('click', '.remove_gvar', function() {
      $(this).closest(".row").remove();
  });

  function populateGlobalConfigs(global_configs_dict){
    for(let g_var in global_configs_dict){
      if(global_configs_dict.hasOwnProperty(g_var)){
        $("#select_global_variable_dropdown").find('a:contains('+ g_var+')').click()
        $("#global_variable_configs").find('div').eq(-1).find('button').attr('data-list',JSON.stringify(global_configs_dict[g_var]))
      }
    }
  }

  function setDropdownFilters(){
    $("#gVar_filter_modal").modal('show')
    let idx = $(this).parent().index()
    let gFilter_Data_List = []
    if($(this).attr('data-list')){
      gFilter_Data_List = JSON.parse($(this).attr('data-list'))
    }

    $('#gVar_filter_btn_saveVariable').attr('data-index', idx);
    $('#gVar_filter_table').empty();
    $.ajax({
        url: `/users/${urlPath}/computationModule/`,
        data: {
            'table_name': $(this).attr('parent_table'),
            'operation': 'gVarFilter_fetch_columns',
        },
        type: 'POST',
        dataType: 'json',
        success: function (data) {
          $('#gVar_condition_dropdown').empty();
          var gVar_label_column = data.label_columns;
          var form_fields = data.form_fields;
          for (const [key, value] of Object.entries(gVar_label_column)) {
              $('#gVar_condition_dropdown').append('<li class="dropdown-item"><a href="javascript:void(0)" name=' + key + ' class="gFilter_Col_btn">' + value + '</a></li>');
          }
          $('.gFilter_Col_btn').click(function () {
              var name = $(this).attr('name');
              var text = $(this).text();
              var STRING = data.form_fields[name];
              appendFilterRow(STRING);
              $("#gVar_filter_modal .modal-body select").select2()
          });
          if(gFilter_Data_List){
            populateSavedData(gFilter_Data_List)
            $("#gVar_filter_modal .modal-body select").select2()
          }
        },
        error: function() {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
  })
  }

  function appendFilterRow(STRING) {
    $('#gVar_filter_table').append(STRING);
    $('#gVar_filter_table').find('tr').eq(-1).find('td').eq(1).off('select2:select').on('select2:select', function () {
        $('#gVar_filter_table').find('tr').eq(-1).find('td').eq(2).find('div').eq(0).find('select').eq(0).empty();
    });
    $('#gVar_filter_table').find('tr').eq(-1).find('td').eq(3).remove();
    let gVar_colDType = $('#gVar_filter_table').find('tr').eq(-1).find('input').attr('type');

    $('#gVar_filter_table').find('tr').eq(-1).append(`
        <td class="dt-center">
            <div class="" style="max-width:25em;">
                <input type="text" name=${name} class="form-control" placeholder='Constraint name' data-type="${gVar_colDType}" data-use="constraint"/>
            </div>
        </td>
        <td class="dt-center">
            <div class="" style="max-width:25em;">
                <input type="text" name=${name} class="form-control" placeholder='Rule set' data-type="${gVar_colDType}" data-use="ruleSet"/>
            </div>
        </td>
    `);
    $('.remove_filter').on('click', removefilter);
  }

  function removefilter() {
            $(this).closest("tr").remove();
  }

  function populateSavedData(gFilter_Data_List) {
    for (let i = 0; i < gFilter_Data_List.length; i++) {
        let columnName = gFilter_Data_List[i]['column_name'];
        let condition = gFilter_Data_List[i]['condition'];
        let inp_Val = gFilter_Data_List[i]['input_value'];
        let constraint = gFilter_Data_List[i]['constraintName'];
        let rule = gFilter_Data_List[i]['ruleSet'];

        $('.gFilter_Col_btn[name="' + columnName + '"]').trigger('click');

        let lastRow = $('#gVar_filter_table tr:last');

        let gVar_Attr_Type = lastRow.find('input').attr('type');

        lastRow.find('select[data-dropdown_purpose="select_filter_condition"]').val(condition).trigger("change");

        lastRow.find(`input[type=${gVar_Attr_Type}]`).val(inp_Val).trigger("change");

        lastRow.find('input[data-use="constraint"]').val(constraint).trigger('change');
        lastRow.find('input[data-use="ruleSet"]').val(rule).trigger('change');
    }
  }

  $('#gVar_filter_btn_saveVariable').click(function(){
    let idx = $(this).attr('data-index')
    let gVar_filter_list = [];
    let gVar_filter_userdata_table = $('#gVar_filter_table');
    gVar_filter_userdata_table.find('tr').each(function(i){
      var dict = new Object();
      dict['column_name'] = $(this).find('select').attr("name")
      dict['condition'] = $(this).find('select').eq(0).val()
      if (dict['condition'] == "IN" || dict['condition'] == "NOT IN") {
          dict['input_value'] = $(this).find('select').eq(1).val()
          var tuple = "("
          for(let i = 0; i < dict['input_value'].length; i++) {
              tuple = tuple + "'" + dict['input_value'][i] + "'"
              if ((dict['input_value'].length - 1) != i) {
                  tuple = tuple + ",";
              }
          }
          tuple = tuple + ")"
          dict['input_value'] = tuple
      } else {
          if ($(this).find('select')[0] != undefined){
              if($(this).find('select').eq(-2).hasClass('foreignKeyClass')){
                  dict['input_value'] = $(this).find('.foreignKeyClass').val()
              } else{
                  dict['input_value'] = $(this).find('input').val()
              }
          } else{
              dict['input_value'] = $(this).find('input').val()
          }
      }
      dict['constraintName'] = $(this).find('input').eq(-2).val()
      if(dict['constraintName'] == null){
          dict['constraintName'] = ""
      }
      dict['ruleSet'] = $(this).find('input').eq(-1).val()
      if(dict['ruleSet'] == null){
          dict['ruleSet'] = ""
      }
      dict['and_or'] = "AND"
      gVar_filter_list.push(dict)
    });
    $('#global_variable_configs').find('div').eq(idx).find('button').attr('data-list',JSON.stringify(gVar_filter_list))
  });

  function saveGlobalVariableConfigs(){
    let global_vars_config_dict = {}
    $("#global_variable_configs > div").each(function (){
      let var_name = $(this).find('a').attr('name')
      let filter_conditions = {}
      if($(this).find('button').attr('data-list')){
        filter_conditions = JSON.parse($(this).find('button').attr('data-list'))
      }
      global_vars_config_dict[var_name] = filter_conditions
    })
    $("#computationConfigureGlobalVariableId").attr('data-list',JSON.stringify(global_vars_config_dict))
    $("#configureGlobalVariableModal").modal('hide')
    $('#computationModal').modal('show')
  }

  function closeGlobalVariableConfigs(){
    $("#configureGlobalVariableModal").modal('hide')
    $('#computationModal').modal('show')
  }

  function extractGlobalVariableConfigs(){
    let content = $("#computationConfigureGlobalVariableId").attr('data-list')
    if(content == "" || content == "{}"){
      return null
    }else{
      return JSON.parse(content)
    }
  }

  $('#saveComputationModel').on('click',function(){
    let currentDevMode = "{{current_dev_mode}}"
    if($('#selectComputationTemplate').val() == "Custom defined template") {
      $('#saveComputationModel').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',false);
    } else {
      $('#saveComputationModel').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',true);
    }
    if(currentDevMode === "Edit" || currentDevMode === "Build"){
        $.ajax({
                url: window.location.pathname,
                data: {
                'operation': "fetchDependencies",
                'item_group_code':$('#graphContainerID').attr('data-process_code'),
                },
                type: "POST",
                dataType: "json",
                success: function (data) {
                if (data.appDependency.length > 0) {
                  $('#dependencyTable').empty()

                for(var i=0;i<data.appDependency.length;i++){

                     $('#dependencyTable').append(`<tr><td style="font-weight:bold">${i+1}.</td><td style="font-weight:bold;text-align:start">&nbsp;&nbsp;${data.appDependency[i]}</td></tr>`)
                }
                  $('#dependencyChecker').modal('show')
                  $('#btn_dependencySave').off('click').on('click',function(){
                      saveComputation();
                    })
                } else {
                      saveComputation();
                }
                },
                error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                }
                });
    }else{
      saveComputation();
    }
  })

	function saveComputation(){
    var cellSelected=editorCopy.editor.graph.getModel().getCell($('#computationModal').find('.modal-footer').attr('data-shapeid'));
    cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
    if (cellShapeUniqueID<0){
      var itemID=("parallelogram"+Math.random()).replace('.',"")
      cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
    }
    else{
      var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
    }
    var buttonConfig = {'scenario_config_btn':$('#configure_scenario_btn').prop('checked')}
    var computationAttr = {"model": $('#selectComputationModel').val(),"template":$('#selectComputationTemplate').val(),"computationButtonStyling":extractComputationButtons(),"previous_run":$("#selectComputationPrevRun").val(),'button_config':buttonConfig,"global_variable_configs":extractGlobalVariableConfigs(), 'sub_process_name': subprocess_name};
    $("#graphContainerID").attr("data-tab_name",$('#selectComputationModel').val());
	$.ajax({
      url: window.location.pathname,
      data: {
        'operation': 'saveComputationConfig',
        "processName":process_name,
        "subProcessName":subprocess_name,
        'tabBodyContent': JSON.stringify(computationAttr),
        "elementID":itemID,
        "shape":"parallelogram",
        "tab_header_name": $("#tabHeaderComp").val(),
      },
      type: "POST",
      dataType: "json",
      success: fieldtableReload,
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })
  function fieldtableReload(data) {
    Swal.fire({icon: 'success',text: 'Computation model saved successfully!'});
    if($('#selectComputationTemplate').val() != "Custom defined template") {
      $('#selectComputationModel').val("").trigger('change');
      $('#tabHeaderComp').val("").trigger('change');
      $('#computationModal').modal('hide');
    }
  }
}
</script>


<!-- </script> -->
<!-- Analysis -->
<script>

$('#saveAnalysisConfig').click(function(){
  let currentDevMode = "{{current_dev_mode}}"
  let tab_header_name = $(this).parent().prev().find('.tabHeader').val()
  let tab_element = $(this).parent().prev().find('.tabHeaderEmptyValidation')
  $("#graphContainerID").attr("data-tab_name",tab_header_name);
  if(currentDevMode === "Edit" || currentDevMode === "Build"){
      $.ajax({
url: window.location.pathname,
data: {
'operation': "fetchDependencies",
'item_group_code':$('#graphContainerID').attr('data-process_code'),
},
type: "POST",
dataType: "json",
success: function (data) {

if (data.appDependency.length > 0) {
  $('#dependencyTable').empty()

    for(var i=0;i<data.appDependency.length;i++){

         $('#dependencyTable').append(`<tr><td style="font-weight:bold">${i+1}.</td><td style="font-weight:bold;text-align:start">&nbsp;&nbsp;${data.appDependency[i]}</td></tr>`)
    }
      $('#dependencyChecker').modal('show')
      $('#btn_dependencySave').off('click').on('click',function(){
      tab_element.css('display','none')
      tab_element.prev().css('display','none')

      if(tab_header_name=="" || tab_header_name == null){
        tab_element.css('display','block')
      }
      else{
        var analysisConfigDict={};
        if($('#plotChart')[0].checked==true){
          analysisConfigDict["PlotCharts"]="Yes"
        }
        else{
          analysisConfigDict["PlotCharts"]="No"
        }
        if($('#tabConfigs')[0].checked==true){
          analysisConfigDict["tabConfigs"]="Yes"
        }
        else{
          analysisConfigDict["tabConfigs"]="No"
        }
        if($('#addTabs')[0].checked==true){
          analysisConfigDict["AddTabs"]="Yes"
        }
        else{
          analysisConfigDict["AddTabs"]="No"
        }
        if($('#pdf')[0].checked==true){
          analysisConfigDict["PDF"]="Yes"
        }
        else{
          analysisConfigDict["PDF"]="No"
        }
        if($('#share_with_group')[0].checked==true){
          analysisConfigDict["share_with_group"]="Yes"
        }
        else{
          analysisConfigDict["share_with_group"]="No"
        }
        if($('#global_settings')[0].checked==true){
          analysisConfigDict["global_settings"]="Yes"
        }
        else{
          analysisConfigDict["global_settings"]="No"
        }
        if($('#saveTabsButton')[0].checked==true){
          analysisConfigDict["SaveButton"]="Yes"
        }
        else{
          analysisConfigDict["SaveButton"]="No"
        }

        analysisConfigDict["dashboardIndex"] = $("#dashboardIndex").val();
        analysisConfigDict["dashboardIndexTemplate"] = $("#dashboardIndexTemplate").val();
        analysisConfigDict["publishDashboardIndex"] = $("#publishDashboardIndex").val();
        analysisConfigDict["Template"] = $('#selectAnalysisTemplate').val();
        var tabNumber=parseInt($('#tabNumber').val())
        var tabIDList=[]
        for(i=1;i<tabNumber+1;i++){
          var tabDict={
            "TabID":i,
          }
          tabIDList.push(tabDict)
        }

        analysisConfigDict["TabList"]=tabIDList
        analysisConfigDict["Analysis_Package"]=$('#selectAnalysisPackage').val()
        analysisConfigDict["Layout"] = $("#selectAnalysisLayout").val();
        analysisConfigDict["analysisButtonStyling"] = extractAnalysisButtons();

        var custom_messages_in_analysis = {}
        if($("#toggleCustomMessagesAnalysis").is(":checked")){

          $("#customMessagesDivAnalysis").find(".c_msg_input").each(function() {
            custom_messages_in_analysis[$(this).attr("name")] ={ "message": $(this).val(), "icon": $(this).closest(".nav-item").find(".msg_icon").attr('class')}
          })
        }
        analysisConfigDict["custom_messages_anlaysis"] = custom_messages_in_analysis;
        var cellSelected=editorCopy.editor.graph.getModel().getCell($('#chartModal').find('.modal-footer').attr('data-shapeid'));
        cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
        if (cellShapeUniqueID<0){
          var itemID=("ellipse"+Math.random()).replace('.',"")
          cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
        }
        else{
          var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
        }
        var indexSeparator=cellSelected.style.indexOf(';');
        var elementShape=cellSelected.style.substr(0,indexSeparator);
        var ctoken = $('form').find("input[name='csrfmiddlewaretoken']").attr('value')
        var iconselectors;
            $('.listoficons').each(function(){
              if($(this).css("border").includes("rgb(184, 134, 11)")){
                  var number1=$(this).attr("class").indexOf('listoficons')-1
                  iconselectors= $(this).attr("class").substr(0,number1)

                }
              })

        $.ajaxSetup({
          beforeSend: function (xhr, settings) {
            xhr.setRequestHeader("X-CSRFToken", ctoken);
          }
        });
        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'saveAnalysisElementConfig',
            'processName':process_name,
            'subProcessName':subprocess_name,
            'icon_tab':iconselectors,
            'tab_header_name':$('#tabHeaderAnalysis').val(),
            'tabBodyContent':JSON.stringify(analysisConfigDict),
            'elementID':itemID,
            'shape':elementShape,
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            Swal.fire({icon: 'success',text: 'Analysis configuration saved successfully!'});
            if($('#selectAnalysisTemplate').val() == "Custom defined template") {
              $('#saveAnalysisConfig').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',false);
            } else {
              $('#saveAnalysisConfig').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',true);
              $('#chartModal').modal('hide')
              analysisReset();
            }
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Failure in saving the Analysis configuration. Please try again.'});
          }
        })
      }

})
  } else {
    tab_element.css('display','none')
          tab_element.prev().css('display','none')

          if(tab_header_name=="" || tab_header_name == null){
            tab_element.css('display','block')
          }
          else{
            var analysisConfigDict={};
            if($('#plotChart')[0].checked==true){
              analysisConfigDict["PlotCharts"]="Yes"
            }
            else{
              analysisConfigDict["PlotCharts"]="No"
            }
            if($('#tabConfigs')[0].checked==true){
              analysisConfigDict["tabConfigs"]="Yes"
            }
            else{
              analysisConfigDict["tabConfigs"]="No"
            }
            if($('#addTabs')[0].checked==true){
              analysisConfigDict["AddTabs"]="Yes"
            }
            else{
              analysisConfigDict["AddTabs"]="No"
            }
            if($('#pdf')[0].checked==true){
              analysisConfigDict["PDF"]="Yes"
            }
            else{
              analysisConfigDict["PDF"]="No"
            }
            if($('#share_with_group')[0].checked==true){
              analysisConfigDict["share_with_group"]="Yes"
            }
            else{
              analysisConfigDict["share_with_group"]="No"
            }
            if($('#global_settings')[0].checked==true){
              analysisConfigDict["global_settings"]="Yes"
            }
            else{
              analysisConfigDict["global_settings"]="No"
            }
            if($('#saveTabsButton')[0].checked==true){
              analysisConfigDict["SaveButton"]="Yes"
            }
            else{
              analysisConfigDict["SaveButton"]="No"
            }

            var tabNumber=parseInt($('#tabNumber').val())
            var tabIDList=[]
            for(i=1;i<tabNumber+1;i++){
              var tabDict={
                "TabID":i,
              }
              tabIDList.push(tabDict)
            }

            analysisConfigDict["TabList"]=tabIDList
            analysisConfigDict["Analysis_Package"]=$('#selectAnalysisPackage').val()
            analysisConfigDict["Layout"] = $("#selectAnalysisLayout").val();




            var cellSelected=editorCopy.editor.graph.getModel().getCell($('#chartModal').find('.modal-footer').attr('data-shapeid'));
            cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
            if (cellShapeUniqueID<0){
              var itemID=("ellipse"+Math.random()).replace('.',"")
              cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
            }
            else{
              var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
            }


            var indexSeparator=cellSelected.style.indexOf(';');
            var elementShape=cellSelected.style.substr(0,indexSeparator);
            var ctoken = $('form').find("input[name='csrfmiddlewaretoken']").attr('value')
            var iconselectors;
                $('.listoficons').each(function(){
                  if($(this).css("border").includes("rgb(184, 134, 11)")){
                      var number1=$(this).attr("class").indexOf('listoficons')-1
                      iconselectors= $(this).attr("class").substr(0,number1)

                    }
                  })
            $.ajaxSetup({
              beforeSend: function (xhr, settings) {
                xhr.setRequestHeader("X-CSRFToken", ctoken);
              }
            });
            $.ajax({
              url: window.location.pathname,

              data: {
                'operation': 'saveAnalysisElementConfig',
                'processName':process_name,
                'subProcessName':subprocess_name,
                'icon_tab':iconselectors,
                'tab_header_name':$('#tabHeaderAnalysis').val(),
                'tabBodyContent':JSON.stringify(analysisConfigDict),
                'elementID':itemID,
                'shape':elementShape
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                Swal.fire({icon: 'success',text: 'Analysis configuration saved successfully!'});
                $('#chartModal').modal('hide')
                $('#plotChart')[0].checked=false
                $('#tabConfigs')[0].checked=false
                $('#SelectAll')[0].checked=false
                $('#addTabs')[0].checked=false
                $('#pdf')[0].checked=false
                $('#saveTabsButton')[0].checked=false
                $('#tabNumber')[0].value=""
                $('#selectAnalysisPackage').val("").trigger('change')
                $('#tabHeaderAnalysis').val("").trigger('change')
              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Failure in saving the Analysis configuration. Please try again.'});
              }
            })
          }
  }
  },
  error: function () {
  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
  }
  });

}else{
 tab_element.css('display','none')
     tab_element.prev().css('display','none')

      if(tab_header_name=="" || tab_header_name == null){
       tab_element.css('display','block')
      }
      else{
        var analysisConfigDict={};
        if($('#plotChart')[0].checked==true){
          analysisConfigDict["PlotCharts"]="Yes"
        }
        else{
          analysisConfigDict["PlotCharts"]="No"
        }
        if($('#tabConfigs')[0].checked==true){
          analysisConfigDict["tabConfigs"]="Yes"
        }
        else{
          analysisConfigDict["tabConfigs"]="No"
        }
        if($('#addTabs')[0].checked==true){
          analysisConfigDict["AddTabs"]="Yes"
        }
        else{
          analysisConfigDict["AddTabs"]="No"
        }
        if($('#pdf')[0].checked==true){
          analysisConfigDict["PDF"]="Yes"
        }
        else{
          analysisConfigDict["PDF"]="No"
        }
        if($('#share_with_group')[0].checked==true){
          analysisConfigDict["share_with_group"]="Yes"
        }
        else{
          analysisConfigDict["share_with_group"]="No"
        }
        if($('#global_settings')[0].checked==true){
          analysisConfigDict["global_settings"]="Yes"
        }
        else{
          analysisConfigDict["global_settings"]="No"
        }
        if($('#saveTabsButton')[0].checked==true){
          analysisConfigDict["SaveButton"]="Yes"
        }
        else{
          analysisConfigDict["SaveButton"]="No"
        }

        var tabNumber=parseInt($('#tabNumber').val())
        var tabIDList=[]
        for(i=1;i<tabNumber+1;i++){
          var tabDict={
            "TabID":i,
          }
          tabIDList.push(tabDict)
        }

        analysisConfigDict["TabList"]=tabIDList
        analysisConfigDict["Analysis_Package"]=$('#selectAnalysisPackage').val()
        analysisConfigDict["Layout"] = $("#selectAnalysisLayout").val();
        var cellSelected=editorCopy.editor.graph.getModel().getCell($('#chartModal').find('.modal-footer').attr('data-shapeid'));
        cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
        if (cellShapeUniqueID<0){
          var itemID=("ellipse"+Math.random()).replace('.',"")
          cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
        }
        else{
          var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
        }
        var indexSeparator=cellSelected.style.indexOf(';');
        var elementShape=cellSelected.style.substr(0,indexSeparator);
        var ctoken = $('form').find("input[name='csrfmiddlewaretoken']").attr('value')
        var iconselectors;
            $('.listoficons').each(function(){
              if($(this).css("border").includes("rgb(184, 134, 11)")){
                  var number1=$(this).attr("class").indexOf('listoficons')-1
                  iconselectors= $(this).attr("class").substr(0,number1)

                }
              })
        $.ajaxSetup({
          beforeSend: function (xhr, settings) {
            xhr.setRequestHeader("X-CSRFToken", ctoken);
          }
        });
        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'saveAnalysisElementConfig',
            'processName':process_name,
            'subProcessName':subprocess_name,
            'icon_tab':iconselectors,
            'tab_header_name':$('#tabHeaderAnalysis').val(),
            'tabBodyContent':JSON.stringify(analysisConfigDict),
            'elementID':itemID,
            'shape':elementShape
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            Swal.fire({icon: 'success',text: 'Analysis configuration saved successfully!'});
            $('#chartModal').modal('hide')
            $('#plotChart')[0].checked=false
            $('#tabConfigs')[0].checked=false
            $('#SelectAll')[0].checked=false
            $('#addTabs')[0].checked=false
            $('#pdf')[0].checked=false
            $('#saveTabsButton')[0].checked=false
            $('#tabNumber')[0].value=""
            $('#selectAnalysisPackage').val("").trigger('change')
            $('#tabHeaderAnalysis').val("").trigger('change')
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Failure in saving the Analysis configuration. Please try again.'});
          }
        })
      }
}
})
</script>



<!-- Create View -->
<script>
  var fields = [];
  var fields1 = [];
  var verboseName = []
  var verboseNameAlign = {}
  var verboseNamecara = {}
  var verboseNameEdit = {}
  var fieldSelectOrNot = 0;
  var fieldsProperty1 = {};
  var selectedColumn=[];
  var compareFields = {};
  var columnSelection = [];
  var periodSelection = {};
  var tablesColumn = [];
  var allFieldsColumns = [];
  var allFieldsColumnsNull = [];
  var dropDown = []
  var allFieldsColumnsType = [];
  var allFieldsColumnChar = [];
  var allFieldsColumnCharVerbose = []
  var masterTableColumns = [];
  var fieldNameCheck = [];
  var tableArray = []
  var len = 0;
  var createViewName = [];
  var formLevelFieldList = []
  var add = [];
  var columnMappedToTable = {}
  var col_val = 3
  var selectedFieldL3 = [];
  var tableNamesChild = {{tableList | safe}}
  function findTableRelation() {
    let url_string = window.location.pathname
    let f_occ = url_string.indexOf('/', url_string.indexOf('/') + 1)
    let s_occ = url_string.indexOf('/', url_string.indexOf('/') + f_occ +1)
    let t_occ = url_string.indexOf('/', url_string.indexOf('/') + s_occ +1)
    let app_code2 = url_string.substring(f_occ+1,s_occ)
    let current_dev_mode2 = url_string.substring(s_occ+1,t_occ)
    let modes = ["Build","Edit"]
    let url = ""
    if(current_dev_mode2 != "Build" && current_dev_mode2 != "Edit"){
      current_dev_mode2 = "User"
    }
    $.ajax({
      async: true,
      url: `/users/${app_code2}/${current_dev_mode2}/DataManagement/`,
      data: {'tables': JSON.stringify($('#selectFormTable').val()), 'operation': 'table_relation'},
      type: "POST",
      dataType: "json",
      success: function(data) {
        var t = 0;

        var check = 0
        fieldNameCheck = {}
        fieldNameCheck['data'] = []
        if (data['data'] != "Direct relationship exist") {
          for(let [key,value] of Object.entries(columnMappedToTable)) {
            for(let i = 0; i < value.length; i++) {
              for(let [key1,value1] of Object.entries(columnMappedToTable)) {
                if (key1 != key) {
                  for(let j = 0; j < value1.length; j++) {
                    if((value1[j]['actual'] == value[i]['actual'])) {
                      if((value1[j]['type'] == "ForeignKey" && value[i]['type'] == "ForeignKey")) {
                        check = 1
                        fieldNameCheck['data'].push(value1[j]['actual'])
                        break
                      }
                    }
                  }
                }
              }
            }
          }
          fieldNameCheck['type'] = 'select'
          if (check == 0) {
            $('.tableRelationDetail').empty()
            $('.tableRelationDetail').append(`<span style="color:red">${data.data}</span>`)
            $(".tableRelation").css('display','flex');
            $(".tableRelationBtn").css('display','flex');
          } else {
            $('.tableRelationDetail').empty()
            $('.tableRelationDetail').append(`<span style="color:red">Indirect relationship exist</span>`)
            $(".tableRelation").css('display','flex');
            $(".tableRelationBtn").css('display','none');
          }
        } else {
          $('.tableRelationDetail').empty()
          $('.tableRelationDetail').append(`<span style="color:red">${data.data}</span>`)
          $(".tableRelation").css('display','flex');
          $(".tableRelationBtn").css('display','none');
          fieldNameCheck = {'data':data.field,'type':'input'}
        }

        for(j1 in fieldNameCheck.data) {
          var t = 0
          if(fieldNameCheck.type == 'input'){
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').each(function() {
              $(this).find(`select[name=${fieldNameCheck.data[j1]}]`).closest('.form-group').parent().remove();
            })
          } else {
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').each(function() {
              var t = 0
              $(this).find(`select[name=${fieldNameCheck.data[j1]}]`).each(function() {
                t++;
                if(t > 1) {
                  $(this).closest('.form-group').parent().remove();
                }
              })
            })
          }
        }
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })
  }
  function clearTableRelationModal() {
    $("#tableRelationModal").find(".tableRelationTable1Select").empty();
    $("#tableRelationModal").find(".tableRelationTable2Select").empty();
    $("#tableRelationModal").find(".tableRelationColumn1Select").empty();
    $("#tableRelationModal").find(".tableRelationColumn2Select").empty();
    $("#tableRelationModal").find(".tableRelationParentTable1Select").empty();
    $("#tableRelationModal").find('.tableRelationChildTable2Select').val('').trigger('change');
    $("#tableRelationModal").find('.tableRelationChildColumn2Select').val('').trigger('change');
    $("#tableRelationModal").find('.tableRelationParentColumn1Select').val('').trigger('change');
  }
  var tableRelationCancelBtn = function() {
    $(this).closest('.tableRelation').css('display','none');
    $(this).closest('.tableRelation').find('.tableRelationDetail').empty();
  }
  var tableRelationDefineBtn = function() {
    let url_string = window.location.pathname
    let f_occ = url_string.indexOf('/', url_string.indexOf('/') + 1)
    let s_occ = url_string.indexOf('/', url_string.indexOf('/') + f_occ +1)
    let t_occ = url_string.indexOf('/', url_string.indexOf('/') + s_occ +1)
    let app_code2 = url_string.substring(f_occ+1,s_occ)
    let current_dev_mode2 = url_string.substring(s_occ+1,t_occ)
    let modes = ["Build","Edit"]
    let url = ""
    if(current_dev_mode2 != "Build" && current_dev_mode2 != "Edit"){
      current_dev_mode2 = "User"
    }
    if ($(this).closest('.card-body').find('.tableRelationParentTable1Select').val() != $(this).closest('.card-body').find('.tableRelationChildTable2Select').val())
    {
    var fieldList_ = []
    var fieldDict = {}
    fieldDict['parent_table'] = $(this).closest('.card-body').find('.tableRelationParentTable1Select').val()
    fieldDict['parent_element'] = $(this).closest('.card-body').find('.tableRelationParentColumn1Select').val()
    fieldDict['fieldDatatype'] = "ForeignKey"
    fieldDict['child_table'] = $(this).closest('.card-body').find('.tableRelationChildTable2Select').val()
    fieldDict['child_element'] = $(this).closest('.card-body').find('.tableRelationChildColumn2Select').val()
    fieldDict['fieldNull'] = $(this).closest('.card-body').find('.tableRelationNullChoiceSelect').val()

    fieldList_.push(fieldDict)
    $.ajax({
      url: `/users/${app_code2}/${current_dev_mode2}/DataManagement/`,
      data: {'fieldDict': JSON.stringify(fieldList_), 'table':JSON.stringify($('#selectFormTable').val()), 'operation': 'createrelation1_grapheditor'},
      type: "POST",
      dataType: "json",
      success: datatableReload,
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })

    function datatableReload(data) {
      columnMappedToTable = {}
      for(let t = 0; t < ($('#selectFormTable').val()).length; t++) {
        columnMappedToTable[($('#selectFormTable').val())[t]] = []
      }
      allFieldsColumnsType = []
      allFieldsColumnsNull = []
      for (j in data.finalFieldList) {
        if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from') {
          columnMappedToTable[data.finalFieldList[j]['table']].push({"actual":data.finalFieldList[j]['fieldName'],"verbose":data.finalFieldList[j]['verbose'],"type":data.finalFieldList[j]['fieldType']})
          allFieldsColumnsType[j] = data.finalFieldList[j]['fieldType']
          allFieldsColumnsNull[j] = data.finalFieldList[j]['null'];
        }
      }
      populatePreview()
      findTableRelation();
      $('#formModal').css('display','block');
      $('#tableRelationModal').modal('hide');
      setTimeout(() => {
      },1000)
    }
  } else {
    $('#formModal').css('display','block');
    $('#tableRelationModal').modal('hide');
    Swal.fire({icon: 'warning',text: "Parent table and Child table cannot be the same."});
  }
  }
  var displayDataDiscovery = function() {
    let url_string = window.location.pathname
    let f_occ = url_string.indexOf('/', url_string.indexOf('/') + 1)
    let s_occ = url_string.indexOf('/', url_string.indexOf('/') + f_occ +1)
    let t_occ = url_string.indexOf('/', url_string.indexOf('/') + s_occ +1)
    let app_code2 = url_string.substring(f_occ+1,s_occ)
    let current_dev_mode2 = url_string.substring(s_occ+1,t_occ)
    let modes = ["Build","Edit"]
    let url = ""
    if(current_dev_mode2 != "Build" && current_dev_mode2 != "Edit"){
      current_dev_mode2 = "User"
    }
    var table1 = $(this).closest('.card-body').find('.tableRelationTable1Select').val()
    var col1 = $(this).closest('.card-body').find('.tableRelationColumn1Select').val()
    var col2 = $(this).closest('.card-body').find('.tableRelationColumn2Select').val()
    $.ajax({
      url: `/users/${app_code2}/${current_dev_mode2}/DataManagement/`,
      data: { 'model_name': table1,'field_name': col1, 'operation': 'f2_grapheditor' },
      type: "POST",
      dataType: "json",
      success: function(data) {
        $("#tableRelationModal").find(`#tableRelationDiscoveryTable_wrapper`).remove();
        $("#tableRelationModal").find(`#tableRelationDiscoveryTable`).remove()
        var html = `
        <table id="tableRelationDiscoveryTable" class="row-border display" style="width: 100%;">
          <thead>
            <th>Table name</th>
            <th>Column name</th>
            <th>Actions</th>
          </thead>
          <tbody>
        `
        $('.tableRelationParentTable1Select').empty()
        for(let [key,value] of Object.entries(data)) {
          $('.tableRelationParentTable1Select').append(`<option value="${key}">${key}</option>`)
          for(let j = 0; j < value.length; j++) {
            html = html + `<tr>`
            html = html + `<td>${key}</td>`
            html = html + `<td>${value[j]}</td>`
            html = html + `<td><a data-toggle="tooltip" title="Edit record" onclick="createTableRelation.call(this)" data-table_list='${JSON.stringify([table1])}' data-table="${key}"  data-column=${value[j]} value="update"><i name="actions" value="update" class="relbutton fa fa-edit ihover javaSC thin-icon" style="font-size:15px" ></i></a></td>`
            html = html + `</tr>`
          }
        }
        html = html + `</tbody></table>`
        $("#tableRelationModal").find(`#tableRelationDiscoveryTableCont`).append(html);
        tableRelationDatatable()
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })
  }
  var createTableRelation = function() {
    var table_list = JSON.parse($(this).attr('data-table_list'))
    var child_table = $(this).attr('data-table')
    var column = $(this).attr('data-column')
    for(let [key,value] of Object.entries(columnMappedToTable)) {
    }
    $(this).closest('.modal-body').find('.tableRelationChildTable2Select').val(child_table).trigger('change');
    $(this).closest('.modal-body').find('.tableRelationChildColumn2Select').val(column).trigger('change');
    $(this).closest('.modal-body').find('.tableRelationParentColumn1Select').val(column).trigger('change');
  }
  var tableRelationTable = function () {
    var col = columnMappedToTable[$(this).val()]
    $("#tableRelationModal").find(`.${$(this).attr('data-col')}`).empty()
    $("#tableRelationModal").find(`.${$(this).attr('data-col')}`).append(`<option value="">---</option>`);
    for(let i = 0; i < col.length; i++) {
      $("#tableRelationModal").find(`.${$(this).attr('data-col')}`).append(`<option value="${col[i]["actual"]}">${col[i]["verbose"]}</option>`);
    }
  }
  var tableRelationCreateBtn = function() {
    $("#tableRelationModal").find(`#tableRelationDiscoveryTable_wrapper`).remove();
    $("#tableRelationModal").find(`#tableRelationDiscoveryTable`).remove()
    $("#tableRelationModal").find(`#tableRelationDiscoveryTableCont`).append(`
    <table id="tableRelationDiscoveryTable" class="row-border display" style="width: 100%;">
      <thead>
        <th>Table name</th>
        <th>Column name</th>
        <th>Actions</th>
      </thead>
      <tbody>
      </tbody>
    </table>
    `)
    tableRelationDatatable()
    setTimeout(() => {
      $("#tableRelationModal").find(`#tableRelationDiscoveryTable`).DataTable()
      .columns.adjust()
    },500)
    $("#tableRelationModal").find(".tableRelationTable1Select").empty()
      $("#tableRelationModal").find(".tableRelationTable1Select").append(`<option value="">---</option>`)
      for(let [key,value] of Object.entries(columnMappedToTable)) {
        $("#tableRelationModal").find(".tableRelationTable1Select").append(`<option value="${key}">${key}</option>`)
      }
    $("#formModal").modal('hide')
  }
  var tableRelationModalCancel = function() {
    $("#formModal").modal('show')
    clearTableRelationModal()
  }

  function tableRelationDatatable() {
    $("#tableRelationModal").find(`#tableRelationDiscoveryTable`).DataTable({
      "autoWidth": true,
      "scrollY": "50vh",
      "scrollCollapse": true,
      "scrollX": "300",
      "order":[],
      // "serverSide":true,
      orderCellsTop: true,
      //fixedHeader: true,
      responsive: true,
      colReorder: {
          fixedColumnsLeft: 1,
      },
      // stateSave: true,
      "deferRender": true,
      "paging": false,
      //"lengthMenu": [[1, 5, 50, -1], [1, 5, 50, "All"]],
      stripeClasses: false,
      //"pageLength": 50,
      dom: 'lfBrtip',
      "sScrollX": "100%",
      "scrollX": true,
      buttons: [
          {
              extend: 'collection',
              text: 'Export',
              buttons: [
              {
                  extend: 'copy', title: '', exportOptions: {
                  }
              },
              {
                  extend: 'excel', title: '', exportOptions: {
                  }
              },
              {
                  extend: 'csv', title: '', exportOptions: {
                  }
              },
              {
                  extend: 'pdf', title: '', exportOptions: {
                  }
              },
              ],
          },
          ],
          columnDefs: [
          {
              targets: "_all",
              className: 'dt-center allColumnClass all'
          },
          {
            targets: 0,
            width: "20%",
            className: 'noVis'
        }
      ],

      });
  }
  $('input[type=radio][name=js]').on('change',function() {
    if($(this).val() == 'multiple') {
      $('#formModal').find('.warningFormLevelFieldInp').css('display','none')
      $('#formModal').find('.warningFormLevelFieldCol').css('display','none')
      $('#formModal').find('.warningFormLevelFieldSel').css('display','none')
      $('input[type=radio][name=js][id=single]').attr('checked','unchecked');
      $('#JSConfig').css('display','none')
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','50vh');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','scroll');
      $('#formModal').find('.formLevelFieldCol').empty()
      $('#formModal').find('.formLevelFieldCol').append(`<option value="">---</option>`)
      $('#formModal').find('.formLevelFieldVal').find('select').empty()
      $('#formModal').find('.formLevelFieldValTag').find('select').empty()
      for(let i = 0; i < allFieldsColumns.length; i++){
        $('#formModal').find('.formLevelFieldCol').append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`)
      }
      appendButton($('#formModal').find('.formLevelFieldCol'))
      $('#formModal').find('.formLevelJs').css('display','block')
      $('#formModal').find('.formLevelFieldReload').css('display','none')
    } else {
      $('input[type=radio][name=js][id=multiple]').prop('checked',false);
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).find('.color').removeClass('changeColor');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','');
      $('#formModal').find('.formLevelJs').css('display','none')
      $('#formModal').find('.formLevelFieldReload').css('display','none')
      $('#formModal').find('.formLevelFieldVal').find('select').empty()
      $('#formModal').find('.formLevelFieldValTag').find('select').empty()
    }
  })
  $('#formModal').find('.formLevelFieldReloadOpt').on('change', function() {
    var val = $(this).val()
    $(this).find('option').each(function() {
      if($(this).val() == val) {
        $(this).attr('data-carousel')
        $('#formModal').find('#carouselExampleIndicators1').find('.carousel-item').removeClass('active');
        $('#formModal').find('#carouselExampleIndicators1').find('.carousel-item').eq(parseInt($(this).attr('data-carousel'))).addClass('active');
      }
    })
  })
  $('#formModal').find('#formLevelFieldReloadCancel').on('click',function() {
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).find('.color').removeClass('changeColor')
    $('#formModal').find('.formLevelFieldReload').css('display','none');
    $('#formModal').find('.formLevelFieldReload').find('#carouselExampleIndicators1').find('.carousel-inner').empty();
    $('#formModal').find('.formLevelJs').css('display','block');
    $('#formModal').find('.formLevelFieldCol').append(`<option value="">---</option>`)
    for(let i = 0; i < allFieldsColumns.length; i++){
      $('#formModal').find('.formLevelFieldCol').append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`)
    }
    appendButton($('#formModal').find('.formLevelFieldCol'))

  })
  $('#formModal').find('#formLevelFieldReloadSave').on('click',function() {
    var index = 0
    for(let i = 0; i < formLevelFieldList.length; i++) {
      var a = Object.keys(formLevelFieldList[i])
      for(let j = 0; j < Object.keys(formLevelFieldList[i]).length; j++) {
        if(a[j] == $(this).parent().parent().find('.formLevelFieldReloadOpt').val()) {
          index = i
          break;
        }
      }
    }
    var selectedCol
    var dict = {}
    var name = $(this).parent().parent().find('.formLevelFieldReloadOpt').val()
    var cur
    $('#formModal').find('.formLevelFieldReload').find('#carouselExampleIndicators1').find('.carousel-item').each(function() {
      if($(this).attr('data-identify') == name) {
        cur = $(this)
      }
    })
    selectedCol =  cur.find('.formLevelFieldReloadMultiCol').val()
    if(name) {
      formLevelFieldList[index][name] = {}
      formLevelFieldList[index][name]["action"] = cur.find('.formLevelFieldReloadAction').val()
      formLevelFieldList[index][name]["table"] = $('#selectFormTable').val()
      formLevelFieldList[index][name]["column"] =  cur.find('.formLevelFieldReloadCol').val()
      formLevelFieldList[index][name]["condition"] =  cur.find('.formLevelFieldReloadCond').val()
      if(cur.find('.formLevelFieldReloadVal').css('display') == 'none') {
        formLevelFieldList[index][name]["value"] = cur.find('.formLevelFieldReloadValTag').find('select').val()
      } else {
        formLevelFieldList[index][name]["value"] = cur.find('.formLevelFieldReloadVal').find('select').val()
      }
      formLevelFieldList[index][name]["action"] = cur.find('.formLevelFieldReloadAction').val();
      formLevelFieldList[index][name]["selectedColumn"] = selectedCol
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).find('.color').removeClass('changeColor')
      $('input[type=radio][name=js][id=single]').prop('checked',true);
      $('input[type=radio][name=js][id=multiple]').prop('checked',false);
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','');

    }
      $('#formModal').find('.formLevelFieldReload').find('#carouselExampleIndicators1').find('.carousel-inner').empty();
      $('#formModal').find('.formLevelFieldReload').css('display','none');
      $('#formModal').find('.formLevelFieldVal').find('select').empty()
      $('#formModal').find('.formLevelFieldValTag').find('select').empty()
  })
  $('#formModal').find('#formLevelFieldCancel').on('click',function() {
    $('#formModal').find('.warningFormLevelFieldInp').css('display','none')
    $('#formModal').find('.warningFormLevelFieldCol').css('display','none')
    $('#formModal').find('.warningFormLevelFieldSel').css('display','none')
    $('input[type=radio][name=js][id=single]').prop('checked',true);
    $('input[type=radio][name=js][id=multiple]').prop('checked',false);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','');
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','');
    $('#formModal').find('.formLevelFieldCol').empty()
    $('#formModal').find('.formLevelFieldVal').find('select').empty()
    $('#formModal').find('.formLevelFieldValTag').find('select').empty()
    $('#formModal').find('.formLevelFieldCond').val('').trigger('change')
    $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
    $('#formModal').find('.formLevelFieldAction').val('').trigger('change')
    $('#formModal').find('.formLevelFieldValTag').css('display','none');
    $('#formModal').find('.formLevelFieldVal').css('display','block');
    $('#formModal').find('.formLevelJs').css('display','none');
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).find('.color').removeClass('changeColor')

  })
  $('#formModal').find('.formLevelFieldInput').parent().on('click', function() {
    $(this).parent().parent().find('.warningFormLevelFieldInp').css('display','none')
    $(this).parent().parent().find('.warningFormLevelFieldCol').css('display','none')
    $(this).parent().parent().find('.warningFormLevelFieldSel').css('display','none')
  })
  $('#formModal').find('#formLevelFieldSave').on('click',function() {
    var selectedCol = []
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).find('.changeColor').each(function() {
      selectedCol.push($(this).children().attr('id'));
    })
    var dict = {}
    var check = 1
    var check1 = 1
    var name = $(this).parent().parent().find('.card-body').find('.formLevelFieldInput').val()
    if(formLevelFieldList.length > 0) {
      for(let i = 0; i < formLevelFieldList.length; i++) {
        if((Object.keys(formLevelFieldList[i]))[0] == name) {
          check = 0
          break
        }
      }
      for(let i = 0; i < formLevelFieldList.length; i++) {
        for(let [key,value] of Object.entries(formLevelFieldList[i]) ){
          if(formLevelFieldList[i][key]['column'] == $(this).parent().parent().find('.card-body').find('.formLevelFieldCol').val()) {
            check1 = 1;
            break;
          }
        }
      }
    }
    if(name && check1 && check && selectedCol.length > 0) {
      $('#formModal').find('.warningFormLevelFieldInp').css('display','none')
      $('#formModal').find('.warningFormLevelFieldCol').css('display','none')
      $('#formModal').find('.warningFormLevelFieldSel').css('display','none')
      dict[name] = {}
      dict[name]["action"] = $(this).parent().parent().find('.card-body').find('.formLevelFieldAction').val()
      dict[name]["table"] = $('#selectFormTable').val()
      dict[name]["column"] =  $(this).parent().parent().find('.card-body').find('.formLevelFieldCol').val()
      dict[name]["condition"] =  $(this).parent().parent().find('.card-body').find('.formLevelFieldCond').val()
      if($(this).parent().parent().find('.card-body').find('.formLevelFieldVal').css('display') == 'none') {
        dict[name]["value"] = $(this).parent().parent().find('.card-body').find('.formLevelFieldValTag').find('select').val()
      } else {
        dict[name]["value"] = $(this).parent().parent().find('.card-body').find('.formLevelFieldVal').find('select').val()
      }
      dict[name]["action"] = $(this).parent().parent().find('.card-body').find('.formLevelFieldAction').val();
      dict[name]["selectedColumn"] = selectedCol
      formLevelFieldList.push(dict)
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).find('.color').removeClass('changeColor')
      $('input[type=radio][name=js][id=single]').prop('checked',true);
      $('input[type=radio][name=js][id=multiple]').prop('checked',false);
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','');
      $('#formModal').find('.formLevelFieldCol').empty()
      $('#formModal').find('.formLevelFieldVal').find('select').empty()
      $('#formModal').find('.formLevelFieldCond').val('').trigger('change')
      $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
      $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
      $('#formModal').find('.formLevelFieldValTag').css('display','none');
      $('#formModal').find('.formLevelFieldVal').css('display','block');
      $('#formModal').find('.formLevelJs').css('display','none');
      $('#formModal').find('.formLevelFieldVal').find('select').empty()
      $('#formModal').find('.formLevelFieldValTag').find('select').empty()
      $(this).parent().parent().find('.card-body').find('.warningFormLevelField').css('display','none')
    } else{
      if(check == 0) {
        $(this).parent().parent().find('.card-body').find('.warningFormLevelFieldInp').css('display','block')
        $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
      } else if(check1 == 0) {
        $(this).parent().parent().find('.card-body').find('.warningFormLevelFieldCol').css('display','block')
        $('#formModal').find('.formLevelFieldCol').val('').trigger('change')
      } else if(selectedCol.length == 0) {
        $(this).parent().parent().find('.card-body').find('.warningFormLevelFieldSel').css('display','block')
      }
    }
  })
  $('#formModal').find('.formLevelFieldCond').on('change',function() {
    if($(this).val() == 'In' || $(this).val() == 'Not In') {
      $('#formModal').find('.formLevelFieldValTag').css('display','block');
      $('#formModal').find('.formLevelFieldValTag').find('select').select2({
        tags:true
      });
      $('#formModal').find('.formLevelFieldVal').css('display','none');
    } else {
      $('#formModal').find('.formLevelFieldVal').find('select').select2({
        tags:true
      });
      $('#formModal').find('.formLevelFieldValTag').css('display','none');
      $('#formModal').find('.formLevelFieldVal').css('display','block');
    }
  })
  $('#formModal').find('.formLevelFieldCols').on('change', function() {
    $.ajax({
        url: window.location.pathname,

        data: {
          'operation': 'valuesFromCol',
          'tablesForm': JSON.stringify($('#selectFormTable').val()),
          'column': $('#formModal').find('.formLevelFieldCol').val()
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          $('#formModal').find('.formLevelFieldVal').find('select').empty()
          for (j in data.value) {

          }
        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })
  })
  function updatePreviewForMultiselect() {
    var len = $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.multiselect').length;
    for(let i = 0; i < len; i++) {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.multiselect').eq(i).remove();
    }
    $(".multipleSelectedColumn").each(function() {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+($(this).val())).before(`
      <button class="multiselect" id="${$(this).val()}_m" type="button" style="position:absolute; margin-left:40%; border: transparent; border-radius:10px; color:"green";background-color: var(--primary-color);border-color: #565a5e;border: 1px solid transparent;> &#10010; </button>
      `)
    })
 };
 $('#flowhiddenSelectedColumn').on('change',function() {
  $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.box').css('display','block');
  $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+($(this).val())).parent().css('display','none')
 })
  $('#createViewModal').find('button .close').on('click', function() {
    $('#createViewModal').find('.dragContainer').empty();
    $('.dragContainer').empty();
    $('#createViewModal').css('display','none');

  })
  $('.closeForm').on('click', function() {
    if(stateOfCss["save"] == "no") {
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).parent().attr("style",`${stateOfCss["previous"]}`)
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).parent().css("background-color",``);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').css("background-color",`${stateOfCss["background-color"]}`);
    if($('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').attr('type') == 'file' || $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').attr('type') == 'image') {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().find('label').css("background-color",`${stateOfCss["background-color"]}`);
    }
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').css("background-color",`${stateOfCss["background-color"]}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').css("background-color",`${stateOfCss["background-color"]}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().css("background-color",`${stateOfCss["background-color"]}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').parent().css("background-color",`${stateOfCss["background-color"]}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').parent().css("background-color",`${stateOfCss["background-color"]}`);
    if(stateOfCss["background-color"] != "" && stateOfCss["background-color"]) {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').css('border-radius','5px');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').css('border-radius','5px');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').css('border-radius','5px');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().css('border-radius','5px');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').parent().css('border-radius','5px');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').parent().css('border-radius','5px');
    } else {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').css('border-radius','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').css('border-radius','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').css('border-radius','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().css('border-radius','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').parent().css('border-radius','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').parent().css('border-radius','');
    }
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).parent().removeAttr("title",`${stateOfCss["title"]}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).parent().removeAttr("data-toggle",``);
    if(stateOfCss["span"] != "") {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("span").remove();
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("small").remove();
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).append(`<small class="form-text text-muted">${stateOfCss["span"]}</small>`);

    } else {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("span").remove();
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("small").remove();

    }
  }
    $('#formModal').find('.warningFormLevelFieldInp').css('display','none')
    $('#formModal').find('.warningFormLevelFieldCol').css('display','none')
    $('#formModal').find('.warningFormLevelFieldSel').css('display','none')
    $('#JSConfig').css('display','none');
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','');
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','');
    var count = 0;
    $('#JSConfig').find('.multipleJS').each(function() {
      if(count > 0) {
        $(this).remove();
      }
      count++
    })
    $('#JSConfig').find('.multipleJS').eq(0).find('.selectJSproperty').val('').trigger('change')
    $('#createViewModal').css('display','block');
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).find('.color').removeClass('changeColor')
    $('input[type=radio][name=js][id=single]').prop('checked',true);
    $('input[type=radio][name=js][id=multiple]').prop('checked',false);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','');
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','');
    $('#formModal').find('.formLevelFieldCol').empty()
    $('#formModal').find('.formLevelFieldVal').find('select').empty()
    $('#formModal').find('.formLevelFieldCond').val('').trigger('change')
    $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
    $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
    $('#formModal').find('.formLevelFieldValTag').css('display','none');
    $('#formModal').find('.formLevelFieldVal').css('display','block');
    $('#formModal').find('.formLevelJs').css('display','none');
    $('#formModal').find('.formLevelFieldReload').find('#carouselExampleIndicators1').find('.carousel-inner').empty();
    $('#formModal').find('.formFieldLevelReload').css('display','none');
    $('input[type=radio][name=js][value=single]').prop('checked',true)
    $('input[type=radio][name=js][value=multiple]').prop('checked',false)
    var htmlR = `
    <div class="card card-default collapsed-card">
      <div class="card-header">
        <p class="card-title">Cascading level 0</p>

        <div class="card-tools">
          <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:black"></i></button>
          <button type="button" class="btn btn-tool" onclick="cascadingCard.call(this)" style="color:black">Add card</i></button>
        </div>
      </div>
      <div class="card-body row" style="display:flex">
        <div class="col-6" style="height: 16rem;overflow: scroll;">
          <p class="autopopulate1" style="font-weight: bold;">Select source table</p>
          <div class="" id="masterTableCascading1">
            <select class="masterTableSelectCascading1 select2 form-control" onchange="selectColFromTable.call(this)">
              <option value="" selected>Select master table</option>
              {% for i in tableList%}
              <option value="{{i}}">{{i}}</option>
              {%endfor%}
            </select>
          </div><br>
          <div class="autopopulate1" style="font-weight: bold;">Criteria field mapping through source table column</div><br>
          <div class="row" id="indFieldTypeCascading1">
            <div class="col-6" style="display: inline-block;">
              <p>Current table field:</p>
              <select class="select2 form-control indFieldTypeSelectCascading1">
                <option value="" selected>Dependent field mapping through source table column</option>
              </select>
            </div>
            <div class="col-6" style="display: inline-block;">
              <p>Mapping table field:</p>
              <select class="select2 form-control commonCol indFieldTypeMapperCascading1">
                <option value="" selected>Select mapping field</option>
              </select>
            </div>
          </div><br>
        </div>
        <div class="col-6" style="height: 16rem;overflow: scroll;">
          <div class="autopopulate1" style="display: flex; align-items: center; justify-content: space-between;" style="font-weight: bold;"><span style="font-weight: bold;">Select dependent field</span> <span class="float-right" style="font-size: 15px;" onclick="addIndField.call(this,'Cascading1')"><i class="fas fa-plus"></i></span></div><br>
          <div class="norow" id="depFieldTypeCascading1">
            <div class="row" style="margin-bottom:6px">
              <div class="col-6" style="display: inline-block;">
                <p>Current table field:</p>
                <select class="depFieldTypeSelectCascading1 select2 form-control " onchange="casadingColOption.call(this)">
                  <option value="" selected>Select independent field</option>
                </select>
              </div>
              <div class="col-5">
                <p>Mapping table field:</p>
                <select class="depFieldTypeMapperCascading1 select2 form-control commonCol">
                  <option value="" selected>Select mapping field</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
`
$('#cascadingCard1').empty()
$('#cascadingCard1').append(htmlR);
$('.depFieldTypeMapperCascading1').select2();
$('.depFieldTypeSelectCascading1').select2();
$('.indFieldTypeMapperCascading1').select2();
$('.indFieldTypeSelectCascading1').select2();
$('.masterTableSelectCascading1').select2();
  })
  $('.close').on('click', function() {
    $('#selectTableColumnsflow').empty();
    $('#Custom').css('display','none');
    $('.defaultValue').prop('checked',false);
    $('#selectMultipleFormTableflow').val('alertbasetable').trigger('change');

    $('#selectMultiConfig').val('Default').trigger('change');
    $('#selectMultiConfig_mul').val('Default').trigger('change');

  })

    $('#selectMultiConfig').on('select2:select', function() {
      var l = createViewName.length
      createViewName.splice(0,l);
      createViewName.push($(this).val());

    })

    $('#selectMultiConfig_mul').on('select2:select', function() {
      var l = createViewName.length
      createViewName.splice(0,l);
      createViewName.push($(this).val());

    })

    $('#appJSONTable').on('select2:select', function() {

      $.ajax({
              url: window.location.pathname,
              data: {
                'operation': 'dropFieldList',
                'tableName':$(this).val(),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                  $("#appJSONCols").empty()
                  var default_drop_approval_template = ['active_to', 'active_from', 'transaction_id']
                  for (var i = 0; i < data.fieldList.length; i++) {
                        var option = new Option(data.fieldList[i], data.fieldNameList[i])
                        $('#appJSONCols').append(option);
                        if ($('#selectTemplate').val() == "Approval Template" && default_drop_approval_template.includes(data.fieldNameList[i])) {
                          $(option).prop('selected', true);
                        }
                      }
                  let reload = $("#appJSONTable").attr("data-data")
                  if(reload){
                    reload = JSON.parse(reload)
                    $("#appJSONCols").val(reload).trigger("change")
                    $("#appJSONTable").removeAttr("data-data")
                  }
                },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }

      })

    })

    $('#appJSONEditTable').on('select2:select', function() {

      $.ajax({
              url: window.location.pathname,
              data: {
                'operation': 'dropFieldList',
                'tableName':$(this).val(),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                  $("#appJSONEditCols").empty()
                  for (var i = 0; i < data.fieldList.length; i++) {
                        $('#appJSONEditCols').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                      }
                  let reload = $("#appJSONEditTable").attr("data-data")
                  if(reload){
                    reload = JSON.parse(reload)
                    $("#appJSONEditCols").val(reload).trigger("change")
                    $("#appJSONEditTable").removeAttr("data-data")
                  }
                },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }

      })

    })

    function populateMultiselectColumn() {
      var thiss = $(this)
      var selectedTables = JSON.stringify([$(this).val()]);
      var selectedTab = $(this).val();
      var change = $('#selectFormTable').val();
      var dummy = []
      dummy = [...dummy, ...tableNamesChild];
      if (change == selectedTab) {
      $('#selectFormTable').empty();
          for(j in dummy) {
            if (selectedTab == dummy[j]) {
              dummy.splice(j,1);
            }
          }
        for (i in dummy ) {
          $('#selectFormTable').append(`<option value="${dummy[i]}">${dummy[i]}</option>`);
        }
      }

      $.ajax({
        url: window.location.pathname,

        data: {
          'operation': 'formTableMiltipleFieldsUnique',
          'tablesForm': selectedTables,
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          thiss.closest(".multiSelectCard").find('.selectTableColumns').empty()
          thiss.closest(".multiSelectCard").find('.selectTableColumns').append(
            `<option value="" selected disabled>Select column</option>`
          )
          for (j in data.finalFieldList) {
            thiss.closest(".multiSelectCard").find('.selectTableColumns').append(
              `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['fieldVerbose']}</option>`
            )

          }
          $('#periodSelection').empty();
          $('#ComparableNumList').empty();
          $('#selectedComparableNumList').empty();
          $('.selectTableColumns').on('select2:open', function (e) {
              const evt = "scroll.select2";
              $(e.target).parents().off(evt);
              $(window).off(evt);
          });
        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })

    $.ajax({
        url: window.location.pathname,
        data: {
          'operation': 'formTableMiltipleFields',
          'tablesForm': selectedTables,
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          thiss.closest(".multiSelectCard").find('.additional').empty()
          for (j in data.finalFieldList) {

            thiss.closest(".multiSelectCard").find('.additional').append(
              `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['fieldVerbose']}</option>`
            )

            tablesColumn[j] = data.finalFieldList[j]['fieldName'];
          }
          $('#periodSelection').empty();

          $('#ComparableNumList').empty();
          $('#selectedComparableNumList').empty();
          $('.selectTableColumns').off('change').on('change',fillcolvalMul)
          $('.additional').on('select2:open', function (e) {
              const evt = "scroll.select2";
              $(e.target).parents().off(evt);
              $(window).off(evt);
          });
        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
    })
  }

  $('#appFields_ref_table').on('select2:select', function() {

      $.ajax({
              url: window.location.pathname,
              data: {
                'operation': 'dropFieldList',
                'tableName':$(this).val(),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                  $("#appFields_ref_cols").empty()
                  for (var i = 0; i < data.fieldList.length; i++) {
                        $('#appFields_ref_cols').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                      }
                  let reload = $("#appFields_ref_table").attr("data-data")
                  if(reload){
                    reload = JSON.parse(reload)
                    $("#appFields_ref_cols").val(reload).trigger("change")
                    $("#appFields_ref_table").removeAttr("data-data")
                  }
                },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }

      })

    })

  function fillcolvalMul () {
      let master_table = $(this).parent().parent().parent().find('.selectMultipleFormTable').val()
      let col = $(this).val()
      let ind = $(this).parent().parent().parent().parent().index()
      let reload_data = $(this).attr("data-data");
      if(reload_data == undefined){
        reload_data = JSON.stringify('[]')
      }
      $(this).removeAttr("data-data");
      if(master_table && col && col != "" && master_table != ""){
        $.ajax({
            url: window.location.pathname,
            data: {
              'operation': 'formTableUniqueValues',
              'master_table': master_table,
              'col': col,
              "ind": ind,
              "reload_data":reload_data,
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              indx = parseInt(data.ind)
              $('.def_values_opt').eq(indx).empty()
              for (j in data.finalFieldList) {
                $('.def_values_opt').eq(indx).append(
                  `<option value="${data.finalFieldList[j]}">${data.finalFieldList[j]}</option>`
                )
              }

              r_data = data.reload_data
              if(r_data.length > 0){
                $('.def_values_opt').eq(indx).val(r_data).trigger("change")
              }
        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })

  }
}
  $('#selectMultipleFormTableflow').on('select2:select', function () {
      var selectedTables = JSON.stringify([$(this).val()]);
      var selectedTab = $(this).val();
      var change = $('#selectFormTable').val();
      var dummy = []
      dummy = [...dummy, ...tableNamesChild];
      if (change == selectedTab) {
      $('#selectFormTable').empty();
          for(j in dummy) {
            if (selectedTab == dummy[j]) {
              dummy.splice(j,1);
            }
          }
        for (i in dummy ) {
          $('#selectFormTable').append(`<option value="${dummy[i]}">${dummy[i]}</option>`);
        }
      }

      $.ajax({
        url: window.location.pathname,

        data: {
          'operation': 'formTableMiltipleFieldsUnique',
          'tablesForm': selectedTables,
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          $('#selectTableColumnsflow').empty()
          for (j in data.finalFieldList) {
            $('#selectTableColumnsflow').append(
              `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['fieldVerbose']}</option>`
            )

          }
          $('#periodSelection').empty();

          $('#ComparableNumList').empty();
          $('#selectedComparableNumList').empty();
        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })

  })
    $('#selectFormTable').on('select2:select change', function () {
      $("#show_labels").prop("checked", true)
      $("#togglepagination").prop("checked", false)
      $("#togglepagination_min_fields").prop("checked", false)
      col_val = 3
      $(".paginationrow").css("display", "none");
      $(".paginationrow_min_fields").css("display", "none");
      $("#pageSelection").css("display", "none")
      $("#pageSelection_min_fields").css("display", "none")
      $(".fieldRestrict_min_page").css("display","none")
      $(".fieldRestrict_min").css("display","block")
      $("#addPageRowID").attr("nrow", 0)
      $("#addPageRowID_min_fields").attr("nrow", 0)
      $(".paginationrow").empty()
      $(".paginationrow_min_fields").empty()
      $("#togglepaginationmand").prop("checked", false)
      $("#togglepaginationwarp").prop("checked", false)
      $("#toggleeditlabel").prop("checked", false)
      $(".labelrow").css("display", "none");
      $("#labelSelection").css("display", "none")
      $("#addPageRowID_1").attr("nrow", 0)
      $(".labelrow").empty()
      $("#field_copy_allow").prop("checked", false).trigger('change')
      $("#togglerecurlabel").prop("checked", false).trigger('change')
      $("#togglerest_min_label").prop("checked", false).trigger('change')
      $("#field_paste_allow").prop("checked", false).trigger('change')
      $('#fcopy_fields').removeAttr("data-reloaddata")
      $('#fcopy_fields').removeAttr("data-reload")
      $('#recurr_update_fields').removeAttr("data-reloaddata")
      $('#recurr_update_fields').removeAttr("data-reload")
      $('#restrict_min_fields').removeAttr("data-reloaddata")
      $('#restrict_min_fields').removeAttr("data-reload")
      $('#fpaste_fields').removeAttr("data-reloaddata")
      $('#fpaste_fields').removeAttr("data-reload")
      $("#check_validForm").prop("checked", false)
      $('#configuration_val_row_dev').empty()
      $('.customValbtnDev').attr('data-data_config','{}')
      $('.carousel').carousel(0);
		  $('#custom_validation_table_dev').empty()
		  $('#custommValidationSelection_dev').val('').trigger('change')
		  $('#custommValidationSelection_dev').empty()
      $("#togglepagination_colorder").prop("checked", false)
      $("#addPageRowID_colorder").attr("nrow", 0)
      $(".paginationrow_colorder").css("display", "none");
      $(".paginationrow_colorder").empty()
      $("#pageSelection_colorder").css("display", "none")
      $("#approval_columns").empty()
      $("#success_columns").empty()
      $('#approval_columns').append(`<option value="" disabled selected>Select Columns</option>`)
      $('#success_columns').append(`<option value="" disabled selected>Select Columns</option>`)
      $("#togglelogo_cre_card").prop("checked", false).trigger('change')
      $("#togglelogo_user_pic").prop("checked", false).trigger('change')
      $("#togglelogo_user_email").prop("checked", false).trigger('change')
      $("#togglelogo_email").prop("checked", false).trigger('change')
      var selectedTables = $(this).val();
      var dummy = []
      var change = $('.selectMultipleFormTable').val();
      dummy = [...dummy, ...tableNamesChild];
      $('.selectMultipleFormTable').empty();
      $('#selectMultipleFormTableflow').empty();
      for (i in selectedTables) {
        for(j in dummy) {
          if (selectedTables[i] == dummy[j]) {
            dummy.splice(j,1);
          }
        }
      }
      for (i in dummy ) {
          $('.selectMultipleFormTable').append(`<option value="${dummy[i]}">${dummy[i]}</option>`);
      }
      for (i in dummy ) {
        $('#selectMultipleFormTableflow').append(`<option value="${dummy[i]}">${dummy[i]}</option>`);
      }

      if (selectedTables.length) {
        $.ajax({
          url: window.location.pathname,
          data: {
            'operation': 'formTableFields',
            'tablesForm': JSON.stringify(selectedTables),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            resetCases();
            columnMappedToTable = {};
            for(let t = 0; t < selectedTables.length; t++) {
              columnMappedToTable[selectedTables[t]] = []
            }
            $('#formModal').find('.formLevelFieldCol').empty();
            $('#selectColumnVHCVColumnAlignment').empty();
            $('#selectColumnVRCVColumnAlignment').empty();
            $('#selectColumnVDCVColumnAlignment').empty();
            $('#formModal').find('.formLevelFieldCol').append(`<option value="">---</option>`)
            allFieldsColumns = []
            allFieldsColumnsType = []
            allFieldsColumnsNull = []
            mulSelectTable = data.table
            dropDown = []
            verboseName = []
            tableArray = []
            fields1 = []
            formLevelFieldList = []
            $('#formModal').find('.formLevelFieldReload').find('#carouselExampleIndicators1').find('.carousel-inner').empty();
            $('#formfieldList').empty();
            $('#fcopy_fields').empty();
            $('#fcopy_fields').append(`<option value="" disabled>Select Fields</option>`)
            $('#recurr_update_fields').empty();
            $('#restrict_min_fields').empty();
            $('#fpaste_fields').empty();
            $('#fpaste_fields').append(`<option value="" disabled>Select Fields</option>`)
            $('#selectColumnVHCVColumnAlignment').append(`<option value="" disabled selected>Select Field</option>`)
            $('#selectColumnVRCVColumnAlignment').append(`<option value="" disabled selected>Select Field</option>`)
            $('#selectColumnVDCVColumnAlignment').append(`<option value="" disabled selected>Select Field</option>`)
            $(".casesColumn").empty();
            $(".casesColumn").append(`<option value="">Select column</option>`);
            $("#selectAllField").empty();[]
            $(".paginationrow_colorder").empty()
            $('#foreignkey_columnnames').empty();
            $('#foreignkey_columnnames').append(`<option value="" disabled>Select Fields</option>`)
            for (k in data.finalFieldList) {
                $('#recurr_update_fields').append(
                  `<option value="${data.finalFieldList[k]['fieldName']}">${data.finalFieldList[k]['verbose']}</option>`
                )
                $('#restrict_min_fields').append(
                  `<option value="${data.finalFieldList[k]['fieldName']}">${data.finalFieldList[k]['verbose']}</option>`
                )
                $('#selectColumnVHCVColumnAlignment').append(
                  `<option value="${data.finalFieldList[k]['fieldName']}">${data.finalFieldList[k]['verbose']}</option>`
                )
                $('#selectColumnVRCVColumnAlignment').append(
                  `<option value="${data.finalFieldList[k]['fieldName']}">${data.finalFieldList[k]['verbose']}</option>`
                )
                $('#selectColumnVDCVColumnAlignment').append(
                  `<option value="${data.finalFieldList[k]['fieldName']}">${data.finalFieldList[k]['verbose']}</option>`
                )
            }
            for (j in data.finalFieldList) {
              if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from') {
                $('#formfieldList').append(
                  `<button type="button" class="formField list-group-item list-group-item-action list-group-item-light" value="${data.finalFieldList[j]['fieldName']}" data-fieldType="${data.finalFieldList[j]['fieldType']}">${data.finalFieldList[j]['verbose']}</button>`
                )
                $('#fcopy_fields').append(
                  `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                )
                $('#fpaste_fields').append(
                  `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                )
                $("#selectAllField").append(

                  `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`

                )
                if(["ForeignKey", "CharField", "MultiselectField"].includes(data.finalFieldList[j]["fieldType"])){
                  if (data.finalFieldList[j]["fieldType"] == "CharField") {
                    if (data.finalFieldList[j]["dropdown"] == 0) {
                      $('#foreignkey_columnnames').append(
                      `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                      )
                    }
                  } else {
                    $('#foreignkey_columnnames').append(
                    `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
                    )
                  }
                }

                $(".paginationrow_colorder").append(`
                  <li class="btn btn-sm btn-light col" name="${data.finalFieldList[j]['fieldName']}" style="height:auto;margin: 5px auto;">
                    <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${data.finalFieldList[j]['verbose']}
                  </li>`);
                $('#column-reorder').find('.sortable-order').sortable()

                allFieldsColumns[j] = data.finalFieldList[j]['fieldName'];
                allFieldsColumnsType[j] = data.finalFieldList[j]['fieldType']
                allFieldsColumnsNull[j] = data.finalFieldList[j]['null'];
                dropDown[j] = data.finalFieldList[j]['dropdown'];
                verboseName[j] = data.finalFieldList[j]['verbose'];
                $(".casesColumn").append(`<option value="${allFieldsColumns[j]}">${verboseName[j]}</option>`);
                columnMappedToTable[data.finalFieldList[j]['table']].push({"actual":allFieldsColumns[j],"verbose":verboseName[j],"type":allFieldsColumnsType[j]})
                $('#formModal').find('.formLevelFieldCol').append(`<option value="${data.finalFieldList[j]['fieldname']}">${data.finalFieldList[j]['verbose']}</option>`);
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+allFieldsColumns[j]).parent().attr("style",`${stateOfCss["previous"]}`)
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+allFieldsColumns[j]).find('input').css("background-color",`transparent`);
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+allFieldsColumns[j]).find('textarea').css("background-color",`transparent`);
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+allFieldsColumns[j]).parent().removeAttr("title",`${stateOfCss["title"]}`);
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+allFieldsColumns[j]).parent().removeAttr("data-toggle",``);
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+allFieldsColumns[j]).find("span").remove();

              }
            }

            if ($('#foreignkey_columnnames').attr("data-new_value")) {
              $('#foreignkey_columnnames').val(JSON.parse($('#foreignkey_columnnames').attr("data-new_value"))).trigger('change');
            }

            if($("#fcopy_fields").attr("data-reload") == "yes"){
              let data = JSON.parse($("#fcopy_fields").attr("data-reloaddata"))
              $("#fcopy_fields").val(data.tab_data.copy_paste_config.copy.colList).trigger('change')
              $("#fcopy_fields").val(data.tab_data.copy_paste_config.copy.colList).trigger("select2:select")
            }

            if($("#recurr_update_fields").attr("data-reload") == "yes"){
              let data = JSON.parse($("#recurr_update_fields").attr("data-reloaddata"))
              $("#recurr_update_fields").val(data.recurrence_config.colList).trigger('change')
              $("#recurr_update_fields").val(data.recurrence_config.colList).trigger("select2:select")
            }

            if($("#restrict_min_fields").attr("data-reload") == "yes"){
              let data = JSON.parse($("#restrict_min_fields").attr("data-reloaddata"))
              $("#restrict_min_fields").val(data).trigger('change')
              $("#restrict_min_fields").val(data).trigger("select2:select")
            }

            if($("#fpaste_fields").attr("data-reload") == "yes"){
              let data = JSON.parse($("#fpaste_fields").attr("data-reloaddata"))
              $("#fpaste_fields").val(data.tab_data.copy_paste_config.paste.colList).trigger('change')
              $("#fpaste_fields").val(data.tab_data.copy_paste_config.paste.colList).trigger("select2:select")
            }

            appendButton($('#formModal').find('.formLevelFieldCol'))
            for (const [key, value] of Object.entries(dic_cb)) {
              $('#formModal').find('.formLevelFieldCol').append(`<option value="${key}__cbbutton">${key} (button)</option>`);
            }
            if(selectedTables.length > 1) {
              findTableRelation()
            } else {
              $('.tableRelationDetail').empty()
              $(".tableRelation").css('display','none');
              $(".tableRelationBtn").css('display','none');
            }
            var t = 0
            $('#JSConfig').find('.multipleJs').eq(0).find('.formLevelJs').find('.configCont').each(function() {
              if(t == 0) {
                $(this).find('.formLevelFieldCond').val('').trigger('change')
                $(this).find('.formLevelFieldVal').find('select').empty()
                $(this).find('.formLevelFieldValTag').find('select').empty()
                $(this).find('.formLevelFieldVal').css('display','block')
                $(this).find('.formLevelFieldValTag').css('display','none')
              } else {
                $(this).remove();
              }
              t++
            })
            $('#JSConfig').find('.multipleJs').eq(0).find('.formLevelJs').find('.formLevelFieldActionsSel').val('').trigger('change');
            $('#JSConfig').find('.multipleJs').eq(0).find('.formLevelJs').find('.formLevelFieldColName').find('select').empty()
            t = 0;
            $('#JSConfig').find('.modal-body').find('.multipleJs').each(function() {
              if(t != 0) {
                $(this).remove()
              }
              t++
            })
            var fieldsDemo = [];
            var fieldAttributesCVDemo = []
            for(let i = 0; i < fields.length; i++) {
              if((allFieldsColumns.includes(fields[i].fieldname))) {
                fieldsDemo.push(fields[i])
              } else {
                $('#selectedFormfieldList').find(`button[value='${fields[i].fieldname}']`).parent().parent().remove()
              }
            }
            fields = []
            if (fieldAttributesCVDemo.length > 0) {
            }
            fields = fieldsDemo
            if (fields.length == 0) {
              $('.multipleSelectedColumn').empty();
              for (let j=0; j<allFieldsColumnChar.length; j++){
                $('.multipleSelectedColumn').append(
                  `<option value="${allFieldsColumnChar[j]}">${allFieldsColumnCharVerbose[j]}</option>`)
              }
            }

            for(let i = 0; i < allFieldsColumns.length; i++) {
              if (allFieldsColumns[i] != 'created_by' && allFieldsColumns[i] != 'created_date' && allFieldsColumns[i] != 'modified_by' && allFieldsColumns[i] != 'modified_date' && allFieldsColumns[i] != 'active_to' && allFieldsColumns[i] != 'active_from') {
                fieldsProperty1 = {
                  "fieldname": allFieldsColumns[i],
                  "fieldtype": allFieldsColumnsType[i],
                  "fieldVerbose": verboseName[i]
                  }
                fields1.push(fieldsProperty1)
              }
            }

            populatePreview()
            $('#periodSelection').empty();

            $('#ComparableNumList').empty();
            $('#selectedComparableNumList').empty();
            if($("#selectAllField").attr("data-present") == "yes"){
              let data = JSON.parse($("#selectAllField").attr("data-relaod"));
              $("#selectAllField").val(data).trigger("change");
            }

          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        });
        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFieldsChar',
            'tablesForm': JSON.stringify(selectedTables),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            le = allFieldsColumnChar.length;
            allFieldsColumnChar.splice(1,le);
            allFieldsColumnCharVerbose = []
            for (j in data.finalFieldList) {
              allFieldsColumnChar[j] = data.finalFieldList[j]['fieldName'];
              allFieldsColumnCharVerbose[j] = data.finalFieldList[j]['fieldVerbose']
            }

            if (selectedTables.length == 0) {
              len = 0;
            } else {
              len = 1;
            }
            if (selectedTables.length == 0) {
              $('#flowhiddenSelectedColumn').empty();
            } else{
              $('#flowhiddenSelectedColumn').empty();
              for (let j=0; j<allFieldsColumnChar.length; j++) {
                $('#flowhiddenSelectedColumn').append(
                  `<option value="${data.finalFieldList[j]['fieldName']}">${allFieldsColumnCharVerbose[j]}</option>`)
              }
            }
            if (selectedTables.length == 0 && selectedColumn.length == 0) {
              $('.multipleSelectedColumn').empty();

              $('#seletMultipleColumns').empty();
            } else if (selectedColumn.length == 0) {
              $('.multipleSelectedColumn').empty();
              for (let j=0; j<allFieldsColumnChar.length; j++) {
                $('.multipleSelectedColumn').append(
                  `<option value="${allFieldsColumnChar[j]}">${allFieldsColumnCharVerbose[j]}</option>`)
              }
            }
            $('#periodSelection').empty();
            $('#ComparableNumList').empty();
            $('#selectedComparableNumList').empty();
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })

        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFieldsAll',
            'tablesForm': JSON.stringify(selectedTables),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {

            $("#approval_columns").empty()
            $("#success_columns").empty()
            $('#approval_columns').append(`<option value="" disabled selected>Select Columns</option>`)
            $('#success_columns').append(`<option value="" disabled selected>Select Columns</option>`)

            for (k in data.finalFieldList) {

              if (data.finalFieldList[k]['fieldName'] != 'is_active_flag'){
                $("#approval_columns").append(
                  `<option value="${data.finalFieldList[k]['fieldName']}">${data.finalFieldList[k]['verbose']}</option>`
                )

                $("#success_columns").append(
                  `<option value="${data.finalFieldList[k]['fieldName']}">${data.finalFieldList[k]['verbose']}</option>`
                )
              }

          }

          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })


        // View History
        var selectedTablesView = $(this).val();
        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'viewHistory_columns',
            'tablesFormView': JSON.stringify(selectedTablesView),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            context= JSON.parse(data.context)
            $("#viewHistory_columnAction").empty()
            $("#viewDraft_columnAction").empty()
            $("#viewHistory_displayColumns").empty()
            $("#viewRejectedRecords_displayColumns").empty()
            if(context){
              for(var tablename of Object.keys(context)){
                if(Object.keys(context[tablename]).length>0){
                  for(var fieldname of Object.keys(context[tablename])){
                    $("#viewHistory_columnAction").append(`<option data-table-name='${tablename}' value='${fieldname}'>${context[tablename][fieldname]}</option>`)
                    $("#viewDraft_columnAction").append(`<option data-table-name='${tablename}' value='${fieldname}'>${context[tablename][fieldname]}</option>`)
                    $("#viewHistory_displayColumns").append(`<option data-table-name='${tablename}' value='${fieldname}'>${context[tablename][fieldname]}</option>`)
                    $("#viewRejectedRecords_displayColumns").append(`<option data-table-name='${tablename}' value='${fieldname}'>${context[tablename][fieldname]}</option>`)
                  }
                }
              }
            }
            if($("#viewHistory_columnAction").attr("data-reload") == "yes"){
              let data_ = JSON.parse($("#viewHistory_columnAction").attr("data-reloaddata"))
              viewHistory_columnActionLoad(data_)
            }
            if($("#viewDraft_columnAction").attr("data-reload") == "yes"){
              let data_ = JSON.parse($("#viewDraft_columnAction").attr("data-reloaddata"))
              viewDraft_columnActionLoad(data_)
            }

            if($("#viewHistory_displayColumns").attr("data-reload") == "yes"){
              let data_ = JSON.parse($("#viewHistory_displayColumns").attr("data-reloaddata"))
              viewHistory_displayColumnsLoad(data_)
            }

            if($("#viewRejectedRecords_displayColumns").attr("data-reload") == "yes"){
              let data_ = JSON.parse($("#viewRejectedRecords_displayColumns").attr("data-reloaddata"))
              viewRejectedRecords_displayColumnsLoad(data_)
            }



          },
          error:function(){
            Swal.fire({icon: 'error',text: 'Error! Failure in displaying columns. Please try again.'});
          }
        });
      }
    });
    $('#selectAction').on('change',function() {
      var len = ($(this).val()).length
      var select_val = $(this).val()
      var buttonsNotSelected = [];
      $(this).find('option').each(function(){
        if (!$(this).prop('selected')) {
          buttonsNotSelected.push($(this).val());
        }
      });
      $('#createViewFormPreviewContainerCard > .formBtn > .form-buttons').remove();
      $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').find('.formBtn').find('.form-buttons').remove();
      var buttonRowConfig = [];
      if ($('#saveFormStyleConfigButton').attr('data-config')) {
        existingStylingConfig = JSON.parse($('#saveFormStyleConfigButton').attr('data-config'));
        if (existingStylingConfig.sizing_placement_settings) {
          buttonRowConfig = existingStylingConfig["button_row_config"];
        }
      }
      for (var btn of select_val) {
        let cVContainer = $('#createViewFormPreviewContainerCard').find('.form-row');
        let existingCheck = cVContainer.find(`.form-buttons > input[value="${btn}"]`);
        let existsInButtonRow = false;
        if (Object.keys(buttonRowConfig).length == 0) {
          existsInButtonRow = true;
        } else {
          for (let btnConfig of buttonRowConfig) {
            if (btnConfig.name == btn) {
              existsInButtonRow = true;
              break;
            }
          }
        }
        if (existingCheck.length == 0 && existsInButtonRow) {
          var buttonHtml = createViewButtonHTMLGenerator(btn);
          $('#createViewFormPreviewContainerCard').find('.formBtn').append(buttonHtml);
          $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').find('.formBtn').append(buttonHtml);
        }
      }

      for (let btnN of buttonsNotSelected) {
        $('#createViewFormPreviewContainerCard').find('.form-row').find(`.form-buttons > input[value="${btnN}"]`).parent().remove();
        $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').find('.form-row').find(`.form-buttons > input[value="${btnN}"]`).parent().remove();
      }
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.formBtn').css('display','block');

      button_dic = []
      for(let i = 0; i < len; i++) {
        if (select_val[i] == 'Back') {
          button_dic.push(`<option value="button-id-back">Back (Button)</option>`)
        }
        if (select_val[i] == 'Save') {
          button_dic.push(`<option value="savebutton_">Save (Button)</option>`)
        }
        if(select_val[i] == 'Save as Draft') {
          button_dic.push(`<option data-draft="draft" value="saveDraftbutton_">Save as Draft (Button)</option>
            <option data-draft="draft" value="resetDraft_">Reset Draft (Button)</option>
            <option data-draft="draft" value="previewDraft_">Preview Draft (Button)</option>
          `)
        }
        if(select_val[i] == "Custom Validation") {
          button_dic.push(`<option value="customValidationList">Custom Validation (Button)</option>`)
        }
        if(select_val[i] == "Computed Value") {
          button_dic.push(`<option value="calculateComp">Computed Value (Button)</option>`)
        }
        if(select_val[i] == "Refresh Computation") {
          button_dic.push(`<option value="calculateComp">Refresh Computation (Button)</option>`)
        }
        if(select_val[i] == "Preview Mode") {
          button_dic.push(`<option value="calculateComp">Preview Mode (Button)</option>`)
        }
        if(select_val[i] == "View History") {
          button_dic.push(`<option value="viewHistory_">View History (Button)</option>`)
        }
        if(select_val[i] == "View Rejected Records") {
          button_dic.push(`<option value="rejectedRecords">Rejected records (Button)</option>`)
        }
        if(select_val[i] == "View Transactions" || select_val[i] == "View Transactions Status") {
          button_dic.push(`<option value="viewTransactions">View Transactions Status(Button)</option>`)
        }
        if(dic_cb.hasOwnProperty(select_val[i])){
          button_dic.push(`<option data-cb="cb" value="${select_val[i]}__cbbutton">${select_val[i]} (Button)</option>`);
        }
      }

      if(select_val.includes("View Rejected Records") || select_val.includes("View History") || select_val.includes("Save as Draft")){
        $("#createViewColumnAlignmentButton").css('display','block');
        if (!select_val.includes("View Rejected Records")) {
          $('#headingColumnAlignmentCVTwo').parent().css('display', 'none');
        } else {
          $('#headingColumnAlignmentCVTwo').parent().css('display', 'block');
        }
        if (!select_val.includes("View History")) {
          $('#headingColumnAlignmentCVOne').parent().css('display', 'none');
        } else {
          $('#headingColumnAlignmentCVOne').parent().css('display', 'block');
        }
        if (!select_val.includes("Save as Draft")) {
          $('#headingColumnAlignmentCVThree').parent().css('display', 'none');
        } else {
          $('#headingColumnAlignmentCVThree').parent().css('display', 'block');
        }
      }else{
        $("#createViewColumnAlignmentButton").css('display','none');
      }

      if(select_val.includes("View History")){
        $("#viewHistory_columnSelection").css('display','block')
        $("#viewHistory_columnSelection_forDisplay").css('display', 'block')
      }else{
        $("#viewHistory_columnSelection").css('display','none')
        $("#viewHistory_columnSelection_forDisplay").css('display', 'none')
      }

      if(select_val.includes("View Rejected Records")){
        $("#viewRejectedRecords_columnSelection_forDisplay").css('display', 'block')
      }else{
        $("#viewRejectedRecords_columnSelection_forDisplay").css('display', 'none')
      }

      if(select_val.includes("Save as Draft")){
        $("#viewDraft_columnSelection").css('display','block')
      }else{
        $("#viewDraft_columnSelection").css('display','none')
      }
    })
    $('#selectFormTemplate').on('change', selectFormTemplateChange)
    function selectFormTemplateChange() {

      let template_choice =  $(this).val();
      var selectedTables = $('#selectFormTable').val();

      if (template_choice == 'Comparable'){
        $('.fieldCard').attr('hidden',false);
        $('.constraintAggCard').attr('hidden', true);
        $('.constraintAggSelection').attr('hidden', true);
        $('.form_search_selected').css('display','none')
        $('#comparableAggCard').attr('hidden', false);
        $('#comparableCondCard').attr('hidden', false);
        $('#multiSelectPerSelection').attr('hidden', false);
        $('#multiSelectPerSelection').css('display', 'none');
        $('#flowhiddenCard').attr('hidden', true);
        $('.assetAggCard').attr('hidden', true);
        $('.assetAggSelection').attr('hidden', true);
        $.ajax({
        url: window.location.pathname,

        data: {
          'operation': 'comparableformTableFields',
          'tablesForm': JSON.stringify(selectedTables),
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          $('#periodSelection').empty();
          $('#selectCharColumn').empty();
          $('#ComparableNumList').empty();
          $('#selectedComparableNumList').empty();
          for (j in data.intFieldList) {
            $('#ComparableNumList').append(
              `<button type="button" class="comparableField list-group-item list-group-item-action list-group-item-light" value="${data.intFieldList[j]['fieldName']}" data-fieldType="${data.intFieldList[j]['fieldType']}">${data.fieldListVerbose[data.intFieldList[j]['fieldName']]}</button>`
            )
          }
          for (j in data.charFieldList) {
            $('#selectCharColumn').append(
              `<option class="columninput" value="${data.charFieldList[j]['fieldName']}">${data.fieldListVerbose[data.charFieldList[j]['fieldName']]}</option>`
            )
          }
          if(typeof(col_data) != "undefined")
        {
          $('#selectCharColumn').val(col_data).trigger("change")
          columnSelection = col_data
        }
        if(typeof(comparable) != undefined)
        {
        for (const [key, value] of Object.entries(comparable)) {
          if(value == "min")
          {
          $('#selectedComparableNumList').append(`<div class="row"><button class="comparableFieldSelected list-group-item list-group-item-action list-group-item-light col-7" value="${key}" data-toggle="dropdown" data-hover="dropdown" >${data.fieldListVerbose[key]}</button><select class="col-4 select2 form-control" style="float:left;"><option value="min" selected>Min</option><option value="max">Max</option><option value="mean">Mean</option></select></div>`)
          }
          else if(value == "max"){
            $('#selectedComparableNumList').append(`<div class="row"><button class="comparableFieldSelected list-group-item list-group-item-action list-group-item-light col-7" value="${key}" data-toggle="dropdown" data-hover="dropdown" >${data.fieldListVerbose[key]}</button><select class="col-4 select2 form-control" style="float:left;"><option value="min">Min</option><option value="max" selected>Max</option><option value="mean">Mean</option></select></div>`)
          }
          else if(value == "mean")
          {
            $('#selectedComparableNumList').append(`<div class="row"><button class="comparableFieldSelected list-group-item list-group-item-action list-group-item-light col-7" value="${key}" data-toggle="dropdown" data-hover="dropdown" >${data.fieldListVerbose[key]}</button><select class="col-4 select2 form-control" style="float:left;"><option value="min">Min</option><option value="max">Max</option><option value="mean" selected>Mean</option></select></div>`)
          }
          else{
            $('#selectedComparableNumList').append(`<div class="row"><button class="comparableFieldSelected list-group-item list-group-item-action list-group-item-light col-7" value="${fieldname}" data-toggle="dropdown" data-hover="dropdown" >${data.fieldListVerbose[fieldname]}</button><select class="col-4 select2 form-control" style="float:left;"><option value="" disabled selected>-----</option><option value="min">Min</option><option value="max">Max</option><option value="mean">Mean</option></select></div>`)
          }
          aggfuncprop = {
           "fieldname": key,
           "aggfunc": value
         }

         compareFields[key] = value;
         $("#selectedComparableNumList div").find("select").each(function () {
    $(this).select2()
          $(this).addClass("aggfunc")
        })
        $(".aggfunc").on("change", function(){
         let aggfunc = $(this).val();
         let fieldname = $(this).closest("div.row").find("button").val();
         let fieldverbosename = $(this).closest("div.row").find("button").text();
         aggfuncprop = {
           "fieldname": fieldname,
           "aggfunc": aggfunc
         }

         compareFields[fieldname] = aggfunc;
        })
        }
        }


          if (data.dateFieldList.length > 0){
            html = "";
            for (j in data.dateFieldList) {
              html += `<option class="columninput" value="${data.dateFieldList[j]['fieldName']}">${data.fieldListVerbose[data.dateFieldList[j]['fieldName']]}</option>`
            }
            $('#periodSelection').append('<label class="acies_label" for="periodCol">Period:&nbsp;</label><select id="selectPeriodCol" class="select2 form-control" name="periodColumn">'+'<option value="" disabled selected>-----------</option>'+ html +'</select>')

            $('#periodSelection').append(
            `<label class="acies_label">From:</label><input type="date" name="periodFrom" class="periodinput" id="periodFrom"><label class="acies_label">To:</label><input type="date" name="periodTo" class="periodinput" id="periodTo">`
            )
          $("#selectPeriodCol").val(pc1).trigger("change")

          periodSelection["period_col"] = pc1;
          $("#periodFrom").val(pf)
          periodSelection["periodFrom"] = pf;
          $("#periodTo").val(pt)
          periodSelection["periodTo"] = pt;
          } else {
            $('#periodSelection').empty()
          }
          $('.comparableField').click(selectedComparableField)

          $('#selectPeriodCol').on('change', function(){
            periodSelection["period_col"] = $(this).val();
          })
          $('.periodinput').on('change', function(){
            period_type = $(this).attr("id");
            periodSelection[period_type] = $(this).val();
          })
          $('#selectCharColumn').on('change', function(){
            columnSelection = $(this).val();
          })

        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      });
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).removeClass('row')
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').removeClass('col-9');
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.search').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).append(`<form method="post" id="uploadCSVForm_whiteSpacewrap09135620292272231" class="comparableTemp" enctype="multipart/form-data" data-form-id="uploadfileformwhiteSpacewrap09135620292272231">    <input type="hidden" name="csrfmiddlewaretoken" value="5AcjuBDczFvzoo3YIen5LdvVzRJ1SWFcTVWVyIh3SGdrHbsfcLBNmNkMGcZO6SAE">    <label for="uploadFileInput">Upload file</label>
                 <div class="col-3 custom-file mr-4">
                          <input type="file" id="uploadFileInput_whiteSpacewrap09135620292272231" class="custom-file-input" data-file-id="whiteSpacewrap09135620292272231" name="uploadFileInput" style="border-bottom-color:white; width:430px" accept=".csv">
                          <label id="c1" class="custom-file-label selected"></label>
                          </div>
                <input type="hidden" name="operation" value="uploadCSVInput">
                <input type="hidden" name="context_dict">
                  <input type="hidden" name="columnmapperDict" id="columnmapperDictwhiteSpacewrap09135620292272231" value="" data-save-config="" data-element_id="columnmapperDictwhiteSpacewrap09135620292272231">
                  <input type="hidden" name="tables_name_comp" class="upload_tables_comp" value="">

                <input type="hidden" name="element_id" value="whiteSpacewrap09135620292272231">
                <button id="uploadCSVBtn_whiteSpacewrap09135620292272231" class="buttonstyling acies_btn acies_btn-primary" style="margin-right:4px">Upload and Compare</button>
                 <button name="ColumnMapper" type="button" class="btn btn-primary rounded columnMapperButton" data-table-name="" data-toggle="modal" data-target="#columnMapperModalwhiteSpacewrap09135620292272231" data-elementid="whiteSpacewrap09135620292272231">Map Columns</button>
                <button id="savefiledata_whiteSpacewrap09135620292272231" class="btn btn-primary  rounded ">Save</button>
            </form>
        `)
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.multiselect').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.box').css('display','block');
        $('#createViewModal').find('.card-body').find('.formTempContainer').eq(0).find('.card-body').removeClass('row')
        $('.compareWithExisting').css('display','block');
    }
      else if (template_choice == 'Create view with search'){
        $('.compareWithExisting').css('display','none');
        $('.fieldCard').attr('hidden',false);
        $('.form_search_selected').css('display','flex')
        $('#comparableAggCard').attr('hidden', true);
        $('#comparableCondCard').attr('hidden', true);
        $('#multiSelectPerSelection').attr('hidden', true);
        $('.constraintAggCard').attr('hidden', true);
        $('.constraintAggSelection').attr('hidden', true);
        $('.assetAggCard').attr('hidden', true);
        $('.assetAggSelection').attr('hidden', true);
        $('#flowhiddenCard').attr('hidden', true);
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.comparableTemp').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).addClass('row')
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').addClass('col-9');
        if ($('.dragContainer').find('.formTempContainer').find('.card-body').find('.formBtn > .row').length) {
          var dummy = $('.dragContainer').find('.formTempContainer').find('.card-body').find('.formBtn > .row').html()
        } else {
          var dummy = $('.dragContainer').find('.formTempContainer').find('.card-body').find('.formBtn').html()
        }
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.formBtn').remove()
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).append(`<div class="col-3 search">
          <div class="card">
            <div class="card-header">
              <h6 class="card-title" style="color:var(--primary-color);">Search results</h6>
              </div>
              <div class="card-body search_results_display" style="overflow-y:scroll;">
                </div>
                </div>
                </div>`);
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.multiselect').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.box').css('display','block');
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).append(`<div class="row formBtn">${dummy}</div>`)
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.formBtn').css('display','none')
        $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').addClass('row');
      }
      else if(template_choice == 'Constraint'){
        $('.compareWithExisting').css('display','none');
        $('.fieldCard').attr('hidden',true);
        $('.form_search_selected').css('display','flex');
        $('.constraintAggCard').attr('hidden', false);
        $('.constraintAggSelection').attr('hidden', false);
        $('#multiSelectPerSelection').attr('hidden', true);
        $('#comparableAggCard').attr('hidden', true);
        $('#comparableCondCard').attr('hidden', true);
        $('#flowhiddenCard').attr('hidden', true);
        $('.assetAggCard').attr('hidden', true);
        $('.assetAggSelection').attr('hidden', true);
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).removeClass('row')
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').removeClass('col-9');
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.search').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.comparableTemp').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.multiselect').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.box').css('display','block');
        verbosess()

      }
      else if(template_choice == 'Asset Grouping'){
        $('.compareWithExisting').css('display','none');
        $('.fieldCard').attr('hidden',true);
        $('.form_search_selected').css('display','flex');
        $('.assetAggCard').attr('hidden', false);
        $('.assetAggSelection').attr('hidden', false);
        $('.constraintAggCard').attr('hidden', true);
        $('.constraintAggSelection').attr('hidden', true);
        $('#multiSelectPerSelection').attr('hidden', true);
        $('#comparableAggCard').attr('hidden', true);
        $('#comparableCondCard').attr('hidden', true);
        $('#flowhiddenCard').attr('hidden', true);
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).removeClass('row')
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').removeClass('col-9');
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.search').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.comparableTemp').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.multiselect').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.box').css('display','block');

        }

      else if(template_choice == 'Flow Definition'){
        $('.compareWithExisting').css('display','none');
        $('.fieldCard').attr('hidden',false);
        $('.form_search_selected').css('display','flex');
        $('.constraintAggCard').attr('hidden', true);
        $('.constraintAggSelection').attr('hidden', true);
        $('#multiSelectPerSelection').attr('hidden', true);
        $('#comparableAggCard').attr('hidden', true);
        $('#comparableCondCard').attr('hidden', true);
        $('#flowhiddenCard').attr('hidden', false);
        $('.assetAggCard').attr('hidden', true);
        $('.assetAggSelection').attr('hidden', true);
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).removeClass('row')
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').removeClass('col-9');
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.search').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.comparableTemp').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.multiselect').remove();
        $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').removeClass('row')
      }

      else {
        $('.compareWithExisting').css('display','none');
        $('.fieldCard').attr('hidden',false);
        $('#comparableAggCard').attr('hidden', true);
        $('#comparableCondCard').attr('hidden', true);
        $('.form_search_selected').css('display','none')
        $('#multiSelectPerSelection').attr('hidden', true);
        $('.constraintAggCard').attr('hidden', true);
        $('.constraintAggSelection').attr('hidden', true);
        $('#flowhiddenCard').attr('hidden', true);
        $('.assetAggCard').attr('hidden', true);
        $('.assetAggSelection').attr('hidden', true);
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).removeClass('row')
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').removeClass('col-9');
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.search').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.comparableTemp').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.multiselect').remove();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.box').css('display','block');
        $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').removeClass('row')
      }
    };

    var constraint_not_required_columns =[]
       function verbosess(){
        let url_string = window.location.pathname
        let f_occ = url_string.indexOf('/', url_string.indexOf('/') + 1)
        let s_occ = url_string.indexOf('/', url_string.indexOf('/') + f_occ +1)
        let t_occ = url_string.indexOf('/', url_string.indexOf('/') + s_occ +1)
        let app_code2 = url_string.substring(f_occ+1,s_occ)
        let current_dev_mode2 = url_string.substring(s_occ+1,t_occ)
        let modes = ["Build","Edit"]
        let url = ""
        if(current_dev_mode2 != "Build" && current_dev_mode2 != "Edit"){
          current_dev_mode2 = "User"
        }
        $('#selectFormTable').on('change',function(){
          constraint_not_required_columns =[]
          var tableName =$(this).val()
              $.ajax({
                      url: `/users/${app_code2}/${current_dev_mode2}/constriant_get_data/`,
                      data: {
                          'table_name':tableName[0],
                          'operation': 'fetch_verbose_name',
                      },
                      type: "POST",
                      dataType: "json",
                      success: function (data) {
                        delete data['verboseList'][0]['id']
                        delete data['verboseList'][0]['table_name']
                        delete data['verboseList'][0]['constraint_parameter']
                        delete data['verboseList'][0]['constraint_parameter_value']
                        delete data['verboseList'][0]['constraint_type']
                         delete data['verboseList'][0]['created_by']
                         delete data['verboseList'][0]['created_date']
                         delete data['verboseList'][0]['modified_by']
                         delete data['verboseList'][0]['modified_date']
                         verbose_data = data['verboseList'][0]


                        $('.selectFields_constraint').empty()
                        $('.selectFields_constraint').html(`<option value="use_case"></option>
                    <option value="rule_set"> </option>
                    <option value="constraint_name"> </option>
                    <option value="unique_constraint_column"></option>
                    <option value="condition_datatype"></option>
                    <option value="condition"></option>
                    <option value="threshold"></option>
                    <option value="applicability_status"></option>`)

                    for (const v in verbose_data) {

                          $('.selectFields_constraint').find('option').each(function(){

                            var valuer = $(this).val()
                            if(valuer in verbose_data){
                              if(valuer === v){
                                $(this).text(verbose_data[valuer])
                              }
                            }else{
                              var valuer = $(this).val()
                              constraint_not_required_columns.push(valuer)
                              $(`.selectFields_constraint option[value='${valuer}']`).remove();
                            }
                          })

                        }




                      },
                      error: function () {
                      }

  })
        })
       }


  function addElementToConstraint(){
    $('.add_constraint').off("click").on("click",function(){
      $(".add_tables").append(`
      <div  class="row" style="margin-top:5px;">
              <div class="col-5">
                <div class="constraintAggSelection list-group"  style ="max-height:200px;overflow-y:auto;">
                  <input class="constraint_name form-control p-2"  style="padding-left:4px;" placeholder="Enter Constraint Name">
                </div>
              </div>
              <div class="col-5">
                <div class="constraintAggSelection list-group"  style ="max-height:200px;overflow-y:auto" >
                  <select  class="constraint_type select2  form-control p-2" name="templateform">
                    <option value=""  selected style="color:lightgrey;" disabled>Select Constraint Type</option>
                    <option value="Array">Array</option>
                    <option value="Individual">Individual</option>
                    <option value="Grouped">Grouped</option>
                  </select>
                </div>
              </div>
              <div class="col-1" style="margin-top:2px;">
                <a href="#"  class="remove_div remove_filter fa fa-times" style="color:var(--primary-color);"></a>
              </div>
      </div>
      `)
       $(".add_tables").find('.row').eq(-1).find('.constraintAggSelection').find('select').each(function(){
    $(this).select2();


    $(".add_tables").on("click", ".remove_div", function() {
        $(this).closest('.row').remove();
      });
  })

    })
  }

  addElementToConstraint();




    $('.comparableField').click(selectedComparableField)

    function selectedComparableField() {
      fieldname = $(this).val()
      fieldtype = $(this).attr('data-fieldtype')
      fieldverbosename =$(this).text()
      $("#selectedFormfieldList").empty()
      $('#selectedComparableNumList').append(
      `
      <div class="row"><button class="comparableFieldSelected list-group-item list-group-item-action list-group-item-light col-7" value="${fieldname}" data-toggle="dropdown" data-hover="dropdown" >${fieldverbosename}</button><select class="aggfunc col-4 select2 form-control" style="float:left;"><option value="" disabled selected>-----</option><option value="min">Min</option><option value="max">Max</option><option value="mean">Mean</option></select></div>
      ` )
      $("#selectedComparableNumList div").find("select").each(function () {
    $(this).select2()
        })
        $(".aggfunc").on("change", function(){
         let aggfunc = $(this).val();
         let fieldname = $(this).closest("div.row").find("button").val();
         aggfuncprop = {
           "fieldname": fieldname,
           "aggfunc": aggfunc
         }

         compareFields[fieldname] = aggfunc;
        })

       $('.comparableFieldSelected').click(function () {
         let element = $(this).closest("div.row");
         for (key in compareFields) {
           if (key == $(this).val()) {
             delete compareFields[key];
             break;
           }
         }
         element.remove()

       });
    }
var htmlCascade
// Add the following code if you want the name of the file appear on select
var stylingJsValidationColorCond = function() {
  if($(this).val() == "In") {
    $(this).parent().parent().find(".stylingJsValidationColorVal").css("display","none");
    $(this).parent().parent().find(".stylingJsValidationColorValTag").css("display","block");
    $(this).parent().parent().find(".stylingJsValidationColorVal").find("select").select2({tags:true})
    $(this).parent().parent().find(".stylingJsValidationColorValTag").find("select").select2({tags:true})
    if($(this).closest(".multipleJs").find(".selectJSproperty").val() == "Validation based message"){
      $(this).parent().parent().find(".stylingJsValidationColorCol").select2({tags:true})
    }
  } else {
    $(this).parent().parent().find(".stylingJsValidationColorValTag").css("display","none");
    $(this).parent().parent().find(".stylingJsValidationColorVal").css("display","block");
    $(this).parent().parent().find(".stylingJsValidationColorVal").find("select").select2({tags:true})
    $(this).parent().parent().find(".stylingJsValidationColorValTag").find("select").select2({tags:true})
    if($(this).closest(".multipleJs").find(".selectJSproperty").val() == "Validation based message"){
      $(this).parent().parent().find(".stylingJsValidationColorCol").select2({tags:true})
    }
  }
}
var stylingJsPropertySelect = function() {
  if($(this).val() == "Border") {
    $(this).closest('.stylingJs').find('.stylingJsBorder').css('display','flex');
    $(this).closest('.stylingJs').find('.stylingJsValidationColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsFieldColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsHover').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsInstruction').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsDetails').css('display','none');
    $(this).closest('.stylingJs').find('.stylingMandatoryDetails').css('display','none');
  } else if($(this).val() == "Validation color") {
    $(this).closest('.stylingJs').find('.stylingJsBorder').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsValidationColor').css('display','flex');
    $(this).closest('.stylingJs').find('.stylingJsFieldColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsHover').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsInstruction').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsDetails').css('display','none');
    $(this).closest('.stylingJs').find('.stylingMandatoryDetails').css('display','none');
  } else if($(this).val() == "Field color") {
    $(this).closest('.stylingJs').find('.stylingJsBorder').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsValidationColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsFieldColor').css('display','flex');
    $(this).closest('.stylingJs').find('.stylingJsHover').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsInstruction').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsDetails').css('display','none');
    $(this).closest('.stylingJs').find('.stylingMandatoryDetails').css('display','none');
  } else if($(this).val() == "Hover") {
    $(this).closest('.stylingJs').find('.stylingJsBorder').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsValidationColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsFieldColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsHover').css('display','flex');
    $(this).closest('.stylingJs').find('.stylingJsInstruction').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsDetails').css('display','none');
    $(this).closest('.stylingJs').find('.stylingMandatoryDetails').css('display','none');
  } else if($(this).val() == "Instruction") {
    $(this).closest('.stylingJs').find('.stylingJsBorder').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsValidationColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsFieldColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsHover').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsInstruction').css('display','flex');
    $(this).closest('.stylingJs').find('.stylingJsDetails').css('display','none');
    $(this).closest('.stylingJs').find('.stylingMandatoryDetails').css('display','none');
  } else if($(this).val() == "Details") {
    $(this).closest('.stylingJs').find('.stylingJsBorder').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsValidationColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsFieldColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsHover').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsInstruction').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsDetails').css('display','flex');
    $(this).closest('.stylingJs').find('.stylingMandatoryDetails').css('display','none');
  }  else if($(this).val() == "Mandatory") {
    $(this).closest('.stylingJs').find('.stylingJsBorder').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsValidationColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsFieldColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsHover').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsInstruction').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsDetails').css('display','none');
    $(this).closest('.stylingJs').find('.stylingMandatoryDetails').css('display','flex');
  } else {
    $(this).closest('.stylingJs').find('.stylingJsBorder').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsValidationColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsFieldColor').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsHover').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsInstruction').css('display','none');
    $(this).closest('.stylingJs').find('.stylingJsDetails').css('display','none');
    $(this).closest('.stylingJs').find('.stylingMandatoryDetails').css('display','none');
  }
}
function boolean_field_sliders_stylling_onchange(obj){
  if ($(obj).val() == 'text_silder'){
    $(obj).closest('.boolean_field_sliders_stylling').find('.boolean-silder').css('display','none');
    $(obj).closest('.boolean_field_sliders_stylling').find('.boolean-text-silder-text').css('display','flex');
    $(obj).closest('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-selected').css('display','flex');
    $(obj).closest('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-not-selected').css('display','flex');
  }else{
    $(obj).closest('.boolean_field_sliders_stylling').find('.boolean-silder').css('display','flex');
    $(obj).closest('.boolean_field_sliders_stylling').find('.boolean-text-silder-text').css('display','none');
    $(obj).closest('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-selected').css('display','none');
    $(obj).closest('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-not-selected').css('display','none');
  }
}
function booleanTextAlignFieldTypeSettings(obj){
  if($(obj).val() =='both_sides'){
    $(obj).closest('.boolean-silder').find('.boolean-text-left').css('display','');
    $(obj).closest('.boolean-silder').find('.boolean-text-right').css('display','');
  }else if($(obj).val() =='left_side'){
    $(obj).closest('.boolean-silder').find('.boolean-text-left').css('display','');
    $(obj).closest('.boolean-silder').find('.boolean-text-right').css('display','none');
  }else if ($(obj).val() =='right_side'){
    $(obj).closest('.boolean-silder').find('.boolean-text-left').css('display','none');
    $(obj).closest('.boolean-silder').find('.boolean-text-right').css('display','');
  }
  $(obj).closest('.boolean-silder').find('.boolean-text-left').find('input').val($('#selectField').find("option:selected").attr('verbose-name')).trigger('change');
  $(obj).closest('.boolean-silder').find('.boolean-text-right').find('input').val($('#selectField').find("option:selected").attr('verbose-name')).trigger('change');
}
var addForeignKeyCond = function() {
  var html = `
    <div class="subCont col-12" style="display:flex; margin-top: 10px">
      <div class="col-3">
        <p style="font-weight: bold;">Select Condition Column</p>
        <select class="select2 form-control selectparentcolumnCond" name="selectparentcolumnCond" >
        </select>
      </div>
      <div class="col-2">
        <p style="font-weight: bold;">Select condition:</p>
        <select class="select2 form-control foreignKeyCond" required onchange="foreignKeyCond.call(this)">
          <option value="Greater then">Greater than</option>
          <option value="Smaller then">Smaller than</option>
          <option value="Equal to">Equal to</option>
          <option value="Not Equal to">Not Equal to</option>
          <option value="In">In</option>
        </select>
      </div>
      <div class="col-2 foreignKeyCondVal">
        <p style="font-weight: bold;">Select value:</p>
        <select class="select2 form-control" required>
        </select>
      </div>
      <div class="col-2 foreignKeyCondValTag" style="display: none;">
        <p style="font-weight: bold;">Select value:</p>
        <select class="select2 form-control" required multiple>
        </select>
      </div>
      <div class="col-2">
        <p style="font-weight: bold;">Select value:</p>
        <select class="select2 form-control foreignKeyDynamicVal">
          <option value="" selected>Select value</option>
          <option value="curr_user">Current User</option>
          <option value="curr_date">Current Date</option>
        </select>
      </div>
      <div class="col-2">
        <p style="font-weight: bold;">Constraint</p>
        <input class="form-control foreignKeyConstraint" type="text">
      </div>
      <div class="col-1">
        <p style="font-weight: bold;">Rule set:</p>
        <input class="form-control foreignKeySet" type="text">
      </div>
      <div class="col-1">
        <i class="fas fa-minus" onclick="removeForeignKeyCond.call(this)" data-toggle="tooltip" title="Remove condition"></i> </i>
      </div>
    </div>
  `
  let optionsObject = {};
  $(this).closest('.foreignKeyCondCont').find('.subCont').eq(0).find('.selectparentcolumnCond > option').each(function() {
    optionsObject[$(this).val()] = $(this).text();
  })
  $(this).closest('.foreignKeyCondCont').append(html);
  $(this).closest('.foreignKeyCondCont').find('.subCont').eq(-1).find('.foreignKeyCondValTag').find('select').select2({'tags':true});
  $(this).closest('.foreignKeyCondCont').find('.subCont').eq(-1).find('.foreignKeyCondVal').find('select').select2({'tags':true});
  for (let [key, value] of Object.entries(optionsObject)) {
    $(this).closest('.foreignKeyCondCont').find('.subCont').eq(-1).find('.selectparentcolumnCond').append(`<option value='${key}'>${value}</option>`);
  }
  $(this).closest('.foreignKeyCondCont').find('.subCont').eq(-1).find('select').each(function(){

    $(this).select2()
  });
}

var removeForeignKeyCond = function() {
  $(this).parent().parent().remove()
}

var addFKMasterCond = function(type="") {
  if(type == "master"){
    var html = `
      <div class="subMasterCont col-12" style="display:flex;padding-top: 1rem;">
        <div class="col-3">
          <select  class="select2 form-control fk-master-table" onchange="getColumnsMaster.call(this)">
            <option value="" selected disabled>Select master table</option>
            {% for i in tableList%}
              <option value="{{i}}">{{i}}</option>
            {%endfor%}
          </select>
        </div>
        <div class="col-2">
          <select class="select2 form-control selectparentcolumnMasterCond">
            <option value="" selected>Select Condition Column</option>
          </select>
        </div>
        <div class="col-2">
          <select class="select2 form-control foreignKeyMasterCond" required>
            <option value="Greater then">Greater than</option>
            <option value="Smaller then">Smaller than</option>
            <option value="Equal to">Equal to</option>
            <option value="Not Equal to">Not Equal to</option>
          </select>
        </div>
        <div class="col-2 foreignKeyMasterCondVal">
          <select class="select2 form-control foreignKeyMasterCondValSel">
          </select>
        </div>
        <div class="col-2">
          <select class="select2 form-control selectparentreturncolumnMasterCond">
            <option value="" selected>Select Column</option>
          </select>
        </div>
        <div class="col-2">
          <select class="select2 form-control selectreturnMasterCond">
            <option value="" selected>Select Column</option>
          </select>
        </div>
        <div class="col-1">
          <input class="form-control foreignKeyMasterConstraint" type="text">
        </div>
        <div class="col-1">
          <input class="form-control foreignKeyMasterSet" type="text">
        </div>
        <div class="col-1">
          <i class="fas fa-minus" onclick="removeForeignKeyMasterCond.call(this)" data-toggle="tooltip" title="Remove condition"></i> </i>
        </div>
      </div>
    `

    $(this).parent().parent().find('.foreignKeyMasterCont').append(html);

    for(let i = 0; i < allFieldsColumns.length; i++){
      $(this).parent().parent().find('.foreignKeyMasterCont').find('.subMasterCont').eq(-1).find('.foreignKeyMasterCondValSel').append(`<option value='${allFieldsColumns[i]}'>${verboseName[i]}</option>`);
    }

    $(this).parent().parent().find('.foreignKeyMasterCont').find('.subMasterCont').eq(-1).find('.fk-master-table').select2();
    $(this).parent().parent().find('.foreignKeyMasterCont').find('.subMasterCont').eq(-1).find('.selectparentcolumnMasterCond').select2();
    $(this).parent().parent().find('.foreignKeyMasterCont').find('.subMasterCont').eq(-1).find('.selectparentreturncolumnMasterCond').select2();
    $(this).parent().parent().find('.foreignKeyMasterCont').find('.subMasterCont').eq(-1).find('.foreignKeyMasterCond').select2();

    $(this).parent().parent().find('.foreignKeyMasterCont').find('.subMasterCont').eq(-1).find('.foreignKeyMasterCondValSel').select2();
    $(this).parent().parent().find('.foreignKeyMasterCont').find('.subMasterCont').eq(-1).find('.selectreturnMasterCond').select2();
  }else if(type == "colb"){
    var html = `
            <div class="subColBasedCont col-12" style="display:flex;padding-top: 1rem;">
              <div class="col-3">
                <select class="select2 form-control foreignKeyColBasedCurrCol" onchange="getColumnsMaster1.call(this)">
                  <option value="" selected disabled>Select one</option>
                </select>
              </div>
              <div class="col-3">
                <select class="select2 form-control foreignKeyColBasedCond" required>
                  <option value="Greater then">Greater than</option>
                  <option value="Smaller then">Smaller than</option>
                  <option value="Equal to">Equal to</option>
                  <option value="Not Equal to">Not Equal to</option>
                </select>
              </div>
              <div class="col-3">
                <select class="select2 form-control foreignKeyColBasedReturnCol">
                </select>
              </div>
              <div class="col-1">
                <input class="form-control foreignKeyColBasedConstraint" type="text">
              </div>
              <div class="col-1">
                <input class="form-control foreignKeyColBasedSet" type="text">
              </div>
              <div class="col-1">
                <i class="fas fa-minus" onclick="removeForeignKeyMasterCond.call(this)" data-toggle="tooltip" title="Remove condition"></i> </i>
              </div>
            </div>
    `

    $(this).parent().parent().find('.foreignKeyColBasedCont').append(html);

    for(let i = 0; i < allFieldsColumns.length; i++){
      $(this).parent().parent().find('.foreignKeyColBasedCont').find('.subColBasedCont').eq(-1).find('.foreignKeyColBasedCurrCol').append(`<option value='${allFieldsColumns[i]}'>${verboseName[i]}</option>`);
    }

    $(this).parent().parent().find('.foreignKeyColBasedCont').find('.subColBasedCont').eq(-1).find('.foreignKeyColBasedCurrCol').select2();
    $(this).parent().parent().find('.foreignKeyColBasedCont').find('.subColBasedCont').eq(-1).find('.foreignKeyColBasedReturnCol').select2();
    $(this).parent().parent().find('.foreignKeyColBasedCont').find('.subColBasedCont').eq(-1).find('.foreignKeyColBasedCond').select2();

  }

}

var removeForeignKeyMasterCond = function() {
  $(this).parent().parent().remove()
}

var stylingJsValidationColorAdd = function() {
  var html = `
<div class="stylingJsValidationColorCont" style="width: 100%; display:flex">
  <div class="col-3">
    <p style="font-weight: bold;">Select condition:</p>
    <select class="select2 form-control stylingJsValidationColorCond" required onchange="stylingJsValidationColorCond.call(this)">
      <option value="Greater then">Greater than</option>
      <option value="Smaller then">Smaller than</option>
      <option value="Equal to">Equal to</option>
      <option value="In">In</option>
    </select>
  </div>
  <div class="col-3 stylingJsValidationColorVal">
    <p style="font-weight: bold;">Select value:</p>
    <select class="select2 form-control" required>
    </select>
  </div>
  <div class="col-3 stylingJsValidationColorValTag" style="display: none;">
    <p style="font-weight: bold;">Select value:</p>
    <select class="select2 form-control" required multiple>
    </select>
  </div>
  <div class="col-3">
    <p style="font-weight: bold;">Select fields to change color:</p>
    <select class="select2 form-control stylingJsValidationColorCol" required multiple>
  </select>
  </div>
  <div class="col-2">
    <p style="font-weight: bold;">Select field color:</p>
    <input type="color" class="form-control stylingJsValidationColorInput" data-css="background-color" required>
  </div>
  <div class="col-1">
    <i class="fas fa-minus" onclick="stylingJsValidationColorRemove.call(this)" data-toggle="tooltip" title="Add condition"></i> </i>
  </div>
</div>
  `
  $(this).closest(".stylingJsValidationColor").append(html);
  $(this).closest(".stylingJsValidationColor").find('.stylingJsValidationColorCont').eq(-1).find('select').each(function() {
    $(this).select2();
    $(this).closest(".stylingJsValidationColorVal").find('select').select2({tags:true})
    $(this).closest(".stylingJsValidationColorValTag").find('select').select2({tags:true})
  })
  if($(this).closest(".multipleJs").find(".selectJSproperty").val() != "Validation based message"){
    for(let i = 0; i < allFieldsColumns.length; i++){
      $(this).closest(".stylingJsValidationColor").find('.stylingJsValidationColorCont').eq(-1).find(".stylingJsValidationColorCol").append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`)
    }
    appendButton($(this).closest(".stylingJsValidationColor").find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorCol'))
  }
  else{
    $(this).closest(".stylingJsValidationColor").find('.stylingJsValidationColorCont').eq(-1).find(".stylingJsValidationColorCol").select2({tags:true})
  }
}
var stylingJsValidationColorRemove = function() {
  $(this).closest(".stylingJsValidationColorCont").remove();
}
var stylingJs = function() {
  var val = $("#selectField").val();
  var type = $(this).closest(".stylingJsPropertySelect").val()
  var type = $(this).parent().parent().parent().parent().find(".stylingJsPropertySelect").val()
  if(type == "Border") {
    $(this).attr("data-css");
    if($(this).attr("data-css") == "border-width") {
      var px = $(this).parent().find("select").val()
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).parent().css(`${$(this).attr("data-css")}`,`${$(this).val()}${px}`);
    } else {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).parent().css(`${$(this).attr("data-css")}`,`${$(this).val()}`);
    }
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).parent().css(`border-radius`,`5px`);
  } else if (type == "Field color") {
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('input').css(`${$(this).attr("data-css")}`,`${$(this).val()}`);
    if($('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('input').attr('type') == 'file' || $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('input').attr('type') == 'image') {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('input').parent().find('label').css(`${$(this).attr("data-css")}`,`${$(this).val()}`);
    }
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('textarea').css(`${$(this).attr("data-css")}`,`${$(this).val()}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('select').css(`${$(this).attr("data-css")}`,`${$(this).val()}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('input').parent().css(`${$(this).attr("data-css")}`,`${$(this).val()}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('textarea').parent().css(`${$(this).attr("data-css")}`,`${$(this).val()}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('select').parent().css(`${$(this).attr("data-css")}`,`${$(this).val()}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('input').parent().css('border-radius','5px');
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('textarea').parent().css('border-radius','5px');
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('select').parent().css('border-radius','5px');
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('input').css('border-radius','5px');
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('textarea').css('border-radius','5px');
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('select').css('border-radius','5px');
  } else if (type == "Validation color") {

  } else if (type == "Hover") {
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).parent().attr(`${$(this).attr("data-css")}`,`tooltip`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).parent().attr(`title`,`${$(this).val()}`);
  } else if (type == "Instruction") {
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('span').remove();
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('small').remove();
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).append(`<small class="form-text text-muted">${$(this).val()}</small>`)
  } else if (type == "Details") {
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('span').remove();
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find('button').remove();
    var tcolor = $(this).parent().children().closest('.stylingJsDetailsColorInput').val()
    var txt = $(this).parent().children().closest('.stylingJsDetailsInput').val()
    if (txt != "") {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).prepend(`
      <button style="color:${tcolor}" type="button" class="btn btn-link fa fa-info-circle popoverclass float-right" data-container="body" data-toggle="popover" data-placement="top" data-content="${txt}" data-original-title="" title=""></button>`)
    }
    $('.popoverclass').popover({
      trigger: 'focus'
    })
  } else if (type == "Mandatory") {
    // if ($(this).parent().children().closest(".stylingJsMandatoryInput").is(":checked")) {
    //   $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find("label").text(val)
    //   $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val).find("label").text(val+"*")
    // }
  }
}
$(".custom-file-input").on("change", function() {
  var fileName = $(this).val().split("\\").pop();
  $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
});
var formLevelFieldAdd = function() {
  var htmlForm  = `
  <div class="row configCont createManually" style="padding:15px">
    <div class="col-3">
      <select class="select2 form-control formLevelFieldCond" required onchange="formLevelFieldChangeCond.call(this)">
        <option value="Greater then">Greater than</option>
        <option value="Smaller then">Smaller than</option>
        <option value="Equal to">Equal to</option>
        <option value="Not Equal to">Not Equal to</option>
        <option value="In">In</option>
        <option value="Not In">Not In</option>
      </select>
    </div>
    <div class="col-4 formLevelFieldVal">
      <select class="select2 form-control" required>
      </select>
    </div>
    <div class="col-4 formLevelFieldValTag" style="display: none;">
      <select class="select2 form-control" required multiple>
      </select>
    </div>
    <div class="col-4">
      <select class="select2 form-control formLevelFieldCol" required multiple>
    </select>
    </div>
    <div class="col-1">
      <i class="fas fa-remove" onclick="formLevelFieldRemove.call(this)" style="margin-top:5px"></i>
    </div>
  </div>
  `
  $(this).parent().parent().parent().append(htmlForm);
  $(this).parent().parent().parent().find('.configCont').eq(-1).find('.formLevelFieldCol').select2()
  $(this).parent().parent().parent().find('.configCont').eq(-1).find('.formLevelFieldCond').select2()
  $(this).parent().parent().parent().find('.configCont').eq(-1).find('.formLevelFieldCol').parent().find('.select2-container').css('max-height','6rem')
  $(this).parent().parent().parent().find('.configCont').eq(-1).find('.formLevelFieldCol').parent().find('.select2-container').css('overflow-y','scroll')
  for(let i = 0; i < allFieldsColumns.length; i++) {
    $(this).parent().parent().parent().find('.configCont').eq(-1).find('.formLevelFieldCol').append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`)
  }
  appendButton($(this).parent().parent().parent().find('.configCont').eq(-1).find('.formLevelFieldCol'))
  $(this).parent().parent().parent().find('.configCont').eq(-1).find('.formLevelFieldVal').find('select').select2({tags:true})
  $(this).parent().parent().parent().find('.configCont').eq(-1).find('.formLevelFieldValTag').find('select').select2({tags:true})
}
var formLevelFieldMasterTable = function() {
  let thiss = $(this)
  var curr = $(this).parent().parent();
  $.ajax({
      url: window.location.pathname,
      data: {
        'operation': 'formTableFields',
        'tablesForm':JSON.stringify([$(this).val()]),
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        curr.find('.formLevelFieldColName').find('select').empty()
        curr.find('.formLevelFieldColName').find('select').append(`<option value"">---</option>`)
        for(j in data.finalFieldList){
          if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from') {
            curr.find('.formLevelFieldColName').find('select').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
          }
        }
        if(thiss.attr("data-reload") == "yes") {
          let data1 = JSON.parse(thiss.attr("data-reloaddata"))
          let k_ = thiss.attr("data-k")
          let r_ = thiss.attr("data-r")
          thiss.removeAttr("data-reloaddata")
          thiss.removeAttr("data-reload")
          thiss.removeAttr("data-k")
          thiss.removeAttr("data-r")
          formLevelFieldMasterTableLoad(data1,k_,r_)
        }
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
  })
}
var formLevelFieldActions = function() {
  if ($(this).val() == "Create manually") {
    $(this).parent().parent().parent().find('.createManually').css('display','flex')
    $(this).parent().parent().parent().find('.linkToSourceTable').css('display','none')
    $(this).parent().parent().parent().find('.uploadCondition').css('display','none')
  } else if($(this).val() == "Upload") {
    $(this).parent().parent().parent().find('.createManually').css('display','none')
    $(this).parent().parent().parent().find('.linkToSourceTable').css('display','none')
    $(this).parent().parent().parent().find('.uploadCondition').css('display','block')
  } else if($(this).val() == "Link to source table") {
    $(this).parent().parent().parent().find('.linkToSourceTable').css('display','flex')
    $(this).parent().parent().parent().find('.createManually').css('display','none')
    $(this).parent().parent().parent().find('.uploadCondition').css('display','none')
  } else {
    $(this).parent().parent().parent().find('.createManually').css('display','none')
    $(this).parent().parent().parent().find('.uploadCondition').css('display','none')
    $(this).parent().parent().parent().find('.linkToSourceTable').css('display','none')
  }
}
var downloadConditionClassBtn = function() {
  //create CSV file data in an array
    var csvFileData = [
      ['', '','']
    ];

    //define the heading for each row of the data
    var csv = 'condition,value,selected-column\n';

    //merge the data with CSV
    csvFileData.forEach(function(row) {
            csv += row.join(',');
            csv += "\n";
    });
    var hiddenElement = document.createElement('a');
    hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURI(csv);
    hiddenElement.target = '_blank';
    hiddenElement.download = 'data.csv';
    hiddenElement.click();
}
var uploadConditionClassBtn = function() {
  let formData = new FormData($(this).parent().parent().find('form.uploadCondition')[0]);
  formData.append("show-hide_file", $(this).parent().parent().find("input[name='show-hide_file']").val());
  formData.append("operation", "show-hideFileUpload");
  $(this).parent().parent().find("input[type='file']").val('').trigger('change')
  var current = $(this).parent().parent().parent()
  var htmlForm  = `
    <div class="row configCont createManually" style="padding:15px">
      <div class="col-3">
        <select class="select2 form-control formLevelFieldCond" required onchange="formLevelFieldChangeCond.call(this)">
          <option value="Greater then">Greater than</option>
          <option value="Smaller then">Smaller than</option>
          <option value="Equal to">Equal to</option>
          <option value="Not Equal to">Not Equal to</option>
          <option value="In">In</option>
          <option value="Not In">Not In</option>
        </select>
      </div>
      <div class="col-4 formLevelFieldVal">
        <select class="select2 form-control" required>
        </select>
      </div>
      <div class="col-4 formLevelFieldValTag" style="display: none;">
        <select class="select2 form-control" required multiple>
        </select>
      </div>
      <div class="col-4">
        <select class="select2 form-control formLevelFieldCol" required multiple>
      </select>
      </div>
      <div class="col-1">
        <i class="fas fa-remove" onclick="formLevelFieldRemove.call(this)" style="margin-top:5px"></i>
      </div>
    </div>
    `
  $.ajax({
      url:window.location.pathname,
      data: formData,
      type: 'POST',
      cache: false,
      contentType: false,
      processData: false,
      success: function (data) {
        var values1 = data['data']
        if (current.find('.configCont').length == 1 && current.find('.configCont').find('.formLevelFieldCol').eq(0).val() == ""){
          for(let r = 0; r < values1.length; r++) {
            if(r == 0) {
              current.find('.formLevelFieldCond').eq(r).val(values1[r]['condition']).trigger('change')
              var temp = []
              for(let i = 0; i < allFieldsColumns.length; i++) {
                for(let j = 0; j < JSON.parse(values1[r]['selected-column']).length; j++) {
                  if (JSON.parse(values1[r]['selected-column'])[j] == verboseName[i]) {
                    temp.push(allFieldsColumns[i])
                    break;
                  }
                }
              }
              current.find('.formLevelFieldCol').eq(r).val(temp).trigger('change')
              if(current.find('.formLevelFieldVal').eq(r).css('display') === 'block') {
                current.find('.formLevelFieldVal').eq(r).find('select').append(`<option value="${values1[r]['value']}">${values1[r]['value']}</option>`)
                current.find('.formLevelFieldVal').eq(r).find('select').val(values1[r]['value']).trigger('change')
              } else {
                var tagVal = JSON.parse(values1[r]['value'])
                for(let tV =0 ; tV < tagVal.length; tV++) {
                    current.find('.formLevelFieldValTag').eq(r).find('select').append(`<option value="${tagVal[tV]}">${tagVal[tV]}</option>`)
                }
                current.find('.formLevelFieldValTag').eq(r).find('select').val(tagVal).trigger('change')
              }
            } else {
              current.append(htmlForm);
              current.find('.configCont').eq(-1).find('.formLevelFieldCol').select2()
              current.find('.configCont').eq(-1).find('.formLevelFieldCond').select2()
              current.find('.configCont').eq(-1).find('.formLevelFieldCol').parent().find('.select2-container').css('max-height','6rem')
              current.find('.configCont').eq(-1).find('.formLevelFieldCol').parent().find('.select2-container').css('overflow-y','scroll')
              current.find('.configCont').eq(-1).find('.formLevelFieldCol').empty()
              for(let i = 0; i < allFieldsColumns.length; i++) {
                current.find('.configCont').eq(-1).find('.formLevelFieldCol').append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`)
              }
              appendButton(current.find('.configCont').eq(-1).find('.formLevelFieldCol'))
              current.find('.configCont').eq(-1).find('.formLevelFieldVal').find('select').select2({tags:true})
              current.find('.configCont').eq(-1).find('.formLevelFieldValTag').find('select').select2({tags:true})
              current.find('.formLevelFieldCond').eq(r).val(values1[r]['condition']).trigger('change')
              var temp = []
              for(let i = 0; i < allFieldsColumns.length; i++) {
                for(let j = 0; j < JSON.parse(values1[r]['selected-column']).length; j++) {
                  if (JSON.parse(values1[r]['selected-column'])[j] == verboseName[i]) {
                    temp.push(allFieldsColumns[i])
                    break;
                  }
                }
              }
              current.find('.formLevelFieldCol').eq(r).val(temp).trigger('change')
              if(current.find('.formLevelFieldVal').eq(r).css('display') === 'block') {
                current.find('.formLevelFieldVal').eq(r).find('select').append(`<option value="${values1[r]['value']}">${values1[r]['value']}</option>`)
                current.find('.formLevelFieldVal').eq(r).find('select').val(values1[r]['value']).trigger('change')
              } else {
                var tagVal = JSON.parse(values1[r]['value'])
                for(let tV =0 ; tV < tagVal.length; tV++) {
                  current.find('.formLevelFieldValTag').eq(r).find('select').append(`<option value="${tagVal[tV]}">${tagVal[tV]}</option>`)
                }
                current.find('.formLevelFieldValTag').eq(r).find('select').val(tagVal).trigger('change')
              }
            }
          }
        } else {
          var tempLen = current.find('.configCont').length;
          for(let r = 0; r < values1.length; r++) {
            current.append(htmlForm);
            current.find('.configCont').eq(-1).find('.formLevelFieldCol').select2()
            current.find('.configCont').eq(-1).find('.formLevelFieldCond').select2()
            current.find('.configCont').eq(-1).find('.formLevelFieldCol').parent().find('.select2-container').css('max-height','6rem')
            current.find('.configCont').eq(-1).find('.formLevelFieldCol').parent().find('.select2-container').css('overflow-y','scroll')
            current.find('.configCont').eq(-1).find('.formLevelFieldCol').empty()
            for(let i = 0; i < allFieldsColumns.length; i++) {
              current.find('.configCont').eq(-1).find('.formLevelFieldCol').append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`)
            }
            appendButton(current.find('.configCont').eq(-1).find('.formLevelFieldCol'))
            current.find('.configCont').eq(-1).find('.formLevelFieldVal').find('select').select2({tags:true})
            current.find('.configCont').eq(-1).find('.formLevelFieldValTag').find('select').select2({tags:true})
            var temp = []
            for(let i = 0; i < allFieldsColumns.length; i++) {
              for(let j = 0; j < JSON.parse(values1[r]['selected-column']).length; j++) {
                if (JSON.parse(values1[r]['selected-column'])[j] == verboseName[i]) {
                  temp.push(allFieldsColumns[i])
                  break;
                }
              }
            }
            current.find('.formLevelFieldCond').eq(r + tempLen).val(values1[r]['condition']).trigger('change')
            current.find('.formLevelFieldCol').eq(r + tempLen).val(temp).trigger('change')
            if(current.find('.formLevelFieldVal').eq(r + tempLen).css('display') === 'block') {
              current.find('.formLevelFieldVal').eq(r + tempLen).find('select').append(`<option value="${values1[r]['value']}">${values1[r]['value']}</option>`)
              current.find('.formLevelFieldVal').eq(r + tempLen).find('select').val(values1[r]['value']).trigger('change')
            } else {
              var tagVal = JSON.parse(values1[r]['value'])
              for(let tV =0 ; tV < tagVal.length; tV++) {
                current.find('.formLevelFieldValTag').eq(r + tempLen).find('select').append(`<option value="${tagVal[tV]}">${tagVal[tV]}</option>`)
              }
              current.find('.formLevelFieldValTag').eq(r + tempLen).find('select').val(tagVal).trigger('change')
            }
          }
        }
        current.parent().find('.formLevelFieldActionsSel').val('Create manually').trigger('change');
        for(let i = 0; i < data.length; i++) {
          if(i = 0) {

          } else {}
        }
      },
      error: ()=>{
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
  });
}
var formLevelFieldRemove = function() {
  $(this).parent().parent().remove();
}
var formLevelFieldChangeCond = function() {
  if($(this).val() == 'In' || $(this).val() == 'Not In') {
      $(this).parent().parent().find('.formLevelFieldValTag').css('display','block');
      $(this).parent().parent().find('.formLevelFieldValTag').find('select').select2({
        tags:true
      });
      $(this).parent().parent().find('.formLevelFieldVal').css('display','none');
    } else {
      $(this).parent().parent().find('.formLevelFieldVal').find('select').select2({
        tags:true
      });
      $(this).parent().parent().find('.formLevelFieldValTag').css('display','none');
      $(this).parent().parent().find('.formLevelFieldVal').css('display','block');
    }
}
var foreignKeyCond = function() {
  if($(this).val() == 'In') {
      $(this).parent().parent().find('.foreignKeyCondValTag').css('display','block');
      $(this).parent().parent().find('.foreignKeyCondValTag').find('select').select2({
        tags:true
      });
      $(this).parent().parent().find('.foreignKeyCondVal').css('display','none');
    } else {
      $(this).parent().parent().find('.foreignKeyCondVal').find('select').select2({
        tags:true
      });
      $(this).parent().parent().find('.foreignKeyCondValTag').css('display','none');
      $(this).parent().parent().find('.foreignKeyCondVal').css('display','block');
    }
}
function backtoformmodal(i = 0){
  if(i == 1) {
    for(let i = 0; i < allFieldsColumns.length; i++) {
      if($('#selectField').val() == allFieldsColumns[i]) {

        let valid_flag = 1
        $('#JSConfig').find('.multipleJs').each(function() {
            if ($(this).find('.selectJSproperty').val() == "Foreign-key-relation") {
              not_allowed_datatypes = ["BooleanField", "FileField", "VideoField", "ImageField", "TimeRangeField", "DateTimeRangeField","DateRangeField", "DateRangeField", "CardCvvField", "CardExpiryField", "CardTypeField"]
              if(!not_allowed_datatypes.includes(allFieldsColumnsType[i])) {

              }else{
                valid_flag = 0
                Swal.fire({icon: 'error',text: `Cannot configure Foreign-key-relation property for the ${$('#selectField').val()} field`});
              }
          } else if ($(this).find('.selectJSproperty').val() == "Show-hide") {
            if ($(this).find('.formLevelJs').find('.formLevelFieldActionsSel').val() == "Create manually") {
              var configuredOnFields = [];
              $(this).find('.formLevelJs').find('.configCont').each(function() {
                configuredOnFields.push($(this).find('.formLevelFieldCol').val());
              })
              for (cOF of configuredOnFields) {
                for(let i = 0 ; i < fieldAttributesCV.length; i++){
                  if (fieldAttributesCV[i].hasOwnProperty(cOF) && valid_flag) {
                    if (fieldAttributesCV[i][cOF][0].hasOwnProperty('jsattr')) {
                      for (let k of fieldAttributesCV[i][cOF][0]["jsattr"]) {
                        if (k['parentvalue'] == "Styling attribute" && valid_flag) {
                          var configedJSAttr = k["finaljsattr"];
                          for (configFJS of configedJSAttr) {
                            if (configFJS[0]['attr'] == "data-reference_master_table_column") {
                              var is_mandatory = configFJS[0]['value']['mandatory'];
                              if (is_mandatory) {
                                valid_flag = 0;
                                break;
                                break;
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
              if (!valid_flag) {
                Swal.fire({icon: 'error',text: `Show-hide cannot be configured on mandatory fields`});
              }
            }
          }
        })

        if(valid_flag){
          finalcreateviewJS()
        }
      }
    }
    if ($('#selectField').attr('selected-field-type') =='IntegerField'){
      minvalue = Number($('#minvalue').val())
      maxvalue = Number($('#maxvalue').val())
      stepvalue = Number($('#stepvalue').val())
      if (!(Number.isInteger(minvalue) && Number.isInteger(maxvalue) && Number.isInteger(stepvalue))){
        alert("Please add Integer values only.");
        return false;
      }
      if ($('#minvalue').val() != '' && (minvalue === 0 || maxvalue === 0 || stepvalue === 0)) {
        alert("Please add values.");
        return false;
      }
      if ($('#minvalue').val() != ''&& minvalue > maxvalue){
        alert("Min value should be less than Max value.");
        return false;
      }
      if ($('#minvalue').val() != ''&& stepvalue > maxvalue){
        alert("Step value should be less than Max value.");
        return false;
      }
    }
    if ($('#selectField').attr('selected-field-type') =='FloatField'){
      minvalue = Number($('#minvalue').val())
      maxvalue = Number($('#maxvalue').val())
      stepvalue = Number($('#stepvalue').val())
      if ($('#minvalue').val() != '' && (minvalue === 0 || maxvalue === 0 || stepvalue === 0)) {
        alert("Please add values.");
        return false;
      }
      if ($('#minvalue').val() != '' && (minvalue > maxvalue)){
        alert("Min value should be less than Max value.");
        return false;
      }
      if ($('#minvalue').val() != '' && (stepvalue > maxvalue)){
        alert("Step value should be less than Max value.");
        return false;
      }
    }
  }
  if(stateOfCss["save"] == "no") {
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).parent().attr("style",`${stateOfCss["previous"]}`)
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).parent().css("background-color",``);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').css("background-color",`${stateOfCss["background-color"]}`);
    if($('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').attr('type') == 'file' || $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').attr('type') == 'image') {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().find('label').css("background-color",`${stateOfCss["background-color"]}`);
    }
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').css("background-color",`${stateOfCss["background-color"]}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').css("background-color",`${stateOfCss["background-color"]}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().css("background-color",`${stateOfCss["background-color"]}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').parent().css("background-color",`${stateOfCss["background-color"]}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').parent().css("background-color",`${stateOfCss["background-color"]}`);
    if(stateOfCss["background-color"] != "" && stateOfCss["background-color"]) {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').css('border-radius','5px');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').css('border-radius','5px');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').css('border-radius','5px');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().css('border-radius','5px');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').parent().css('border-radius','5px');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').parent().css('border-radius','5px');
    } else {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').css('border-radius','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').css('border-radius','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').css('border-radius','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().css('border-radius','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').parent().css('border-radius','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').parent().css('border-radius','');
    }
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).parent().removeAttr("title",`${stateOfCss["title"]}`);
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).parent().removeAttr("data-toggle",``);
    if(stateOfCss["span"] != "") {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("span").remove();
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("small").remove();
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).append(`<small class="form-text text-muted">${stateOfCss["span"]}</small>`);

    } else {
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("span").remove();
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("small").remove();

    }
  }
  $('#JSConfig').css('display','none');
  $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','');
  $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','');

  var htmlR = `
  <div class="card card-default collapsed-card">
      <div class="card-header">
        <p class="card-title">Cascading level 0</p>

        <div class="card-tools">
          <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:black"></i></button>
          <button type="button" class="btn btn-tool" onclick="cascadingCard.call(this)" style="color:black">Add card</i></button>
        </div>
      </div>
      <div class="card-body row" style="display:flex">
        <div class="col-6" style="height: 16rem;overflow: scroll;">
          <p class="autopopulate1" style="font-weight: bold;">Select source table</p>
          <div class="" id="masterTableCascading1">
            <select class="masterTableSelectCascading1 select2 form-control" onchange="selectColFromTable.call(this)">
              <option value="" selected>Select master table</option>
              {% for i in tableList%}
              <option value="{{i}}">{{i}}</option>
              {%endfor%}
            </select>
          </div><br>
          <div class="autopopulate1" style="font-weight: bold;">Criteria field mapping through source table column</div><br>
          <div class="row" id="indFieldTypeCascading1">
            <div class="col-6" style="display: inline-block;">
              <p>Current table field:</p>
              <select class="select2 form-control indFieldTypeSelectCascading1">
                <option value="" selected>Dependent field mapping through source table column</option>
              </select>
            </div>
            <div class="col-6" style="display: inline-block;">
              <p>Mapping table field:</p>
              <select class="select2 form-control commonCol indFieldTypeMapperCascading1">
                <option value="" selected>Select mapping field</option>
              </select>
            </div>
          </div><br>
        </div>
        <div class="col-6" style="height: 16rem;overflow: scroll;">
          <div class="autopopulate1" style="display: flex; align-items: center; justify-content: space-between;" style="font-weight: bold;"><span style="font-weight: bold;">Select dependent field</span> <span class="float-right" style="font-size: 15px;" onclick="addIndField.call(this,'Cascading1')"><i class="fas fa-plus"></i></span></div><br>
          <div class="norow" id="depFieldTypeCascading1">
            <div class="row" style="margin-bottom:6px">
              <div class="col-6">
                <p>Current table field:</p>
                <select class="depFieldTypeSelectCascading1 select2 form-control " onchange="casadingColOption.call(this)">
                  <option value="" selected>Select independent field</option>
                </select>
              </div>
              <div class="col-5">
                <p>Mapping table field:</p>
                <select class="depFieldTypeMapperCascading1 select2 form-control commonCol">
                  <option value="" selected>Select mapping field</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
`
$('#cascadingCard1').empty()
$('#cascadingCard1').append(htmlR);
$('.depFieldTypeMapperCascading1').select2();
$('.depFieldTypeSelectCascading1').select2();
$('.indFieldTypeMapperCascading1').select2();
$('.indFieldTypeSelectCascading1').select2();
$('.masterTableSelectCascading1').select2();
$('#JSConfig').css('display','none');
$('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','');
$('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','');
var count = 0;
$('#JSConfig').find('.multipleJS').each(function() {
  if(count > 0) {
    $(this).remove();
  }
  count++
})
$('#JSConfig').find('.multipleJS').eq(0).find('.selectJSproperty').val('').trigger('change')
}
var commonCol = [];
var commonColVerb = [];
var mulSelectTable = ""
var multipleJsCardRemove = function() {
  var op = $(this).parent().parent().parent().find('.selectJSproperty').val();
  let fieldValue = $("#selectField").val();
  for(let i = 0; i < fieldAttributesCV.length; i++){
    if(fieldAttributesCV[i].hasOwnProperty(fieldValue)){
      if(fieldAttributesCV[i][fieldValue][0].hasOwnProperty("jsattr")){
        let jsValue = fieldAttributesCV[i][fieldValue][0]["jsattr"]
        for(let j = 0; j < jsValue.length; j++){
          if(jsValue[j]["parentvalue"] == op){
            fieldAttributesCV[i][fieldValue][0]["jsattr"].splice(j,1);
            j--;
          }
        }
      }
    }
  }
  if(op == "Styling attribute") {
    var thiss = $(this).closest('.multipleJs');
    var dict = {}
    dict["column"] = $("#selectField").val();
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict['column']).parent().attr("style",``)
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict['column']).css("background-color",`transparent`)
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict['column']).parent().removeAttr("title");
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict['column']).parent().removeAttr("data-toggle");
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict["column"]).find("span").remove();
    thiss.find(".stylingJsValidationColor").find(".stylingJsValidationColorCont").each(function() {
      var dic = {}
      dic['selectedColumn'] = $(this).find('.stylingJsValidationColorCol').val();
      for(let l = 0; l < dic['selectedColumn'].length; l++) {
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dic['selectedColumn'][l]).parent().css("background-color",`transparent`)
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dic['selectedColumn'][l]).css("background-color",`transparent`)
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dic['selectedColumn'][l]).parent().css("border-radius",`0px`);
      }
    })
  }
  $(this).parent().parent().parent().parent().remove();
}

var cascadingCard = function() {
  var html = `
  <div class="card card-default collapsed-card">
      <div class="card-header">
        <p class="card-title">Cascading level 0</p>

        <div class="card-tools">
          <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:black"></i></button>
          <button type="button" class="btn btn-tool" onclick="removeIndField.call(this,'not')"><i class="fas fa-remove" style="color:black"></i></button>
        </div>
      </div>
      <div class="card-body row" style="display:flex">
        <div class="col-6" style="height: 16rem;overflow: scroll;">
          <p class="autopopulate1" style="font-weight: bold;">Select source table</p>
          <div class="" id="masterTableCascading1">
            <select class="masterTableSelectCascading1 select2 form-control" onchange="selectColFromTable.call(this)">
              <option value="" selected>Select master table</option>
              {% for i in tableList%}
              <option value="{{i}}">{{i}}</option>
              {%endfor%}
            </select>
          </div><br>
          <div class="autopopulate1" style="font-weight: bold;">Criteria field mapping through source table column</div><br>
          <div class="row" id="indFieldTypeCascading1">
            <div class="col-6" style="display: inline-block;">
              <p>Current table field:</p>
              <select class="select2 form-control indFieldTypeSelectCascading1" onchange="ca.call(this)">
                <option value="" selected>Dependent field mapping through source table column</option>
              </select>
            </div>
            <div class="col-6" style="display: inline-block;">
              <p>Mapping table field:</p>
              <select class="select2 form-control indFieldTypeMapperCascading1">
                <option value="" selected>Select mapping field</option>
              </select>
            </div>
          </div><br>
        </div>
        <div class="col-6" style="height: 16rem;overflow: scroll;">
          <div class="autopopulate1" style="display: flex; align-items: center; justify-content: space-between;" style="font-weight: bold;"><span style="font-weight: bold;">Select dependent field</span> <span class="float-right" style="font-size: 15px;" onclick="addIndField.call(this,'Cascading1')"><i class="fas fa-plus"></i></span></div><br>
          <div class="norow" id="depFieldTypeCascading1">
            <div class="row" style="margin-bottom:6px">
              <div class="col-6">
                <p>Current table field:</p>
                <select class="depFieldTypeSelectCascading1 select2 form-control " onchange="casadingColOption.call(this)">
                  <option value="" selected>Select independent field</option>
                </select>
              </div>
              <div class="col-5">
                <p>Mapping table field:</p>
                <select class="depFieldTypeMapperCascading1 select2 form-control commonCol">
                  <option value="" selected>Select mapping field</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    `
  var current = $(this).parent().parent().parent().parent()
  var current1 = $(this).parent().parent().parent().parent().parent().parent()
  var curr = current1.find('#cascadingCard1').find('.card-default').eq(-1)
  $(this).parent().parent().parent().parent().append(html)
  current1.find('#cascadingCard1').find('.card-default').eq(-1).find('.card-title').html('Cascading level '+($(this).parent().parent().parent().parent().find('.card-default').length - 1))
  $('.depFieldTypeMapperCascading1').select2();
  $('.depFieldTypeSelectCascading1').select2();
  $('.indFieldTypeMapperCascading1').select2();
  $('.indFieldTypeSelectCascading1').select2();
  $('.masterTableSelectCascading1').select2();
  current1.find('#cascadingCard1').find('.card-default').eq(-1).find('.indFieldTypeSelectCascading1').eq(-1).empty()
  current1.find('#cascadingCard1').find('.card-default').eq(-1).find('.indFieldTypeSelectCascading1').eq(-1).append(`<option value="---">---</option>`)
  for(let i = 0; i < allFieldsColumns.length; i++) {
    if(allFieldsColumnsType[i] != 'BooleanField') {
      current.find('.depFieldTypeSelectCascading1').eq(-1).append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`)
    }
  }
  for(let i = 0; i < curr.find('.depFieldTypeSelectCascading1').length; i++) {
    for(let i1 = 0; i1 < allFieldsColumns.length; i1++) {
      if(curr.find('.depFieldTypeSelectCascading1').eq(i).val() == allFieldsColumns[i1]) {
        current1.find('#cascadingCard1').find('.card-default').eq(-1).find('.indFieldTypeSelectCascading1').eq(-1).append(`<option value="${curr.find('.depFieldTypeSelectCascading1').eq(i).val()}">${verboseName[i1]}</option>`);
        break;
      }
    }
  }
}
var ca = function() {
  current = $(this).parent().parent().parent().parent().parent().prev().find('.depFieldTypeSelectCascading1')
  curr = $(this);
  var count = 0
  current.each(function() {
    if ($(this).val() == curr.val()) {
      count = count + 1;
      curr.parent().parent().find('.indFieldTypeMapperCascading1').empty()
      var check = curr.parent().parent().parent().find('.masterTableSelectCascading1').find('option').length;

      for(let i = 0; i < check; i++) {
        if (curr.parent().parent().parent().parent().find('.depFieldTypeMapperCascading1').find('option').eq(i).val() == $(this).parent().parent().find('.depFieldTypeMapperCascading1').val()) {
          for(let i1 = 0; i1 < commonCol.length; i1++) {

            if(curr.parent().parent().parent().parent().find('.depFieldTypeMapperCascading1').find('option').eq(i).val() == commonCol[i1]) {

              curr.parent().parent().find('.indFieldTypeMapperCascading1').empty()
              curr.parent().parent().find('.indFieldTypeMapperCascading1').append(`<option value='${$(this).parent().parent().find('.depFieldTypeMapperCascading1').val()}'>${commonColVerb[i1]}</option>`);
              break;
            }
          }
        }
      }
    }
  })
}
var casadingColOption = function() {
  current = $(this).parent().parent().parent().parent().parent().parent().next().find('.indFieldTypeSelectCascading1')
  current.empty()
  current.append(`<option value="">---</option>`);
  $(this).parent().parent().parent().find('.depFieldTypeSelectCascading1').each(function() {
    for(let i1 = 0; i1 < allFieldsColumns.length; i1++) {
      if($(this).val() == allFieldsColumns[i1]) {
        current.append(`<option value="${$(this).val()}">${verboseName[i1]}</option>`);
        break;
      }
    }
  })
}
function removeCasadingColOptions(curr) {
  current = curr.parent().parent().next().find('.indFieldTypeSelectCascading1')
  current.empty()
  curr.find('.depFieldTypeSelectCascading1').each(function() {
    for(let i1 = 0; i1 < allFieldsColumns.length; i1++) {
      if($(this).val() == allFieldsColumns[i1]) {
        current.append(`<option value="${$(this).val()}">${verboseName[i1]}</option>`);
        break;
      }
    }
  })
}
var addIndField = function(type='Auto-populate') {
  if (type == 'Auto-populate') {
    var html = `
    <div class="row" style="margin-bottom:6px;">
      <div class="col-6" style="display: inline-block;">
        <select class="depFieldTypeSelect select2 form-control">
        </select>
      </div>
      <div class="col-5" style="display: inline-block;">
        <select class="depFieldTypeMapper select2 form-control commonCol" onchange="check_master_foreignkey.call(this,'Auto-populate')">
        </select>
      </div>
      <div class="col-1" style="display: inline-block;">
        <span class="float-right" style="font-size: 15px;" onclick="removeIndField.call(this,'Auto-populate')"><i class="fas fa-remove"></i></span>
      </div>
    </div>
    `
    $(this).parent().parent().find('#depFieldType').append(html);
    var container = $(this).parent().parent();
    $(this).parent().parent().find('.norow > .row').eq(0).find('.col-5 > .depFieldTypeMapper > option').each(function(){
      container.find('.depFieldTypeMapper').eq(-1).append(`<option value="${$(this).val()}">${$(this).text()}</option>`)
    });
    $(this).parent().parent().find('.norow > .row').eq(0).find('.col-6 > .depFieldTypeSelect > option').each(function(){
      container.find('.depFieldTypeSelect').eq(-1).append(`<option value="${$(this).val()}">${$(this).text()}</option>`)
    });
    $('.depFieldTypeMapper').select2();
    $('.depFieldTypeSelect').select2();
  } else if(type=='Cascading1') {
    var html = `
    <div class="row" style="margin-bottom:6px;">
      <div class="col-6" style="display: inline-block;">
        <select class="depFieldTypeSelectCascading1 select2 form-control" onchange="casadingColOption.call(this)">
          <option value="" selected>Select dependent field</option>
        </select>
      </div>
      <div class="col-5" style="display: inline-block;">
        <select class="depFieldTypeMapperCascading1 select2 form-control commonCol">
          <option value="" selected>Select mapping field</option>
        </select>
      </div>
      <div class="col-1" style="display: inline-block;">
        <span class="float-right" style="font-size: 15px;" onclick="removeIndField.call(this)"><i class="fas fa-remove"></i></span>
      </div>
    </div>
    `
    $(this).parent().parent().find('#depFieldTypeCascading1').append(html);

    for(j in commonCol){
      $(this).parent().parent().find('.depFieldTypeMapperCascading1').eq(-1).append(`<option value="${commonCol[j]}">${commonColVerb[j]}</option>`)
    }
    for(j in allFieldsColumns){
      if(allFieldsColumnsType[j] != "BooleanField") {
        $(this).parent().parent().find('.depFieldTypeSelectCascading1').eq(-1).append(`<option value="${allFieldsColumns[j]}">${verboseName[j]}</option>`)
      }
    }
    $(this).parent().parent().find('.depFieldTypeMapperCascading1').select2();
    $(this).parent().parent().find('.depFieldTypeSelectCascading1').select2();
  } else {
    var html = `
    <div class="row" style="margin-bottom:6px;">
      <div class="col-6" style="display: inline-block;">
        <select class="depFieldTypeSelectCascading2 select2 form-control">
          <option value="" selected>Select independent field</option>
        </select>
      </div>
      <div class="col-5" style="display: inline-block;">
        <select class="depFieldTypeMapperCascading2 select2 form-control commonCol">
          <option value="" selected>Select mapping field</option>
        </select>
      </div>
      <div class="col-1" style="display: inline-block;">
        <span class="float-right" style="font-size: 15px;" onclick="removeIndField.call(this)"><i class="fas fa-remove"></i></span>
      </div>
    </div>
    `
    $('#depFieldTypeCascading2').append(html);

    for(j in commonCol){
      $('.depFieldTypeMapperCascading2').eq(-1).append(`<option value="${commonCol[j]}">${commonColVerb[j]}</option>`)
    }
    for(j in allFieldsColumns){
      $('.depFieldTypeSelectCascading2').eq(-1).append(`<option value="${allFieldsColumns[j]}">${verboseName[j]}</option>`)
    }
    $('.depFieldTypeMapperCascading2').select2();
    $('.depFieldTypeSelectCascading2').select2();
  }
}
var removeIndField = function(type='Auto-populate') {
  if (type == 'Auto-populate') {
    var curr = $(this).parent().parent().parent()
    $(this).parent().parent().remove();
    removeCasadingColOptions(curr)
  } else if(type == 'not') {
    $(this).parent().parent().parent().remove();
  } else {
    $(this).parent().parent().remove();
  }
}
function listOfIconsFunction(obj){
  $(obj).parent().parent().find('.listoficons').each(function(){
    $(this).attr("data-icon","")
    $(this).css("border","")
  })
  $(obj).css("border","1px solid rgb(184, 134, 11)")
  $(obj).attr("data-icon",$(obj).attr('class'))
}
function populateEditButtonContent(obj){
  var content = EditButtonContent()
  $('#editButtonModal').find('.modal-body').append(content)
  $('#editButtonModal').find('select').each(function(){
    $(this).select2()
  })
}

function removeEditButtonContent(obj){
  $(obj).parent().parent().parent().parent().remove()
}
function selectedButtonName(obj){
  $(obj).parent().parent().parent().parent().find('[data-css]').eq(0).val($(obj).find("option:selected").text()).trigger('change')
}
var EditButtonFunctionCall = 0;
function EditButtonContent(){
  EditButtonFunctionCall++;
  return(`
  <div class="card collapsed-card multipleJs masterstyling" id="create_view_master_styling${EditButtonFunctionCall}"  style="margin-left:-12px;margin-right: -12px;">
    <div class="card-header row">
      <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
        <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the Button:</p>
        <div class="col-4">
        <select class="select2 form-control selectButtonsOptions" onchange="selectedButtonName(this)" style="margin-left: 5px;">
          <option value="" disabled selected>Select Button</option>
          <option value="save">Save</option>
          <option value="back">Back</option>
          <option value="saveasdraft">Save as Draft</option>
          <option value="resetdraftstatus">Reset Draft status</option>
          <option value="viewdraftversions">View Draft Versions</option>
          <option value="customvalidation">Custom Validation</option>
          <option value="viewtransactionstatus">View Transaction Status</option>
          <option value="refreshcomputation">Refresh Computation</option>
          <option value="viewhistory">View History</option>
          <option value="viewrejectedrecords">View Rejected Records</option>
          <option value="setApprovalParameters">Set Approval Parameters</option>
          </select>
          </div>
        </div>
          <div class="col-2">
            <div class="card-tools float-right">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              <button type="button" class="btn btn-tool" onclick="removeEditButtonContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
          </div>
        </div>
    </div>
    <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
      <div class="row" style="padding-left: 15px;">
        <div class="col-4">
          <p style="font-weight: bold;">Text of button:</p>
          <input type="text"  data-css="text" class="textinput textInput form-control ">
        </div>
        <div class="col-4">
            <p style="font-weight: bold;">Select text color:</p>
            <input type="color" value="#ffffff" class="form-control" data-css="color">
        </div>
        <div class="col-4">
            <p style="font-weight: bold;">Select background color:</p>
            <div class="input-group">
              <input type="color" value="var(--primary-color)" class="form-control " data-css="background-color">
              <select class="select2 form-control" data-css="opacity" >
                <option value="1" selected >None</option>
                <option value="0.9">0.9</option>
                <option value="0.8">0.8</option>
                <option value="0.7">0.7</option>
                <option value="0.8">0.8</option>
                <option value="0.7">0.7</option>
                <option value="0.6">0.6</option>
                <option value="0.5">0.5</option>
                <option value="0.4">0.4</option>
                <option value="0.3">0.3</option>
                <option value="0.2">0.2</option>
                <option value="0.1">0.1</option>
                <option value="0">0</option>
              </select>
          </div>
        </div>
      </div>
      <div class="row" style="padding-left: 15px; padding-top:15px;">
          <div class="col-4" >
          <p style="font-weight: bold;">Select border type:</p>
          <select class="select2 form-control" data-css="border-style" >
              <option value="none">No border</option>
              <option value="dotted" >Dotted</option>
              <option value="dashed" >Dashed</option>
              <option value="solid" >Solid</option>
              <option value="double" >Double</option>
              <option value="groove" >Groove</option>
              <option value="ridge" >Ridge</option>
              <option value="inset" >Inset</option>
              <option value="outset" >Outset</option>
              <option value="dotted dashed solid double" >Dotted dashed solid double</option>
          </select>
          </div>
          <div class="col-4">
          <p style="font-weight: bold;">Select border width:</p>
          <div class="input-group">
              <input type="float" class="form-control" data-css="border-width" >
              <select class="select2 form-control" data-css="border-measure">
                <option value="">None</option>
                <option value="px">px</option>
              </select>
          </div>
          </div>
          <div class="col-4">
            <p style="font-weight: bold;">Select border color:</p>
            <input type="color" class="form-control" data-css="border-color" >
          </div>
      </div>
      <div class="row" style="padding-left: 15px; padding-top:15px;">
        <div class="col-4" >
          <p style="font-weight: bold;">Select icon to add:</p>
          <button class="btn btn-primary iconappend" type="button" onclick="icon_button_selector(this)" data-list="">
            Icon Selector
          </button>
        </div>
        <div class="col-4">
          <p style="font-weight: bold;">Select icon color:</p>
          <input type="color" value="#ffffff" class="form-control" data-css="icon-color">
        </div>
        <div class="col-4" >
          <p style="font-weight: bold;">Select button size:</p>
          <select class="select2 form-control" data-css="font-size">
            <option value="none">Normal</option>
            <option value="10px">Xtra small</option>
            <option value="12px">Small</option>
            <option value="16px">Medium</option>
            <option value="20px">Large</option>
            <option value="24px">Xtra large</option>
          </select>
        </div>

      </div>
      <div class="row" style="padding-left: 15px; padding-top:15px;">
        <div class="col-4">
          <p style="font-weight: bold;">Select hover action:</p>
          <select class="select2 form-control" onchange="hoverOptionsEditButton(this)" data-css="hoveractions">
            <option value="none">No Effect</option>
            <option value="Color">Color</option>
            <option value="Gradient">Gradient</option>
            <option value="textsize">Text-size</option>
          </select>
        </div>
        <div class="col-4">
          <p style="font-weight: bold;">Select shape:</p>
          <select class="select2 form-control" data-css="shape">
            <option value="">Select Shape</option>
            <option value="square">Square</option>
            <option value="circle">Circle</option>
            <option value="oval">Oval</option>
            <option value="rectangle">Rectangle</option>
            <option value="parallelogram">Parallelogram</option>
          </select>
        </div>
    </div>
    <div class="row hoverButton" style="padding-left: 15px; padding-top:15px; width: 100%; display: flex;">

    </div>
    </div>
  </div>
  </div>`)
}
function hoverOptionsEditButton(obj){
  var value = $(obj).val()
  if (value == 'Color'){
    $(obj).parent().parent().parent().find('.hoverButton').empty()
    $(obj).parent().parent().parent().find('.hoverButton').append(`
    <div class="col-4" >
      <p style="font-weight: bold;">Color of hover:</p>
      <input type="color" class="form-control stylingJsFieldColorInput" data-css="hover-color" value="#ffffff" required>
    </div>
    `)
  }else if (value == 'Gradient'){
    $(obj).parent().parent().parent().find('.hoverButton').empty()
    $(obj).parent().parent().parent().find('.hoverButton').append(`
    <div class="col-4" >
      <p style="font-weight: bold;">Select type of gradient:</p>
      <select class="select2 Gradeints form-control" data-css="type-gradient" required=""  >
        <option value="linear-gradient">Linear Gradients</option>
        <option value="radial-gradient">Radial Gradients</option>
        <option value="conic-gradient">Conic Gradients</option>
      </select>
    </div>
    <div class="col-4" >
      <p style="font-weight: bold;">Color 1:</p>
      <input type="color" class="form-control stylingJsFieldColorInput" data-css="gradient-color-1" required>
    </div>
    <div class="col-4" >
      <p style="font-weight: bold;">Color 2:</p>
      <input type="color" class="form-control stylingJsFieldColorInput" data-css="gradient-color-2" required>
    </div>
    `)
  }else if (value == 'textsize'){
    $(obj).parent().parent().parent().find('.hoverButton').empty()
    $(obj).parent().parent().parent().find('.hoverButton').append(`
    <div class="col-4" >
      <p style="font-weight: bold;">Select size:</p>
      <select class="select2 form-control" data-css="hover-text-size" required=""  >
        <option value="none">Normal</option>
        <option value="10px">Xtra small</option>
        <option value="12px">Small</option>
        <option value="16px">Medium</option>
        <option value="20px">Large</option>
        <option value="24px">Xtra large</option>
      </select>
    </div>
    `)
  }else if (value == 'none'){
    $(obj).parent().parent().parent().find('.hoverButton').empty()
  }
  $('#editButtonModal').find('.hoverButton').find('select').each(function(){
    $(this).select2()
  })
}
function jsContent() {
  return(`
  <div class="card collapsed-card multipleJs" style="margin-left:-12px;margin-right: -12px;">
    <div class="card-header row">
      <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
        <p class="ca" style="margin-block: auto; margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the field property:</p>
        <div class="col-3">
        <select class="select2 form-control selectJSproperty" name="SelectedJS" onchange="selectJSpropertyFunc.call(this)" style="margin-left: 5px;">
          <option value="" disabled selected>Select Field property</option>
          {% for i in JSfunctions%}
          <option value="{{i}}">{{i}}</option>
          {%endfor%}
          </select>
          </div>
          <p class="ca" style="margin-block: auto; margin-right: 5px; font-weight:bold; color:var(--primary-color); white-space: nowrap;">Select cases (if any):</p>
          <div class="col-3">
            <select class="select2 form-control selectCases" name="SelectedJS" onchange="selectCases.call(this)" style="margin-left: 5px;" multiple>
              <option value="" disabled>Select Cases</option>
            </select>
          </div>
          <p class="ca" style="margin-block: auto; margin-right: 5px; font-weight:bold; color:var(--primary-color); white-space: nowrap;">And/Or:</p>
          <div class="col-2">
            <select class="select2 form-control selectCasesCond" name="SelectedJS" onchange="selectCases.call(this)" style="margin-left: 5px;">
              <option value="" disabled>Select Condition</option>
              <option value="and">And</option>
              <option value="or">Or</option>
            </select>
          </div>
        </div>

          <div class="col-2">
            <div class="card-tools float-right">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              <button type="button" class="btn btn-tool" onclick="multipleJsCardRemove.call(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
          </div>
        </div>
    </div>
    <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">

      <div  id="cascadingCard1" style="display: none;" >
        <div class="card card-default collapsed-card">
          <div class="card-header">
            <p class="card-title">Cascading level 0</p>

            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:black"></i></button>
              <button type="button" class="btn btn-tool" onclick="cascadingCard.call(this)" style="color:black">Add levels</i></button>
            </div>
          </div>
          <div class="card-body row" style="display:flex">
            <div class="col-6" style="height: 16rem;overflow: scroll;">
              <p class="autopopulate1" style="font-weight: bold;">Select source table</p>
              <div class="" id="masterTableCascading1">
                <select class="masterTableSelectCascading1 select2 form-control" onchange="selectColFromTable.call(this)">
                  <option value="" selected>Select master table</option>
                  {% for i in tableList%}
                  <option value="{{i}}">{{i}}</option>
                  {%endfor%}
                </select>
              </div><br>
              <div class="autopopulate1" style="font-weight: bold;">Criteria field mapping through source table column</div><br>
              <div class="row" id="indFieldTypeCascading1">
                <div class="col-6" style="display: inline-block;">
                  <p>Current table field:</p>
                  <select class="select2 form-control indFieldTypeSelectCascading1">
                    <option value="" selected>Dependent field mapping through source table column</option>
                  </select>
                </div>
                <div class="col-6" style="display: inline-block;">
                  <p>Mapping table field:</p>
                  <select class="select2 form-control commonCol indFieldTypeMapperCascading1">
                    <option value="" selected>Select mapping field</option>
                  </select>
                </div>
              </div><br>
            </div>
            <div class="col-6" style="height: 16rem;overflow: scroll;">
              <div class="autopopulate1" style="display: flex; align-items: center; justify-content: space-between;" style="font-weight: bold;"><span style="font-weight: bold;">Select dependent field</span> <span class="float-right" style="font-size: 15px;" onclick="addIndField.call(this,'Cascading1')"><i class="fas fa-plus"></i></span></div><br>
              <div class="norow" id="depFieldTypeCascading1">
                <div class="row" style="margin-bottom:6px">
                  <div class="col-6">
                    <p>Current table field:</p>
                    <select class="depFieldTypeSelectCascading1 select2 form-control " onchange="casadingColOption.call(this)">
                      <option value="" selected>Select independent field</option>
                    </select>
                  </div>
                  <div class="col-5">
                    <p>Mapping table field:</p>
                    <select class="depFieldTypeMapperCascading1 select2 form-control commonCol">
                      <option value="" selected>Select mapping field</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row stylingJsNumericRangeSlider" id="numeric_rs" style="padding-left: 15px; width:100%;display: none;justify-content: start;align-items: center;">
        <div class="col-12 my-2" style="display: flex;justify-content: space-between;align-items: center;">
          <div style="display:flex;flex-direction:column;justify-content: start;align-items: start; class="col-4">
              <p style="width:6rem;margin-right: 0.5rem;margin-bottom: 5px;font-weight: bold;">Min value:</p>
              <input class="form-control" type="number" id="minvalue">
          </div>
          <div style="display:flex;flex-direction:column;justify-content: start;align-items: start; class="col-4">
              <p style="width:6rem;font-weight: bold;margin-right: 0.5rem;margin-bottom: 5px;">Max value:</p>
              <input class="form-control" type="number" id="maxvalue">
          </div>
          <div style="display:flex;flex-direction:column;justify-content: start;align-items: start; class="col-4">
              <p style="width:7rem;font-weight: bold;margin-right: 0.5rem;margin-bottom: 5px;">Step value:</p>
              <input class="form-control" type="number" id="stepvalue">
          </div>
        </div>
        <div class="col-5 my-2">
          <p style="font-weight: bold;">Select slider color :</p>
          <input type="color" id="numeric_range_slider_color" class="form-control" required onchange="stylingJs.call(this)" value=#808080>
        </div>
      </div>
      <div class="row auto_populate_constant">
        <div class="col-3">
          <p style="font-weight: bold;">Select Constant</p>
          <select class="select2 form-control select_ap_constant" name="select_auto_populate_constant">
            <option value="" disabled selected>Select Constant</option>
              <option value="current_user_username">Current user's username</option>
              <option value="current_datetime">Current Datetime</option>
              <option value="current_date">Current Date</option>
              <option value="current_time">Current Time</option>
              <option value="ip_address">IP Address</option>
              <option value="static_value">Static Value</option>
          </select><p></p>
        </div>
        <div class="col-3 auto_static_div" style="display:none;">
          <div style="display: flex;justify-content: flex-start;align-items: center;margin-top: .5rem;margin-bottom: .5rem;">
            <input class="form-control" type="text" placeholder="Enter static value">
          </div>
        </div>
        <div class="col-3">
          <div style="display: flex;justify-content: flex-start;align-items: center;margin-top: .5rem;margin-bottom: .5rem;">
            <input type="checkbox" class="mt-2 checkboxinput custom-checkbox field_autoc_allowedit" style="margin: 0px; margin-left:5px">
            <p class="float-right" style="margin: 0px;margin-left:5px;font-weight: bold;margin-top: 6px;">Allow editing field ?</p>
          </div>
        </div>
      </div>

      <div class="row boolean_field_sliders_stylling">
        <div class="col-3 boolean_field_sliders_styles">
          <p style="font-weight: bold;">Select Field stylling:</p>
          <select class="select2 form-control" onchange="boolean_field_sliders_stylling_onchange(this)">
            <option value="" selected disabled>Select style</option>
            <option value="text_silder">Text silder</option>
            <option value="silder">Slider</option>
          </select>
        </div>
          <div class="row col-12 boolean-silder" style="margin-top:1rem;">
            <div class="col-3 boolean-text-align">
              <p style="font-weight: bold;">Label placement:</p>
              <select class="select2 form-control" onchange="booleanTextAlignFieldTypeSettings(this)">
                <option value="">Select alignment</option>
                <option value="both_sides">Both sides</option>
                <option value="left_side">Left side</option>
                <option value="right_side">Right side</option>
              </select>
            </div>
              <div class="col-3 boolean-text-left" style="display:none;">
                <p style="font-weight: bold;">Text left:</p>
                <input type="text" class="form-control textInput">
              </div>
              <div class="col-3 boolean-text-right" style="display:none;">
                <p style="font-weight: bold;">Text right:</p>
                <input type="text" class="form-control textInput">
              </div>
            <div class="row col-12" style="margin-top:1rem;">
              <div class="col-3 boolean-bg-color-active">
                <p style="font-weight: bold;">Background color active:</p>
                <input type="color" class="form-control" value="#a5780a">
              </div>
              <div class="col-3 boolean-bg-color-opacity-active">
                <p style="font-weight: bold;">Background color active opacity:</p>
                <select class="select2 form-control">
                  <option value="1" selected >None</option>
                    <option value="0.9">0.9</option>
                    <option value="0.8">0.8</option>
                    <option value="0.7">0.7</option>
                    <option value="0.6">0.6</option>
                    <option value="0.5">0.5</option>
                    <option value="0.4">0.4</option>
                    <option value="0.3">0.3</option>
                    <option value="0.2">0.2</option>
                    <option value="0.1">0.1</option>
                    <option value="0">0</option>
                </select>
              </div>
              <div class="col-3 boolean-bg-color-in-active">
                <p style="font-weight: bold;" >Background color inactive:</p>
                <input type="color" class="form-control" value ="#cfd8dc">
              </div>
              <div class="col-3 boolean-bg-color-opacity-in-active">
                <p style="font-weight: bold;">Background color inactive opacity:</p>
                <select class="select2 form-control">
                  <option value="1" selected >None</option>
                    <option value="0.9">0.9</option>
                    <option value="0.8">0.8</option>
                    <option value="0.7">0.7</option>
                    <option value="0.6">0.6</option>
                    <option value="0.5">0.5</option>
                    <option value="0.4">0.4</option>
                    <option value="0.3">0.3</option>
                    <option value="0.2">0.2</option>
                    <option value="0.1">0.1</option>
                    <option value="0">0</option>
                </select>
              </div>
            </div>

          </div>
          <div class="row col-12 boolean-text-silder-text" style="margin-top:1rem;display: none;">
            <div class="col-3 boolean-text-true">
              <p style="font-weight: bold;">Text for true:</p>
              <input type="text" class="form-control textInput">
            </div>
            <div class="col-3 boolean-text-false">
              <p style="font-weight: bold;">Text for false:</p>
              <input type="text" class="form-control textInput">
            </div>
          </div>
          <div class="row col-12 boolean-text-silder-formattings-selected" style="margin-top:1rem;display:none;">
            <div class="col-3 boolean-text-color-selected">
              <p style="font-weight: bold;">Select text color for Selected:</p>
              <input type="color" class="form-control">
            </div>
            <div class="col-3 boolean-bg-color-selected">
              <p style="font-weight: bold;">Select bg color for Selected:</p>
              <input type="color" class="form-control">
            </div>

            <div class="col-3 boolean-bg-color-opacity-selected">
              <p style="font-weight: bold;">Select bg color opacity for Selected:</p>
              <select class="select2 form-control">
                <option value="1" selected >None</option>
                  <option value="0.9">0.9</option>
                  <option value="0.8">0.8</option>
                  <option value="0.7">0.7</option>
                  <option value="0.6">0.6</option>
                  <option value="0.5">0.5</option>
                  <option value="0.4">0.4</option>
                  <option value="0.3">0.3</option>
                  <option value="0.2">0.2</option>
                  <option value="0.1">0.1</option>
                  <option value="0">0</option>
              </select>
            </div>
          </div>
          <div class="row col-12 boolean-text-silder-formattings-not-selected" style="margin-top:1rem;display:none;">
            <div class="col-3 boolean-text-color-not-selected">
              <p style="font-weight: bold;">Select text color for Not Selected:</p>
              <input type="color" class="form-control">
            </div>
            <div class="col-3 boolean-bg-color-not-selected">
              <p style="font-weight: bold;">Select bg color for Not Selected:</p>
              <input type="color" class="form-control">
            </div>
            <div class="col-3 boolean-bg-color-opacity-not-selected">
              <p style="font-weight: bold;">Select bg color opacity for Not Selected:</p>
              <select class="select2 form-control">
                <option value="1" selected >None</option>
                  <option value="0.9">0.9</option>
                  <option value="0.8">0.8</option>
                  <option value="0.7">0.7</option>
                  <option value="0.6">0.6</option>
                  <option value="0.5">0.5</option>
                  <option value="0.4">0.4</option>
                  <option value="0.3">0.3</option>
                  <option value="0.2">0.2</option>
                  <option value="0.1">0.1</option>
                  <option value="0">0</option>
              </select>
            </div>
          </div>
      </div>
      <div class="row linked-field">
          <div class="col-4">
              <p style="font-weight: bold;">Select filter type:</p>
              <select class="select2 form-control select_filter_type" onchange="addParams.call(this)">
                <option value="" disabled selected>Select one</option>
                  <option value="colb">Column based</option>
                  <option value="master">Master based</option>
              </select>
          </div>
          <div class="col-8" style="padding-bottom:4rem;">
                <button class="btn btn-primary fk-master-btn" onclick="addFKMasterCond.call(this)" data-toggle="tooltip" title="Add condition" style="float:right;" >Add Condition</button>
          </div>
          <div class="col-4">
            <p style="font-weight: bold;">Select Parent-Child</p>
            <select class="select2 form-control selectpctype" name="Selectedpc">
              <option value="" disabled selected>Select Field property</option>
                <option value="parent">Parent</option>
                <option value="child">Child</option>
            </select><p></p>
          </div>
          <div class="col-4">
            <p style="font-weight: bold;">Select Parent Column</p>
            <select class="select2 form-control selectparentcolumn" name="selectparentcolumn" >
              <option value="" selected>Select Parent Column</option>
              {% for i in data.finalFieldList%}
                <option value="{{i}}">{{i}}</option>
              {%endfor%}
            </select> <br><br>
          </div>
          <div class="col-4 fordefvalue">
            <p style="font-weight: bold;">Select Default Value</p>
            <select class="select2 form-control selectdefcolumn" name="selectdefcolumn" >
            </select> <br><br>
          </div>
          <div class="foreignKeyCondCont col-12">
            <div class="subCont col-12" style="display:flex">
              <div class="col-3">
                <p style="font-weight: bold;">Select Condition Column</p>
                <select class="select2 form-control selectparentcolumnCond" name="selectparentcolumnCond" >
                  <option value="" selected>Select Condition Column</option>
                </select>
              </div>
              <div class="col-2">
                <p style="font-weight: bold;">Select condition:</p>
                <select class="select2 form-control foreignKeyCond" required onchange="foreignKeyCond.call(this)">
                  <option value="Greater then">Greater than</option>
                  <option value="Smaller then">Smaller than</option>
                  <option value="Equal to">Equal to</option>
                  <option value="Not Equal to">Not Equal to</option>
                  <option value="In">In</option>
                </select>
              </div>
              <div class="col-2 foreignKeyCondVal">
                <p style="font-weight: bold;">Select value:</p>
                <select class="select2 form-control" required>
                </select>
              </div>
              <div class="col-2 foreignKeyCondValTag" style="display: none;">
                <p style="font-weight: bold;">Select value:</p>
                <select class="select2 form-control" required multiple>
                </select>
              </div>
              <div class="col-2">
                <p style="font-weight: bold;">Select value:</p>
                <select class="select2 form-control foreignKeyDynamicVal">
                  <option value="" selected>Select value</option>
                  <option value="curr_user">Current User</option>
                  <option value="curr_date">Current Date</option>
                </select>
              </div>
              <div class="col-2">
                <p style="font-weight: bold;">Constraint</p>
                <input class="form-control foreignKeyConstraint" type="text">
              </div>
              <div class="col-1">
                <p style="font-weight: bold;">Rule set:</p>
                <input class="form-control foreignKeySet" type="text">
              </div>
              <div class="col-1">
                <i class="fas fa-plus" onclick="addForeignKeyCond.call(this)" data-toggle="tooltip" title="Add condition"></i> </i>
              </div>
            </div>
          </div>

          <p style="padding-top: 2rem;font-weight: bold;border-top: 1px solid;width: 100%;">Master Conditions:</p>
          <div class="foreignKeyMasterCont col-12">
            <div class="subMasterCont col-12" style="display:flex">
              <div class="col-3">
                <p style="font-weight: bold;">Parameter Master table</p>
              </div>
              <div class="col-2">
                <p style="font-weight: bold;">Parameter Master Column</p>
              </div>
              <div class="col-2">
                <p style="font-weight: bold;">Condition</p>
              </div>
              <div class="col-2 foreignKeyMasterCondVal">
                <p style="font-weight: bold;">Current Column</p>
              </div>
              <div class="col-2">
                <p style="font-weight: bold;">Parameter Interim Column</p>
              </div>
              <div class="col-2">
                <p style="font-weight: bold;">Master Column</p>
              </div>
              <div class="col-1">
                <p style="font-weight: bold;">Constraint</p>
              </div>
              <div class="col-1">
                <p style="font-weight: bold;">Rule set</p>
              </div>
            </div>
          </div>

          <p style="padding-top: 2rem;font-weight: bold;border-top: 1px solid;width: 100%;">Column Based Conditions:</p>
          <div class="foreignKeyColBasedCont col-12">
            <div class="subColBasedCont col-12" style="display:flex">
              <div class="col-3">
                <p style="font-weight: bold;">Column</p>
              </div>
              <div class="col-3">
                <p style="font-weight: bold;">Condition</p>
              </div>
              <div class="col-3">
                <p style="font-weight: bold;">Master Column</p>
              </div>
              <div class="col-1">
                <p style="font-weight: bold;">Constraint</p>
              </div>
              <div class="col-1">
                <p style="font-weight: bold;">Rule set</p>
              </div>
            </div>
          </div>

        </div>
      <div class="row autopopulate">
          <div class="col-6" style="height: 16rem;overflow: scroll;">
            <p class="autopopulaten" style="font-weight: bold;">Select source table</p>
            <div class="masterTable" style="display: none;">
              <select  class="select2 form-control masterTableSelect">
                <option value="" selected>Select master table</option>
                {% for i in tableList%}
                <option value="{{i}}">{{i}}</option>
                {%endfor%}
              </select>
            </div><br>
            <div class="autopopulaten" style="font-weight: bold;">Criteria field mapping through source table column</div><br>
            <div class="row" id="indFieldType" style="display: none;">
              <div class="col-6" style="display: inline-block;">
                <p>Source table field:</p>
                <select  class="select2 form-control indFieldTypeSelect">
                  <option value="" selected>Dependent field mapping through source table column</option>
                </select>
              </div>
              <div class="col-6" style="display: inline-block;">
                <p>Mapping table field:</p>
                <select  class="select2 form-control commonCol indFieldTypeMapper">
                  <option value="" selected>Select mapping field</option>
                </select>
              </div>
            </div>
            <div style="display: flex;justify-content: flex-start;align-items: center;margin-top: .5rem;margin-bottom: .5rem;">
              <input type="checkbox" class="mt-2 checkboxinput custom-checkbox field_auto_allowedit" style="margin: 0px; margin-left:5px">
              <p class="float-right" style="margin: 0px;margin-left:5px;font-weight: bold;margin-top: 6px;">Allow editing field ?</p>
            </div>
            <div style="display: flex;justify-content: flex-start;align-items: center;margin-top: .5rem;margin-bottom: .5rem;">
              <input type="checkbox" class="mt-2 checkboxinput custom-checkbox field_auto_values" style="margin: 0px; margin-left:5px">
              <p class="float-right" style="margin: 0px;margin-left:5px;font-weight: bold;margin-top: 6px;">Use values instead of ids ?</p>
            </div>
            <div class="autopopulatenDep" style="font-weight: bold;">Dependent independent field<i class="fas fa-plus" onclick="addIndDepField.call(this)" style="float:right; font-size:16px;"></i> </div><br>
              <div class="row indDepFieldType">

              </div>
          </div>
          <div class="col-6" style="height: 16rem;overflow: scroll;">
            <div class="autopopulaten" style="display: flex; align-items: center; justify-content: space-between;" style="font-weight: bold;"><span style="font-weight: bold;">Select dependent field</span> <span class="float-right" style="font-size: 15px;" onclick="addIndField.call(this)"><i class="fas fa-plus"></i></span></div><br>
            <div class="norow" id="depFieldType" style="display: none;">
              <div class="row" style="margin-bottom: 6px;">
                <div class="col-6" style="display: inline-block;">
                  <p>Current table field:</p>
                  <select class="depFieldTypeSelect select2 form-control ">
                    <option value="" selected>Select independent field</option>
                  </select>
                </div>
                <div class="col-5" style="display: inline-block;">
                  <p>Mapping table field:</p>
                  <select class="depFieldTypeMapper select2 form-control commonCol" onchange="check_master_foreignkey.call(this,'Auto-populate')">
                    <option value="" selected>Select mapping field</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row formLevelJs" style="display: none; margin-left: -15px">
          <div class="rowAdd">
            <div class="row formLevelFieldActions" style="padding:15px">
              <div class="col-5">
                <p style="font-weight: bold;">Select method:</p>
                <select class="select2 form-control formLevelFieldActionsSel" required onchange="formLevelFieldActions.call(this)">
                  <option value="">---</option>
                  <option value="Create manually">Create manually</option>
                  <option value="Upload">Upload</option>
                  <option value="Link to source table">Link to source table</option>
                </select>
              </div>
              <div class="col-5 uploadCondition" style="display: none; margin-top:30px">
                <form method="post" class="uploadCondition" enctype="multipart/form-data">
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" id="uploadConditionClass" style="border-bottom-color:white;" name="show-hide_file" accept=".csv" >
                    <label id="uploadConditionClass" class="custom-file-label">Choose file</label>
                  </div>
                </form>
              </div>
              <div class="col-1 uploadCondition" style="display: none; margin-top: 30px;">
                <button type="submit" data-toggle="tooltip" title="Upload File" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1 uploadConditionClassBtn" onclick="uploadConditionClassBtn.call(this)"><i class="fa fa-upload"></i>
                </button>
              </div>
              <div class="col-1 uploadCondition" style="display: none; margin-top: 30px;">
                <button type="submit" data-toggle="tooltip" title="Download format" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1 downloadConditionClassBtn" onclick="downloadConditionClassBtn.call(this)"><i class="fa fa-download"></i>
                </button>
              </div>
            </div>
            <div class="row configContLink linkToSourceTable" style="padding:15px; display:none">
              <div class="col-4 formLevelFieldMasterTable">
                <p style="font-weight: bold;">Master table:</p>
                <select class="select2 form-control" required onchange="formLevelFieldMasterTable.call(this)">
                  <option value="" selected>Select master table</option>
                  {% for i in tableList%}
                  <option value="{{i}}">{{i}}</option>
                  {%endfor%}
                </select>
              </div>
              <div class="col-4 formLevelFieldColName">
                <p style="font-weight: bold;">Criteria field mapping:</p>
                <select class="select2 form-control" required>
                </select>
              </div>
              <div class="col-4 formLevelFieldColName">
                <p style="font-weight: bold;">Dependent column field:</p>
                <select class="select2 form-control" required>
                </select>
              </div>
            </div>
            <div class="row configCont createManually" style="padding:15px; display:none">
              <div class="col-3">
                <p style="font-weight: bold;">Select condition:</p>
                <select class="select2 form-control formLevelFieldCond" required onchange="formLevelFieldChangeCond.call(this)">
                  <option value="Greater then">Greater than</option>
                  <option value="Smaller then">Smaller than</option>
                  <option value="Equal to">Equal to</option>
                  <option value="Not Equal to">Not Equal to</option>
                  <option value="In">In</option>
                  <option value="Not In">Not In</option>
                </select>
              </div>
              <div class="col-4 formLevelFieldVal">
                <p style="font-weight: bold;">Select value:</p>
                <select class="select2 form-control" required>
                </select>
              </div>
              <div class="col-4 formLevelFieldValTag" style="display: none;">
                <p style="font-weight: bold;">Select value:</p>
                <select class="select2 form-control" required multiple>
                </select>
              </div>
              <div class="col-4">
                <p style="font-weight: bold;">Select columns to show:</p>
                <select class="select2 form-control formLevelFieldCol" required multiple>
              </select>
              </div>
              <div class="col-1">
                <i class="fas fa-plus" onclick="formLevelFieldAdd.call(this)" data-toggle="tooltip" title="Add condition"></i>
              </div>
            </div>
          </div>
        </div>
        <div class="row stylingJs" style="display: none; margin-left: -15px">
          <div class="row stylingJsProperty" style="padding:15px; width:53%">
            <div class="col-12">
              <p style="font-weight: bold;">Select styling property:</p>
              <select class="select2 form-control stylingJsPropertySelect" required onchange="stylingJsPropertySelect.call(this)">
                <option value="">-----</option>
                <option value="Border">Field outer border</option>
                <option value="Validation color">Color on validation</option>
                <option value="Field color">Field color</option>
                <option value="Hover">Hover</option>
                <option value="Instruction">Instruction on field</option>
                <option value="Details">Field instruction popup</option>
                <option value="Mandatory">Make field mandatory</option>
              </select>
            </div>
          </div>
          <div class="row stylingJsBorder" style="padding-left: 15px; width:100%;display: none;">
            <div class="col-4 stylingJsBorderType">
              <p style="font-weight: bold;">Select border type:</p>
              <select class="select2 form-control stylingJsBorderTypeSelect" data-css="border-style" required onchange="stylingJs.call(this)">
                <option value="none">No border</option>
                <option value="dotted">Dotted</option>
                <option value="dashed">Dashed</option>
                <option value="solid">Solid</option>
                <option value="double">Double</option>
                <option value="groove">Groove</option>
                <option value="ridge">Ridge</option>
                <option value="inset">Inset</option>
                <option value="outset">Outset</option>
                <option value="dotted dashed solid double">Dotted dashed solid double</option>
              </select>
            </div>
            <div class="col-4 stylingJsBorderWidth">
              <p style="font-weight: bold;">Select border width:</p>
              <div class="input-group">
                <input type="float" class="form-control stylingJsBorderWidthInput" data-css="border-width" list="measure" required onchange="stylingJs.call(this)">
                <span class="input-group-addon" style="margin-top:1px; margin-left:2px"><select class="select2 form-control stylingJsBorderWidthSelect input-group-addon">
                  <option value="px">px</option>
                  <option value="%">%</option>
                  </select>
                </span>
              </div>

              <!--<datalist id="measure">
                <option value="px">
                <option value="%">
              </datalist>-->
            </div>
            <div class="col-4 stylingJsBorderColor">
              <p style="font-weight: bold;">Select border color:</p>
              <input type="color" class="form-control stylingJsBorderColorInput" data-css="border-color" required onchange="stylingJs.call(this)">
            </div>
          </div>
          <div class="row stylingJsValidationColor" style="padding-left: 15px; width:100%;display: none;">
            <div class="stylingJsValidationColorCont" style="width: 100%; display:flex">
              <div class="col-3">
                <p style="font-weight: bold;">Select condition:</p>
                <select class="select2 form-control stylingJsValidationColorCond" required onchange="stylingJsValidationColorCond.call(this)">
                  <option value="Greater then">Greater than</option>
                  <option value="Smaller then">Smaller than</option>
                  <option value="Equal to">Equal to</option>
                  <option value="In">In</option>
                </select>
              </div>
              <div class="col-3 stylingJsValidationColorVal">
                <p style="font-weight: bold;">Select value:</p>
                <select class="select2 form-control" required>
                </select>
              </div>
              <div class="col-3 stylingJsValidationColorValTag" style="display: none;">
                <p style="font-weight: bold;">Select value:</p>
                <select class="select2 form-control" required multiple>
                </select>
              </div>
              <div class="col-3">
                <p style="font-weight: bold;">Select fields to change color:</p>
                <select class="select2 form-control stylingJsValidationColorCol" required multiple >
              </select>
              </div>
              <div class="col-2">
                <p style="font-weight: bold;">Select field color:</p>
                <input type="color" class="form-control stylingJsValidationColorInput" value="#ffffff" data-css="background-color" required >
              </div>
              <div class="col-1">
                <i class="fas fa-plus" onclick="stylingJsValidationColorAdd.call(this)" data-toggle="tooltip" title="Add condition"></i> </i>
              </div>
            </div>
          </div>
          <div class="row stylingJsFieldColor" style="padding-left: 15px; width:100%; display: none;">
            <div class="col-6">
              <p style="font-weight: bold;">Select field color:</p>
              <input type="color" class="form-control stylingJsFieldColorInput" data-css="background-color" value="#ffffff" required onchange="stylingJs.call(this)">
            </div>
          </div>
          <div class="row stylingJsHover" style="padding-left: 15px; width:100%; display: none;">
            <div class="col-6">
              <p style="font-weight: bold;">Set text to display on hover:</p>
              <input type="text" class="form-control stylingJsHoverInput" data-css="data-toggle" required onchange="stylingJs.call(this)">
            </div>
          </div>
          <div class="row stylingJsInstruction" style="width:100%;display:none;justify-content:start;align-items:center;flex-direction: column;">
            <div class="col-6">
              <p style="font-weight: bold;">Set instruction to display:</p>
              <textarea type="text" class="form-control stylingJsInstructionInput" data-css="data-toggle" id="set_instructions" required onchange="stylingJs.call(this)"></textarea>
            </div>
            <div class="col-6" style="float:left;justify-content:start;align-items:center;padding-top:10px;">
              <button type="button" id='addinsurl' class="btn btn-primary" data-toggle="modal" data-target="#addurl">Add URL</button>
            </div>
            <div class="col-5">
              <p style="font-weight: bold;">Select text color :</p>
              <input type="color" id="ins_text_color" class="form-control" required onchange="stylingJs.call(this)" value=#808080>
            </div>
          </div>

          <div class="row stylingJsDetails" style="padding-left: 15px; width:100%; display: none;">
            <div class="col-6">
              <p style="font-weight: bold;">Message to be shown on popup:</p>
              <textarea type="text" class="form-control stylingJsDetailsInput" data-css="data-toggle" required onchange="stylingJs.call(this)"></textarea>
              <p style="font-weight: bold; margin-top:15px;">Set color of information button:</p>
              <input type="color" class="form-control stylingJsDetailsColorInput" data-css="background-color" onchange="stylingJs.call(this)" value="#ffffff">
            </div>
          </div>
          <div class="form-group stylingMandatoryDetails" style="padding-left: 15px; width:100%; display: none;">
            <label style="font-weight: bold;margin-top: 3px;">Make field as mandatory?</label>
              <input class="form-control stylingJsMandatoryInput" type="checkbox" onchange="stylingJs.call(this)" style="width: 2%;margin-left: 15px; margin-bottom:5px;">
            </div>
          </div>
          <div class="row showfieldinfo" style="padding-left: 15px; width:100%;display: none;">
          <div class="col-3" style="margin-bottom:10px;">
            <label class="acies_label col-md-12">linked Table:</label>
            <select onchange="showfieldInfoPopulateColumns(this)" class="select2 form-control showFieldInfoTableName">
              <option value="" disabled selected>linked Table</option>
              {% for i in tableList%}
              <option value="{{i}}">{{i}}</option>
              {%endfor%}
            </select>
          </div>
          <div class="col-3" style="margin-bottom:10px;">
            <label class="acies_label col-md-12">Linked Table Column:</label>
            <select class="select2 form-control linkedColumnsShowFieldInfo">
              <option value="" disabled selected>Linked Table Column</option>
            </select>
          </div>
          <div class="col-3" style="margin-bottom:10px;">
            <label class="acies_label col-md-12">Linked Table Additional Column:</label>
            <select class="select2 form-control addColumnsShowFieldInfo" multiple>

            </select>
          </div>
          </div>
          <div class="row js_action_populate" style="padding-left: 15px; width:100%;display: none;">
            <div class="row">
              <div class='col-3' style="margin-bottom:10px;">
                <label class="acies_label col-md-12">First Dependent Field:</label>
                <select class="select2 form-control first_dependant_field" onchange="jsActionValidation(this)">
                  <option value="" disabled selected>First Dependent Field</option>
                </select>
              </div>
              <div class='col-3' style="margin-bottom:10px;">
                <label class="acies_label col-md-12">Operation:</label>
                <select class="select2 form-control operation">
                  <option value="" disabled selected>Operation</option>
                </select>
              </div>
              <div class='col-3' style="margin-bottom:10px;">
                <label class="acies_label col-md-12">Choose field type:</label>
                <select class="select2 form-control static_field" onchange="staticFieldNewJsActions(this)">
                  <option value="" disabled selected>Field type</option>
                  <option value="static">Static</option>
                  <option value="field_based">Field based</option>
                  <option value="master_field_comparison">Master field comparison</option>
                </select>
              </div>
              <div class='col-3 static_value_div' style="margin-bottom:10px;display:none;">
                <label class="acies_label col-md-12">Static value:</label>
                <input type="number" class="static_value textInput form-control"></input>
              </div>
              <div class='col-3 dependant_value_div' style="margin-bottom:10px;display:none;">
                <label class="acies_label col-md-12">Second Dependent Field:</label>
                <select class="select2 form-control second_dependant_field">
                  <option value="" disabled selected>Second Dependent Field</option>
                </select>
              </div>
              <div class='col-3 master_field_comparison_div_table_list' style="margin-bottom:10px;display:none;">
                <label class="acies_label col-md-12">Master table:</label>
                <select class="select2 form-control master_field_table" onchange="master_field_table_fetch(this)">
                  <option value="" disabled selected>Master table</option>
                  {% for i in tableList%}
                    <option value="{{i}}">{{i}}</option>
                  {%endfor%}
                </select>
              </div>
              <div class='col-3 master_field_comparison_div_table_column' style="margin-bottom:10px;display:none;">
                <label class="acies_label col-md-12">Master column:</label>
                <select class="select2 form-control master_field_column">
                  <option value="" disabled selected>Master column</option>
                </select>
              </div>
              <div class='col-3 master_field_comparison_div' style="margin-bottom:10px;display:none;">
                <label class="acies_label col-md-12">Configure filter:</label>
                <button class="btn btn-primary" type="button" onclick="master_field_comparison_div(this)" data-list=''>Configure filter</button>
              </div>
            </div>
          </div>
          <div class="row val_based_msg" style="padding-left: 15px; width:100%;display: none;">
            <div class='col-5' style="margin-bottom:10px;">
              <label class="acies_label col-md-12">Select variables for input:</label>
              <select class="select2 form-control val_based_msg_global_var" multiple>

              </select>
            </div>

            <div class='col-7' style="margin-bottom:10px;">
              <label class="acies_label col-md-12">Enter the message:</label>
              <input class="form-control val_based_msg_text" type="text" placeholder="Available seats are {seats}">
              <small>*Please enclose the dynamic value from the computation returned into {} braces.</small>
            </div>

            <div class="col-5" style="margin-bottom:20px;">
                <p style="font-weight: bold;">Select text color:</p>
                <input type="color" class="form-control val_based_msg_txt_color" data-css="background-color" required="">
            </div>

            <div class="row stylingJsValidationColor" style="width: 100%; display:flex">
              <div class="col-2" style="margin-bottom:20px;">
                <button class="btn btn-primary" onclick="stylingJsValidationColorAdd.call(this)" data-toggle="tooltip" title="Add condition" >Add Condition</button>
              </div>
              <div class='col-5' style="margin-bottom:10px;">
              <button type="button" class="btn btn-primary val_based_msg_global_var_eq" onmouseover="configureValComp.call(this)">Equation Builder</button>
            </div>
            </div>
          </div>

			</div>
        </div>
      </div>
    </div>
  </div>
  `)
}
function formattingContentMultiple(){
  return(`
  <div class="card collapsed-card masterfomatting" style="margin-top:10px;">
    <div class="card-header row">
      <div class="form-group col-7" style="display:flex; margin-bottom: 0px;">
          <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select Table:</p>
        <div class="col-8" style="margin-left:15px;">
        <select class="select2 form-control tableNames" onchange="formattingTableMultiple(this)"  style="margin-left: 5px;">
          <option value="" disabled selected>Select Table</option>
        </select>
        </div>
      </div>

          <div class="col-4">
            <div class="card-tools float-right">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              <button type="button" class="btn btn-tool" onclick="formattingRemoveContentMultiple(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
          </div>
        </div>
    </div>
    <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
      <div class="row plus_button">
        <div class="col-12">
          <div class="float-right" style="margin-right: 6px;">
            <button type="button" class="btn btn-tool plus" onclick="formattingValuesContentMultiple(this)"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
          </div>
        </div>
      </div>
      <div class="default-values">
        <div  style="width: 100%; display:flex;margin-top:1rem;">
          <div class="col-3" >
            <p style="font-weight: bold;">Select column:</p>
            <div style="display:none;">
            <select class="select2 form-control columnNames" data-format="field_name" >
            </select>
            </div>
          </div>
          <div class="col-3">
            <p style="font-weight: bold;">Select condition:</p>
          </div>
          <div class="col-3 conditional_input_value">
            <p style="font-weight: bold;">Select value:</p>
          </div>
          <div class="col-2">
            <p style="font-weight: bold;">Bg color:</p>
          </div>
        </div>
      </div>

    </div>
    </div>
  </div>
  </div>
  `)
}
function formattingValuesMultiple(obj){
  var selectedTable = $(obj).parent().parent().parent().parent().find('.tableNames').val()
  var columnName = $(obj).val()
  $.ajax({
    url: window.location.pathname,

    data: {
      'model_name': selectedTable,
      'field_name': columnName,
      'operation': 'conditional_table_value',
    },
    type: "POST",
    dataType: "json",
    success: function (data) {
      $(obj).parent().parent().parent().parent().find('.card-body').find('.values').empty()
      if(data.hasOwnProperty('field_data')){
        data_list =JSON.parse(data.field_data)
        for(let i=0;i<data_list.length;i++){
          $(obj).parent().parent().parent().parent().find('.card-body').find('.values').append(`<option value='${data_list[i]}'>${data_list[i]}</option>`)
        }
      }
      if ($(obj).attr('data-list')){
        var parsedAttrdata = JSON.parse($(obj).attr('data-list'))
        var objPlusBtn = $(obj).parent().parent().parent().parent().find('.plus')
        for (var o in parsedAttrdata){
          var lengthOfROwsToadd =  parsedAttrdata[o].length
          for (let k = 0; k < lengthOfROwsToadd; k++){
              formattingValuesContentMultiple(objPlusBtn,parsedAttrdata[o][k])
          }
        }
      }
    },
    error: function () {
      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
    }
  })
}
function formattingTableMultiple(obj){

  var selectedTable = $(obj).val()
    $.ajax({
      url: window.location.pathname,

      data: {
        'operation': 'fecthing_verbose_name_group_by',
        'model_name': selectedTable,
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        var data = data.data
        var columnOptions = ''
        for (j in data) {
          columnOptions +=  `<option value="${data[j]['originalName']}" data-datatype="${data[j]['data-type']}">${data[j]['verboseName']}</option>`
        }
        var lastCard = $(obj).closest('.masterfomatting').find('.default-values').find('select')
        $(lastCard).empty()
        $(lastCard).append('<option value="" disabled selected>Select Columns</option>')
        $(lastCard).append(columnOptions)
        if($(obj).attr('data-list') != undefined){
          var parssedAttrData = JSON.parse($(obj).attr('data-list'))
          for(let h in parssedAttrData){
            formattingValuesContentMultiple($(obj).closest('.masterfomatting').find('.plus_button'),parssedAttrData[h])
          }
        }
        if ($(obj).attr('old_config') != undefined){
          var parssedAttrData = JSON.parse($(obj).attr('old_config'))
          for (let j in parssedAttrData[Object.keys(parssedAttrData)[0]]){
            formattingValuesContentMultiple($(obj).closest('.masterfomatting').find('.plus_button'),undefined,parssedAttrData[Object.keys(parssedAttrData)[0]][j],Object.keys(parssedAttrData)[0])
          }
        }
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })
}
function formattingValuesContentMultiple(obj,dict,old_config,column){
  var default_values = $(obj).closest('.card-body').find('.default-values').find('select').html()
  $(obj).closest('.card-body').append(`
  <div class="conditional_body masterfomatting" style="width: 100%; display:flex;margin-top:1rem;">
    <div class="col-3">

      <select class="select2 form-control columnNames" onchange="onChangeConditionColumnFormatting(this)" data-format="field_name">
      </select>
    </div>
    <div class="col-3">

      <select class="select2 form-control conditional_condition" onchange="onChangeConditionFormatting(this)" data-format="condition"></select>
    </div>
    <div class="col-3 conditional_input_value">

      <div class="conditional_format_value_input">
        <select class="select2 form-control" data-format="input_value"></select>
    </div>
    </div>
    <div class="col-2">

      <input type="color" class="form-control conditional_color_input" data-css="background-color" value="#ffffff" data-format="bg_color">
    </div>
    <div class="col-1">
      <i class="fas fa-remove" onclick="removeConditionColumnFormatting(this)" style="cursor:pointer;"></i>
    </div>
  </div>`)
  var addedCard = $(obj).closest('.card-body').find('.masterfomatting').slice(-1)
  $(addedCard).find('select').each(function(){
    $(this).select2()
  })
  $(addedCard).find('[data-format="field_name"]').append(default_values)
  $(addedCard).find('[data-format="field_name"]').select2()
  if (dict!= undefined){
    $(addedCard).find('[data-format="field_name"]').val(dict['field_name']).trigger('change')
    $(addedCard).find('[data-format="condition"]').val(dict['condition']).trigger('change')
    $(addedCard).find('[data-format="bg_color"]').val(dict['bg_color']).trigger('change')
    if ($(addedCard).find(`[data-format='input_value']`).hasClass('select2_condition_class')){
      $(addedCard).find(`[data-format='input_value']`).empty()
      if (dict['condition'] == 'In'){
        var parssedInputValue = dict['input_value']
        for (let h in parssedInputValue){
          $(addedCard).find(`[data-format='input_value']`).append(`<option value="${parssedInputValue[h]}">${parssedInputValue[h]}</option>`)
        }
        $(addedCard).find(`[data-format='input_value']`).val(parssedInputValue).trigger('change')
      }else{
        $(addedCard).find(`[data-format='input_value']`).append(`<option value="${dict['input_value']}">${dict['input_value']}</option>`)
        $(addedCard).find(`[data-format='input_value']`).val(dict['input_value']).trigger('change')
      }


    }else{
      $(addedCard).find(`[data-format='input_value']`).val(dict['input_value']).trigger('change')
    }

  }
  if (old_config != undefined && column != undefined){
    $(addedCard).find('[data-format="field_name"]').val(column).trigger('change')
    $(addedCard).find('[data-format="condition"]').val('Equal to').trigger('change')
    $(addedCard).find('[data-format="bg_color"]').val(Object.values(old_config)[0]).trigger('change')
    $(addedCard).find('[data-format="input_value"]').empty();
    $(addedCard).find('[data-format="input_value"]').append(`<option value="${Object.keys(old_config)[0]}">${Object.keys(old_config)[0]}</option>`)
    $(addedCard).find('[data-format="input_value"]').val(Object.keys(old_config)[0]).trigger('change')
    $(addedCard).find('.select2_condition_class').select2({
      tags: true
    })
  }
  $(addedCard).find('select').each(function(){
    $(this).select2()
  })
  $(addedCard).find('.select2_condition_class').select2({
    tags: true
  })
}
function populateFrmattingColumnsMultiple(tableName,dict){
  var content = formattingContentMultiple()
  $('#formattingColumns').find('.formatting-body').append(content)
  var tableNames = $('#selectTablePC').val()
  var lastCard = $('#formattingColumns').find('.formatting-body').find('.masterfomatting').slice(-1)
  $(lastCard).find('.tableNames').empty()
  $(lastCard).find('.tableNames').append(`<option value="" disabled selected>Select Tables</option>`)
  for (let i in tableNames){
    $(lastCard).find('.tableNames').append(`<option value="${tableNames[i]}">${tableNames[i]}</option>`)
  }
  if (dict!=undefined){
    $(lastCard).find('.tableNames').attr('data-list',JSON.stringify(dict))
  }
  if(tableName!= undefined){
    $(lastCard).find('.tableNames').val(tableName).trigger('change')
  }
  $('#formattingColumns').find('.formatting-body').find('select').each(function(){
    $(this).select2()
  })
}
function formattingRemoveContentMultiple(obj){
  $(obj).parent().parent().parent().parent().remove()
}
function populateFrmattingColumnsMultiple_old_config(old_config){
  populateFrmattingColumnsMultiple()
  var lastCard = $('#formattingColumns').find('.formatting-body').find('.masterfomatting').slice(-1)
  for (let i in old_config){
    $(lastCard).find('.tableNames').val(i).trigger('change')
    $(lastCard).find('.tableNames').attr('old_config',JSON.stringify(old_config[i]))
  }
}
function formattingColumnMultiple(obj){
  var attrData = $(obj).attr('data-list')
  if (attrData == ''|| attrData =='{}' || attrData =='null'){

  }else {
    $('#formattingColumns').find('.formatting-body').empty()
    var parsedAttrdata = JSON.parse(attrData)
    var tableNames = $('#selectTablePC').val()
    if('new-config-formatting' in parsedAttrdata){
      for (let i in parsedAttrdata['new-config-formatting']){
        populateFrmattingColumnsMultiple(i,parsedAttrdata['new-config-formatting'][i])
      }
    }else{
      for(let k in parsedAttrdata){
        populateFrmattingColumnsMultiple_old_config(parsedAttrdata[k])
      }
    }
  }
  var attrData2 = $(obj).attr('data-listtwo')
  if (attrData2 == ''|| attrData2 =='{}'|| attrData2 == 'null'){

  }else {
    var tableNames = $('#selectTablePC').val()
    var parsedAttrdata2 = JSON.parse(attrData2)
    j = 0
    for (var i in parsedAttrdata2){
      var content = TitleRowMultipleContent()
      $('#formattingColumns').find('.formatting-body-title-row').append(content)
      var singleCard = $('#formattingColumns').find('.formatting-body-title-row').find('.masterfomatting').eq(j)
      for (let i in tableNames){
        $(singleCard).find('.card-header').find('.columnNames').append(`<option value="${tableNames[i]}">${tableNames[i]}</option>`)
      }
      $(singleCard).find('.card-header').find('.columnNames').val(i).trigger('change')
      $(singleCard).find('[data-textmain]').val(parsedAttrdata2[i]['main']['textColor']).trigger('change')
      $(singleCard).find('[data-bgmain]').val(parsedAttrdata2[i]['main']['bgColor']).trigger('change')
      $(singleCard).find('[data-fontmain]').val(parsedAttrdata2[i]['main']['font']).trigger('change')
      $(singleCard).find('[data-sizemain]').val(parsedAttrdata2[i]['main']['fontSize']).trigger('change')
      if (Object.keys(parsedAttrdata2[i]['exception']).length > 0){
        populateTitleRowExceptionMultiple($(singleCard).find('.exceptionBtn'),parsedAttrdata2[i]['exception'])
      }
      j = j + 1
    }
  }
  $('#formattingColumns').find('.columns-headers-hide-multiple-table').find('.masterfomatting').remove()
  var attrData3 = $(obj).attr('data-listthree')
  if (attrData3 == ''|| attrData3 =='{}'|| attrData3 == 'null'){

  }else{
    var parsedAttrdata3 = JSON.parse(attrData3)
    var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record']`).prop('checked')
    var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
    var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
    var viewRecord = $('.listview_actionSubElements').find(`[id='View Record']`).prop('checked')
    var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
    var groupTogether = $('#action_btn_config_group_together').prop('checked')
    var requiredTag = $('#notrequiredListView_Action').prop('checked')
    for (let p in  parsedAttrdata3){
      columnsHideMultipleTable()
      var lastCard = $('#formattingColumns').find('.columns-headers-hide-multiple-table').find('.masterfomatting').slice(-1)
      $(lastCard).find('.columnNames').attr('data-list',JSON.stringify(parsedAttrdata3[p]))
      $(lastCard).find('.columnNames').val(p).trigger('change')
    }
  }
  $('#formattingColumns').find('select').each(function(){
    $(this).select2()
  })

}

function saveFormattingColumnsMultiple(obj){
  var cards = $('#formattingColumns').find('.formatting-body').children()
  var lengthOfCards = cards.length;
  var fullTableValues = {}
  for (let i = 0; i < lengthOfCards; i++) {
    var values = []
    var singleCard = $('#formattingColumns').find('.formatting-body').children().eq(i)
    var selectedTable = $(singleCard).find('.tableNames').val()
    var selectedColumn = $(singleCard).find('.columnNames').val()
    var rows = $(singleCard).find('.masterfomatting')
    var lengthOfrow = rows.length;
    for (let k = 0; k < lengthOfrow; k++){
      var singleRowVal = {}
      var singleRow = rows.eq(k)
      $(singleRow).find('[data-format]').each(function(){
        singleRowVal[$(this).attr('data-format')] = $(this).val()
      })
      values.push(singleRowVal)
    }
    fullTableValues[selectedTable] = values
  }
  $('#formattingColumnBtn').attr('data-list',JSON.stringify({'new-config-formatting':fullTableValues}))
}

function formattingContent_mul(){
  return(`
  <div class="conditional_body masterfomatting" style="width: 100%; display:flex;margin-top:1rem;">
    <div class="col-3">
      <p style="font-weight: bold;">Select column:</p>
      <select class="select2 form-control columnNames" onchange="onChangeConditionColumnFormatting(this)" data-format="field_name">
      </select>
    </div>
    <div class="col-3">
      <p style="font-weight: bold;">Select condition:</p>
      <select class="select2 form-control conditional_condition" onchange="onChangeConditionFormatting(this)" data-format="condition"></select>
    </div>
    <div class="col-3 conditional_input_value">
      <p style="font-weight: bold;">Select value:</p>
      <div class="conditional_format_value_input">
        <select class="select2 form-control" data-format="input_value"></select>
    </div>
    </div>
    <div class="col-2">
      <p style="font-weight: bold;">Select bg color:</p>
      <input type="color" class="form-control conditional_color_input" data-css="background-color" value="#ffffff" data-format="bg_color">
    </div>
    <div class="col-1">
      <i class="fas fa-remove" onclick="removeConditionColumnFormatting(this)" style="cursor:pointer;padding-top:3.4em;"></i>
    </div>

  </div>
  `)
}
function formattingValuesContent_mul(obj,dict){
  var firstCardhtml =$(obj).parent().parent().parent().find('.values').html()
  $(obj).parent().parent().parent().append(`
  <div class="row lowerFormatting" style="margin-bottom:10px;">
    <div class="col-5" >

      <select data-col="column-name" class="select2 form-control values">
        <option value="" disabled selected>Select Values</option>
      </select>
    </div>
    <div class="col-5" >

      <input type="color" class="form-control stylingJsFieldColorInput" data-val="bg-color" value="#ffffff" required>
    </div>
    <div class="col-2 align-self-center">
      <button type="button" class="btn btn-tool" onclick="formattingRemoveValueContent_mul(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
    </div>
  </div>
  `)
  var addedCard = $(obj).parent().parent().parent().find('.values').eq(-1)
  $(addedCard).empty()
  $(addedCard).append(firstCardhtml)
  if (dict != undefined){
    var singleCard = $(obj).parent().parent().parent()
    var singleRow = $(singleCard).find('.lowerFormatting').slice(-1)
    $(singleRow).find('[data-col]').val(Object.keys(dict).toString()).trigger('change')
    $(singleRow).find('[data-val]').val(Object.values(dict).toString()).trigger('change')

  }
  $('#formattingColumns_mul').find('.formatting-body').find('select').each(function(){
    $(this).select2()
  })
}
function formattingRemoveValueContent_mul(obj){
  $(obj).parent().parent().remove()
}
function formattingValues_mul(obj){
  var selectedTable = $('#selectTablePC').val()
  var columnName = $(obj).val()
  $.ajax({
    url: window.location.pathname,

    data: {
      'model_name': selectedTable,
      'field_name': columnName,
      'operation': 'conditional_table_value',
    },
    type: "POST",
    dataType: "json",
    success: function (data) {
      $(obj).parent().parent().parent().parent().find('.card-body').find('.values').empty()
      if(data.hasOwnProperty('field_data')){
        data_list =JSON.parse(data.field_data)
        for(let i=0;i<data_list.length;i++){
          $(obj).parent().parent().parent().parent().find('.card-body').find('.values').append(`<option value='${data_list[i]}'>${data_list[i]}</option>`)
        }

        if ($(obj).attr('table')){
          var parsedAttrdata = JSON.parse($(obj).attr('table'))
          var objPlusBtn = $(obj).parent().parent().parent().parent().find('.plus')
          for (let i in parsedAttrdata){
            formattingValuesContent_mul(objPlusBtn,parsedAttrdata[i])
          }
        }
      }
    },
    error: function () {
      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
    }
  })


}
function formattingRemoveContent_mul(obj){
  $(obj).parent().parent().parent().parent().remove()
}
function populateFrmattingColumns_mul(obj){
  var content = formattingContent_mul()
  var selectedTable = $('#selectTablePC').val()
  var columnOptions = ''
    $.ajax({
      url: window.location.pathname,

      data: {
        'operation': 'fecthing_verbose_name_group_by',
        'model_name': selectedTable,
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        var data = data.data
        $('#formattingColumns_mul').find('.formatting-body').append(content)
        for (j in data) {
            columnOptions +=  `<option value="${data[j]['originalName']}" data-datatype="${data[j]['data-type']}">${data[j]['verboseName']}</option>`
        }
        var lastCard = $('#formattingColumns_mul').find('.formatting-body').find('.masterfomatting').eq(-1)
        $(lastCard).find('.columnNames').empty()
        $(lastCard).find('.columnNames').append(`<option value="" disabled selected>Select Columns</option>`)
        $(lastCard).find('.columnNames').append(columnOptions)
        $(lastCard).find('select').each(function(){
    $(this).select2()
  })
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })
}
function saveFormattingColumns_mul(obj){
  var cards = $('#formattingColumns_mul').find('.formatting-body').find('.masterfomatting')
  var lengthOfCards = cards.length;
  var fullValues = []
  for (let i = 0; i < lengthOfCards; i++) {
    var values = {}
    var singleCard = $('#formattingColumns_mul').find('.formatting-body').find('.masterfomatting').eq(i)
    $(singleCard).find('[data-format]').each(function(){
      values[$(this).attr('data-format')] = $(this).val()
    })
    fullValues.push(values)
  }
  var storedValue = {}
  storedValue['new-config-formatting'] = {[`${$('#selectTablePC').val()}`]:fullValues}
  $('#formattingColumnBtn_mul').attr('data-list',JSON.stringify(storedValue))
}
function group_by_action_btn_mul(obj){
  var attrData = $(obj).attr('data-list')
  var selectedTable = $('#selectTablePC').val()
  if (attrData == ''|| attrData =='{}' || attrData == 'null'){
    $.ajax({
      url: window.location.pathname,

      data: {
        'operation': 'fecthing_verbose_name_group_by',
        'model_name': selectedTable,
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        var columnOptions = ''
        var data = data.data
        for (j in data) {
          columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
        }
        var lastCard = $('#group_by_action_mul').find('.group_by_action_columns_mul').find('select').eq(0)
        $(lastCard).empty()
        $(lastCard).append(columnOptions)
        $(lastCard).select2()
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })

  }else{
    group_by_action_reset_mul()
    var parsedAttrdata = JSON.parse(attrData)
    if (multable_viewname in parsedAttrdata){
      $('#group_by_action_mul').find('#group_by_action_checkbox_mul').prop('checked',parsedAttrdata[multable_viewname]['group_by_switch'])
      if ('group_by_switch_user_configuration' in parsedAttrdata[multable_viewname]){
        $('#group_by_action_mul').find('#group_by_action_checkbox_user_configuration_mul').prop('checked',parsedAttrdata[multable_viewname]['group_by_switch_user_configuration'])
      }
      if (!parsedAttrdata[multable_viewname]['group_by_switch']){

          $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'fecthing_verbose_name_group_by',
              'model_name': selectedTable,
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              var count = 0
              var columnOptions = ''
              var data = data.data
              for (j in data) {
                columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
              }
              for (let i in parsedAttrdata[multable_viewname]['levels']){
              var level2 = `<div class="levels">
                <p style="font-weight: bold;padding-top:1rem;">Level ${parseInt(count)+1}:</p>
                <div class="row">
                  <div class="col-11">
                    <select class="select2 form-control"></select>
                  </div>
                  <div class="col-1">
                    <button type="button" class="btn btn-tool" onclick="group_by_remove_content(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                  </div>
                </div>
                </div>
                `
              $('#group_by_action_mul').find('.group_by_action_levels_mul').append(level2)
              var lastCard = $('#group_by_action_mul').find('.group_by_action_levels_mul').find('.levels').eq(-1)
              $(lastCard).find('select').empty()
              $(lastCard).find('select').append(`<option value="" disabled selected>Select Columns</option>`)
              $(lastCard).find('select').append(columnOptions)
              $(lastCard).find('select').each(function(){
    $(this).select2()
  })
              $(lastCard).find('select').val(parsedAttrdata[multable_viewname]['levels'][i]).trigger('change')
              count ++
            }
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
          })

        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'fecthing_verbose_name_group_by',
            'model_name': selectedTable,
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            var columnOptions = ''
            $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').find('.operation').remove()
            var data = data.data
            for (j in data) {
              columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
            }
            var lastCard = $('#group_by_action_mul').find('.group_by_action_columns_mul').find('select').eq(0)
            $(lastCard).empty()
            $(lastCard).append(columnOptions)
            $(lastCard).select2()
            lastCard.val(parsedAttrdata[multable_viewname]['selected_columns']).trigger('change')
            for(let k in parsedAttrdata[multable_viewname]['operations']){
              $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').find('.operation').eq(k).find('select').val(parsedAttrdata[multable_viewname]['operations'][k]).trigger('change')
            }

          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })

      }else{

        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'fecthing_verbose_name_group_by',
            'model_name': selectedTable,
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            var columnOptions = ''
            var data = data.data
            for (j in data) {
              columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
            }
            var lastCard = $('#group_by_action_mul').find('.group_by_action_columns_mul').find('select').eq(0)
            $(lastCard).empty()
            $(lastCard).append(columnOptions)
            $(lastCard).select2()
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })
      }
    }else if ($('#selectTablePC').val()in parsedAttrdata){
      $('#group_by_action_mul').find('#group_by_action_checkbox_mul').prop('checked',parsedAttrdata[$('#selectTablePC').val()]['group_by_switch'])
      if ('group_by_switch_user_configuration' in parsedAttrdata[$('#selectTablePC').val()]){
        $('#group_by_action_mul').find('#group_by_action_checkbox_user_configuration_mul').prop('checked',parsedAttrdata[$('#selectTablePC').val()]['group_by_switch_user_configuration'])
      }
      if (!parsedAttrdata[$('#selectTablePC').val()]['group_by_switch']){

          $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'fecthing_verbose_name_group_by',
              'model_name': selectedTable,
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              var count = 0
              var columnOptions = ''
              var data = data.data
              for (j in data) {
                columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
              }
              for (let i in parsedAttrdata[$('#selectTablePC').val()]['levels']){
              var level2 = `<div class="levels">
                <p style="font-weight: bold;padding-top:1rem;">Level ${parseInt(count)+1}:</p>
                <div class="row">
                  <div class="col-11">
                    <select class="select2 form-control"></select>
                  </div>
                  <div class="col-1">
                    <button type="button" class="btn btn-tool" onclick="group_by_remove_content(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                  </div>
                </div>
                </div>
                `
              $('#group_by_action_mul').find('.group_by_action_levels_mul').append(level2)
              var lastCard = $('#group_by_action_mul').find('.group_by_action_levels_mul').find('.levels').eq(-1)
              $(lastCard).find('select').empty()
              $(lastCard).find('select').append(`<option value="" disabled selected>Select Columns</option>`)
              $(lastCard).find('select').append(columnOptions)
              $(lastCard).find('select').each(function(){
    $(this).select2()
  })
              $(lastCard).find('select').val(parsedAttrdata[$('#selectTablePC').val()]['levels'][i]).trigger('change')
              count ++
            }
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
          })

        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'fecthing_verbose_name_group_by',
            'model_name': selectedTable,
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            var columnOptions = ''
            $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').find('.operation').remove()
            var data = data.data
            for (j in data) {
              columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
            }
            var lastCard = $('#group_by_action_mul').find('.group_by_action_columns_mul').find('select').eq(0)
            $(lastCard).empty()
            $(lastCard).append(columnOptions)
            $(lastCard).select2()
            lastCard.val(parsedAttrdata[$('#selectTablePC').val()]['selected_columns']).trigger('change')
            for(let k in parsedAttrdata[$('#selectTablePC').val()]['operations']){
              $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').find('.operation').eq(k).find('select').val(parsedAttrdata[$('#selectTablePC').val()]['operations'][k]).trigger('change')
            }

          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })

      }else{

        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'fecthing_verbose_name_group_by',
            'model_name': selectedTable,
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            var columnOptions = ''
            var data = data.data
            for (j in data) {
              columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
            }
            var lastCard = $('#group_by_action_mul').find('.group_by_action_columns_mul').find('select').eq(0)
            $(lastCard).empty()
            $(lastCard).append(columnOptions)
            $(lastCard).select2()
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })
      }
    }

  }

  $('#group_by_action_mul').find('select').each(function(){
    $(this).select2()
  })
}
function group_by_action_checkbox_onchange_mul(obj){
  if ($(obj).prop('checked')){
    $('#group_by_action_mul').find('.add_level').prop('disabled',true);
    $('#group_by_action_mul').find('.group_by_action_levels_mul').find('.levels').remove()
    $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').find('.operation').remove()
    $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').find('select').eq(0).val([]).trigger('change');
    $('#group_by_action_mul').find('.group_by_action_columns_mul').find('select').eq(0).prop('disabled',true);
  }else{
    $('#group_by_action_mul').find('.add_level').prop('disabled',false);
    $('#group_by_action_mul').find('.group_by_action_columns_mul').find('select').eq(0).val([]).trigger('change')
    $('#group_by_action_mul').find('.group_by_action_columns_mul').find('select').eq(0).prop('disabled',false);
  }
}
function group_by_action_add_levels_mul(obj){

  var count = $('#group_by_action_mul').find('.group_by_action_levels_mul').find('.levels').length
  var level2 = `<div class="levels">
    <p style="font-weight: bold;padding-top:1rem;">Level ${count+1}:</p>
    <div class="row">
      <div class="col-11">
        <select class="select2 form-control"></select>
      </div>
      <div class="col-1">
        <button type="button" class="btn btn-tool" onclick="group_by_remove_content(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
      </div>
    </div>
  </div>
    `
  if (count >= 5){
    Swal.fire({text:"Max levels can be only 5",icon:"warning"})
  }else{
      var selectedTable = $('#selectTablePC').val()
      $.ajax({
        url: window.location.pathname,

        data: {
          'operation': 'fecthing_verbose_name_group_by',
          'model_name': selectedTable,
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          var columnOptions = ''
          $('#group_by_action_mul').find('.group_by_action_levels_mul').append(level2)
          var data = data.data
            for (j in data) {
              columnOptions +=  `<option data-type="${data[j]['data-type']}" value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
            }
          var lastCard = $('#group_by_action_mul').find('.group_by_action_levels_mul').find('.levels').eq(-1)
          $(lastCard).find('select').empty()
          $(lastCard).find('select').append(`<option value="" disabled selected>Select Columns</option>`)
          $(lastCard).find('select').append(columnOptions)
          $(lastCard).find('select').each(function(){
    $(this).select2()
  })
        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })
    }
}
function group_by_action_reset_mul(obj){
  $('#group_by_action_mul').find('.group_by_action_levels_mul').find('.levels').remove()
  $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').find('.operation').remove()
  $('#group_by_action_mul').find('.group_by_action_columns_mul').find('select').eq(0).val([]).trigger('change')
}
function group_by_action_columns_operation_mul(obj){
  var dict_a = {}
  $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').find('.operation').each(function(){
    dict_a[$(this).find('p').attr('data-list')] = $(this).find('select').val()
  })
  $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').find('.operation').remove()
  var value = $(obj).val()
  var optionvalues = []
  if (value.length > 0){
    for (let k in value){
      var columnOptions = ``
      var seldatatype = $('#group_by_action_mul').find('.group_by_action_columns_mul').find('select').eq(0).find(`option[value='${value[k]}']`).attr('data-type')
      if (!((seldatatype === 'IntegerField') || (seldatatype === 'BigIntegerField') || (seldatatype === 'FloatField') || (seldatatype === 'AutoField'))){
        optionvalues = ['Count', 'Count Distinct', 'First', 'Last', 'Earliest','Latest','Value']
      }else if (((seldatatype === 'IntegerField') || (seldatatype === 'BigIntegerField') || (seldatatype === 'FloatField') || (seldatatype === 'AutoField'))){
        optionvalues = ['Sum', 'Count', 'Count Distinct', 'Average', 'Skewness', 'Kurtosis', 'Median', 'Variance', 'Standard Deviation', 'Minimum', 'Maximum', 'Percentage of Total','Value']
      }
      for (let i in optionvalues){
        columnOptions += `
        <option value="${optionvalues[i]}">${optionvalues[i]}</option>
        `
      }
      var operation = `<div class="operation">
        <p style="font-weight: bold;padding-top:1rem;" data-list="${value[k]}">Operation - ${value[k]}:</p>
        <select class="select2 form-control">
          <option value="----">----</option>
          ${columnOptions}
        </select>
      </div>
      `
      $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').append(operation)
    }
    $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').find('.operation').each(function(){
      if(dict_a.hasOwnProperty($(this).find('p').attr('data-list'))){
        $(this).find('select').val(dict_a[$(this).find('p').attr('data-list')]).trigger('change')
      }
    })
  }
  $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').find('.operation').find('select').each(function(){
    $(this).select2()
  })
}
function group_by_action_save_mul(obj){
  var values ={}
  values['group_by_switch'] = $('#group_by_action_mul').find('#group_by_action_checkbox_mul').prop('checked')
  values['group_by_switch_user_configuration'] = $('#group_by_action_mul').find('#group_by_action_checkbox_user_configuration_mul').prop('checked')
  if (!$('#group_by_action_mul').find('#group_by_action_checkbox_mul').prop('checked')){
    var levels = $('#group_by_action_mul').find('.group_by_action_levels_mul').find('.levels')
    values['levels'] = []
    for (let i = 0; i < levels.length; i++){
      var singleLevel = $('#group_by_action_mul').find('.group_by_action_levels_mul').find('.levels').eq(i)
      var levelName = singleLevel.find('p').text()
      values['levels'].push($(singleLevel).find('select').val())
    }
    values['operations'] = []
    var operation = $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').find('.operation')
    for (let k = 0; k < operation.length; k++){
      var singleOperation = $('#group_by_action_mul').find('.group_by_action_columns_mul').find('.operation_div').find('.operation').eq(k)
      values['operations'].push($(singleOperation).find('select').val())
    }
    values['selected_columns'] = $('#group_by_action_mul').find('.group_by_action_columns_mul').find('select').eq(0).val()
  }
  $('#group_by_action_btn_sub_mul').attr('data-list',JSON.stringify({[multable_viewname]:values}))
}
function formattingColumn_mul(obj){
  var attrData = $(obj).attr('data-list')
  if (attrData == ''|| attrData =='{}'|| attrData == 'null'){

  }else {
    var parsedAttrdata = JSON.parse(attrData)
    var selectedTable = $('#selectTablePC').val()
    if('new-config-formatting' in parsedAttrdata){
      $.ajax({
        url: window.location.pathname,

        data: {
          'operation': 'fecthing_verbose_name_group_by',
          'model_name': selectedTable,
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          var data = data.data
          $('#formattingColumns_mul').find('.formatting-body').empty()
          for (var i in parsedAttrdata['new-config-formatting'][selectedTable]){
            var content = formattingContent();
            var columnOptions = ''
            $('#formattingColumns_mul').find('.formatting-body').append(content)
            for (j in data) {
              columnOptions +=  `<option value="${data[j]['originalName']}" data-datatype="${data[j]['data-type']}">${data[j]['verboseName']}</option>`
            }
            var lastCard = $('#formattingColumns_mul').find('.formatting-body').find('.masterfomatting').slice(-1)
            $(lastCard).find('.columnNames').empty()
            $(lastCard).find('.columnNames').append(`<option value="" disabled selected>Select Columns</option>`)
            $(lastCard).find('.columnNames').append(columnOptions)
            $(lastCard).find('.columnNames').val(parsedAttrdata['new-config-formatting'][selectedTable][i]['field_name']).trigger('change')
            $(lastCard).find('.conditional_condition').val(parsedAttrdata['new-config-formatting'][selectedTable][i]['condition']).trigger('change')
            $(lastCard).find(`[data-format='bg_color']`).val(parsedAttrdata['new-config-formatting'][selectedTable][i]['bg_color']).trigger('change')
            if ($(lastCard).find(`[data-format='input_value']`).hasClass('select2_condition_class')){
              $(lastCard).find(`[data-format='input_value']`).empty()
              if (parsedAttrdata['new-config-formatting'][selectedTable][i]['condition'] == 'In'){
                var parssedInputValue = parsedAttrdata['new-config-formatting'][selectedTable][i]['input_value']
                for (let h in parssedInputValue){
                  $(lastCard).find(`[data-format='input_value']`).append(`<option value="${parssedInputValue[h]}">${parssedInputValue[h]}</option>`)
                }
                $(lastCard).find(`[data-format='input_value']`).val(parssedInputValue).trigger('change')
              }else{
                $(lastCard).find(`[data-format='input_value']`).append(`<option value="${parsedAttrdata['new-config-formatting'][selectedTable][i]['input_value']}">${parsedAttrdata['new-config-formatting'][selectedTable][i]['input_value']}</option>`)
                $(lastCard).find(`[data-format='input_value']`).val(parsedAttrdata['new-config-formatting'][selectedTable][i]['input_value']).trigger('change')
              }


            }else{
              $(lastCard).find(`[data-format='input_value']`).val(parsedAttrdata['new-config-formatting'][selectedTable][i]['input_value']).trigger('change')
            }
            $(lastCard).find('select').each(function(){
    $(this).select2()
  })
            $(lastCard).find('.select2_condition_class').select2({
              tags: true
            })
        }

        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })
    }else{
      $.ajax({
        url: window.location.pathname,

        data: {
          'operation': 'fecthing_verbose_name_group_by',
          'model_name': selectedTable,
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          var data = data.data
          $('#formattingColumns_mul').find('.formatting-body').empty()
          for (var i in parsedAttrdata){
            for (var k in parsedAttrdata[i]){
              var content = formattingContent();
              var columnOptions = ''
              $('#formattingColumns_mul').find('.formatting-body').append(content)
              for (j in data) {
                columnOptions +=  `<option value="${data[j]['originalName']}" data-datatype="${data[j]['data-type']}">${data[j]['verboseName']}</option>`
              }
              var lastCard = $('#formattingColumns_mul').find('.formatting-body').find('.masterfomatting').slice(-1)
              $(lastCard).find('.columnNames').empty()
              $(lastCard).find('.columnNames').append(`<option value="" disabled selected>Select Columns</option>`)
              $(lastCard).find('.columnNames').append(columnOptions)
              $(lastCard).find('.columnNames').val(i).trigger('change')
              $(lastCard).find('.conditional_condition').val('Equal to').trigger('change')

              $(lastCard).find(`[data-format='bg_color']`).val(Object.values(parsedAttrdata[i][k])[0]).trigger('change')
              if ($(lastCard).find(`[data-format='input_value']`).hasClass('select2_condition_class')){
                $(lastCard).find(`[data-format='input_value']`).empty()
                $(lastCard).find(`[data-format='input_value']`).append(`<option value="${Object.keys(parsedAttrdata[i][k])[0]}">${Object.keys(parsedAttrdata[i][k])[0]}</option>`)
                $(lastCard).find(`[data-format='input_value']`).val(Object.keys(parsedAttrdata[i][k])[0]).trigger('change')
              }else{
                $(lastCard).find(`[data-format='input_value']`).val(Object.keys(parsedAttrdata[i][k])[0]).trigger('change')
              }
              $(lastCard).find('select').each(function(){
    $(this).select2()
  })
              $(lastCard).find('.select2_condition_class').select2({
                tags: true
              })
            }
        }

        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })
    }
  $('#formattingColumns_mul').find('.formatting-body').find('select').each(function(){
    $(this).select2()
  })
  }
  var attrData2 = $(obj).attr('data-listtwo')
  if (attrData2 == ''|| attrData2 =='{}'|| attrData2 == 'null'){

  }else {
    var selectedTable = $('#selectTablePC').val()
    var parsedAttrdata2 = JSON.parse(attrData2)
    var main =  $('#formattingColumns_mul').find('.titleRow_mul')
    $(main).find('[data-textmain]').val(parsedAttrdata2[selectedTable]['main']['textColor']).trigger('change')
    $(main).find('[data-bgmain]').val(parsedAttrdata2[selectedTable]['main']['bgColor']).trigger('change')
    $(main).find('[data-fontmain]').val(parsedAttrdata2[selectedTable]['main']['font']).trigger('change')
    $(main).find('[data-sizemain]').val(parsedAttrdata2[selectedTable]['main']['fontSize']).trigger('change')
    if (Object.keys(parsedAttrdata2[selectedTable]['exception']).length === 0){

    }else{
        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFields_title_row',
            'tablesForm': JSON.stringify([selectedTable]),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            $('#formattingColumns_mul').find('.title-row-body_mul').empty()
            for (let i in parsedAttrdata2[selectedTable]['exception']){
              var content = titleRowContent()
              var columnOptions = ''
              $('#formattingColumns_mul').find('.title-row-body_mul').append(content)
              var lastCard = $('#formattingColumns_mul').find('.title-row-body_mul').find('.masterfomatting').slice(-1)
              $(lastCard).find('.columnNames').empty()
              $(lastCard).find('.columnNames').append(`<option value="" disabled selected>Select title</option>`)
              $(lastCard).find('.columnNames').append(`<option value="Actions">Actions</option>`)
              for (j in data.finalFieldList) {
                  columnOptions +=  `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
              }
              $(lastCard).find('.columnNames').append(columnOptions)
              $(lastCard).find('.columnNames').val(i).trigger('change')
              $(lastCard).find('[data-text]').val(parsedAttrdata2[selectedTable]['exception'][i]['textColor']).trigger('change')
              $(lastCard).find('[data-bg]').val(parsedAttrdata2[selectedTable]['exception'][i]['bgColor']).trigger('change')
              $(lastCard).find('select').each(function(){
    $(this).select2()
  })
          }
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })

    }



  }
  var attrData3 = $(obj).attr('data-listthree')
  if (attrData3 == ''|| attrData3 =='{}'|| attrData3 == 'null'){
    var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record_mul']`).prop('checked')
    var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
    var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
    var viewRecord = $('.listview_actionSubElements').find(`[id='View Record_mul']`).prop('checked')
    var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
    var groupTogether = $('#action_btn_config_group_together_mul').prop('checked')
    var requiredTag = $('#notrequiredListView_Action_mul').prop('checked')
    $('#formattingColumns_mul').find('.columnHeaders').find('.columnHeadersSelect').empty()
    var columnHeaderValues = {}
    if (requiredTag == false){
      if (groupTogether == true){
        $('#formattingColumns_mul').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="Actions">Actions</option>`)
      }else{
        for (let i in actionBtn){
          if (actionBtn[i]== true){
            var attrData = $('#configure_actionbuttonid_mul').attr('data-list')
            if (attrData == ''|| attrData =='{}' || attrData == 'null'){
            }else{
              var parsedAttrdata = JSON.parse(attrData)
              for (let j in parsedAttrdata[$('#selectTablePC').val()]){
                if (j == i){
                  columnHeaderValues[i] = parsedAttrdata[$('#selectTablePC').val()][j]['column-header']
                }
              }
            }
            if (i in columnHeaderValues){
              $('#formattingColumns_mul').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="${columnHeaderValues[i]}">${columnHeaderValues[i]}</option>`);
            }else{
              $('#formattingColumns_mul').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="${i}">${i}</option>`);
            }

          }
        }
      }
    }


    $.ajax({
      url: window.location.pathname,
      data: { 'model_name': $('#selectTablePC').val(), 'operation': 'fecthing_verbose_name_action_config' },
      type: "POST",
      dataType: "json",
      success: function (data) {
        var listColumns = data.columns__dict
        for (let [key, value] of Object.entries(listColumns)){
          $('#formattingColumns_mul').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="${key}">${value}</option>`);
        }
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })
  }else {
    var parsedAttrdata3 = JSON.parse(attrData3)
    var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record_mul']`).prop('checked')
    var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
    var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
    var viewRecord = $('.listview_actionSubElements').find(`[id='View Record_mul']`).prop('checked')
    var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
    var groupTogether = $('#action_btn_config_group_together_mul').prop('checked')
    var requiredTag = $('#notrequiredListView_Action_mul').prop('checked')
    $('#formattingColumns_mul').find('.columnHeaders').find('.columnHeadersSelect').empty()
    var columnHeaderValues = {}
    if (requiredTag == false){
      if (groupTogether == true){
        $('#formattingColumns_mul').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="Actions">Actions</option>`)
      }else{
        for (let i in actionBtn){
          if (actionBtn[i]== true){
            var attrData = $('#configure_actionbuttonid_mul').attr('data-list')
            if (attrData == ''|| attrData =='{}' || attrData == 'null'){
            }else{
              var parsedAttrdata = JSON.parse(attrData)
              for (let j in parsedAttrdata[$('#selectTablePC').val()]){
                if (j == i){
                  columnHeaderValues[i] = parsedAttrdata[$('#selectTablePC').val()][j]['column-header']
                }
              }
            }
            if (i in columnHeaderValues){
              $('#formattingColumns_mul').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="${columnHeaderValues[i]}">${columnHeaderValues[i]}</option>`);
            }else{
              $('#formattingColumns_mul').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="${i}">${i}</option>`);
            }

          }
        }
      }
    }


    $.ajax({
      url: window.location.pathname,
      data: { 'model_name': $('#selectTablePC').val(), 'operation': 'fecthing_verbose_name_action_config' },
      type: "POST",
      dataType: "json",
      success: function (data) {
        var listColumns = data.columns__dict
        for (let [key, value] of Object.entries(listColumns)){
          $('#formattingColumns_mul').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="${key}">${value}</option>`);
        }
        $('#formattingColumns_mul').find('.columnHeaders').find('.columnHeadersSelect').val(parsedAttrdata3[$('#selectTablePC').val()]).trigger('change')
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })
  }
  $('#formattingColumns_mul').find('select').each(function(){
    $(this).select2()
  })
}

function populateFrmattingColumns(obj){
  var content = formattingContent()
  var selectedTable = $('#selectTablePC').val()
  var columnOptions = ''
    $.ajax({
      url: window.location.pathname,

      data: {
        'operation': 'fecthing_verbose_name_group_by',
        'model_name': selectedTable,
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        var data = data.data
        $('#formattingColumns').find('.formatting-body').append(content)
        for (j in data) {
            columnOptions +=  `<option value="${data[j]['originalName']}" data-datatype="${data[j]['data-type']}">${data[j]['verboseName']}</option>`
        }
        var lastCard = $('#formattingColumns').find('.formatting-body').find('.masterfomatting').eq(-1)
        $(lastCard).find('.columnNames').empty()
        $(lastCard).find('.columnNames').append(`<option value="" disabled selected>Select Columns</option>`)
        $(lastCard).find('.columnNames').append(columnOptions)
        $(lastCard).find('select').each(function(){
    $(this).select2()
  })
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })
}
function saveFormattingColumns(obj){
  var cards = $('#formattingColumns').find('.formatting-body').find('.masterfomatting')
  var lengthOfCards = cards.length;
  var fullValues = []

  for (let i = 0; i < lengthOfCards; i++) {
    var values = {}
    var singleCard = $('#formattingColumns').find('.formatting-body').find('.masterfomatting').eq(i)
    $(singleCard).find('[data-format]').each(function(){
      values[$(this).attr('data-format')] = $(this).val()
    })
    fullValues.push(values)
  }
  var storedValue = {}
  storedValue['new-config-formatting'] = {[`${$('#selectTablePC').val()}`]:fullValues}
  $('#formattingColumnBtn').attr('data-list',JSON.stringify(storedValue))
}
function formattingColumn(obj){
  var attrData = $(obj).attr('data-list')
  if (attrData == ''|| attrData =='{}'|| attrData == 'null'){

  }else {
    var parsedAttrdata = JSON.parse(attrData)
    var selectedTable = $('#selectTablePC').val()
    if('new-config-formatting' in parsedAttrdata){
      $.ajax({
        url: window.location.pathname,

        data: {
          'operation': 'fecthing_verbose_name_group_by',
          'model_name': selectedTable,
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          var data = data.data
          $('#formattingColumns').find('.formatting-body').empty()
          for (var i in parsedAttrdata['new-config-formatting'][selectedTable]){
            var content = formattingContent();
            var columnOptions = ''
            $('#formattingColumns').find('.formatting-body').append(content)
            for (j in data) {
              columnOptions +=  `<option value="${data[j]['originalName']}" data-datatype="${data[j]['data-type']}">${data[j]['verboseName']}</option>`
            }
            var lastCard = $('#formattingColumns').find('.formatting-body').find('.masterfomatting').slice(-1)
            $(lastCard).find('.columnNames').empty()
            $(lastCard).find('.columnNames').append(`<option value="" disabled selected>Select Columns</option>`)
            $(lastCard).find('.columnNames').append(columnOptions)
            $(lastCard).find('.columnNames').val(parsedAttrdata['new-config-formatting'][selectedTable][i]['field_name']).trigger('change')
            $(lastCard).find('.conditional_condition').val(parsedAttrdata['new-config-formatting'][selectedTable][i]['condition']).trigger('change')
            $(lastCard).find(`[data-format='bg_color']`).val(parsedAttrdata['new-config-formatting'][selectedTable][i]['bg_color']).trigger('change')
            if ($(lastCard).find(`[data-format='input_value']`).hasClass('select2_condition_class')){
              $(lastCard).find(`[data-format='input_value']`).empty()
              if (parsedAttrdata['new-config-formatting'][selectedTable][i]['condition'] == 'In'){
                var parssedInputValue = parsedAttrdata['new-config-formatting'][selectedTable][i]['input_value']
                for (let h in parssedInputValue){
                  $(lastCard).find(`[data-format='input_value']`).append(`<option value="${parssedInputValue[h]}">${parssedInputValue[h]}</option>`)
                }
                $(lastCard).find(`[data-format='input_value']`).val(parssedInputValue).trigger('change')
              }else{
                $(lastCard).find(`[data-format='input_value']`).append(`<option value="${parsedAttrdata['new-config-formatting'][selectedTable][i]['input_value']}">${parsedAttrdata['new-config-formatting'][selectedTable][i]['input_value']}</option>`)
                $(lastCard).find(`[data-format='input_value']`).val(parsedAttrdata['new-config-formatting'][selectedTable][i]['input_value']).trigger('change')
              }


            }else{
              $(lastCard).find(`[data-format='input_value']`).val(parsedAttrdata['new-config-formatting'][selectedTable][i]['input_value']).trigger('change')
            }
            $(lastCard).find('select').each(function(){
    $(this).select2()
  })
            $(lastCard).find('.select2_condition_class').select2({
              tags: true
            })
        }

        },
        error: function () {
          alert("Error");
        }
      })
    }else{
      $.ajax({
        url: window.location.pathname,

        data: {
          'operation': 'fecthing_verbose_name_group_by',
          'model_name': selectedTable,
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          var data = data.data
          $('#formattingColumns').find('.formatting-body').empty()
          for (var i in parsedAttrdata){
            for (var k in parsedAttrdata[i]){
              var content = formattingContent();
              var columnOptions = ''
              $('#formattingColumns').find('.formatting-body').append(content)
              for (j in data) {
                columnOptions +=  `<option value="${data[j]['originalName']}" data-datatype="${data[j]['data-type']}">${data[j]['verboseName']}</option>`
              }
              var lastCard = $('#formattingColumns').find('.formatting-body').find('.masterfomatting').slice(-1)
              $(lastCard).find('.columnNames').empty()
              $(lastCard).find('.columnNames').append(`<option value="" disabled selected>Select Columns</option>`)
              $(lastCard).find('.columnNames').append(columnOptions)
              $(lastCard).find('.columnNames').val(i).trigger('change')
              $(lastCard).find('.conditional_condition').val('Equal to').trigger('change')

              $(lastCard).find(`[data-format='bg_color']`).val(Object.values(parsedAttrdata[i][k])[0]).trigger('change')
              if ($(lastCard).find(`[data-format='input_value']`).hasClass('select2_condition_class')){
                $(lastCard).find(`[data-format='input_value']`).empty()
                $(lastCard).find(`[data-format='input_value']`).append(`<option value="${Object.keys(parsedAttrdata[i][k])[0]}">${Object.keys(parsedAttrdata[i][k])[0]}</option>`)
                $(lastCard).find(`[data-format='input_value']`).val(Object.keys(parsedAttrdata[i][k])[0]).trigger('change')
              }else{
                $(lastCard).find(`[data-format='input_value']`).val(Object.keys(parsedAttrdata[i][k])[0]).trigger('change')
              }
              $(lastCard).find('select').each(function(){
    $(this).select2()
  })
              $(lastCard).find('.select2_condition_class').select2({
                tags: true
              })
            }
        }

        },
        error: function () {
          alert("Error");
        }
      })
    }



  $('#formattingColumns').find('.formatting-body').find('select').each(function(){
    $(this).select2()
  })
  }
  var attrData2 = $(obj).attr('data-listtwo')
  if (attrData2 == ''|| attrData2 =='{}'|| attrData2 == 'null'){

  }else {
    var selectedTable = $('#selectTablePC').val()
    var parsedAttrdata2 = JSON.parse(attrData2)
    var main =  $('#formattingColumns').find('.titleRow')
    $(main).find('[data-textmain]').val(parsedAttrdata2[selectedTable]['main']['textColor']).trigger('change')
    $(main).find('[data-bgmain]').val(parsedAttrdata2[selectedTable]['main']['bgColor']).trigger('change')
    $(main).find('[data-fontmain]').val(parsedAttrdata2[selectedTable]['main']['font']).trigger('change')
    $(main).find('[data-sizemain]').val(parsedAttrdata2[selectedTable]['main']['fontSize']).trigger('change')
    if (Object.keys(parsedAttrdata2[selectedTable]['exception']).length === 0){

    }else{
        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFields_title_row',
            'tablesForm': JSON.stringify([selectedTable]),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            $('#formattingColumns').find('.title-row-body').empty()
            for (let i in parsedAttrdata2[selectedTable]['exception']){
              var content = titleRowContent()
              var columnOptions = ''
              $('#formattingColumns').find('.title-row-body').append(content)
              var lastCard = $('#formattingColumns').find('.title-row-body').find('.masterfomatting').slice(-1)
              $(lastCard).find('.columnNames').empty()
              $(lastCard).find('.columnNames').append(`<option value="" disabled selected>Select title</option>`)
              $(lastCard).find('.columnNames').append(`<option value="Actions">Actions</option>`)
              for (j in data.finalFieldList) {
                  columnOptions +=  `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
              }
              $(lastCard).find('.columnNames').append(columnOptions)
              $(lastCard).find('.columnNames').val(i).trigger('change')
              $(lastCard).find('[data-text]').val(parsedAttrdata2[selectedTable]['exception'][i]['textColor']).trigger('change')
              $(lastCard).find('[data-bg]').val(parsedAttrdata2[selectedTable]['exception'][i]['bgColor']).trigger('change')
              $(lastCard).find('select').each(function(){
    $(this).select2()
  })
          }
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })

    }



  }
  var attrData3 = $(obj).attr('data-listthree')
  if (attrData3 == ''|| attrData3 =='{}'|| attrData3 == 'null'){
    var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record']`).prop('checked')
    var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
    var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
    var viewRecord = $('.listview_actionSubElements').find(`[id='View Record']`).prop('checked')
    var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
    var groupTogether = $('#action_btn_config_group_together').prop('checked')
    var requiredTag = $('#notrequiredListView_Action').prop('checked')
    $('#formattingColumns').find('.columnHeaders').find('.columnHeadersSelect').empty()
    var columnHeaderValues = {}
    if (requiredTag == false){
      if (groupTogether == true){
        $('#formattingColumns').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="Actions">Actions</option>`)
      }else{
        for (let i in actionBtn){
          if (actionBtn[i]== true){
            var attrData = $('#configure_actionbuttonid').attr('data-list')
            if (attrData == ''|| attrData =='{}' || attrData == 'null'){
            }else{
              var parsedAttrdata = JSON.parse(attrData)
              for (let j in parsedAttrdata[$('#selectTablePC').val()]){
                if (j == i){
                  columnHeaderValues[i] = parsedAttrdata[$('#selectTablePC').val()][j]['column-header']
                }
              }
            }
            if (i in columnHeaderValues){
              $('#formattingColumns').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="${columnHeaderValues[i]}">${columnHeaderValues[i]}</option>`);
            }else{
              $('#formattingColumns').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="${i}">${i}</option>`);
            }

          }
        }
      }
    }


    $.ajax({
      url: window.location.pathname,
      data: { 'model_name': $('#selectTablePC').val(), 'operation': 'fecthing_verbose_name_action_config' },
      type: "POST",
      dataType: "json",
      success: function (data) {
        var listColumns = data.columns__dict
        for (let [key, value] of Object.entries(listColumns)){
          $('#formattingColumns').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="${key}">${value}</option>`);
        }
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })
  }else{
    var parsedAttrdata3 = JSON.parse(attrData3)
    var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record']`).prop('checked')
    var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
    var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
    var viewRecord = $('.listview_actionSubElements').find(`[id='View Record']`).prop('checked')
    var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
    var groupTogether = $('#action_btn_config_group_together').prop('checked')
    var requiredTag = $('#notrequiredListView_Action').prop('checked')
    $('#formattingColumns').find('.columnHeaders').find('.columnHeadersSelect').empty()
    var columnHeaderValues = {}
    if (requiredTag == false){
      if (groupTogether == true){
        $('#formattingColumns').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="Actions">Actions</option>`)
      }else{
        for (let i in actionBtn){
          if (actionBtn[i]== true){
            var attrData = $('#configure_actionbuttonid').attr('data-list')
            if (attrData == ''|| attrData =='{}' || attrData == 'null'){
            }else{
              var parsedAttrdata = JSON.parse(attrData)
              for (let j in parsedAttrdata[$('#selectTablePC').val()]){
                if (j == i){
                  columnHeaderValues[i] = parsedAttrdata[$('#selectTablePC').val()][j]['column-header']
                }
              }
            }
            if (i in columnHeaderValues){
              $('#formattingColumns').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="${columnHeaderValues[i]}">${columnHeaderValues[i]}</option>`);
            }else{
              $('#formattingColumns').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="${i}">${i}</option>`);
            }

          }
        }
      }
    }


    $.ajax({
      url: window.location.pathname,
      data: { 'model_name': $('#selectTablePC').val(), 'operation': 'fecthing_verbose_name_action_config' },
      type: "POST",
      dataType: "json",
      success: function (data) {
        var listColumns = data.columns__dict
        for (let [key, value] of Object.entries(listColumns)){
          $('#formattingColumns').find('.columnHeaders').find('.columnHeadersSelect').append(`<option value="${key}">${value}</option>`);
        }
        $('#formattingColumns').find('.columnHeaders').find('.columnHeadersSelect').val(parsedAttrdata3[$('#selectTablePC').val()]).trigger('change')
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })
  }
  var attrData4 = $(obj).attr('data-listfour')
  if (attrData4 == ''|| attrData4 =='{}'|| attrData4 == 'null'){

  }else{
    var parsedAttrdata3 = JSON.parse(attrData4)
    if(parsedAttrdata3['card_header_config_switch'] == false){
      $('#formattingColumns').find('.card_header_config').find('#card_header_config_switch').prop('checked',false)
      $('#formattingColumns').find('.card_header_config').find('.numberinput').val(parsedAttrdata3['card_header_text_size']).trigger('change')
    }else{
      $('#formattingColumns').find('.card_header_config').find('#card_header_config_switch').prop('checked',true)
      $('#formattingColumns').find('.card_header_config').find('.numberinput').prop('disabled',true)
    }
  }
  $('#formattingColumns').find('select').each(function(){
    $(this).select2()
  })
}
function saveColumnHeadersHide(obj){
  var values = {}
  var columnHeadersHidden =  $('#formattingColumns').find('.columnHeaders').find('.columnHeadersSelect').val()
  values[$('#selectTablePC').val()] = columnHeadersHidden
  $('#formattingColumnBtn').attr('data-listthree',JSON.stringify(values))
}
function resetColumnHeadersHide(obj){
  event.preventDefault()
  $('#formattingColumnBtn').attr('data-listthree','')
  $('#formattingColumns').find('.columnHeaders').find('.columnHeadersSelect').val([]).trigger('change')
}
function formattingRemoveContent(obj){
  $(obj).parent().parent().parent().parent().remove()
}
function formattingValues(obj){
  var selectedTable = $('#selectTablePC').val()
  var columnName = $(obj).val()
  $.ajax({
    url: window.location.pathname,

    data: {
      'model_name': selectedTable,
      'field_name': columnName,
      'operation': 'conditional_table_value',
    },
    type: "POST",
    dataType: "json",
    success: function (data) {
      $(obj).parent().parent().parent().parent().find('.card-body').find('.values').empty()
      if(data.hasOwnProperty('field_data')){
        data_list =JSON.parse(data.field_data)
        for(let i=0;i<data_list.length;i++){
          $(obj).parent().parent().parent().parent().find('.card-body').find('.values').append(`<option value='${data_list[i]}'>${data_list[i]}</option>`)
        }
      }
      if ($(obj).attr('table')){
        var parsedAttrdata = JSON.parse($(obj).attr('table'))
        var objPlusBtn = $(obj).parent().parent().parent().parent().find('.plus')
        for (let i in parsedAttrdata){
          formattingValuesContent(objPlusBtn,parsedAttrdata[i])
        }
      }
    },
    error: function () {
      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
    }
  })


}
function formattingContent(){
  return(`
  <div class="conditional_body masterfomatting" style="width: 100%; display:flex;margin-top:1rem;">
    <div class="col-3">
      <p style="font-weight: bold;">Select column:</p>
      <select class="select2 form-control columnNames" onchange="onChangeConditionColumnFormatting(this)" data-format="field_name">
      </select>
    </div>
    <div class="col-3">
      <p style="font-weight: bold;">Select condition:</p>
      <select class="select2 form-control conditional_condition" onchange="onChangeConditionFormatting(this)" data-format="condition"></select>
    </div>
    <div class="col-3 conditional_input_value">
      <p style="font-weight: bold;">Select value:</p>
      <div class="conditional_format_value_input">
        <select class="select2 form-control" data-format="input_value"></select>
    </div>
    </div>
    <div class="col-2">
      <p style="font-weight: bold;">Select bg color:</p>
      <input type="color" class="form-control conditional_color_input" data-css="background-color" value="#ffffff" data-format="bg_color">
    </div>
    <div class="col-1">
      <i class="fas fa-remove" onclick="removeConditionColumnFormatting(this)" style="cursor:pointer;padding-top:3.4em;"></i>
    </div>

  </div>
  `)
}
function removeConditionColumnFormatting(obj){
  $(obj).closest('.masterfomatting').remove()
}
function onChangeConditionColumnFormatting(obj){

  const datatype = $(obj).find('option:selected').attr('data-datatype')
  let optionvalues = ''
  $(obj).closest('.masterfomatting').find('.conditional_condition').empty()
  $(obj).closest('.masterfomatting').find('.conditional_condition').append('<option value="" disabled selected>------------</option>')
  if ((String(datatype) === 'IntegerField') || (String(datatype) === 'BigIntegerField') || (String(datatype) === 'FloatField') || (String(datatype) === 'AutoField')) {
    optionvalues = ['Greater than', 'Smaller than', 'Equal to', 'Not Equal to']
    for (let i = 0; i < optionvalues.length; i++) {
      $(obj).closest('.masterfomatting').find('.conditional_condition').append('<option value="' + optionvalues[i] + '">' + optionvalues[i] + '</option>')
    }
  } else if ((String(datatype) === 'DateField') || (String(datatype) === 'DateTimeField')) {
    optionvalues = ['Greater than', 'Smaller than', 'Equal to', 'Not Equal to']
    for (let i = 0; i < optionvalues.length; i++) {
      $(obj).closest('.masterfomatting').find('.conditional_condition').append('<option value="' + optionvalues[i] + '">' + optionvalues[i] + '</option>')
    }
  } else {
    optionvalues = ['Equal to', 'Not Equal to', 'In', 'Starts with', 'Ends with', 'Contains']
    for (let i = 0; i < optionvalues.length; i++) {
      $(obj).closest('.masterfomatting').find('.conditional_condition').append('<option value="' + optionvalues[i] + '">' + optionvalues[i] + '</option>')
    }
  }
}
function onChangeConditionFormatting(obj){
  const condition = $(obj).val()
  if ((String(condition) === 'Greater than') || (String(condition) === 'Smaller than')) {
    if ($(obj).closest('.masterfomatting').find('.columnNames').find('option:selected').attr('data-datatype') == 'DateField') {
      $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').empty()
      $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').append('<input type="date" class="conditional_value textInput form-control" data-format="input_value"></input>')
    } else if ($(obj).closest('.masterfomatting').find('.columnNames').find('option:selected').attr('data-datatype') == 'DateTimeField') {
      $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').empty()
      $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').append('<input type="datetime-local" style="width:11em;" class="conditional_value textInput form-control" data-format="input_value" step="1"></input>')
    } else {
      $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').empty()
      $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').append('<input type="number"  class="conditional_value textInput form-control" data-format="input_value"></input>')
    }
  } else if (String(condition) === 'Equal to' || String(condition) === 'Not equal to') {
    if ($(obj).closest('.masterfomatting').find('.columnNames').find('option:selected').attr('data-datatype') == 'DateField') {
      $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').empty()
      $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').append('<input type="date" class="conditional_value textInput form-control" data-format="input_value"></input>')
    } else if ($(obj).closest('.masterfomatting').find('.columnNames').find('option:selected').attr('data-datatype') == 'DateTimeField') {
      $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').empty()
      $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').append('<input type="datetime-local" style="width:11em;" class="conditional_value textInput form-control" data-format="input_value" step="1"></input>')
    } else {
      $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').empty()
      $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').append('<select class="select2 form-control select2_condition_class condition_select2 conditional_value" required data-format="input_value"></select>')
    }
  } else if (String(condition) === 'In') {
    $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').empty()
    $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').append('<select class="select2 select2_condition_class multiple form-control condition_multiple_select2 conditional_value" multiple required data-format="input_value"></select>')
  } else if (String(condition) === 'Starts with' || String(condition) === 'Ends with' || String(condition) === 'Contains') {
    $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').empty()
    $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').append('<select class="select2 form-control select2_condition_class condition_select2 conditional_value" required data-format="input_value"></select>')
  } else {
    $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').empty()
    $(obj).closest('.masterfomatting').find('.conditional_input_value').find('.conditional_format_value_input').append('<select class="select2 form-control select2_condition_class condition_select2 conditional_value" required data-format="input_value"></select>')
  }
  $('.select2_condition_class').select2({
    tags: true
  })

}
function formattingValuesContent(obj,dict){
  var firstCardhtml =$(obj).parent().parent().parent().find('.values').html()
  $(obj).parent().parent().parent().append(`
  <div class="row lowerFormatting" style="margin-bottom:10px;">
    <div class="col-5" >

      <select data-col="column-name" class="select2 form-control values">
        <option value="" disabled selected>Select Values</option>
      </select>
    </div>
    <div class="col-5" >

      <input type="color" class="form-control stylingJsFieldColorInput" data-val="bg-color" value="#ffffff" required>
    </div>
    <div class="col-2 align-self-center">
      <button type="button" class="btn btn-tool" onclick="formattingRemoveValueContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
    </div>
  </div>
  `)
  var addedCard = $(obj).parent().parent().parent().find('.values').slice(-1)
  $(addedCard).empty()
  $(addedCard).append(firstCardhtml)
  if (dict != undefined){
    var singleCard = $(obj).parent().parent().parent()
    var singleRow = $(singleCard).find('.lowerFormatting').slice(-1)
    $(singleRow).find('[data-col]').val(Object.keys(dict).toString()).trigger('change')
    $(singleRow).find('[data-val]').val(Object.values(dict).toString()).trigger('change')

  }
  $('#formattingColumns').find('.formatting-body').find('select').each(function(){
    $(this).select2()
  })
}
function formattingRemoveValueContent(obj){
  $(obj).parent().parent().remove()
}
function extract_card_header_configs(){
  var buttonValues = $('#formattingColumnBtn').attr('data-listfour')
  if ($('#selectTemplate').val() == "Reporting View" || $('#selectTemplate').val() == "Approval Template"){
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }else{
    return null
  }

}

function extractColumnHeaderHide_mul(obj){
  var buttonValues = $('#formattingColumnBtn_mul').attr('data-listthree')
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
}
function extractColumnHeaderHideMultiple(obj){
  var buttonValues = $('#formattingColumnBtn').attr('data-listthree')
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
}
function extractFormatting(obj){
  var buttonValues = $('#formattingColumnBtn').attr('data-list')
  if (buttonValues == '' || buttonValues == '{}' ){
    return null
  }else {
    var parsedValues = JSON.parse(buttonValues)
    return parsedValues
  }
}
function extractColumnHeaderHide(obj){
  var buttonValues = $('#formattingColumnBtn').attr('data-listthree')
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
}
function extractFormatting_mul(obj){
  var buttonValues = $('#formattingColumnBtn_mul').attr('data-list')
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
}
function titleRowContent(){
  return(`
  <div class="card collapsed-card masterfomatting" style="margin-top:10px;">
    <div class="card-header row">
      <div class="form-group col-7" style="display:flex; margin-bottom: 0px;">
        <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the title:</p>
        <div class="col-8">
        <select class="select2 form-control columnNames" style="margin-left: 5px;">
          <option value="" disabled selected>Select title</option>
        </select>
          </div>
        </div>
          <div class="col-4">
            <div class="card-tools float-right">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              <button type="button" class="btn btn-tool" onclick="formattingRemoveContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
          </div>
        </div>
    </div>
    <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
      <div class="row">
        <div class="col-6">
          <p style="font-weight: bold;">Select text color:</p>
          <input type="color" value="#ffffff" class="form-control" data-text="color">
        </div>
        <div class="col-6">
          <p style="font-weight: bold;">Select BG color:</p>
          <input type="color" value="#ffffff" class="form-control" data-bg="color">
        </div>
      </div>
    </div>
    </div>
  </div>
  </div>
  `)
}

function titleRowPopulateContent(obj){
  var content = titleRowContent()
  var selectedTable = $('#selectTablePC').val()
  var columnOptions = ''
    $.ajax({
      url: window.location.pathname,

      data: {
        'operation': 'formTableFields_title_row',
        'tablesForm': JSON.stringify([selectedTable]),
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        $('#formattingColumns').find('.title-row-body').append(content)
        var lastCard = $('#formattingColumns').find('.title-row-body').find('.masterfomatting').slice(-1)
        $(lastCard).find('.columnNames').empty()
        $(lastCard).find('.columnNames').append(`<option value="" disabled selected>Select title</option>`)
        $(lastCard).find('.columnNames').append(`<option value="Actions">Actions</option>`)
        for (j in data.finalFieldList) {
            columnOptions +=  `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
        }
        $(lastCard).find('.columnNames').append(columnOptions)
        $(lastCard).find('select').each(function(){
    $(this).select2()
  })
      },
      error: function () {
        alert("Error");
      }
    })



}
function savetitlerow(obj){
  var savedValues = {}
  var mainValues = {}
  var selectedTable = $('#selectTablePC').val()
  var main =  $('#formattingColumns').find('.titleRow')
  var maintextcolor = $(main).find('[data-textmain]').val()
  var mainbgcolor = $(main).find('[data-bgmain]').val()
  var mainfont = $(main).find('[data-fontmain]').val()
  var mainfontsize = $(main).find('[data-sizemain]').val()
  if (maintextcolor == '#ffffff' && mainbgcolor == '#ffffff' && mainfont == null) {
    savedValues = {};
  } else if (mainfont != null) {
    mainValues['main'] = {'textColor':maintextcolor,'bgColor':mainbgcolor,'font':mainfont,'fontSize':mainfontsize}
    var cards = $('#formattingColumns').find('.title-row-body').find('.masterfomatting')
    var fullValues = {}
    var lengthOfCards = cards.length;
    for (let i = 0; i < lengthOfCards; i++) {
      var singleCard = $('#formattingColumns').find('.title-row-body').find('.masterfomatting').eq(i)
      var selectedColumn = $(singleCard).find('.columnNames').val()
      var selectedTextColor = $(singleCard).find('[data-text]').val()
      var selectedBgColor = $(singleCard).find('[data-bg]').val()
      fullValues[selectedColumn] = {'textColor':selectedTextColor,'bgColor':selectedBgColor}
    }
    mainValues['exception'] = fullValues
    savedValues[selectedTable] = mainValues
  }

  $('#formattingColumnBtn').attr('data-listtwo',JSON.stringify(savedValues))
}
function resetButtonTitleRow(obj){
  event.preventDefault()
  var main =  $('#formattingColumns').find('.titleRow')
  $(main).find('[data-textmain]').val('#ffffff').trigger('change')
  $(main).find('[data-bgmain]').val('#ffffff').trigger('change')
  $(main).find('[data-fontmain]').val('').trigger('change')
  $(main).find('[data-sizemain]').val('0.8rem').trigger('change')
  $('#formattingColumns').find('.title-row-body').empty()
  $('#formattingColumnBtn').attr('data-listtwo','')
}
function extractTitleRowFormatting(obj){
  var buttonValues = $('#formattingColumnBtn').attr('data-listtwo')
  if ($('#selectTemplate').val() == "Multiple table"){
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }else{
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }

}
function extractTitleRowFormatting_mul(obj){
  var buttonValues = $('#formattingColumnBtn_mul').attr('data-listtwo')
  if (buttonValues == '' || buttonValues == '{}' ){
    return null
  }else {
    var parsedValues = JSON.parse(buttonValues)
    return parsedValues
  }
}
function TitleRowMultipleContent(obj){
  return(`
  <div class="card collapsed-card masterfomatting" style="margin-top:10px;">
    <div class="card-header row">
      <div class="form-group col-7" style="display:flex; margin-bottom: 0px;">
        <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the table:</p>
        <div class="col-8">
        <select class="select2 form-control columnNames" onchange="TitleRowExceptionColumnValuesMultiple(this)" style="margin-left: 5px;">
          <option value="" disabled selected>Select table</option>
        </select>
          </div>
        </div>
          <div class="col-4">
            <div class="card-tools float-right">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              <button type="button" class="btn btn-tool" onclick="formattingRemoveContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
          </div>
        </div>
    </div>
    <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
      <div class="row">
        <div class="col-6">
          <p style="font-weight: bold;">Select text color:</p>
          <input type="color" value="#ffffff" class="form-control" data-textmain="color">
        </div>
        <div class="col-6">
          <p style="font-weight: bold;">Select BG color:</p>
          <input type="color" value="#ffffff" class="form-control" data-bgmain="color">
        </div>
      </div>
      <div class="row" style="padding-top:10px;padding-bottom:10px;">
        <div class="col-6">
          <p style="font-weight: bold;">Select font style:</p>
          <select class="select2 form-control" data-fontmain="text">
            <option value="" disabled="" selected="">Select font</option>
            <option value="Arial_sans-serif">Arial (sans-serif)</option>
            <option value="Verdana_sans-serif">Verdana (sans-serif)</option>
            <option value="Helvetica_sans-serif">Helvetica (sans-serif)</option>
            <option value="Tahoma_sans-serif">Tahoma (sans-serif)</option>
            <option value="Trebuchet MS_sans-serif">Trebuchet MS (sans-serif)</option>
            <option value="Times New Roman_serif">Times New Roman (serif)</option>
            <option value="Georgia_serif">Georgia (serif)</option>
            <option value="Garamond_serif">Garamond (serif)</option>
            <option value="Courier New_monospace">Courier New (monospace)</option>
            <option value="Brush Script MT_cursive">Brush Script MT (cursive)</option>
          </select>
        </div>
        <div class="col-6">
          <p style="font-weight: bold;">Select font size:</p>
          <select class="select2 form-control" data-sizemain="size">
            <option value="0.8rem" selected>Normal</option>
            <option value="0.7rem">Xtra small</option>
            <option value="0.9rem">Medium</option>
            <option value="1rem">Large</option>
            <option value="1.1rem">Xtra large</option>
          </select>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="float-right" style="margin-right: 6px;">
            <button onclick="populateTitleRowExceptionMultiple(this)" class="btn btn-primary exceptionBtn" type="button"><i class="fas fa-plus" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Exception</button>
          </div>
        </div>
      </div>
      <div class="title-row-content-exception">

      </div>
    </div>
    </div>
  </div>
  </div>
  `)
}
function TitleRowMultipleExceptionContent(obj){
  return(`
  <div class="card collapsed-card lowermasterfomatting" style="margin-top:10px;">
    <div class="card-header row">
      <div class="form-group col-7" style="display:flex; margin-bottom: 0px;">
        <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the title:</p>
        <div class="col-8">
        <select class="select2 form-control columnNames" style="margin-left: 5px;">
          <option value="" disabled selected>Select title</option>
        </select>
          </div>
        </div>
          <div class="col-4">
            <div class="card-tools float-right">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              <button type="button" class="btn btn-tool" onclick="formattingRemoveContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
          </div>
        </div>
    </div>
    <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
      <div class="row">
        <div class="col-6">
          <p style="font-weight: bold;">Select text color:</p>
          <input type="color" value="#ffffff" class="form-control" data-text="color">
        </div>
        <div class="col-6">
          <p style="font-weight: bold;">Select BG color:</p>
          <input type="color" value="#ffffff" class="form-control" data-bg="color">
        </div>
      </div>
    </div>
    </div>
  </div>
  </div>
  `)
}
function TitleRowExceptionColumnValuesMultiple(obj){
  $(obj).parent().parent().parent().parent().find('.exceptionBtn').attr('data-list',$(obj).val())
}
function populateTitleRowExceptionMultiple(obj,dict){
  var content = TitleRowMultipleExceptionContent()
  var selectedTable = $(obj).attr('data-list')
  if (selectedTable){
    var columnOptions = ''
    $.ajax({
      url: window.location.pathname,

      data: {
        'operation': 'formTableFields_title_row',
        'tablesForm': JSON.stringify([selectedTable]),
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        if (dict == undefined){
          $(obj).parent().parent().parent().parent().find('.title-row-content-exception').append(content)
          var lastCard = $(obj).parent().parent().parent().parent().find('.title-row-content-exception').find('.lowermasterfomatting').slice(-1)
          $(lastCard).find('.columnNames').empty()
          $(lastCard).find('.columnNames').append(`<option value="" disabled selected>Select title</option>`)
          $(lastCard).find('.columnNames').append(`<option value="Actions">Actions</option>`)
          for (j in data.finalFieldList) {
              columnOptions +=  `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
          }
          $(lastCard).find('.columnNames').append(columnOptions)
        }else{
          for (let i in dict){
            $(obj).parent().parent().parent().parent().find('.title-row-content-exception').append(content)
            var lastCard = $(obj).parent().parent().parent().parent().find('.title-row-content-exception').find('.lowermasterfomatting').slice(-1)
            $(lastCard).find('.columnNames').empty()
            $(lastCard).find('.columnNames').append(`<option value="" disabled selected>Select title</option>`)
            $(lastCard).find('.columnNames').append(`<option value="Actions">Actions</option>`)
            for (j in data.finalFieldList) {
                columnOptions +=  `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
            }
            $(lastCard).find('.columnNames').append(columnOptions)
            $(lastCard).find('.columnNames').val(i).trigger('change')
            $(lastCard).find('[data-text]').val(dict[i]['textColor']).trigger('change')
            $(lastCard).find('[data-bg]').val(dict[i]['bgColor']).trigger('change')
          }
        }

        $(lastCard).find('select').each(function(){
    $(this).select2()
  })
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'})
      }
    })
  }else{
    Swal.fire({icon: 'error',text: 'Select table first!'})
  }

}
function saveFormattingColumnsMultipleTitleRow(obj){
  var cards = $('#formattingColumns').find('.formatting-body-title-row').find('.masterfomatting')
  var lengthOfCards = cards.length;
  var tableValues = {}
  for (let i = 0; i < lengthOfCards; i++) {
    var fullValues = {}
    var singleCard = $('#formattingColumns').find('.formatting-body-title-row').find('.masterfomatting').eq(i)
    var selectedTable = $(singleCard).find('.card-header').find('.columnNames').val()
    var maintextcolor = $(singleCard).find('[data-textmain]').val()
    var mainbgcolor = $(singleCard).find('[data-bgmain]').val()
    var mainfont = $(singleCard).find('[data-fontmain]').val()
    var mainfontsize = $(singleCard).find('[data-sizemain]').val()
    fullValues['main'] = {'textColor':maintextcolor,'bgColor':mainbgcolor,'font':mainfont,'fontSize':mainfontsize}
    var lowercard = $(singleCard).find('.lowermasterfomatting')
    var lengthOfLowerCard = lowercard.length
    var exceptionVal = {}
    for (let j = 0; j < lengthOfLowerCard; j++) {
      var lowerSinglecard = $(singleCard).find('.lowermasterfomatting').eq(j)
      var selectedExceptionTable = $(lowerSinglecard).find('.columnNames').val()
      var exceptionTextColor = $(lowerSinglecard).find('[data-text]').val()
      var exceptionBgColor = $(lowerSinglecard).find('[data-bg]').val()
      exceptionVal[selectedExceptionTable] = {'textColor':exceptionTextColor,'bgColor':exceptionBgColor}
    }
    fullValues['exception'] = exceptionVal
    tableValues[selectedTable] = fullValues
  }
  $('#formattingColumnBtn').attr('data-listtwo',JSON.stringify(tableValues))
}
function populateTitleRowMultiple(obj){
  var content = TitleRowMultipleContent()
  $('#formattingColumns').find('.formatting-body-title-row').append(content)
  var selectedTable = $('#selectTablePC').val()
  var lastCard = $('#formattingColumns').find('.formatting-body-title-row').find('.masterfomatting').slice(-1)
  $(lastCard).find('.columnNames').empty()
  $(lastCard).find('.columnNames').append(`<option value="" disabled selected>Select table</option>`)
  for (let i in selectedTable){
    $(lastCard).find('.columnNames').append(`<option value="${selectedTable[i]}">${selectedTable[i]}</option>`)
  }
  $('#formattingColumns').find('.formatting-body-title-row').find('select').each(function(){
    $(this).select2()
  })
}
function resetButtonTitleRow_mul(obj){
  event.preventDefault()
  var main =  $('#formattingColumns_mul').find('.titleRow_mul')
  $(main).find('[data-textmain]').val('#ffffff').trigger('change')
  $(main).find('[data-bgmain]').val('#ffffff').trigger('change')
  $(main).find('[data-fontmain]').val('').trigger('change')
  $(main).find('[data-sizemain]').val('0.8rem').trigger('change')
  $('#formattingColumns_mul').find('.title-row-body_mul').empty()
  $('#formattingColumnBtn_mul').attr('data-listtwo','')
}
function savetitlerow_mul(obj){
  var savedValues = {}
  var mainValues = {}
  var selectedTable = $('#selectTablePC').val()
  var main =  $('#formattingColumns_mul').find('.titleRow_mul')
  var maintextcolor = $(main).find('[data-textmain]').val()
  var mainbgcolor = $(main).find('[data-bgmain]').val()
  var mainfont = $(main).find('[data-fontmain]').val()
  var mainfontsize = $(main).find('[data-sizemain]').val()
  if (maintextcolor == '#ffffff' && mainbgcolor == '#ffffff' && mainfont == null) {
    savedValues = {};
  } else if (mainfont != null) {
    mainValues['main'] = {'textColor':maintextcolor,'bgColor':mainbgcolor,'font':mainfont,'fontSize':mainfontsize}
    var cards = $('#formattingColumns_mul').find('.title-row-body_mul').find('.masterfomatting')
    var fullValues = {}
    var lengthOfCards = cards.length;
    for (let i = 0; i < lengthOfCards; i++) {
      var singleCard = $('#formattingColumns_mul').find('.title-row-body_mul').find('.masterfomatting').eq(i)
      var selectedColumn = $(singleCard).find('.columnNames').val()
      var selectedTextColor = $(singleCard).find('[data-text]').val()
      var selectedBgColor = $(singleCard).find('[data-bg]').val()
      fullValues[selectedColumn] = {'textColor':selectedTextColor,'bgColor':selectedBgColor}
    }
    mainValues['exception'] = fullValues
    savedValues[selectedTable] = mainValues
}
  $('#formattingColumnBtn_mul').attr('data-listtwo',JSON.stringify(savedValues))
}
function titleRowPopulateContent_mul(obj){
  var content = titleRowContent()
  var selectedTable = $('#selectTablePC').val()
  var columnOptions = ''
    $.ajax({
      url: window.location.pathname,

      data: {
        'operation': 'formTableFields_title_row',
        'tablesForm': JSON.stringify([selectedTable]),
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        $('#formattingColumns_mul').find('.title-row-body_mul').append(content)
        var lastCard = $('#formattingColumns_mul').find('.title-row-body_mul').find('.masterfomatting').slice(-1)
        $(lastCard).find('.columnNames').empty()
        $(lastCard).find('.columnNames').append(`<option value="" disabled selected>Select title</option>`)
        $(lastCard).find('.columnNames').append(`<option value="Actions">Actions</option>`)
        for (j in data.finalFieldList) {
            columnOptions +=  `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
        }
        $(lastCard).find('.columnNames').append(columnOptions)
        $(lastCard).find('select').each(function(){
    $(this).select2()
  })
      },
      error: function () {
        alert("Error");
      }
    })
}
function columnsHideMultipleTableContent(obj){
  return(`
  <div class="card collapsed-card masterfomatting" style="margin-top:10px;">
    <div class="card-header row">
      <div class="form-group col-7" style="display:flex; margin-bottom: 0px;">
        <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the table:</p>
        <div class="col-8">
        <select class="select2 form-control columnNames" onchange="onChangeColumnsHideMultipleTable(this)" data-list="" style="margin-left: 5px;">
          <option value="" disabled selected>Select table</option>
        </select>
          </div>
        </div>
          <div class="col-4">
            <div class="card-tools float-right">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              <button type="button" class="btn btn-tool" onclick="formattingRemoveContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
          </div>
        </div>
    </div>
    <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
      <p style="font-weight: bold;">Select column headers to hide:</p>
            <select class="columnHeadersSelect" multiple></select>
    </div>
    </div>
  </div>
  </div>
  `)
}
function onChangeColumnsHideMultipleTable(obj){
  var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record']`).prop('checked')
  var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
  var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
  var viewRecord = $('.listview_actionSubElements').find(`[id='View Record']`).prop('checked')
  var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord}
  var groupTogether = $('#action_btn_config_group_together').prop('checked')
  var requiredTag = $('#notrequiredListView_Action').prop('checked')
  var lastCard = $(obj).parent().parent().parent().parent()
  $(lastCard).find('.columnHeadersSelect').empty()
  var columnHeaderValues = {}
  if (requiredTag == false){
    if (groupTogether == true){
      $(lastCard).find('.columnHeadersSelect').append(`<option value="Actions">Actions</option>`)
    }else{
      for (let i in actionBtn){
        if (actionBtn[i]== true){
          var attrData = $('#configure_actionbuttonid_multiple').attr('data-list')
          if (attrData == ''|| attrData =='{}' || attrData == 'null'){
          }else{
            var parsedAttrdata = JSON.parse(attrData)
            for (let j in parsedAttrdata[$(obj).val()]){
              if (j == i){
                columnHeaderValues[i] = parsedAttrdata[$(obj).val()][j]['column-header']
              }
            }
          }
          if (i in columnHeaderValues){
            $(lastCard).find('.columnHeadersSelect').append(`<option value="${columnHeaderValues[i]}">${columnHeaderValues[i]}</option>`);
          }else{
            $(lastCard).find('.columnHeadersSelect').append(`<option value="${i}">${i}</option>`);
          }

        }
      }
    }
  }


  $.ajax({
    url: window.location.pathname,
    data: { 'model_name': $(obj).val(), 'operation': 'fecthing_verbose_name_action_config' },
    type: "POST",
    dataType: "json",
    success: function (data) {
      var listColumns = data.columns__dict
      for (let [key, value] of Object.entries(listColumns)){
        $(lastCard).find('.columnHeadersSelect').append(`<option value="${key}">${value}</option>`);
      }
      var savedListAttrData = $(lastCard).find('.columnNames').attr('data-list')
      if (savedListAttrData !=""){
        var parsedsavedListAttrData = JSON.parse(savedListAttrData)
        $(lastCard).find('.columnHeadersSelect').val(parsedsavedListAttrData).trigger('change')

      }
    },
    error: function () {
      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
    }
  })
}
function columnsHideMultipleTable(obj){
  var content = columnsHideMultipleTableContent()
  $('#formattingColumns').find('.columns-headers-hide-multiple-table').append(content)
  var selectedTable = $('#selectTablePC').val()
  var lastCard = $('#formattingColumns').find('.columns-headers-hide-multiple-table').find('.masterfomatting').slice(-1)
  for (let i in selectedTable){
    $(lastCard).find('.columnNames').append(`<option value="${selectedTable[i]}">${selectedTable[i]}</option>`)
  }
  $(lastCard).find('select').each(function(){
    $(this).select2()
  })
}
function saveColumnsHideMultipleTable(obj){
  var values = {}
  var cards = $('#formattingColumns').find('.columns-headers-hide-multiple-table').find('.masterfomatting')
  for (let i = 0; i < cards.length; i++) {
    var singleCard = $('#formattingColumns').find('.columns-headers-hide-multiple-table').find('.masterfomatting').eq(i)
    values[$(singleCard).find('.columnNames').val()] = $(singleCard).find('.columnHeadersSelect').val()
  }
  $('#formattingColumnBtn').attr('data-listthree',JSON.stringify(values))
}
$('#listViewButtonId').click(function(event){
  event.preventDefault();
});
$('#listViewButtonId_mul').click(function(event){
  event.preventDefault();
});
 function listViewEmbededComputationMultiple(obj){
  event.preventDefault();
  $('#dataTableModal').modal('hide')
  var attrData = $(obj).attr('data-list')
  if (attrData == ''|| attrData =='{}'){

  }else{
    var parsedAttrdata = JSON.parse(attrData)
    $('#listViewEmbededComputationModal').find('.modal-body').empty()
    $('#listViewEmbededComputationModal').find('.modal-body').append(`
    <div class="card-header">
      <div class="float-right" style="margin-right: 6px;">
        <button onclick="listViewPopulateEmbededComputationContentMultiple(this)" class="btn btn-primary" type="button">Add Computation Models <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
      </div>
    </div>
    `)
    k = 0
    for (let i in parsedAttrdata){
      listViewPopulateEmbededComputationContentMultiple()
      var singleCard = $('#listViewEmbededComputationModal').find('.masterstyling').eq(k)
      for (let l in parsedAttrdata[i]){
        $(singleCard).find('.computationTable').val(l).trigger('change')
        for (let k in parsedAttrdata[i][l]){
          $(singleCard).find('.computationModel').val(k).trigger('change')
          for (let p in parsedAttrdata[i][l][k]){
            $(singleCard).find('.listViewEmbededComputationTable').attr('data-input',JSON.stringify(parsedAttrdata[i][l][k][p]))
            $(singleCard).find('.listViewEmbededComputationTable').val(p).trigger('change')
          }
        }
      }


      k = k + 1
    }
  }
  $('#listViewEmbededComputationModal').modal('show')
 }
 function listViewEmbededComputationContentMultiple(){
  return(`
  <div class="card collapsed-card masterstyling" style="margin-left:-12px;margin-right: -12px;">
    <div class="card-header row">
      <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
        <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select table:</p>
        <div class="col-4" style="margin-left:8px;">
          <select  class="select2 form-control computationTable">
            <option value="" disabled selected>Tables</option>
          </select>
          </div>
      </div>
      <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
        <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select Model:</p>
        <div class="col-4">
          <select  class="select2 form-control computationModel" name="computationModel">
            <option value="" disabled selected>Models</option>
            {% for i in computationModelList %}
            <option value="{{i}}">{{i}}</option>
            {%endfor%}
          </select>
          </div>
      </div>

          <div class="col-2">
            <div class="card-tools float-right">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              <button type="button" class="btn btn-tool" onclick="listViewRemoveEmbededComputationContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
          </div>
        </div>
    </div>
    <div class="card-body" style="max-height: 25rem;">
      <div class='row'>
        <div class='col-3'>
          <p style="font-weight: bold;">Select Table:</p>
          <select class="select2 form-control listViewEmbededComputationTable" onchange="populateListviewEmbededComputationMultiple(this)" >
            <option value="" disabled selected>Tables</option>
          </select>
        </div>
        <div class='col-3'>
          <p style="font-weight: bold;">Select Input Fields:</p>
          <select class="select2 form-control listViewembededComputationInput" name="table" multiple>
          </select>
        </div>
        <div class='col-3'>
          <p style="font-weight: bold;">Select Output Type:</p>
          <select class="select2 form-control listViewembededComputationOutputType" onchange="outputlistViewembededComputation(this)">
            <option value="" disabled selected>Output Types</option>
            <option value="full_output" >Full output</option>
            <option value="target_output" >Target output</option>
          </select>
        </div>
        <div class='col-3 targetFields' style='display:none;'>
          <p style="font-weight: bold;">Select Target Fields:</p>
          <select class="select2 form-control listViewembededComputationTargetColumn" multiple>

          </select>
        </div>
    </div>
    </div>
    </div>
  </div>`)
 }
 function listViewPopulateEmbededComputationContentMultiple(obj){
  var content = listViewEmbededComputationContentMultiple()
  $('#listViewEmbededComputationModal').find('.modal-body').append(content)
  var singleCard = $('#listViewEmbededComputationModal').find('.masterstyling').slice(-1)
  var template = $('#selectTemplate').val()
  if(template == 'Default'){
    var table = $('#selectTablePC').val()
    $(singleCard).find('.listViewEmbededComputationTable').append(`<option value="${table}">${table}</option>`)
  }else if (template == 'Multiple table'){
    var table = $('#selectTablePC').val()
    for (let i in table){
      $(singleCard).find('.listViewEmbededComputationTable').append(`<option value="${table[i]}">${table[i]}</option>`)
      $(singleCard).find('.computationTable').append(`<option value="${table[i]}">${table[i]}</option>`)
    }
  }
  $(singleCard).find('select').each(function(){

    $(this).select2( )
  })
 }
 function populateListviewEmbededComputationMultiple(obj){
  var selectedTable = $(obj).val()
  var columnOptions = ''
    $.ajax({
      url: window.location.pathname,

      data: {
        'operation': 'formTableFields',
        'tablesForm': JSON.stringify([selectedTable]),
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        for (j in data.finalFieldList) {
          if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from'){
            columnOptions +=  `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
          }

        }
        $(obj).parent().parent().find('.listViewembededComputationInput').empty()

        $(obj).parent().parent().find('.listViewembededComputationInput').append(columnOptions)

        $(obj).parent().parent().find('.listViewembededComputationTargetColumn').empty()

        $(obj).parent().parent().find('.listViewembededComputationTargetColumn').append(columnOptions)

        if ($(obj).attr('data-input')){
          var parsedAttrdata = JSON.parse($(obj).attr('data-input'))
          $(obj).parent().parent().find('.listViewembededComputationInput').val(parsedAttrdata[0]).trigger('change')
          if (parsedAttrdata[2]  =='target_output'){
            $(obj).parent().parent().find('.listViewembededComputationOutputType').val(parsedAttrdata[2]).trigger('change')
            $(obj).parent().parent().find('.listViewembededComputationTargetColumn').val(parsedAttrdata[1]).trigger('change')
          }else{
            $(obj).parent().parent().find('.listViewembededComputationOutputType').val(parsedAttrdata[2]).trigger('change')
          }
        }
      },
      error: function () {
        alert("Error");
      }
    })
 }
function listViewsaveEmbededComputationMultiple(obj){
  var fullTableValues = []
  var card = $("#listViewEmbededComputationModal").find('.masterstyling')
  var lengthOfCards = card.length;
  for (let i = 0; i < lengthOfCards; i++) {
    var fullValues = {}
    var values = {}
    var rowVals = {}
    var singleCard = $("#listViewEmbededComputationModal").find('.masterstyling').eq(i)
    var input = $(singleCard).find('.listViewembededComputationInput').val()
    var targetColumn = $(singleCard).find('.listViewembededComputationTargetColumn').val()
    var outputType = $(singleCard).find('.listViewembededComputationOutputType').val()
    rowVals[$(singleCard).find('.listViewEmbededComputationTable').val()] = [input,targetColumn,outputType]
    values[$(singleCard).find('.computationModel').val()] = rowVals
    fullValues[$(singleCard).find('.computationTable').val()] = values
    fullTableValues.push(fullValues)
  }
  $('#listViewButtonEmbededComputationId').attr('data-list',JSON.stringify(fullTableValues))
  $('#dataTableModal').modal('show')
  $('#listViewEmbededComputationModal').modal('hide')

}
function extractCardViewConfig(obj){
  var buttonValues = $('#card_view_sub_category').attr('data-list')
  if ($('#selectTemplate').val() == "Card View"){
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }else{
    return null
  }
}
function extractlistViewsaveEmbededComputationMultiple(obj){
  var buttonValues = $('#listViewButtonEmbededComputationId').attr('data-list')
  if ($('#selectTemplate').val() == "Multiple table"){
    if (buttonValues == '' || buttonValues == '{}' ){
      return null
    }else {
      var parsedValues = JSON.parse(buttonValues)
      return parsedValues
    }
  }else{
    return null
  }
}

 function listViewEmbededComputation(obj){
  event.preventDefault();
  $('#dataTableModal').modal('hide')
  var attrData = $(obj).attr('data-list')
  if (attrData == ''|| attrData =='{}'){

  }else{
    var parsedAttrdata = JSON.parse(attrData)
    $('#listViewEmbededComputationModal').find('.modal-body').empty()
    $('#listViewEmbededComputationModal').find('.modal-body').append(`
    <div class="card-header">
      <div class="float-right" style="margin-right: 6px;">
        <button onclick="listViewPopulateEmbededComputationContent(this)" class="btn btn-primary" type="button">Add Computation Models <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
      </div>
    </div>
    `)
    k = 0
    for (let i in parsedAttrdata){
      listViewPopulateEmbededComputationContent()
      var singleCard = $('#listViewEmbededComputationModal').find('.masterstyling').eq(k)
      $(singleCard).find('.computationModel').val(i).trigger('change')
      for (let j in parsedAttrdata[i]){
        $(singleCard).find('.listViewEmbededComputationTable').attr('data-input',JSON.stringify(parsedAttrdata[i][j]))
        $(singleCard).find('.listViewEmbededComputationTable').val(j).trigger('change')


      }
      k = k + 1
    }
  }
   $('#listViewEmbededComputationModal').modal('show')

 }
 function listViewEmbededComputationContent(){
  return(`
  <div class="card collapsed-card masterstyling" style="margin-left:-12px;margin-right: -12px;">
    <div class="card-header row">
      <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
        <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the Computation Model:</p>
        <div class="col-4">
          <select onchange="populateComputationContent(this)" class="select2 form-control computationModel" name="computationModel">
            <option value="" disabled selected>Models</option>
            {% for i in computationModelList %}
            <option value="{{i}}">{{i}}</option>
            {%endfor%}
          </select>
          </div>
        </div>
          <div class="col-2">
            <div class="card-tools float-right">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              <button type="button" class="btn btn-tool" onclick="listViewRemoveEmbededComputationContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
          </div>
        </div>
    </div>
    <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
      <div class='row'>
        <div class='col-3'>
          <p style="font-weight: bold;">Select Table:</p>
          <select class="select2 form-control listViewEmbededComputationTable" onchange="populateListviewEmbededComputation(this)" >
            <option value="" disabled selected>Tables</option>
          </select>
        </div>
        <div class='col-3'>
          <p style="font-weight: bold;">Select Input Fields:</p>
          <select class="select2 form-control listViewembededComputationInput" name="table" multiple>
          </select>
        </div>
        <div class='col-3'>
          <p style="font-weight: bold;">Select Output Type:</p>
          <select class="select2 form-control listViewembededComputationOutputType" onchange="outputlistViewembededComputation(this)">
            <option value="" disabled selected>Output Types</option>
            <option value="full_output" >Full output</option>
            <option value="target_output" >Target output</option>
          </select>
        </div>
        <div class='col-3 targetFields' style='display:none;'>
          <p style="font-weight: bold;">Select Target Fields:</p>
          <select class="select2 form-control listViewembededComputationTargetColumn" multiple>

          </select>
        </div>
    </div>
    </div>
    </div>
  </div>`)
 }
 function listViewRemoveEmbededComputationContent(obj){
  $(obj).parent().parent().parent().parent().remove()
 }
 function outputlistViewembededComputation(obj){
   var val = $(obj).val()
   if (val =='full_output'){
    $(obj).parent().parent().find('.targetFields').css('display','none')
    $(obj).parent().parent().find('.listViewembededComputationTargetColumn').val('').trigger('change')
   }else if (val =='target_output'){
    $(obj).parent().parent().find('.targetFields').css('display','block')
    $(obj).parent().parent().find('.listViewembededComputationTargetColumn').val('').trigger('change')
   }
 }
 function populateListviewEmbededComputation(obj){
  var selectedTable = $(obj).val()
  var columnOptions = ''
    $.ajax({
      url: window.location.pathname,

      data: {
        'operation': 'formTableFields',
        'tablesForm': JSON.stringify([selectedTable]),
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        for (j in data.finalFieldList) {
          if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from'){
            columnOptions +=  `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`
          }

        }
        $(obj).parent().parent().find('.listViewembededComputationInput').empty()

        $(obj).parent().parent().find('.listViewembededComputationInput').append(columnOptions)

        $(obj).parent().parent().find('.listViewembededComputationTargetColumn').empty()

        $(obj).parent().parent().find('.listViewembededComputationTargetColumn').append(columnOptions)

        if ($(obj).attr('data-input')){
          var parsedAttrdata = JSON.parse($(obj).attr('data-input'))
          $(obj).parent().parent().find('.listViewembededComputationInput').val(parsedAttrdata[0]).trigger('change')
          if (parsedAttrdata[2]  =='target_output'){
            $(obj).parent().parent().find('.listViewembededComputationOutputType').val(parsedAttrdata[2]).trigger('change')
            $(obj).parent().parent().find('.listViewembededComputationTargetColumn').val(parsedAttrdata[1]).trigger('change')
          }else{
            $(obj).parent().parent().find('.listViewembededComputationOutputType').val(parsedAttrdata[2]).trigger('change')
          }
        }
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })
 }
 function listViewPopulateEmbededComputationContent(obj){
  var content = listViewEmbededComputationContent()
  $('#listViewEmbededComputationModal').find('.modal-body').append(content)
  var singleCard = $('#listViewEmbededComputationModal').find('.masterstyling').slice(-1)
  var template = $('#selectTemplate').val()
  if (template == 'Multiple table'){
    var table = $('#selectTablePC').val()
    for (let i in table){
      $(singleCard).find('.listViewEmbededComputationTable').append(`<option value="${table[i]}">${table[i]}</option>`)
    }
  }else{
    var table = $('#selectTablePC').val()
    $(singleCard).find('.listViewEmbededComputationTable').append(`<option value="${table}">${table}</option>`)
  }
  $(singleCard).find('select').each(function(){

    $(this).select2( )
  })
 }
 function listViewcloseEmbededComputation(obj){
  $('#dataTableModal').modal('show')
  $('#listViewEmbededComputationModal').modal('hide')
 }
 function listViewsaveEmbededComputation(obj){
  var values = {}

  var card = $("#listViewEmbededComputationModal").find('.masterstyling')
  var lengthOfCards = card.length;
  for (let i = 0; i < lengthOfCards; i++) {
    var rowVals = {}
    var singleCard = $("#listViewEmbededComputationModal").find('.masterstyling').eq(i)
    var input = $(singleCard).find('.listViewembededComputationInput').val()
    var targetColumn = $(singleCard).find('.listViewembededComputationTargetColumn').val()
    var outputType = $(singleCard).find('.listViewembededComputationOutputType').val()
    rowVals[$(singleCard).find('.listViewEmbededComputationTable').val()] = [input,targetColumn,outputType]
    values[$(singleCard).find('.computationModel').val()] = rowVals
  }
  $('#listViewButtonEmbededComputationId').attr('data-list',JSON.stringify(values))
  $('#dataTableModal').modal('show')
  $('#listViewEmbededComputationModal').modal('hide')
 }
 function extractlistViewsaveEmbededComputation(obj){
  var buttonValues = $('#listViewButtonEmbededComputationId').attr('data-list')
  if ($('#selectTemplate').val() == "Multiple table"){
    return null
  }else{
  if (buttonValues == '' || buttonValues == '{}' ){
    return null
  }else {
    var parsedValues = JSON.parse(buttonValues)
    return parsedValues
  }
}
 }
$('.eqbuilder_mul_Cl').click( function(){
  $('#EBDisplayModel').modal('show')
});
$('#remove_eqbuilder_mul').off('click').on('click', function(){
  delete multable_config_comp[multable_viewname]
  $.ajax({
    url: `/users/${urlPath}/processGraphModule/`,
   data: {
       'operation': 'deletelistcomp',
       'elementID': element_id,
       'comp_view_name': `computationMultiTable_${multable_viewname}_${$("#tabHeaderListView").val()}`,
     },
     type: "POST",
     dataType:"json",
     success:function(data){
      Swal.fire({icon: 'success',text: 'Configuration deleted successfully!'});
     },
     error: function (){
       Swal.fire({icon: 'error',text: 'Error! Failure in deleting the configuration. Please try again.'});
     }
    });
});

function listViewButtonStyling(obj){
  if($("#selectTemplate").val() != "Multi Dropdown View"){
    $('#dataTableModal').modal('hide')
  }else if($("#selectTemplate").val() == "Multi Dropdown View"){
    $('#dataTableModal').modal('hide')
    $('.dataTableModal_mul').modal('hide')
  }
      var attrData = $(obj).attr('data-list')
      if (attrData == ''|| attrData =='{}'){

      }else {
        var parsedAttrdata = JSON.parse(attrData)
        $('#listViewEditButtonModal').find('.modal-body').empty()
        $('#listViewEditButtonModal').find('.modal-body').append(`
        <div class="card-header">
          <div class="float-right" style="margin-right: 6px;">
            <button onclick="listViewPopulateEditButtonContent(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>
        `)
        i = 0
        for (var k in parsedAttrdata){
          for (var key in parsedAttrdata[k]){
            var content = listViewEditButtonContent()
            $('#listViewEditButtonModal').find('.modal-body').append(content)
            var singleCard = $('#listViewEditButtonModal').find('.masterstyling').eq(i)
            $(singleCard).find('.selectButtonsOptions').val(key).trigger('change')
            for (var key2 in parsedAttrdata[k][key]){
              $(singleCard).find('[data-css]').each(function(){
                if ($(this).attr('data-css') == key2){
                  $(this).val(parsedAttrdata[k][key][key2]).trigger('change')
                }
              })
            }
            $(singleCard).find('.iconappend').attr('data-list',parsedAttrdata[k][key]['data-icon'])
            i = i + 1
          }

      }
      }
  $('#listViewEditButtonModal').modal('show')
  $('#listViewEditButtonModal').find('select').each(function(){

    $(this).select2( )
  })
}
var listViewEditButtonFunctionCall_multiple = 0
function listViewEditButtonContent_multiple(){
  listViewEditButtonFunctionCall_multiple++;
  return(`
  <div class="card collapsed-card multipleJs masterstyling" id="list_view_multiple_master_stylling${listViewEditButtonFunctionCall_multiple}" style="margin-left:-12px;margin-right: -12px;">
    <div class="card-header row">
      <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
        <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the Table:</p>
        <div class="col-4" style="margin-left:10px;">
        <select class="select2 form-control selectTableOptions" style="margin-left: 5px;">
          <option value="" disabled selected>Select Table</option>
          </select>
          </div>
        </div>
          <div class="col-2">
            <div class="card-tools float-right">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              <button type="button" class="btn btn-tool" onclick="listViewRemoveEditButtonContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
          </div>
        </div>
      <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
        <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the Button:</p>
        <div class="col-4">
        <select class="select2 form-control selectButtonsOptions" onchange="listViewSelectedButtonName(this)" style="margin-left: 5px;">
          <option value="" disabled selected>Select Button</option>
          <option value="listviewupload">Upload</option>
          <option value="listviewsavetemplate">Save Template</option>
          <option value="listviewexpand">Expand</option>
          <option value="listviewplotchart">Plot Chart</option>
          <option value="listviewsetalert">Set alert</option>
          <option value="listviewfilter">Filter</option>
          <option value="listviewsaveediteddata">Save Edited Data</option>
          <option value="listvieweditmode">Edit Mode</option>
          <option value="listviewpastetabulardata">Paste tabular data</option>
          <option value="listviewdeletealldata">Delete all data</option>
          <option value="listviewfindandreplace">Find and replace</option>
          <option value="listviewfreezepanes">Freeze Panes</option>
          <option value="listviewextractdata">Extract Data</option>
          <option value="listviewformatters">Formatters</option>
          <option value="listviewviewtransactionstatus">View Transaction Status</option>
          <option value="listviewaddcomputedfields">Add Computed Fields</option>
          <option value="listviewColumnVisibility">Column Visibility</option>
          <option value="listviewbulkUpdate">Bulk Update</option>
          <option value="listviewConditionalDelete">Conditional Delete</option>
          <option value="listviewMultipleDeletePerm">Delete Multiple(Permanent)</option>
          <option value="listviewMultipleDeletePerm2">Permanently Delete Selected Data</option>
          <option value="listviewMultipleDeleteTemp">Delete Multiple(Temporary)</option>
          <option value="listviewMultipleDeleteTemp2">Temporarily Delete Selected Data</option>
          <option value="listviewApproveAll">Approve all</option>
          <option value="listviewRejectAll">Reject all</option>
          <option value="listviewMultipleApprove">Approve Multiple</option>
          <option value="listviewMultipleApprove2">Approve Selected Records</option>
          <option value="listviewMultipleReject">Reject Multiple</option>
          <option value="listviewMultipleReject2">Reject Selected</option>
          </select>
          </div>
        </div>
    </div>
    <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
      <div class="row" style="padding-left: 15px;">
        <div class="col-4">
          <p style="font-weight: bold;">Text of button:</p>
          <input type="text"  data-css="text" class="textinput textInput form-control ">
        </div>
        <div class="col-4">
            <p style="font-weight: bold;">Select text color:</p>
            <input type="color" value="#ffffff" class="form-control" data-css="color">
        </div>
        <div class="col-4">
            <p style="font-weight: bold;">Select background color:</p>
            <div class="input-group">
              <input type="color" value="#565a5e" class="form-control " data-css="background-color">
              <select class="select2 form-control" data-css="opacity" >
                <option value="1" selected >None</option>
                <option value="0.9">0.9</option>
                <option value="0.8">0.8</option>
                <option value="0.7">0.7</option>
                <option value="0.8">0.8</option>
                <option value="0.7">0.7</option>
                <option value="0.6">0.6</option>
                <option value="0.5">0.5</option>
                <option value="0.4">0.4</option>
                <option value="0.3">0.3</option>
                <option value="0.2">0.2</option>
                <option value="0.1">0.1</option>
                <option value="0">0</option>
              </select>
          </div>
        </div>
      </div>
      <div class="row" style="padding-left: 15px; padding-top:15px;">
          <div class="col-4" >
          <p style="font-weight: bold;">Select border type:</p>
          <select class="select2 form-control" data-css="border-style" >
              <option value="none">No border</option>
              <option value="dotted" >Dotted</option>
              <option value="dashed" >Dashed</option>
              <option value="solid" >Solid</option>
              <option value="double" >Double</option>
              <option value="groove" >Groove</option>
              <option value="ridge" >Ridge</option>
              <option value="inset" >Inset</option>
              <option value="outset" >Outset</option>
              <option value="dotted dashed solid double" >Dotted dashed solid double</option>
          </select>
          </div>
          <div class="col-4">
          <p style="font-weight: bold;">Select border width:</p>
          <div class="input-group">
              <input type="float" class="form-control" data-css="border-width" >
              <select class="select2 form-control" data-css="border-measure">
                <option value="">None</option>
                <option value="px">px</option>
              </select>
          </div>
          </div>
          <div class="col-4">
            <p style="font-weight: bold;">Select border color:</p>
            <input type="color" class="form-control" data-css="border-color" >
          </div>
      </div>
      <div class="row" style="padding-left: 15px; padding-top:15px;">
        <div class="col-4" >
          <p style="font-weight: bold;">Select icon to add:</p>
          <button class="btn btn-primary iconappend" type="button" onclick="icon_button_selector(this)" data-list="">
            Icon Selector
          </button>
        </div>
        <div class="col-4">
          <p style="font-weight: bold;">Select icon color:</p>
          <input type="color" value="#ffffff" class="form-control" data-css="icon-color">
        </div>
        <div class="col-4" >
          <p style="font-weight: bold;">Select button size:</p>
          <select class="select2 form-control" data-css="font-size">
            <option value="none">Normal</option>
            <option value="10px">Xtra small</option>
            <option value="12px">Small</option>
            <option value="16px">Medium</option>
            <option value="20px">Large</option>
            <option value="24px">Xtra large</option>
          </select>
        </div>

      </div>
      <div class="row" style="padding-left: 15px; padding-top:15px;">
        <div class="col-4">
          <p style="font-weight: bold;">Select hover action:</p>
          <select class="select2 form-control" onchange="listViewhoverOptionsEditButton(this)" data-css="hoveractions">
            <option value="none">No Effect</option>
            <option value="Color">Color</option>
            <option value="Gradient">Gradient</option>
            <option value="textsize">Text-size</option>
          </select>
        </div>
        <div class="col-4">
          <p style="font-weight: bold;">Select shape:</p>
          <select class="select2 form-control" data-css="shape">
            <option value="">Select Shape</option>
            <option value="square">Square</option>
            <option value="circle">Circle</option>
            <option value="oval">Oval</option>
            <option value="rectangle">Rectangle</option>
            <option value="parallelogram">Parallelogram</option>
          </select>
        </div>
    </div>
    <div class="row hoverButton" style="padding-left: 15px; padding-top:15px; width: 100%; display: flex;">

    </div>
    </div>
  </div>
  </div>`)
}
function listViewButtonStyling_multiple(obj){
  $('#dataTableModal').modal('hide')
  $('#listViewEditButtonModal').modal('show')
  var attrData = $(obj).attr('data-list')
  if (attrData == ''|| attrData =='{}'|| attrData =='null'){

  }else {
    var parsedAttrdata = JSON.parse(attrData)
    $('#listViewEditButtonModal').find('.modal-body').empty()
    $('#listViewEditButtonModal').find('.modal-body').append(`
    <div class="card-header">
      <div class="float-right" style="margin-right: 6px;">
        <button onclick="listViewPopulateEditButtonContent_multiple(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
      </div>
    </div>
    `)
    i = 0
    for (var k in parsedAttrdata){
      for (var key in parsedAttrdata[k]){
        var content = listViewPopulateEditButtonContent_multiple()
        $('#listViewEditButtonModal').find('.modal-body').append(content)
        var singleCard = $('#listViewEditButtonModal').find('.masterstyling').eq(i)
        $(singleCard).find('.selectTableOptions').val(k).trigger('change')
        $(singleCard).find('.selectButtonsOptions').val(key).trigger('change')
        for (var key2 in parsedAttrdata[k][key]){
          $(singleCard).find('[data-css]').each(function(){
            if ($(this).attr('data-css') == key2){
              $(this).val(parsedAttrdata[k][key][key2]).trigger('change')
            }
          })
        }
        $(singleCard).find('.iconappend').attr('data-list',parsedAttrdata[k][key]['data-icon'])

        i = i + 1
      }

  }
  }
}
function listViewPopulateEditButtonContent_multiple(obj){
  var content = listViewEditButtonContent_multiple()
  $('#listViewEditButtonModal').find('.modal-body').append(content)
  $('#listViewEditButtonModal').find('select').each(function(){

    $(this).select2( )
  })
  var tables = $('#selectTablePC').val()
  var singelCard = $('#listViewEditButtonModal').find('.masterstyling').slice(-1)
  $(singelCard).find('.selectTableOptions').empty()
  $(singelCard).find('.selectTableOptions').append(`<option value="" selected disabled>Select Table</option>`)
  for (let k in tables){
    $(singelCard).find('.selectTableOptions').append(`<option value="${tables[k]}">${tables[k]}</option>`)
  }
  $(singelCard).find('select').each(function(){

    $(this).select2( )
  })
}
function listViewsaveEditButton_multiple(obj){
    var cards = $('#listViewEditButtonModal').find('.masterstyling')
    var lengthOfCards = cards.length;
    var mainValues = {}
    for (let i = 0; i < lengthOfCards; i++) {
      var values = {}
      var singleCard = $('#listViewEditButtonModal').find('.masterstyling').eq(i)
      var selectedButton = $(singleCard).find('.selectButtonsOptions').val()
      var selectedTable = $(singleCard).find('.selectTableOptions').val()
      $(singleCard).find('[data-css]').each(function(){values[$(this).attr('data-css')] = $(this).val()})
      values['data-icon'] = values['data-icon'] = $(singleCard).find('.iconappend').attr('data-list')
      values['rgba'] = hexToRGB(values['background-color'],values['opacity'])
      if (selectedTable in mainValues){
        Object.assign(mainValues[selectedTable], {[selectedButton]:values})
      }else{
        Object.assign(mainValues, {[selectedTable]:{[selectedButton]:values},})
      }
    }
    $('#listViewButtonId').attr('data-list',JSON.stringify(mainValues))
    $('#listViewEditButtonModal').modal('hide')
    $('#dataTableModal').modal('show')
}
function listViewcloseEditButton(obj){
  if($("#selectTemplate").val() == "Multi Dropdown View"){
    $('#dataTableModal').modal('show')
    $('.dataTableModal_mul').modal('show')
  }else{
    $('#dataTableModal').modal('show')
  }
  $('#listViewEditButtonModal').modal('hide')
}
function listViewsaveEditButton(obj){
  var cards = $('#listViewEditButtonModal').find('.masterstyling')
      var fullValues = {}
      var lengthOfCards = cards.length;
      var mainValues = {}
      for (let i = 0; i < lengthOfCards; i++) {
        var values = {}
        var singleCard = $('#listViewEditButtonModal').find('.masterstyling').eq(i)
        var selectedButton = $(singleCard).find('.selectButtonsOptions').val()
        $(singleCard).find('[data-css]').each(function(){values[$(this).attr('data-css')] = $(this).val()})
        values['data-icon'] = $(singleCard).find('.iconappend').attr('data-list')
        values['rgba'] = hexToRGB(values['background-color'],values['opacity'])
        fullValues[selectedButton] = values
      }
      if (Object.keys(fullValues).length >0){
        mainValues[$('#selectTablePC').val()] = fullValues
      }
      if($("#selectTemplate").val() != "Multi Dropdown View"){
        $('#listViewButtonId').attr('data-list',JSON.stringify(mainValues))
      }else if($("#selectTemplate").val() == "Multi Dropdown View"){
        $('#listViewButtonId_mul').attr('data-list',JSON.stringify(mainValues))
      }
      $('#listViewEditButtonModal').modal('hide')
      if($("#selectTemplate").val() != "Multi Dropdown View"){
        $("#dataTableModal").modal('show')
      }else if($("#selectTemplate").val() == "Multi Dropdown View"){
        $("#dataTableModal").modal('show')
        $(".dataTableModal_mul").modal('show')
      }
}
function listViewPopulateEditButtonContent(obj){
  var content = listViewEditButtonContent()
  $('#listViewEditButtonModal').find('.modal-body').append(content)
  $('#listViewEditButtonModal').find('select').each(function(){

    $(this).select2( )
  })
}
function listViewSelectedButtonName(obj){
  $(obj).parent().parent().parent().parent().find('[data-css]').eq(0).val($(obj).find("option:selected").text()).trigger('change')
}
function listViewRemoveEditButtonContent(obj){
  $(obj).parent().parent().parent().parent().remove()
}
var listViewEditButtonFunctionCall = 0
function listViewEditButtonContent(){
  listViewEditButtonFunctionCall++;
  return(`
  <div class="card collapsed-card multipleJs masterstyling" id="listview_master_styling${listViewEditButtonFunctionCall}" style="margin-left:-12px;margin-right: -12px;">
    <div class="card-header row">
      <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
        <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the Button:</p>
        <div class="col-4">
        <select class="select2 form-control selectButtonsOptions" onchange="listViewSelectedButtonName(this)" style="margin-left: 5px;">
          <option value="" disabled selected>Select Button</option>
          <option value="listviewcreateviewplus">Create view button</option>
          <option value="listviewupload">Upload</option>
          <option value="listviewsavetemplate">Save Template</option>
          <option value="listviewexpand">Expand</option>
          <option value="listviewplotchart">Plot Chart</option>
          <option value="listviewsetalert">Set alert</option>
          <option value="listviewfilter">Filter</option>
          <option value="listviewsaveediteddata">Save Edited Data</option>
          <option value="listvieweditmode">Edit Mode</option>
          <option value="listviewpastetabulardata">Paste tabular data</option>
          <option value="listviewdeletealldata">Delete all data</option>
          <option value="listviewfindandreplace">Find and replace</option>
          <option value="listviewfreezepanes">Freeze Panes</option>
          <option value="listviewextractdata">Extract Data</option>
          <option value="listviewformatters">Formatters</option>
          <option value="listviewviewtransactionstatus">View Transaction Status</option>
          <option value="listviewaddcomputedfields">Add Computed Fields</option>
          <option value="listviewColumnVisibility">Column Visibility</option>
          <option value="listviewbulkUpdate">Bulk Update</option>
          <option value="listviewConditionalDelete">Conditional Delete</option>
          <option value="listviewMultipleDeletePerm">Delete Multiple(Permanent)</option>
          <option value="listviewMultipleDeletePerm2">Permanently Delete Selected Data</option>
          <option value="listviewMultipleDeleteTemp">Delete Multiple(Temporary)</option>
          <option value="listviewMultipleDeleteTemp2">Temporarily Delete Selected Data</option>
          <option value="listviewApproveAll">Approve all</option>
          <option value="listviewRejectAll">Reject all</option>
          <option value="listviewMultipleApprove">Approve Multiple</option>
          <option value="listviewMultipleReject">Reject Multiple</option>
          </select>
          </div>
        </div>
          <div class="col-2">
            <div class="card-tools float-right">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              <button type="button" class="btn btn-tool" onclick="listViewRemoveEditButtonContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
          </div>
        </div>
    </div>
    <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
      <div class="row" style="padding-left: 15px;">
        <div class="col-4">
          <p style="font-weight: bold;">Text of button:</p>
          <input type="text"  data-css="text" class="textinput textInput form-control ">
        </div>
        <div class="col-4">
            <p style="font-weight: bold;">Select text color:</p>
            <input type="color" value="#ffffff" class="form-control" data-css="color">
        </div>
        <div class="col-4">
            <p style="font-weight: bold;">Select background color:</p>
            <div class="input-group">
              <input type="color" value="#565a5e" class="form-control " data-css="background-color">
              <select class="select2 form-control" data-css="opacity" >
                <option value="1" selected >None</option>
                <option value="0.9">0.9</option>
                <option value="0.8">0.8</option>
                <option value="0.7">0.7</option>
                <option value="0.8">0.8</option>
                <option value="0.7">0.7</option>
                <option value="0.6">0.6</option>
                <option value="0.5">0.5</option>
                <option value="0.4">0.4</option>
                <option value="0.3">0.3</option>
                <option value="0.2">0.2</option>
                <option value="0.1">0.1</option>
                <option value="0">0</option>
              </select>
          </div>
        </div>
      </div>
      <div class="row" style="padding-left: 15px; padding-top:15px;">
          <div class="col-4" >
          <p style="font-weight: bold;">Select border type:</p>
          <select class="select2 form-control" data-css="border-style" >
              <option value="none">No border</option>
              <option value="dotted" >Dotted</option>
              <option value="dashed" >Dashed</option>
              <option value="solid" >Solid</option>
              <option value="double" >Double</option>
              <option value="groove" >Groove</option>
              <option value="ridge" >Ridge</option>
              <option value="inset" >Inset</option>
              <option value="outset" >Outset</option>
              <option value="dotted dashed solid double" >Dotted dashed solid double</option>
          </select>
          </div>
          <div class="col-4">
          <p style="font-weight: bold;">Select border width:</p>
          <div class="input-group">
              <input type="float" class="form-control" data-css="border-width" >
              <select class="select2 form-control" data-css="border-measure">
                <option value="">None</option>
                <option value="px">px</option>
              </select>
          </div>
          </div>
          <div class="col-4">
            <p style="font-weight: bold;">Select border color:</p>
            <input type="color" class="form-control" data-css="border-color" >
          </div>
      </div>
      <div class="row" style="padding-left: 15px; padding-top:15px;">
        <div class="col-4" >
          <p style="font-weight: bold;">Select icon to add:</p>
          <button class="btn btn-primary iconappend" type="button" onclick="icon_button_selector(this)" data-list="">
            Icon Selector
          </button>
        </div>
        <div class="col-4">
          <p style="font-weight: bold;">Select icon color:</p>
          <input type="color" value="#ffffff" class="form-control" data-css="icon-color">
        </div>
        <div class="col-4" >
          <p style="font-weight: bold;">Select button size:</p>
          <select class="select2 form-control" data-css="font-size">
            <option value="none">Normal</option>
            <option value="10px">Xtra small</option>
            <option value="12px">Small</option>
            <option value="16px">Medium</option>
            <option value="20px">Large</option>
            <option value="24px">Xtra large</option>
          </select>
        </div>

      </div>
      <div class="row" style="padding-left: 15px; padding-top:15px;">
        <div class="col-4">
          <p style="font-weight: bold;">Select hover action:</p>
          <select class="select2 form-control" onchange="listViewhoverOptionsEditButton(this)" data-css="hoveractions">
            <option value="none">No Effect</option>
            <option value="Color">Color</option>
            <option value="Gradient">Gradient</option>
            <option value="textsize">Text-size</option>
          </select>
        </div>
        <div class="col-4">
          <p style="font-weight: bold;">Select shape:</p>
          <select class="select2 form-control" data-css="shape">
            <option value="">Select Shape</option>
            <option value="square">Square</option>
            <option value="circle">Circle</option>
            <option value="oval">Oval</option>
            <option value="rectangle">Rectangle</option>
            <option value="parallelogram">Parallelogram</option>
          </select>
        </div>
    </div>
    <div class="row hoverButton" style="padding-left: 15px; padding-top:15px; width: 100%; display: flex;">

    </div>
    </div>
  </div>
  </div>`)
}
function listViewhoverOptionsEditButton(obj){
  var value = $(obj).val()
  if (value == 'Color'){
    $(obj).parent().parent().parent().find('.hoverButton').empty()
    $(obj).parent().parent().parent().find('.hoverButton').append(`
    <div class="col-4" >
      <p style="font-weight: bold;">Color of hover:</p>
      <input type="color" class="form-control stylingJsFieldColorInput" data-css="hover-color" value="#ffffff" required>
    </div>
    `)
  }else if (value == 'Gradient'){
    $(obj).parent().parent().parent().find('.hoverButton').empty()
    $(obj).parent().parent().parent().find('.hoverButton').append(`
    <div class="col-4" >
      <p style="font-weight: bold;">Select type of gradient:</p>
      <select class="select2 Gradeints form-control" data-css="type-gradient" required=""  >
        <option value="linear-gradient">Linear Gradients</option>
        <option value="radial-gradient">Radial Gradients</option>
        <option value="conic-gradient">Conic Gradients</option>
      </select>
    </div>
    <div class="col-4" >
      <p style="font-weight: bold;">Color 1:</p>
      <input type="color" class="form-control stylingJsFieldColorInput" data-css="gradient-color-1" required>
    </div>
    <div class="col-4" >
      <p style="font-weight: bold;">Color 2:</p>
      <input type="color" class="form-control stylingJsFieldColorInput" data-css="gradient-color-2" required>
    </div>
    `)
  }else if (value == 'textsize'){
    $(obj).parent().parent().parent().find('.hoverButton').empty()
    $(obj).parent().parent().parent().find('.hoverButton').append(`
    <div class="col-4" >
      <p style="font-weight: bold;">Select size:</p>
      <select class="select2 form-control" data-css="hover-text-size" required=""  >
        <option value="none">Normal</option>
        <option value="10px">Xtra small</option>
        <option value="12px">Small</option>
        <option value="16px">Medium</option>
        <option value="20px">Large</option>
        <option value="24px">Xtra large</option>
      </select>
    </div>
    `)
  }else if (value == 'none'){
    $(obj).parent().parent().parent().find('.hoverButton').empty()
  }
  $('#listViewEditButtonModal').find('.hoverButton').find('select').each(function(){

    $(this).select2( )
  })
}
    function JSAttri(colName = '') {
      for (let k = 1; k < $('#JSConfig').find('.multipleJs').length; k++) {
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(k).remove()
      }
      $('#JSConfig').css('display','block')
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','50vh');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','scroll');
      $('#JSConfig').find('.multipleJs').find('.linked-field').css('display','none');
      $('#JSConfig').find('.multipleJs').find('.auto_populate_constant').css('display','none');
      $('#JSConfig').find('.multipleJs').find('.boolean_field_sliders_stylling').css('display','none');
      $('#JSConfig').find('.multipleJs').find('.val_based_msg').css('display','none');
      $('#JSConfig').find('.multipleJs').find('.masterTable').css('display','none');
      $('#JSConfig').find('.multipleJs').find('#indFieldType').css('display','none');
      $('#JSConfig').find('.multipleJs').find('#depFieldType').css('display','none');
      $('#JSConfig').find('.multipleJs').find('.autopopulate').css('display','none');
      $('#JSConfig').find('.multipleJs').find('#cascadingCard1').css('display','none');
      $('#JSConfig').find('.multipleJs').find('#cascadingCard2').css('display','none');
      $('#JSConfig').find('.multipleJs').find('.showfieldinfo').css('display','none');
      $('#JSConfig').find('.multipleJs').find('.js_action_populate').css('display','none');
      $('#JSConfig').find('.multipleJs').find('.selectparentcolumn').eq(0).empty();
      $('#JSConfig').find('.multipleJs').find('.selectdefcolumn').eq(0).empty();
      $('#JSConfig').find('.multipleJs').find('.selectparentcolumnCond').eq(0).empty();
        for(let key = 0 ; key < allFieldsColumns.length; key++){
          $('#selectField').append(`<option value="${allFieldsColumns[key]}" verbose-name="${verboseName[key]}">${allFieldsColumns[key]}</option>`)
        }
        if(colName != '') {
          $('#selectField').val(colName).trigger('change');
        }
        $('.masterTableSelect').on('change',function() {
        var selectedTables=[$(this).val()]
        var current = $(this)
        let thiss_ = $(this)
        $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'formTableFields',
              'tablesForm':JSON.stringify(selectedTables),
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              commonCol = []
              commonColVerb = []
              mulSelectTable = data.table
              current.parent().parent().parent().find('.commonCol').empty()
              current.parent().parent().parent().find('.commonCol').append(`<option value="Select mapper column">Select mapper column</option>`)
              for(j in data.finalFieldList){
                current.parent().parent().parent().find('.commonCol').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
                commonCol.push(data.finalFieldList[j]['fieldName'])
                commonColVerb.push(data.finalFieldList[j]['verbose'])
              }
              if(thiss_.attr("data-reload") == "yes") {
                let data1 = JSON.parse(thiss_.attr("data-reloaddata"))
                let k_ = thiss_.attr("data-k")
                let index_ = thiss_.attr("data-index")
                let colName = thiss_.attr("colName")
                thiss_.removeAttr("data-reload")
                thiss_.removeAttr("data-k")
                thiss_.removeAttr("data-index")
                thiss_.removeAttr("data-reloaddata")
                thiss_.removeAttr("colName")
                masterTableSelectLoad(data1,k_,index_,colName)
              }
              },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
        })
      })
      var lengths = 0
      for(let i = 0 ; i < fieldAttributesCV.length; i++){
        if (fieldAttributesCV[i]) {
          if (fieldAttributesCV[i].hasOwnProperty(colName)) {
            if (fieldAttributesCV[i][colName][0].hasOwnProperty('jsattr')){
              lengths = fieldAttributesCV[i][colName][0]['jsattr'].length
            }
          }
        }
      }
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find(".selectCases").empty();
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find(".selectCases").append(`<option value="" disabled>Select cases</option>`);
      for(let [key,value] of Object.entries(dic_cases) ) {
          $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find(".selectCases").append(`<option value="${key}">${key}</option>`);
      }
      for (let k = 0; k < lengths; k++) {
        var collapseHtml = jsContent()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(k).remove()
        $('#JSConfig').find('.modal-body').append(collapseHtml);
        $(".selectCases").select2();
        $(".selectCasesCond").select2();
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find(".selectCases").empty();
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find(".selectCases").append(`<option value="" disabled>Select cases</option>`);
        for(let [key,value] of Object.entries(dic_cases) ) {
          $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find(".selectCases").append(`<option value="${key}">${key}</option>`);
        }
        for (let i in allFieldsColumns){
          if (['DateField','IntegerField','FloatField','TimeField','DateTimeField','BigIntegerField'].includes(allFieldsColumnsType[i])){
            $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.first_dependant_field').append(`<option value="${allFieldsColumns[i]}" data-type="${allFieldsColumnsType[i]}">${verboseName[i]}</option>`)
          }
        }
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.first_dependant_field').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.second_dependant_field').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.operation').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.static_field').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.master_field_table').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.master_field_column').select2()
        $('#master_field_comparison_filter_modal').find('.modal-body').find('button').attr('data-table','');
        $('#master_field_comparison_filter_modal').find('.modal-body').find('button').attr('data-column-list','');
        $('.depFieldTypeMapperCascading1').select2();
        $('.depFieldTypeSelectCascading1').select2();
        $('.indFieldTypeMapperCascading1').select2();
        $('.indFieldTypeSelectCascading1').select2();
        $('.masterTableSelectCascading1').select2();
        $('.indFieldTypeMapper').select2()
        $('.indFieldTypeSelect').select2();
        $('.depFieldTypeMapper').select2();
        $('.depFieldTypeSelect').select2();
        $('.multiplejs').eq(-1).find('.indFieldTypeMapper').select2();
        $('.multiplejs').eq(-1).find('.indFieldTypeSelect').select2();
        $('.masterTableSelect').select2();
        $('.selectparentcolum').select2()
        $('.selectpctype').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.formLevelJs').find('.formLevelFieldCol').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.formLevelJs').find('.formLevelFieldCond').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.formLevelJs').find('.formLevelFieldMasterTable').find('select').each(function(){
    $(this).select2()
  })
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.formLevelJs').find('.formLevelFieldColName').find('select').each(function(){
    $(this).select2()
  })
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.selectparentcolumn').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.selectdefcolumn').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.foreignKeyDynamicVal').select2()

        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.selectparentcolumnCond').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.foreignKeyCond').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.foreignKeyAndOr').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.formLevelJs').find('.formLevelFieldVal').find('select').select2({tags:true})
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.formLevelJs').find('.formLevelFieldValTag').find('select').select2({tags:true})
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.foreignKeyCondVal').find('select').select2({tags:true})
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.foreignKeyCondValTag').find('select').select2({tags:true})
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.formLevelJs').find('.formLevelFieldCol').parent().find('.select2-container').css('max-height','6rem')
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.formLevelJs').find('.formLevelFieldCol').parent().find('.select2-container').css('overflow-y','scroll');
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.selectJSproperty').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.selectJSproperty').find('.select2-container').css('width','');
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.formLevelFieldActionsSel').select2()
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.stylingJs').find('select').each(function() {

    $(this).select2()
          $(this).closest(".stylingJsValidationColorVal").find('select').select2({tags:true});
          $(this).closest(".stylingJsValidationColorValTag").find('select').select2({tags:true});
        })

        $('.selectparentcolumn').on('change', function() {
          var cur = $('#JSConfig').find('.multipleJs').eq(k)
          let thiss_ = $(this)
          if ( cur.find('.selectJSproperty').val() == 'Foreign-key-relation') {
            cur.find('.linked-field').css('display','flex');
            cur.find('.auto_populate_constant').css('display','none');
            cur.find('.val_based_msg').css('display','none');
            cur.find('.masterTable').css('display','none');
            cur.find('#indFieldType').css('display','none');
            cur.find('#depFieldType').css('display','none');
            cur.find('.boolean_field_sliders_stylling').css('display','none');
            var selectedCol = $(this).val();
            var selectedTab = $(this).parent().parent().find('.selectpctype').val()

            $.ajax({
              url: window.location.pathname,

              data: {
                'operation': 'formColumnValuesAll',
                'table':selectedTab,
                'column':selectedCol,
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                cur.find('.selectdefcolumn').empty();
                cur.find('.selectdefcolumn').append(`<option value="def" selected>---</option>`)
                for(j=0;j<data.data.length;j++){
                    cur.find('.selectdefcolumn').append(`<option value="${data.data[j]}">${data.data[j]}</option>`)
                }
                if(thiss_.attr("data-reload") == "yes") {
                  let data1 = JSON.parse(thiss_.attr("data-reloaddata"))
                  let k_ = thiss_.attr("data-k")
                  thiss_.removeAttr("data-reload")
                  thiss_.removeAttr("data-k")
                  selectparentcolumnLoad(data1,k_)
                }
              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
          }
        })

        $('.selectpctype').on('change', function() {
        var cur = $('#JSConfig').find('.multipleJs').eq(k)
        let thiss_ = $(this)
        if ( cur.find('.selectJSproperty').val() == 'Foreign-key-relation') {
          cur.find('.linked-field').css('display','flex');
          cur.find('.auto_populate_constant').css('display','none');
          cur.find('.val_based_msg').css('display','none');
          cur.find('.masterTable').css('display','none');
          cur.find('#indFieldType').css('display','none');
          cur.find('#depFieldType').css('display','none');
          cur.find('.boolean_field_sliders_stylling').css('display','none');
          var selectedTablesD = $(this).val();
          $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'formTableFieldsAll',
              'tablesForm':JSON.stringify([selectedTablesD]),
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              cur.find('.selectparentcolumn').empty();
              cur.find('.selectparentcolumnCond').empty();
              for(j in data.finalFieldList){
                  cur.find('.selectparentcolumn').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
                  cur.find('.selectparentcolumnCond').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
              }
              if(thiss_.attr("data-reload") == "yes") {
                let data1 = JSON.parse(thiss_.attr("data-reloaddata"))
                let k_ = thiss_.attr("data-k")
                let index_ = thiss_.attr("data-index")
                let colName = thiss_.attr("colName")
                let valuesCond = thiss_.attr("valuesCond")
                thiss_.removeAttr("data-reload")
                thiss_.removeAttr("data-k")
                thiss_.removeAttr("data-index")
                thiss_.removeAttr("data-reloaddata")
                thiss_.removeAttr("colName")
                thiss_.removeAttr("valuesCond")
                selectpctypeLoad(data1,k_,index_,colName,valuesCond)
              }
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
    })
        }
        else if(cur.find('.selectJSproperty').val() == "Auto-populate Constant"){
          cur.find('.auto_populate_constant').css('display','block');
          cur.find('.val_based_msg').css('display','none');
          cur.find('.linked-field').css('display','none');
          cur.find('#masterTable').css('display','none');
          cur.find('#indFieldType').css('display','block');
          cur.find('#depFieldType').css('display','none');
          cur.find('.boolean_field_sliders_stylling').css('display','none');
        }else if( cur.find('.selectJSproperty').val() == "Linked-field-populate") {
          cur.find('.linked-field').css('display','block');
          cur.find('.auto_populate_constant').css('display','none');
          cur.find('.val_based_msg').css('display','none');
          cur.find('#masterTable').css('display','none');
          cur.find('#indFieldType').css('display','none');
          cur.find('#depFieldType').css('display','none');
          cur.find('.boolean_field_sliders_stylling').css('display','none');
        }else if( cur.find('.selectJSproperty').val() == "Validation based message") {
          cur.find('.linked-field').css('display','none');
          cur.find('.auto_populate_constant').css('display','none');
          cur.find('.val_based_msg').css('display','block');
          cur.find('#masterTable').css('display','none');
          cur.find('#indFieldType').css('display','none');
          cur.find('#depFieldType').css('display','none');
          cur.find('.boolean_field_sliders_stylling').css('display','none');
        }
        else if( cur.find('.selectJSproperty').val() == "Field Type Settings") {
          cur.find('.linked-field').css('display','none');
          cur.find('.auto_populate_constant').css('display','none');
          cur.find('.val_based_msg').css('display','block');
          cur.find('#masterTable').css('display','none');
          cur.find('#indFieldType').css('display','none');
          cur.find('#depFieldType').css('display','none');
          cur.find('.boolean_field_sliders_stylling').css('display','block');
        }
      })


        $('.masterTableSelect').on('change',function() {
        var selectedTables=[$(this).val()]
        var current = $(this)
        let thiss_ = $(this)
        $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'formTableFieldsAll',
              'tablesForm':JSON.stringify(selectedTables),
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              commonCol = []
              commonColVerb = []
              current.parent().parent().parent().find('.commonCol').empty()
              current.parent().parent().parent().find('.commonCol').append(`<option value="Select mapper column">Select mapper column</option>`)
              for(j in data.finalFieldList){
                current.parent().parent().parent().find('.commonCol').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
                commonCol.push(data.finalFieldList[j]['fieldName'])
                commonColVerb.push(data.finalFieldList[j]['verbose'])
              }
              if(thiss_.attr("data-reload") == "yes") {
                let data1 = JSON.parse(thiss_.attr("data-reloaddata"))
                let k_ = thiss_.attr("data-k")
                let index_ = thiss_.attr("data-index")
                let colName = thiss_.attr("colName")
                masterTableSelectLoad(data1,k_,index_,colName)
              }
              },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
        })
      })}
      for (let k = 0; k < lengths; k++) {
        $('#JSConfig').find('.multipleJs').eq(k).find('.linked-field').css('display','none');
        $('#JSConfig').find('.multipleJs').eq(k).find('.auto_populate_constant').css('display','none');
        $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').css('display','none');
        $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg').css('display','none');
        $('#JSConfig').find('.multipleJs').eq(k).find('.masterTable').css('display','none');
        $('#JSConfig').find('.multipleJs').eq(k).find('#indFieldType').css('display','none');
        $('#JSConfig').find('.multipleJs').eq(k).find('#depFieldType').css('display','none');
        $('#JSConfig').find('.multipleJs').eq(k).find('.autopopulate').css('display','none');
        $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').css('display','none');
        $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard2').css('display','none');
        var index = 0;
        if (fields.length > 0) {
          for(let i = 0 ; i < fieldAttributesCV.length; i++){
            if (fieldAttributesCV[i]) {
              if (fieldAttributesCV[i].hasOwnProperty(colName)) {
                index = i;
              }
            }
          }
        } else {
          for(let i = 0 ; i < fieldAttributesCV.length; i++){
            if (fieldAttributesCV[i]) {
              if (fieldAttributesCV[i].hasOwnProperty(colName)) {
                if (fieldAttributesCV[i][colName][0].hasOwnProperty('jsattr')) {
                  index = i;
                }
              }
            }
          }
        }
        if (fieldAttributesCV[index]) {
          if (fieldAttributesCV[index].hasOwnProperty(colName)) {
            var choice = ''
            var cases_reload = ""
            cases_cond = ""
            if (fieldAttributesCV[index][colName][0].hasOwnProperty('jsattr')) {
              choice = fieldAttributesCV[index][colName][0]['jsattr'][k]['parentvalue']
              cases_reload = fieldAttributesCV[index][colName][0]['jsattr'][k]['cases']
              cases_cond = fieldAttributesCV[index][colName][0]['jsattr'][k]['caseCond']
              if(choice == "Show-hide_link"){
                choice = "Show-hide"
              }
            }
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectJSproperty').val(choice).trigger('change');
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectCases').val(cases_reload).trigger('change');
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectCasesCond').val(cases_cond).trigger('change');
          } else {
            choice = ''
          }
        }
        var selections = document.getElementById("selectField")
        $('#JSConfig').find('.multipleJs').eq(k).find('.selectpctype').empty();
        var htmlC = `
        <div class="card card-default collapsed-card">
      <div class="card-header">
        <p class="card-title">Cascading level 0</p>

        <div class="card-tools">
          <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:black"></i></button>
          <button type="button" class="btn btn-tool" onclick="removeIndField.call(this,'not')"><i class="fas fa-remove" style="color:black"></i></button>
        </div>
      </div>
      <div class="card-body row" style="display:flex">
        <div class="col-6" style="height: 16rem;overflow: scroll;">
          <p class="autopopulate1" style="font-weight: bold;">Select source table</p>
          <div class="" id="masterTableCascading1">
            <select class="masterTableSelectCascading1 select2 form-control" onchange="selectColFromTable.call(this)">
              <option value="" selected>Select master table</option>
              {% for i in tableList%}
              <option value="{{i}}">{{i}}</option>
              {%endfor%}
            </select>
          </div><br>
          <div class="autopopulate1" style="font-weight: bold;">Criteria field mapping through source table column</div><br>
          <div class="row" id="indFieldTypeCascading1">
            <div class="col-6" style="display: inline-block;">
              <p>Current table field:</p>
              <select class="select2 form-control indFieldTypeSelectCascading1" onchange="ca.call(this)">
                <option value="" selected>Dependent field mapping through source table column</option>
              </select>
            </div>
            <div class="col-6" style="display: inline-block;">
              <p>Mapping table field:</p>
              <select class="select2 form-control indFieldTypeMapperCascading1">
                <option value="" selected>Select mapping field</option>
              </select>
            </div>
          </div><br>
        </div>
        <div class="col-6" style="height: 16rem;overflow: scroll;">
          <div class="autopopulate1" style="display: flex; align-items: center; justify-content: space-between;" style="font-weight: bold;"><span style="font-weight: bold;">Select dependent field</span> <span class="float-right" style="font-size: 15px;" onclick="addIndField.call(this,'Cascading1')"><i class="fas fa-plus"></i></span></div><br>
          <div class="norow" id="depFieldTypeCascading1">
            <div class="row" style="margin-bottom:6px">
              <div class="col-6">
                <p>Current table field:</p>
                <select class="depFieldTypeSelectCascading1 select2 form-control " onchange="casadingColOption.call(this)">
                  <option value="" selected>Select independent field</option>
                </select>
              </div>
              <div class="col-5">
                <p>Mapping table field:</p>
                <select class="depFieldTypeMapperCascading1 select2 form-control commonCol">
                  <option value="" selected>Select mapping field</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
            `
        if ($('#JSConfig').find('.multipleJs').eq(k).find('.selectJSproperty').val() == 'Linked-field-autopopulate') {

        } else if($('#JSConfig').find('.multipleJs').eq(k).find('.selectJSproperty').val() == 'Cascading') {
          if (fieldAttributesCV[index]) {
            var values = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][1][0]['value']
            var values1 = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][0][0]['value']
            var html = `
            <div class="row" style="margin-bottom:6px;">
              <div class="col-6" style="display: inline-block;">
                <select class="depFieldTypeSelectCascading1 select2 form-control" onchange="casadingColOption.call(this)">
                  <option value="" selected>Select dependent field</option>
                </select>
              </div>
              <div class="col-5" style="display: inline-block;">
                <select class="depFieldTypeMapperCascading1 select2 form-control commonCol">
                  <option value="" selected>Select mapping field</option>
                </select>
              </div>
              <div class="col-1" style="display: inline-block;">
                <span class="float-right" style="font-size: 15px;" onclick="removeIndField.call(this)"><i class="fas fa-remove"></i></span>
              </div>
            </div>
            `
            $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').find('.depFieldTypeMapperCascading1').select2();
            $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').find('.depFieldTypeSelectCascading1').select2();
            $('#JSConfig').find('.multipleJs').eq(k).find('.masterTableSelectCascading1').select2()
            for(let j = 0; j < values1.length; j++) {
              if (j > 0) {
                $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).remove();
                $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').append(htmlC)
                $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(-1).find('.card-title').html('Cascading level '+($('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').length - 1))
              }
            }
            for(let j = 0; j < values1.length; j++) {
              $('#JSConfig').find('.multipleJs').eq(k).find('.masterTableSelectCascading1').eq(j).attr("data-reload","yes")
              $('#JSConfig').find('.multipleJs').eq(k).find('.masterTableSelectCascading1').eq(j).attr("data-reloaddata",JSON.stringify(values1))
              $('#JSConfig').find('.multipleJs').eq(k).find('.masterTableSelectCascading1').eq(j).attr("data-k",k)
              $('#JSConfig').find('.multipleJs').eq(k).find('.masterTableSelectCascading1').eq(j).attr("data-j",j)
              $('#JSConfig').find('.multipleJs').eq(k).find('.masterTableSelectCascading1').eq(j).val(values[j]).trigger('change')
              $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('.depFieldTypeMapperCascading1').select2();
              $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('.indFieldTypeMapperCascading1').select2();
              $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('.indFieldTypeSelectCascading1').select2();
              for(let i = 0; i < values1[j]['depField'].length; i++) {
                if (i == 0) {
                  if (j == 0) {
                    $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('.depFieldTypeSelectCascading1').eq(i).val(values1[j]['depField'][i]).trigger('change');
                  } else {
                    for(k1 in allFieldsColumns){
                      if (allFieldsColumnsType[k1] != "BooleanField") {
                        $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('.depFieldTypeSelectCascading1').eq(0).append(`<option value="${allFieldsColumns[k1]}">${verboseName[k1]}</option>`)
                      }
                    }
                    $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('.depFieldTypeSelectCascading1').eq(i).val(values1[j]['depField'][i]).trigger('change');
                  }
              } else {
                $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('#depFieldTypeCascading1').append(html);
                for(k1 in commonCol){
                  $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('.depFieldTypeMapperCascading1').eq(-1).append(`<option value="${commonCol[k1]}">${commonColVerb[k1]}</option>`)
                }
                for(k1 in allFieldsColumns){
                  if (allFieldsColumnsType[k1] != "BooleanField") {
                    $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('.depFieldTypeSelectCascading1').eq(-1).append(`<option value="${allFieldsColumns[k1]}">${verboseName[k1]}</option>`)
                  }
                }
                $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('.depFieldTypeSelectCascading1').eq(-1).val(values1[j]['depField'][i]).trigger('change');
              }
              $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('.depFieldTypeSelectCascading1').eq(i).val(values1[j]['depField'][i]).trigger('change');
              }
          }
          $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('#depFieldTypeCascading1').find('col-12').eq(-1).remove()
          $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').find('.depFieldTypeSelectCascading1').select2()
          $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').find('.depFieldTypeMapperCascading1').select2()
          $('.depFieldTypeMapperCascading1').select2();
          $('.depFieldTypeSelectCascading1').select2();
          $('.indFieldTypeMapperCascading1').select2();
          $('.indFieldTypeSelectCascading1').select2();
          $('.masterTableSelectCascading1').select2();
          }
        } else if($('#JSConfig').find('.multipleJs').eq(k).find('.selectJSproperty').val() == 'Show-hide') {
          if (fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][0][0]['value'] == "Create manually") {
            $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldActionsSel').val("Create manually").trigger('change');
            var values1 = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][2][0]['value']
            var htmlForm  = `
              <div class="row configCont createManually" style="padding:15px">
                <div class="col-3">
                  <select class="select2 form-control formLevelFieldCond" required onchange="formLevelFieldChangeCond.call(this)">
                    <option value="Greater then">Greater than</option>
                    <option value="Smaller then">Smaller than</option>
                    <option value="Equal to">Equal to</option>
                    <option value="Not Equal to">Not Equal to</option>
                    <option value="In">In</option>
                    <option value="Not In">Not In</option>
                  </select>
                </div>
                <div class="col-4 formLevelFieldVal">
                  <select class="select2 form-control" required>
                  </select>
                </div>
                <div class="col-4 formLevelFieldValTag" style="display: none;">
                  <select class="select2 form-control" required multiple>
                  </select>
                </div>
                <div class="col-4">
                  <select class="select2 form-control formLevelFieldCol" required multiple>
                </select>
                </div>
                <div class="col-1">
                  <i class="fas fa-remove" onclick="formLevelFieldRemove.call(this)" style="margin-top:5px"></i>
                </div>
              </div>
              `
            for(let r = 0; r < values1.length; r++) {
              if(r == 0) {
                $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldCond').eq(r).val(values1[r]['condition']).trigger('change')
                $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldCol').eq(r).val(values1[r]['selectedColumn']).trigger('change')
                if($('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldVal').eq(r).css('display') === 'block') {
                  $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldVal').eq(r).find('select').append(`<option value="${values1[r]['value']}">${values1[r]['value']}</option>`)
                  $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldVal').eq(r).find('select').val(values1[r]['value']).trigger('change')
                } else {
                  var tagVal = values1[r]['value']
                  for(let tV =0 ; tV < tagVal.length; tV++) {
                      $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldValTag').eq(r).find('select').append(`<option value="${values1[r]['value'][tV]}">${values1[r]['value'][tV]}</option>`)
                  }
                  $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldValTag').eq(r).find('select').val(values1[r]['value']).trigger('change')
                }
              } else {
                $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.rowAdd').append(htmlForm);
                $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configCont').eq(-1).find('.formLevelFieldCol').select2()
                $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configCont').eq(-1).find('.formLevelFieldCond').select2()
                $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configCont').eq(-1).find('.formLevelFieldCol').parent().find('.select2-container').css('max-height','6rem')
                $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configCont').eq(-1).find('.formLevelFieldCol').parent().find('.select2-container').css('overflow-y','scroll')
                $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configCont').eq(-1).find('.formLevelFieldCol').empty()
                for(let i = 0; i < allFieldsColumns.length; i++) {
                  $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configCont').eq(-1).find('.formLevelFieldCol').append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`)
                }
                appendButton($('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configCont').eq(-1).find('.formLevelFieldCol'))
                $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configCont').eq(-1).find('.formLevelFieldVal').find('select').select2({tags:true})
                $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configCont').eq(-1).find('.formLevelFieldValTag').find('select').select2({tags:true})
                $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldCond').eq(r).val(values1[r]['condition']).trigger('change')
                $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldCol').eq(r).val(values1[r]['selectedColumn']).trigger('change')
                if($('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldVal').eq(r).css('display') === 'block') {
                  $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldVal').eq(r).find('select').append(`<option value="${values1[r]['value']}">${values1[r]['value']}</option>`)
                  $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldVal').eq(r).find('select').val(values1[r]['value']).trigger('change')
                } else {
                  var tagVal = values1[r]['value']
                  for(let tV =0 ; tV < tagVal.length; tV++) {
                    $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldValTag').eq(r).find('select').append(`<option value="${values1[r]['value'][tV]}">${values1[r]['value'][tV]}</option>`)
                  }
                  $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldValTag').eq(r).find('select').val(values1[r]['value']).trigger('change')
                }
              }
            }
          } else if (fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][0][0]['value'] == "Link to source table") {
            $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldActionsSel').val("Link to source table").trigger('change');
            var values1 = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][2][0]['value']
            for(let r = 0; r < values1.length; r++) {
              $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configContLink').find('.formLevelFieldMasterTable').find('select').attr("data-reload","yes")
              $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configContLink').find('.formLevelFieldMasterTable').find('select').attr("data-k",k)
              $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configContLink').find('.formLevelFieldMasterTable').find('select').attr("data-reloaddata",JSON.stringify(values1))
              $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configContLink').find('.formLevelFieldMasterTable').find('select').attr("data-r",r)
              $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configContLink').find('.formLevelFieldMasterTable').find('select').val(values1[r]['masterTable']).trigger('change')
            }
          }

        } else if($('#JSConfig').find('.multipleJs').eq(k).find('.selectJSproperty').val() == 'Foreign-key-relation') {
          if (fieldAttributesCV[index]) {
            var values = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][0][0]['value']
            var valuesCond
            var defValue = fieldAttributesCV[index][colName][0]['jsattr'][k]["default"]
            var htmlCondForeign = `
              <div class="subCont col-12" style="display:flex; margin-top: 10px">
                <div class="col-3">
                  <p style="font-weight: bold;">Select Condition Column</p>
                  <select class="select2 form-control selectparentcolumnCond" name="selectparentcolumnCond" >
                  </select>
                </div>
                <div class="col-2">
                  <p style="font-weight: bold;">Select condition:</p>
                  <select class="select2 form-control foreignKeyCond" required onchange="foreignKeyCond.call(this)">
                    <option value="Greater then">Greater than</option>
                    <option value="Smaller then">Smaller than</option>
                    <option value="Equal to">Equal to</option>
                    <option value="Not Equal to">Not Equal to</option>
                    <option value="In">In</option>
                  </select>
                </div>
                <div class="col-2 foreignKeyCondVal">
                  <p style="font-weight: bold;">Select value:</p>
                  <select class="select2 form-control" required>
                  </select>
                </div>
                <div class="col-2 foreignKeyCondValTag" style="display: none;">
                  <p style="font-weight: bold;">Select value:</p>
                  <select class="select2 form-control" required multiple>
                  </select>
                </div>
                <div class="col-2">
                  <p style="font-weight: bold;">Select value:</p>
                  <select class="select2 form-control foreignKeyDynamicVal">
                    <option value="" selected>Select value</option>
                    <option value="curr_user">Current User</option>
                    <option value="curr_date">Current Date</option>
                  </select>
                </div>
                <div class="col-2">
                  <p style="font-weight: bold;">Constraint</p>
                  <input class="form-control foreignKeyConstraint" type="text">
                </div>
                <div class="col-1">
                  <p style="font-weight: bold;">Rule set:</p>
                  <input class="form-control foreignKeySet" type="text">
                </div>
                <div class="col-1">
                  <i class="fas fa-minus" onclick="removeForeignKeyCond.call(this)" data-toggle="tooltip" title="Remove condition"></i> </i>
                </div>
              </div>
            `
            if (fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][2][0].hasOwnProperty('condition')) {
              valuesCond = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][2][0]['condition']
              if (valuesCond.hasOwnProperty('dynamicVal')){
                $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(-1).find('.foreignKeyDynamicVal').val(valuesCond["dynamicVal"]).trigger("change");
              }
            } else {
              valuesCond = ""
            }
            var tableList = {{tableList|safe}};
            string2 = ''
            for(var i=0; i< tableList.length; i++) {
              var opt = tableList[i];
              string2 += `<option value="` + opt + `">` + opt + `</option>`;
            }
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectpctype').empty();
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectpctype').append(string2);
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectpctype').attr("data-reload","yes")
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectpctype').attr("data-reloaddata",JSON.stringify(fieldAttributesCV))
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectpctype').attr("data-index",index)
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectpctype').attr("data-k",k)
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectpctype').attr("colName",colName)
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectpctype').attr("valuesCond",valuesCond)
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectpctype').val(values).trigger('change');
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectparentcolumn').attr("data-reload","yes")
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectparentcolumn').attr("data-reloaddata",JSON.stringify(defValue))
            $('#JSConfig').find('.multipleJs').eq(k).find('.selectparentcolumn').attr("data-k",k)
            let optionsObject = {};
            $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(0).find('.selectparentcolumnCond > option').each(function() {
              optionsObject[$(this).val()] = $(this).text();
            });
            $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(-1).find('.foreignKeyDynamicVal').find('select').each(function(){
    $(this).select2()
  })
            $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(-1).find('.foreignKeyCondValTag').find('select').select2({'tags':true});
            $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(-1).find('.foreignKeyCondVal').find('select').select2({'tags':true});
            for (let [key, value] of Object.entries(optionsObject)) {
              $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(-1).find('.selectparentcolumnCond').append(`<option value='${key}'>${value}</option>`);
            }
            $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(-1).find('select').each(function(){
    $(this).select2()
  });
            if (valuesCond != "") {
              for(let y1 = 0; y1 < valuesCond["cond"].length; y1++) {
                if(y1 > 0 ) {
                  $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').append(htmlCondForeign);
                  $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(-1).find('.foreignKeyCondValTag').find('select').select2({'tags':true});
                  $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(-1).find('.foreignKeyCondVal').find('select').select2({'tags':true});
                  $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(-1).find('.foreignKeyDynamicVal').find('select').each(function(){
    $(this).select2()
  })
                  for (let [key, value] of Object.entries(optionsObject)) {
                    $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(-1).find('.selectparentcolumnCond').append(`<option value='${key}'>${value}</option>`);
                  }
                  $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(-1).find('select').each(function(){
    $(this).select2()
  })
                }
                var tempForeign
                if(valuesCond["cond"][y1] == "Greater than") {
                  tempForeign = "Greater then"
                } else if(valuesCond["cond"][y1] == "Smaller than") {
                  tempForeign = "Smaller then"
                } else if(valuesCond["cond"][y1] == "IN") {
                  tempForeign = "In"
                } else if(valuesCond["cond"][y1] == "Equal to"){
                  tempForeign = "Equal to"
                } else if(valuesCond["cond"][y1] == "Not Equal to"){
                  tempForeign = "Not Equal to"
                }
                $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(y1).find('.foreignKeyCond').val(tempForeign).trigger('change');
                if(valuesCond.hasOwnProperty("constraint")){
                  $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(y1).find('.foreignKeyConstraint').val(valuesCond["constraint"][y1]).trigger('change');
                  $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(y1).find('.foreignKeySet').val(valuesCond["ruleSet"][y1]).trigger('change');
                }
                if(valuesCond["cond"][y1] == "IN") {
                  $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(y1).find('.foreignKeyCondVal').css('display','none');
                  $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(y1).find('.foreignKeyCondValTag').css('display','block');
                  for(let fk = 0; fk < valuesCond["value"][y1].length; fk++) {
                    $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(y1).find('.foreignKeyCondValTag').find('select').append(`<option value="${valuesCond["value"][y1][fk]}">${valuesCond["value"][y1][fk]}</option>`);
                  }
                  $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(y1).find('.foreignKeyCondValTag').find('select').val(valuesCond["value"][y1]).trigger('change');
                } else {
                  $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(y1).find('.foreignKeyCondVal').find('select').append(`<option value="${valuesCond["value"][y1]}">${valuesCond["value"][y1]}</option>`);
                  $('#JSConfig').find('.multipleJs').eq(k).find('.foreignKeyCondCont').find('.subCont').eq(y1).find('.foreignKeyCondVal').find('select').val(valuesCond["value"][y1]).trigger('change');
                }
              }
            }

            if(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'].length > 3){

              if (fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][3][0].hasOwnProperty('config')) {

                if(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][3][0]["config"].length > 0){
                  config = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][3][0]["config"]


                  $('#JSConfig').find('.multipleJs').eq(k).find(".select_filter_type").val('master').trigger('change')
                  for(let kk=0;kk<config.length;kk++){
                    $('#JSConfig').find('.multipleJs').eq(k).find(".fk-master-btn").trigger('click')
                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyMasterCont").find(".subMasterCont").eq(-1).find('.fk-master-table').val(config[kk]["masterTable"]).trigger('change')
                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyMasterCont").find(".subMasterCont").eq(-1).find('.foreignKeyMasterCond').val(config[kk]["masterCondition"]).trigger('change')
                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyMasterCont").find(".subMasterCont").eq(-1).find('.foreignKeyMasterConstraint').val(config[kk]["constraintName"]).trigger('change')
                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyMasterCont").find(".subMasterCont").eq(-1).find('.foreignKeyMasterSet').val(config[kk]["ruleSet"]).trigger('change')
                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyMasterCont").find(".subMasterCont").eq(-1).find('.foreignKeyMasterCondValSel').val(config[kk]["inputFormColumn"]).trigger('change')
                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyMasterCont").find(".subMasterCont").eq(-1).find('.selectreturnMasterCond').attr('data-data',config[kk]["column_name"])

                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyMasterCont").find(".subMasterCont").eq(-1).find('.selectparentcolumnMasterCond').attr('data-data',config[kk]["masterColumn"])
                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyMasterCont").find(".subMasterCont").eq(-1).find('.selectparentreturncolumnMasterCond').attr('data-data',config[kk]["masterOutputColumn"])
                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyMasterCont").find(".subMasterCont").eq(-1).find('.tableOpCol').attr('data-data',config[kk]["masterOutputColumn"])
                  }

                }

              }

            }

            if(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'].length > 3){

              if (fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][4][0].hasOwnProperty('config')) {

                if(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][4][0]["config"].length > 0){

                  config = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][4][0]["config"]


                  $('#JSConfig').find('.multipleJs').eq(k).find(".select_filter_type").val('colb').trigger('change')
                  for(let kk=0;kk<config.length;kk++){
                    $('#JSConfig').find('.multipleJs').eq(k).find(".fk-master-btn").trigger('click')

                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyColBasedCont").find(".subColBasedCont").eq(-1).find('.foreignKeyColBasedCurrCol').val(config[kk]["inputFormColumn"]).trigger('change')

                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyColBasedCont").find(".subColBasedCont").eq(-1).find('.foreignKeyColBasedCond').val(config[kk]["condition"]).trigger('change')

                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyColBasedCont").find(".subColBasedCont").eq(-1).find('.foreignKeyColBasedConstraint').val(config[kk]["constraintName"]).trigger('change')

                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyColBasedCont").find(".subColBasedCont").eq(-1).find('.foreignKeyColBasedSet').val(config[kk]["ruleSet"]).trigger('change')

                    $('#JSConfig').find('.multipleJs').eq(k).find(".foreignKeyColBasedCont").find(".subColBasedCont").eq(-1).find('.foreignKeyColBasedReturnCol').attr('data-data',config[kk]["column_name"])
                  }

              }
            }

              }


          }
          } if($('#JSConfig').find('.multipleJs').eq(k).find('.selectJSproperty').val() == 'Styling attribute') {
          if (fieldAttributesCV[index]) {
            var values = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][2][0]['value']
            $('#JSConfig').find('.multipleJs').eq(k).find(".stylingJs").find('select').each(function() {
    $(this).select2()
              $(this).closest(".stylingJsValidationColorVal").find('select').select2({tags:true});
              $(this).closest(".stylingJsValidationColorValTag").find('select').select2({tags:true});
            })
            $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsBorderTypeSelect').val(values['border-style']).trigger('change');
            $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsBorderColorInput').val(values['border-color']).trigger('change');
            $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsBorderWidthInput').val(values['border-width']).trigger('change');
            $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsBorderWidthSelect').val('px').trigger('change');
            $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsFieldColorInput').val(values['background-color']).trigger('change');
            $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColorInput').val(values['background-color-validation']).trigger('change');
            $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsHoverInput').val(values['title']).trigger('change');
            $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsInstructionInput').val(values['instruction']).trigger('change');
            $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsDetailsInput').val(values['details']).trigger('change');
            $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsMandatoryInput').prop("checked",values['mandatoryfield']).trigger('change');
            $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsDetailsColorInput').val(values['details-bg']).trigger('change');
            $('#ins_text_color').val(values['instruction_text_color']).trigger('change');
            $('#url_text1').val(values['instruction_text_link']).trigger('change');
            $('#select_app_hyperlink').attr('data-existing-config', values['inapp_app']);
            $('#select_process_hyperlink').attr('data-existing-config', values['inapp_pro']);
            $('#select_subprocess_hyperlink').attr('data-existing-config', values['inapp_subpro']);
            $('#instructions_url_dropdown').val(values['url_class_type']).trigger('select2:select');
            $('#instructions_url_dropdown').val(values['url_class_type']).trigger('change');
            if (values['inapp_link_target'] == 'true'){
              $('#inurltype').prop('checked', true);
            }
            if (values['manual_link_target'] == 'true'){
              $('#insurl_link').prop('checked', true);
            }
            $('#insurl_link').val(values['manual_link']).trigger('change');
            $('#insurl_inapp_link_color').val(values['inapp_link_color']).trigger('change');
            $('#insurl_link_color').val(values['manual_link_color']).trigger('change');
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).parent().attr("style",values["style"]);
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).parent().css('background-color',"")
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('input').css('background-color',values["background-color"]);
            if($('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('input').attr('type') == 'file' || $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('input').attr('type') == 'image') {
              $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('input').parent().find('label').css('background-color',values["background-color"]);
            }
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('select').css('background-color',values["background-color"])
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('textarea').css('background-color',values["background-color"])
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('input').css('border-radius','5px')
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('select').css('border-radius','5px')
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('textarea').css('border-radius','5px')
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('input').parent().css('background-color',values["background-color"])
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('select').parent().css('background-color',values["background-color"])
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('textarea').parent().css('background-color',values["background-color"])
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('textarea').css('border-radius','5px')
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('input').parent().css('border-radius','5px')
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('select').parent().css('border-radius','5px')
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('textarea').parent().css('border-radius','5px')
            if(values["title"]) {
              $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).parent().attr("title",values["title"]);
              $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).parent().attr("data-toggle","tooltip");
            } else {
              $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).parent().removeAttr("data-toggle","tooltip");
            }
            if(values["instruction"]) {
              $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('small').remove()
              $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('span').remove()
              $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).append(`<small class="form-text text-muted">${values["instruction"]}</small>`);
            } else {
              $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find('span').remove()
              $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+$('#selectField').val()).find("small").remove();
            }
            $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.formLevelFieldActionsSel').val("Create manually").trigger('change');
            var values1 = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][2][0]['value']["styleValidation"]
            var html = `
              <div class="stylingJsValidationColorCont" style="width: 100%; display:flex">
                <div class="col-3">
                  <p style="font-weight: bold;">Select condition:</p>
                  <select class="select2 form-control stylingJsValidationColorCond" required onchange="stylingJsValidationColorCond.call(this)">
                    <option value="Greater then">Greater than</option>
                    <option value="Smaller then">Smaller than</option>
                    <option value="Equal to">Equal to</option>
                    <option value="In">In</option>
                  </select>
                </div>
                <div class="col-3 stylingJsValidationColorVal">
                  <p style="font-weight: bold;">Select value:</p>
                  <select class="select2 form-control" required>
                  </select>
                </div>
                <div class="col-3 stylingJsValidationColorValTag" style="display: none;">
                  <p style="font-weight: bold;">Select value:</p>
                  <select class="select2 form-control" required multiple>
                  </select>
                </div>
                <div class="col-3">
                  <p style="font-weight: bold;">Select fields to change color:</p>
                  <select class="select2 form-control stylingJsValidationColorCol" required multiple >
                </select>
                </div>
                <div class="col-2">
                  <p style="font-weight: bold;">Select field color:</p>
                  <input type="color" class="form-control stylingJsValidationColorInput" data-css="background-color" required>
                </div>
                <div class="col-1">
                  <i class="fas fa-minus" onclick="stylingJsValidationColorRemove.call(this)" data-toggle="tooltip" title="Add condition"></i> </i>
                </div>
              </div>
                `
            for(let r = 0; r < values1.length; r++) {
              if(r == 0) {
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorCond').eq(r).val(values1[r]['condition']).trigger('change')
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorCol').eq(r).val(values1[r]['selectedColumn']).trigger('change')
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorInput').eq(r).val(values1[r]['color']).trigger('change')
                if($('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorVal').eq(r).css('display') === 'block') {
                  $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorVal').eq(r).find('select').append(`<option value="${values1[r]['value']}">${values1[r]['value']}</option>`)
                  $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorVal').eq(r).find('select').val(values1[r]['value']).trigger('change')
                } else {
                  var tagVal = values1[r]['value']
                  for(let tV =0 ; tV < tagVal.length; tV++) {
                      $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorValTag').eq(r).find('select').append(`<option value="${values1[r]['value'][tV]}">${values1[r]['value'][tV]}</option>`)
                  }
                  $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorValTag').eq(r).find('select').val(values1[r]['value']).trigger('change')
                }
              } else {
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').append(html);
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorCol').select2()
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorCond').select2()
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorCol').parent().find('.select2-container').css('max-height','6rem')
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorCol').parent().find('.select2-container').css('overflow-y','scroll')
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorCol').empty()
                for(let i = 0; i < allFieldsColumns.length; i++) {
                  $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorCol').append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`)
                }
                appendButton($('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorCol'))
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorVal').find('select').select2({tags:true})
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorValTag').find('select').select2({tags:true})
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorCond').eq(r).val(values1[r]['condition']).trigger('change')
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorCol').eq(r).val(values1[r]['selectedColumn']).trigger('change')
                $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorInput').eq(r).val(values1[r]['color']).trigger('change')
                if($('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorVal').eq(r).css('display') === 'block') {
                  $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorVal').eq(r).find('select').append(`<option value="${values1[r]['value']}">${values1[r]['value']}</option>`)
                  $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorVal').eq(r).find('select').val(values1[r]['value']).trigger('change')
                } else {
                  var tagVal = values1[r]['value']
                  for(let tV =0 ; tV < tagVal.length; tV++) {
                    $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorValTag').eq(r).find('select').append(`<option value="${values1[r]['value'][tV]}">${values1[r]['value'][tV]}</option>`)
                  }
                  $('#JSConfig').find('.multipleJs').eq(k).find('.stylingJsValidationColor').find('.stylingJsValidationColorValTag').eq(r).find('select').val(values1[r]['value']).trigger('change')
                }
              }
            }
            stateOfCss["previous"] = values["style"]
            stateOfCss["background-color"] = values["background-color"]
            stateOfCss["save"] = "no"
            stateOfCss["title"] = values['title']
            stateOfCss["span"] = values["instruction"]
            stateOfCss["col"] = $("#selectField").val();
          }
          eventTrigger();
          }
          else if($('#JSConfig').find('.multipleJs').eq(k).find('.selectJSproperty').val() == 'Auto-populate Constant') {
            if (fieldAttributesCV[index]) {
                var value_constant = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][0][0]['column_value']
                var static_inp_val = ""

                  if(value_constant == "static_value"){
                    $('#JSConfig').find('.multipleJs').eq(k).find(".auto_static_div").css("display","block")
                    static_inp_val = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][0][0]['static_inp_val']
                    $('#JSConfig').find('.multipleJs').eq(k).find('.auto_static_div').find("input").val(static_inp_val).trigger('change');
                  }else{
                    $('#JSConfig').find('.multipleJs').eq(k).find(".auto_static_div").css("display","none")
                  }

                $('#JSConfig').find('.multipleJs').eq(k).find('.select_ap_constant').val(value_constant).trigger('change');

                if(fieldAttributesCV[index][colName][0]['jsattr'][k].hasOwnProperty('allow_edit_c')){
                  if(fieldAttributesCV[index][colName][0]['jsattr'][k]['allow_edit_c'] == 'yes'){
                    $('#JSConfig').find('.multipleJs').eq(k).find('.field_autoc_allowedit').prop('checked', true)
                  }else{
                    $('#JSConfig').find('.multipleJs').eq(k).find('.field_autoc_allowedit').prop('checked', false)
                  }
                }else{
                  $('#JSConfig').find('.multipleJs').eq(k).find('.field_autoc_allowedit').prop('checked', false)
                }
            }
          }
          else if($('#JSConfig').find('.multipleJs').eq(k).find('.selectJSproperty').val() == 'Validation based message') {
            if (fieldAttributesCV[index]) {
                let msg_text = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][0][0]['msg_text']
                let cols = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][0][0]['compute_fields']
                var values1 = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][0][0]["condition"]["styleValidation"]
                var text_color = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][0][0]["text_color"]
                var html = `
                <div class="stylingJsValidationColorCont" style="width: 100%; display:flex">
                  <div class="col-3">
                    <p style="font-weight: bold;">Select condition:</p>
                    <select class="select2 form-control stylingJsValidationColorCond" required onchange="stylingJsValidationColorCond.call(this)">
                      <option value="Greater then">Greater than</option>
                      <option value="Smaller then">Smaller than</option>
                      <option value="Equal to">Equal to</option>
                      <option value="In">In</option>
                    </select>
                  </div>
                  <div class="col-3 stylingJsValidationColorVal">
                    <p style="font-weight: bold;">Select value:</p>
                    <select class="select2 form-control" data-select2-tags="true" required>
                    </select>
                  </div>
                  <div class="col-3 stylingJsValidationColorValTag" style="display: none;">
                    <p style="font-weight: bold;">Select value:</p>
                    <select class="select2 form-control" data-select2-tags="true" required multiple>
                    </select>
                  </div>
                  <div class="col-3">
                    <p style="font-weight: bold;">Select fields to change color:</p>
                    <select class="select2 form-control stylingJsValidationColorCol" data-select2-tags="true" required multiple >
                  </select>
                  </div>
                  <div class="col-2">
                    <p style="font-weight: bold;">Select field color:</p>
                    <input type="color" class="form-control stylingJsValidationColorInput" data-css="background-color" required>
                  </div>
                  <div class="col-1">
                    <i class="fas fa-minus" onclick="stylingJsValidationColorRemove.call(this)" data-toggle="tooltip" title="Add condition"></i> </i>
                  </div>
                </div>
                  `

                $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg_text').val(msg_text).trigger('change');
                $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg_global_var').val(cols).trigger('change');
                $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg_txt_color').val(text_color).trigger('change');
                let eqid = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][0][0]['eqid']
                $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg_global_var_eq').attr("data-eq_id",eqid);


                for(let r = 0; r < values1.length; r++) {
                  if(values1[r]["value"]){

                    $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg').find('.stylingJsValidationColor').append(html);
                    $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg').find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorCol').select2({tags:true})

                    $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg').find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.val_based_msg').find('.stylingJsValidationColorCond').select2()

                    $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg').find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorCond').val(values1[r]["condition"]).trigger('change')
                    $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg').find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorInput').val(values1[r]["color"]).trigger('change')

                    for(let i=0; i < values1[r]['selectedColumn'].length; i++){
                      $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg').find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorCol').append(`<option value='${values1[r]['selectedColumn'][i]}'>${values1[r]['selectedColumn'][i]}</option>`)
                    }
                    $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg').find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorCol').val(values1[r]['selectedColumn']).trigger('change')

                    if(values1[r]["condition"] != "In"){
                      $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg').find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorVal').find('select').append(`<option value='${values1[r]['value']}'>${values1[r]['value']}</option>`)
                      $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg').find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorVal').find('select').val(values1[r]['value']).trigger('change')
                    }else{
                      for(let j=0;j<values1[r]['value'].length;j++){
                        $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg').find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorValTag').find('select').append(`<option value='${values1[r]['value'][j]}'>${values1[r]['value'][j]}</option>`)
                      }

                      $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg').find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').eq(-1).find('.stylingJsValidationColorValTag').find('select').val(values1[r]['value']).trigger('change')
                    }

                  }
                }

                $('#JSConfig').find('.multipleJs').eq(k).find('.val_based_msg').find('.stylingJsValidationColor').find('.stylingJsValidationColorCont').each(function(){
                  $(this).find('.stylingJsValidationColorVal').find('select').select2('destroy').select2({tags:true})
                  $(this).find('.stylingJsValidationColorValTag').find('select').select2('destroy').select2({tags:true})
                  $(this).find('.stylingJsValidationColorCol').select2('destroy').select2({tags:true})
                })
            }
          }
          else if ($('#JSConfig').find('.multipleJs').eq(k).find('.selectJSproperty').val() == 'Field Type Settings'){
            $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean_field_sliders_styles').find('select').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['style_slider']).trigger('change')
            if ($('#selectField').attr('selected-field-type') =='BooleanField'){
              if (fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['style_slider'] == 'text_silder'){
                $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-selected').find('.boolean-text-color-selected').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['selected']['text-color-selected']).trigger('change')
                $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-text').find('.boolean-text-true').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['selected']['text-true']).trigger('change')
                $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-selected').find('.boolean-bg-color-selected').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['selected']['bg-color-selected']).trigger('change')
                $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-selected').find('.boolean-bg-color-opacity-selected').find('select').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['selected']['bg-color-opacity-selected']).trigger('change')
                $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-not-selected').find('.boolean-text-color-not-selected').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['not_selected']['text-color-not-selected']).trigger('change')
                $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-text').find('.boolean-text-false').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['not_selected']['text-false']).trigger('change')
                $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-not-selected').find('.boolean-bg-color-not-selected').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['not_selected']['bg-color-not-selected']).trigger('change')
                $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-not-selected').find('.boolean-bg-color-opacity-not-selected').find('select').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['not_selected']['bg-color-opacity-not-selected']).trigger('change')
              }else{
                if ('new_configs' in fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']){
                  $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-bg-color-active').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['bg_slider_color_active']).trigger('change')
                  $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-bg-color-opacity-active').find('select').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['bg_slider_color_opactiy_active']).trigger('change')
                  $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-bg-color-in-active').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['bg_slider_color_in_active']).trigger('change')
                  $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-bg-color-opacity-in-active').find('select').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['bg_slider_color_opactiy_in_active']).trigger('change')
                  $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-align').find('select').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['text_aligment']).trigger('change')
                  $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-left').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['text_left']).trigger('change')
                  $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-right').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['text_right']).trigger('change')
                }else{
                  $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-bg-color-active').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['bg_slider_color']).trigger('change')
                  $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-bg-color-opacity-active').find('select').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['bg_slider_color_opactiy']).trigger('change')
                }
              }
            }else if ($('#selectField').attr('selected-field-type') =='CharField'){
              $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-selected').find('.boolean-text-color-selected').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['selected']['text-color-selected']).trigger('change')
              $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-selected').find('.boolean-bg-color-selected').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['selected']['bg-color-selected']).trigger('change')
              $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-selected').find('.boolean-bg-color-opacity-selected').find('select').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['selected']['bg-color-opacity-selected']).trigger('change')
              $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-not-selected').find('.boolean-text-color-not-selected').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['not_selected']['text-color-not-selected']).trigger('change')
              $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-not-selected').find('.boolean-bg-color-not-selected').find('input').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['not_selected']['bg-color-not-selected']).trigger('change')
              $('#JSConfig').find('.multipleJs').eq(k).find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-not-selected').find('.boolean-bg-color-opacity-not-selected').find('select').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['not_selected']['bg-color-opacity-not-selected']).trigger('change')
            }else if ($('#selectField').attr('selected-field-type') =='IntegerField' || 'FloatField'){
              $('#minvalue').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['minvalue']).trigger('change');
              $('#maxvalue').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['maxvalue']).trigger('change');
              $('#stepvalue').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['stepvalue']).trigger('change');
              $('#numeric_range_slider_color').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['slider_color']).trigger('change');
            }
          }else if ($('#JSConfig').find('.multipleJs').eq(k).find('.selectJSproperty').val() == 'JS Action Populate'){
            $('#JSConfig').find('.multipleJs').eq(k).find('.js_action_populate').find('.first_dependant_field').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['first_dependant_field']).trigger('change')
            $('#JSConfig').find('.multipleJs').eq(k).find('.js_action_populate').find('.second_dependant_field').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['second_dependant_field']).trigger('change')
            $('#JSConfig').find('.multipleJs').eq(k).find('.js_action_populate').find('.operation').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['operation']).trigger('change')
            if ('static' in fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']){
              if (fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['static'] =='master_field_comparison'){
                $('#JSConfig').find('.multipleJs').eq(k).find('.js_action_populate').find('.master_field_table').attr('data-column',fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['master_column']);
                $('#JSConfig').find('.multipleJs').eq(k).find('.js_action_populate').find('.master_field_table').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['master_table']).trigger('change');
                $('#JSConfig').find('.multipleJs').eq(k).find('.js_action_populate').find('button').attr('data-list',JSON.stringify(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['conditions']));
              }
              $('#JSConfig').find('.multipleJs').eq(k).find('.js_action_populate').find('.static_field').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['static']).trigger('change')
              $('#JSConfig').find('.multipleJs').eq(k).find('.js_action_populate').find('.static_value').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['static_value']).trigger('change')
            }
          }
          else if ($('#JSConfig').find('.multipleJs').eq(k).find('.selectJSproperty').val() == 'Show field info'){
            $('#JSConfig').find('.multipleJs').eq(k).find('.showFieldInfoTableName').attr('data-list',JSON.stringify(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']))
            $('#JSConfig').find('.multipleJs').eq(k).find('.showFieldInfoTableName').val(fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr']['linkedTable']).trigger('change')
          }
          else if($('#JSConfig').find('.multipleJs').eq(k).find('.selectJSproperty').val() == 'Auto-populate') {
            if (fieldAttributesCV[index]) {
              var values_autopopulate = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][1][0]['value']
              var values1_autopopulate = fieldAttributesCV[index][colName][0]['jsattr'][k]['finaljsattr'][0][0]['value']
              var html = `
              <div class="row" style="margin-bottom:6px;">
                <div class="col-6" style="display: inline-block;">
                  <select class="depFieldTypeSelect select2 form-control">
                    <option value="" selected>Select independent field</option>
                  </select>
                </div>
                <div class="col-5" style="display: inline-block;">
                  <select class="depFieldTypeMapper select2 form-control commonCol" onchange="check_master_foreignkey.call(this,'Auto-populate')">
                    <option value="" selected>Select mapping field</option>
                  </select>
                </div>
                <div class="col-1" style="display: inline-block;">
                  <span class="float-right" style="font-size: 15px;" onclick="removeIndField.call(this)"><i class="fas fa-remove"></i></span>
                </div>
              </div>
              `
              $('.depFieldTypeMapper').select2();
              $('.depFieldTypeSelect').select2();
              $('#JSConfig').find('.multipleJs').eq(k).find('.masterTableSelect').attr("data-reload","yes")
              $('#JSConfig').find('.multipleJs').eq(k).find('.masterTableSelect').attr("data-reloaddata",JSON.stringify(fieldAttributesCV))
              $('#JSConfig').find('.multipleJs').eq(k).find('.masterTableSelect').attr("data-index",index)
              $('#JSConfig').find('.multipleJs').eq(k).find('.masterTableSelect').attr("data-k",k)
              $('#JSConfig').find('.multipleJs').eq(k).find('.masterTableSelect').attr("colName",colName)
              for(let i = 0; i < values1_autopopulate['depField'].length; i++) {
                if (i == 0) {
                  $('#JSConfig').find('.multipleJs').eq(k).find('.depFieldTypeSelect').eq(0).val(values1_autopopulate['depField'][0]).trigger('change');
                } else {
                  $('#JSConfig').find('.multipleJs').eq(k).find('#depFieldType').append(html);
                  for(j in commonCol){
                    $('.depFieldTypeMapper').eq(-1).append(`<option value="${commonCol[j]}">${commonColVerb[j]}</option>`)
                  }
                  for(j in allFieldsColumns){
                      $('#JSConfig').find('.multipleJs').eq(k).find('.depFieldTypeSelect').eq(-1).append(`<option value="${allFieldsColumns[j]}">${verboseName[j]}</option>`)
                  }
                  $('#JSConfig').find('.multipleJs').eq(k).find('.depFieldTypeSelect').eq(i).val(values1_autopopulate['depField'][i]).trigger('change');
                }
              }
              $('.depFieldTypeSelect').select2()
              $('.depFieldTypeMapper').select2()
              $('#JSConfig').find('.multipleJs').eq(k).find('.masterTableSelect').val(values_autopopulate).trigger('change')
              if(fieldAttributesCV[index][colName][0]['jsattr'][k].hasOwnProperty('allow_edit')){
                if(fieldAttributesCV[index][colName][0]['jsattr'][k]['allow_edit'] == 'yes'){
                  $('#JSConfig').find('.multipleJs').eq(k).find('.field_auto_allowedit').prop('checked', true)
                }else{
                  $('#JSConfig').find('.multipleJs').eq(k).find('.field_auto_allowedit').prop('checked', false)
                }
              }else{
                $('#JSConfig').find('.multipleJs').eq(k).find('.field_auto_allowedit').prop('checked', false)
              }

              if(fieldAttributesCV[index][colName][0]['jsattr'][k].hasOwnProperty('auto_values')){
                if(fieldAttributesCV[index][colName][0]['jsattr'][k]['auto_values'] == 'yes'){
                  $('#JSConfig').find('.multipleJs').eq(k).find('.field_auto_values').prop('checked', true)
                }else{
                  $('#JSConfig').find('.multipleJs').eq(k).find('.field_auto_values').prop('checked', false)
                }
              }else{
                $('#JSConfig').find('.multipleJs').eq(k).find('.field_auto_values').prop('checked', false)
              }

              }
          }

        }
      }

    $('.masterTableSelect').on('change',function() {
      var selectedTables=[$(this).val()]
      let thiss_ = $(this)
      $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFieldsAll',
            'tablesForm':JSON.stringify(selectedTables),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            commonCol = []
            commonColVerb = []
            $(this).parent().parent().parent().find('.commonCol').empty()
            $(this).parent().parent().parent().find('.commonCol').append(`<option value="Select mapper column">Select mapper column</option>`)
            for(j in data.finalFieldList){
              $(this).parent().parent().parent().find('.commonCol').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
              commonCol.push(data.finalFieldList[j]['fieldName'])
              commonColVerb.push(data.finalFieldList[j]['verbose'])
            }

            if(thiss_.attr("data-reload") == "yes") {
                let data1 = JSON.parse(thiss_.attr("data-reloaddata"))
                let k_ = thiss_.attr("data-k")
                let index_ = thiss_.attr("data-index")
                let colName = thiss_.attr("colName")
                thiss_.removeAttr("data-reload")
                thiss_.removeAttr("data-k")
                thiss_.removeAttr("data-index")
                thiss_.removeAttr("data-reloaddata")
                thiss_.removeAttr("colName")
                masterTableSelectLoad(data1,k_,index_,colName)
              }
            },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
      })
    })
    var selectColFromTable  = function() {
      var selectedTables=[$(this).val()]
      var current = $(this);
      $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFieldsAll',
            'tablesForm':JSON.stringify(selectedTables),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            commonCol = []
            commonColVerb
            current.parent().parent().parent().find('.commonCol').empty()
            current.parent().parent().parent().find('.commonCol').append(`<option value="Select mapper column">Select mapper column</option>`)
            for(j in data.finalFieldList){
              if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from') {
                current.parent().parent().parent().find('.commonCol').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
                commonCol.push(data.finalFieldList[j]['fieldName'])
                commonColVerb.push(data.finalFieldList[j]['verbose'])
              }
            }

            if(current.parent().parent().find('.indFieldTypeMapperCascading1').hasClass('commonCol')){}
            else {
              var val = current.parent().parent().find('.indFieldTypeSelectCascading1').find('option').eq(1).val();
              current.parent().parent().find('.indFieldTypeSelectCascading1').val(val).trigger('change')
            }
            if(current.attr("data-reload") == "yes") {
              let data1 = JSON.parse(current.attr("data-reloaddata"))
              let k_ = current.attr("data-k")
              let j_ = current.attr("data-j")
              current.removeAttr("data-j")
              current.removeAttr("data-k")
              current.removeAttr("data-reloaddata")
              current.removeAttr("data-reload")
              selectColFromTableLoad(data1,k_,j_)
            }
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
      })
    }

    $('.selectparentcolumn').on('change', function() {
          var cur = $(this).parent().parent().parent().parent();
          let thiss_ = $(this)
          if ( cur.find('.selectJSproperty').val() == 'Foreign-key-relation') {
            cur.find('.linked-field').css('display','flex');
            cur.find('.auto_populate_constant').css('display','none');
            cur.find('.boolean_field_sliders_stylling').css('display','none');
            cur.find('.val_based_msg').css('display','none');
            cur.find('.masterTable').css('display','none');
            cur.find('#indFieldType').css('display','none');
            cur.find('#depFieldType').css('display','none');
            var selectedCol = $(this).val();
            var selectedTab = $(this).parent().parent().find('.selectpctype').val()

            $.ajax({
              url: window.location.pathname,

              data: {
                'operation': 'formColumnValuesAll',
                'table':selectedTab,
                'column':selectedCol,
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                cur.find('.selectdefcolumn').empty();
                cur.find('.selectdefcolumn').append(`<option value="def" selected>---</option>`)
                for(j=0;j<data.data.length;j++){
                    cur.find('.selectdefcolumn').append(`<option value="${data.data[j]}">${data.data[j]}</option>`)
                }
                if(thiss_.attr("data-reload") == "yes") {
                  let data1 = JSON.parse(thiss_.attr("data-reloaddata"))
                  let k_ = thiss_.attr("data-k")
                  thiss_.removeAttr("data-reload")
                  thiss_.removeAttr("data-k")
                  thiss_.removeAttr("data-reloaddata")
                  selectparentcolumnLoad(data1,k_)
                }
              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
          }
        })

    $('.selectpctype').on('change', function() {
      var cur = $(this).parent().parent().parent().parent();
      let thiss_ = $(this)
      if ( cur.find('.selectJSproperty').val() == 'Foreign-key-relation') {
        cur.find('.linked-field').css('display','flex');
        cur.find('.auto_populate_constant').css('display','none');
        cur.find('.boolean_field_sliders_stylling').css('display','none');
        cur.find('.val_based_msg').css('display','none');
        cur.find('.masterTable').css('display','none');
        cur.find('#indFieldType').css('display','none');
        cur.find('#depFieldType').css('display','none');
        var selectedTablesD = $(this).val();
        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFieldsAll',
            'tablesForm':JSON.stringify([selectedTablesD]),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            cur.find('.selectparentcolumn').empty();
            cur.find('.selectparentcolumnCond').empty();
            for(j in data.finalFieldList){
                cur.find('.selectparentcolumn').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
                cur.find('.selectparentcolumnCond').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
            }
            if(thiss_.attr("data-reload") == "yes") {
              let data1 = JSON.parse(thiss_.attr("data-reloaddata"))
              let k_ = thiss_.attr("data-k")
              let index_ = thiss_.attr("data-index")
              let colName = thiss_.attr("colName")
              let valuesCond = thiss_.attr("valuesCond")
              thiss_.removeAttr("data-reload")
              thiss_.removeAttr("data-k")
              thiss_.removeAttr("data-index")
              thiss_.removeAttr("data-reloaddata")
              thiss_.removeAttr("colName")
              thiss_.removeAttr("valuesCond")
              selectpctypeLoad(data1,k_,index_,colName,valuesCond)
            }
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
  })
      }  else if(cur.find('.selectJSproperty').val() == "Auto-populate Constant"){
          cur.find('.auto_populate_constant').css('display','block');
          cur.find('.boolean_field_sliders_stylling').css('display','none');
          cur.find('.val_based_msg').css('display','none');
          cur.find('.linked-field').css('display','none');
          cur.find('#masterTable').css('display','none');
          cur.find('#indFieldType').css('display','none');
          cur.find('#depFieldType').css('display','none');
        }
        else if( cur.find('.selectJSproperty').val() == "Linked-field-populate") {
        cur.find('.linked-field').css('display','block');
        cur.find('.auto_populate_constant').css('display','none');
        cur.find('.boolean_field_sliders_stylling').css('display','none');
        cur.find('.val_based_msg').css('display','none');
        cur.find('#masterTable').css('display','none');
        cur.find('#indFieldType').css('display','none');
        cur.find('#depFieldType').css('display','none');
      }
      else if( cur.find('.selectJSproperty').val() == "Validation based message") {
        cur.find('.linked-field').css('display','none');
        cur.find('.auto_populate_constant').css('display','none');
        cur.find('.boolean_field_sliders_stylling').css('display','none');
        cur.find('.val_based_msg').css('display','block');
        cur.find('#masterTable').css('display','none');
        cur.find('#indFieldType').css('display','none');
        cur.find('#depFieldType').css('display','none');
      }
    })
    function showfieldInfoPopulateColumns(obj){
      if ($(obj).val() != null){
        $.ajax({
              url: window.location.pathname,

              data: {
                'operation': 'formTableFieldsAll',
                'tablesForm': JSON.stringify([$(obj).val()]),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
              $(obj).parent().parent().find('.addColumnsShowFieldInfo').empty()
              $(obj).parent().parent().find('.linkedColumnsShowFieldInfo').empty()
              $(obj).parent().parent().find('.linkedColumnsShowFieldInfo').append(`<option value="" disabled="" selected>Linked Table Column</option>`)
              for(j in data.finalFieldList){
                $(obj).parent().parent().find('.linkedColumnsShowFieldInfo').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
                $(obj).parent().parent().find('.addColumnsShowFieldInfo').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
              }
              var dataList = $(obj).attr('data-list')
              if (dataList){
                dataList = JSON.parse(dataList)
                $(obj).parent().parent().find('.linkedColumnsShowFieldInfo').val(dataList['linkedTableColumn']).trigger('change')
                $(obj).parent().parent().find('.addColumnsShowFieldInfo').val(dataList['linkedAddColumns']).trigger('change')
              }
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
          })
      }

    }
    var multipleJsCard = function() {
    var html = jsContent()
      $('#JSConfig').find('.modal-body').append(html);
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find(".selectCases").empty();
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find(".selectCases").append(`<option value="" disabled>Select cases</option>`);
      for(let [key,value] of Object.entries(dic_cases) ) {
        $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find(".selectCases").append(`<option value="${key}">${key}</option>`);
      }
      for (let i in allFieldsColumns){
        if (['DateField','IntegerField','FloatField','TimeField','DateTimeField','BigIntegerField'].includes(allFieldsColumnsType[i])){
          $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.first_dependant_field').append(`<option value="${allFieldsColumns[i]}" data-type="${allFieldsColumnsType[i]}">${verboseName[i]}</option>`)
        }
      }
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.first_dependant_field').select2()
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.second_dependant_field').select2()
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.operation').select2()
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.static_field').select2()
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.master_field_table').select2()
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.card-body').find('.js_action_populate').find('.master_field_column').select2()
      $('#master_field_comparison_filter_modal').find('.modal-body').find('button').attr('data-table','');
      $('#master_field_comparison_filter_modal').find('.modal-body').find('button').attr('data-column-list','');
      $('.selectCases').select2();
      $(".selectCasesCond").select2();
      $('.depFieldTypeMapperCascading1').select2();
      $('.depFieldTypeSelectCascading1').select2();
      $('.indFieldTypeMapperCascading1').select2();
      $('.indFieldTypeSelectCascading1').select2();
      $('.masterTableSelectCascading1').select2();
      $('.indFieldTypeMapper').select2()
      $('.indFieldTypeSelect').select2();
      $('.depFieldTypeMapper').select2();
      $('.depFieldTypeSelect').select2();
      $('.multiplejs').eq(-1).find('.indFieldTypeMapper').select2();
      $('.multiplejs').eq(-1).find('.indFieldTypeSelect').select2();
      $('.masterTableSelect').select2();
      $('.selectparentcolum').select2()
      $('.selectpctype').select2()
      $('.select_filter_type').select2();
      $('.showfieldinfo').find('select').each(function(){

    $(this).select2( )
  })
      $('.boolean_field_sliders_stylling').find('select').each(function(){

    $(this).select2( )
  })
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.selectJSproperty').select2()
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.selectJSproperty').find('.select2-container').css('width','');
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.selectparentcolumn').select2()
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.selectdefcolumn').select2()
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.selectparentcolumnCond').select2()
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.linked-field').css('display','none');
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.auto_populate_constant').css('display','none');
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.boolean_field_sliders_stylling').css('display','none');
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.val_based_msg').css('display','none');
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.masterTable').css('display','none');
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('#indFieldType').css('display','none');
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('#depFieldType').css('display','none');
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.autopopulate').css('display','none');
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('#cascadingCard1').css('display','none');
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('#cascadingCard2').css('display','none');
      $('#JSConfig').find('.modal-body').find('.multipleJs').find('.configCont').eq(-1).find('.formLevelFieldCol').select2()
      $('#JSConfig').find('.modal-body').find('.multipleJs').find('.configCont').eq(-1).find('.formLevelFieldCond').select2()
      $('#JSConfig').find('.modal-body').find('.multipleJs').find('.configCont').eq(-1).find('.formLevelFieldCol').parent().find('.select2-container').css('max-height','6rem')
      $('#JSConfig').find('.modal-body').find('.multipleJs').find('.configCont').eq(-1).find('.formLevelFieldCol').parent().find('.select2-container').css('overflow-y','scroll')
      $('#JSConfig').find('.modal-body').find('.multipleJs').find('.formLevelFieldActionsSel').eq(-1).select2()
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.formLevelJs').find('.formLevelFieldMasterTable').find('select').select2(
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.stylingJs').find('select').each(function() {
    $(this).select2()
        $(this).closest(".stylingJsValidationColorVal").find('select').select2({tags:true});
        $(this).closest(".stylingJsValidationColorValTag").find('select').select2({tags:true});
      })
      )
      $('.select_ap_constant').select2()
      $('#JSConfig').find('.multipleJs').eq(-1).find('.stylingJsValidationColor').find(".stylingJsValidationColorCol").empty()
      $('#JSConfig').find('.modal-body').find('.multipleJs').eq(-1).find('.formLevelJs').find('.formLevelFieldColName').find('select').each(function(){
    $(this).select2()
  })
      if($('#JSConfig').find(".multipleJs").eq(-1).find(".selectJSproperty").val() != "Validation based message"){
        for(let i = 0; i < allFieldsColumns.length; i++) {
          $('#JSConfig').find('.modal-body').find('.multipleJs').find('.configCont').eq(-1).find('.formLevelFieldCol').append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`)
          $('#JSConfig').find('.multipleJs').eq(-1).find('.stylingJsValidationColor').find(".stylingJsValidationColorCol").append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`)
        }
        appendButton($('#JSConfig').find('.multipleJs').eq(-1).find('.stylingJsValidationColor').find('.stylingJsValidationColorCol'))
      }else{
        $('#JSConfig').find('.multipleJs').eq(-1).find('.stylingJsValidationColor').find(".stylingJsValidationColorCol").select2({tags:true})
      }
      appendButton($('#JSConfig').find('.modal-body').find('.multipleJs').find('.configCont').eq(-1).find('.formLevelFieldCol'))
      $('#JSConfig').find('.modal-body').find('.multipleJs').find('.configCont').eq(-1).find('.formLevelFieldVal').find('select').select2({tags:true})
      $('#JSConfig').find('.modal-body').find('.multipleJs').find('.configCont').eq(-1).find('.formLevelFieldValTag').find('select').select2({tags:true})
      $('#JSConfig').find('.multipleJs').eq(-1).find('.stylingJsFieldColorInput').val('#ffffff').trigger('change');
      $('.selectparentcolumn').on('change', function() {
          var cur = $(this).parent().parent().parent().parent();
          let thiss_ = $(this)
          if ( cur.find('.selectJSproperty').val() == 'Foreign-key-relation') {
            cur.find('.linked-field').css('display','flex');
            cur.find('.auto_populate_constant').css('display','none');
            cur.find('.boolean_field_sliders_stylling').css('display','none');
            cur.find('.val_based_msg').css('display','none');
            cur.find('.masterTable').css('display','none');
            cur.find('#indFieldType').css('display','none');
            cur.find('#depFieldType').css('display','none');
            var selectedCol = $(this).val();
            var selectedTab = $(this).parent().parent().find('.selectpctype').val()

            $.ajax({
              url: window.location.pathname,

              data: {
                'operation': 'formColumnValuesAll',
                'table':selectedTab,
                'column':selectedCol,
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                cur.find('.selectdefcolumn').empty();
                cur.find('.selectdefcolumn').append(`<option value="def" selected>---</option>`)
                for(j=0;j<data.data.length;j++){
                    cur.find('.selectdefcolumn').append(`<option value="${data.data[j]}">${data.data[j]}</option>`)
                }
                if(thiss_.attr("data-reload") == "yes") {
                  let data1 = JSON.parse(thiss_.attr("data-reloaddata"))
                  let k_ = thiss_.attr("data-k")
                  thiss_.removeAttr("data-reload")
                  thiss_.removeAttr("data-k")
                  thiss_.removeAttr("data-reloaddata")
                  selectparentcolumnLoad(data1,k_)
                }
              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
          }
        })
      $('.selectpctype').on('change', function() {
      var cur = $(this).parent().parent().parent().parent();
      let thiss_ = $(this)
      if ( cur.find('.selectJSproperty').val() == 'Foreign-key-relation') {
        cur.find('.linked-field').css('display','flex');
        cur.find('.auto_populate_constant').css('display','none');
        cur.find('.boolean_field_sliders_stylling').css('display','none');
        cur.find('.val_based_msg').css('display','none');
        cur.find('.masterTable').css('display','none');
        cur.find('#indFieldType').css('display','none');
        cur.find('#depFieldType').css('display','none');
        var selectedTablesD = $(this).val();
        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFieldsAll',
            'tablesForm':JSON.stringify([selectedTablesD]),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            cur.find('.selectparentcolumn').empty();
            cur.find('.selectparentcolumnCond').empty();
            for(j in data.finalFieldList){
                cur.find('.selectparentcolumn').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
                cur.find('.selectparentcolumnCond').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
            }
            if(thiss_.attr("data-reload") == "yes") {
              let data1 = JSON.parse(thiss_.attr("data-reloaddata"))
              let k_ = thiss_.attr("data-k")
              let index_ = thiss_.attr("data-index")
              let colName = thiss_.attr("colName")
              let valuesCond = thiss_.attr("valuesCond")
              thiss_.removeAttr("data-reload")
              thiss_.removeAttr("data-k")
              thiss_.removeAttr("data-index")
              thiss_.removeAttr("data-reloaddata")
              thiss_.removeAttr("colName")
              thiss_.removeAttr("valuesCond")
              selectpctypeLoad(data1,k_,index_,colName,valuesCond)
            }
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
  })
      }  else if(cur.find('.selectJSproperty').val() == "Auto-populate Constant"){
          cur.find('.auto_populate_constant').css('display','block');
          cur.find('.boolean_field_sliders_stylling').css('display','block');
          cur.find('.val_based_msg').css('display','none');
          cur.find('.linked-field').css('display','none');
          cur.find('#masterTable').css('display','none');
          cur.find('#indFieldType').css('display','none');
          cur.find('#depFieldType').css('display','none');
        }
        else if( cur.find('.selectJSproperty').val() == "Linked-field-populate") {
        cur.find('.linked-field').css('display','none');
        cur.find('.auto_populate_constant').css('display','none');
        cur.find('.boolean_field_sliders_stylling').css('display','block');
        cur.find('.val_based_msg').css('display','none');
        cur.find('#masterTable').css('display','none');
        cur.find('#indFieldType').css('display','none');
        cur.find('#depFieldType').css('display','none');
      }
      else if( cur.find('.selectJSproperty').val() == "Validation based message") {
        cur.find('.linked-field').css('display','none');
        cur.find('.auto_populate_constant').css('display','none');
        cur.find('.boolean_field_sliders_stylling').css('display','block');
        cur.find('.val_based_msg').css('display','block');
        cur.find('#masterTable').css('display','none');
        cur.find('#indFieldType').css('display','none');
        cur.find('#depFieldType').css('display','none');
      }
    })
      $('.masterTableSelect').on('change',function() {
      var selectedTables=[$(this).val()]
      var current = $(this)
      let thiss_ = $(this)
      $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFieldsAll',
            'tablesForm':JSON.stringify(selectedTables),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            commonCol = []
            commonColVerb = []
            current.parent().parent().parent().find('.commonCol').empty()
            current.parent().parent().parent().find('.commonCol').append(`<option value="Select mapper column">Select mapper column</option>`)
            for(j in data.finalFieldList){
              current.parent().parent().parent().find('.commonCol').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
              commonCol.push(data.finalFieldList[j]['fieldName'])
              commonColVerb.push(data.finalFieldList[j]['verbose'])
            }

            if(thiss_.attr("data-reload") == "yes") {
                let data1 = JSON.parse(thiss_.attr("data-reloaddata"))
                let k_ = thiss_.attr("data-k")
                let index_ = thiss_.attr("data-index")
                let colName = thiss_.attr("colName")
                thiss_.removeAttr("data-reload")
                thiss_.removeAttr("data-k")
                thiss_.removeAttr("data-index")
                thiss_.removeAttr("data-reloaddata")
                thiss_.removeAttr("colName")
                masterTableSelectLoad(data1,k_,index_,colName)
              }
            },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
      })
    })
  }
    var selectJSpropertyFunc = function() {
      var check = 0
      $("#formModal").find(".multipleJs").each(function() {
        if ($(this).find(".selectJSproperty").val() == "Styling attribute") {
          check = 1;
        }
      })
      var dict = {}
      dict["column"] = $("#selectField").val();
      if(check == 0) {
        var dict = {}
        dict["column"] = $("#selectField").val();
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict['column']).parent().attr("style",``)
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict['column']).find('input').css("background-color",`transparent`)
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict['column']).find('textarea').css("background-color",`transparent`)
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict['column']).find('select').css("background-color",`transparent`)
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict['column']).find('input').parent().css("background-color",`transparent`)
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict['column']).find('textarea').parent().css("background-color",`transparent`)
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict['column']).find('select').parent().css("background-color",`transparent`)
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').css('border-radius','');
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').css('border-radius','');
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').css('border-radius','');
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().css('border-radius','');
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').parent().css('border-radius','');
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').parent().css('border-radius','');
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict['column']).parent().removeAttr("title");
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict['column']).parent().removeAttr("data-toggle");
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+dict["column"]).find("span").remove();
        $(this).find(".stylingJs").find('select').each(function() {
          $(this).val('').trigger('change');
        })
        $(this).find(".stylingJs").find('input').each(function() {
          $(this).val('').trigger('change');
        })
        $(this).find(".stylingJs").find('textarea').each(function() {
          $(this).val('').trigger('change');
        })
      }
      var cur = $(this).parent().parent().parent().parent();
      var JS = document.getElementById("selectJSproperty")
      $('#subattriJS').empty();
      if($('.selectJSproperty').val() == "Dependent-field-autopopulate"){
        var string1 =`<br>` + `<label>Select parent field</label>` + `<select id='parentfieldname' class="select2 form-control" style="width: 430px" name="SelectedJS">` + `<option value="">----</option>`
          for(var i=0; i< fields.length; i++){
            var opt = fields[i].fieldname;
            string1 += `<option value="` + opt + `">` + opt + `</option>`;
      }
      $('#subattriJS').append(string1);
      $('#parentfieldname').select2();
      var string2 =`<br>` + `<label>Select child field</label>` + `<select id='childfieldname' class="select2 form-control" style="width: 430px" name="SelectedJS">`+ `<option value="">----</option>`
          for(var i=0; i< fields.length; i++){
            var opt = fields[i].fieldname;
            string2 += `<option value="` + opt + `">` + opt + `</option>`;
      }
      $('#subattriJS').append(string2);
      $('#childfieldname').select2();


      var string2 =`<br>` + `<label>Select reference table</label>` + `<select id='reftablename' class="select2 form-control" style="width: 430px" name="SelectedJS">`+ `<option value="">----</option>`;
          for(var i=0; i< tableList.length; i++){
            var opt = tableList[i];
            string2 += `<option value="` + opt + `">` + opt + `</option>`;
      }
      $('#subattriJS').append(string2)
      $('#reftablename').select2()

      var string2 =`<br>` + `<label>Select parent column</label>` + `<select id='parentcolumn' class="select2 form-control" style="width: 430px" name="SelectedJS">`+ `<option value="">----</option>`
      $('#subattriJS').append(string2)
      $('#parentcolumn').select2()

      var string2 =`<br>` + `<label>Select child column</label>` + `<select id='childcolumn' class="select2 form-control" style="width: 430px" name="SelectedJS">`+ `<option value="">----</option>`
      $('#subattriJS').append(string2)
      $('#childcolumn').select2()

      $('#reftablename').on('select2:select', function(){

    var selectedTables=[$('#reftablename').val()]
    $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFields',
            'tablesForm':JSON.stringify(selectedTables),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            $('#parentcolumn').empty()
            $('#childcolumn').empty()

            for(j in data.finalFieldList){
              $('#parentcolumn').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['fieldName']}</option>`)
              $('#childcolumn').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['fieldName']}</option>`)
            }

            },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
  })
  })
    } else if (cur.find('.selectJSproperty').val() == 'Styling attribute') {
      cur.find('.linked-field').css('display','none');
      cur.find('.auto_populate_constant').css('display','none');
      cur.find('.boolean_field_sliders_stylling').css('display','none');
      cur.find('.val_based_msg').css('display','none');
      cur.find('.stylingJs').css('display','flex');
      cur.find('.masterTable').css('display','none');
      cur.find('#indFieldType').css('display','none');
      cur.find('#depFieldType').css('display','none');
      cur.find('.autopopulate').css('display','none');
      cur.find('#cascadingCard1').css('display','none');
      cur.find('#cascadingCard2').css('display','none');
      cur.find('.showfieldinfo').css('display','none');
      cur.find('.js_action_populate').css('display','none');
      cur.find('.formLevelJs').css('display','none');
      cur.find('.stylingJsNumericRangeSlider').css('display','none');
      cur.find('.stylingJs').find('.stylingJsValidationColorCol').empty()
      for(let i1 = 0; i1 < allFieldsColumns.length; i1++){
        cur.find('.stylingJs').find('.stylingJsValidationColorCol').append(`<option value="${allFieldsColumns[i1]}">${verboseName[i1]}</option>`);
      }
      appendButton(cur.find('.stylingJs').find('.stylingJsValidationColorCol'))
      eventTrigger();
    } else if (cur.find('.selectJSproperty').val() == 'Show-hide') {
      cur.find('.linked-field').css('display','none');
      cur.find('.auto_populate_constant').css('display','none');
      cur.find('.boolean_field_sliders_stylling').css('display','none');
      cur.find('.val_based_msg').css('display','none');
      cur.find('.stylingJs').css('display','none');
      cur.find('.masterTable').css('display','none');
      cur.find('#indFieldType').css('display','none');
      cur.find('#depFieldType').css('display','none');
      cur.find('.autopopulate').css('display','none');
      cur.find('#cascadingCard1').css('display','none');
      cur.find('#cascadingCard2').css('display','none');
      cur.find('.showfieldinfo').css('display','none');
      cur.find('.js_action_populate').css('display','none');
      cur.find('.stylingJsNumericRangeSlider').css('display','none');
      cur.find('.formLevelJs').css('display','block');
      cur.find('.formLevelJs').find('.formLevelFieldCol').parent().find('.select2-container').css('max-height','6rem')
      cur.find('.formLevelJs').find('.formLevelFieldCol').parent().find('.select2-container').css('overflow-y','scroll');
      cur.find('.formLevelJs').find('.formLevelFieldCol').empty();
      for(let i1 = 0; i1 < allFieldsColumns.length; i1++){
        cur.find('.formLevelJs').find('.formLevelFieldCol').append(`<option value="${allFieldsColumns[i1]}">${verboseName[i1]}</option>`);
      }
      appendButton(cur.find('.formLevelJs').find('.formLevelFieldCol'))
    } else if (cur.find('.selectJSproperty').val() == 'Cascading') {
      cur.find('.linked-field').css('display','none');
      cur.find('.auto_populate_constant').css('display','none');
      cur.find('.boolean_field_sliders_stylling').css('display','none');
      cur.find('.val_based_msg').css('display','none');
      cur.find('.stylingJs').css('display','none');
      cur.find('.masterTable').css('display','none');
      cur.find('#indFieldType').css('display','none');
      cur.find('#depFieldType').css('display','none');
      cur.find('.autopopulate').css('display','none');
      cur.find('#cascadingCard1').css('display','block');
      cur.find('#cascadingCard2').css('display','block');
      cur.find('.formLevelJs').css('display','none');
      cur.find('.showfieldinfo').css('display','none');
      cur.find('.js_action_populate').css('display','none');
      cur.find('.stylingJsNumericRangeSlider').css('display','none');
      cur.find('.depFieldTypeSelectCascading1').empty();
      cur.find('.indFieldTypeSelectCascading1').empty();
      for(j in allFieldsColumns){
          if($('#selectField').val() == allFieldsColumns[j]) {
            cur.find('.indFieldTypeSelectCascading1').append(`<option value="${$('#selectField').val()}">${verboseName[j]}</option>`);
            break;
          }
        }
      cur.find('.indFieldTypeSelectCascading1').val($('#selectField').val()).trigger('change');
      cur.find('.depFieldTypeSelectCascading1').append(`<option value="Select dependent field">Select dependent field</option>`);
      for(j in allFieldsColumns){
        if (allFieldsColumnsType[j] != "BooleanField") {
          cur.find('.depFieldTypeSelectCascading1').append(`<option value="${allFieldsColumns[j]}">${verboseName[j]}</option>`)
        }
      }
      cur.find('.depFieldTypeSelectCascading2').empty();
      cur.find('#indFieldTypeSelectCascading2').empty();
      for(j in allFieldsColumns){
          if($('#selectField').val() == allFieldsColumns[j]) {
            cur.find('#indFieldTypeSelectCascading2').append(`<option value="${$('#selectField').val()}">${verboseName[j]}</option>`);
            break;
          }
        }
      cur.find('#indFieldTypeSelectCascading2').val($('#selectField').val()).trigger('change');
      cur.find('.depFieldTypeSelectCascading2').append(`<option value="Select dependent field">Select dependent field</option>`);
      for(j in allFieldsColumns){
        cur.find('.depFieldTypeSelectCascading2').append(`<option value="${allFieldsColumns[j]}">${verboseName[j]}</option>`)
      }
    } else if ($('.selectJSproperty').val() == 'Linked-field-autopopulate') {
      cur.find('.boolean_field_sliders_stylling').css('display','none');
      cur.find('.linked-field').css('display','flex');
      cur.find('.masterTable').css('display','none');
      cur.find('.stylingJs').css('display','none');
      cur.find('#indFieldType').css('display','none');
      cur.find('#depFieldType').css('display','none');
      cur.find('.autopopulate').css('display','none');
      cur.find('#cascadingCard1').css('display','none');
      cur.find('#cascadingCard2').css('display','none');
      cur.find('.val_based_msg').css('display','none');
      cur.find('.formLevelJs').css('display','none');
      cur.find('.fordefvalue').css('display','none');
      cur.find('.showfieldinfo').css('display','none');
      cur.find('.js_action_populate').css('display','none');
      cur.find('.stylingJsNumericRangeSlider').css('display','none');
      cur.find('.selectpctype').empty();
      cur.find('.selectpctype').append(`<option value="" disabled="" selected="">Select Field property</option>`)
      cur.find('.selectpctype').append(`<option value='parent'>Parent</option>`);
      cur.find('.selectpctype').append(`<option value='child'>Child</option>`);
      cur.find('.selectparentcolumn').empty()
      cur.find('.selectdefcolumn').empty()
      cur.find('.selectparentcolumnCond').empty()
      cur.find('.selectparentcolumn').append('<option value="" disabled selected>Select Field</option>');
      cur.find('.selectparentcolumnCond').append('<option value="" disabled selected>Select Field</option>');
      var selections_parent = document.querySelector(".selectparentcolumn")
      for(key in fields){
        cur.find('.selectparentcolumn').append('<option value=' + fields[key].fieldname + '>' + fields[key].fieldname + '</option>')
      }
    }
      else if (cur.find('.selectJSproperty').val() == 'Foreign-key-relation') {
        cur.find('.boolean_field_sliders_stylling').css('display','none');
        cur.find('.linked-field').css('display','flex');
        cur.find('.fordefvalue').css('display','block');
        cur.find('.masterTable').css('display','none');
        cur.find('#indFieldType').css('display','none');
        cur.find('.val_based_msg').css('display','none');
        cur.find('.stylingJs').css('display','none');
        cur.find('#depFieldType').css('display','none');
        cur.find('.autopopulate').css('display','none');
        cur.find('#cascadingCard1').css('display','none');
        cur.find('#cascadingCard2').css('display','none');
        cur.find('.formLevelJs').css('display','none');
        cur.find('.showfieldinfo').css('display','none');
        cur.find('.js_action_populate').css('display','none');
        cur.find('.stylingJsNumericRangeSlider').css('display','none');
        cur.find('.foreignKeyCond').select2();
        cur.find('.foreignKeyAndOr').select2();
        cur.find('.foreignKeyDynamicVal').select2();
        cur.find('.foreignKeyCondVal').find('select').select2({'tags':true})
        cur.find('.foreignKeyCondValTag').find('select').select2({'tags':true})
        cur.find('.select_filter_type').select2();
      var tableList = {{tableList|safe}};
      string2 = ''
      for(var i=0; i< tableList.length; i++){
            var opt = tableList[i];
            string2 += `<option value="` + opt + `">` + opt + `</option>`;
      }
      cur.find('.selectpctype').empty();
      cur.find('.selectpctype').append(string2);

    } else if(cur.find('.selectJSproperty').val() == "Auto-populate") {
        cur.find('.linked-field').css('display','none');
        cur.find('.auto_populate_constant').css('display','none');
        cur.find('.boolean_field_sliders_stylling').css('display','none');
        cur.find('.val_based_msg').css('display','none');
        cur.find('.masterTable').css('display','block');
        cur.find('.stylingJs').css('display','none');
        cur.find('#indFieldType').css('display','flex');
        cur.find('#depFieldType').css('display','block');
        cur.find('.autopopulate').css('display','flex');
        cur.find('#cascadingCard1').css('display','none');
        cur.find('#cascadingCard2').css('display','none');
        cur.find('.showfieldinfo').css('display','none');
        cur.find('.js_action_populate').css('display','none');
        cur.find('.formLevelJs').css('display','none');
        cur.find('.stylingJsNumericRangeSlider').css('display','none');
        cur.find('.multipleJs')
        cur.find('.depFieldTypeSelect').empty();
        cur.find('.indFieldTypeSelect').empty();
        for(j in allFieldsColumns){
          if($('#selectField').val() == allFieldsColumns[j]) {
            cur.find('.indFieldTypeSelect').append(`<option value="${$('#selectField').val()}">${verboseName[j]}</option>`)
            break;
          }
        }
        cur.find('.indFieldTypeSelect').val($('#selectField').val()).trigger('change');
        cur.find('.depFieldTypeSelect').append(`<option value="Select dependent field">Select dependent field</option>`);
        for(j in allFieldsColumns){
            cur.find('.depFieldTypeSelect').append(`<option value="${allFieldsColumns[j]}">${verboseName[j]}</option>`)
        }

        if (mulSelectTable != "") {
            cur.find(".masterTableSelect").val(mulSelectTable).trigger('change');
        }else{
            cur.find(".masterTableSelect").val("").trigger('change');
        }

      }
      else if(cur.find('.selectJSproperty').val() == "Auto-populate Constant") {
        cur.find('.auto_populate_constant').css('display','block');
        cur.find('.boolean_field_sliders_stylling').css('display','none');
        cur.find('.linked-field').css('display','none');
        cur.find('.masterTable').css('display','none');
        cur.find('.val_based_msg').css('display','none');
        cur.find('.stylingJs').css('display','none');
        cur.find('#indFieldType').css('display','none');
        cur.find('#depFieldType').css('display','none');
        cur.find('.autopopulate').css('display','none');
        cur.find('#cascadingCard1').css('display','none');
        cur.find('#cascadingCard2').css('display','none');
        cur.find('.formLevelJs').css('display','none');
        cur.find('.showfieldinfo').css('display','none');
        cur.find('.js_action_populate').css('display','none');
        cur.find('.stylingJsNumericRangeSlider').css('display','none');
        $('.select_ap_constant').off('select2:select').on('select2:select', function(){
            if($(this).val() == "static_value"){
              $(this).parent().parent().find(".auto_static_div").css("display","block")
            }else{
              $(this).parent().parent().find(".auto_static_div").css("display","none")
            }
          })
      }else if (cur.find('.selectJSproperty').val() == "Show field info"){
        cur.find('.auto_populate_constant').css('display','none');
        cur.find('.boolean_field_sliders_stylling').css('display','none');
        cur.find('.linked-field').css('display','none');
        cur.find('.masterTable').css('display','none');
        cur.find('.stylingJs').css('display','none');
        cur.find('.val_based_msg').css('display','none');
        cur.find('#indFieldType').css('display','none');
        cur.find('#depFieldType').css('display','none');
        cur.find('.autopopulate').css('display','none');
        cur.find('#cascadingCard1').css('display','none');
        cur.find('#cascadingCard2').css('display','none');
        cur.find('.formLevelJs').css('display','none');
        cur.find('.stylingJsNumericRangeSlider').css('display','none');
        cur.find('.showfieldinfo').css('display','flex');
        cur.find('.js_action_populate').css('display','none');
      }else if (cur.find('.selectJSproperty').val() == "Field Type Settings"){
        if ($('#selectField').attr('selected-field-type') == 'BooleanField'){
          cur.find('.boolean_field_sliders_stylling').css('display','flex');
        }else if ($('#selectField').attr('selected-field-type') == 'CharField'){
          $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'CharField_field_type_settings',
              'tablesForm':JSON.stringify($('#selectFormTable').val()),
              'selected_field':`${$('#selectField').val()}`,
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              if (data['valid_field_flag'] == false){
                $('#selectField').attr('data-validated',false);
                Swal.fire({icon: 'error',text: 'This field is not valid for the Field type settings'});
              }else{
                $('#selectField').attr('data-validated',true);
                cur.find('.boolean_field_sliders_stylling').css('display','flex');
                cur.find('.boolean_field_sliders_stylling').find('.boolean_field_sliders_styles').css('display','none');
                cur.find('.boolean_field_sliders_stylling').find('.boolean-silder').css('display','none');
                cur.find('.boolean_field_sliders_stylling').find('.boolean-text-silder-text').css('display','none');
                cur.find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-selected').css('display','flex');
                cur.find('.boolean_field_sliders_stylling').find('.boolean-text-silder-formattings-not-selected').css('display','flex');
              }
              },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
          })
        }else if ($('#selectField').attr('selected-field-type') == 'IntegerField' || 'FloatField'){
          cur.find('.stylingJsNumericRangeSlider').css('display','flex');
        }else{
          cur.find('.boolean_field_sliders_stylling').css('display','none');
        }
        cur.find('.auto_populate_constant').css('display','none');
        cur.find('.linked-field').css('display','none');
        cur.find('.masterTable').css('display','none');
        cur.find('.stylingJs').css('display','none');
        cur.find('.val_based_msg').css('display','none');
        cur.find('#indFieldType').css('display','none');
        cur.find('#depFieldType').css('display','none');
        cur.find('.autopopulate').css('display','none');
        cur.find('#cascadingCard1').css('display','none');
        cur.find('#cascadingCard2').css('display','none');
        cur.find('.formLevelJs').css('display','none');
        cur.find('.showfieldinfo').css('display','none');
        cur.find('.js_action_populate').css('display','none');
      }else if (cur.find('.selectJSproperty').val() == "JS Action Populate"){
        cur.find('.auto_populate_constant').css('display','none');
        cur.find('.boolean_field_sliders_stylling').css('display','none');
        cur.find('.linked-field').css('display','none');
        cur.find('.masterTable').css('display','none');
        cur.find('.stylingJs').css('display','none');
        cur.find('.val_based_msg').css('display','none');
        cur.find('#indFieldType').css('display','none');
        cur.find('#depFieldType').css('display','none');
        cur.find('.autopopulate').css('display','none');
        cur.find('#cascadingCard1').css('display','none');
        cur.find('#cascadingCard2').css('display','none');
        cur.find('.formLevelJs').css('display','none');
        cur.find('.showfieldinfo').css('display','none');
        cur.find('.js_action_populate').css('display','block');

      }
      else if (cur.find('.selectJSproperty').val() == "Validation based message"){
        cur.find('.auto_populate_constant').css('display','none');
        cur.find('.boolean_field_sliders_stylling').css('display','none');
        cur.find('.linked-field').css('display','none');
        cur.find('.masterTable').css('display','none');
        cur.find('.stylingJs').css('display','none');
        cur.find('.val_based_msg').css('display','block');
        cur.find('#indFieldType').css('display','none');
        cur.find('#depFieldType').css('display','none');
        cur.find('.autopopulate').css('display','none');
        cur.find('#cascadingCard1').css('display','none');
        cur.find('#cascadingCard2').css('display','none');
        cur.find('.formLevelJs').css('display','none');
        cur.find('.showfieldinfo').css('display','none');
        cur.find('.js_action_populate').css('display','none');
        cur.find('.val_based_msg').find('.val_based_msg_global_var').empty()
        cur.find('.val_based_msg').find('.val_based_msg_global_var').append(`<option value="" disabled>Select fields</option>`);
        for(let i1 = 0; i1 < allFieldsColumns.length; i1++){
          cur.find('.val_based_msg').find('.val_based_msg_global_var').append(`<option value="${allFieldsColumns[i1]}">${verboseName[i1]}</option>`);
        }
        cur.find('.val_based_msg').find('.val_based_msg_global_var').select2()

        cur.find('.val_based_msg').find('.stylingJsValidationColorCol').select2({tags:true})
      }
    else{
      cur.find('.stylingJs').css('display','none');
      var tableList = {{tableList|safe}};
      var string2 =`<br>` + `<label>Select reference master table</label>` +  `<select id='reftablename1' class="select2 form-control" style="width: 430px" name="SelectedJS">`+ `<option value="">----</option>`;
          for(var i=0; i< tableList.length; i++){
            var opt = tableList[i];
            string2 += `<option value="` + opt + `">` + opt + `</option>`;
      }
      $('#subattriJS').append(string2)
      $('#reftablename1').select2()

      var string2 =`<br>` + `<label>Select master table-column</label>` +  `<select id='parentcolumn1' class="select2 form-control" style="width: 430px" name="SelectedJS">`+ `<option value="">----</option>`
      $('#subattriJS').append(string2)
      $('#parentcolumn1').select2()

      var string2 =`<br>` + `<label>Select child table</label>` +  `<select id='reftablename2' class="select2 form-control" style="width: 430px" name="SelectedJS">`+ `<option value="">----</option>`;
          for(var i=0; i< tableList.length; i++){
            var opt = tableList[i];
            string2 += `<option value="` + opt + `">` + opt + `</option>`;
      }
      $('#subattriJS').append(string2)
      $('#reftablename2').select2()

      var string2 =`<br>` + `<label>Select child table-column</label>` +  `<select id='parentcolumn2' class="select2 form-control" style="width: 430px" name="SelectedJS">`+ `<option value="">----</option>`
      $('#subattriJS').append(string2)
      $('#parentcolumn2').select2()

      var string2 =`<br>` + `<label>Select child field</label>` +  `<select id='parentcolumn3' class="select2 form-control" style="width: 430px" name="SelectedJS">`+ `<option value="">----</option>`
      $('#subattriJS').append(string2)
      $('#parentcolumn3').select2()

      $('#reftablename1').on('select2:select', function(){
    var selectedTables=[$('#reftablename1').val()]
    $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFields',
            'tablesForm':JSON.stringify(selectedTables),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            $('#parentcolumn1').empty()
            for(j in data.finalFieldList){
              $('#parentcolumn1').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['fieldName']}</option>`)
              }
              $('#parentcolumn3').empty()
            for(j in data.finalFieldList){
              $('#parentcolumn3').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['fieldName']}</option>`)
              }
            },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
  })
  })

  $('#reftablename2').on('select2:select', function(){
    var selectedTables=[$('#reftablename2').val()]
    $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFields',
            'tablesForm':JSON.stringify(selectedTables),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            $('#parentcolumn2').empty()
            for(j in data.finalFieldList){
              $('#parentcolumn2').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['fieldName']}</option>`)
              }

            },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
  })
  })
  cur.find('.showfieldinfo').css('display','none');
  cur.find('.js_action_populate').css('display','none');
  cur.find('.boolean_field_sliders_stylling').css('display','none');
    }

    }


</script>



<!-- List View -->

    <script>
      let initial = 0;
      function reportingDisp() {
        $('#selectTemplate').on('change', function() {
          $("#2selectblock").css('display', 'none');
          $("#create_view_display_selection_id").css('display', 'block');
          $('#configuration_val_row_dev').empty()
          $('.customValbtnDev').attr('data-data_config','{}')
          $('.carousel').carousel(0);
          $("#allow_listv_custV").prop("checked",false);
          $("#allow_listv_rtf").prop("checked",false);
          $("#toggleeditcolAlign").prop("checked", false).trigger('change')
          $("#labelSelectionColAli").css("display", "none")
			    $(".labelrowAlign").empty()
          $('#custom_validation_table_dev').empty()
          $('#custommValidationSelection_dev').val('').trigger('change')
          $('#custommValidationSelection_dev').empty()

          if ($(this).val() == 'List View With History') {
            $('#selectTablePC').select2('destroy');
            $('#selectTablePC').removeAttr('multiple');
            $('#selectTablePC').select2();
            $.ajax({
              url: window.location.pathname,

              data: {
                'operation': 'validationForHistoryView',
                'tablesForm':JSON.stringify([$('#selectTablePC').val()]),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                if (data['success'] != 'success') {
                  Swal.fire({icon: 'success',text: data['success']});
                  $('#selectTablePC').val('').trigger('change');
                }
                },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
            $("#dropFields").parent().css('display','block')
            $("#dropFieldsLV_upload").parent().css('display','block')
            $("#editFieldsNS").parent().css('display','block')
            $("#dropFields_add").parent().css('display','none')
            $("#dropFields_add_LV_upload").parent().css('display','none')
            $("#editFields_add").parent().css("display","none")
            $(".appFields_ref_def").css('display','none')
            $(".dropcolsJSON").css("display","none")
            $(".editcolsJSON").css("display","none")
            $(".reordercolsJSON").css("display","none")
            $("#mention_usergroups_def").css("display","none")
            $(".customListViewMessages").css("display","block")
            $(".editTableCardNames").css("display","none")
            $(".reorderTableCards").css("display","none")
            $(".reorderApprovalLevelConfig").css("display","none")
            $("#custom_alignment_transaction_data_div").css("display","none")
            $("#display_sections_approval_wall_div").css("display","none")
            $("#display_in_comments_div").css("display","none")
            $("#search_in_comments_div").css("display","none")

            $(".reorderApprovalAuditLog").css("display","none")
            $("#resolve_all_comments_div").css("display","none")
            $("#reopen_all_comments_div").css("display","none")
            $("#resolve_individual_comments_div").css("display","none")
            $("#reopen_individual_comments_div").css("display","none")
          }
          if ($(this).val() == 'Reporting View') {
            $('#selectTablePC').select2('destroy');
            $('#selectTablePC').removeAttr('multiple');;
            $('#selectTablePC').select2();
            $('#reportingViewDisp').css('display', 'block');
            $(".appFields_ref_def").css('display','none')
           ;
            if ($(this).val() == 'List View With History') {
              $('#uniqueColumnDisp').css('display', 'block');
              $('#trackingColumnDisp').css('display', 'block');
              $('#reportingViewShowLatest').css('display', 'none');

            } else {
              $('#uniqueColumnDisp').css('display', 'none');
              $('#trackingColumnDisp').css('display', 'none');
              $('#reportingViewShowLatest').css('display', 'none');
            }
            $('#selectMultiConfig').val('Default').trigger('change');
            if ($(this).val() == 'Reporting View') {
              $('#reportingViewShowLatest').css('display', 'block')
              $('#Datatable').find('#Multi_edit').prop('checked',false)
              $('#Datatable').find('#Multi_edit').attr('disabled',true);
            }

            $("#def_list_config_view").css("display","block")
            $("#basicfilter_add_def").css("display","block")
            $("#selectMultiConfig_def").css("display","block")
            $("#dropFields_def").css("display","block")
            $("#dropFields_LV_upload_div").css("display","block")
            $("#restrictFields_def").css("display","block")
            $("#groupFields_def").css("display","block")
            $("#editFields_def").css("display","block")
            $("#buttonStyling_def").css("display","block")
            $("#muldrop_list_config_view").css("display","none")
            $("#previewCard").css("display","block")
            $("#dropFields").parent().css('display','block')
            $("#dropFieldsLV_upload").parent().css('display','block')
            $("#editFieldsNS").parent().css('display','block')
            $("#dropFields_add").parent().css('display','none')
            $("#dropFields_add_LV_upload").parent().css('display','none')
            $("#editFields_add").parent().css("display","none")
            $(".dropcolsJSON").css("display","none")
            $(".editcolsJSON").css("display","none")
            $(".reordercolsJSON").css("display","none")
            $("#mention_usergroups_def").css("display","none")
            $(".customListViewMessages").css("display","block")
            $(".editTableCardNames").css("display","none")
            $(".reorderTableCards").css("display","none")
            $(".reorderApprovalLevelConfig").css("display","none")
            $("#custom_alignment_transaction_data_div").css("display","none")
            $("#display_sections_approval_wall_div").css("display","none")
            $("#display_in_comments_div").css("display","none")
            $("#search_in_comments_div").css("display","none")

            $(".reorderApprovalAuditLog").css("display","none")
            $("#resolve_all_comments_div").css("display","none")
            $("#reopen_all_comments_div").css("display","none")
            $("#resolve_individual_comments_div").css("display","none")
            $("#reopen_individual_comments_div").css("display","none")
          } else if ($(this).val() == 'Approval Template') {
            $('#selectTablePC').select2('destroy');
            $('#selectTablePC').removeAttr('multiple');;
            $('#selectTablePC').select2();
            $('#reportingViewDisp').css('display', 'block');
           ;
            if ($(this).val() == 'List View With History') {
              $('#uniqueColumnDisp').css('display', 'block');
              $('#trackingColumnDisp').css('display', 'block');
              $('#reportingViewShowLatest').css('display', 'none');

            } else {
              $('#uniqueColumnDisp').css('display', 'none');
              $('#trackingColumnDisp').css('display', 'none');
              $('#reportingViewShowLatest').css('display', 'none');
            }
            $('#selectMultiConfig').val('Default').trigger('change');
            if ($(this).val() == 'Approval Template') {
              $(".dropcolsJSON").css("display","block")
              $(".editcolsJSON").css("display","block")
              $(".reordercolsJSON").css("display","block")
              $("#mention_usergroups_def").css("display","block")
              $(".customListViewMessages").css("display","block")
              $(".editTableCardNames").css("display","none")
              $(".reorderTableCards").css("display","none")
              $(".reorderApprovalLevelConfig").css("display","block")
              $("#custom_alignment_transaction_data_div").css("display","block")
              $("#display_sections_approval_wall_div").css("display","block")
              $("#display_in_comments_div").css("display","block")
              $("#search_in_comments_div").css("display","block")
              $("#freeze_comments_div").css("display","block")
              $(".reorderApprovalAuditLog").css("display","block")
              $('#reportingViewShowLatest').css('display', 'block')
              $('#Datatable').find('#Multi_edit').prop('checked',false)
              $('#Datatable').find('#Multi_edit').attr('disabled',true);
              $(".appFields_ref_def").css('display','block')
              $("#resolve_all_comments_div").css("display","block")
              $("#reopen_all_comments_div").css("display","block")
              $("#resolve_individual_comments_div").css("display","block")
              $("#reopen_individual_comments_div").css("display","block")
            }

            $("#def_list_config_view").css("display","block")
            $("#basicfilter_add_def").css("display","block")
            $("#selectMultiConfig_def").css("display","block")
            $("#dropFields_def").css("display","block")
            $("#dropFields_LV_upload_div").css("display","block")
            $("#restrictFields_def").css("display","block")
            $("#groupFields_def").css("display","block")
            $("#editFields_def").css("display","block")
            $("#buttonStyling_def").css("display","block")
            $("#muldrop_list_config_view").css("display","none")
            $("#previewCard").css("display","block")
            $("#dropFields").parent().css('display','block')
            $("#dropFieldsLV_upload").parent().css('display','block')
            $("#editFieldsNS").parent().css('display','block')
            $("#dropFields_add").parent().css('display','none')
            $("#dropFields_add_LV_upload").parent().css('display','none')
            $("#editFields_add").parent().css("display","none")
          }
           else if ($(this).val() == 'List View With History') {
            $('#selectTablePC').select2('destroy');
            $('#selectTablePC').removeAttr('multiple');
            $('#selectTablePC').select2();
            $('#reportingViewDisp').css('display', 'block');
            $('#reportingViewShowLatest').css('display', 'none');
            $(".appFields_ref_def").css('display','none')
            if ($(this).val() == 'List View With History') {
              $('#uniqueColumnDisp').css('display', 'block');
              $('#trackingColumnDisp').css('display', 'block');
            } else {
              $('#uniqueColumnDisp').css('display', 'none');
              $('#trackingColumnDisp').css('display', 'none');

            }
            $('#selectMultiConfig').val('Default').trigger('change');
            if ($(this).val() == 'Reporting View') {
              $('#Datatable').find('#Multi_edit').prop('checked',false)
              $('#Datatable').find('#Multi_edit').attr('disabled',true);
            }
            $("#def_list_config_view").css("display","block")
            $("#basicfilter_add_def").css("display","block")
            $("#selectMultiConfig_def").css("display","block")
            $("#dropFields_def").css("display","block")
            $("#dropFields_LV_upload_div").css("display","block")
            $("#restrictFields_def").css("display","block")
            $("#groupFields_def").css("display","block")
            $("#editFields_def").css("display","block")
            $("#buttonStyling_def").css("display","block")
            $("#muldrop_list_config_view").css("display","none")
            $("#previewCard").css("display","block")
            $("#dropFields").parent().css('display','block')
            $("#dropFieldsLV_upload").parent().css('display','block')
            $("#editFieldsNS").parent().css('display','block')
            $("#dropFields_add").parent().css('display','none')
            $("#dropFields_add_LV_upload").parent().css('display','none')
            $("#editFields_add").parent().css("display","none")
            $(".dropcolsJSON").css("display","none")
            $(".editcolsJSON").css("display","none")
            $(".reordercolsJSON").css("display","none")
            $("#mention_usergroups_def").css("display","none")
            $(".customListViewMessages").css("display","block")
            $(".editTableCardNames").css("display","none")
            $(".reorderTableCards").css("display","none")
            $(".reorderApprovalLevelConfig").css("display","none")
            $("#custom_alignment_transaction_data_div").css("display","none")
            $("#display_sections_approval_wall_div").css("display","none")
            $("#display_in_comments_div").css("display","none")
            $("#search_in_comments_div").css("display","none")

            $(".reorderApprovalAuditLog").css("display","none")
            $("#resolve_all_comments_div").css("display","none")
            $("#reopen_all_comments_div").css("display","none")
            $("#resolve_individual_comments_div").css("display","none")
            $("#reopen_individual_comments_div").css("display","none")
          }
          else if($(this).val() == 'Multiple table') {
            $('#selectTablePC').select2('destroy');
            $('#selectTablePC').attr('multiple','multiple');
            $('#selectTablePC').select2();
            $(".appFields_ref_def").css('display','none')
            $('#reportingViewShowLatest').css('display', 'none');
            $("#show_report_latest_checker").prop('checked',false)
            $("#dont_show_detail_btn").prop('checked',false)
            $('#reportingViewDisp').css('display', 'none');
            $('#uniqueColumnDisp').css('display', 'none');
            $('#trackingColumnDisp').css('display', 'none');
            $("#showformatTable").css("display","block")
            $('#create_view_display_selection_id').css('display','none');
            $("#create_view_display_selection").prop('checked', false);
            $("#2selectblock").css('display', 'block');

            $("#def_list_config_view").css("display","block")
            $("#basicfilter_add_def").css("display","block")
            $("#selectMultiConfig_def").css("display","block")
            $("#dropFields_def").css("display","block")
            $("#dropFields_LV_upload_div").css("display","block")
            $("#restrictFields_def").css("display","block")
            $("#groupFields_def").css("display","block")
            $("#editFields_def").css("display","block")
            $("#buttonStyling_def").css("display","block")
            $("#muldrop_list_config_view").css("display","none")
            $("#previewCard").css("display","block")
            $("#dropFields").parent().css('display','none')
            $("#dropFieldsLV_upload").parent().css('display','none')
            $("#editFieldsNS").parent().css('display','none')
            $("#dropFields_add").parent().css('display','block')
            $("#dropFields_add_LV_upload").parent().css('display','block')
            $("#editFields_add").parent().css("display","block")
            $(".dropcolsJSON").css("display","none")
            $(".editcolsJSON").css("display","none")
            $(".reordercolsJSON").css("display","none")
            $("#mention_usergroups_def").css("display","none")
            $(".customListViewMessages").css("display","block")
            $(".editTableCardNames").css("display","block")
            $(".reorderTableCards").css("display","block")
            $(".reorderApprovalLevelConfig").css("display","none")
            $("#custom_alignment_transaction_data_div").css("display","none")
            $("#display_sections_approval_wall_div").css("display","none")
            $("#display_in_comments_div").css("display","none")
            $("#search_in_comments_div").css("display","none")

            $(".reorderApprovalAuditLog").css("display","none")
            $("#resolve_all_comments_div").css("display","none")
            $("#reopen_all_comments_div").css("display","none")
            $("#resolve_individual_comments_div").css("display","none")
            $("#reopen_individual_comments_div").css("display","none")
          } else if($(this).val() == 'Multi Dropdown View') {
            $('#selectTablePC').select2('destroy');
            $('#selectTablePC').removeAttr('multiple');
            $('#selectTablePC').select2();
            $('#uniqueColumnDisp').css('display', 'none');
            $('#trackingColumnDisp').css('display', 'none');
            $('#reportingViewDisp').css('display', 'none');
            $('#reportingViewShowLatest').css('display', 'none');
            $("#show_report_latest_checker").prop('checked',false)
            $("#dont_show_detail_btn").prop('checked',false)
            $("#2selectblock").css('display', 'none');
            $('#create_view_display_selection_id').css('display','none');
            $("#showformatTable").css("display","none")

            $("#def_list_config_view").css("display","none")
            $("#basicfilter_add_def").css("display","none")
            $("#selectMultiConfig_def").css("display","none")
            $("#dropFields_def").css("display","none")
            $("#dropFields_LV_upload_div").css("display","none")
            $("#restrictFields_def").css("display","none")
            $("#groupFields_def").css("display","none")
            $("#editFields_def").css("display","none")
            $("#buttonStyling_def").css("display","none")
            $("#muldrop_list_config_view").css("display","block")
            $("#previewCard").css("display","none")
            $("#dropFields").parent().css('display','none')
            $("#dropFieldsLV_upload").parent().css('display','none')
            $("#editFieldsNS").parent().css('display','none')
            $("#dropFields_add").parent().css('display','none')
            $("#dropFields_add_LV_upload").parent().css('display','none')
            $("#editFields_add").parent().css("display","none")
            $(".appFields_ref_def").css('display','none')
            $(".dropcolsJSON").css("display","none")
            $(".editcolsJSON").css("display","none")
            $(".reordercolsJSON").css("display","none")
            $("#mention_usergroups_def").css("display","none")
            $(".customListViewMessages").css("display","none")
            $(".editTableCardNames").css("display","none")
            $(".reorderTableCards").css("display","none")
            $(".reorderApprovalLevelConfig").css("display","none")
            $("#custom_alignment_transaction_data_div").css("display","none")
            $("#display_sections_approval_wall_div").css("display","none")
            $("#display_in_comments_div").css("display","none")
            $("#search_in_comments_div").css("display","none")

            $(".reorderApprovalAuditLog").css("display","none")
            $("#resolve_all_comments_div").css("display","none")
            $("#reopen_all_comments_div").css("display","none")
            $("#resolve_individual_comments_div").css("display","none")
            $("#reopen_individual_comments_div").css("display","none")
            basicfilter_conditional_table_mul()

          } else {
            $("#2selectblock").css('display', 'none');
            $('#create_view_display_selection_id').css('display','block');
            $('#selectTablePC').select2('destroy');
            $('#selectTablePC').removeAttr('multiple');
            $('#selectTablePC').select2();
            $('#reportingViewShowLatest').css('display', 'none');
            $("#show_report_latest_checker").prop('checked',false)
            $("#dont_show_detail_btn").prop('checked',false)
            $('#reportingViewDisp').css('display', 'none');
            $('#uniqueColumnDisp').css('display', 'none');
            $('#trackingColumnDisp').css('display', 'none');
            $("#showformatTable").css("display","none")

            $("#def_list_config_view").css("display","block")
            $("#basicfilter_add_def").css("display","block")
            $("#selectMultiConfig_def").css("display","block")
            $("#dropFields_def").css("display","block")
            $("#dropFields_LV_upload_div").css("display","block")
            $("#restrictFields_def").css("display","block")
            $("#groupFields_def").css("display","block")
            $("#editFields_def").css("display","block")
            $("#buttonStyling_def").css("display","block")
            $("#muldrop_list_config_view").css("display","none")
            $("#previewCard").css("display","block")
            $("#dropFields").parent().css('display','block')
            $("#dropFieldsLV_upload").parent().css('display','block')
            $("#editFieldsNS").parent().css('display','block')
            $("#dropFields_add").parent().css('display','none')
            $("#dropFields_add_LV_upload").parent().css('display','none')
            $("#editFields_add").parent().css('display','none')
            $(".appFields_ref_def").css('display','none')
            $(".dropcolsJSON").css("display","none")
            $(".editcolsJSON").css("display","none")
            $(".reordercolsJSON").css("display","none")
            $("#mention_usergroups_def").css("display","none")
            $(".customListViewMessages").css("display","block")
            $(".editTableCardNames").css("display","none")
            $(".reorderTableCards").css("display","none")
            $(".reorderApprovalLevelConfig").css("display","none")
            $("#custom_alignment_transaction_data_div").css("display","none")
            $("#display_sections_approval_wall_div").css("display","none")
            $("#display_in_comments_div").css("display","none")
            $("#search_in_comments_div").css("display","none")

            $(".reorderApprovalAuditLog").css("display","none")
            $("#resolve_all_comments_div").css("display","none")
            $("#reopen_all_comments_div").css("display","none")
            $("#resolve_individual_comments_div").css("display","none")
            $("#reopen_individual_comments_div").css("display","none")
          }
        })
      }
      reportingDisp();

      function alertDisp() {
        if($('#selectTemplate').val() == "Reporting View" || $('#selectTemplate').val() == 'List View With History' ||$('#selectTemplate').val() == 'Approval Template') {
          previewFunction();
          initial = 1;

        } else if($('#selectTemplate').val() == "Default") {
          previewFunction();

          if (initial == 1) {
            initial = 0;
          }
        }
      }


      
      $('#Datatable').find('#selectAll').on('click', function() {
        if ($('#selectTemplate').val() == "Reporting View") {
          $('#Datatable').find('#Multi_edit').prop('checked',false)
        }
      })
      $('#selectTemplate').on('select2:select',function(){
        $('#selectTablePC').val($('#selectTablePC').val()).trigger("select2:select")
      })
      function show_report_latest_checker_change(obj){
        if ($(obj).prop('checked')){
          $(obj).closest('#reportingViewShowLatest').find('.custom_datefield_selector').css('display','');
          $(obj).closest('#reportingViewShowLatest').find('.unique_indentfier_selector').css('display','');
        }else{
          $(obj).closest('#reportingViewShowLatest').find('.custom_datefield_selector').css('display','none');
          $(obj).closest('#reportingViewShowLatest').find('.unique_indentfier_selector').css('display','none');
        }
      }
      function removingLatestDateUniqueId(obj){
        $('#reportingViewColumns_unique_indentfier_selector').select2('destroy');
        $('#reportingViewColumns_unique_indentfier_selector').find('option').each(function(){
          if ($(obj).val() == $(this).attr('value')){
            $(this).prop('disabled',true)
          }else{
            $(this).prop('disabled',false)
          }
        })
        $('#reportingViewColumns_unique_indentfier_selector').select2();
      }
      $('#selectTemplate').on('change', function() {
        alertDisp();



        if ($(this).val() == "Multiple table"){
          $('#listViewButtonId').attr('onclick',"listViewButtonStyling_multiple(this)");
          $('#listViewEditButtonModal').find('.modal-body').empty()
          $('#listViewEditButtonModal').find('.modal-body').append(`
          <div class="card-header">
            <div class="float-right" style="margin-right: 6px;">
              <button onclick="listViewPopulateEditButtonContent_multiple(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
            </div>
          </div>
          `)
          $('#listViewEditButtonModal').find('.modal-footer').find('.saveCustomButton').attr('onclick',"listViewsaveEditButton_multiple(this)");
          $('#formattingColumnBtn').attr('onclick',"formattingColumnMultiple(this)");
          $('#formattingColumns').empty()
          $('#formattingColumns').append(`
          <div class="row">
            <div class="col-12">
              <div class="float-right" style="margin-right: 6px;">
                <button onclick="populateFrmattingColumnsMultiple()" class="btn btn-primary" type="button"><i class="fas fa-plus" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add Column Formatting</button>
              </div>
            </div>
          </div>
          <div class="formatting-body">

          </div>
          <button type="button" onclick="saveFormattingColumnsMultiple(this)" id="save_buttonid_formatting" class="btn btn-primary saveElementsButton" data-subCategory="formatting column" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" >Save</button>
          <hr style="height:2px;border-width:0;color:gray;background-color:gray">
          <div class="row">
            <div class="col-12">
              <div class="float-right" style="margin-right: 6px;">
                <button onclick="populateTitleRowMultiple(this)" class="btn btn-primary" type="button"><i class="fas fa-plus" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add Title Row Formatting</button>
              </div>
            </div>
          </div>
        <div class="formatting-body-title-row">

        </div>
        <button type="button" onclick="saveFormattingColumnsMultipleTitleRow(this)" id="save_buttonid_formatting_title_row_multiple" class="btn btn-primary saveElementsButton" data-subCategory="formatting column" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" >Save</button>
        <hr style="height:2px;border-width:0;color:gray;background-color:gray">
        <div class="row">
          <div class="col-12">
            <div class="float-right" style="margin-right: 6px;">
              <button onclick="columnsHideMultipleTable(this)" class="btn btn-primary" type="button"><i class="fas fa-plus" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add column headers to hide</button>
            </div>
          </div>
        </div>
        <div class="columns-headers-hide-multiple-table">
        </div>
        <button type="button" onclick="saveColumnsHideMultipleTable(this)" class="btn btn-primary saveElementsButton" data-subCategory="formatting column" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" >Save</button>
          `)
          $('#listViewButtonEmbededComputationId').attr('onclick',"listViewEmbededComputationMultiple(this)")
          $('#listViewEmbededComputationModal').find('.modal-body').empty()
          $('#listViewEmbededComputationModal').find('.modal-footer').find('.saveCustomButton').attr('onclick',"listViewsaveEmbededComputationMultiple(this)")
          $('#listViewEmbededComputationModal').find('.modal-body').append(`
            <div class="card-header">
              <div class="float-right" style="margin-right: 6px;">
                <button onclick="listViewPopulateEmbededComputationContentMultiple(this)" class="btn btn-primary" type="button">Add Computation Models <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
              </div>
            </div>
          `)
          $('#titleNameBtn').attr('onClick','titleNameMultiple(this)')
          $('#table_order_btn_listview_div').css('display','block');
          $('#add_table_btn_listview_div').css('display','block');
          $('#configure_actionbuttonid').attr('id','configure_actionbuttonid_multiple');
          $('#configure_actionbuttonid_multiple').attr('onClick','configureActionBtnMultiple(this)')
          $('#configure_action_column_id').attr('onClick','configureActionColumnMultiple(this)');
          $('#action_column_modal_id').find('.modal-body').empty()
          $('#action_column_modal_id').find('.modal-body').append(`
          <div class="card-header">
            <div class="float-right" style="margin-right: 6px;">
              <button onclick="contentActionColumnMultiple(this)" class="btn btn-primary" type="button"><i class="fas fa-plus populateoption" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i> Add configuration</button>
            </div>
          </div>
          `)
          $('#action_column_modal_id').find('.modal-footer').find('.resetCustomButton').attr('onclick','action_column_modal_id_reset_multiple(this)');
          $('#action_column_modal_id').find('.modal-footer').find('.saveCustomButton').attr('onclick','action_column_modal_id_save_multiple(this)');
          $('#buttonsGroupedTogether').attr('onClick','buttonsGroupedTogetherClickMultiple(this)')
          $('#buttonsGroupedTogetherDiv').empty()
          $('#buttonsGroupedTogetherDiv').append(`
          <div class="row">
            <div class="col-12">
              <div class="float-right" style="margin-right: 6px;">
                <button onclick="populateButtonDropdownMultiple(this)" class="btn btn-primary" type="button"><i class="fas fa-plus" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add Buttons for dropdown</button>
              </div>
            </div>
          </div>
          <div class="buttons-dropdown-body">

          </div>
          <button type="button" class="btn btn-primary" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="saveButtonsGroupedTogetherMultiple(this)">Save</button>
          `)
          $('#quickFiltersBtn').attr('onclick',"quickFilters_multiple(this)");
          $('#quick_filters_modal_id').find('.modal-body').empty()
          $('#quick_filters_modal_id').find('.modal-body').append(`
            <div class="row">
              <div class="col-12">
                <div class="float-right" style="margin-right: 6px;">
                  <button onclick="quickFiltersContent_multiple()" class="btn btn-primary" type="button"><i class="fas fa-plus" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i> Add columns for filters</button>
                </div>
              </div>
            </div>
            <div class="quickFilters">
            </div>
          `)
          $('#quick_filters_modal_id').find('.modal-footer').find('.saveCustomButton').attr('onclick',"quick_filters_modal_id_save_multiple(this)");
          $('#group_by_action_btn_sub').attr('onclick','group_by_action_btn_multiple(this)');
          $('#group_by_action').empty()
          $('#group_by_action').append(`
          <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Group By</p>
          <p style="margin-left: 24%;font-size:small;">If configured this will disable the action buttons</p>
          <div style="margin-left: 24%;" id="div_id_active" class="custom-control custom-checkbox">
            <input type="checkbox" name="group_by_action_checkbox" class="checkboxinput custom-control-input" id="group_by_action_checkbox" onchange="group_by_action_checkbox_onchange(this)" >
            <label for="group_by_action_checkbox" class="custom-control-label">
              Not Required
            </label>
          </div>
          <div class="row">
            <div class="col-12">
              <div class="float-right" style="margin-right: 6px;">
                <button onclick="group_by_action_add_table_multiple()" class="btn btn-primary add_level" type="button"><i class="fas fa-plus" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add Tables</button>
                <button onclick="group_by_action_reset_multiple(this)" class="btn btn-primary" type="button">Reset</button>
              </div>
            </div>
          </div>

          <div class="group_by_action_tables" style="margin-left: 1rem">
            <hr style="height:2px;border-width:0;color:gray;background-color:gray">
          </div>
          <div style="margin-top:1rem;">
            <button type="button" class="btn btn-primary saveElementsButton" data-subcategory="Group by" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="group_by_action_save_multiple(this)">Save</button>
          </div>
          `)
          $('#columnNamesRenamesModal').find('.card-header').find('.add_button').attr('onclick','columnNamesRenamesModalContent_multiple()');
          $('#columnNamesRenamesModal').find('.modal-footer').find('.saveCustomButton').attr('onclick','columnNamesRenamesModalsaveEditButton_multiple(this)');
          $('#allow_checkbox_column_rename').parent().css('display','none');
          $('#edit_list_view_modal_configuration_modal').find('.modal-body').empty();
          $('#edit_list_view_modal_configuration_modal').find('.modal-body').append(`
          <div class="card-header">
            <div class="float-right" style="margin-right: 6px;">
              <button onclick="addListviewModalConfigsMultiple()" class="btn btn-primary" type="button"><i class="fas fa-plus"style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i> Customise edit list view modal</button>
            </div>
          </div>
          <div class="card-repos">
          </div>
          `)
        }else{
          $('#listViewButtonId').attr('onclick',"listViewButtonStyling(this)");
          $('#listViewEditButtonModal').find('.modal-body').empty()
          $('#listViewEditButtonModal').find('.modal-body').append(`
          <div class="card-header">
            <div class="float-right" style="margin-right: 6px;">
              <button onclick="listViewPopulateEditButtonContent(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
            </div>
          </div>
          `)
          $('#listViewEditButtonModal').find('.modal-footer').find('.saveCustomButton').attr('onclick',"listViewsaveEditButton(this)");
          $('#formattingColumnBtn').attr('onclick',"formattingColumn(this)");
          $('#formattingColumns').empty()
          $('#formattingColumns').append(`
          <div class="row">
            <div class="col-12">
              <div class="float-right" style="margin-right: 6px;">
                <button onclick="populateFrmattingColumns(this)" class="btn btn-primary" type="button"><i class="fas fa-plus" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add Column Formatting</button>
              </div>
            </div>
          </div>
          <div class="formatting-body">

          </div>
          <button type="button" onclick="saveFormattingColumns(this)" id="save_buttonid_formatting" class="btn btn-primary saveElementsButton" data-subCategory="formatting column" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;margin-top:1rem;" >Save</button>
          <hr style="height:2px;border-width:0;color:gray;background-color:gray">

          <div class="titleRow">
            <h6 style="font-weight: bold;">Select stylling of title row</h6>
          <div class="row">
            <div class="col-6">
              <p style="font-weight: bold;">Select text color:</p>
              <input type="color" value="#ffffff" class="form-control" data-textmain="color">
            </div>
            <div class="col-6">
              <p style="font-weight: bold;">Select BG color:</p>
              <input type="color" value="#ffffff" class="form-control" data-bgmain="color">
            </div>
          </div>
          <div class="row" style="padding-top:10px;padding-bottom:10px;">
            <div class="col-6">
              <p style="font-weight: bold;">Select font style:</p>
              <select class="select2 form-control" data-fontmain="text">
                <option value="" disabled="" selected="">Select font</option>
                <option value="Arial_sans-serif">Arial (sans-serif)</option>
                <option value="Verdana_sans-serif">Verdana (sans-serif)</option>
                <option value="Helvetica_sans-serif">Helvetica (sans-serif)</option>
                <option value="Tahoma_sans-serif">Tahoma (sans-serif)</option>
                <option value="Trebuchet MS_sans-serif">Trebuchet MS (sans-serif)</option>
                <option value="Times New Roman_serif">Times New Roman (serif)</option>
                <option value="Georgia_serif">Georgia (serif)</option>
                <option value="Garamond_serif">Garamond (serif)</option>
                <option value="Courier New_monospace">Courier New (monospace)</option>
                <option value="Brush Script MT_cursive">Brush Script MT (cursive)</option>
              </select>
            </div>
            <div class="col-6">
              <p style="font-weight: bold;">Select font size:</p>
              <select class="select2 form-control" data-sizemain="size">
                <option value="0.8rem" selected>Normal</option>
                <option value="0.7rem">Xtra small</option>
                <option value="0.9rem">Medium</option>
                <option value="1rem">Large</option>
                <option value="1.1rem">Xtra large</option>
              </select>
            </div>
          </div>
            <div class="row">
              <div class="col-12">
                <div class="float-right" style="margin-right: 6px;">
                  <button onclick="titleRowPopulateContent(this)" class="btn btn-primary" type="button"><i class="fas fa-plus" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Exception</button>
                </div>
              </div>
            </div>
            <div class="title-row-body">

            </div>
          </div>
          <div>
            <button type="button" onclick="savetitlerow(this)" id="save_buttonid_titlerow" class="btn btn-primary saveElementsButton" data-subCategory="formatting column" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" >Save</button>
            <button class="more_colors" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="resetButtonTitleRow(this)">Reset</button>
          </div>
          <hr style="height:2px;border-width:0;color:gray;background-color:gray">
          <div class="columnHeaders">
            <p style="font-weight: bold;">Select column headers to hide:</p>
            <select class="columnHeadersSelect" multiple>
            </select>
            <div style="margin-top:1rem;">
              <button type="button" class="btn btn-primary" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="saveColumnHeadersHide(this)">Save</button>
              <button class="more_colors" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="resetColumnHeadersHide(this)">Reset</button>
            </div>
          </div>
          `)
          $('#listViewButtonEmbededComputationId').attr('onclick',"listViewEmbededComputation(this)")
          $('#listViewEmbededComputationModal').find('.modal-body').empty()
          $('#listViewEmbededComputationModal').find('.modal-footer').find('.saveCustomButton').attr('onclick',"listViewsaveEmbededComputation(this)")
          $('#listViewEmbededComputationModal').find('.modal-body').append(`
            <div class="card-header">
              <div class="float-right" style="margin-right: 6px;">
                <button onclick="listViewPopulateEmbededComputationContent(this)" class="btn btn-primary" type="button">Add Computation Models <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
              </div>
            </div>
          `)
          $('#titleNameBtn').attr('onClick','titleName(this)')
          $('#table_order_btn_listview_div').css('display','none');
          $('#add_table_btn_listview_div').css('display','none');
          $('#configure_actionbuttonid_multiple').attr('id','configure_actionbuttonid');
          $('#configure_actionbuttonid').css('display','block');
          $('#action_btn_config_group_together').parent().css('display','block');
          $('#configure_actionbuttonid').attr('onClick','configureActionBtn(this)')
          $('#configure_action_column_id').attr('onClick','configureActionColumn(this)');
          $('#action_column_modal_id').find('.modal-body').empty()
          $('#action_column_modal_id').find('.modal-body').append(`
          <div class="row">
            <div class="col-6">
                <p style="font-weight: bold;">Header of column:</p>
                <input type="text" data-css="text" class="textinput textInput form-control "></div>
                <div class="form-group col-6">
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" id="elipses_trigger" class="checkboxinput custom-control-input">
                    <label for="elipses_trigger" class="custom-control-label">
                      Elipses Trigger
                    </label>
                  </div>
              </div>
              </div>
          `);
          $('#action_column_modal_id').find('.modal-footer').find('.resetCustomButton').attr('onclick','action_column_modal_id_reset(this)');
          $('#action_column_modal_id').find('.modal-footer').find('.saveCustomButton').attr('onclick','action_column_modal_id_save(this)');
          $('#buttonsGroupedTogether').attr('onClick','buttonsGroupedTogetherClick(this)')
          $('#buttonsGroupedTogetherDiv').empty()
          $('#buttonsGroupedTogetherDiv').append(`
          <div class="columnHeaders">
            <p style="font-weight: bold;">Select buttons to add in drop down :</p>
            <select multiple>
              <option value="uploadButton">Upload</option>
              <option value="saveTemplateButton">Save Template</option>
              <option value="example1_expand">Expand</option>
              <option value="plotCharts">Plot Chart</option>
              <option value="setAlertBtn">Set alert</option>
              <option value="filter_button_list_view">Filter</option>
              <option value="saveEditListView">Save Edited Data</option>
              <option value="editListView">Edit Mode</option>
              <option value="tablegenerator_">Paste tabular data</option>
              <option value="listview_clearall_">Delete all data</option>
              <option value="find_replace_">Find and replace</option>
              <option value="freeze_pane_">Freeze Panes</option>
              <option value="extract_data_">Extract Data</option>
              <option value="formatter_">Formatters</option>
              <option value="showTransactions">View Transaction Status</option>
              <option value="addComp_field_">Add Computed Fields</option>
              <option value="bulk_update">Bulk Update</option>
              <option value="conditional_delete">Conditional Delete</option>
              <option value="multiple_delete_perm">Delete Multiple(Permanent)</option>
              <option value="multiple_delete_temp">Delete Multiple(Temporary)</option>
              <option value="approve_all_ApprovalTemplate">Approve all</option>
              <option value="reject_all_ApprovalTemplate">Reject all</option>
              <option value="multiple_approve">Approve Multiple</option>
              <option value="multiple_reject">Reject Multiple</option>
            </select>
            <p style="font-weight: bold;">Text for dropdown button:</p>
            <input type="text" class="textinput textInput form-control  ">
            <div style="margin-top:1rem;">
              <button type="button" class="btn btn-primary" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="saveButtonsGroupedTogether(this)">Save</button>
              <button class="more_colors" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="resetButtonsGroupedTogether(this)">Reset</button>
            </div>
          </div>
          `)
          $('#quickFiltersBtn').attr('onclick',"quickFilters(this)");
          $('#quick_filters_modal_id').find('.modal-body').empty()
          $('#quick_filters_modal_id').find('.modal-body').append(`
            <div class="row">
              <div class="col-12">
                <div class="float-right" style="margin-right: 6px;">
                  <button onclick="quickFiltersContent()" class="btn btn-primary" type="button"><i class="fas fa-plus" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Exception</button>
                </div>
              </div>
            </div>
            <div class="quickFilters">
            </div>
          `)
          $('#quick_filters_modal_id').find('.modal-footer').find('.saveCustomButton').attr('onclick',"quick_filters_modal_id_save(this)");
          $('#group_by_action_btn_sub').attr('onclick','group_by_action_btn(this)');
          $('#group_by_action').empty()
          $('#group_by_action').append(`
          <p style="margin-left: 24%;font-size:larger"><strong>Sub element attribute:</strong>&nbsp;Group By</p>
          <p style="margin-left: 24%;font-size:small;">If configured this will disable the action buttons</p>
          <div class="row">
            <div class="col-6">
              <div style="margin-left: 50%;" id="div_id_active" class="custom-control custom-checkbox">
                <input type="checkbox" name="group_by_action_checkbox" class="checkboxinput custom-control-input" id="group_by_action_checkbox" onchange="group_by_action_checkbox_onchange(this)">
                <label for="group_by_action_checkbox" class="custom-control-label">
                  Not Required
                </label>
              </div>
            </div>
            <div class="col-6">
              <div style="margin-left: 24%;" id="div_id_active" class="custom-control custom-checkbox">
                <input type="checkbox" name="group_by_action_checkbox_user_configuration" class="checkboxinput custom-control-input" id="group_by_action_checkbox_user_configuration">
                <label for="group_by_action_checkbox_user_configuration" class="custom-control-label">
                  Allow users to configure group-by views?
                </label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <div class="float-right" style="margin-right: 6px;">
                <button onclick="group_by_action_add_levels(this)" class="btn btn-primary add_level" type="button"><i class="fas fa-plus" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i>  Add Levels</button>
                <button onclick="group_by_action_reset(this)" class="btn btn-primary" type="button">Reset</button>
              </div>
            </div>
          </div>

          <div class="group_by_action_levels" style="margin-left: 1rem">
            <hr style="height:2px;border-width:0;color:gray;background-color:gray">
          </div>

          <div class="group_by_action_columns" style="margin-left: 1rem;margin-top:1rem;">
            <p style="font-weight: bold;">Select columns:</p>
            <select class="select2 form-control" multiple onchange="group_by_action_columns_operation(this)"></select>
            <div class="operation_div">
            </div>
          </div>
          <div style="margin-top:1rem;">
            <button type="button" class="btn btn-primary saveElementsButton" data-subcategory="Group by" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="group_by_action_save(this)">Save</button>
          </div>
          `)
          $('#columnNamesRenamesButton').prop('disabled',false);
          $('#columnNamesRenamesModal').find('.card-header').find('.add_button').attr('onclick','columnNamesRenamesModalContent(this)');
          $('#columnNamesRenamesModal').find('.modal-footer').find('.saveCustomButton').attr('onclick','columnNamesRenamesModalsaveEditButton(this)')
          $('#allow_checkbox_column_rename').parent().css('display','');
          $('#edit_list_view_modal_configuration_modal').find('.modal-body').empty();
          $('#edit_list_view_modal_configuration_modal').find('.modal-body').append(`
            <div class="row text-headers">
              <div class="col-12">
                <p style="font-weight: bold;">Configure edit list view modal header:</p>
                <input type="text" class="textInput form-control " id="list_view_modal_header">
              </div>
            </div>
          `)
        }
        if ($(this).val() =='Multi Dropdown View'){
          $('#columnNamesRenamesButton').css('display','none');
        }else{
          $('#columnNamesRenamesButton').css('display','');
        }
        if ($(this).val() == "Reporting View" || $(this).val() == "Approval Template"){
          $('#formattingColumns').append(`
          <div class="card_header_config">
            <hr style="height:2px;border-width:0;color:gray;background-color:gray">
            <div class="row">
              <div class="col-6">
                <p style="font-weight: bold;">Card header font size (rem):</p>
                <input type="number" class="form-control numberinput">
              </div><div class="col-6"><div class="custom-control custom-checkbox">
                <input type="checkbox" name="card_header_config_switch" class="checkboxinput custom-control-input" id="card_header_config_switch" onchange="onchange_card_header_config_switch(this)">
                <label for="card_header_config_switch" class="custom-control-label"> Remove card header</label>
              </div></div>
              <div style="margin-top:1rem;">
                <button type="button" class="btn btn-primary" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="save_card_header_configs(this)">Save</button>
                <button class="more_colors" style="margin-left: 1rem;height:1.5rem;padding-top: 0.1rem;" onclick="reset_card_header_configs(this)">Reset</button>
              </div>
              </div>
          </div>`)
          $(`<div class="group_by_approval_temp_div" style="margin:1rem;">
              <label for="group_by_approval_temp_json_table" class="acies_label">Select json data table</label>
              <select id="group_by_approval_temp_json_table" class="select2 form-control" name="group_by_approval_temp_json_table" onchange="group_by_approval_temp_json_table_onchange(this)">
                <option value="" selected>No Table</option>
                {% for i in tableList%}
                  <option value="{{i}}">{{i}}</option>
                {%endfor%}
              </select>
            </div>
          `).insertAfter($('#group_by_action').find('.row').eq(1))
        }else{
          $('#formattingColumns').find('.card_header_config').remove();
        }
        if ($(this).val() == "Card View"){
          $('#formattingColumns').find('.titleRow').find('input, select, button').prop('disabled', true);
          $('#save_buttonid_titlerow').prop('disabled', true);
          $('#save_buttonid_titlerow').next().prop('disabled', true);
          $('#formattingColumns').find('.columnHeaders').find('select, button').prop('disabled', true);
          $('#listViewButtonEmbededComputationId').prop('disabled', true);
          $('#card_view_sub_category').prop('disabled', false);
          $('#group_by_action_btn_sub').prop('disabled', true);
        }else{
          $('#formattingColumns').find('.titleRow').find('input, select, button').prop('disabled', false);
          $('#save_buttonid_titlerow').prop('disabled', false);
          $('#save_buttonid_titlerow').next().prop('disabled', false);
          $('#formattingColumns').find('.columnHeaders').find('select, button').prop('disabled', false);
          $('#listViewButtonEmbededComputationId').prop('disabled', false);
          $('#card_view_sub_category').prop('disabled', true);
          $('#group_by_action_btn_sub').prop('disabled', false);
        }
        if ($(this).val() == "Approval Template"){
          $('#selectTablePC').val('ApprovalTable').trigger('change')
          $('#selectTablePC').prop('disabled',true)
        }else{
          $('#selectTablePC').prop('disabled',false)
        }
        $('#example1').remove()
      })

      $('#dataTableModal').find('.close').on('click', function() {
        $('#reportingViewColumns').empty();
        $('#reportingViewColumns_datefield_latest_entries').empty();
        $('#reportingViewColumns_unique_indentfier_selector').empty();
        $("#addrowm").empty()
        $("#show_report_latest_checker").prop('checked',false)
        $("#dont_show_detail_btn").prop('checked',false)
        $('#uniqueColumn').empty();
        $('#customColumn').empty();
        $('#trackingColumn').empty();
        $('#formatColumn').empty();
        $('#formatTab').empty();
      })


      $('.subCategory').click(function () {
        if(($('#selectTablePC').val()==null || $('#selectTablePC').val().length == 0) || $('#selectTemplate').val()==null){
          Swal.fire({icon: 'warning',text: 'Please select the Table name and the Template.'});
        }
        else{
        $('.subCategory').each(function () {
          $(this).css({ backgroundColor: '#565a5e' });
          $(this).css({ borderColor: '#565a5e' });
        })
        $(this).css({ backgroundColor: 'var(--primary-color)' });
        $(this).css({ borderColor: 'var(--primary-color)' });
        $('.subCategories').each(function(){
          $(this).css('display','none');
        })
        if ($(this).val()=='Data table'){
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#Datatable').css('display','block')
            $('#Datatable_mul').css('display','none')
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#Datatable').css('display','none')
            $('#Datatable_mul').css('display','block')
          }

        }
        if ($(this).val()=='Chart'){
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#Chart').css('display','block')
            $('#Chart_mul').css('display','none')
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#Chart').css('display','none')
            $('#Chart_mul').css('display','block')
          }
        }
        if ($(this).val()=='Filter'){
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#Filter').css('display','block')
            $('#Filter_mul').css('display','none')
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#Filter').css('display','none')
            $('#Filter_mul').css('display','block')
          }
        }
        if ($(this).val()=='Alert'){
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#Alert').css('display','block')
            $('#Alert_mul').css('display','none')
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#Alert').css('display','none')
            $('#Alert_mul').css('display','block')
          }
        }
        if ($(this).val()=='Formatter'){
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#Formatter').css('display','block')
            $('#Formatter_mul').css('display','none')
            if($("#selectTemplate").val() == "Multiple table"){
              $("#showformatTable").css("display","block")
              $("#showformatTable_mul").css("display","none")
            }else{
              $("#showformatTable").css("display","none")
              $("#showformatTable_mul").css("display","none")
            }
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#Formatter').css('display','none')
            $('#Formatter_mul').css('display','block')
            if($("#selectTemplate").val() == "Multiple table"){
              $("#showformatTable").css("display","none")
              $("#showformatTable_mul").css("display","block")
            }else{
              $("#showformatTable").css("display","none")
              $("#showformatTable_mul").css("display","none")
            }
          }
        }
        if ($(this).val()=='Group By'){
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#group_by_action').css('display','block')

          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#group_by_action_mul').css('display','block');
          }
        }
        if ($(this).val()=='Action'){
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#ListView_Action').css('display','block')
            $('#ListView_Action_mul').css('display','none')
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#ListView_Action').css('display','none')
            $('#ListView_Action_mul').css('display','block')
          }
        }
        if ($(this).val()=="custom column") {
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#Custom').css('display','block')
            $('#Custom_mul').css('display','none')
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#Custom').css('display','none')
            $('#Custom_mul').css('display','block')
          }
        }
        if ($(this).val()=="custom template") {
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#customTemplateListView').css('display','block');
            $('#customTemplateListView_mul').css('display','none');
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#customTemplateListView').css('display','none');
            $('#customTemplateListView_mul').css('display','block');
          }
        }
        if ($(this).val()=="hyperlinking tables") {
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#hyperlinkingTables').css('display','block');
            $('#hyperlinkingTables_mul').css('display','none');
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#hyperlinkingTables').css('display','none');
            $('#hyperlinkingTables_mul').css('display','block');
          }
        }
        if ($(this).val()=="JS Attributes") {
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#JSAttributes').css('display','block');
            $('#JSAttributes_mul').css('display','none');
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#JSAttributes').css('display','none');
            $('#JSAttributes_mul').css('display','block');
          }
        }
        if ($(this).val()=="formatting columns") {
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#formattingColumns').css('display','block');
            $('#formattingColumns_mul').css('display','none');
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#formattingColumns').css('display','none');
            $('#formattingColumns_mul').css('display','block');
          }

        }
        if ($(this).val()=="title name") {
          if($('#selectTemplate').val() == "Multiple table"){
            $('#tableNameDivMultiple').css('display','block');
            $('#tableNameDiv').css('display','none');
          }else{
            $('#tableNameDivMultiple').css('display','none');
            $('#tableNameDiv').css('display','block');
          }

        }
        if ($(this).val()=="Buttons Grouped Together_mul"){
          $('#buttonsGroupedTogetherDiv_mul').css('display','block');
        }
        if ($(this).val()=="Buttons Grouped Together"){
          $('#buttonsGroupedTogetherDiv').css('display','block');
        }
        if ($(this).val()=="title name_mul"){
          $('#titleName_mul').css('display','block');
        }
        $('#paginationDiv').css('display','none');
        if ($(this).val()=="Pagination"){
          $('#paginationDiv').css('display','block');
        }
        if ($(this).val()=="card_view"){
          $('#card_view_div').css('display','block');
        }
        $('#paginationDiv_mul').css('display','none');
        if ($(this).val()=="Pagination_mul"){
          $('#paginationDiv_mul').css('display','block');
        }
      }
    })
      $('.notRequired').click(function(){
        var notRequiredCheckbox=$(this);
        subCategoryValue=notRequiredCheckbox.parent().parent().parent().find('.btn').attr('data-subCategory')
        $('.subCategory').each(function (){
          if($(this).val()==subCategoryValue){
            $(this).next().children().css('display','none')
          }
        })
        if($('#Datatable').find('.saveElementsButton')[0].disabled==true || $('#Datatable').find('.notRequired')[0].checked==true  ){
          $('.subCategory').each(function (){
            if($(this).val()=="Filter"){
              $(this)[0].disabled=true
              $(this).next().children().css('display','none')
              $('#Filter').find('input[type=checkbox]').each(function (){
                $(this)[0].checked=false
                $(this)[0].disabled=false
              })
        }
        })
        }
        if($('#Datatable_mul').find('.saveElementsButton')[0].disabled==true || $('#Datatable_mul').find('.notRequired')[0].checked==true  ){
          $('.subCategory').each(function (){
            if($(this).val()=="Filter"){
              $(this)[0].disabled=true
              $(this).next().children().css('display','none')
              $('#Filter_mul').find('input[type=checkbox]').each(function (){
                $(this)[0].checked=false
                $(this)[0].disabled=false
              })
        }
        })
        }
        $('#saveListViewConfig')[0].disabled=true
        $('#saveListViewConfig_mul')[0].disabled=true
        notRequiredCheckbox.parent().parent().next().find('input[type=checkbox]').each(function(){
          var subElementsCheckBox=$(this);
          subElementsCheckBox[0].disabled=false
          subElementsCheckBox.parent().parent().parent().parent().find('.btn')[0].disabled=true
          if(notRequiredCheckbox.prop("checked")==true){
              subElementsCheckBox[0].checked=false
              subElementsCheckBox[0].disabled=true
              subElementsCheckBox.parent().parent().parent().parent().find('.btn')[0].disabled=false
            }
        })
      })

      $('#Datatable').find('.elementCheckboxes').find('input[type=checkbox]').click(function(){
        var elementsCheckedDT=[];
        $('#Datatable').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
          if($(this)[0].checked==true){
            elementsCheckedDT.push($(this))
          }
        })
        var subCategoryValue=$(this).parent().parent().parent().parent().find('.btn').attr('data-subCategory')
        $('.subCategory').each(function (){
          if($(this).val()==subCategoryValue){
            $(this).next().children().css('display','none')
          }
          if($(this).val()=="Filter"){
              $(this)[0].disabled=true
              $(this).next().children().css('display','none')
              $('#Filter').find('input[type=checkbox]').each(function (){
                $(this)[0].checked=false
              })
            }
        })
        $('#saveListViewConfig')[0].disabled=true
        $(this).parent().parent().parent().parent().find('.btn')[0].disabled=true
        if(elementsCheckedDT.length>0){
          $(this).parent().parent().parent().parent().find('.btn')[0].disabled=false
        }




      })

      $('#Datatable_mul').find('.elementCheckboxes').find('input[type=checkbox]').click(function(){
        var elementsCheckedDT=[];
        $('#Datatable_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
          if($(this)[0].checked==true){
            elementsCheckedDT.push($(this))
          }
        })
        var subCategoryValue=$(this).parent().parent().parent().parent().find('.btn').attr('data-subCategory')
        $('.subCategory').each(function (){
          if($(this).val()==subCategoryValue){
            $(this).next().children().css('display','none')
          }
          if($(this).val()=="Filter"){
              $(this)[0].disabled=true
              $(this).next().children().css('display','none')
              $('#Filter_mul').find('input[type=checkbox]').each(function (){
                $(this)[0].checked=false
              })
            }
        })
        $('#saveListViewConfig_mul')[0].disabled=true
        $(this).parent().parent().parent().parent().find('.btn')[0].disabled=true
        if(elementsCheckedDT.length>0){
          $(this).parent().parent().parent().parent().find('.btn')[0].disabled=false
        }




      })
      $('#Chart').find('.elementCheckboxes').find('input[type=checkbox]').click(function(){
        var elementsCheckedChart=[];
        $('#Chart').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
          if($(this)[0].checked==true){
            elementsCheckedChart.push($(this))
          }
        })
        var subCategoryValue=$(this).parent().parent().parent().parent().find('.btn').attr('data-subCategory')
        $('.subCategory').each(function (){
          if($(this).val()==subCategoryValue){
            $(this).next().children().css('display','none')
          }
        })
        $('#saveListViewConfig')[0].disabled=true
        $(this).parent().parent().parent().parent().find('.btn')[0].disabled=true
        if(elementsCheckedChart.length>0){
          $(this).parent().parent().parent().parent().find('.btn')[0].disabled=false
        }
      })

      $('#Chart_mul').find('.elementCheckboxes').find('input[type=checkbox]').click(function(){
        var elementsCheckedChart=[];
        $('#Chart_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
          if($(this)[0].checked==true){
            elementsCheckedChart.push($(this))
          }
        })
        var subCategoryValue=$(this).parent().parent().parent().parent().find('.btn').attr('data-subCategory')
        $('.subCategory').each(function (){
          if($(this).val()==subCategoryValue){
            $(this).next().children().css('display','none')
          }
        })
        $('#saveListViewConfig_mul')[0].disabled=true
        $(this).parent().parent().parent().parent().find('.btn')[0].disabled=true
        if(elementsCheckedChart.length>0){
          $(this).parent().parent().parent().parent().find('.btn')[0].disabled=false
        }
      })

      $('#Filter').find('.elementCheckboxes').find('input[type=checkbox]').click(function(){
        var elementsCheckedFilter=[];
        $('#Filter').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
          if($(this)[0].checked==true){
            elementsCheckedFilter.push($(this))
          }
        })
        var subCategoryValue=$(this).parent().parent().parent().parent().find('.btn').attr('data-subCategory')
        $('.subCategory').each(function (){
          if($(this).val()==subCategoryValue){
            $(this).next().children().css('display','none')
          }
        })
        $('#saveListViewConfig')[0].disabled=true
        $(this).parent().parent().parent().parent().find('.btn')[0].disabled=true
        if(elementsCheckedFilter.length>0){
          $(this).parent().parent().parent().parent().find('.btn')[0].disabled=false
        }
      })

      $('#Filter_mul').find('.elementCheckboxes').find('input[type=checkbox]').click(function(){
        var elementsCheckedFilter=[];
        $('#Filter_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
          if($(this)[0].checked==true){
            elementsCheckedFilter.push($(this))
          }
        })
        var subCategoryValue=$(this).parent().parent().parent().parent().find('.btn').attr('data-subCategory')
        $('.subCategory').each(function (){
          if($(this).val()==subCategoryValue){
            $(this).next().children().css('display','none')
          }
        })
        $('#saveListViewConfig_mul')[0].disabled=true
        $(this).parent().parent().parent().parent().find('.btn')[0].disabled=true
        if(elementsCheckedFilter.length>0){
          $(this).parent().parent().parent().parent().find('.btn')[0].disabled=false
        }
      })

      $('#Alert').find('.elementCheckboxes').find('input[type=checkbox]').click(function(){
        var elementsCheckedAlert=[];
        $('#Alert').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
          if($(this)[0].checked==true){
            elementsCheckedAlert.push($(this))
          }
        })
        var subCategoryValue=$(this).parent().parent().parent().parent().find('.btn').attr('data-subCategory')
        $('.subCategory').each(function (){
          if($(this).val()==subCategoryValue){
            $(this).next().children().css('display','none')
          }
        })
        $('#saveListViewConfig')[0].disabled=true
        $(this).parent().parent().parent().parent().find('.btn')[0].disabled=true
        if(elementsCheckedAlert.length>0){
          $(this).parent().parent().parent().parent().find('.btn')[0].disabled=false
        }
      })

      $('#Alert_mul').find('.elementCheckboxes').find('input[type=checkbox]').click(function(){
        var elementsCheckedAlert=[];
        $('#Alert_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
          if($(this)[0].checked==true){
            elementsCheckedAlert.push($(this))
          }
        })
        var subCategoryValue=$(this).parent().parent().parent().parent().find('.btn').attr('data-subCategory')
        $('.subCategory').each(function (){
          if($(this).val()==subCategoryValue){
            $(this).next().children().css('display','none')
          }
        })
        $('#saveListViewConfig_mul')[0].disabled=true
        $(this).parent().parent().parent().parent().find('.btn')[0].disabled=true
        if(elementsCheckedAlert.length>0){
          $(this).parent().parent().parent().parent().find('.btn')[0].disabled=false
        }
      })


      $('#ListView_Action').find('.elementCheckboxes').find('input[type=checkbox]').click(function(){
        var elementsCheckedChart=[];
        $('#ListView_Action').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
          if($(this)[0].checked==true){
            elementsCheckedChart.push($(this))
          }
        })
        var subCategoryValue=$(this).parent().parent().parent().parent().find('.btn').attr('data-subCategory')
        $('.subCategory').each(function (){
          if($(this).val()==subCategoryValue){
            $(this).next().children().css('display','none')
          }
        })
        $('#saveListViewConfig')[0].disabled=true

        if($(this).attr('name') != "Perm Delete Record" && $(this).attr('name') != "Temp Delete Record"){
          $(this).parent().parent().parent().parent().find('.btn')[0].disabled=true
          if(elementsCheckedChart.length>0){
            $(this).parent().parent().parent().parent().find('.btn')[0].disabled=false
          }
        }else{
          $(this).parent().parent().parent().parent().parent().parent().parent().find('.btn')[0].disabled=true
          if(elementsCheckedChart.length>0){
            $(this).parent().parent().parent().parent().parent().parent().parent().find('.btn')[0].disabled=false
          }
        }
      })

      $('.listview_actionSubElements').find('input[type=checkbox]').eq(1).click(function(){
        if($(this)[0].checked==true){
          $('.listview_actionSubElements').find('input[type=checkbox]').eq(2).parent().parent().css("display","block")
          $('.listview_actionSubElements').find('input[type=checkbox]').eq(3).parent().parent().css("display","block")
          }else{
            $('.listview_actionSubElements').find('input[type=checkbox]').eq(2).parent().parent().css("display","none")
            $('.listview_actionSubElements').find('input[type=checkbox]').eq(3).parent().parent().css("display","none")
          }
      })

      $('#ListView_Action_mul').find('.elementCheckboxes').find('input[type=checkbox]').click(function(){
        var elementsCheckedChart=[];
        $('#ListView_Action_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
          if($(this)[0].checked==true){
            elementsCheckedChart.push($(this))
          }
        })
        var subCategoryValue=$(this).parent().parent().parent().parent().find('.btn').attr('data-subCategory')
        $('.subCategory').each(function (){
          if($(this).val()==subCategoryValue){
            $(this).next().children().css('display','none')
          }
        })
        $('#saveListViewConfig_mul')[0].disabled=true

        if($(this).attr('name') != "Perm Delete Record" && $(this).attr('name') != "Temp Delete Record"){
          $(this).parent().parent().parent().parent().find('.btn')[0].disabled=true
          if(elementsCheckedChart.length>0){
            $(this).parent().parent().parent().parent().find('.btn')[0].disabled=false
          }
        }else{
          $(this).parent().parent().parent().parent().parent().parent().parent().find('.btn')[0].disabled=true
          if(elementsCheckedChart.length>0){
            $(this).parent().parent().parent().parent().parent().parent().parent().find('.btn')[0].disabled=false
          }
        }
      })

      $('#ListView_Action_mul').find('.listview_actionSubElements').find('input[type=checkbox]').eq(1).click(function(){
        if($(this)[0].checked==true){
          $('#ListView_Action_mul').find('.listview_actionSubElements').find('input[type=checkbox]').eq(2).parent().parent().css("display","block")
          $('#ListView_Action_mul').find('.listview_actionSubElements').find('input[type=checkbox]').eq(3).parent().parent().css("display","block")
          }else{
            $('#ListView_Action_mul').find('.listview_actionSubElements').find('input[type=checkbox]').eq(2).parent().parent().css("display","none")
            $('#ListView_Action_mul').find('.listview_actionSubElements').find('input[type=checkbox]').eq(3).parent().parent().css("display","none")
          }
      })

      $('#resetListViewConfig').click(function(){
        $('.subElementCards').find('input[type=checkbox]').each(function(){
          $(this)[0].checked=false
        })
        $('.subCategory').each(function () {
          $(this).css({ backgroundColor: '#565a5e' });
          $(this).css({ borderColor: '#565a5e' });
        })
        $('#subCategoryButtons').find('.fa-check-circle').each(function(){
          $(this).css('display','none')
        })
        quick_filters_modal_id_reset(this);
        resetActionButtons(this);
        $('#list_view_modal_header').val('');
        $('#Datatable').css('display','none')
        $('#Chart').css('display','none')
        $('#Alert').css('display','none')
        $('#Filter').css('display','none')
        $('#ListView_Action').css('display','none')
        $('#Custom').css('display','none');
        $('#customTemplateListView').css('display','none')
        $('#Formatter').css('display','none')
        $('#JSAttributes').css('display','none')
        $('#muldrop_list_config_view').css('display','none')
        $('#previewCard').empty()
        $('#saveListViewConfig').closest(".modal-footer").find(".previewCustomTemplate").prop('disabled',true);
        $('#configuration_val_row_dev').empty()
        $('.customValbtnDev').attr('data-data_config','{}')
        $('.carousel').carousel(0);
        $("#allow_listv_custV").prop("checked",false);
        $("#allow_listv_rtf").prop("checked",false);
        $("#toggleeditcolAlign").prop("checked", false).trigger('change')
        $(".labelrowAlign").empty()
        $("#labelSelectionColAli").css("display", "none")
        $('#custom_validation_table_dev').empty()
        $('#custommValidationSelection_dev').val('').trigger('change')
        $('#custommValidationSelection_dev').empty()
        $('#formatColumn').empty();
        $('#customColumn').empty();
        if($("#selectTemplate").val() == "Multi Dropdown View"){
          $('#selectHyperLinkedColumnMasterPC_mul').empty();
          $('#selectHyperLinkedColumnMasterPC_mul').append(`<option value="" selected>Master Table Column</option>`);
          $('#selectHyperLinkedTablePC_mul').empty();
          $('#selectHyperLinkedTablePC_mul').append(`<option value="" selected>linked Table</option>`);
          $('#selectHyperLinkedColumnPC_mul').empty();
          $('#selectHyperLinkedColumnPC_mul').append(`<option value="" selected>Linked Table Column</option>`);
          resetButtonTitleRow_mul()
          resetButtonTitleName_mul()
          resetButtonsGroupedTogether_mul()
          $('#selectHyperLinkedAdditionalPC_mul').empty()
          $('#basicfilter_items_mul .filter-table tr').remove();
        }
        else{
          $('#selectHyperLinkedColumnMasterPC').empty();
          $('#selectHyperLinkedColumnMasterPC').append(`<option value="" selected>Master Table Column</option>`);
          $('#selectHyperLinkedTablePC').empty();
          $('#selectHyperLinkedTablePC').append(`<option value="" selected>linked Table</option>`);
          $('#selectHyperLinkedColumnPC').empty();
          $('#selectHyperLinkedColumnPC').append(`<option value="" selected>Linked Table Column</option>`);
          $('#selectHyperLinkedAdditionalPC').empty()
          resetButtonTitleRow()
          resetButtonTitleName()
          resetButtonsGroupedTogether()
          $('#basicfilter_items .filter-table tr').remove();
        }
        if($("#selectTemplate").val() == "Card View"){
          $('#card_view_div input').val('');
          $('#card_view_div input[type="color"]').val('#ffffff');
          $('#card_view_div input[data-css="card-border-color"]').val('#000000');
          $('#card_view_div input[data-css="card-shadow-color"]').val('#000000');
          $('#card_view_div input[data-css="field-border-color"]').val('#000000');
          $('#card_view_div select[data-css="font-alignment"]').empty();
          $('#card_view_div select[data-css="font-alignment"]').append(`<option value="" selected>Select alignment</option>`);
          $('#card_view_div select[data-css="font-header-size"]').empty();
          $('#card_view_div select[data-css="font-header-size"]').append(`<option value="" selected>Normal</option>`);
          $('#card_view_div select[data-css="font-value-size"]').empty();
          $('#card_view_div select[data-css="font-value-size"]').append(`<option value="" selected>Normal</option>`);
          $('#card_view_div select[data-css="card-border-style"]').empty();
          $('#card_view_div select[data-css="card-border-style"]').append(`<option value="" selected>No border</option>`);
          $('#card_view_div select[data-css="card-border-color-opacity"]').empty();
          $('#card_view_div select[data-css="card-border-color-opacity"]').append(`<option value="" selected>1</option>`);
          $('#card_view_div select[data-css="card-shadow-color-opacity"]').empty();
          $('#card_view_div select[data-css="card-shadow-color-opacity"]').append(`<option value="" selected>1</option>`);
          $('#card_view_div select[data-css="field-border-color-opacity"]').empty();
          $('#card_view_div select[data-css="field-border-color-opacity"]').append(`<option value="" selected>1</option>`);
          $('#card_view_div select[data-css="field-border-style"]').empty();
          $('#card_view_div select[data-css="field-border-style"]').append(`<option value="" selected>No border</option>`);
          $('#card_view_div select[data-css="card-no-one-row"]').empty();
          $('#card_view_div select[data-css="card-no-one-row"]').append(`<option value="" selected>1</option>`);
        }      
        $('#selectTablePC').val('').trigger("change");
        $('#selectTemplate').val('').trigger("change");
        $('#allowUsersToSetApproversDispFieldsListView').val('').trigger("change");
        $('#allowUsersToSetApproversDispFormatListView').val('').trigger("change");
        $('#tabHeaderListView').val('');
        $('#basicfilter_items_mul').find('.filter-table').empty();
        $('#categoryForm input:checkbox').prop('checked', false);
        $("#toggleCustomListViewMessages").prop("checked",false).trigger("change");
        delPageRowAlign()
        $('#selectCharactersToBeEscapedLV').val('').trigger('change');
        $('#dropFields').val('').trigger('change');
        $('#restrictFields').val('').trigger('change');
        $('#groupFields').val('').trigger('change');
        $('#editFieldsNS').val('').trigger('change');
        $('#dropFieldsLV_upload').val('').trigger('change');
        $('.customValbtnDev').attr('data-data_config','{}')
        $('.carousel').carousel(0);
        $("#allow_listv_custV").prop("checked",false);
        $("#allow_listv_rtf").prop("checked",false);
        $("#toggleeditcolAlign").prop("checked", false).trigger('change')
        $("#labelSelectionColAli").css("display", "none");
        $(".labelrowAlign").empty();
        $('.table-header-fields').empty();
        $('#allow_checkbox_column_rename input:checkbox').prop('checked', false);
        $('#listViewEditButtonModal').find('.modal-body').empty();
        $('#listViewEditButtonModal').find('.modal-body').append(`
          <div class="card-header">
            <div class="float-right" style="margin-right: 6px;">
              <button onclick="listViewPopulateEditButtonContent(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false" style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
            </div>
          </div>
        `);
        $('#columnNamesRenamesModal').find('.body-column-header-name').empty()
      })


      $('.saveElementsButton').click(function(){
        if($(this).attr('data-subCategory') == "Custom") {
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#subCategoryButtons').find('.fa-check-circle').eq(8).css('display','inline-block');
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#subCategoryButtons_mul').find('.fa-check-circle').eq(8).css('display','inline-block');
          }
        }
        if($(this).attr('data-subCategory') == "customTemplateListView") {
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#subCategoryButtons').find('.fa-check-circle').eq(9).css('display','inline-block');
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#subCategoryButtons_mul').find('.fa-check-circle').eq(9).css('display','inline-block');
          }
        }
        if($(this).attr('data-subCategory') == "Hyperlinking table") {
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#subCategoryButtons').find('.fa-check-circle').eq(10).css('display','inline-block');
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#subCategoryButtons_mul').find('.fa-check-circle').eq(10).css('display','inline-block');
          }
        }
        if($(this).attr('data-subCategory') == "Group by") {
          if ($('#selectTemplate').val() != "Multi Dropdown View"){
            $('#subCategoryButtons').find('.fa-check-circle').eq(7).css('display','inline-block');
          }else if ($('#selectTemplate').val() == "Multi Dropdown View"){
            $('#subCategoryButtons_mul').find('.fa-check-circle').eq(7).css('display','inline-block');
          }
        }
        if($(this).attr('data-subCategory') == "formatting column") {
          $('#subCategoryButtons').find('.fa-check-circle').eq(11).css('display','inline-block');
        }
        if($(this).attr('data-subCategory') == "JS Attributes") {
          $('#subCategoryButtons,#subCategoryButtons_mul').find('.fa-check-circle').eq(6).css('display','inline-block');
          if($('#selectTemplate').val() != "Multi Dropdown View"){
            let selectedJSAttribute = $("#selectLVJSAttribute").val();
          }else if($('#selectTemplate').val() == "Multi Dropdown View"){
            let selectedJSAttribute = $("#selectLVJSAttribute_mul").val();
          }
          $('.subCategory[value="JS Attributes"]').attr('data-config', selectedJSAttribute);
        }

        if($('#selectTemplate').val() != "Multi Dropdown View"){
        if($('#Datatable').find('.saveElementsButton')[0].disabled==true || $('#Datatable').find('.notRequired')[0].checked==true){
          $('.subCategory').each(function (){
            if($(this).val()=="Filter"){
              $(this)[0].disabled=true
              $(this).next().children().css('display','none')
              $('#Filter').find('input[type=checkbox]').each(function (){
                $(this)[0].checked=false
              })
            }
          })
          }
        else{
          $('.subCategory').each(function (){
            if($(this).val()=="Filter"){
              $(this)[0].disabled=false
            }
          })
        }
      }else if($('#selectTemplate').val() == "Multi Dropdown View"){

        if($('#Datatable_mul').find('.saveElementsButton')[0].disabled==true || $('#Datatable_mul').find('.notRequired')[0].checked==true){
          $('.subCategory').each(function (){
            if($(this).val()=="Filter"){
              $(this)[0].disabled=true
              $(this).next().children().css('display','none')
              $('#Filter_mul').find('input[type=checkbox]').each(function (){
                $(this)[0].checked=false
              })
            }
          })
          }
        else{
          $('.subCategory').each(function (){
            if($(this).val()=="Filter"){
              $(this)[0].disabled=false
            }
          })
        }
      }

        buttonValue=$(this).attr('data-subCategory')
        $('.subCategory').each(function (){
          if($(this).val()==buttonValue){
            $(this).next().children().css('display','')
          }
        })

        if($('#selectTemplate').val() != "Multi Dropdown View"){
          saveCheckList=[]
          $('#subCategoryButtons').find('.fa-check-circle').each(function(){
            if($(this).css('display')=='inline-block'){
              saveCheckList.push($(this))
            }

            $('#saveListViewConfig')[0].disabled=true
            var tableName=$('#selectTablePC').val();
            var templateName=$('#selectTemplate').val();
            var filterValidationCheck=[];
            $('.subCategory').each(function (){
              if($(this).val()=="Filter" && $(this)[0].disabled==true){
                filterValidationCheck.push($(this))
              }
            })
            if(filterValidationCheck.length>0){
              if(saveCheckList.length>=3 && tableName!=null && templateName!=null){
              $('#saveListViewConfig')[0].disabled=false
            }
            }
            else{
              if(saveCheckList.length>=5 && tableName!=null && templateName!=null){
              $('#saveListViewConfig')[0].disabled=false
            }
            }

          })
        }else if($('#selectTemplate').val() == "Multi Dropdown View"){
          saveCheckList=[]
          $('#subCategoryButtons_mul').find('.fa-check-circle').each(function(){
            if($(this).css('display')=='inline-block'){
              saveCheckList.push($(this))
            }

            $('#saveListViewConfig_mul')[0].disabled=true
            var tableName=$('#selectTablePC').val();
            var templateName=$('#selectTemplate').val();
            var filterValidationCheck=[];
            $('.subCategory').each(function (){
              if($(this).val()=="Filter" && $(this)[0].disabled==true){
                filterValidationCheck.push($(this))
              }
            })
            if(filterValidationCheck.length>0){
              if(saveCheckList.length>=3 && tableName!=null && templateName!=null){
              $('#saveListViewConfig_mul')[0].disabled=false
            }
            }
            else{
              if(saveCheckList.length>=5 && tableName!=null && templateName!=null){
              $('#saveListViewConfig_mul')[0].disabled=false
            }
            }

          })

        }
      })

      var tableName;
      var templateName;
      var multable_viewname;
      var multable_config = {}
      var multable_config_comp = {}



      $('#saveListViewConfig').click(function(){
        let tab_header_name = $(this).parent().prev().find('.tabHeader').val()
    let tab_header_name_validation = $(this).parent().prev().find('.tabHeaderEmptyValidation')

        let currentDevMode = "{{current_dev_mode}}"
      if(currentDevMode === "Edit" || currentDevMod === "Build"){
          $.ajax({
    url: window.location.pathname,
    data: {
    'operation': "fetchDependencies",
    'item_group_code':$('#graphContainerID').attr('data-process_code'),
    },
    type: "POST",
    dataType: "json",
    success: function (data) {

    if (data.appDependency.length > 0) {
      var user_name = {}
      $('#dependencyTable').empty()

        for(var i=0;i<data.appDependency.length;i++){

             $('#dependencyTable').append(`<tr><td style="font-weight:bold">${i+1}.</td><td style="font-weight:bold;text-align:start">&nbsp;&nbsp;${data.appDependency[i]}</td></tr>`)
        }
          $('#dependencyChecker').modal('show')
          $('#btn_dependencySave').off('click').on('click',function(){
            tab_header_name_validation.css('display','none')
            tab_header_name_validation.prev().css('display','none')

              if(!tab_header_name){
                tab_header_name_validation.css('display','block')
              }
              else{
                if ($('#selectTablePC').attr('multiple') == 'multiple') {
                  tableName=$('#selectTablePC').val();
                  for(let i = 0; i < tableName.length; i++) {
                    user_name[tableName[i]] = tableName[i]
                  }
                  tableName=JSON.stringify($('#selectTablePC').val());
                } else {
                  tableName=$('#selectTablePC').val();
                }
                templateName=$('#selectTemplate').val();
                var cellSelected=editorCopy.editor.graph.getModel().getCell($('#dataTableModal').find('.modal-footer').attr('data-shapeid'));
                cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
                if (cellShapeUniqueID<0){
                  var itemID=("process"+Math.random()).replace('.',"")
                  cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
                }
                else{
                  var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
                }
                var indexSeparator=cellSelected.style.indexOf(';');
                var elementShape=cellSelected.style.substr(0,indexSeparator);

                var ctoken = $('form').find("input[name='csrfmiddlewaretoken']").attr('value')
                var iconselector;
                $('.listoficons').each(function(){
                  if($(this).css("border").includes("rgb(184, 134, 11)")){

                  var numbers=$(this).attr("class").indexOf('listoficons')-1
                    iconselector= $(this).attr("class").substr(0,numbers)
                  }
                })

                if($("#selectTemplate").val() != "Multi Dropdown View"){
                  tabBodyContent = JSON.stringify(finalJsonConfig())
                  if (tableName && tableName != '') {
                    var tableSelected = true;
                  } else {
                    var tableSelected = false;
                  }
                }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                  for(let [key,value] of Object.entries(multable_config) ){
                      value['mulview_def'] = $('.default_mul_view').val()
                      value['mulview_def_cols'] = Object.keys(multable_config)
                      if(key in multable_config_comp){
                        value["mulview_comp_element_id"] = multable_config_comp[key]
                      }else{
                        value["mulview_comp_element_id"] = ""
                      }
                      value["mulview_comp"] = multable_config_comp

                  }
                  tabBodyContent = JSON.stringify(multable_config)
                  var tableSelected = true;
                }

                $.ajaxSetup({
                  beforeSend: function (xhr, settings) {
                    xhr.setRequestHeader("X-CSRFToken", ctoken);
                  }
                });

                if (tableSelected) {
                  $.ajax({
                    url: window.location.pathname,
                    data: {
                      'operation': 'saveListViewElementConfig',
                                            'processName':process_name,
                      'subProcessName':subprocess_name,
                      'iconselected2':iconselector,
                      'tab_header_name':$('#tabHeaderListView').val(),
                      'tableName':tableName,
                      'tabBodyContent':tabBodyContent,
                      'elementID':itemID,
                      'shape':elementShape
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                      var tab_name_ = $("#tabHeaderListView").val();
                      $("#graphContainerID").attr("data-tab_name",tab_name_);
                      if($('#customTemplateListView').find('input').prop('checked')) {
                        $('#saveListViewConfig').closest(".modal-footer").find(".previewCustomTemplate").prop('disabled',false);
                      } else {
                        $('#saveListViewConfig').closest(".modal-footer").find(".previewCustomTemplate").prop('disabled',true);
                        $(`input[data_connectid=${cellShapeUniqueID.toString()}]`).parent().css('display','none')
                        listViewReset();
                        $("#dataTableModal").modal("hide");
                      }
                      $('#saveListViewConfig').html(`Save`)
                      Swal.fire({icon: 'success',text: 'List View configuration saved successfully!'});
                    },
                    error: function () {
                      $('#saveListViewConfig').html(`Save`)
                      Swal.fire({icon: 'error',text: 'Error! Failure in saving the List View configuration. Please check your configuration and try again.'});
                    }
                  });
                } else {
                  Swal.fire({icon: 'error',text: 'Error! Table selection cannot be blank. Please check your configuration and try again.'});
                }
              }
            })
          } else {
            var user_name = {}
            tab_header_name_validation.css('display','none')
              tab_header_name_validation.prev().css('display','none')

              if(!tab_header_name){
                tab_header_name_validation.css('display','block')
              }
              else{
                if ($('#selectTablePC').attr('multiple') == 'multiple') {
                  tableName=$('#selectTablePC').val();
                  for(let i = 0; i < tableName.length; i++) {
                    user_name[tableName[i]] = tableName[i]
                  }
                  tableName=JSON.stringify($('#selectTablePC').val());
                } else {
                  tableName=$('#selectTablePC').val();
                }
                templateName=$('#selectTemplate').val();
                var cellSelected=editorCopy.editor.graph.getModel().getCell($('#dataTableModal').find('.modal-footer').attr('data-shapeid'));


                cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
                if (cellShapeUniqueID<0){
                  var itemID=("process"+Math.random()).replace('.',"")
                  cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
                }
                else{
                  var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
                }
                var indexSeparator=cellSelected.style.indexOf(';');
                var elementShape=cellSelected.style.substr(0,indexSeparator);
                var ctoken = $('form').find("input[name='csrfmiddlewaretoken']").attr('value')
                var iconselector;


              $('.listoficons').each(function(){
                  if($(this).css("border").includes("rgb(184, 134, 11)")){

                  var numbers=$(this).attr("class").indexOf('listoficons')-1
                    iconselector= $(this).attr("class").substr(0,numbers)
                  }
                })

                if($("#selectTemplate").val() != "Multi Dropdown View"){
                  tabBodyContent = JSON.stringify(finalJsonConfig())
                  var tableSelected = tabBodyContent['Category_attributes']['Mandatory']['Table_name']
                  if (tableSelected && tableSelected != '') {
                    tableSelected = true;
                  } else {
                    tableSelected = false;
                  }
                }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                  for(let [key,value] of Object.entries(multable_config) ){
                      value['mulview_def'] = $('.default_mul_view').val()
                      value['mulview_def_cols'] = Object.keys(multable_config)
                      if(key in multable_config_comp){
                        value["mulview_comp_element_id"] = multable_config_comp[key]
                      }else{
                        value["mulview_comp_element_id"] = ""
                      }
                      value["mulview_comp"] = multable_config_comp
                  }
                  tabBodyContent = JSON.stringify(multable_config)
                  tableSelected = true;
                }

                $.ajaxSetup({
                  beforeSend: function (xhr, settings) {
                    xhr.setRequestHeader("X-CSRFToken", ctoken);
                  }
                });
                if (tableSelected) {
                  $.ajax({
                    url: window.location.pathname,
                    data: {
                      'operation': 'saveListViewElementConfig',
                      'processName':process_name,
                      'subProcessName':subprocess_name,
                      'iconselected2':iconselector,
                      'tab_header_name':$('#tabHeaderListView').val(),
                      'tableName':tableName,
                      'tabBodyContent':tabBodyContent,
                      'elementID':itemID,
                      'shape':elementShape
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                      $('#dataTableModal').modal('hide')
                      Swal.fire({icon: 'success',text: 'List View configuration saved successfully!'});
                      $('#selectTablePC').val('').trigger("change")
                      $('#selectTemplate').val('').trigger("change")
                      $('#tabHeaderListView').val("").trigger('change')
                      $('#configuration_val_row_dev').empty()
                      $('.customValbtnDev').attr('data-data_config','{}')
                      $('.carousel').carousel(0);
                      $("#allow_listv_custV").prop("checked",false);
                      $("#allow_listv_rtf").prop("checked",false);
                      $("#toggleeditcolAlign").prop("checked", false).trigger('change')
			                $(".labelrowAlign").empty()
                      $("#labelSelectionColAli").css("display", "none")
                      $('#custom_validation_table_dev').empty()
                      $('#custommValidationSelection_dev').val('').trigger('change')
                      $('#custommValidationSelection_dev').empty()

                      if($("#selectTemplate").val() != "Multi Dropdown View"){
                        $('#dropFields').empty()
                        $('#dropFieldsLV_upload').empty()
                        $('#groupFields').empty()
                        $("#editFieldsNS").empty()
                        $('#restrictFields').empty()
                        $('#customColumn').empty();
                        $('#formatColumn').empty();
                        $("#appFields_ref_cols").empty()
                        $("#appFields_ref_table").val("").trigger("change")
                        $("#appJSONTable").val("").trigger("change")
                        $("#appJSONEditTable").val("").trigger("change")
                        $("#appJSONCols").empty()
                        $("#appJSONEditCols").empty()

                        $("#customListViewMessagesDiv").find(".c_msg_input").each(function() {
                          $(this).val($(this).attr("data-value"))
                          $(this).closest(".nav-item").find(".msg_icon").attr("class",$(this).closest(".nav-item").find(".msg_icon").attr("data-value"))
                        })

                        $("#appJSONTableReorder").val("").trigger("change")
                        $("#appJSONColsReorder").empty()

                        $('#Datatable').css('display','none')
                        $('#Chart').css('display','none')
                        $('#Alert').css('display','none')
                        $('#Filter').css('display','none')
                        $('#Custom').css('display','none');
                        $('#customTemplateListView').css('display','none')
                        $('#previewCard').empty()
                        $('#basicfilter_items').find('.filter-table').empty();
                        $("#dropFields_add").attr('data-data','{}')
                        $("#dropFields_add_LV_upload").attr('data-data','{}')
                        $("#editFields_add").attr('data-data','{}')

                      }else if($("#selectTemplate").val() == "Multi Dropdown View"){
                        $('#dropFields_mul').empty()
                        $('#dropFieldsLVUpload_mul').empty()
                        $('#groupFields_mul').empty()
                        $('#groupFields_restrictview_mul').empty()
                        $('#restrictFields_mul').empty()
                        $('#editFieldsNS_mul').empty()
                        $('#customColumn_mul').empty();
                        $('#formatColumn_mul').empty();
                        $("#toggleCustomListViewMessages_multidropdown").prop("checked",false).trigger("change")
                        $("#customListViewMessagesDiv_multidropdown").find(".c_msg_input").each(function() {
                          $(this).val($(this).attr("data-value"))
                          $(this).closest(".nav-item").find(".msg_icon").attr("class",$(this).closest(".nav-item").find(".msg_icon").attr("data-value"))
                        })

                        $('#Datatable_mul').css('display','none')
                        $('#Chart_mul').css('display','none')
                        $('#Alert_mul').css('display','none')
                        $('#Filter_mul').css('display','none')
                        $('#Custom_mul').css('display','none');
                        $('#customTemplateListView_mul').css('display','none')
                        $('#previewCard_mul').empty()
                        $('#basicfilter_items_mul').find('.filter-table').empty();
                      }

                      $(`input[data_connectid=${cellShapeUniqueID.toString()}]`).parent().css('display','none')
                      $('#reportingViewColumns').empty();
                      $('#reportingViewColumns_datefield_latest_entries').empty();
                      $('#reportingViewColumns_unique_indentfier_selector').empty();
                      $("#show_report_latest_checker").prop('checked',false)
                      $("#dont_show_detail_btn").prop('checked',false)
                      $('#uniqueColumn').empty();
                      $('#formatTab').empty();
                      $('#trackingColumn').empty();
                      $('.subCategory').each(function () {
                        $(this).css({ backgroundColor: '#565a5e' });
                        $(this).css({ borderColor: '#565a5e' });
                      })
                      $('.subElementCards').find('input[type=checkbox]').each(function(){
                        $(this)[0].checked=false
                        $(this)[0].disabled=false
                      })
                      $('#subCategoryButtons').find('.fa-check-circle').each(function(){
                        $(this).css('display','none')
                      })
                    },
                    error: function () {
                      Swal.fire({icon: 'error',text: 'Error! Failure in saving the List View configuration. Please check your configuration and try again.'});
                    }
                  })
                } else {
                  Swal.fire({icon: 'error',text: 'Error! Table selection cannot be blank. Please check your configuration and try again.'});
                }
              }
}
},
error: function () {
Swal.fire({icon: 'error',text: 'Error! Please try again.'});
}
});
}else{
  var user_name = {}
  tab_header_name_validation.css('display','none')

  if(!tab_header_name){
    tab_header_name_validation.css('display','block')
  }
  else{
    if ($('#selectTablePC').attr('multiple') == 'multiple') {
      tableName=$('#selectTablePC').val();
      for(let i = 0; i < tableName.length; i++) {
        user_name[tableName[i]] = tableName[i]
      }
      tableName=JSON.stringify($('#selectTablePC').val());
    } else {
      tableName=$('#selectTablePC').val();
    }
    templateName=$('#selectTemplate').val();
    var cellSelected=editorCopy.editor.graph.getModel().getCell($('#dataTableModal').find('.modal-footer').attr('data-shapeid'));
    cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
    if (cellShapeUniqueID<0){
      var itemID=("process"+Math.random()).replace('.',"")
      cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
    }
    else{
      var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
    }
    var indexSeparator=cellSelected.style.indexOf(';');
    var elementShape=cellSelected.style.substr(0,indexSeparator);
    var ctoken = $('form').find("input[name='csrfmiddlewaretoken']").attr('value')
    var iconselector;


  $('.listoficons').each(function(){
      if($(this).css("border").includes("rgb(184, 134, 11)")){

      var numbers=$(this).attr("class").indexOf('listoficons')-1
        iconselector= $(this).attr("class").substr(0,numbers)
      }
    })

    if($("#selectTemplate").val() != "Multi Dropdown View"){
      tabBodyContent = JSON.stringify(finalJsonConfig())
    }else if($("#selectTemplate").val() == "Multi Dropdown View"){
      for(let [key,value] of Object.entries(multable_config) ){
          value['mulview_def'] = $('.default_mul_view').val()
          value['mulview_def_cols'] = Object.keys(multable_config)
          if(key in multable_config_comp){
            value["mulview_comp_element_id"] = multable_config_comp[key]
          }else{
            value["mulview_comp_element_id"] = ""
          }
          value["mulview_comp"] = multable_config_comp
      }
      tabBodyContent = JSON.stringify(multable_config)
    }

    $.ajaxSetup({
      beforeSend: function (xhr, settings) {
        xhr.setRequestHeader("X-CSRFToken", ctoken);
      }
    });
    $.ajax({
      url: window.location.pathname,

      data: {
        'operation': 'saveListViewElementConfig',
        'processName':process_name,
        'subProcessName':subprocess_name,
        'iconselected2':iconselector,
        'tab_header_name':$('#tabHeaderListView').val(),
        'tableName':tableName,
        'tabBodyContent':tabBodyContent,
        'elementID':itemID,
        'shape':elementShape
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
      $('#dataTableModal').modal('hide')
      Swal.fire({icon: 'success',text: 'List View configuration saved successfully!'});
      $('#selectTablePC').val('').trigger("change")
      $('#selectTemplate').val('').trigger("change")
      $('#tabHeaderListView').val("").trigger('change')

      if($("#selectTemplate").val() != "Multi Dropdown View"){
        $('#dropFields').empty()
        $('#dropFieldsLV_upload').empty()
        $('#groupFields').empty()
        $("#editFieldsNS").empty()
        $('#restrictFields').empty()
        $("#appFields_ref_cols").empty()
        $("#appFields_ref_table").val("").trigger("change")
        $("#customListViewMessagesDiv").find(".c_msg_input").each(function() {
          $(this).val($(this).attr("data-value"))
          $(this).closest(".nav-item").find(".msg_icon").attr("class",$(this).closest(".nav-item").find(".msg_icon").attr("data-value"))
        })

        $('#Datatable').css('display','none')
        $('#Chart').css('display','none')
        $('#Alert').css('display','none')
        $('#Custom').css('display','none');
        $('#customTemplateListView').css('display','none')
        $('#Filter').css('display','none')
        $('#previewCard').empty()
        $('#basicfilter_items').find('.filter-table').empty();
        $("#dropFields_add").attr('data-data','{}')
        $("#dropFields_add_LV_upload").attr('data-data','{}')
        $("#editFields_add").attr('data-data','{}')
        $("#appJSONTable").val("").trigger("change")
        $("#appJSONEditTable").val("").trigger("change")
        $("#appJSONCols").empty()
        $("#appJSONEditCols").empty()

        $("#appJSONTableReorder").val("").trigger("change")
        $("#appJSONColsReorder").empty()

      }else if($("#selectTemplate").val() == "Multi Dropdown View"){
        $('#dropFields_mul').empty()
        $('#dropFieldsLVUpload_mul').empty()
        $('#groupFields_mul').empty()
        $('#groupFields_restrictview_mul').empty()
        $('#restrictFields_mul').empty()
        $('#editFieldsNS_mul').empty()

        $('#Datatable_mul').css('display','none')
        $('#Chart_mul').css('display','none')
        $('#Alert_mul').css('display','none')
        $('#Custom_mul').css('display','none');
        $('#customTemplateListView_mul').css('display','none')
        $('#Filter_mul').css('display','none')
        $('#previewCard_mul').empty()
        $('#basicfilter_items_mul').find('.filter-table').empty();
        $("#toggleCustomListViewMessages_multidropdown").prop("checked",false).trigger("change")
        $("#customListViewMessagesDiv_multidropdown").find(".c_msg_input").each(function() {
          $(this).val($(this).attr("data-value"))
          $(this).closest(".nav-item").find(".msg_icon").attr("class",$(this).closest(".nav-item").find(".msg_icon").attr("data-value"))
        })
      }

      $(`input[data_connectid=${cellShapeUniqueID.toString()}]`).parent().css('display','none')
      $('#reportingViewColumns').empty();
      $('#reportingViewColumns_datefield_latest_entries').empty();
      $('#reportingViewColumns_unique_indentfier_selector').empty();
      $("#show_report_latest_checker").prop('checked',false)
      $("#dont_show_detail_btn").prop('checked',false)
      $('.subCategory').each(function () {
        $(this).css({ backgroundColor: '#565a5e' });
        $(this).css({ borderColor: '#565a5e' });
      })
      $('.subElementCards').find('input[type=checkbox]').each(function(){
        $(this)[0].checked=false
        $(this)[0].disabled=false
      })
      $('#subCategoryButtons').find('.fa-check-circle').each(function(){
        $(this).css('display','none')
      })

      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Failure in saving the List View configuration. Please check your configuration and try again.'});
      }
    })
  }
}
})

$("#saveListViewConfig_mul").off('click').on('click',function(){
  if(multable_viewname != ""){
    multable_config[multable_viewname] = finalJsonConfig(type='mul')
    Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
    $('.dataTableModal_mul').modal('hide')
    if(Object.keys(multable_config).length > 0) {
      $('#saveListViewConfig')[0].disabled=false
    }
    def_val = $('.default_mul_view').val()
    $('.default_mul_view').empty()
    for(let [key,value] of Object.entries(multable_config) ){
        $(".default_mul_view").append(`<option values='${key}'>${key}</option>`);
    }
    $('.default_mul_view').val(def_val).trigger('change');
  }else{
    Swal.fire({icon: 'warning',text: 'Kindly provide the View name.'});
  }
})



//Save Basic filter for Reporting and History for List View Template
$("#saveBasicfilter").on('click',function(){
  var basicfilter_condition_list = []
  $('#basicfilter_items').find('.filter-table').find('tr').each(function(){
    var table_details = {
      table_name: $("#selectTablePC").val(),
      column_name: $(this).attr('name'),
      condition:  $(this).find('td').eq(1).find('div').find('select').find('option:selected').val(),
      input_value:$(this).find('td').eq(2).find('div').find('.basic_table_valuer').val(),
      current_value: $(this).find('td').eq(3).find('div').find('.basicfilter_curr_val').val(),
      constraint_name : $(this).find('td').eq(4).find('div').find('.basicfilter_constraint').val(),
      rule_set : $(this).find('td').eq(5).find('div').find('.basicfilter_ruleset').val(),
    }
    basicfilter_condition_list.push(table_details )
  })
  $("#saveBasicfilter").attr('data-basicfilter-config',JSON.stringify(basicfilter_condition_list))
  Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
  $('.closeBasicFilter').click();
})

$("#saveBasicfilter_mul").on('click',function(){
  var basicfilter_condition_list = []
  $('#basicfilter_items_mul').find('.filter-table').find('tr').each(function(){
    var table_details = {
      table_name: $("#selectTablePC").val(),
      column_name: $(this).attr('name'),
      condition:  $(this).find('td').eq(1).find('div').find('select').find('option:selected').val(),
      input_value:$(this).find('td').eq(2).find('div').find('.basic_table_valuer_mul').val(),
      current_value: $(this).find('td').eq(3).find('div').find('.basicfilter_curr_val').val(),
      constraint_name : $(this).find('td').eq(4).find('div').find('.basicfilter_constraint').val(),
      rule_set : $(this).find('td').eq(5).find('div').find('.basicfilter_ruleset').val(),
    }
        basicfilter_condition_list.push(table_details )
  })
  $("#saveBasicfilter_mul").attr('data-basicfilter-config',JSON.stringify(basicfilter_condition_list))
  Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
  $('.closeBasicFilter').click();
})

      function finalJsonConfig(type=''){
        var categorySubElementAttributesDT=[{"attr":"Table_name","value":tableName}]
        var reportingViewColumns = $('#reportingViewColumns').val();
        if ($('#reportingViewColumns_datefield_latest_entries').val() != ''){
          var reportingViewColumns_datefields = $('#reportingViewColumns_datefield_latest_entries').val();
        }else{
          var reportingViewColumns_datefields = null
        }
        if ($('#reportingViewColumns_unique_indentfier_selector').val() != ''){
          var reportingViewColumns_unique_indentfier = $('#reportingViewColumns_unique_indentfier_selector').val();
        }else{
          var reportingViewColumns_unique_indentfier = null
        }
        var dont_show_detail_btn
        var reportingShowLatest
        let template_choice = $('#selectTemplate').find('option:selected').val()
        let basicfilter_config = []
        var dataTableFieldsUnchecked=[]

        if($('#selectTemplate').val() != "Multi Dropdown View"){
          var checkFields=$('#Datatable').find('.elementCheckboxes').find('input[type=checkbox]').length
          var dropFieldListFinal = ""
          var dropFieldListFinal2 = ""
          if($("#selectTemplate").val() == "Multiple table"){
            dropFieldListFinal = $("#dropFields_add").attr('data-data')
            dropFieldListFinal = JSON.parse(dropFieldListFinal)
            dropFieldListFinal2 = $("#dropFields_add_LV_upload").attr('data-data')
            dropFieldListFinal2 = JSON.parse(dropFieldListFinal2)
          }else{
            dropFieldListFinal=$('#dropFields').val()
            dropFieldListFinal2=$('#dropFieldsLV_upload').val()
          }
          var groupFieldListFinal=$('#groupFields').val()
          var extract_data_filename = $("#fn_extact_data_mul").val()
          var mention_usergroups=$('#mention_usergroups').val()

          var listview_custom_messages = {}
          if($("#toggleCustomListViewMessages").is(":checked")){

            $("#customListViewMessagesDiv").find(".c_msg_input").each(function() {
              listview_custom_messages[$(this).attr("name")] ={ "message": $(this).val(), "icon": $(this).closest(".nav-item").find(".msg_icon").attr('class')}
            })
          }

          var charactersToBeEscaped = $('#selectCharactersToBeEscapedLV').val();
          var editAutoPopulatePrecedenceCheck = $('#editAutoPopulatePrecedenceCheck').prop('checked');
          var editAutoPopulatePrecedenceOnScenariosCheck = $('#editAutoPopulatePrecedenceOnScenariosCheck').prop('checked');
          var editedDisplayNamesMultipleTable = {}
          if($("#toggleEditTableCardNames").is(":checked")){
            $("#tableContainerEdit tr").each(function () {
              var cell1 = $(this).find(".originalTableNames").text();
              var cell2 = $(this).find(".displayTableNames input").val();

              editedDisplayNamesMultipleTable[cell1] = cell2;
          });
          }

          var reorderTableList = []
          $("#reorderTableCardsList").children().each(function() {
            reorderTableList.push($(this).attr("name"))
          })

          var editFieldsNS = ""
          if($("#selectTemplate").val() == "Multiple table"){
            editFieldsNS = $("#editFields_add").attr("data-data")
            editFieldsNS = JSON.parse(editFieldsNS)
          }else{
            editFieldsNS = $("#editFieldsNS").val()
          }
          var custom_alignment_transaction_data = $('#custom_alignment_transaction_data').val()
          var display_sections_approval_wall = $('#display_sections_approval_wall').val()
          var display_in_comments = $('#display_in_comments').val()
          var search_in_comments = $('#search_in_comments').val()
          var resolve_all_comments = $('#resolve_all_comments').prop('checked');
          var reopen_all_comments = $('#reopen_all_comments').prop('checked');
          var resolve_individual_comments = $('#resolve_individual_comments').prop('checked');
          var reopen_individual_comments = $('#reopen_individual_comments').prop('checked');


          var appReferFields = $("#appFields_ref_cols").val()
          var appreferTable = $("#appFields_ref_table").val()
          var restrictFieldListFinal=$('#restrictFields').val()
            if($("#saveBasicfilter").attr('data-basicfilter-config')){
            basicfilter_config = JSON.parse($("#saveBasicfilter").attr('data-basicfilter-config'));
          }
          var appJSONTable = $("#appJSONTable").val()
          var appJSONEditTable = $("#appJSONEditTable").val()
          var appJSONCols = $("#appJSONCols").val()
          var appJSONEditCols = $("#appJSONEditCols").val()

          var customColumn = $('#customColumn').val();
          var formatColumn = $('#formatColumn').val();

              $('#Datatable').find('.elementCheckboxes').find('input[type=checkbox]').each(function(){
              var attrDict={};
              attrDict['attr']=$(this).attr("name")
              if($(this)[0].checked==true){
                attrDict['value']="Yes"
              }
              else
              {attrDict['value']="No"
              dataTableFieldsUnchecked.push($(this))

            }
              attrDict['html_attributes']={"data-parent_group_no":"g2"}
              categorySubElementAttributesDT.push(attrDict)
            })
            if(checkFields==dataTableFieldsUnchecked.length){
              requiredBoolean="No"
            }
            else{
              requiredBoolean="Yes"
            }
            var categorySubElementAttributesChart=[{"attr":"Table_name","value":"DEPENDENT_VALUE"}]
            $('#Chart').find('.elementCheckboxes').find('input[type=checkbox]').each(function(){
              var attrDict={};
              attrDict['attr']=$(this).attr("name")
              if($(this)[0].checked==true){
                attrDict['value']="Yes"
              }
              else
              {attrDict['value']="No"}
              attrDict['html_attributes']={"data-parent_group_no":"g2"}
              categorySubElementAttributesChart.push(attrDict)
            })
            var categorySubElementAttributesAlert=[{"attr":"Table_name","value":"DEPENDENT_VALUE"}]
            $('#Alert').find('.elementCheckboxes').find('input[type=checkbox]').each(function(){
              var attrDict={};
              attrDict['attr']=$(this).attr("name")
              if($(this)[0].checked==true){
                attrDict['value']="Yes"
              }
              else
              {
                attrDict['value']="No"
              }
              attrDict['html_attributes']={"data-parent_group_no":"g2"}
              categorySubElementAttributesAlert.push(attrDict)
            })
            var categorySubElementAttributesFilter=[{"attr":"Table_name","value":"DEPENDENT_VALUE"}]
            $('#Filter').find('.elementCheckboxes').find('input[type=checkbox]').each(function(){
              var attrDict={};
              attrDict['attr']=$(this).attr("name")
              if($(this)[0].checked==true){
                attrDict['value']="Yes"
                let table_name = $("#custom_field_daterange_selection option:selected").attr('data-tablename')
                let date_field_selected = $("#custom_field_daterange_selection option:selected").val()

                if(date_field_selected && table_name){
                  attrDict['date_range_field'] =date_field_selected
                  attrDict['date_range_table']=table_name
                }

              }
              else
              {attrDict['value']="No"}
              attrDict['html_attributes']={"data-parent_group_no":"g2"}

              categorySubElementAttributesFilter.push(attrDict)
            })



            // Action
            var categorySubElementAttributesAction=[{"attr":"Table_name","value":"DEPENDENT_VALUE"}]

              if($("#ListView_Action").find("#selectAll_listAction").checked == true){
                categorySubElementAttributesAction.push({"attr":"SelectAll_Action","value":"Yes","html_attributes":{"data-parent_group_no":"g2"}})
              }else{
                categorySubElementAttributesAction.push({"attr":"SelectAll_Action","value":"No","html_attributes":{"data-parent_group_no":"g2"}})
              }



            $('#ListView_Action').find('.elementCheckboxes').find('input[type=checkbox]').each(function(){
              var attrDict={};
              if($(this).attr("name") != "Perm Delete Record" && $(this).attr("name") != "Temp Delete Record"){
                attrDict['attr']=$(this).attr("name")
                if($(this)[0].checked==true){
                  attrDict['value']="Yes"
                  if($(this).attr("name") == "Delete Record"){
                    temp = {}
                    if($('.listview_actionSubElements').find('input[type=checkbox]').eq(2).is(":checked")){
                      temp["per_delete"] = "Yes"
                    }else{
                      temp["per_delete"] = "No"
                    }
                    if($('.listview_actionSubElements').find('input[type=checkbox]').eq(3).is(":checked")){
                      temp["temp_delete"] = "Yes"
                    }else{
                      temp["temp_delete"] = "No"
                    }
                    attrDict["delete_type"] = temp
                  }
                }
                else
                {attrDict['value']="No"}
                attrDict['html_attributes']={"data-parent_group_no":"g2"}
                categorySubElementAttributesAction.push(attrDict)
              }
            })

            let JSAttributes = $('.subCategory[value="JS Attributes"]').attr('data-config');

            var subElementDict=[
              {"Category_sub_element_name":"Data_table","Required":requiredBoolean,"Category_sub_element_attributes":categorySubElementAttributesDT},
              {"Category_sub_element_name":"Plot_chart","Category_sub_element_attributes":categorySubElementAttributesChart},
              {"Category_sub_element_name":"Set_alert","Category_sub_element_attributes":categorySubElementAttributesAlert},
              {"Category_sub_element_name":"Filter","Category_sub_element_attributes":categorySubElementAttributesFilter},
              {"Category_sub_element_name":"Action","Category_sub_element_attributes":categorySubElementAttributesAction}
            ]
            var demoCreate = []
            demoCreateView = $('#selectMultiConfig').val();
            var sentVal = ['null']

            if (demoCreateView == 'Default' || demoCreateView == 'Template') {
              sentVal.splice(0,1);
              sentVal.push('null');
            } else if (demoCreateView) {
              sentVal.splice(0,1);
              sentVal.push(demoCreateView);
            }
            var linkedValues = extractTheHyperLinkValues1()
            var user_name = {}
            if ($('#selectTablePC').attr('multiple') == 'multiple') {
              tableName1=$('#selectTablePC').val();
              for(let i = 0; i < tableName1.length; i++) {
                user_name[tableName1[i]] = tableName1[i]
              }
            }

            var extract_data_filename = $("#fn_extact_data").val()
            var listViewStylingValues = extractListViewButtons()
            MultipleTableMapping = {}
            if ($("#map-save-data").attr('table-map-data') != "") {
              MultipleTableMapping = JSON.parse($("#map-save-data").attr('table-map-data'))
            }

        }else if($('#selectTemplate').val() == "Multi Dropdown View"){
          var checkFields=$('#Datatable_mul').find('.elementCheckboxes').find('input[type=checkbox]').length
          var dropFieldListFinal=$('#dropFields_mul').val()
          var dropFieldListFinal2=$('#dropFieldsLVUpload_mul').val()
          var extract_data_filename = $("#fn_extact_data_mul").val()
          var groupFieldListFinal=$('#groupFields_mul').val()
          var groupFieldListRestrictView=$('#groupFields_restrictview_mul').val()
          var restrictFieldListFinal=$('#restrictFields_mul').val()
          var editFieldsNS = $('#editFieldsNS_mul').val()
          if($("#saveBasicfilter_mul").attr('data-basicfilter-config')){
            basicfilter_config = JSON.parse($("#saveBasicfilter_mul").attr('data-basicfilter-config'));
          }
          var customColumn = $('#customColumn_mul').val();
          var formatColumn = $('#formatColumn_mul').val();

          var listview_custom_messages = {}
          if($("#toggleCustomListViewMessages_multidropdown").is(":checked")){

            $("#customListViewMessagesDiv_multidropdown").find(".c_msg_input").each(function() {
              listview_custom_messages[$(this).attr("name")] ={ "message": $(this).val(), "icon": $(this).closest(".nav-item").find(".msg_icon").attr('class')}
            })
          }


          $('#Datatable_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function(){
          var attrDict={};
          attrDict['attr']=$(this).attr("name")
          if($(this)[0].checked==true){
            attrDict['value']="Yes"
          }
          else
          {attrDict['value']="No"
          dataTableFieldsUnchecked.push($(this))

            }
              attrDict['html_attributes']={"data-parent_group_no":"g2"}
              categorySubElementAttributesDT.push(attrDict)
            })
            if(checkFields==dataTableFieldsUnchecked.length){
              requiredBoolean="No"
            }
            else{
              requiredBoolean="Yes"
            }
            var categorySubElementAttributesChart=[{"attr":"Table_name","value":"DEPENDENT_VALUE"}]
            $('#Chart_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function(){
              var attrDict={};
              attrDict['attr']=$(this).attr("name")
              if($(this)[0].checked==true){
                attrDict['value']="Yes"
              }
              else
              {attrDict['value']="No"}
              attrDict['html_attributes']={"data-parent_group_no":"g2"}
              categorySubElementAttributesChart.push(attrDict)
            })
            var categorySubElementAttributesAlert=[{"attr":"Table_name","value":"DEPENDENT_VALUE"}]
            $('#Alert_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function(){
              var attrDict={};
              attrDict['attr']=$(this).attr("name")
              if($(this)[0].checked==true){
                attrDict['value']="Yes"
              }
              else
              {
                attrDict['value']="No"
              }
              attrDict['html_attributes']={"data-parent_group_no":"g2"}
              categorySubElementAttributesAlert.push(attrDict)
            })
            var categorySubElementAttributesFilter=[{"attr":"Table_name","value":"DEPENDENT_VALUE"}]
            $('#Filter_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function(){
              var attrDict={};
              attrDict['attr']=$(this).attr("name")
              if($(this)[0].checked==true){
                attrDict['value']="Yes"
                let table_name = $("#custom_field_daterange_selection option:selected").attr('data-tablename')
                let date_field_selected = $("#custom_field_daterange_selection option:selected").val()

                if(date_field_selected && table_name){
                  attrDict['date_range_field'] =date_field_selected
                  attrDict['date_range_table']=table_name
                }

              }
              else
              {attrDict['value']="No"}
              attrDict['html_attributes']={"data-parent_group_no":"g2"}

              categorySubElementAttributesFilter.push(attrDict)
            })



            // Action
            var categorySubElementAttributesAction=[{"attr":"Table_name","value":"DEPENDENT_VALUE"}]
            if($("#ListView_Action_mul").find("#selectAll_listAction_mul").checked == true){
              categorySubElementAttributesAction.push({"attr":"SelectAll_Action","value":"Yes","html_attributes":{"data-parent_group_no":"g2"}})
            }else{
              categorySubElementAttributesAction.push({"attr":"SelectAll_Action","value":"No","html_attributes":{"data-parent_group_no":"g2"}})
            }

            $('#ListView_Action_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function(){
              var attrDict={};
              if($(this).attr("name") != "Perm Delete Record" && $(this).attr("name") != "Temp Delete Record"){
                attrDict['attr']=$(this).attr("name")
                if($(this)[0].checked==true){
                  attrDict['value']="Yes"
                  if($(this).attr("name") == "Delete Record"){
                    temp = {}
                    if($('#ListView_Action_mul').find('.listview_actionSubElements').find('input[type=checkbox]').eq(2).is(":checked")){
                      temp["per_delete"] = "Yes"
                    }else{
                      temp["per_delete"] = "No"
                    }
                    if($('#ListView_Action_mul').find('.listview_actionSubElements').find('input[type=checkbox]').eq(3).is(":checked")){
                      temp["temp_delete"] = "Yes"
                    }else{
                      temp["temp_delete"] = "No"
                    }
                    attrDict["delete_type"] = temp
                  }
                }
                else
                {attrDict['value']="No"}
                attrDict['html_attributes']={"data-parent_group_no":"g2"}
                categorySubElementAttributesAction.push(attrDict)
              }
            })

            let JSAttributes = $('.subCategory[value="JS Attributes"]').attr('data-config');

            var subElementDict=[
              {"Category_sub_element_name":"Data_table","Required":requiredBoolean,"Category_sub_element_attributes":categorySubElementAttributesDT},
              {"Category_sub_element_name":"Plot_chart","Category_sub_element_attributes":categorySubElementAttributesChart},
              {"Category_sub_element_name":"Set_alert","Category_sub_element_attributes":categorySubElementAttributesAlert},
              {"Category_sub_element_name":"Filter","Category_sub_element_attributes":categorySubElementAttributesFilter},
              {"Category_sub_element_name":"Action","Category_sub_element_attributes":categorySubElementAttributesAction}
            ]
            var demoCreate = []
            demoCreateView = $('#selectMultiConfig_mul').val();
            var sentVal = ['null']

            if (demoCreateView == 'Default' || demoCreateView == 'Template') {
              sentVal.splice(0,1);
              sentVal.push('null');
            } else if (demoCreateView) {
              sentVal.splice(0,1);
              sentVal.push(demoCreateView);
            }
            var linkedValues = extractTheHyperLinkValues1()
            var user_name = {}
            if ($('#selectTablePC').attr('multiple') == 'multiple') {
              tableName1=$('#selectTablePC').val();
              for(let i = 0; i < tableName1.length; i++) {
                user_name[tableName1[i]] = tableName1[i]
              }
            }

            var listViewStylingValues = extractListViewButtons()

            MultipleTableMapping = {}
            if ($("#map-save-data_mul").attr('table-map-data') != "") {
              MultipleTableMapping = JSON.parse($("#map-save-data_mul").attr('table-map-data'))
            }
        }

        if($("#dont_show_detail_btn").is(":checked")){
          dont_show_detail_btn =true
        }else{
          dont_show_detail_btn  =false
        }

        if($("#show_report_latest_checker").is(":checked")){
          reportingShowLatest =true
        }else{
          reportingShowLatest  =false
        }

        var trackingColumn = $('#trackingColumn').val();
        var uniqueColumn = $('#uniqueColumn').val()
        var formatTab = $('#formatTab').val();

        var create_view_selection_checker
        var formatter_checker
        var formatter_config

        if($(".fformatTable tbody").children().length > 0){
            formatter_checker = true
            formatter_config = format_config_d
        }else{
            formatter_checker = false
            formatter_config = {}
        }

        var listViewCustomVal = $('.customValbtnDev').attr('data-data_config')
        if (listViewCustomVal == '' || listViewCustomVal == '{}' || listViewCustomVal == undefined){
          listViewCustomVal = {}
        }else{
          listViewCustomVal = JSON.parse(listViewCustomVal)
          listViewCustomVal = listViewCustomVal["reload_custom_validation"]
        }

        var allowListViewCustV = false
        if($("#allow_listv_custV").is(":checked")){
          allowListViewCustV = true
        }

        var allowListViewRTF = false
        if($("#allow_listv_rtf").is(":checked")){
          allowListViewRTF = true
        }

        var allowEditColAlign = false
        var allowEditColConfig = []
        if($("#toggleeditcolAlign").is(":checked")){
          allowEditColAlign = true

          $(".labelrowAlign").find('.newrowpageAlign').find('.row').each(function (){
              temp_dict_align = {}
              $(this).find('select').each(function(){
                  temp_dict_align[$(this).attr('name')] = $(this).val()
              })
              allowEditColConfig.push(temp_dict_align)
          })
        }

        var viewDetailsColumnAlignmentConfig = {};
        if ($('#saveApprovalTColumnAlignmentButton').attr('data-config')) {
          viewDetailsColumnAlignmentConfig = JSON.parse($('#saveApprovalTColumnAlignmentButton').attr('data-config'));
        }

        if($("#create_view_display_selection").parent().css('display') == "block"){
          if($("#create_view_display_selection").is(":checked")){
            create_view_selection_checker= true
          }else{
            create_view_selection_checker =false
          }
        }

        $("#create_view_display_selection").on('change',function(){
          if($("#create_view_display_selection").parent().css('display') == "block"){
            previewFunction()
          }
        })
        if ($('#selectTemplate').val() == 'Multi Dropdown View'){
          var formattingColumns = extractFormatting_mul()
        }else{
          var formattingColumns = extractFormatting()
        }
        var listViewEmbededComputation = extractlistViewsaveEmbededComputation()
        var listViewEmbededComputationMultiple = extractlistViewsaveEmbededComputationMultiple()
        var titleName =  extractTitleName()
        var titleName_mul = extractTitleName_mul()
        var titleNameMultiple = extractTitleNameMultiple()

                        // table header data save xyz
        var tableHeaderDataFinal = $('#tableHeaderBtn').attr('data-data')
        if(tableHeaderDataFinal != undefined){
          tableHeaderDataFinal = JSON.parse(tableHeaderDataFinal)
        }else{
          tableHeaderDataFinal = {}
        }
        if($('#selectTemplate').val()=='Multiple table'){
          var PdfActionColumn = null
        }else if (($('#selectTemplate').val()=='Multi Dropdown View')){
          var PdfActionColumn = extractconfigurePdfActionColumn()
        }else{
          var PdfActionColumn = extractconfigurePdfActionColumn()
        }

        if ($('#selectTemplate').val()=='Multi Dropdown View'){
          var titleRowFormatting = extractTitleRowFormatting_mul()
          var configureActionColumn = extractconfigureActionColumn_mul()
          var ButtonsGrouping = extractButtonsGrouping_mul()
        }else{
          var titleRowFormatting = extractTitleRowFormatting()
          var configureActionColumn = extractconfigureActionColumn()
          var ButtonsGrouping = extractButtonsGrouping()
        }
        if($('#selectTemplate').val()=='Multiple table'){
          var tableButtonConfig = {'tableOrderBtn':$('#table_order_btn_listview').prop('checked'),'addTableBtn':$('#add_table_btn_listview').prop('checked')}
          var actionButtonConfig = extractActionButtonsMultiple()
          var actionButtonsGroupTogether = $('#action_btn_config_group_together').prop('checked')
          var columnHeadersHide = extractColumnHeaderHideMultiple()
          var quickFiltersOptions= extractQuickFiltersColumn()
          var GroupByConfigs = extractGroupByConfigs()
        }else if ($('#selectTemplate').val()=='Multi Dropdown View'){
          var actionButtonConfig = extractActionButtons_mul()
          var actionButtonsGroupTogether = $('#action_btn_config_group_together_mul').prop('checked')
          var columnHeadersHide = extractColumnHeaderHide_mul()
          var quickFiltersOptions = extractQuickFiltersColumn_mul()
          var GroupByConfigs = extractGroupByConfigs()
        }else{
          var tableButtonConfig = null
          var actionButtonConfig = extractActionButtons()
          var actionButtonsGroupTogether = $('#action_btn_config_group_together').prop('checked')
          var columnHeadersHide = extractColumnHeaderHide()
          var quickFiltersOptions= extractQuickFiltersColumn()
          var GroupByConfigs = extractGroupByConfigs()
        }
        if ($('#selectTemplate').val()=='Card View'){
          var cardViewConfig =  extractCardViewConfig()
        }else{
          var cardViewConfig = null
        }
        if ($('#selectTemplate').val()=='Reporting View' || $('#selectTemplate').val()=='Approval Template'){
          var card_header_configs =extract_card_header_configs()
        }else{
          var card_header_configs = null
        }
        let list = []
        list = [
          '1', '5', '10', '25', '50', '75', '100', 'All'
        ]
        if(type == ""){
          if(!([null,undefined].includes($("#pagination").attr("data-list")))){
            if(($("#pagination").attr("data-list")).includes('[')){
              list = JSON.parse($("#pagination").attr("data-list"));
            }
          }
        } else {
          if(!([null,undefined].includes($("#pagination_mul").attr("data-list")))){
            if(($("#pagination_mul").attr("data-list")).includes('[')){
              list = JSON.parse($("#pagination_mul").attr("data-list"));
            }
          }
        }

        var appJSONColsReorderTable = $("#appJSONTableReorder").val()

        var appJSONColsReorderDict = {}

        var JSONColumnOrderList = []
        $("#appJSONColsReorder").children().each(function() {
          JSONColumnOrderList.push($(this).attr("name"))
        })
        JSONColumnOrderList.forEach((field, index) => {
          appJSONColsReorderDict[index+1] = field
        });


        var reorderApprovalLevelConfigDict = {}

        var reorderAppLvlConfigList = []
        $("#reorderApprovalLevelConfigList").children().each(function() {
          reorderAppLvlConfigList.push($(this).attr("name"))
        })
        reorderAppLvlConfigList.forEach((field, index) => {
          reorderApprovalLevelConfigDict[index+1] = field
        });


        var reorderApprovalAuditLogDict = {}

        var reorderAppAuditLogList = []
        $("#reorderApprovalAuditLogList").children().each(function() {
          reorderAppAuditLogList.push($(this).attr("name"))
        })
        reorderAppAuditLogList.forEach((field, index) => {
          reorderApprovalAuditLogDict[index+1] = field
        });
        var listViewColumnRenamed = extractListViewColumnRename();
        var editListviewModalConfigs = extractEditListViewConfigs();
        var approversDispFieldsListView = ""
        var approversDispFormatListView = ""
        approversDispFieldsListView = $("#allowUsersToSetApproversDispFieldsListView").val().length != 0 ? $("#allowUsersToSetApproversDispFieldsListView").val() : ["username", "first_name", "last_name"]
        approversDispFormatListView = $("#allowUsersToSetApproversDispFormatListView").val() || 'space_sep'
        var finalTabBodyContent={"Category_attributes":
        {"Mandatory":
        {"pagination":list,"Table_name":tableName,"approversDispFieldsListView":approversDispFieldsListView,"approversDispFormatListView":approversDispFormatListView,'user_table_name':user_name,"DroppedFields":dropFieldListFinal,"DroppedFieldsLVUpload":dropFieldListFinal2,"Hyperlinked":linkedValues,"listViewStylingValues":listViewStylingValues,'listViewColumnRenamed':listViewColumnRenamed,"formattingColumns":formattingColumns, "listViewCustomVal":listViewCustomVal, "allowListViewCustV":allowListViewCustV,"allowListViewRTF":allowListViewRTF, "allowEditColAlign":allowEditColAlign, "allowEditColConfig":allowEditColConfig, viewDetailsColumnAlignmentConfig: viewDetailsColumnAlignmentConfig,"listViewEmbededComputation":listViewEmbededComputation,"listViewEmbededComputationMultiple":listViewEmbededComputationMultiple,'titleName':titleName,'titleName_mul':titleName_mul,'titleNameMultiple':titleNameMultiple,"appJSONColsReorderDict": appJSONColsReorderDict, "appJSONColsReorderTable":appJSONColsReorderTable,"reorderApprovalLevelConfigDict":reorderApprovalLevelConfigDict, "reorderApprovalAuditLogDict":reorderApprovalAuditLogDict,
        'titleRowFormatting':titleRowFormatting,'tableButtonConfig':tableButtonConfig,'configActionButtons':actionButtonConfig,'actionButtonsGroupTogether':actionButtonsGroupTogether,'columnHeadersHide':columnHeadersHide,'ButtonsGrouping':ButtonsGrouping,'configureActionColumn':configureActionColumn,'quickFiltersOptions':quickFiltersOptions,'cardViewConfig':cardViewConfig,'card_header_configs':card_header_configs,'pdfActionColumn':PdfActionColumn,'GroupByConfigs':GroupByConfigs,'editListviewModalConfigs':editListviewModalConfigs,
        "RestrictFields":restrictFieldListFinal,"GroupsField":groupFieldListFinal,"mention_usergroups":mention_usergroups,"editFieldsNS":editFieldsNS,"appReferFields":appReferFields,"appreferTable":appreferTable,"GroupsFieldRestrictView":groupFieldListRestrictView, "MultipleTableMapping": MultipleTableMapping,"JSAttributes":JSAttributes,"appJSONTable":appJSONTable,"appJSONEditTable":appJSONEditTable,"appJSONEditCols":appJSONEditCols,"appJSONCols":appJSONCols,
        "listview_custom_messages":listview_custom_messages,"dont_show_detail_btn": dont_show_detail_btn,
        "editedDisplayNamesMultipleTable": editedDisplayNamesMultipleTable,
        "reorderTableList":reorderTableList,
        "extract_data_filename": extract_data_filename,},
        "Optional":{"Template_choice":"list_view_template_1.html"},
        "Default":{"Template_choice":"list_view_template_1.html"}},
        "reportingView": {"reportingViewColumns":reportingViewColumns,'reportingViewColumns_datefields':reportingViewColumns_datefields,'reportingViewColumns_unique_indentfier':reportingViewColumns_unique_indentfier, "Template_choice":$('#selectTemplate').val(), 'uniqueColumn':uniqueColumn, 'trackingColumn':trackingColumn, 'reportingShowLatest':reportingShowLatest,'basicfilter_config':JSON.stringify(basicfilter_config)},
        "customView": customColumn,
        "customTemplateListView":$("#customTemplateListView").find('#customTemplateCheck').prop("checked"),
        "create_view_selection_checker":create_view_selection_checker,
        "formatter_checker":formatter_checker,
        "formatter_config":formatter_config,
        "table_header_data":tableHeaderDataFinal,
        "createViewName":sentVal,
        "charactersToBeEscaped": charactersToBeEscaped,
        "editAutoPopulatePrecedenceCheck": editAutoPopulatePrecedenceCheck,
        "editAutoPopulatePrecedenceOnScenariosCheck": editAutoPopulatePrecedenceOnScenariosCheck,
        "custom_alignment_transaction_data": custom_alignment_transaction_data,
        "display_sections_approval_wall":display_sections_approval_wall,
        "display_in_comments": display_in_comments,
        "search_in_comments": search_in_comments,
        "resolve_all_comments":resolve_all_comments,
        "reopen_all_comments": reopen_all_comments,
        "resolve_individual_comments":resolve_individual_comments,
        "reopen_individual_comments": reopen_individual_comments,
        "Category_sub_elements":subElementDict}
        return finalTabBodyContent;
      }
      $('.subElementCards').find('input[type=checkbox]').click(previewFunction)
      $('#dropFields').on('change',previewFunction)
      $('#dropFieldsLV_upload').on('change',previewFunction)
      $('#dropFields_mul').on('change',previewFunction)
      $('#dropFieldsLVUpload_mul').on('change',previewFunction)
      $('#groupFields').on('change',previewFunction)
      $('#restrictFields').on('change',previewFunction)
      $('#reportingViewColumns').on('change',previewFunction)
      $('#reportingViewColumns_datefield_latest_entries').on('change',previewFunction)
      $('#reportingViewColumns_unique_indentfier_selector').on('change',previewFunction)
      $("#show_report_latest_checker").on('change',previewFunction)
      $("#dont_show_detail_btn").on('change',previewFunction)
      $('#uniqueColumn').on('change',previewFunction)
      $('#trackingColumn').on('change',previewFunction)
      $('#customColumn').on('change',previewFunction);
      $('#formatColumn').on('change',previewFunction);
      $('#formatTab').on('change',previewFunction);
      $('#selectTablePC').on("select2:select",function(){
        if ($('#selectTemplate').val() == 'List View With History') {
            $.ajax({
              url: window.location.pathname,

              data: {
                'operation': 'validationForHistoryView',
                'tablesForm':JSON.stringify([$('#selectTablePC').val()]),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                if (data['success'] != 'success') {
                  Swal.fire({icon: 'success',text: data['success']});
                  $('#selectTablePC').val('').trigger('change');
                }
                },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
          }
        modelName=$('#selectTablePC').val()
        if (modelName && modelName != '') {

          $('#formatColumn').empty()
          let check_action = ['Datatable', 'ListView_Action', 'Chart', 'Alert', 'Filter']
          let check_buttons = ['Data table', 'Action', 'Chart', 'Alert', 'Filter']
          $('.subElementCards').find('input[type=checkbox]').each(function(){
            if (!check_action.includes($(this).parent().parent().closest('.subCategories').attr('id'))){
              $(this)[0].checked=false;
            }
          })
          $('.subCategory').each(function () {
            $(this).css({ backgroundColor: '#565a5e' });
            $(this).css({ borderColor: '#565a5e' });
          })
          $('#subCategoryButtons').find('button').each(function(){
            if (!check_buttons.includes($(this).val())){
              $(this).next('span').find('.fa-check-circle').css('display','none');
            }
          })
          $('.labelrow_mul').empty()
          $('.default_mul_view').empty()
          multable_config = {}
          multable_config_comp = {}
          $('#Datatable').css('display','none')
          $('#Chart').css('display','none')
          $('#Alert').css('display','none')
          $('#Filter').css('display','none')
          $('#ListView_Action').css('display','none')
          $('#Custom').css('display','none');
          $('#customTemplateListView').css('display','none')
          $('#configuration_val_row_dev').empty()
          $('.customValbtnDev').attr('data-data_config','{}')
          $('.carousel').carousel(0);
          $("#allow_listv_custV").prop("checked",false);
          $("#allow_listv_rtf").prop("checked",false);
          $("#toggleeditcolAlign").prop("checked", false).trigger('change')
          $(".labelrowAlign").empty()
          $("#labelSelectionColAli").css("display", "none")
          $('#custom_validation_table_dev').empty()
          $('#custommValidationSelection_dev').val('').trigger('change')
          $('#custommValidationSelection_dev').empty()
          previewFunction()
          $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'dropFieldList',
              'tableName':modelName,
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              $('#dropFields').empty()
              $('#dropFieldsLV_upload').empty()
              $('#dropFields_mul').empty()
              $('#dropFieldsLVUpload_mul').empty()
              $('#groupFields').empty()
              $("#editFieldsNS").empty()
              $("#appFields_ref_cols").empty()
              $("#appFields_ref_table").val("").trigger("change")
              $('#groupFields_mul').empty()
              $('#groupFields_restrictview_mul').empty()
              $('#restrictFields').empty()
              $('#restrictFields_mul').empty()
              $('#editFieldsNS_mul').empty()
              $('#selectColumnForVDColAlignment').empty();
              verboseNameAlign = {}
              for (var i = 0; i < data.fieldList.length; i++) {
                    $('#dropFields').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                    $('#dropFieldsLV_upload').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                    $('#restrictFields').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                    $('#editFieldsNS').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                    verboseNameAlign[data.fieldNameList[i]] = data.fieldList[i]
                  }
              for (var i = 0; i < data.fieldList.length; i++) {
                $('#dropFields_mul').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                $('#dropFieldsLVUpload_mul').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                $('#restrictFields_mul').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                $('#editFieldsNS_mul').append(new Option(data.fieldList[i], data.fieldNameList[i]));
              }
              for (var i = 0; i < data.groupList.length; i++) {
                    $('#groupFields').append(new Option(data.groupList[i]["name"], data.groupList[i]["id"]));
                  }
              for (var i = 0; i < data.groupList.length; i++) {
                $('#groupFields_mul').append(new Option(data.groupList[i]["name"], data.groupList[i]["id"]));
                $('#groupFields_restrictview_mul').append(new Option(data.groupList[i]["name"], data.groupList[i]["id"]));
              }
              for (var i = 0; i < data.fieldList.length; i++) {
                $('#selectColumnForVDColAlignment').append(new Option(data.fieldList[i]["name"], data.fieldList[i]["id"]));
              }
              $('#reportingViewColumns').empty()
              $('#reportingViewColumns_datefield_latest_entries').empty();
              $('#reportingViewColumns_unique_indentfier_selector').empty();
              $('#uniqueColumn').empty()
              $('#customColumn').empty()
              $('#customColumn_mul').empty()
              $('#formatColumn').empty()
              $('#formatColumn_mul').empty()
              $('#formatTab').empty()
              $('#formatTab_mul').empty()
              $('#trackingColumn').empty()
              for (var i = 0; i < data.fieldList.length; i++) {
                    $('#reportingViewColumns').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                    if (['DateTimeField','DateField'].includes(data.fieldList_data_types[i])){
                      $('#reportingViewColumns_datefield_latest_entries').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                    }
                    $('#reportingViewColumns_unique_indentfier_selector').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                    $('#uniqueColumn').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                    $('#trackingColumn').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                    $('#customColumn').append(new Option(data.fieldList[i], data.fieldList[i]));
                    $('#customColumn_mul').append(new Option(data.fieldList[i], data.fieldList[i]));
                    $('#formatColumn').append(new Option(modelName+'-'+data.fieldList[i], modelName+'-'+data.fieldList[i]));
                    $('#formatColumn_mul').append(new Option(modelName+'-'+data.fieldList[i], modelName+'-'+data.fieldList[i]));
                  }
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }

          })
          if($("#selectTemplate").val() == "Multiple table"){
            $("#formatTab").empty()
            for(let i=0;i<modelName.length;i++){
              $('#formatTab').append(new Option(modelName[i], modelName[i]));
            }
          }
        }
      })

      $('#selectTablePC').on("change",function(){
        modelName = $('#selectTablePC').val()
        if($("#selectTemplate").val() == "Multiple table"){
            $("#formatTab").empty()
            for(let i=0;i<modelName.length;i++){
              $('#formatTab').append(new Option(modelName[i], modelName[i]));
            }
          }
      })

      $('#selectTemplate').on('change', function() {
        if($(this).val() == 'Default'){
          t_name = $('#selectTablePC').val()
            $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'dropFieldList',
              'tableName':t_name,
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              $('#formatColumn').empty()
              $('#formatColumn_mul').empty()
              for (var i = 0; i < data.fieldNameList.length; i++) {
                $('#formatColumn').append(new Option(t_name+'-'+data.fieldList[i], t_name+'-'+data.fieldNameList[i]));
                $('#formatColumn_mul').append(new Option(t_name+'-'+data.fieldList[i], t_name+'-'+data.fieldNameList[i]));
              }


                  $.ajax({
                  url: window.location.pathname,
                  data: {
                    'element_id': f_element_id,
                    'operation': 'list_view_config_load'
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {

                    if(Object.keys(data).length > 0){
                        $("#pagination").attr("data-list",JSON.stringify(data['pagination']));
                        if ("formatter_config" in  data){
                        let col_list = []
                        let val_list = {}
                        $("#formatterTable").empty()
                        for(let [key,value] of Object.entries(data.formatter_config) ){

                          val_list[key] = value
                          value = JSON.stringify(value)
                          col_list.push(key)
                          $("#formatterTable").append(
                                          `<tr>
                                            <td style="text-align: center;" data-col_id="">${key.split("-")[0]}</td>
                                            <td style="text-align: center;" data-col_id="">${key.split("-")[1]}</td>
                                            <td style="text-align: center;">
                                              <i class="far fa-edit"" onclick="showFormatter.call(this)" style="color:var(--primary-color);cursor: pointer;" data-col_id="${key.split("-")[1]}" data-table_name = "${key.split('-')[0]}" data-title="Add formatter" data-col_config='${value}'></i>
                                            </td>
                                          </tr>`
                                        );
                        }
                        $("#formatColumn").val(col_list).trigger('change')
                      }

                      let data_list = $("#formatColumn").val()
                      $("#formatterTable").empty()
                      for(let i=0;i<data_list.length;i++){
                        $("#formatterTable").append(
                                      `<tr>
                                        <td style="text-align: center;" data-col_id="">${data_list[i].split("-")[0]}</td>
                                        <td style="text-align: center;" data-col_id="">${data_list[i].split("-")[1]}</td>
                                        <td style="text-align: center;">
                                          <i class="far fa-edit"" onclick="showFormatter.call(this)" style="color:var(--primary-color);cursor: pointer;" data-col_id="${data_list[i].split("-")[1]}" data-col_config='${JSON.stringify(format_config_d[data_list[i]])}' data-table_name = "${data_list[i].split("-")[0]}" data-title="Add formatter"></i>
                                        </td>
                                      </tr>`
                                    );
                      }

                      let key_list = Object.keys(format_config_d)
                      let difference = key_list.filter(x => !data_list.includes(x));

                    for(let i=0;i<difference.length;i++){
                      delete format_config_d[difference[i]]
                    }
                  }
                  },
                  error: function () {
                          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                        }
                })
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
          })
      }
      })

// ListView on change of selectTablePC
$(document).find("#selectTablePC").on("change", function(){

  if ($('#selectTemplate').val() != "Multiple table") {
    basicfilter_conditional_table()
  } else {
    basicfilter_conditional_table_mul()
  }

  date_range_filter()
  $("#formatterTable").empty()
  $("#tableContainerEdit").empty();
  $("#configFormat").attr("data-config_formatter","")
  $('#configuration_val_row_dev').empty()
  $('.customValbtnDev').attr('data-data_config','{}')
  $('.carousel').carousel(0);
  $('#custom_validation_table_dev').empty()
  $('#custommValidationSelection_dev').val('').trigger('change')
  $('#custommValidationSelection_dev').empty();
  $("#allow_listv_custV").prop("checked",false);
  $("#allow_listv_rtf").prop("checked",false);
  $("#toggleeditcolAlign").prop("checked", false).trigger('change')
  $("#labelSelectionColAli").css("display", "none")
  $(".labelrowAlign").empty()
})
function date_range_filter(){
    if($("#selectTablePC").val()){
      $.ajax({
        url: window.location.pathname,
        data: {
          'model_name': $("#selectTablePC").val(),
          'operation': 'get_datefields_list',
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          $("#custom_field_daterange_selection").empty()
          $("#custom_field_daterange_selection_mul").empty()
          if(Object.keys(data).length>0){
            for(let tablename in data){
                if(Object.keys(data[tablename]).length >0){
                  $("#custom_field_daterange_selection").append(`<option  value=''> --- </option`)
                  $("#custom_field_daterange_selection_mul").append(`<option  value=''> --- </option`)
                  for(let field in data[tablename]){
                  $("#custom_field_daterange_selection").append(`<option data-tablename='${tablename}' value='${field}'>${data[tablename][field]}</option`)
                  $("#custom_field_daterange_selection_mul").append(`<option data-tablename='${tablename}' value='${field}'>${data[tablename][field]}</option`)
                  }

                }
            }
          }

        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      });
    }
}

//code for formatter table
$("#formatColumn").on("change", function(){
  let data_list = $(this).val()
  $("#formatterTable").empty()

  for(let i=0;i<data_list.length;i++){
      $("#formatterTable").append(
                    `<tr>
                      <td style="text-align: center;" data-col_id="">${data_list[i].split("-")[0]}</td>
                      <td style="text-align: center;" data-col_id="">${data_list[i].split("-")[1]}</td>
                      <td style="text-align: center;">
                        <i class="far fa-edit"" onclick="showFormatter.call(this)" style="color:var(--primary-color);cursor: pointer;" data-col_id="${data_list[i].split("-")[1]}" data-col_config='${JSON.stringify(format_config_d[data_list[i]])}' data-table_name = "${data_list[i].split("-")[0]}" data-title="Add formatter"></i>
                      </td>
                    </tr>`
                  );
    }

    let key_list = Object.keys(format_config_d)
    let difference = key_list.filter(x => !data_list.includes(x));

  for(let i=0;i<difference.length;i++){
    delete format_config_d[difference[i]]
  }

  $("#configFormat").attr("data-config_formatter",JSON.stringify(format_config_d))

})

$("#formatColumn_mul").on("change", function(){
  let data_list = $(this).val()
  $("#formatterTable_mul").empty()

  for(let i=0;i<data_list.length;i++){
      $("#formatterTable_mul").append(
                    `<tr>
                      <td style="text-align: center;" data-col_id="">${data_list[i].split("-")[0]}</td>
                      <td style="text-align: center;" data-col_id="">${data_list[i].split("-")[1]}</td>
                      <td style="text-align: center;">
                        <i class="far fa-edit"" onclick="showFormatter.call(this)" style="color:var(--primary-color);cursor: pointer;" data-col_id="${data_list[i].split("-")[1]}" data-col_config='${JSON.stringify(format_config_d[data_list[i]])}' data-table_name = "${data_list[i].split("-")[0]}" data-title="Add formatter"></i>
                      </td>
                    </tr>`
                  );
    }

    let key_list = Object.keys(format_config_d)
    let difference = key_list.filter(x => !data_list.includes(x));

  for(let i=0;i<difference.length;i++){
    delete format_config_d[difference[i]]
  }

  $("#configFormat_mul").attr("data-config_formatter",JSON.stringify(format_config_d))

})

$("#formatTab").on("change", function(){
            if($("#selectTemplate").val() == "Multiple table"){
              modelName = $('#formatTab').val()
                  $.ajax({
                          url: window.location.pathname,

                          data: {
                            'operation': 'MultiFieldList',
                            'tableName':JSON.stringify(modelName),
                          },
                          type: "POST",
                          dataType: "json",
                          success: function (data) {
                                let backup_col_data = $('#formatColumn').val()
                                $('#formatColumn').empty()
                                for (var i = 0; i < data.fieldList.length; i++) {
                                    $('#formatColumn').append(new Option(data.fieldList_verbose_name[i], data.fieldList[i]));
                                  }

                                  $('#formatColumn').val(backup_col_data).trigger("change")

                            },
                          error: function () {
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          }
                  })
                }
              })

let single_config = {}
$('#formatOption').off('select2:select').on('select2:select',function(){

  if ($(this).val() == "number"){
    $("#Dformat").css("display","block")
    $("#SFormat").css("display","block")
    $("#syFormat").css("display","none")
    $("#DTFormat").css("display","none")
    $("#TimefFormat").css("display","none")
  }else if($(this).val() == "currency"){
    $("#Dformat").css("display","block")
    $("#syFormat").css("display","block")
    $("#SFormat").css("display","none")
    $("#DTFormat").css("display","none")
    $("#TimefFormat").css("display","none")
  }else if($(this).val() == "percentage" || $(this).val() == "scientific"){
    $("#Dformat").css("display","block")
    $("#SFormat").css("display","none")
    $("#syFormat").css("display","none")
    $("#DTFormat").css("display","none")
    $("#TimefFormat").css("display","none")
  }else if($(this).val() == "date"){
    $("#Dformat").css("display","none")
    $("#SFormat").css("display","none")
    $("#syFormat").css("display","none")
    $("#DTFormat").css("display","block")
    $("#TimefFormat").css("display","none")
  }else if($(this).val() == "time"){
    $("#Dformat").css("display","none")
    $("#SFormat").css("display","none")
    $("#syFormat").css("display","none")
    $("#DTFormat").css("display","none")
    $("#TimefFormat").css("display","block")
  }else if($(this).val() == ""){
    $("#Dformat").css("display","none")
    $("#SFormat").css("display","none")
    $("#syFormat").css("display","none")
    $("#DTFormat").css("display","none")
    $("#TimefFormat").css("display","none")
  }

})

let format_config_d = {}
function showFormatter(){

    let col_name = $(this).attr('data-col_id')
    let table_name = $(this).attr('data-table_name')

    $("#Dformat").css("display","none")
    $("#SFormat").css("display","none")
    $("#syFormat").css("display","none")
    $("#DTFormat").css("display","none")
    $("#TimefFormat").css("display","none")
    $('#fmodal').modal('show')

    $("#formatOption").val("").trigger("change")
    $("#sepFormat").prop('checked', false);
    $("#decimalFormat").val("").trigger("change")
    $("#formatDate").val("").trigger("change")
    $("#formatTime").val("").trigger("change")

    $("#symbolFormat").empty();
    $.ajax({
      url: window.location.pathname,
      data: {
        'operation': 'get_currency_list',
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        $("#symbolFormat").append(`<option value="" disabled selected> None </option>`)
        for(let i=0;i<data.country_list.length;i++){
          $("#symbolFormat").append(`<option value="${data.country_list[i]}"> ${data.country_list[i]} ${data.curr_list[i]} </option>`)
        }

      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    });


    setTimeout(()=>{
    $('#formatOption').val("").trigger("change")
    $('#formatOption').val("").trigger("select2:select")
    },200)


    let clicked_config = {}
    if ($(this).attr('data-col_config') != "undefined"){
      clicked_config = JSON.parse($(this).attr('data-col_config'))
      if (clicked_config["formatter"] == "number"){

        setTimeout(()=>{
            $('#formatOption').val("number").trigger("change")
            $('#formatOption').val("number").trigger("select2:select")
          },200)

          setTimeout(()=>{

            if (clicked_config["decimal"] != ""){
              $("#decimalFormat").val(clicked_config["decimal"]).trigger("change")
            }

            if(clicked_config["separator"]){
              $('#sepFormat').prop('checked', true);
            }

          },300)

      }

      if (clicked_config["formatter"] == "currency"){

        setTimeout(()=>{
            $('#formatOption').val("currency").trigger("change")
            $('#formatOption').val("currency").trigger("select2:select")
          },200)

          setTimeout(()=>{

            if (clicked_config["currency"]["decimal"] != ""){
              $("#decimalFormat").val(clicked_config["currency"]["decimal"]).trigger("change")
            }

            if(clicked_config["currency"]["symbol"]){
              $("#symbolFormat").val(clicked_config["currency"]["symbol"]).trigger("change")
            }

          },300)

      }

      if (clicked_config["formatter"] == "date"){

        setTimeout(()=>{
            $('#formatOption').val("date").trigger("change")
            $('#formatOption').val("date").trigger("select2:select")
          },200)

          setTimeout(()=>{

            if (clicked_config["date"] != ""){
              $("#formatDate").val(clicked_config["date"]).trigger("change")
            }

          },300)

      }

      if (clicked_config["formatter"] == "time"){

        setTimeout(()=>{
            $('#formatOption').val("time").trigger("change")
            $('#formatOption').val("time").trigger("select2:select")
          },200)

          setTimeout(()=>{

            if (clicked_config["time"] != ""){
              $("#formatTime").val(clicked_config["time"]).trigger("change")
            }

          },300)

      }

      if (clicked_config["formatter"] == "percentage"){

        setTimeout(()=>{
            $('#formatOption').val("percentage").trigger("change")
            $('#formatOption').val("percentage").trigger("select2:select")
          },200)

          setTimeout(()=>{

            if (clicked_config["percentage"]["decimal"] != ""){
              $("#decimalFormat").val(clicked_config["percentage"]["decimal"]).trigger("change")
            }

          },300)

      }

      if (clicked_config["formatter"] == "scientific"){

        setTimeout(()=>{
            $('#formatOption').val("scientific").trigger("change")
            $('#formatOption').val("scientific").trigger("select2:select")
          },200)

          setTimeout(()=>{

            if (clicked_config["scientific"]["decimal"] != ""){
              $("#decimalFormat").val(clicked_config["scientific"]["decimal"]).trigger("change")
            }

          },300)

      }
    }


    $('#btn_formatSave').off('click').on("click", function(){

    let decimal = ""
    let currency = {}
    let scientific = {}
    let percentage = {}
    let dDate = ""
    let dTime = ""

    if($("#formatOption").val() == "scientific" || $("#formatOption").val() == "percentage" || $("#formatOption").val() == "currency" || $("#formatOption").val() == "date" || $("#formatOption").val() == "time"){
      decimal = null
    }else{
      decimal = $("#decimalFormat").val()
        if (decimal == ""){
          decimal = null
        }
    }

    if($("#formatOption").val() == "currency"){

      currency["decimal"] = $("#decimalFormat").val()
      currency["symbol"] = $("#symbolFormat").val()

    }else{
      currency = null
    }

    if($("#formatOption").val() == "scientific"){

      scientific["decimal"] = $("#decimalFormat").val()

    }else{
      scientific = null
    }

    if($("#formatOption").val() == "percentage"){

      percentage["decimal"] = $("#decimalFormat").val()

    }else{
      percentage = null
    }

    if($("#formatOption").val() == "date"){

      dDate = $("#formatDate").val()

    }else{
      dDate = null
    }

    if($("#formatOption").val() == "time"){

      dTime = $("#formatTime").val()

    }else{
      dTime = null
    }

      format_config_d[table_name+'-'+col_name] = {
            "formatter": $("#formatOption").val(),
            "decimal": decimal,
            "separator": $("#sepFormat").is(":checked"),
            "currency": currency,
            "scientific":scientific,
            "percentage":percentage,
            "date":dDate,
            "time":dTime,
            "table_name":table_name,

          }

    })
}


$('#fmodal').on('hidden.bs.modal', function(){

  $("#configFormat").attr("data-config_formatter",JSON.stringify(format_config_d))

})


//code for formatter table ends

      function previewFunction(){
        tableName=$('#selectTablePC').val();
        templateName=$('#selectTemplate').val();
        finalTabBodyContent=finalJsonConfig()

        if ($('#selectTablePC').attr('multiple') != 'multiple') {
              let old_config = {}
              let edit_mode = false
              if($('#selectTemplate').val() != "Multi Dropdown View"){
                string=`<div class="card col-12" style="margin-bottom:0rem;">
                        <div class="card-body" style="padding-bottom:0.3rem;">
                          <div id="list_view_tab_content">`
              }else if($('#selectTemplate').val() == "Multi Dropdown View"){
              string=`<div class="card col-12" style="margin-bottom:0rem;">
                        <div class="card-body" style="padding-bottom:0.3rem;">
                          <div id="list_view_tab_content_mul">`
              }

              if(finalTabBodyContent["Category_sub_elements"]){
                string+=`<div>`

                for(j in finalTabBodyContent["Category_sub_elements"]){
                  var sub_element=finalTabBodyContent["Category_sub_elements"][j];

                  if(sub_element.Category_sub_element_name == "Data_table" && sub_element.Required == "Yes"){
                    edit_mode = true
                    string+=`<table id="example1" class="display compact" style="width:100%;" data-parent_group_no="g3">
                              <thead>
                                <tr>
                                </tr>
                              </thead>
                              <tbody>
                              </tbody>
                            </table>`

                    for(i in sub_element.Category_sub_element_attributes){
                      sub_element_attr=sub_element.Category_sub_element_attributes[i]

                      if(sub_element_attr.attr == "Upload" && sub_element_attr.value == "Yes"){
                        string+=`<button id="uploadButton" type="button" data-toggle="tooltip" title="Upload file"
                        class="btn btn-primary btn-xs mx-2 rounded px-2 my-1" name="List_view__Data_table__Upload"`
                        for(let [html_attr,html_attr_value] of Object.entries(sub_element_attr.html_attributes) ){
                          string+=` ${html_attr}="${html_attr_value}"`
                        }
                        string+=`><i class="fa fa-upload"></i>
                      </button>`
                      }
                      else if(sub_element_attr.attr == "Multi_edit" && sub_element_attr.value == "Yes"){
                        string+=`<button type="button" data-toggle="tooltip" title="Edit multiple rows" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"
                        name="List_view__Data_table__Multi_edit" value="List_view__Data_table__Multi_edit_show_checkboxes"`
                        for(let [html_attr,html_attr_value] of Object.entries(sub_element_attr.html_attributes) ){
                          string+=` ${html_attr}="${html_attr_value}"`
                        }
                        string+=`>Multi edit</button>`
                      }
                      else if(sub_element_attr.attr == "Save template" && sub_element_attr.value == "Yes"){
                        string+=`<button id="saveTemplateButton" type="button" data-toggle="tooltip" title="Save template"
                        class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"`
                        for(let [html_attr,html_attr_value] of Object.entries(sub_element_attr.html_attributes) ){
                          string+=` ${html_attr}="${html_attr_value}"`
                        }
                        string+=`>Save template</button>`
                      }
                      else if(sub_element_attr.attr == "Expand" && sub_element_attr.value == "Yes"){
                        string+=`<button type="button" value="Expand" id="example1_expand" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"`
                        for(let [html_attr,html_attr_value] of Object.entries(sub_element_attr.html_attributes) ){
                          string+=` ${html_attr}="${html_attr_value}"`
                        }
                        string+=`>Expand</button>`
                      }
                      else if(sub_element_attr.attr == "Edit Mode" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Paste Tabular Data" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Delete all data" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Find and replace" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Freeze Panes" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Formatters" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Add Computed Fields" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Edit Preview Mode" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Extract Data" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                        $(".extract_data_cb").trigger("change");
                      }
                      else if(sub_element_attr.attr == "Bulk Update" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Conditional Delete" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }

                      else if(sub_element_attr.attr == "Delete Multiple(Permanent)" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Delete Multiple(Temporary)" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Approve all" && sub_element_attr.value == "Yes" && $('#selectTemplate').val() == "Approval Template"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Reject all" && sub_element_attr.value == "Yes" && $('#selectTemplate').val() == "Approval Template"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Approve Multiple" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }
                      else if(sub_element_attr.attr == "Reject Multiple" && sub_element_attr.value == "Yes"){
                        edit_mode = true
                        old_config[sub_element_attr.attr] = sub_element_attr.value
                      }

                      else{}
                    }
                  }
                  else if(sub_element.Category_sub_element_name == "Plot_chart"){
                    for(i in sub_element.Category_sub_element_attributes){
                      sub_element_attr=sub_element.Category_sub_element_attributes[i]
                      if(sub_element_attr.attr == "Plot_chart" && sub_element_attr.value == "Yes"){
                        string+=`<button type="button" value="Plot" id="plotCharts" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"
                        data-toggle="modal" data-target="#PlotElements"`
                        for(let [html_attr,html_attr_value] of Object.entries(sub_element_attr.html_attributes) ){
                          string+=` ${html_attr}="${html_attr_value}"`
                        }
                        string+=`><i class="fas fa-chart-pie"></i>&nbsp;&nbsp;Plot charts</button>`
                      }
                      else{}
                    }
                  }
                  else if(sub_element.Category_sub_element_name == "Set_alert"){
                    for(i in sub_element.Category_sub_element_attributes){
                      sub_element_attr=sub_element.Category_sub_element_attributes[i]
                      if(sub_element_attr.attr == "Set_alert" && sub_element_attr.value == "Yes"){
                        string+=`<button type="button" onclick="buttonEnabler()"
                        class="btn btn-primary btn-xs mx-2 rounded px-2 id_set_alert_button my-1"`
                        for(let [html_attr,html_attr_value] of Object.entries(sub_element_attr.html_attributes) ){
                          string+=` ${html_attr}="${html_attr_value}"`
                        }
                        string+=`>Set alert</button>`
                      }
                      else{}
                    }
                  }
                  else if(sub_element.Category_sub_element_name == "Filter"){
                    for(i in sub_element.Category_sub_element_attributes){
                      sub_element_attr=sub_element.Category_sub_element_attributes[i]
                      if(sub_element_attr.attr == "Filter" && sub_element_attr.value == "Yes"){
                        string+=`<button id="filter_button_list_view" type="button" data-toggle="tooltip" title="Filter"
                          class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"`
                          for(let [html_attr,html_attr_value] of Object.entries(sub_element_attr.html_attributes) ){
                          string+=` ${html_attr}="${html_attr_value}"`
                        }
                        string+=`>Filter</button>`
                      }
                      else{}
                    }
                  }
                  else{}
                }

              if($('#selectTemplate').val() != "Multi Dropdown View"){
               string+=`</div></div>
               <div id="structuring">
              <!--Filter card-->
                <div data-group_no="g1">
                </div>
              <!--Buttons-->
              <div class="row" data-group_no="g2"></div>
              <!--Datatable-->
              <div data-group_no="g3">
              </div></div></div></div>`
            }else if($('#selectTemplate').val() == "Multi Dropdown View"){
              string+=`</div></div>
               <div id="structuring_mul">
              <!--Filter card-->
                <div data-group_no="g1">
                </div>
              <!--Buttons-->
              <div class="row" data-group_no="g2"></div>
              <!--Datatable-->
              <div data-group_no="g3">
              </div></div></div></div>`
            }

              if($('#selectTemplate').val() != "Multi Dropdown View"){
                $('#previewCard').empty()
                $('#previewCard').append(string)
              }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                $('#previewCard_mul').empty()
                $('#previewCard_mul').append(string)
              }
              if(finalTabBodyContent.hasOwnProperty('create_view_selection_checker')){

                    if(finalTabBodyContent.create_view_selection_checker == false){
                      $('#structuring').find('div[data-group_no="g2"]').prepend(`<button id="create_view__toggler_{element_id}" type="button" title="Create View" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="" name="Create View"> <i class="fa fa-plus"></i> </button>`)
                    }
                  }

              if($('#selectTemplate').val() != "Multi Dropdown View"){
                group1=$('#structuring').find("[data-group_no='g1']")

                group2=$('#structuring').find("[data-group_no='g2']")

                group3=$('#structuring').find("[data-group_no='g3']")
              }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                group1=$('#structuring_mul').find("[data-group_no='g1']")

                group2=$('#structuring_mul').find("[data-group_no='g2']")

                group3=$('#structuring_mul').find("[data-group_no='g3']")
              }

              if($('#selectTemplate').val() != "Multi Dropdown View"){
                if($('#list_view_tab_content').find("[data-parent_group_no='g1']").length>0){
                  $('#list_view_tab_content').find("[data-parent_group_no='g1']").each(function(){
                  $(this).appendTo(group1)
                })
                }
              }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                if($('#list_view_tab_content_mul').find("[data-parent_group_no='g1']").length>0){
                  $('#list_view_tab_content_mul').find("[data-parent_group_no='g1']").each(function(){
                  $(this).appendTo(group1)
                })
                }
              }

              if($('#selectTemplate').val() != "Multi Dropdown View"){
                if($('#list_view_tab_content').find("[data-parent_group_no='g2']").length>0){
                  $('#list_view_tab_content').find("[data-parent_group_no='g2']").each(function(){
                  $(this).appendTo(group2)
                })
                }
              }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                if($('#list_view_tab_content_mul').find("[data-parent_group_no='g2']").length>0){
                  $('#list_view_tab_content_mul').find("[data-parent_group_no='g2']").each(function(){
                  $(this).appendTo(group2)
                })
                }
              }

              if(edit_mode)
              {
                if (Object.keys(old_config).length > 0){
                  if(old_config['Edit Mode'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button id="editListView{element_id}" type="button" title="Edit Mode List View" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1">Edit Mode:OFF</button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button id="editListView{element_id}" type="button" title="Edit Mode List View" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1">Edit Mode:OFF</button>`)
                    }
                  }
                  if(old_config['Paste Tabular Data'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(` <button id="tablegenerator_{element_id}" type="button" title="Paste tabular data" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Paste tabular data"> Paste tabular data </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(` <button id="tablegenerator_{element_id}" type="button" title="Paste tabular data" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Paste tabular data"> Paste tabular data </button>`)
                    }
                  }
                  if(old_config['Delete all data'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button id="listview_clearall_{element_id}" type="button" title="Delete all data" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Delete all data" onclick="listview_clearall_(element_id='{element_id}')"> Delete all data </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button id="listview_clearall_{element_id}" type="button" title="Delete all data" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Delete all data" onclick="listview_clearall_(element_id='{element_id}')"> Delete all data </button>`)
                    }
                  }
                  if(old_config['Find and replace'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#find_replace_modal" id="find_replace_{element_id}" type="button" title="Find and replace" class="findreplace btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Find and replace"> Find and replace </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#find_replace_modal" id="find_replace_{element_id}" type="button" title="Find and replace" class="findreplace btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Find and replace"> Find and replace </button>`)
                    }
                  }
                  if(old_config['Freeze Panes'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#freeze_pane_modal" id="freeze_pane_{element_id}" type="button" title="Freeze Panes" class="freezepane btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Freeze Panes"> Freeze Panes </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#freeze_pane_modal" id="freeze_pane_{element_id}" type="button" title="Freeze Panes" class="freezepane btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Freeze Panes"> Freeze Panes </button>`)
                    }
                  }
                  if(old_config['Formatters'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#formatter_modal" id="formatter_{element_id}" type="button" title="Formatters" class="freezepane btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Formatters"> Formatters </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#formatter_modal" id="formatter_{element_id}" type="button" title="Formatters" class="freezepane btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Formatters"> Formatters </button>`)
                    }
                  }
                  if(old_config['Add Computed Fields'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#add_comp_modal" id="add_comp_{element_id}" type="button" title="Add Computed Fields" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Add Computed Fields"> Add Computed Fields </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#add_comp_modal" id="add_comp_{element_id}" type="button" title="Add Computed Fields" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Add Computed Fields"> Add Computed Fields </button>`)
                    }
                  }
                  if(old_config['Edit Preview Mode'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#add_comp_modal" id="add_comp_{element_id}" type="button" title="Edit Preview Mode" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Edit Preview Mode"> Edit Preview Mode </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#add_comp_modal" id="add_comp_{element_id}" type="button" title="Edit Preview Mode" class="btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Edit Preview Mode"> Edit Preview Mode </button>`)
                    }
                  }
                  if(old_config['Extract Data'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#extract_data_modal" id="extract_data_{element_id}" type="button" title="Extract Data" class="extract_data btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Extract Data"> Extract Data </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#extract_data_modal" id="extract_data_{element_id}" type="button" title="Extract Data" class="extract_data btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Extract Data"> Extract Data </button>`)
                    }
                  }
                  if(old_config['Bulk Update'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#bulkupdate_data_modal" id="bulk_update_{element_id}" type="button" title="Bulk Update" class="bulk_update_data btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Bulk Update"> Bulk Update </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#bulkupdate_data_modal" id="bulk_update_{element_id}" type="button" title="Bulk Update" class="bulk_update_data btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Bulk Update"> Bulk Update </button>`)
                    }
                  }
                  if(old_config['Conditional Delete'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#conditional_delete_modal" id="conditional_delete_{element_id}" type="button" title="Conditional Delete" class="conditional_delete btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Conditional Delete"> Conditional Delete </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="#conditional_delete_modal" id="conditional_delete_{element_id}" type="button" title="Conditional Delete" class="conditional_delete btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Conditional Delete"> Conditional Delete </button>`)
                    }
                  }
                  if(old_config['Delete Multiple(Permanent)'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="" id="multiple_delete_perm_{element_id}" type="button" title="Delete Multiple(Permanent)" class="multiple_delete_perm btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Delete Multiple(Permanent)"> Delete Multiple(Permanent) </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="" id="multiple_delete_perm_{element_id}" type="button" title="Delete Multiple(Permanent)" class="multiple_delete_perm btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Delete Multiple(Permanent)"> Delete Multiple(Permanent) </button>`)
                    }
                  }
                  if(old_config['Delete Multiple(Temporary)'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="" id="multiple_delete_temp_{element_id}" type="button" title="Delete Multiple(Temporary)" class="multiple_delete_temp btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Delete Multiple(Temporary)"> Delete Multiple(Temporary) </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="" id="multiple_delete_temp_{element_id}" type="button" title="Delete Multiple(Temporary)" class="multiple_delete_temp btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Delete Multiple(Temporary)"> Delete Multiple(Temporary) </button>`)
                    }
                  }
                  if(old_config['Approve all'] == 'Yes' && $('#selectTemplate').val() == "Approval Template"){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" id="approve_all_ApprovalTemplate_{element_id}" type="button" title="Approve all" class="approve_all_ApprovalTemplate btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Approve all"> Approve all </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" id="approve_all_ApprovalTemplate_{element_id}" type="button" title="Approve all" class="approve_all_ApprovalTemplate btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Approve all"> Approve all </button>`)
                    }
                  }
                  if(old_config['Reject all'] == 'Yes' && $('#selectTemplate').val() == "Approval Template"){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" id="reject_all_ApprovalTemplate_{element_id}" type="button" title="Reject all" class="reject_all_ApprovalTemplate btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Reject all"> Reject all </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" id="reject_all_ApprovalTemplate_{element_id}" type="button" title="Reject all" class="reject_all_ApprovalTemplate btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Reject all"> Reject all </button>`)
                    }
                  }
                  if(old_config['Approve Multiple'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="" id="multiple_delete_temp_{element_id}" type="button" title="Approve Multiple" class="multiple_delete_temp btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Approve Multiple"> Approve Multiple </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="" id="multiple_delete_temp_{element_id}" type="button" title="Approve Multiple" class="multiple_delete_temp btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Approve Multiple"> Approve Multiple </button>`)
                    }
                  }
                  if(old_config['Reject Multiple'] == 'Yes'){
                    if($('#selectTemplate').val() != "Multi Dropdown View"){
                      $('#structuring').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="" id="multiple_delete_temp_{element_id}" type="button" title="Reject Multiple" class="multiple_delete_temp btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Reject Multiple"> Reject Multiple </button>`)
                    }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                      $('#structuring_mul').find('div[data-group_no="g2"]').append(`<button data-toggle="modal" data-target="" id="multiple_delete_temp_{element_id}" type="button" title="Reject Multiple" class="multiple_delete_temp btn btn-primary btn-xs mx-2 rounded px-2 my-1"  data-elementID="{element_id}" name="Reject Multiple"> Reject Multiple </button>`)
                    }
                  }
                }}

              if($('#selectTemplate').val() != "Multi Dropdown View"){
                  if($('#list_view_tab_content').find("[data-parent_group_no='g3']").length>0){
                  $('#list_view_tab_content').find("[data-parent_group_no='g3']").each(function(){
                  $(this).appendTo(group3)
                })
                }
              }else if($('#selectTemplate').val() == "Multi Dropdown View"){
                if($('#list_view_tab_content_mul').find("[data-parent_group_no='g3']").length>0){
                  $('#list_view_tab_content_mul').find("[data-parent_group_no='g3']").each(function(){
                  $(this).appendTo(group3)
                })
                }
              }

              ftd = []
              $('#dropFields').find('option').each(function(){
                  ftd.push($(this).text().trim())
              })

              dropf = $('#dropFields').val()
              for(let i=0;i<dropf.length;i++){

                  indx = ftd.indexOf(dropf[i])
                  ftd.splice(indx,1)
              }

              list_view_column_names = []
              for(let  i=0;i<ftd.length;i++){
                  list_view_column_names.push({'data':ftd[i]})
              }
              var dataContainingColumnNames = list_view_column_names
              dataContainingColumnNames = Array.from(dataContainingColumnNames)
              if ($('#selectTemplate').val() == "Default" || $('#selectTemplate').val() == "List View With History") {
                dataContainingColumnNames.unshift({ "data": "Actions" })
              }
              if ($('#selectTemplate').val() == "Reporting View"){
                dataContainingColumnNames.unshift({ "data": "Actions" })
              }
              var thead = $('#example1').find('thead tr')
              for (var i = 0; i < dataContainingColumnNames.length; i++) {
                $(`<th>${dataContainingColumnNames[i].data}</th>`).appendTo(thead)
              }
                $("#example1").DataTable({
                  "columns": dataContainingColumnNames,
                  "autoWidth": true,
                  "scrollY": "50vh",
                  "scrollCollapse": true,
                  "scrollX": "110%",
                  orderCellsTop: true,
                  responsive: true,
                  colReorder: {
                    fixedColumnsLeft: 1
                  },
                  stateSave: true,
                  "deferRender": true,
                  "paging": true,
                  "lengthMenu": [[1, 5, 50, -1], [1, 5, 50, "All"]],
                  stripeClasses: false,
                  "pageLength": 50,
                  dom: 'lfBrtip',
                  "sScrollX": "100%",
                  "scrollX": true,
                  buttons: [
                    {
                      extend: 'collection',
                      text: 'Export',
                      buttons: [
                        {
                          extend: 'copy', title: '', exportOptions: {
                            columns: ':visible:not(.noVis)'
                          }
                        },
                        {
                          extend: 'excel', title: '', exportOptions: {
                            columns: ':visible:not(.noVis)'
                          }
                        },
                        {
                          extend: 'csv', title: '', exportOptions: {
                            columns: ':visible:not(.noVis)'
                          }
                        },
                        {
                          extend: 'pdfHtml5',
                          title: '',
                          exportOptions: {
                            columns: ':visible:not(.noVis)'
                          },
                          pageSize: 'A4',
                              customize: function(doc, config) {
                                var tableNode;
                                for (i = 0; i < doc.content.length; ++i) {
                                  if(doc.content[i].table !== undefined){
                                    tableNode = doc.content[i];
                                    break;
                                  }
                                }

                                var rowIndex = 0;
                                var tableColumnCount = tableNode.table.body[rowIndex].length;

                                if(tableColumnCount > 5){
                                  doc.pageOrientation = 'landscape';
                                }
                              }
                        },
                      ],
                    },
                    {
                      extend: 'colvis',
                      className: "scroller",
                    }
                  ],
                  columnDefs: [
                    {
                      targets: "_all",
                      className: 'dt-center allColumnClass all'
                    },
                    {
                      targets: 0,
                      width: "20%",
                      className: 'noVis'
                    }
                  ],
                  });


              }
        }
      }
      var fieldAttributesCV =[]
      $('#saveCreateViewConfigg').on('click',function(){

        createViewReset1();

      })
      $('#saveCreateViewConfig').on('click',function(){
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).find('.color').removeClass('changeColor')
        let currentDevMode = "{{current_dev_mode}}"
        if(currentDevMode === "Edit" || currentDevMod =="Build"){
          $.ajax({
            url: window.location.pathname,
            data: {
            'operation': "fetchDependencies",
            'item_group_code':$('#graphContainerID').attr('data-process_code'),
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              if($('#tabHeaderCreateView').val() != '' && $('#tabHeaderCreateView').val() != null) {
                if (data.appDependency.length > 0) {
                  $('#dependencyTable').empty()

                                for(var i=0;i<data.appDependency.length;i++){

                                    $('#dependencyTable').append(`<tr><td style="font-weight:bold">${i+1}.</td><td style="font-weight:bold;text-align:start">&nbsp;&nbsp;${data.appDependency[i]}</td></tr>`)
                                }
                                $('#dependencyChecker').modal('show')
                                $('#btn_dependencySave').off('click').on('click',function(){
                                  savecreateviewjson();

                                })
                } else {

                    savecreateviewjson();
                }
              } else {
                $('#tabHeaderCreateView').parent().parent().next().next().css('display','block')
              }
            },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            });
          }else{
            if($('#tabHeaderCreateView').val() != '' && $('#tabHeaderCreateView').val() != null) {
              savecreateviewjson();
            } else {
              $('#tabHeaderCreateView').parent().parent().next().next().css('display','block')
            }
        }
        $('#formModal').find('.formLevelFieldCol').empty()
        $('#formModal').find('.formLevelFieldVal').find('select').empty()
        $('#formModal').find('.formLevelFieldCond').val('').trigger('change')
        $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
        $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
        $('#formModal').find('.formLevelFieldValTag').css('display','none');
        $('#formModal').find('.formLevelFieldVal').css('display','block');
        $('#formModal').find('.formLevelFieldReload').find('#carouselExampleIndicators1').find('.carousel-inner').empty();
        $('#formModal').find('.formLevelFieldReload').css('display','none');
        $('#formModal').find('.formFieldJs').css('display','none');

      })

      function savecreateviewjson(){
        changeSeqOfCircle()
        $(this).parent().prev().find('.tabHeaderEmptyValidation').css('display','none')
        $(this).parent().prev().find('.tabHeaderEmptyValidation').prev().css('display','none')
        var action = $('#formActionSelection').find('.row').find('.form-group').find("#selectAction").val()
        var createViewStylingValues = extractCreateViewButtons()
        var createViewCustomVal = $('.customValbtnDev').attr('data-data_config')
        if (createViewCustomVal == '' || createViewCustomVal == '{}' || createViewCustomVal == undefined){
          createViewCustomVal = {}
        }else{
          createViewCustomVal = JSON.parse(createViewCustomVal)
          createViewCustomVal = createViewCustomVal["reload_custom_validation"]
        }
        var createview_pdf_mode = false
        var createview_preview_mode = false
        var master_preview_mode = false
        var check_validForm = false
        var auto_compute_checkbox = false
        var view_RTF_checkbox = false
        if($("#save_preview_mode").is(":checked")){
          createview_preview_mode = true
        }
        if($("#save_pdf_mode").is(":checked")){
          createview_pdf_mode = true
        }
        if($("#master_preview_mode").is(":checked")){
          master_preview_mode = true
        }
        if($("#check_validForm").is(":checked")){
          check_validForm = true
        }
        if($("#auto_compute_checkbox").is(":checked")){
          auto_compute_checkbox = true
        }
        if($("#viewRTFCB").is(":checked")){
          view_RTF_checkbox = true
        }

        if($(this).parent().prev().find('.tabHeader').val()=="" ){
          $(this).parent().prev().find('.tabHeaderEmptyValidation').css('display','block')
        }
        else if($('#formActionSelection').find('.row').find('.form-group').find("#selectAction").val().length === 0 ){
          Swal.fire({icon: 'warning',text: 'Action has not been not selected.'});
        }
        else{
          cvtableName=($('#selectFormTable').val())[0]
          var tableName
          tableName=$('#selectFormTable').val();
          var selectedfields = [];
          var masterTableNameflow;
          var show_labels = $("#show_labels").is(":checked")
          var carousel_view = {}
          $(".pageFieldClass").each(function(idc, pfield){
            carousel_view[idc+1] = $(pfield).val()
            });

          var carousel_view_min_fields = {}
          $(".pageFieldClass_min_fields").each(function(idc, pfield){
            carousel_view_min_fields[idc+1] = {}
            carousel_view_min_fields[idc+1]['fields'] = $(pfield).val()
            carousel_view_min_fields[idc+1]['no_req_fields'] = $(pfield).parent().parent().parent().parent().find('.min_re_car').val()
            });

          let edit_labels = {}
          let col_header_label = $(".labelrow").find('.newrowpage').find('.row').find('.col-5').find('.pageFieldClass1')
          let col_label_name = $(".labelrow").find('.newrowpage').find('.row').find('.col-7').find('.pageFieldClass1')
          for (let i=0;i<col_header_label.length;i++){
            edit_labels[$(col_header_label[i]).val()] = $(col_label_name[i]).val()
          }

          var column_reorder = {}
          if($("#togglepagination_colorder").is(":checked")){

            var columnOrderDict = []
            $("#column-reorder").find(".sortable-order").children().each(function() {
              columnOrderDict.push($(this).attr("name"))
            })
            columnOrderDict.forEach((field, index) => {
              column_reorder[index+1] = field
            });
          }

          var custom_messages = {}
          if($("#toggleCustomMessages").is(":checked")){

            $("#customMessagesDiv").find(".c_msg_input").each(function() {
              custom_messages[$(this).attr("name")] ={ "message": $(this).val(), "icon": $(this).closest(".nav-item").find(".msg_icon").attr('class')}
            })
          }

          var big_data_parameters = {}
          if($("#toggle_big_data").is(":checked")){
            big_data_parameters["server_side_page_length"] = $("#server_side_length").val()
            big_data_parameters["server_side_columns"] = $("#foreignkey_columnnames").val()
          }

          masterTableNameflow = $('#selectMultipleFormTableflow').val();
          masterTableColumnflow =  $('#selectTableColumnsflow').val();

          var columnForTable=[];
          var flowcolumn = $('#flowhiddenSelectedColumn').val();
          if (selectedColumn[0] != null) {
            columnForTable = [...columnForTable,...selectedColumn];
          } else {
            columnForTable = [...columnForTable, ...tablesColumn]
          }
          var table_constraint=$(".selectFormTable_constraint").val();
          var constraintFields = $('.selectFields_constraint').val();

          var tableAsset=$(".selectFormTable_asset").val();
          var conditionType= $('.asset_type').val();

          var usecase=$(".usecase_name").val();
          var  data_constraint = [];

          var mydict={};

          var restrict_mand = $("#togglepaginationmand").is(":checked")
          var restrict_wrap = $("#togglepaginationwarp").is(":checked")

          var counter_cn = document.querySelectorAll(".constraint_name");

          var counter_ct =document.querySelectorAll(".constraint_type");
          for (i = 0; i < counter_cn.length; ++i) {
            if(counter_cn[i].value){
              if(counter_cn[i].value in Object.keys(mydict)){
                Swal.fire({icon: 'warning',text: 'Already present.'});

              }else{
                mydict[counter_cn[i].value]=counter_ct[i].value
                data_constraint.push(mydict);
              }
            }
          }

          for(let i = 0; i < allFieldsColumns.length; i++) {
            var bool = 0
            for(let j = 0; j < fields.length; j++) {
              if(allFieldsColumnsNull[i] == 0 ){
                if (allFieldsColumns[i] != 'created_by' && allFieldsColumns[i] != 'created_date' && allFieldsColumns[i] != 'modified_by' && allFieldsColumns[i] != 'modified_date' && allFieldsColumns[i] != 'active_to' && allFieldsColumns[i] != 'active_from') {
                  if(fields[j]['fieldname'] == allFieldsColumns[i]) {
                    bool = 1;
                    break;
                  }
                  else {
                    bool = 2
                  }
                }
              }
            }
            if (bool == 2) {
              bool = 0
              fieldproperty = {
                "fieldname": allFieldsColumns[i],
                "fieldtype":allFieldsColumnsType[i],
                "fieldVerbose": verboseName[i]
              }
              fields.push(fieldproperty)
            }
          }
          for(let k = 0; k < $('#selectFormTable').val().length; k++) {
            if (fieldSelectOrNot == 0) {
              for(key in fields1){
                var optionname = fields1[key].fieldname
                var s=0
                var index = 0
                fieldAttributesCV.forEach((element) => {
                  for (var key in element) {
                    if (element.hasOwnProperty(key)) {
                      if (key == optionname && (($('#selectFormTable').val())[k]) == element[key][0]['tableattr'][0]['value'] ) { s++ }
                    }
                  }
                })
                  if(s==0) {
                      var FA={}
                      var che = ($('#selectFormTable').val())[k];
                      che =  columnMappedToTable[che]
                      for(s1 = 0; s1 < che.length; s1++){
                        if(che[s1]['actual'] == (optionname)) {
                          FA[`${optionname}`]= [{"tableattr":[{"attr":"Tablename","value":($('#selectFormTable').val())[k]}],"cssattr":[{"attr":"Datatype","value":fields1[key].fieldtype,"verbose":fields1[key].fieldVerbose}]}]
                          fieldAttributesCV.push(FA)
                        }
                      }
            }
          }
            selectedfields.push(optionname)
            } else {
                for(key in fields){
                  var optionname = fields[key].fieldname
                  var s=0
                  fieldAttributesCV.forEach((element) => {
                    for (var key in element) {
                      if (element.hasOwnProperty(key)) {
                        if (key == optionname) { s++ }
                      }
                    }
                  })
                  if(fieldAttributesCV.hasOwnProperty(fields[key])) {
                    fieldAttributesCV[key].push(FA)
                  }
                  else if(s==0){
                    var FA = {}
                    var che = ($('#selectFormTable').val())[k];
                    che =  columnMappedToTable[che]
                    for(s1 = 0; s1 < che.length; s1++){
                      if(che[s1]['actual'] == (optionname)) {
                        FA[`${optionname}`]= [{"tableattr":[{"attr":"Tablename","value":($('#selectFormTable').val())[k]}],"cssattr":[{"attr":"Datatype","value":fields1[key].fieldtype,"verbose":fields1[key].fieldVerbose}]}]
                        fieldAttributesCV.push(FA)
                      }
                    }
              }
              selectedfields.push(optionname)
                }
            }
          }
        searchable_elements=[]
        $('.searchable_template').find("input[type=checkbox]").each(function(){
								if($(this)[0].checked == true){

                  searchable_elements.push($(this).attr('name'))
                }
        })

        let copy_paste_config = {}
        let copy_config = {}
        let paste_config = {}
        let card_logo = false
        let user_profile_pic = false
        let user_email = false
        let email_logo = false

        if($('#field_copy_allow').is(':checked')){
          copy_config["to_apply"] = true
          copy_config["colList"] = $('#fcopy_fields').val()
        }else{
          copy_config["to_apply"] = false
          copy_config["colList"] = []
        }
        copy_paste_config["copy"] = copy_config
        if($('#field_paste_allow').is(':checked')){
          paste_config["to_apply"] = true
          paste_config["colList"] = $('#fpaste_fields').val()
        }else{
          paste_config["to_apply"] = false
          paste_config["colList"] = []
        }
        copy_paste_config["paste"] = paste_config

        if($('#togglelogo_cre_card').is(':checked')){
          card_logo = true
        }

        if($('#togglelogo_email').is(':checked')){
          email_logo = true
        }

        if($('#togglelogo_user_pic').is(':checked')){
          user_profile_pic = true
        }

        if($('#togglelogo_user_email').is(':checked')){
          user_email = true
        }

        rec_config = {}
        if($('#togglerecurlabel').is(':checked')){
          rec_config["to_apply"] = true
          rec_config["colList"] = $('#recurr_update_fields').val()
        }else{
          rec_config["to_apply"] = false
          rec_config["colList"] = []
        }

        rest_min_config = {}
        if($('#togglerest_min_label').is(':checked')){
          rest_min_config["to_apply"] = true
          rest_min_config["colList"] = $('#restrict_min_fields').val()
          rest_min_config["no_of_fields"] = $('#restrict_min_no_req').val()
        }else{
          rest_min_config["to_apply"] = false
          rest_min_config["colList"] = []
          rest_min_config["no_of_fields"] = ""
        }

        var viewHistory_cols={}
        if($("#viewHistory_columnSelection").css('display') == "block" ){

          $("#viewHistory_columnAction").find('option:selected').each(function(){

          let  view_tab_name =$(this).attr('data-table-name')
          let view_val =$(this).val()
          if(!viewHistory_cols.hasOwnProperty(view_tab_name)){
            viewHistory_cols[view_tab_name]= []
          }

          viewHistory_cols[view_tab_name].push(view_val)
        })
        }

        var viewDraft_cols={}
        if($("#viewDraft_columnSelection").css('display') == "block" ){

          $("#viewDraft_columnAction").find('option:selected').each(function(){

          let  view_tab_name =$(this).attr('data-table-name')
          let view_val =$(this).val()
          if(!viewDraft_cols.hasOwnProperty(view_tab_name)){
            viewDraft_cols[view_tab_name]= []
          }

          viewDraft_cols[view_tab_name].push(view_val)
        })
        }

        var viewHistoryDisplay_cols={}
        if($("#viewHistory_columnSelection_forDisplay").css('display') == "block"){

          $("#viewHistory_displayColumns").find('option:selected').each(function(){

          let  view_tab_name =$(this).attr('data-table-name')
          let view_val =$(this).val()
          if(!viewHistoryDisplay_cols.hasOwnProperty(view_tab_name)){
            viewHistoryDisplay_cols[view_tab_name]= []
          }

          viewHistoryDisplay_cols[view_tab_name].push(view_val)
          })
        }

        var viewRejectedRecordsDisplay_cols={}
        if($("#viewRejectedRecords_columnSelection_forDisplay").css('display') == "block"){

          $("#viewRejectedRecords_displayColumns").find('option:selected').each(function(){

          let  view_tab_name =$(this).attr('data-table-name')
          let view_val =$(this).val()
          if(!viewRejectedRecordsDisplay_cols.hasOwnProperty(view_tab_name)){
            viewRejectedRecordsDisplay_cols[view_tab_name]= []
          }

          viewRejectedRecordsDisplay_cols[view_tab_name].push(view_val)
          })

        }



        if (customTemp == 'custom') {
          templateName = 'custom'
        } else {
          $('#selectFormTemplate').parent().css('display','block');
          templateName = $('#selectFormTemplate').val();
        }
        $('.dragContainer').find('.formTempContainer').draggable("destroy")
        $('.dragContainer').find('.formTempContainer').resizable("destroy");
        $('.dragContainer').find('.formChild').draggable("destroy");
        $('.dragContainer').find('.formChild').resizable("destroy");
        $('.dragContainer').find('.formContainer').draggable("destroy")
        $('.dragContainer').find('.formContainer').resizable("destroy");
        var html = "";
        var temp = {"html":html,"numberedColumn":numberedColumn};
        var obj  = JSON.stringify(temp);
        for(let i = 0 ;i < $('#cascadingCard1').find('.card-default').length; i++) {
          if(i != 0) {
            $('#cascadingCard1').find('.card-default').eq(i).remove()
          }
        }
        var embededComputationCreatView = extractEmbededComputationCreateView()
        var grid_layout_config = extractGridLayoutConfig()
        let formStylingConfig = {};
        if ($('#saveFormStyleConfigButton').attr('data-config')) {
          formStylingConfig = JSON.parse($('#saveFormStyleConfigButton').attr('data-config'));
        }
        let columnAlignment = {};
        if ($('#saveCreateViewColumnAlignmentButton').attr('data-config')) {
          columnAlignment = JSON.parse($('#saveCreateViewColumnAlignmentButton').attr('data-config'));
        }

        let jsvalidation_config = {}
        if($("#js_filter_btn").attr('data-basicfilter-config') && $("#js_filter_btn").attr('data-basicfilter-config') != '{}'){
          jsvalidation_config = JSON.parse($("#js_filter_btn").attr('data-basicfilter-config'))
        }
        var createviewjson = {
          "Category_attributes": {
            "Template": {
              "Template_choice": templateName,
              "allField":$("#allField").prop("checked"),
              "selectedField":$("#selectAllField").val(),
              "Template_type": $("#selectCreateViewTemplate").val(),
              "html":obj,
              "createViewStylingValues":createViewStylingValues,
              "createViewCustomVal":createViewCustomVal,
              "embededComputationCreatView":embededComputationCreatView,
              "grid_layout_config":grid_layout_config,
              "select":fieldSelectOrNot,
              "formLevelField": formLevelFieldList,
              "show_labels": show_labels,
              "carousel_view" : carousel_view,
              "carousel_view_min_fields": carousel_view_min_fields,
              "recurrence_config":rec_config,
              "restict_min_config":rest_min_config,
              "column_reorder":column_reorder,
              "custom_messages":custom_messages,
              "form_styling_config": formStylingConfig,
              'column_alignment': columnAlignment,
              "jsvalidation_config":jsvalidation_config,
              "big_data_parameters" : big_data_parameters,
            }
          },
          "Search_fields": {
              "search_fields": searchable_elements
            },
          "edit_labels":edit_labels,
          "copy_paste_config": copy_paste_config,
          "Columns_value":col_val,
          "restrict_mand":restrict_mand,
          "restrict_wrap":restrict_wrap,
          "check_validForm":check_validForm,
          "card_logo":card_logo,
          "user_profile_pic":user_profile_pic,
          "user_email":user_email,
          "email_logo":email_logo,
          "Category_sub_elements": [{
            "Category_sub_element_name": "Form",
            "Category_sub_element_attributes": [{
                "Category_attr": "Table_name",
                "value": tableName
              },{
                "Category_attr": "Field_Choice",
                "value": fieldAttributesCV,
                "value_cases": dic_cases,
              }, {
                "Category_attr": "Comparable_Choice",
                "value": compareFields,
                "char_column": columnSelection,
                "period": periodSelection,
              }, {
                "Category_attr": "Action",
                "value": $("#selectAction").val(),
                "Preview_mode":createview_preview_mode,
                "Pdf_mode":createview_pdf_mode,
                "Master_preview":master_preview_mode,
                "Auto_compute":auto_compute_checkbox,
                "RTF_popup":view_RTF_checkbox,
                "Table_name": cvtableName,
                'viewHistory_columns':viewHistory_cols,
                "viewDraft_columns":viewDraft_cols,
                "viewHistory_displayColumns_columns": viewHistoryDisplay_cols,
                "viewRejectedRecords_displayColumns_columns": viewRejectedRecordsDisplay_cols,
                "custom_button":dic_cb
              }, {
                "Category_attr": "Constraint_Choice",
                "selected_tables":table_constraint,
                "selectedConstraint_fields":constraintFields,
                "remove_additional_column":constraint_not_required_columns,
                "constraint_holder":data_constraint[0],
                "constraint_name": $(".constraint_name").val(),
                "constraint_type":$(".constraint_type").val() ,
              },
              {
                "Category_attr": "Flow_Choice",
                "flowcolumn":flowcolumn,
                "mastertableflow": masterTableNameflow,
                "masterColumnflow": masterTableColumnflow,
              },
              {
                "Category_attr": "asset_grouping",
                "selected_tables":tableAsset,
                "selectedConstraint_fields":"",
                "remove_additional_column":"",
                "constraint_holder":"",
                "usecase_name":"",
                "constraint_name": "",
                "constraint_type":conditionType,
              }
            ]
          }]
        }


          var tableName
          tableName=$('#selectFormTable').val();

          var cellSelected=editorCopy.editor.graph.getModel().getCell($('#formModal').find('.modal-footer').attr('data-shapeid'));
          cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
          if (cellShapeUniqueID<0){
            var itemID=("whiteSpace=wrap"+Math.random()).replace('.',"").replace("=","")
            cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
          }
          else{
            var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
          }
          var indexSeparator=cellSelected.style.indexOf(';');
          var elementShape=cellSelected.style.substr(0,indexSeparator);
          var iconselector2;
          $('.listoficons').each(function(){

            if($(this).css("border").includes("rgb(184, 134, 11)")){
              var number1=$(this).attr("class").indexOf('listoficons')-1
              iconselector2=$(this).attr("class").substr(0,number1)
            }
          })
          if(templateName == "Flow Definition" && jQuery.inArray(flowcolumn, selectedfields) !== -1){

            Swal.fire({icon: 'warning',text: 'Selected fields cannot contain the flow column.'});
          }
          else{
          var ctoken = $('form').find("input[name='csrfmiddlewaretoken']").attr('value')
          $.ajaxSetup({
            beforeSend: function (xhr, settings) {
              xhr.setRequestHeader("X-CSRFToken", ctoken);
            }
          });
          $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'saveCreateViewElementConfig',
              'processName':process_name,
              'subProcessName':subprocess_name,
              'iconselected': iconselector2,
              'tab_header_name':$('#tabHeaderCreateView').val(),
              'tableName':JSON.stringify(tableName),
              'fields' :JSON.stringify(selectedfields),
              'tabBodyContent':JSON.stringify(createviewjson),
              'elementID':itemID,
              'shape':elementShape
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              $("#graphContainerID").attr("data-tab_name",$('#tabHeaderCreateView').val());
              if($('#selectCreateViewTemplate').val() == "Custom defined template") {
                $('#createViewModal').find('.previewCustomTemplate').css("display",'block');
              } else {
                $('#createViewModal').find('.previewCustomTemplate').css("display",'none');
                $('#formModal').modal('hide');
                $('#createViewModal').css('display','none')
                if(Object.keys(data).length > 0){
                  if (data.table == "success"){
                    Swal.fire({icon: 'success',text: 'Create view configuration saved. Replica table for multi-select created successfully, data insertion is in progress'});
                  }else{
                    Swal.fire({icon: 'success',text: 'Create View configuration saved successfully!'});
                  }
                }else{
                  Swal.fire({icon: 'success',text: 'Create View configuration saved successfully!'});
                }
              }
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Failure in saving the Create View configuration. Please check your configuration and try again.'});
            }
        })
        }
      }
      stateOfCss["save"] = "no";
      stateOfCss["style"] = ""
      stateOfCss["title"] = undefined
      stateOfCss["span"] = ""
      stateOfCss["validation"] = ""
    }



    function finalcreateviewJS(){
      is_fk_ap = 0;
      var len = $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('.cascadeRemove').length
      if(fields.length == 0) {
        fieldSelectOrNot = 0;
      } else {
        fieldSelectOrNot = 1;
      }
      var FA={}
      var len = 0
      var tabCheck = 0
      var fk_case = []
      var ap_case = []
      cvtableName=($('#selectFormTable').val())
      for(let lk = 0; lk < cvtableName.length; lk++) {
        for(lk1 = 0; lk1 < columnMappedToTable[cvtableName[lk]].length; lk1++){
          if(columnMappedToTable[cvtableName[lk]][lk1]['actual'] == ($('#selectField').val())){
            cvtableName = cvtableName[lk];
            tabCheck = 1
            break;
          }
        }
        if(tabCheck == 1) {
          break;
        }
      }
      var is_ap = true
      is_ap = false
      is_alert = true
      $('#JSConfig').find('.multipleJs').each(function() {
        len = len + 1;
        var finalJSattr = []
        var JS = document.querySelector(".selectJSproperty")
        if(0){
          var pc =document.getElementById("selectpctype")
          var finalJSattr1 = [{"attr":"data-field-type","value":pc.options[pc.selectedIndex].value}]
          finalJSattr.push(finalJSattr1)
          var PN = document.getElementById("parentfieldname")
          var finalJSattr1 = [{"attr":"data-parent_field_name","value":PN.options[PN.selectedIndex].value}]
          finalJSattr.push(finalJSattr1)
          var CN = document.getElementById("childfieldname")
          var finalJSattr1 = [{"attr":"data-child_field_name","value":CN.options[CN.selectedIndex].value}]
          finalJSattr.push(finalJSattr1)
          var RN = document.getElementById("reftablename")
          var finalJSattr1 = [{"attr":"data-reference_table_name","value":RN.options[RN.selectedIndex].value}]
          finalJSattr.push(finalJSattr1)
          var PN1 = document.getElementById("parentcolumn")
          var finalJSattr1 = [{"attr":"data-parent_column","value":PN1.options[PN1.selectedIndex].value}]
          finalJSattr.push(finalJSattr1)
          var CN1 = document.getElementById("childcolumn")
          var finalJSattr1 = [{"attr":"data-child_column","value":PN1.options[CN1.selectedIndex].value}]
          finalJSattr.push(finalJSattr1)

          var jsattr =[{"parentattr":"data-jsfunction","parentvalue":"Dependent_field_autopopulate","finaljsattr":finalJSattr}]
        }
        else if ($(this).find('.selectJSproperty').val() == "Auto-populate Constant"){
          ap_case = $(this).find('.selectCases').val()
          var allow_edit_c = ""
          var static_inp_val = ""
          if(fk_case.length > 0){
            if(ap_case.length == 0){
              is_fk_ap = is_fk_ap + 1
            } else{
              for(let r = 0; r < fk_case.length; r++){
                if(ap_case.includes(fk_case[r])){
                  is_fk_ap = is_fk_ap + 1
                }
              }
            }
          } else if(fk_case.length == 0){
            is_fk_ap = is_fk_ap + 1
          } else {
            is_fk_ap = is_fk_ap + 1
          }
          if(allFieldsColumnsType[allFieldsColumns.indexOf($("#selectField").val())] == "ForeignKey"){
              var dropdown = "Yes"
            }
          else if(dropDown[allFieldsColumns.indexOf($("#selectField").val())] > 0)
          {
            var dropdown = "Yes"
          }
          else{
            var dropdown = "No"
          }

          if($(this).find('.field_autoc_allowedit').is(':checked')){
            allow_edit_c = "yes"
          }else{
            allow_edit_c = "no"
          }

          if($(this).find('.select_ap_constant').val() == "static_value"){
            static_inp_val = $(this).find(".auto_static_div").find('input').val()
          }

          var finalJSattr1 = [{"table_name":cvtableName,"table_column":$("#selectField").val(),"column_value":$(this).find('.select_ap_constant').val(),"dropdown_value":dropdown, "static_inp_val":static_inp_val}]
          finalJSattr.push(finalJSattr1)
          var jsattr =[{"parentattr":"data-jsfunction","parentvalue":"Auto-populate Constant","cases":$(this).find('.selectCases').val(),"caseCond":$(this).find(".selectCasesCond").val(),'table':cvtableName,"finaljsattr":finalJSattr, "allow_edit_c":allow_edit_c}]
        }
        else if ($(this).find('.selectJSproperty').val() == "Linked-field-autopopulate" || $(this).find('.selectJSproperty').val() == "Foreign-key-relation"){
          var pc =$(this).find('.selectpctype');
          fk_case = $(this).find('.selectCases').val()
          if(ap_case.length > 0){
            if(fk_case.length == 0){
              is_fk_ap = is_fk_ap + 1
            } else {
              for(let r = 0; r < ap_case.length; r++){
                if(fk_case.includes(ap_case[r])){
                  is_fk_ap = is_fk_ap + 1
                }
              }
            }
          } else if(ap_case.length == 0){
            is_fk_ap = is_fk_ap + 1
          } else {
            is_fk_ap = is_fk_ap + 1
          }
          is_ap = true
          var finalJSattr1 = [{"attr":"data-field-type","value":$(this).find('.selectpctype').val()}]
          finalJSattr.push(finalJSattr1)
          var finalJSattr1 = [{"attr":"data-reference_master_table","value":cvtableName}]
          finalJSattr.push(finalJSattr1)
          var CN = $(this).find('.selectparentcolumn');
          var condValue = []
          var cond = []
          var condColumn = []
          var dynamicVal = []
          var constraint = []
          var ruleSet = []
          $(this).find('.foreignKeyCondCont').find('.subCont').each(function() {
            if($(this).find('.foreignKeyCondVal').css('display') == 'none') {
              var tempVal = $(this).find('.foreignKeyCondValTag').find('select').val();
              condValue.push(tempVal)
            } else {
              condValue.push($(this).find('.foreignKeyCondVal').find('select').val())
            }
            var temp
            if ($(this).find('.foreignKeyCond').val() == "Greater then") {
              temp = "Greater than"
            } else if($(this).find('.foreignKeyCond').val() == "Smaller then") {
              temp = "Smaller than"
            } else if($(this).find('.foreignKeyCond').val() == "In") {
              temp = "IN"
            } else if($(this).find('.foreignKeyCond').val() == "Equal to") {
              temp = "Equal to"
            } else if($(this).find('.foreignKeyCond').val() == "Not Equal to") {
              temp = "Not Equal to"
            }
            cond.push(temp)
            condColumn.push($(this).find('.selectparentcolumnCond').val())
            dynamicVal.push($(this).find('.foreignKeyDynamicVal').val())
            constraint.push($(this).find('.foreignKeyConstraint').val())
            ruleSet.push($(this).find('.foreignKeySet').val())
          })


          let master_cond_config = []
          $(this).find('.foreignKeyMasterCont').find('.subMasterCont').each(function() {

          if($(this).find('.fk-master-table').val()){
              let temp_config = {}

              var temp
              if ($(this).find('.foreignKeyMasterCond').val() == "Greater then") {
                temp = "Greater than"
              } else if($(this).find('.foreignKeyMasterCond').val() == "Smaller then") {
                temp = "Smaller than"
              } else if($(this).find('.foreignKeyMasterCond').val() == "In") {
                temp = "IN"
              } else if($(this).find('.foreignKeyMasterCond').val() == "Equal to") {
                temp = "Equal to"
              } else if($(this).find('.foreignKeyMasterCond').val() == "Not Equal to") {
                temp = "Not Equal to"
              }


              temp_config["column_name"] = $(this).find('.selectreturnMasterCond').val()
              temp_config["constraintName"] = $(this).find('.foreignKeyMasterConstraint').val()
              temp_config["ruleSet"] = $(this).find('.foreignKeyMasterSet').val()
              temp_config["masterTable"] = $(this).find('.fk-master-table').val()
              temp_config["masterColumn"] = $(this).find('.selectparentcolumnMasterCond').val()
              temp_config["masterCondition"] = temp
              temp_config["inputFormColumn"] = $(this).find('.foreignKeyMasterCondValSel').val()
              temp_config["masterOutputColumn"] = $(this).find('.selectparentreturncolumnMasterCond').val()

              master_cond_config.push(temp_config)

            }

          })


          let column_cond_config = []

          $(this).find('.foreignKeyColBasedCont').find('.subColBasedCont').each(function() {

          if($(this).find('.foreignKeyColBasedCurrCol').val()){
              let temp_column_config = {}

              var temp
              if ($(this).find('.foreignKeyColBasedCond').val() == "Greater then") {
                temp = "Greater than"
              } else if($(this).find('.foreignKeyColBasedCond').val() == "Smaller then") {
                temp = "Smaller than"
              } else if($(this).find('.foreignKeyColBasedCond').val() == "In") {
                temp = "IN"
              } else if($(this).find('.foreignKeyColBasedCond').val() == "Equal to") {
                temp = "Equal to"
              } else if($(this).find('.foreignKeyColBasedCond').val() == "Not Equal to") {
                temp = "Not Equal to"
              }


              temp_column_config["column_name"] = $(this).find('.foreignKeyColBasedReturnCol').val()
              temp_column_config["condition"] = temp
              temp_column_config["constraintName"] = $(this).find('.foreignKeyColBasedConstraint').val()
              temp_column_config["ruleSet"] = $(this).find('.foreignKeyColBasedSet').val()
              temp_column_config["inputFormColumn"] = $(this).find('.foreignKeyColBasedCurrCol').val()

              column_cond_config.push(temp_column_config)

          }

          })

          var finalJSattr1 = [{"attr":"data-reference_master_table_column","value":$(this).find('.selectparentcolumn').val(),'condition':{'column':condColumn,'cond':cond,'value':condValue,'dynamicVal':dynamicVal,"ruleSet":ruleSet,"constraint":constraint}}]
          var finalJSattr2 = [{"attr":"data-master_condition", "config": master_cond_config}]
          var finalJSattr3 = [{"attr":"data-column_based_condition", "config": column_cond_config}]
          finalJSattr.push(finalJSattr1)
          finalJSattr.push(finalJSattr2)
          finalJSattr.push(finalJSattr3)
          var jsattr =[{"parentattr":"data-jsfunction","parentvalue":"Foreign-key-relation","cases":$(this).find('.selectCases').val(),"caseCond":$(this).find(".selectCasesCond").val(),'table':$(this).find('.selectpctype').val(),'column':$(this).find('.selectparentcolumn').val(),'default':$(this).find('.selectdefcolumn').val(),"finaljsattr":finalJSattr}]
        } else if ($(this).find('.selectJSproperty').val() == "Cascading") {
          var dictList = []
          for (let j = 0; j < $(this).find('#cascadingCard1').find('.card-default').length; j++) {
            var dict = {}
            dict['depField'] = []
            dict['depMapper'] = []
            dict['indField'] = ($(this).find('#cascadingCard1').find('.card-default').eq(j).find('.indFieldTypeSelectCascading1').val());
            dict['indMapper'] = ($(this).find('#cascadingCard1').find('.card-default').eq(j).find('.indFieldTypeMapperCascading1').val());
            for(let i = 0; i < $(this).find('#cascadingCard1').find('.card-default').eq(j).find('.depFieldTypeSelectCascading1').length; i++) {
              dict['depField'].push($(this).find('#cascadingCard1').find('.card-default').eq(j).find('.depFieldTypeSelectCascading1').eq(i).val());
              if ($('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+dict['depField'][i]).find('div').hasClass('cascadeRemove')) {
              } else {
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+dict['depField'][i]).find('div').find('input').css('display','none')
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+dict['depField'][i]).find('div').find('select').css('display','none')
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+dict['depField'][i]).find('div').find('textarea').css('display','none')
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+dict['depField'][i]).find('div').append(`<select class='form-control select2 cascadeRemove'><option value="">---</option></select>`)
                var css_cas = $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+dict['depField'][i]).find('div').attr('style');
                $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find('#'+dict['depField'][i]).find('div').find('select').attr('style',css_cas)
              }
            }
            for(let i = 0; i < $(this).find('#cascadingCard1').find('.card-default').eq(j).find('.depFieldTypeMapperCascading1').length; i++) {
              dict['depMapper'].push($(this).find('#cascadingCard1').find('.card-default').eq(j).find('.depFieldTypeMapperCascading1').eq(i).val());
            }
            dictList.push(dict);
          }
          var finalJSattr1 = [{"attr":"data-field-type","value":dictList}]
          finalJSattr.push(finalJSattr1)
          var val = []
          for (let j = 0; j < $(this).find('#cascadingCard1').find('.card-default').length; j++) {
            val.push($(this).find('#cascadingCard1').find('.card-default').eq(j).find('.masterTableSelectCascading1').val());
          }
          var finalJSattr1 = [{"attr":"data-reference_master_table","value":val}]
          finalJSattr.push(finalJSattr1)
          var val = []
          for (let j = 0; j < $(this).find('#cascadingCard1').find('.card-default').length; j++) {
            val.push($(this).find('#cascadingCard1').find('.card-default').eq(j).find('.indFieldTypeMapperCascading1').val());
          }
          var finalJSattr1 = [{"attr":"data-reference_master_table_column","value":val}]
          finalJSattr.push(finalJSattr1)
          var jsattr =[{"parentattr":"data-jsfunction","parentvalue":"Cascading","cases":$(this).find('.selectCases').val(),"caseCond":$(this).find(".selectCasesCond").val(),"finaljsattr":finalJSattr}]
        } else if ($(this).find('.selectJSproperty').val() == "Show-hide") {
          if ($(this).find('.formLevelJs').find('.formLevelFieldActionsSel').val() == "Create manually") {
            var arr = []
            var pc =$(this).find('.selectpctype');
            var finalJSattr1 = [{"attr":"data-field-type","value":$(this).find('.formLevelJs').find('.formLevelFieldActionsSel').val()}]
            finalJSattr.push(finalJSattr1)
            var finalJSattr1 = [{"attr":"data-reference_master_table","value":cvtableName}]
            finalJSattr.push(finalJSattr1)
            $(this).find('.formLevelJs').find('.configCont').each(function() {
              var dict = {}
              dict['condition'] = $(this).find('.formLevelFieldCond').val();
              if ( $(this).find('.formLevelFieldVal').css('display') == 'block') {
                dict['value'] = $(this).find('.formLevelFieldVal').find('select').val();
              } else {
                dict['value'] = $(this).find('.formLevelFieldValTag').find('select').val();
              }
              dict['selectedColumn'] = $(this).find('.formLevelFieldCol').val();
              arr.push(dict)
            })
            var finalJSattr1 = [{"attr":"data-reference_master_table_column","value":arr}]
            finalJSattr.push(finalJSattr1)
            var jsattr =[{"parentattr":"data-jsfunction","parentvalue":"Show-hide","cases":$(this).find('.selectCases').val(),"caseCond":$(this).find(".selectCasesCond").val(),"finaljsattr":finalJSattr}]
          } else if ($(this).find('.formLevelJs').find('.formLevelFieldActionsSel').val() == "Link to source table") {
            var arr = []
            var pc =$(this).find('.selectpctype');
            var finalJSattr1 = [{"attr":"data-field-type","value":$(this).find('.formLevelJs').find('.formLevelFieldActionsSel').val()}]
            finalJSattr.push(finalJSattr1)
            var finalJSattr1 = [{"attr":"data-reference_master_table","value":cvtableName}]
            finalJSattr.push(finalJSattr1)
            $(this).find('.formLevelJs').find('.configContLink').each(function() {
              var dict = {}
              dict['condition'] = "In"
              dict['value'] = $(this).find('.formLevelFieldColName').eq(0).find('select').val();
              dict['selectedColumn'] = $(this).find('.formLevelFieldColName').eq(1).find('select').val();
              dict['masterTable'] = $(this).find('.formLevelFieldMasterTable').find('select').val();
              arr.push(dict)
            })
            var finalJSattr1 = [{"attr":"data-reference_master_table_column","value":arr}]
            finalJSattr.push(finalJSattr1)
            var jsattr =[{"parentattr":"data-jsfunction","parentvalue":"Show-hide_link","cases":$(this).find('.selectCases').val(),"caseCond":$(this).find(".selectCasesCond").val(),"finaljsattr":finalJSattr}]
          }
        } else if ($(this).find('.selectJSproperty').val() == "Auto-populate") {
          var dict = {}
          var allow_edit = ""
          dict['depField'] = []
          dict['depMapper'] = []
          dict["indDep"] = []
          dict['depDep']= []
          var mulCol = []
          for(let i = 0; i < $(this).find('.depFieldTypeSelect').length; i++) {
            dict['depField'].push($(this).find('.depFieldTypeSelect').eq(i).val());
          }
          for(let i = 0; i < $(this).find('.depFieldTypeMapper').length; i++) {
            dict['depMapper'].push($(this).find('.depFieldTypeMapper').eq(i).val());
          }
          for(let i = 0; i < $(this).find('.indDepFieldTypeSelect').length; i++) {
            dict['indDep'].push($(this).find('.indDepFieldTypeSelect').eq(i).val());
          }
          for(let i = 0; i < $(this).find('.indDepFieldTypeMapper').length; i++) {
            dict['depDep'].push($(this).find('.indDepFieldTypeMapper').eq(i).val());
          }

          if($(this).find('.field_auto_allowedit').is(':checked')){
            allow_edit = "yes"
          }else{
            allow_edit = "no"
          }

          if($(this).find('.field_auto_values').is(':checked')){
            auto_values = "yes"
          }else{
            auto_values = "no"
          }

          if(1){
            var finalJSattr1 = [{"attr":"data-field-type","value":dict}]
            finalJSattr.push(finalJSattr1)
            var finalJSattr1 = [{"attr":"data-reference_master_table","value":$(this).find('.masterTableSelect').val()}]
            finalJSattr.push(finalJSattr1)
            var finalJSattr1 = [{"attr":"data-reference_master_table_column","value":$(this).find('.indFieldTypeMapper').val(),"indValue":dict["indDep"],"depValue":dict["depDep"]}]
            finalJSattr.push(finalJSattr1)
            var jsattr =[{"parentattr":"data-jsfunction","parentvalue":"Auto-populate","cases":$(this).find('.selectCases').val(),"caseCond":$(this).find(".selectCasesCond").val(),"finaljsattr":finalJSattr, "allow_edit":allow_edit, "mulCol":mulCol, "auto_values":auto_values}]
          }
        } else if ($(this).find('.selectJSproperty').val() == "Styling attribute") {
          var pc =$(this).find('.selectpctype');
          var finalJSattr1 = [{"attr":"data-field-type","value":"Create manually"}]
          finalJSattr.push(finalJSattr1)
          var finalJSattr1 = [{"attr":"data-reference_master_table","value":cvtableName}]
          finalJSattr.push(finalJSattr1)

          var dic = {}
          var arr = []
          dic["column"] = $("#selectField").val();
          $(this).find(".stylingJsValidationColor").find(".stylingJsValidationColorCont").each(function() {
              var dict = {}
              dict['condition'] = $(this).find('.stylingJsValidationColorCond').val()
              if($(this).find('.stylingJsValidationColorVal').css('display') != 'none'){
                dict['value'] = $(this).find('.stylingJsValidationColorVal').find('select').val();
              } else {
                dict['value'] = $(this).find('.stylingJsValidationColorValTag').find('select').val();
              }
              dict['selectedColumn'] = $(this).find('.stylingJsValidationColorCol').val();
              dict['color'] = $(this).find('.stylingJsValidationColorInput').val();

              arr.push(dict)
            })
          dic["styleValidation"] = arr
          dic["style"] = $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find(`#${$("#selectField").val()}`).parent().attr("style");
          dic["data-toggle"] = "tooltip"
          dic["border-style"] = $(this).find(".stylingJsBorderTypeSelect").val();
          dic["border-color"] = $(this).find(".stylingJsBorderColorInput").val();
          dic["border-width"] = $(this).find(".stylingJsBorderWidthInput").val();
          if(String($(this).find(".stylingJsFieldColorInput").val()) == "#ffffff"){
            dic["background-color"] = "#ffffff"
          } else if(String($(this).find(".stylingJsFieldColorInput").val()) == "#000000"){
            dic["background-color"] = "#ffffff"
          } else {
            dic["background-color"] = $(this).find(".stylingJsFieldColorInput").val();
          }
          dic["background-color-validation"] = $(this).find(".stylingJsValidationColorInput").val();
          dic["title"] = $(this).find(".stylingJsHoverInput").val();
          dic["instruction"] = $(this).find(".stylingJsInstructionInput").val();
          dic["details"] = $(this).find(".stylingJsDetailsInput").val();
          if ($("#instructions_url_dropdown").val() === 'addman'){
            dic["url_class_type"] = $("#instructions_url_dropdown").val();
            dic["ins_link"] = $("#insurl_link").val();
            dic["ins_link_color"] = $("#insurl_link_color").val();
            dic["ins_link_target"] = $("#manurltype").is(":checked");
            dic["manual_link"] = $("#insurl_link").val();
            dic["manual_link_color"] = $("#insurl_link_color").val();
            dic["manual_link_target"] = $("#manurltype").is(":checked");
          }
          else if ($("#instructions_url_dropdown").val() === 'inapp'){
            dic["url_class_type"] = $("#instructions_url_dropdown").val();
            dic["ins_link"] = "";
            dic["ins_link_color"] = $("#insurl_inapp_link_color").val();
            dic["ins_link_target"] = $("#inurltype").is(":checked");
            dic["inapp_app"] = $("#select_app_hyperlink").val();
            dic["inapp_pro"] = $("#select_process_hyperlink").val();
            dic["inapp_subpro"] = $("#select_subprocess_hyperlink").val();
            dic["inapp_link_color"] = $("#insurl_inapp_link_color").val();
            dic["inapp_link_target"] = $("#inurltype").is(":checked");
          }
          dic["instruction_text_color"] = $("#ins_text_color").val();
          dic["instruction_text_link"] = $("#url_text1").val();
          if ($(this).find(".stylingJsMandatoryInput").is(":checked") == true) {
            dic["mandatoryfield"] = $(this).find(".stylingJsMandatoryInput").is(":checked");
          } else {
            dic["mandatoryfield"] = "";
          }
          dic["details-bg"] = $(this).find(".stylingJsDetailsColorInput").val();
          var finalJSattr1 = [{"attr":"data-reference_master_table_column","value":dic}]
          finalJSattr.push(finalJSattr1)
          stateOfCss["save"] = "yes"
          var jsattr =[{"parentattr":"data-jsfunction","parentvalue":"Styling attribute","cases":$(this).find('.selectCases').val(),"caseCond":$(this).find(".selectCasesCond").val(),"finaljsattr":finalJSattr}]
        }else if ($(this).find('.selectJSproperty').val() == "Field Type Settings"){
          if ($('#selectField').attr('selected-field-type') =='BooleanField'){
            if ($(this).find('.boolean_field_sliders_styles').find('select').val() =='text_silder'){
              var rgba_value_bg_selected= hexToRGB($(this).find('.boolean-text-silder-formattings-selected').find('.boolean-bg-color-selected').find('input').val(),$(this).find('.boolean-text-silder-formattings-selected').find('.boolean-bg-color-opacity-selected').find('select').val())
              var rgba_value_bg_not_selected = hexToRGB($(this).find('.boolean-text-silder-formattings-not-selected').find('.boolean-bg-color-not-selected').find('input').val(),$(this).find('.boolean-text-silder-formattings-not-selected').find('.boolean-bg-color-opacity-not-selected').find('select').val())
              var finalJSattr = {
              'column':$("#selectField").val(),
              'style_slider':'text_silder',
              'selected':{
                'text-color-selected':$(this).find('.boolean-text-silder-formattings-selected').find('.boolean-text-color-selected').find('input').val(),
                'text-true':$(this).find('.boolean-text-silder-text').find('.boolean-text-true').find('input').val(),
                'bg-color-selected':$(this).find('.boolean-text-silder-formattings-selected').find('.boolean-bg-color-selected').find('input').val(),
                'bg-color-opacity-selected':$(this).find('.boolean-text-silder-formattings-selected').find('.boolean-bg-color-opacity-selected').find('select').val(),
                'rgba_value_bg-selected':rgba_value_bg_selected,
              },
              'not_selected':{
                'text-color-not-selected':$(this).find('.boolean-text-silder-formattings-not-selected').find('.boolean-text-color-not-selected').find('input').val(),
                'text-false':$(this).find('.boolean-text-silder-text').find('.boolean-text-false').find('input').val(),
                'bg-color-not-selected':$(this).find('.boolean-text-silder-formattings-not-selected').find('.boolean-bg-color-not-selected').find('input').val(),
                'bg-color-opacity-not-selected':$(this).find('.boolean-text-silder-formattings-not-selected').find('.boolean-bg-color-opacity-not-selected').find('select').val(),
                'rgba_value_bg-not-selected':rgba_value_bg_not_selected,
              }
              }
            }else{
              var rgba_value_bg_active = hexToRGB($(this).find('.boolean-silder').find('.boolean-bg-color-active').find('input').val(),$(this).find('.boolean-silder').find('.boolean-bg-color-opacity-active').find('select').val())
              var rgba_value_bg_in_active = hexToRGB($(this).find('.boolean-silder').find('.boolean-bg-color-in-active').find('input').val(),$(this).find('.boolean-silder').find('.boolean-bg-color-opacity-in-active').find('select').val())
              var finalJSattr = {
              'column':$("#selectField").val(),
              'style_slider':"silder",
              'new_configs':'NEW',
              'bg_slider_color_active':$(this).find('.boolean-silder').find('.boolean-bg-color-active').find('input').val(),
              'bg_slider_color_opactiy_active':$(this).find('.boolean-silder').find('.boolean-bg-color-opacity-active').find('select').val(),
              'rgba_value_bg_active':rgba_value_bg_active,
              'rgba_value_bg_in_active':rgba_value_bg_in_active,
              'bg_slider_color_in_active':$(this).find('.boolean-silder').find('.boolean-bg-color-in-active').find('input').val(),
              'bg_slider_color_opactiy_in_active':$(this).find('.boolean-silder').find('.boolean-bg-color-opacity-in-active').find('select').val(),
              'text_aligment':$(this).find('.boolean-silder').find('.boolean-text-align').find('select').val(),
              'text_left':$(this).find('.boolean-silder').find('.boolean-text-left').find('input').val(),
              'text_right':$(this).find('.boolean-silder').find('.boolean-text-right').find('input').val(),
            }
            }
            var jsattr = [{"parentattr":"data-jsfunction","parentvalue":"Field Type Settings","cases":$(this).find('.selectCases').val(),"caseCond":$(this).find(".selectCasesCond").val(),"finaljsattr":finalJSattr}]
          }else if ($('#selectField').attr('selected-field-type') =='CharField' && $('#selectField').attr('data-validated') != undefined && $('#selectField').attr('data-validated') == 'true'){
            var rgba_value_bg_selected= hexToRGB($(this).find('.boolean-text-silder-formattings-selected').find('.boolean-bg-color-selected').find('input').val(),$(this).find('.boolean-text-silder-formattings-selected').find('.boolean-bg-color-opacity-selected').find('select').val())
              var rgba_value_bg_not_selected = hexToRGB($(this).find('.boolean-text-silder-formattings-not-selected').find('.boolean-bg-color-not-selected').find('input').val(),$(this).find('.boolean-text-silder-formattings-not-selected').find('.boolean-bg-color-opacity-not-selected').find('select').val())
              var finalJSattr = {
              'column':$("#selectField").val(),
              'style_slider':'text_silder',
              'selected':{
                'text-color-selected':$(this).find('.boolean-text-silder-formattings-selected').find('.boolean-text-color-selected').find('input').val(),
                'text-true':$(this).find('.boolean-text-silder-text').find('.boolean-text-true').find('input').val(),
                'bg-color-selected':$(this).find('.boolean-text-silder-formattings-selected').find('.boolean-bg-color-selected').find('input').val(),
                'bg-color-opacity-selected':$(this).find('.boolean-text-silder-formattings-selected').find('.boolean-bg-color-opacity-selected').find('select').val(),
                'rgba_value_bg-selected':rgba_value_bg_selected,
              },
              'not_selected':{
                'text-color-not-selected':$(this).find('.boolean-text-silder-formattings-not-selected').find('.boolean-text-color-not-selected').find('input').val(),
                'text-false':$(this).find('.boolean-text-silder-text').find('.boolean-text-false').find('input').val(),
                'bg-color-not-selected':$(this).find('.boolean-text-silder-formattings-not-selected').find('.boolean-bg-color-not-selected').find('input').val(),
                'bg-color-opacity-not-selected':$(this).find('.boolean-text-silder-formattings-not-selected').find('.boolean-bg-color-opacity-not-selected').find('select').val(),
                'rgba_value_bg-not-selected':rgba_value_bg_not_selected,
              }
              }
          }else if ($('#selectField').attr('selected-field-type') =='IntegerField'){
            var finalJSattr = {
              'minvalue':$('#minvalue').val(),
              'maxvalue':$('#maxvalue').val(),
              'stepvalue':$('#stepvalue').val(),
              'slider_color':$('#numeric_range_slider_color').val(),
            }
            var jsattr = [{"parentattr":"data-jsfunction","parentvalue":"Field Type Settings","cases":$(this).find('.selectCases').val(),"caseCond":$(this).find(".selectCasesCond").val(),"finaljsattr":finalJSattr}]
          }else if ($('#selectField').attr('selected-field-type') =='FloatField'){
            var finalJSattr = {
              'minvalue':$('#minvalue').val(),
              'maxvalue':$('#maxvalue').val(),
              'stepvalue':$('#stepvalue').val(),
              'slider_color':$('#numeric_range_slider_color').val(),
            }
            var jsattr = [{"parentattr":"data-jsfunction","parentvalue":"Field Type Settings","cases":$(this).find('.selectCases').val(),"caseCond":$(this).find(".selectCasesCond").val(),"finaljsattr":finalJSattr}]
          }
        }else if ($(this).find('.selectJSproperty').val() == "JS Action Populate"){

          if ($(this).find('.js_action_populate').find('.static_field').val() =='static'){
            var finalJSattr = {'column':$("#selectField").val(),'first_dependant_field':$(this).find('.js_action_populate').find('.first_dependant_field').val(),'second_dependant_field':null,'operation':$(this).find('.js_action_populate').find('.operation').val(),'static':$(this).find('.js_action_populate').find('.static_field').val(),'static_value':$(this).find('.js_action_populate').find('.static_value').val()}
          }else if ($(this).find('.js_action_populate').find('.static_field').val() =='master_field_comparison'){
            var finalJSattr = {'column':$("#selectField").val(),'first_dependant_field':$(this).find('.js_action_populate').find('.first_dependant_field').val(),'second_dependant_field':null,'master_table':$(this).find('.js_action_populate').find('.master_field_table').val(),'master_column':$(this).find('.js_action_populate').find('.master_field_column').val(),'master_column_datatype':$(this).find('.js_action_populate').find('.master_field_column').find("option:selected").attr('data-type'),'conditions':JSON.parse($(this).find('.js_action_populate').find('button').attr('data-list')),'operation':$(this).find('.js_action_populate').find('.operation').val(),'static':$(this).find('.js_action_populate').find('.static_field').val(),'static_value':$(this).find('.js_action_populate').find('.static_value').val()}
          }else{
            var finalJSattr = {'column':$("#selectField").val(),'first_dependant_field':$(this).find('.js_action_populate').find('.first_dependant_field').val(),'second_dependant_field':$(this).find('.js_action_populate').find('.second_dependant_field').val(),'operation':$(this).find('.js_action_populate').find('.operation').val(),'static':$(this).find('.js_action_populate').find('.static_field').val(),'static_value':$(this).find('.js_action_populate').find('.static_value').val()}
          }
          var jsattr =[{"parentattr":"data-jsfunction","parentvalue":"JS Action Populate","cases":$(this).find('.selectCases').val(),"caseCond":$(this).find(".selectCasesCond").val(),"finaljsattr":finalJSattr}]
        }
        else if ($(this).find('.selectJSproperty').val() == "Show field info"){
          var finalJSattr = {'column':$("#selectField").val(),'linkedTable':$(this).find('.showFieldInfoTableName').val(),'linkedTableColumn':$(this).find('.linkedColumnsShowFieldInfo').val(),'linkedAddColumns':$(this).find('.addColumnsShowFieldInfo').val()}
          var jsattr =[{"parentattr":"data-jsfunction","parentvalue":"Show field info","cases":$(this).find('.selectCases').val(),"caseCond":$(this).find(".selectCasesCond").val(),"finaljsattr":finalJSattr}]
        }
        else if ($(this).find('.selectJSproperty').val() == "Validation based message"){
          ap_case = $(this).find('.selectCases').val()
          if(fk_case.length > 0){
            if(ap_case.length == 0){
              is_fk_ap = is_fk_ap + 1
            } else{
              for(let r = 0; r < fk_case.length; r++){
                if(ap_case.includes(fk_case[r])){
                  is_fk_ap = is_fk_ap + 1
                }
              }
            }
          } else if(fk_case.length == 0){
            is_fk_ap = is_fk_ap + 1
          } else {
            is_fk_ap = is_fk_ap + 1
          }
          if(allFieldsColumnsType[allFieldsColumns.indexOf($("#selectField").val())] == "ForeignKey"){
              var dropdown = "Yes"
            }
          else if(dropDown[allFieldsColumns.indexOf($("#selectField").val())] > 0)
          {
            var dropdown = "Yes"
          }
          else{
            var dropdown = "No"
          }

          var compute_fields = $(this).find(".val_based_msg_global_var").val()
          var msg_text = $(this).find(".val_based_msg_text").val()

          var dic = {}
          var arr = []

          $(this).find(".stylingJsValidationColor").find(".stylingJsValidationColorCont").each(function() {
              var dict = {}
              dict['condition'] = $(this).find('.stylingJsValidationColorCond').val()
              if($(this).find('.stylingJsValidationColorVal').css('display') != 'none'){
                dict['value'] = $(this).find('.stylingJsValidationColorVal').find('select').val();
              } else {
                dict['value'] = $(this).find('.stylingJsValidationColorValTag').find('select').val();
              }
              dict['selectedColumn'] = $(this).find('.stylingJsValidationColorCol').val();
              dict['color'] = $(this).find('.stylingJsValidationColorInput').val();
              if(dict['value'] != null){
                arr.push(dict)
              }
            })
          dic["styleValidation"] = arr

          var text_color = $(this).find(".val_based_msg_txt_color").val()
          let eqid = $(this).find(".val_based_msg_global_var_eq").attr('data-eq_id')
          var finalJSattr1 = [{"table_name":cvtableName,"table_column":$("#selectField").val(),"dropdown_value":dropdown,"compute_fields":compute_fields,"msg_text":msg_text, "eqid":eqid, "text_color":text_color, "condition":dic}]
          finalJSattr.push(finalJSattr1)
          var jsattr =[{"parentattr":"data-jsfunction","parentvalue":"Validation based message","cases":$(this).find('.selectCases').val(),"caseCond":$(this).find(".selectCasesCond").val(),'table':cvtableName,"finaljsattr":finalJSattr,"compute_fields":compute_fields,"msg_text":msg_text,"eqid":eqid}]
        }
        else{
        }
        if(1){
          var SF = document.getElementById("selectField")
          var SF1 = SF.options[SF.selectedIndex].text
          if (len != 1) {
            try{
              FA[`${SF1}`][0]['jsattr'].push(jsattr[0])
            }catch{

            }
          } else {
            var a;
            for(let i = 0; i < allFieldsColumns.length; i++) {
              if (allFieldsColumns[i] == SF.options[SF.selectedIndex].value) {
                a = verboseName[i];
                break;
              }
            }
            FA[`${SF1}`]= [{"tableattr":[{"attr":"Tablename","value":cvtableName}],"cssattr":[{"attr":"Datatype","value":SF.options[SF.selectedIndex].value,"verbose":a}],"jsattr":jsattr}]
            fieldAttributesCV.forEach((element)=>{
          for(let [key,value] of Object.entries(element) ) {
            if(element.hasOwnProperty(key)){
            }
          }
        })
          }
        if(len > 1) {
          let j = 0;
          for(let i = 0; i < fieldAttributesCV.length; i++) {
            if(fieldAttributesCV[i].hasOwnProperty($('#selectField').val())) {
              j++;
              fieldAttributesCV.splice(i,1);
              i--;
              if(j > 0) {
                j = 0;
              }
            }
          }
        }
        fieldAttributesCV.push(FA)
        for (let i in fieldAttributesCV){
          if (Object.keys(FA)[0] == Object.keys(fieldAttributesCV[i])[0]){
            fieldAttributesCV[i] = FA
          }
        }
        $('#parentfieldname').val('').trigger("change")
        $('#childfieldname').val('').trigger("change")
        $('#reftablename').val('').trigger("change")
        $('#parentcolumn').empty()
        $('#childcolumn').empty()
        $('#parentcolumn').append(`<option value="">----</option>`)
        $('#childcolumn').append(`<option value="">----</option>`)
        $('#reftablename1').val('').trigger("change")
        $('#parentcolumn1').empty()
        $('#reftablename2').val('').trigger("change")
        $('#parentcolumn2').empty()
        $('#parentcolumn3').empty()
        $('#parentcolumn1').append(`<option value="">----</option>`)
        $('#parentcolumn2').append(`<option value="">----</option>`)
        $('#parentcolumn3').append(`<option value="">----</option>`)
        if(is_fk_ap > 1){
          if(is_alert){
            is_alert = false
            Swal.fire({icon: 'warning',text: 'Conflicting JS properties. Auto-populate and Foreign Key cannot share the common field configuration.'});
          }
        } else {
          if(is_ap){
            changeFieldType($('#selectField').val(),"Foreign-key-relation")
          }
        }
      }
      })
    }
    function jsActionValidationAppendSecond(obj,secondList,agg){
      $(obj).closest('.js_action_populate').find('.second_dependant_field').select2('destroy');
      $(obj).closest('.js_action_populate').find('.second_dependant_field').empty();
      for (let i in allFieldsColumns){
        if (secondList.includes(allFieldsColumnsType[i])){
          $(obj).closest('.js_action_populate').find('.second_dependant_field').append(`<option value="${allFieldsColumns[i]}" data-type="${allFieldsColumnsType[i]}">${verboseName[i]}</option>`)
        }
      }
      $(obj).closest('.js_action_populate').find('.second_dependant_field').select2();
      $(obj).closest('.js_action_populate').find('.operation').select2('destroy');
      $(obj).closest('.js_action_populate').find('.operation').empty();
      for (let i in agg){
        $(obj).closest('.js_action_populate').find('.operation').append(`<option value="${agg[i]}">${agg[i]}</option>`)
      }
      $(obj).closest('.js_action_populate').find('.operation').select2();
    }
    function jsActionValidation(obj){
      var dateFields = ['DateField','DateTimeField']
      var timeFields = ['TimeField']
      var intFields = ['IntegerField','FloatField','BigIntegerField']
      var outputColType = $('#selectField').attr('selected-field-type')
      var dataTypeFirst =$(obj).find('option:selected').attr('data-type')
      var aggregation = ['addition','subtraction','multiplication','division']
      if (intFields.includes(outputColType)){
        if(intFields.includes(dataTypeFirst)){
          jsActionValidationAppendSecond(obj,intFields,aggregation)
        }else if (dateFields.includes(dataTypeFirst)){
          jsActionValidationAppendSecond(obj,dateFields,['subtraction'])
        }else if (timeFields.includes(dataTypeFirst)){
          jsActionValidationAppendSecond(obj,timeFields,['subtraction'])
        }
      }else if (dateFields.includes(outputColType)){
        if(intFields.includes(dataTypeFirst)){
          jsActionValidationAppendSecond(obj,dateFields,['subtraction','addition'])
        }else if (dateFields.includes(dataTypeFirst)){
          jsActionValidationAppendSecond(obj,intFields,['subtraction','addition'])
        }
      }else if (timeFields.includes(outputColType)){
        if(intFields.includes(dataTypeFirst)){
          jsActionValidationAppendSecond(obj,timeFields,['subtraction','addition'])
        }else if (timeFields.includes(dataTypeFirst)){
          jsActionValidationAppendSecond(obj,intFields,['subtraction','addition'])
        }
      }else {
        if (dateFields.includes(dataTypeFirst)){
          jsActionValidationAppendSecond(obj,dateFields,['subtraction'])
        }else if(intFields.includes(dataTypeFirst)){
          jsActionValidationAppendSecond(obj,intFields,aggregation)
        }else if (timeFields.includes(dataTypeFirst)){
          jsActionValidationAppendSecond(obj,timeFields,['subtraction'])
        }
      }


    }
    </script>

<!-- Decision box-->
<script>
  var decisionField = {}

  // To
  $('#approval_mailer_type').off('select2:select').on('select2:select', function(){
    if ($(this).val() == 'dynamic_approver' || $(this).val() == 'dynamic_user') {
      $('#approval_email_container').css('display', 'none');
      $('#approval_email_list').val([]).trigger('change');
    } else {
      $('#approval_email_container').css('display', 'block');
    }
  });
  $('#approval_decision_mailer_type').off('select2:select').on('select2:select', function(){
    if ($(this).val() == 'dynamic_approver' || $(this).val() == 'dynamic_user') {
      $('#approval_email_decision_container').css('display', 'none');
      $('#approval_email_decision').val([]).trigger('change');
    } else {
      $('#approval_email_decision_container').css('display', 'block');
    }
  });

  // CC
  $('#approval_mailer_typeCC').off('select2:select').on('select2:select', function(){
    if ($(this).val() == 'dynamic_approver' || $(this).val() == 'dynamic_user') {
      $('#approval_email_containerCC').css('display', 'none');
      $('#approval_email_listCC').val([]).trigger('change');
    } else {
      $('#approval_email_containerCC').css('display', 'block');
    }
  });
  $('#approval_decision_mailer_typeCC').off('select2:select').on('select2:select', function(){
    if ($(this).val() == 'dynamic_approver' || $(this).val() == 'dynamic_user') {
      $('#approval_email_decision_containerCC').css('display', 'none');
      $('#approval_email_decisionCC').val([]).trigger('change');
    } else {
      $('#approval_email_decision_containerCC').css('display', 'block');
    }
  });

  // BCC
  $('#approval_mailer_typeBCC').off('select2:select').on('select2:select', function(){
    if ($(this).val() == 'dynamic_approver' || $(this).val() == 'dynamic_user') {
      $('#approval_email_containerBCC').css('display', 'none');
      $('#approval_email_listBCC').val([]).trigger('change');
    } else {
      $('#approval_email_containerBCC').css('display', 'block');
    }
  });
  $('#approval_decision_mailer_typeBCC').off('select2:select').on('select2:select', function(){
    if ($(this).val() == 'dynamic_approver' || $(this).val() == 'dynamic_user') {
      $('#approval_email_decision_containerBCC').css('display', 'none');
      $('#approval_email_decisionBCC').val([]).trigger('change');
    } else {
      $('#approval_email_decision_containerBCC').css('display', 'block');
    }
  });

  $('#selectElement').on('change',function(){
    var elementselected = $(this).children("option:selected").val();
    if(elementselected == 'create_view'){
      $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'CreateformTableNames',
            'processName':process_name,
            'subProcessName':subprocess_name,
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            decisionField = data.createviewdet
            $('#decisiontable').append(`<p></p><p>Select table</p>`)
            $('#decisiontable').append(` <select id='selectdecisiontable' class="select2 form-control" name="Selectdecision">
            <option value="" disabled selected>Select table</option>
          </select>`)
            for(j in data.createviewdet['table_name']){
              $('#selectdecisiontable').append(`<option value="${j}">${data.createviewdet['table_name'][j]}</option>`)
              }
              $('#selectdecisiontable').select2()
            },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
  })
    }
  })
    $('#decisiontable').delegate('#selectdecisiontable','change',function(){
      $('#decisiontablefield').empty()
      $('#decisiontablefield').append(`<p></p><p>Select multiple condition parameter</p>`)
      $('#decisiontablefield').append(`<select id='selectmcparameter' class="select2 form-control" name="Selectmcparameter">
            <option value="" disabled selected>Select multiple condition value</option>
            <option value="and">And</option>
            <option value="or">Or</option>
            <option value="na">Not applicable</option>
          </select>`)
      $('#decisiontablefield').append(`<p></p><p>Select field level condition</p>`)
      $('#decisiontablefield').append(` <select id='selectdecisionfield' class="select2 form-control" name="Selectdecisionfield">
            <option value="" disabled selected>Select field</option>
          </select>`)
      var tbname = document.getElementById("selectdecisiontable")
      var tb = tbname.options[tbname.selectedIndex].value
      var listfields = JSON.parse(decisionField['fields'][tb])
      for(i in listfields){
        $('#selectdecisionfield').append(`<option value="${listfields[i]}">${listfields[i]}</option>`)
      }
      $('#selectmcparameter').select2()
      $('#selectdecisionfield').select2()
      $('#decisiontablefield').append(` <p></p><p>Select condition</p> <select id='selectcondition' class="select2 form-control" name="Selectconditionfield">
            <option value="" disabled selected>Select condition</option>
            <option value="GT">"Greater than"</option>
            <option value="LT">"Less than"</option>
            <option value="E">"Equal to"</option>
          </select>`)
      $('#selectcondition').select2()
      $('#decisiontablefield').append(`<p></p><label>Value:</value> <input type="text" id="valueoffield" name="fieldvalue">`)
  })

  $('#decisiontablefield').delegate('#selectmcparameter','change',function(){
    var mcselected = document.getElementById('selectmcparameter')
    var mc = mcselected.options[mcselected.selectedIndex].value
    if(mc=="na"){
      $( '#scbutton').remove();
    }
    else{
      $( '#scbutton').remove();
      $('#decisiontablefield').append(`<button type="button" class="btn btn-primary" id="scbutton">Save condition</button>`)
    }
  })

  $('#IdforNo').on('click',function(){
    let currentDevMode = "{{current_dev_mode}}"
    if(currentDevMode === "Edit" || currentDevMode === "Build"){
        $.ajax({
      url: window.location.pathname,
      data: {
      'operation': "fetchDependencies",
      'item_group_code':$('#graphContainerID').attr('data-process_code'),
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
      if (data.appDependency.length > 0) {
        $('#dependencyTable').empty()

        for(var i=0;i<data.appDependency.length;i++){

             $('#dependencyTable').append(`<tr><td style="font-weight:bold">${i+1}.</td><td style="font-weight:bold;text-align:start">&nbsp;&nbsp;${data.appDependency[i]}</td></tr>`)
        }
          $('#dependencyChecker').modal('show')
          $('#btn_dependencySave').off('click').on('click',function(){
                var cellSelected=editorCopy.editor.graph.getModel().getCell($('#NoText').find('.modal-footer').attr('data-shapeid'));
              cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
              if (cellShapeUniqueID<0){
                var itemID="Notext"+Math.random()
                cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
              }
              else{
                var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
              }
          })
        } else {
      var cellSelected=editorCopy.editor.graph.getModel().getCell($('#NoText').find('.modal-footer').attr('data-shapeid'));
      cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
      if (cellShapeUniqueID<0){
        var itemID="Notext"+Math.random()
        cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
      }
      else{
        var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
      }
    }
        },
        error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
        });
    }else{
      var cellSelected=editorCopy.editor.graph.getModel().getCell($('#NoText').find('.modal-footer').attr('data-shapeid'));
      cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
      if (cellShapeUniqueID<0){
        var itemID="Notext"+Math.random()
        cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
      }
      else{
        var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
      }
    }
  })

  $('#IdforYes').on('click',function(){
    let currentDevMode = "{{current_dev_mode}}"
    if(currentDevMode === "Edit" || currentDevMode === "Build"){
        $.ajax({
      url: window.location.pathname,
      data: {
      'operation': "fetchDependencies",
      'item_group_code':$('#graphContainerID').attr('data-process_code'),
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
      if (data.appDependency.length > 0) {
        $('#dependencyTable').empty()

        for(var i=0;i<data.appDependency.length;i++){

             $('#dependencyTable').append(`<tr><td style="font-weight:bold">${i+1}.</td><td style="font-weight:bold;text-align:start">&nbsp;&nbsp;${data.appDependency[i]}</td></tr>`)
        }
          $('#dependencyChecker').modal('show')
          $('#btn_dependencySave').off('click').on('click',function(){
            var cellSelected=editorCopy.editor.graph.getModel().getCell($('#YesText').find('.modal-footer').attr('data-shapeid'));
            cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
            if (cellShapeUniqueID<0){
              var itemID="Yestext"+Math.random()
              cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
            }
            else{
              var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
            }
          })
      } else {
      var cellSelected=editorCopy.editor.graph.getModel().getCell($('#YesText').find('.modal-footer').attr('data-shapeid'));
      cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
      if (cellShapeUniqueID<0){
        var itemID="Yestext"+Math.random()
        cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
      }
      else{
        var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
      }
      }
      },
      error: function () {
      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
      });
    }else{
  var cellSelected=editorCopy.editor.graph.getModel().getCell($('#YesText').find('.modal-footer').attr('data-shapeid'));
  cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
  if (cellShapeUniqueID<0){
    var itemID="Yestext"+Math.random()
    cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
  }
  else{
    var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
  }
    }
  })
  decisionattr=[]
  $('#decisiontablefield').delegate('#scbutton','click',function(){
    var tbname = document.getElementById("selectdecisiontable")
    var tb = tbname.options[tbname.selectedIndex].text
    var fnname = document.getElementById("selectdecisionfield")
    var fn = fnname.options[fnname.selectedIndex].value
    var selectcondition = document.getElementById("selectcondition")
    var sc = selectcondition.options[selectcondition.selectedIndex].value
    var inpvalue = $('#valueoffield').val()
    var fieldattributes={}
    fieldattributes[`${fn}`] = [{"tableattr":[{'attr':'Tablename','value':tb}],"cssattr":[{'attr':'Datatype','value':'Integer'}],
                                "dbattr":[{'conditionattr':sc,'conditionvalue':inpvalue}]}]
    decisionattr.push(fieldattributes)
  })
  $('#config_button').on('select2:select',function(){
    if ($(this).val()=='Set Approval and Email'){
      $('#email_list').css('display','block')
      $('.select2email').select2({
        tags:true
      });
    } else {
      $('#email_list').css('display','none');
      email_approval.splice(0,email_approval.length)
      email_decision.splice(0,email_decision.length)
    }
  })
  $('#decisionModal').find('.close').on('click',function() {
    $('#carouselExampleIndicators').find('.carousel-inner').find('div').removeClass('active')
    $('#carouselExampleIndicators').find('.carousel-inner').find('div').eq(0).addClass('active')
    $('#carouselExampleIndicators').find('#email_list').find('#approval_email_list').val('').trigger('change');
    $('#carouselExampleIndicators').find('#email_list').find('#approval_email_list').empty();
    $('#carouselExampleIndicators').find('#email_list').find('#approval_email_decision').val('').trigger('change');
    $('#carouselExampleIndicators').find('#email_list').find('#approval_email_decision').empty();
    $('#carouselExampleIndicators').find('#email_list').css('display','none');
    $('#email_list').css('display','none');
    $('#config_button').val('Set Approval').trigger('change');
    $('#config_smtp_button').val('default').trigger('change');
    $('#defaultValueConfigDecision').find('#selectAllDecison').prop('checked',false);
    $('#carouselExampleIndicators').find('#config_table').css('display','');
    $('#carouselExampleIndicators').find('#addrow').css('display','');
    $('#carouselExampleIndicators').find('.carousel-inner').find('.carousel-item').eq(1).css('display','');
    var len = email_approval.length;
    email_approval.splice(0,len);
    len = email_decision.length;
    email_decision.slice(0,len);
  })

  $('#defaultValueConfigDecision').find('#selectAllDecison').on('change',function() {
    if ($('#defaultValueConfigDecision').find('#selectAllDecison').prop('checked') == true) {
      $('#carouselExampleIndicators').find('#addrow').css('display','none');
      $('#carouselExampleIndicators').find('#config_table').css('display','none');
      $('#carouselExampleIndicators').find('.carousel-inner').find('.carousel-item').eq(1).css('display','none');
      $('.configure_button').prop('disabled',true);
      $('#carouselExampleIndicators').find('.carousel-control-next-icon').attr("data-slide-to","2")
      $('#carouselExampleIndicators').find('.carousel-control-prev-icon').attr("data-slide-to","0")
      $('#carouselExampleIndicators').find('.carousel-inner').find('.carousel-item').eq(2).addClass('active');
      $('#carouselExampleIndicators').find('.carousel-inner').find('.carousel-item').eq(0).removeClass('active');

    } else {
      $('#carouselExampleIndicators').find('#config_table').css('display','');
      $('#carouselExampleIndicators').find('#addrow').css('display','');
      $('#carouselExampleIndicators').find('.carousel-control-next-icon').removeAttr("data-slide-to")
      $('#carouselExampleIndicators').find('.carousel-control-prev-icon').removeAttr("data-slide-to")
      $('#carouselExampleIndicators').find('.carousel-inner').find('.carousel-item').eq(1).css('display','');
      if ($('#carouselExampleIndicators').find('#config_table').find('#configuration_row').find('tr').find('td').eq(1).find('span').html() != '') {
        $('.configure_button').prop('disabled',false);
      }
    }
  })





  $('#savedecbox').off('click').on('click', function () {
      let currentDevMode = "{{current_dev_mode}}"
      var unique = tablesArray.filter((v, i, a) => a.indexOf(v) === i);
      var tb = $("#select_conditionTable").val()
      var approval_email_list;
      var approval_decision_email_list;
      var decisionCheck;
      var filter_dict_check = {}
      var condition_dict_check = {}
      var decision_list = {};
      var email_data =  CKEDITOR.instances['email_message'].getData()
      var email_data_send_back = CKEDITOR.instances['email_message_send_back'].getData()
      var email_data_delegate = CKEDITOR.instances['email_message_delegate'].getData()
      var email_data_mention = CKEDITOR.instances['email_message_mention'].getData()
      var approval_notification_subject =  $('#approvalNotificationSubject').val();
      var approval_notification_subject_send_back = $('#approvalNotificationSubject_send_back').val()
      var approval_notification_subject_delegate = $('#approvalNotificationSubject_delegate').val()
      var approval_notification_subject_mention = $('#approvalNotificationSubject_mention').val()
      var approval_decision_message_approve =  CKEDITOR.instances['approval_decision_message_approve'].getData()
      var approval_decision_message_reject =  CKEDITOR.instances['approval_decision_message_reject'].getData()
      var approval_decision_message_approve_subject =  $('#approvalNotificationSubjectAN').val();
      var approval_decision_message_reject_subject =  $('#approvalNotificationSubjectRN').val();
      var dec_shape_id = $(this).parent().attr('data-shapeid')
      var approverMailerType = 'static';
      var approverDecisionMailerType = 'static';
      var approverMailerTypeCC = 'static';
      var approverDecisionMailerTypeCC = 'static';
      var approverMailerTypeBCC = 'static';
      var approverDecisionMailerTypeBCC = 'static';
      var approval_email_listCC;
      var approval_decision_email_listCC;
      var approval_email_listBCC;
      var approval_decision_email_listBCC;
      var approvalInMailApprovalOption = false;
      var mailForApproverAdded = false;
      var notify_existing = false;
      var approvalSkipLevelOption = false;
      var approvalSendAttachmentWithDecisionMail = false;
      var approvalMailAdditionalConfig = {}
      var smtpConfigKey = "";

      boolSave = false;
      if ($('#defaultValueConfigDecision').find('#selectAllDecison').prop('checked') == true) {
        boolSave = true;
      } else {
        if($('#condition_name_append').text() != '' && $('#select_conditionTable').val() != null) {
          boolSave = true;
        } else {
          boolSave = false;
        }
      }
      if($('#config_button').val()=="Set Approval and Email"){

        approverMailerType = $('#approval_mailer_type').val();
        if (approverMailerType == 'static') {
          approval_email_list=JSON.stringify($('#approval_email_list').val())
        }
        approverDecisionMailerType = $('#approval_decision_mailer_type').val();
        if (approverDecisionMailerType == 'static') {
          approval_decision_email_list=JSON.stringify($('#approval_email_decision').val())
        }
        // CC
        approverMailerTypeCC = $('#approval_mailer_typeCC').val();
        if (approverMailerTypeCC == 'static') {
          approval_email_listCC = $('#approval_email_listCC').val();
        } else {
          approval_email_listCC = [];
        }
        approverDecisionMailerTypeCC = $('#approval_decision_mailer_typeCC').val();
        if (approverDecisionMailerTypeCC == 'static') {
          approval_decision_email_listCC = $('#approval_email_decisionCC').val();
        } else {
          approval_decision_email_listCC = [];
        }
        // BCC
        approverMailerTypeBCC = $('#approval_mailer_typeBCC').val();
        if (approverMailerTypeBCC == 'static') {
          approval_email_listBCC = $('#approval_email_listBCC').val();
        } else {
          approval_email_listBCC = [];
        }
        approverDecisionMailerTypeBCC = $('#approval_decision_mailer_typeBCC').val();
        if (approverDecisionMailerTypeBCC == 'static') {
          approval_decision_email_listBCC = $('#approval_email_decisionBCC').val();
        }

        smtpConfigKey = $('#config_smtp_button').val()

        approvalInMailApprovalOption = $('#approvalInMailApprovalOption').prop('checked');
        mailForApproverAdded = $('#mailForApproverAdded').prop('checked')
        notify_existing = $('#notify_existing').prop('checked')
        approvalSkipLevelOption = $("#approvalSkipLevelOption").prop("checked");
        approvalSendAttachmentWithDecisionMail = $("#approvalSendAttachmentWithDecisionMail").prop("checked");

        approvalMailAdditionalConfig = {
          'approver_mailer_typeCC': approverMailerTypeCC,
          'approver_decision_mailer_typeCC': approverDecisionMailerTypeCC,
          'approval_email_listCC':approval_email_listCC,
          'approval_decision_email_listCC':approval_decision_email_listCC,
          'approver_mailer_typeBCC': approverMailerTypeBCC,
          'approver_decision_mailer_typeBCC': approverDecisionMailerTypeBCC,
          'approval_email_listBCC':approval_email_listBCC,
          'approval_decision_email_listBCC':approval_decision_email_listBCC,
        };
      }

      $('#defaultValueConfigDecision').find('#selectAllDecison').prop('checked');
      function returnDataAttr() {
        if(($("#modifyColumnTable").val()).length > 0){
          let data_attr_ = {}
          let value__ = $("#modifyColumnTable").val()
          for(let i = 0; i < ($("#modifyColumnTable").val()).length; i++){
            data_attr_[value__[i]] = {}
          }
          $("#modifyColumn_").find("option").each(function() {
            if($("#modifyColumn_").val().includes($(this).attr("value"))){
              data_attr_[$(this).attr("data-table")][$(this).attr("value")] = {"data-type":$(this).attr("data-type"),
                "data-null":$(this).attr("data-null"),
                "data-choice": $(this).attr("data-null")
              }
            }
          })
          return (data_attr_)
        } else {
          return "NULL"
        }
      }
      let modifyColumnConfig = false
      if(($("#modifyColumnTable").val()).length > 0) {
        modifyColumnConfig = true
      }
      if ($("#selectApprovalType").val() == "hierarchical" || $("#selectApprovalType").val() == "hierarchical_user") {
        var approvalConfig = {
          hierarchy_group: $('#selectApprovalHierarchyGroup').val(),
          starting_level: $('#selectApprovalHierarchyStartingLevel').val(),
          ending_level: $('#selectApprovalHierarchyEndingingLevel').val(),
          approver_type: $('#selectApproverType').val(),
        };
      } else if ($("#selectApprovalType").val() == "dynamic_group") {
        var approvalConfig = {
          table_name: $('#selectApproverGroupTable').val(),
          field: $('#selectApproverGroupField').val(),
          approver_type: $('#selectApproverType').val(),
        };
      } else if ($("#selectApprovalType").val() == "dynamic_user") {
        var approvalConfig = {
          table_name: $('#selectApproverUserTable').val(),
          field: $('#selectApproverUserField').val(),
          approver_type: $('#selectApproverType').val(),
        };
      } else if ($("#selectApprovalType").val() == "dynamic_master_group" || $("#selectApprovalType").val() == "dynamic_master_user") {
        var approvalConfig = {
          parameter: $('#selectApproverGroupEntryParameter').val(),
          approver_type: $('#selectApproverType').val(),
        };
        if ($('#selectApproverGroupEntryParameter').val() == 'extract_from_entry') {
          approvalConfig['parameter_table_name'] = $('#selectTableForParameter').val();
          approvalConfig['parameter_field'] = $('#selectFieldForParameter').val();
        }
        // Master Config
        var approvalMasterConfig = [];
        $('.masterBasedApprovalLevel').each(function(){
          var levelConfig = {
            'table_name': $(this).find('.paramterMappingTable').val(),
            'mapping_field': $(this).find('.paramterMappingField').val(),
            'approver_field': $(this).find('.paramterMappingApproverField').val(),
          };
          approvalMasterConfig.push(levelConfig);
        });
        approvalConfig['master_level_config'] = approvalMasterConfig;
      } else if ($("#selectApprovalType").val() == "static_user") {
        var approvalConfig = {
          user_list: $('#selectApproverUsers').val(),
          approver_type: $('#selectApproverType').val(),
        };
      } else if ($("#selectApprovalType").val() == "multi_level") {
        var approvalConfig = {
          level_config: JSON.parse($('#multiLevelApprovalButton').attr('data-config')),
        };
      } else {
        var approvalConfig = {approver_type: $('#selectApproverType').val()};
      }
      var attachmentConfig = JSON.parse($("#insert_attachment").attr('data-config'));
      var attachmentConfigMention = JSON.parse($("#insert_attachment_mention").attr('data-config'));
      attachmentConfig['addUploadedFilesAsAttachment'] = $('#addUserUploadedFilesAsAttachment').val();


      if ($('#defaultValueConfigDecision').find('#selectAllDecison').prop('checked') == true) {
        decisionCheck = 'check';
        filter_dict_check = {"1":{"table_name":"","condition_name":"","condition_string":"","condition_value":[],"input_value":[] } };
        condition_dict_check = {"":[]}
        decision_list = {
        'decision_name': $("#decision_name").html(),
        'decision_purpose': $("#decision_purpose").html(),
        'decision_type': $("#decision_config").val(),
        'actions': $("#config_button").val(),
        'smtpConfigKey': smtpConfigKey,
        'approval_type': $("#selectApprovalType").val(),
        'allow_users_to_set_approval_parameter': $("#allowUsersToSetApprovers").val(),
        'maximum_approvers_allowed': $('#maximum_approvers').val(),
        'maximum_levels_allowed': $('#maximum_levels').val(),
        'groups': $("#select2multiple").val(),
        'approval_config': approvalConfig,
        'condition': condition_dict_check,
        'condition_template':filter_dict_check,
        'approver_mailer_type': approverMailerType,
        'approver_decision_mailer_type': approverDecisionMailerType,
        'approval_email_list':approval_email_list,
        'approval_decision_email_list':approval_decision_email_list,
        'decisionCheck':decisionCheck,
        'data_shapeID':dec_shape_id,
        'message': email_data,
        'message_send_back': email_data_send_back,
        'message_delegate': email_data_delegate,
        'message_mention': email_data_mention,
        'approval_notification_subject': approval_notification_subject,
        'approval_notification_subject_send_back': approval_notification_subject_send_back,
        'approval_notification_subject_delegate': approval_notification_subject_delegate,
        'approval_notification_subject_mention': approval_notification_subject_mention,
        'approval_decision_message_approve': approval_decision_message_approve,
        'approval_decision_message_reject': approval_decision_message_reject,
        'approval_decision_message_approve_subject': approval_decision_message_approve_subject,
        'approval_decision_message_reject_subject': approval_decision_message_reject_subject,
        'modifyColumn': modifyColumnConfig,
        'modifyColumnTable': $("#modifyColumnTable").val(),
        'modifyColumnColumn': $("#modifyColumn_").val(),
        'modifyColumnAttr': returnDataAttr(),
        'allowApprovalAssignment': $("#allowApprovalAssignment").val(),
        'approvalInMailApprovalOption': approvalInMailApprovalOption,
        'mailForApproverAdded':mailForApproverAdded,
        "notify_existing":notify_existing,
        'approvalSkipLevelOption': approvalSkipLevelOption,
        'approvalSendAttachmentWithDecisionMail': approvalSendAttachmentWithDecisionMail,
        'approval_mail_additional_config': approvalMailAdditionalConfig,
        'approval_notification_attachment_config': attachmentConfig,
        'approval_notification_attachment_config_mention': attachmentConfigMention,
      }

      } else {
        decisionCheck = 'uncheck';
        decision_list = {
        'decision_name': $("#decision_name").html(),
        'decision_purpose': $("#decision_purpose").html(),
        'decision_type': $("#decision_config").val(),
        'actions': $("#config_button").val(),
        'smtpConfigKey': smtpConfigKey,
        'approval_type': $("#selectApprovalType").val(),
        'allow_users_to_set_approval_parameter': $("#allowUsersToSetApprovers").val(),
        'maximum_approvers_allowed': $('#maximum_approvers').val(),
        'maximum_levels_allowed': $('#maximum_levels').val(),
        'groups': $("#select2multiple").val(),
        'approval_config': approvalConfig,
        'condition': condition_dict,
        'condition_template':filter_dict,
        'approver_mailer_type': approverMailerType,
        'approver_decision_mailer_type': approverDecisionMailerType,
        'approval_email_list':approval_email_list,
        'approval_decision_email_list':approval_decision_email_list,
        'decisionCheck':decisionCheck,
        'data_shapeID':dec_shape_id,
        'message': email_data,
        'message_send_back': email_data_send_back,
        'message_delegate': email_data_delegate,
        'message_mention': email_data_mention,
        'approval_notification_subject': approval_notification_subject,
        'approval_notification_subject_send_back': approval_notification_subject_send_back,
        'approval_notification_subject_delegate': approval_notification_subject_delegate,
        'approval_notification_subject_mention': approval_notification_subject_mention,
        'approval_decision_message_approve': approval_decision_message_approve,
        'approval_decision_message_reject': approval_decision_message_reject,
        'approval_decision_message_approve_subject': approval_decision_message_approve_subject,
        'approval_decision_message_reject_subject': approval_decision_message_reject_subject,
        'modifyColumn': modifyColumnConfig,
        'modifyColumnTable': $("#modifyColumnTable").val(),
        'modifyColumnColumn': $("#modifyColumn_").val(),
        'modifyColumnAttr': returnDataAttr(),
        'allowApprovalAssignment': $("#allowApprovalAssignment").val(),
        'approvalInMailApprovalOption': approvalInMailApprovalOption,
        'mailForApproverAdded':mailForApproverAdded,
        'notify_existing':notify_existing,
        'approvalSkipLevelOption': approvalSkipLevelOption,
        'approvalSendAttachmentWithDecisionMail': approvalSendAttachmentWithDecisionMail,
        'approval_mail_additional_config': approvalMailAdditionalConfig,
        'approval_notification_attachment_config': attachmentConfig,
        'approval_notification_attachment_config_mention': attachmentConfigMention,
      }
      }
      checkValue = $("#allowUsersToSetApprovers").val()
      if(checkValue == "allow_user"){
        decision_list["approversDispFields"] = $("#allowUsersToSetApproversDispFields").val().length != 0 ? $("#allowUsersToSetApproversDispFields").val() : ["username", "first_name", "last_name"]
        decision_list["approversDispFormat"] = $("#allowUsersToSetApproversDispFormat").val() || 'space_sep'
      }


      var decisionboxattributes = {}
      decisionboxattributes = {
        "Category_sub_elements": [{
          "Category_sub_element_name": "Decision",
          "Category_sub_element_attributes": [{
            "Category_attr": "Table_name",
            "value": tb
          }, {
            "Category_attr": "Field_Choice",
            "value": decision_list
          }]
        }]

      }
      var itemID;
      var cellSelected = editorCopy.editor.graph.getModel().getCell($('#decisionModal').find('.modal-footer').attr(
        'data-shapeid'));
      cellShapeUniqueID = cellSelected.style.search("shapeUniqueID")
      if (cellShapeUniqueID < 0) {
        itemID = "decision" + Math.random()
        cellSelected.style = cellSelected.style + "shapeUniqueID=" + itemID
      } else {
        itemID = (cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(
          cellShapeUniqueID)).search("=") + 1)
      }
      var indexSeparator = cellSelected.style.indexOf(';');
      var elementShape = cellSelected.style.substr(0, indexSeparator);
    if($("#decision_config").val() == "Approval") {
      if(boolSave){
      if(currentDevMode === "Edit" || currentDevMode === "Build"){
          $.ajax({
      url: window.location.pathname,
      data: {
      'operation': "fetchDependencies",
      'item_group_code':$('#graphContainerID').attr('data-process_code'),
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
      if (data.appDependency.length > 0) {
        $('#dependencyTable').empty()

        for(var i=0;i<data.appDependency.length;i++){

             $('#dependencyTable').append(`<tr><td style="font-weight:bold">${i+1}.</td><td style="font-weight:bold;text-align:start">&nbsp;&nbsp;${data.appDependency[i]}</td></tr>`)
        }
          $('#dependencyChecker').modal('show')
          $('#btn_dependencySave').off('click').on('click',function(){

            $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'savedecisionboxElementConfig',
            'processName': process_name,
            'subProcessName': subprocess_name,
            'tableName': tb,
            'tableList': JSON.stringify(unique),
            'tabBodyContent': JSON.stringify(decisionboxattributes),
            'elementID': itemID,
            'shape': elementShape,
            'decision_action':$('#config_button').val(),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            $('#decisionModal').modal("hide")
            Swal.fire({icon: 'success',text: 'Decision Box configuration saved successfully!'});
            $('#selectElement').val('').trigger("change")
            $('#decisiontablefield').empty()
            $('#decisiontable').empty()
            $('#decision_name').html("")
            $('#decision_purpose').html("")
            $('#decision_config').val('').trigger("change")
            $('#select2multiple').val('').trigger("change")
            $("#carouselExampleIndicators").css("display", "none")
            $('#decision_name').html("")
            $('#decision_purpose').html("")
            $('#decision_config').val('').trigger("change")
            $("#carouselExampleIndicators").css("display", "none")
            $('#carouselExampleIndicators').find('#email_list').find('#approval_email_list').val('').trigger('change');
            $('#carouselExampleIndicators').find('#email_list').find('#approval_email_list').empty();
            $('#carouselExampleIndicators').find('#email_list').find('#approval_email_decision').val('').trigger('change');
            $('#carouselExampleIndicators').find('#email_list').find('#approval_email_decision').empty();
            $('#carouselExampleIndicators').find('.carousel-inner').find('div').removeClass('active')
            $('#carouselExampleIndicators').find('.carousel-inner').find('div').eq(0).addClass('active')
            $('#config_button').val('Set Approval').trigger('change');
            $('#config_smtp_button').val('default').trigger('change');
            $('#carouselExampleIndicators').find('#email_list').css('display','none');
            $('#defaultValueConfigDecision').find('#selectAllDecison').prop('checked',false);

            $('#carouselExampleIndicators').find('#config_table').css('display','');
            $('#carouselExampleIndicators').find('#addrow').css('display','');
            $('#carouselExampleIndicators').find('.carousel-inner').find('.carousel-item').eq(1).css('display','');
            var len = email_approval.length;
            email_approval.splice(0,len);
            len = email_decision.length;
            email_decision.slice(0,len);
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error!  Failure in saving the Decision Box configuration. Please check your configuration and try again.'});
          }
        })
  })
        } else {

          $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'savedecisionboxElementConfig',
            'processName': process_name,
            'subProcessName': subprocess_name,
            'tableName': tb,
            'tableList': JSON.stringify(unique),
            'tabBodyContent': JSON.stringify(decisionboxattributes),
            'elementID': itemID,
            'shape': elementShape,
            'decision_action':$('#config_button').val(),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            $('#decisionModal').modal("hide")
            Swal.fire({icon: 'success',text: 'Decision Box configuration saved successfully!'});
            $('#selectElement').val('').trigger("change")
            $('#decisiontablefield').empty()
            $('#decisiontable').empty()
            $('#decision_name').html("")
            $('#decision_purpose').html("")
            $('#decision_config').val('').trigger("change")
            $('#select2multiple').val('').trigger("change")
            $("#carouselExampleIndicators").css("display", "none")
            $('#decision_name').html("")
            $('#decision_purpose').html("")
            $('#decision_config').val('').trigger("change")
            $("#carouselExampleIndicators").css("display", "none")
            $('#carouselExampleIndicators').find('#email_list').find('#approval_email_list').val('').trigger('change');
            $('#carouselExampleIndicators').find('#email_list').find('#approval_email_list').empty();
            $('#carouselExampleIndicators').find('#email_list').find('#approval_email_decision').val('').trigger('change');
            $('#carouselExampleIndicators').find('#email_list').find('#approval_email_decision').empty();
            $('#carouselExampleIndicators').find('.carousel-inner').find('div').removeClass('active')
            $('#carouselExampleIndicators').find('.carousel-inner').find('div').eq(0).addClass('active')
            $('#config_button').val('Set Approval').trigger('change');
            $('#config_smtp_button').val('default').trigger('change');
            $('#carouselExampleIndicators').find('#email_list').css('display','none');
            $('#defaultValueConfigDecision').find('#selectAllDecison').prop('checked',false);

            $('#carouselExampleIndicators').find('#config_table').css('display','');
            $('#carouselExampleIndicators').find('#addrow').css('display','');
            $('#carouselExampleIndicators').find('.carousel-inner').find('.carousel-item').eq(1).css('display','');
            var len = email_approval.length;
            email_approval.splice(0,len);
            len = email_decision.length;
            email_decision.slice(0,len);
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Failure in saving Decision box Configuration. Please check your configuration and try again.'});
          }
        })
      }}})} else{

        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'savedecisionboxElementConfig',
            'processName': process_name,
            'subProcessName': subprocess_name,
            'tableName': tb,
            'tableList': JSON.stringify(unique),
            'tabBodyContent': JSON.stringify(decisionboxattributes),
            'elementID': itemID,
            'shape': elementShape,
            'decision_action':$('#config_button').val(),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            $('#decisionModal').modal("hide")
            Swal.fire({icon: 'success',text: 'Decision Box configuration saved successfully!'});
            $('#selectElement').val('').trigger("change")
            $('#decisiontablefield').empty()
            $('#decisiontable').empty()
            $('#decision_name').html("")
            $('#decision_purpose').html("")
            $('#decision_config').val('').trigger("change")
            $('#select2multiple').val('').trigger("change")
            $("#carouselExampleIndicators").css("display", "none")
            $('#decision_name').html("")
            $('#decision_purpose').html("")
            $('#decision_config').val('').trigger("change")
            $("#carouselExampleIndicators").css("display", "none")
            $('#carouselExampleIndicators').find('#email_list').find('#approval_email_list').val('').trigger('change');
            $('#carouselExampleIndicators').find('#email_list').find('#approval_email_list').empty();
            $('#carouselExampleIndicators').find('#email_list').find('#approval_email_decision').val('').trigger('change');
            $('#carouselExampleIndicators').find('#email_list').find('#approval_email_decision').empty();
            $('#carouselExampleIndicators').find('.carousel-inner').find('div').removeClass('active')
            $('#carouselExampleIndicators').find('.carousel-inner').find('div').eq(0).addClass('active')
            $('#config_button').val('Set Approval').trigger('change');
            $('#config_smtp_button').val('default').trigger('change');
            $('#carouselExampleIndicators').find('#email_list').css('display','none');
            $('#defaultValueConfigDecision').find('#selectAllDecison').prop('checked',false);

            $('#carouselExampleIndicators').find('#config_table').css('display','');
            $('#carouselExampleIndicators').find('#addrow').css('display','');
            $('#carouselExampleIndicators').find('.carousel-inner').find('.carousel-item').eq(1).css('display','');
            var len = email_approval.length;
            email_approval.splice(0,len);
            len = email_decision.length;
            email_decision.slice(0,len);
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Failure in saving the Decision Box configuration. Please check your configuration and try again.'});
          }
        })
      }} else {
        Swal.fire({icon: 'error',text: 'Error! Incorrect conditions configured. Please check and try again.'});
      }
    }
  })


</script>
<!-- Upload Page-->
<script>
  function textStepProcessFlowDesign(select,text){
    html = `<div class="card collapsed-card multipleJs masterstyling" style="margin-left:-12px;margin-right: -12px;">
      <div class="card-header row">
        <div class="form-group col-10" style="display:flex; align-items: center; margin-bottom: 0px;">
          <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the step:</p>
          <div class="col-4">
          <select class=" select2 form-control" onchange="" >
            <option value="" disabled="" selected="" >Select Pr code</option>
          </select>
            </div>
          </div>
            <div class="col-2">
              <div class="card-tools float-right">
                <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                <button type="button" class="btn btn-tool" onclick="removeEditButtonContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
            </div>
          </div>
      </div>
      <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
        <div class="row" style="padding-top:10px;padding-bottom:10px;">
          <div class="col-6">
            <p style="font-weight: bold;">Step text:</p>
            <input type="text" class="textinput textInput form-control">
          </div>
        </div>
      </div>
    </div>`
    $('#process_flow_design_Modal').find('.text-card').append(html)
    var singleCard = $('#process_flow_design_Modal').find('.text-card').find('.masterstyling').slice(-1)
    $.ajax({
      url: window.location.pathname,
      data: {
        'operation': 'process_flow_design_fetch',
        'sub_pr_code':$('#graphContainerID').attr('data-subprocess_code')
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        if (data.data == ''){
          Swal.fire({icon: 'error',text: 'Setup process flow first'});
        }else{
          $(singleCard).find('select').empty()
          $(singleCard).find('select').append('<option value="" disabled selected>Select Step</option>')
          for (let i in data.data){
            if (data.data[i]['tab_type'] != 'connector'){
              $(singleCard).find('select').append(`<option value="${data.data[i]['element_id']}">${data.data[i]['tab_header_name']}</option>`)
            }
          }
          $(singleCard).find('select').each(function(){
    $(this).select2()
  })
          if (text != undefined && select != undefined){
            $(singleCard).find('select').val(select).trigger('change')
            $(singleCard).find('.textinput').val(text).trigger('change')
          }
        }
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error!'});
      }
    })
  }
  function process_flow_design_Modal_close(obj){
    $('#process_flow_design_Modal').modal('hide')
  }
  function process_flow_design_Modal_save(obj){
    var selectTag =  $('#process_flow_design_Modal').find('select').val()
    var dict_a = {'prCodes':selectTag,
    'process_code':$("#graphContainerID").attr("data-process_code"),
    'font-size':$('#process_flow_design_Modal').find('[data-css="font-size"]').val(),
    'font-color':$('#process_flow_design_Modal').find('[data-css="font-color"]').val(),
    'shapes_options_text':$('#process_flow_design_Modal').find('.shapes_options_text').val(),
    'shapes_options':$('#process_flow_design_Modal').find('.shapes_options').val(),
    'shape_height':$('#process_flow_design_Modal').find('[data-css="shape_height"]').val(),
    'shape_width':$('#process_flow_design_Modal').find('[data-css="shape_width"]').val(),
   }
    var cards = $('#process_flow_design_Modal').find('.text-card').find('.masterstyling')
    var lengthOfCards = cards.length;
    for (let i = 0; i < lengthOfCards; i++) {
      var singleCard = $('#process_flow_design_Modal').find('.text-card').find('.masterstyling').eq(i)
      dict_a[$(singleCard).find('select').val()] = $(singleCard).find('.textinput').val()
    }
    $.ajax({
      url: window.location.pathname,
      data: {
        'operation': 'process_flow_design_save',
        'sub_pr_code':$('#graphContainerID').attr('data-subprocess_code'),
        'data':JSON.stringify(dict_a)
      },
      type: "POST",
      dataType: "json",
      success: function (data) {

      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error!'});
      }
    });
    $('#process_flow_design_Modal').modal('hide')
  }
  function processFlowDesign(obj){
    $('#process_flow_design_Modal').find('.text-card').find('.masterstyling').remove();
    $.ajax({
      url: window.location.pathname,
      data: {
        'operation': 'process_flow_design_fetch',
        'sub_pr_code':$('#graphContainerID').attr('data-subprocess_code')
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        if (data.data == ''){
          Swal.fire({icon: 'error',text: 'Setup process flow first'});
        }else{
          $('#process_flow_design_Modal').find('.pr_codes').empty()
          for (let i in data.data){
            if (data.data[i]['tab_type'] == 'create_view' || data.data[i]['tab_type'] == 'list_view'||data.data[i]['tab_type'] == 'data_connector' || data.data[i]['tab_type'] == 'computation'){
              $('#process_flow_design_Modal').find('.pr_codes').append(`<option value="${data.data[i]['element_id']}">${data.data[i]['tab_header_name']}</option>`)
            }
          }
        }
        $('#process_flow_design_Modal').modal('show')
        $.ajax({
          url: window.location.pathname,
          data: {
            'operation': 'process_flow_design_fetch_navigationbar',
            'sub_pr_code':$('#graphContainerID').attr('data-subprocess_code')
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            if (data.data == ''){
            }else{
              var parsedAttrData =  JSON.parse(data.data[0]['process_flow_design'])
              $('#process_flow_design_Modal').find('.pr_codes').val(parsedAttrData['prCodes']).trigger('change')
              $('#process_flow_design_Modal').find('[data-css="font-size"]').val(parsedAttrData['font-size']).trigger('change')
              $('#process_flow_design_Modal').find('[data-css="font-color"]').val(parsedAttrData['font-color']).trigger('change')
              $('#process_flow_design_Modal').find('.shapes_options_text').val(parsedAttrData['shapes_options_text']).trigger('change')
              $('#process_flow_design_Modal').find('.shapes_options').val(parsedAttrData['shapes_options']).trigger('change')
              $('#process_flow_design_Modal').find('[data-css="shape_width"]').val(parsedAttrData['shape_width']).trigger('change')
              $('#process_flow_design_Modal').find('[data-css="shape_height"]').val(parsedAttrData['shape_height']).trigger('change')
              for (let k in parsedAttrData){
                if (k != 'prCodes' && k != 'font-size' && k != 'font-color' && k != 'shapes_options_text' && k != 'shapes_options' && k != 'process_code'&& k != 'shape_height' && k != 'shape_width'){
                  textStepProcessFlowDesign(k,parsedAttrData[k])
                }
              }
            }
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error!'});
          }
        })
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error!'});
      }
    })

    $('#process_flow_design_Modal').find('select').each(function(){
    $(this).select2()
  })


  }
  function processTheme() {
    $('#processThemeVal').empty();

    $.ajax({
      url: '/users/customizeTheme/',
      data: { 'app_code': window.location.pathname.split("/")[2], 'theme_type': "Section", 'operation': 'load_section_data' },
      type: "POST",
      dataType: "json",
      success: function (data) {
        section_data = data.section_data
        if (Object.keys(data).length > 0) {
          for(i in section_data) {
            if(i == "Global") {
            $('#processThemeVal').append($("<option></option>")
            .attr("value", "")
            .text(section_data[i])
            );
            }
            else {
            $('#processThemeVal').append($("<option></option>")
            .attr("value", section_data[i])
            .text(section_data[i])
            );
            }
          }
          $("#processThemeModal").modal('show');
        }
        else {
          Swal.fire({icon: 'warning',text: 'Section Theme/s need to be added to show here.'});
          $("#processThemeModal").modal('hide');
        }
      }
    }).done(function() {
      $.ajax({
      url: '/users/customizeTheme/',
      data: {
        'app_code': window.location.pathname.split("/")[2],
        'process_code': $("#graphContainerID").attr("data-process_code"),
        'sub_process_code': $("#graphContainerID").attr("data-sub_process_name"),
        'theme_type': "Section",
        'theme_name': $("#processThemeVal").val(),
        'operation': 'load_process_section_data' },
        type: "POST",
        dataType: "json",
        success: function (data) {
          if(Object.keys(data).length > 0)
            $("#processThemeVal").val(data.theme_name).trigger('change')
            $("#showNavbar").prop("checked", data.showNavbar).change()
            $("#showSidebar").prop("checked", data.showSidebar).change()
            $("#showFooter").prop("checked", data.showFooter).change()
          }
        });
    });
  }
  function processThemeSave() {
  if ($("#processThemeVal").val()) {
    let tDict = {}
    tDict["theme_name"] = $("#processThemeVal").val();
    tDict["showNavbar"] = $("#showNavbar").is(":checked");
    tDict["showSidebar"] = $("#showSidebar").is(":checked");
    tDict["showFooter"] = $("#showFooter").is(":checked");
  $.ajax({
    url: '/users/customizeTheme/',
    data: {
      'app_code': window.location.pathname.split("/")[2],
      'process_code': $("#graphContainerID").attr("data-process_code"),
      'sub_process_code': $("#graphContainerID").attr("data-sub_process_name"),
      'theme_type': "Section",
      'theme_name': JSON.stringify(tDict),
      'operation': 'save_process_section_data' },
      type: "POST",
      dataType: "json",
      success: function (data) {

      }
    });

    let process_config = {}
    let theme_name;
    process_config["process_code"] =  $("#graphContainerID").attr("data-process_code");
    process_config["sub_process_code"] = $("#graphContainerID").attr("data-sub_process_name");
    process_config["showNavbar"] = $("#showNavbar").is(":checked");
    process_config["showSidebar"] = $("#showSidebar").is(":checked");
    process_config["showFooter"] = $("#showFooter").is(":checked");
    if($("#processThemeVal").val() == "Global") {
      theme_name = ""
    }
    else {
      theme_name = $("#processThemeVal").val();
    }
    $.ajax({
      url: '/users/customizeTheme/',
      data: { 'app_code':window.location.pathname.split("/")[2], 'theme_name': theme_name,'theme_type': "Section",'process_config': JSON.stringify(process_config), 'operation': 'apply_theme_data' },
      type: "POST",
      dataType: "json",
      success: function (data) {
        Swal.fire({icon: 'success',text: data.message});
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    });
    $("#processThemeModal").modal('hide');
  }
  }
  $('.selectComponents').css('display','none');
  $('.previewCustomTemplate').attr('disabled',true);
  $('#ConfigureUploadform').change(function() {
        if(($(this).find('#selectDataconnector').val()!=null)  ){
          $("#savedocumentConfig").attr("disabled", false);
          $('.selectComponents').css('display','block');


     }
     else{
      $("#savedocumentConfig").attr("disabled", true);
     }
    })

    var tableName;
    var dataconnector;
    $('#savedocumentConfig').click(function(){
      let currentDevMode = "{{current_dev_mode}}"
      let tab_header_name = $(this).parent().prev().find('.tabHeader').val()
      let tab_element = $(this).parent().prev().find('.tabHeaderEmptyValidation')
      if(currentDevMode === "Edit" || currentDevMode === "Build"){

          $.ajax({
                  url: window.location.pathname,
                  data: {
                  'operation': "fetchDependencies",
                  'item_group_code':$('#graphContainerID').attr('data-process_code'),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                  if (data.appDependency.length > 0) {
                    $('#dependencyTable').empty()

                            for(var i=0;i<data.appDependency.length;i++){

                                 $('#dependencyTable').append(`<tr><td style="font-weight:bold">${i+1}.</td><td style="font-weight:bold;text-align:start">&nbsp;&nbsp;${data.appDependency[i]}</td></tr>`)
                            }
                             $('#dependencyChecker').modal('show')
                             $('#btn_dependencySave').off('click').on('click',function(){
                                 tab_element.css('display','none')
                        if(!tab_header_name){
                           tab_element.css('display','block')
                        }
                        else{

                          tableName=$('#selectDocumentTable').val();
                          dataconnector=$('#selectDataconnector').val();
                          var cellSelected=editorCopy.editor.graph.getModel().getCell($('#documentModal').find('.modal-footer').attr('data-shapeid'));
                          cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
                          if (cellShapeUniqueID<0){
                          var itemID=("document"+Math.random()).replace('.',"")
                          cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
                          }
                          else{
                          var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
                          }
                          var indexSeparator=cellSelected.style.indexOf(';');
                          var elementShape=cellSelected.style.substr(0,indexSeparator);
                          var ctoken = $('form').find("input[name='csrfmiddlewaretoken']").attr('value')
                          var iconselector6;
                        $('.listoficons').each(function(){
                          if($(this).css("border").includes("rgb(184, 134, 11)")){
                              var number1=$(this).attr("class").indexOf('listoficons')-1
                              iconselector6= $(this).attr("class").substr(0,number1)

                        }})
                          $.ajaxSetup({
                          beforeSend: function (xhr, settings) {
                            xhr.setRequestHeader("X-CSRFToken", ctoken);
                          }
                          });
                          $.ajax({
                            url: window.location.pathname,

                            data: {
                              'operation': 'savedocumentConfig',
                              'processName':process_name,
                              'tab_icon6':iconselector6,
                              'subProcessName':subprocess_name,
                              'tab_header_name':$('#tabHeaderDocument').val(),
                              'tableName':JSON.stringify(tableName),
                              'tabBodyContent':JSON.stringify(finaluploadScreenJS()),
                              'elementID':itemID,
                              'shape':elementShape
                            },
                            type: "POST",
                            dataType: "json",
                            success: function (data) {
                              Swal.fire({icon: 'success',text: 'Document configuration saved successfully!'});
                              if($('#selectUploadTemplate').val() == "Custom defined template") {
                                $('#savedocumentConfig').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',false);
                              } else {
                                $('#savedocumentConfig').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',true);
                                $('#documentModal').modal('hide');
                                uploadReset();
                              }

                            },
                            error: function () {
                              Swal.fire({icon: 'error',text: 'Error! Failure in saving the Document configuration. Please check your configuration and try again.'});
                            }
                          })
                        }
                      })





                  } else {
                           tab_element.css('display','none')


                    if(!tab_header_name){
                       tab_element.css('display','block')

                    }
                    else{

                      tableName=$('#selectDocumentTable').val();
                      dataconnector=$('#selectDataconnector').val();
                      var cellSelected=editorCopy.editor.graph.getModel().getCell($('#documentModal').find('.modal-footer').attr('data-shapeid'));
                      cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
                      if (cellShapeUniqueID<0){
                      var itemID=("document"+Math.random()).replace('.',"")
                      cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
                      }
                      else{
                      var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
                      }
                      var indexSeparator=cellSelected.style.indexOf(';');
                      var elementShape=cellSelected.style.substr(0,indexSeparator);
                      var ctoken = $('form').find("input[name='csrfmiddlewaretoken']").attr('value')
                      var iconselector6;
                    $('.listoficons').each(function(){
                      if($(this).css("border").includes("rgb(184, 134, 11)")){
                          var number1=$(this).attr("class").indexOf('listoficons')-1
                          iconselector6= $(this).attr("class").substr(0,number1)

                    }})
                      $.ajaxSetup({
                      beforeSend: function (xhr, settings) {
                        xhr.setRequestHeader("X-CSRFToken", ctoken);
                      }
                      });
                      $.ajax({
                        url: window.location.pathname,

                        data: {
                          'operation': 'savedocumentConfig',
                          'processName':process_name,
                          'tab_icon6':iconselector6,
                          'subProcessName':subprocess_name,
                          'tab_header_name':$('#tabHeaderDocument').val(),
                          'tableName':JSON.stringify(tableName),
                          'tabBodyContent':JSON.stringify(finaluploadScreenJS()),
                          'elementID':itemID,
                          'shape':elementShape
                        },
                        type: "POST",
                        dataType: "json",
                        success: function (data) {
                          Swal.fire({icon: 'success',text: 'Document configuration saved successfully!'});
                          if($('#selectUploadTemplate').val() == "Custom defined template") {
                            $('#savedocumentConfig').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',false);
                          } else {
                            $('#savedocumentConfig').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',true);
                            $('#documentModal').modal('hide');
                            uploadReset();
                          }
                        },
                        error: function () {
                          Swal.fire({icon: 'error',text: 'Error! Failure in saving the Document configuration. Please check your configuration and try again.'});
                        }
                      })
                    }
                  }
                  },
                  error: function () {
                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                  });




      }else{
         tab_element.css('display','none')


        if(!tab_header_name){
           tab_element.css('display','block')

        }
        else{

          tableName=$('#selectDocumentTable').val();
          dataconnector=$('#selectDataconnector').val();
          var cellSelected=editorCopy.editor.graph.getModel().getCell($('#documentModal').find('.modal-footer').attr('data-shapeid'));
          cellShapeUniqueID=cellSelected.style.search("shapeUniqueID")
          if (cellShapeUniqueID<0){
          var itemID=("document"+Math.random()).replace('.',"")
          cellSelected.style=cellSelected.style+"shapeUniqueID="+itemID
          }
          else{
          var itemID=(cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=")+1)
          }
          var indexSeparator=cellSelected.style.indexOf(';');
          var elementShape=cellSelected.style.substr(0,indexSeparator);
          var ctoken = $('form').find("input[name='csrfmiddlewaretoken']").attr('value')
          var iconselector6;
        $('.listoficons').each(function(){
          if($(this).css("border").includes("rgb(184, 134, 11)")){
              var number1=$(this).attr("class").indexOf('listoficons')-1
              iconselector6= $(this).attr("class").substr(0,number1)

        }})
          $.ajaxSetup({
          beforeSend: function (xhr, settings) {
            xhr.setRequestHeader("X-CSRFToken", ctoken);
          }
          });
          $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'savedocumentConfig',
              'processName':process_name,
              'tab_icon6':iconselector6,
              'subProcessName':subprocess_name,
              'tab_header_name':$('#tabHeaderDocument').val(),
              'tableName':JSON.stringify(tableName),
              'tabBodyContent':JSON.stringify(finaluploadScreenJS()),
              'elementID':itemID,
              'shape':elementShape
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              Swal.fire({icon: 'success',text: 'Document configuration saved successfully!'});
              if($('#selectUploadTemplate').val() == "Custom defined template") {
                $('#savedocumentConfig').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',false);
              } else {
                $('#savedocumentConfig').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',true);
                $('#documentModal').modal('hide');
                uploadReset();
              }

            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Failure in saving the Document configuration.  Please check your configuration and try again.'});
            }
          })
        }

      }
      })






  function finaluploadScreenJS(){
   var Category_sub_element = [{"Category_sub_element_name":"Upload"}]
   tableName=$('#selectDocumentTable').val();
   dataconnector=$('#selectDataconnector').val();
   var Category_sub_element_attributes=[{"attr":"Table_name","value":tableName}]
   var selectComponentsUnchecked=[]
      $('.selectComponents').find('.form-group').find('input[type=checkbox]').each(function(){
          var attrDict={};
          attrDict['attr']=$(this).attr("name")
          if($(this)[0].checked==true){
            attrDict['value']="Yes"
          }
          else{
            attrDict['value']="No"
            selectComponentsUnchecked.push($(this))
          }
          if(attrDict["attr"] == "ignore_ne+'1'") {
            attrDict["attr"] = "ignore_ne"
          }
          if(attrDict["attr"] == "advance_setting_check+'1'") {
            attrDict["attr"] = "advance_setting_check"
          }
          if(attrDict["attr"] == "downloadDataBtn+'1'") {
            attrDict["attr"] = "downloadDataBtn"
          }
          if(attrDict["attr"] == "uploadHistoryBtn+'1'") {
            attrDict["attr"] = "uploadHistoryBtn"
          }
          if(attrDict["attr"] == "lastUploadErrorsBtn+'1'") {
            attrDict["attr"] = "lastUploadErrorsBtn"
          }
          if(attrDict["attr"] == "detailedErrorLogBtn+'1'") {
            attrDict["attr"] = "detailedErrorLogBtn"
          }
          if(attrDict["attr"] == "downloadFormatBtn+'1'") {
            attrDict["attr"] = "downloadFormatBtn"
          }
          if(attrDict["attr"] == "tableShow+'1'") {
            attrDict["attr"] = "tableShow"
          }
          attrDict['html_attributes']={"data-parent_group_no":"g2"}
          Category_sub_element_attributes.push(attrDict)
        }),
    Category_sub_element.push({"Category_sub_element_attributes":Category_sub_element_attributes})
    var uploadButtonStyling = extractUploadButtons()
    var uploadCustomVal = $('.customValbtnDev').attr('data-data_config')
    if (uploadCustomVal == '' || uploadCustomVal == '{}' || uploadCustomVal == undefined){
      uploadCustomVal = {}
    }else{
      uploadCustomVal = JSON.parse(uploadCustomVal)
      uploadCustomVal = uploadCustomVal["reload_custom_validation"]
    }

    var allow_upload_custV = false
    var allow_map_column = false
    var allow_comp_logic = false
    var allow_stfp_upload = false
    var allow_upload_compute = false
    var upload_run_config = {}
    var upload_computed_config = {}
    if($("#allow_upload_custV").is(":checked")){
      allow_upload_custV = true
    }

    if($("#allow_map_column").is(":checked")){
      allow_map_column = true
    }

    if($("#allow_comp_logic").is(":checked")){
      allow_comp_logic = true
    }

    if($("#allow_stfp_upload").is(":checked")){
      allow_stfp_upload = true
    }

    if($("#allow_upload_compute").is(":checked")){
      allow_upload_compute = true
    }

    if(allow_upload_compute){
      upload_run_config = {
        'table': $("#upload_comp_table").val(),
        'comp_model': $("#upload_comp_model").val(),
        'import_element_id': $("#upload_comp_importEle").val()
      }
    }

    is_config_present = $(".computedFieldMapperButton").attr("data-data_config")
    if(is_config_present == undefined || is_config_present == '' || is_config_present == '{}' ){
      upload_computed_config["upload_computed_config"] = {}
    }else{
      upload_computed_config["upload_computed_config"] = JSON.parse(is_config_present)
    }

    let Columnmapperconfig = []

    Columnmapperconfig = $(".fieldUploadMapperButton").attr("data-data_config")
    if(Columnmapperconfig != undefined){
      Columnmapperconfig = JSON.parse(Columnmapperconfig)
      Category_sub_element[0]["Columnmapper"] = JSON.stringify(Columnmapperconfig)
    }else{
      Category_sub_element[0]["Columnmapper"] = JSON.stringify('[]')
    }

    var upload_view_custom_messages = {}
    if($("#toggleCustomUploadViewMessages").is(":checked")){

      $("#customUploadViewMessagesDiv").find(".c_msg_input").each(function() {
        upload_view_custom_messages[$(this).attr("name")] ={ "message": $(this).val(), "icon": $(this).closest(".nav-item").find(".msg_icon").attr('class')}
      })
    }

    dropFieldListUploadFinal = $("#dropFields_add_upload").attr('data-data')
    dropFieldListUploadFinal = JSON.parse(dropFieldListUploadFinal)
    var finalattr={"Category_attributes": {"Mandatory": {"Table_name":tableName,"upload_view_custom_messages": upload_view_custom_messages,"Template_type":$('#selectUploadTemplate').val(), "uploadCustomVal": uploadCustomVal, "allow_upload_custV": allow_upload_custV, "allow_map_column": allow_map_column, "allow_comp_logic":allow_comp_logic,"allow_stfp_upload":allow_stfp_upload, "upload_computed_config":upload_computed_config, "allow_upload_compute":allow_upload_compute, "upload_run_config":upload_run_config  },"uploadButtonStyling":uploadButtonStyling,
      "Connector":{"Template_choice":dataconnector}},
      "Category_sub_elements":Category_sub_element, "charactersToBeEscaped": $("#selectCharactersToBeEscapedBU").val(),
    "DroppedFieldsUpload": dropFieldListUploadFinal
    }
    $("#graphContainerID").attr("data-tab_name",$("#tabHeaderDocument").val());

    return finalattr;
    }


</script>
<!-- Scheduler -->
<script>
  $('#selectTask').on('select2:select',function(){
    $('.select2email').select2({
      tags:true
    });
    if($(this).val()=='Email'){
      $('#emailCard').css('display','block')
      $("#emailMailConfigCard").css('display','block')
      $('#emailScheduleCard').css('display','none')
      $("#trigger_email_for").parent().css('display','block')
      $("#conditionScheduleCard").css("display","none")
      $("#recurrConditionScheduleCard").css("display","none")
      $("#schedulerEmailIntervalEndDate").parent().parent().css("display","block")

      $('#TransactionValueNotificationMain').css('display','inline-block')

      $("#approval_mailer_type_main").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", false)
        }
      })

      $("#approval_mailer_type_main_cc").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", false)
        }
      })

      $("#approval_mailer_type_main_bcc").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", false)
        }
      })

      $("#TransactionCreatedByMain").text("Transaction Created By")
    }
    else if($(this).val()=='Schedule'){
      $('#emailCard').css('display','block')
      $("#emailMailConfigCard").css('display','block')
      $('#emailScheduleCard').css('display','block')
      $("#trigger_email_for").parent().css('display','none')
      $("#conditionScheduleCard").css("display","none")
      $("#recurrConditionScheduleCard").css("display","none")
      $("#schedulerEmailIntervalEndDate").parent().parent().css("display","block")

      $('#TransactionValueNotificationMain').css('display','none')

      $("#approval_mailer_type_main").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", true)
        }
      })

      $("#approval_mailer_type_main_cc").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", true)
        }
      })

      $("#approval_mailer_type_main_bcc").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", true)
        }
      })

      $("#TransactionCreatedByMain").text("Recipient Of Mail")

    }else if($(this).val()=='ConditionBased'){
      $('#emailCard').css('display','block')
      $("#emailMailConfigCard").css('display','block')
      $('#emailScheduleCard').css('display','none')
      $("#trigger_email_for").parent().css('display','block')
      $("#conditionScheduleCard").css("display","block")
      $("#recurrConditionScheduleCard").css("display","none")
      $("#schedulerEmailIntervalEndDate").parent().parent().css("display","block")
      $('#TransactionValueNotificationMain').css('display','inline-block')

      $("#approval_mailer_type_main").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", false)
        }
      })

      $("#approval_mailer_type_main_cc").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", false)
        }
      })

      $("#approval_mailer_type_main_bcc").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", false)
        }
      })

      $("#TransactionCreatedByMain").text("Transaction Created By")
    }else if($(this).val()=='RecurrenceBased'){
      $('#emailCard').css('display','block')
      $("#emailMailConfigCard").css('display','block')
      $('#emailScheduleCard').css('display','block')
      $("#trigger_email_for").parent().css('display','block')
      $("#conditionScheduleCard").css("display","none")
      $("#recurrConditionScheduleCard").css("display","none")
      $("#schedulerEmailIntervalEndDate").parent().parent().css("display","block")
      $('#TransactionValueNotificationMain').css('display','none')

      $("#approval_mailer_type_main").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", false)
        }
      })

      $("#approval_mailer_type_main_cc").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", false)
        }
      })

      $("#approval_mailer_type_main_bcc").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", false)
        }
      })

      $("#TransactionCreatedByMain").text("Recipient Of Mail")
    }else if($(this).val()=='RecurrenceBasedAction'){
      $('#emailCard').css('display','block')
      $("#emailMailConfigCard").css('display','block')
      $('#emailScheduleCard').css('display','block')
      $("#trigger_email_for").parent().css('display','none')
      $("#conditionScheduleCard").css("display","none")
      $("#recurrConditionScheduleCard").css("display","block")

      $('#TransactionValueNotificationMain').css('display','none')

      $("#approval_mailer_type_main").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", false)
        }
      })

      $("#approval_mailer_type_main_cc").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", false)
        }
      })

      $("#approval_mailer_type_main_bcc").find('option').each(function(){
        if($(this).val() == "dynamic_user"){
          $(this).prop("disabled", false)
        }
      })

      $("#TransactionCreatedByMain").text("Recipient Of Mail")
      $("#schedulerEmailIntervalEndDate").parent().parent().css("display","none")

      $.ajax({
          url: window.location.pathname,
          data: {
              'operation': 'fetchDecisiontabnames',
              'process_name': $('#PN1').text().trim().replace("Process: ",""),
              'subprocess_name': $("#PN2").text().trim().replace("Subprocess: ", ""),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
          $("#selectSchRecDecision").empty()
          $('#selectSchRecDecision').append('<option value="" disabled>Select one</option>')
            for(let [key,value] of Object.entries(data)) {
              if (value['tab_type'] =='create_view'){
                $('#selectSchRecDecision').append(
                  `<option value="${key}" tab_type="${value['tab_type']}" table_name="${JSON.parse(value['table_name'])[0]}">${value['name']}</option>`
                  )
              }else{
                $('#selectSchRecDecision').append(
                `<option value="${key}" tab_type="${value['tab_type']}"table_name="${value['table_name']}">${value['name']}</option>`
                )
              }

            }

            let reload = $('#selectSchRecDecision').attr("data-data")
            let reload2 = $('#selectSchRecDecision').attr("data-data2")
            if(reload){
              $('#selectSchRecDecision').val(reload).trigger("change")
              $('#selectSchRecDecision').removeAttr("data-data")
            }
            if (reload2){
              reload2 = JSON.parse(reload2)
              $('#selectSchRecAction').val(reload2).trigger("change")
              $('#selectSchRecDecision').removeAttr("data-data2")
            }
          },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
      })

    }else{
      $('#emailCard').css('display','none')
      $("#emailMailConfigCard").css('display','none')
      $('#emailScheduleCard').css('display','none')
      $("#conditionScheduleCard").css("display","none")
      $("#recurrConditionScheduleCard").css("display","none")
    }
  })

  $('#carouselExampleIndicators').find('#config_table').find('#configuration_row').find('span').on('input',function() {
    var len=0;
    for(let i = 0; i < ($('#carouselExampleIndicators').find('#config_table').find('#configuration_row').find('span')).length; i++) {
      if($('#carouselExampleIndicators').find('#config_table').find('#configuration_row').find('span').eq(i).html() != '' && $('#decision_name').html() != '' && $('#decision_purpose').html() != '') {
        len = 1;
      } else {
        len = 0;
        break;
      }
    }
    if (len == 1){
        $('.configure_button').prop('disabled',false);

    } else {
      $('.configure_button').prop('disabled',true);
    }
  })
  function selectSchRecDecisionChange(obj){
    if ($(obj).find('option:selected').attr('tab_type') == 'create_view'){
      $('#selectSchRecAction').select2('destroy');
      $('#selectSchRecAction').empty();
      $('#selectSchRecAction').append(`<option value="created">Created</option>`)
      $('#selectSchRecAction').select2();
      $('#approval_mailer_type_main > option[value="dynamic_approver"]').prop('disabled', true);
      $('#approval_mailer_type_main_cc > option[value="dynamic_approver"]').prop('disabled', true);
      $('#approval_mailer_type_main_bcc > option[value="dynamic_approver"]').prop('disabled', true);
    }else if ($(obj).find('option:selected').attr('tab_type') == 'list_view'){
      $('#selectSchRecAction').select2('destroy');
      $('#selectSchRecAction').empty();
      $('#selectSchRecAction').append(`
      <option value="list_view_edit">list view edit</option>
      <option value="upload">Upload</option>
      <option value="delete">Delete</option>
      `)
      $('#selectSchRecAction').select2();
      $('#approval_mailer_type_main > option[value="dynamic_approver"]').prop('disabled', true);
      $('#approval_mailer_type_main_cc > option[value="dynamic_approver"]').prop('disabled', true);
      $('#approval_mailer_type_main_bcc > option[value="dynamic_approver"]').prop('disabled', true);
    }else if ($(obj).find('option:selected').attr('tab_type') == 'decision_box'){
      $('#selectSchRecAction').select2('destroy');
      $('#selectSchRecAction').empty();
      $('#selectSchRecAction').append(`
      <option value="Approved">Approval</option>
      <option value="Rejected">Rejection</option>
      `)
      $('#selectSchRecAction').select2();
      $('#approval_mailer_type_main > option[value="dynamic_approver"]').prop('disabled', false);
      $('#approval_mailer_type_main_cc > option[value="dynamic_approver"]').prop('disabled', false);
      $('#approval_mailer_type_main_bcc > option[value="dynamic_approver"]').prop('disabled', false);
    } else {
      $('#approval_mailer_type_main > option[value="dynamic_approver"]').prop('disabled', true);
      $('#approval_mailer_type_main_cc > option[value="dynamic_approver"]').prop('disabled', true);
      $('#approval_mailer_type_main_bcc > option[value="dynamic_approver"]').prop('disabled', true);
    }
  }
  $('#saveSchedulerConfig').click(function(){
    let name = $("#name_email").val()
    let task = $("#selectTask").val()
    let from_email=$('#from_email').val()
    let skipIfNoDynamicData = $("#skipEmailifNoData").prop('checked');
    let trigger_email_for = $("#trigger_email_for").val()

    if(task=='Email' || task=='Schedule' || task=="ConditionBased" || task=="RecurrenceBased" || task=="RecurrenceBasedAction"){

      if(task=='Email'){
        trigger_type = 'trigger_based'
      }else if(task=='Schedule'){
        trigger_type = 'schedule_based'
      }else if(task=="ConditionBased"){
        trigger_type = 'condition_based'
      }else if(task=="RecurrenceBased"){
        trigger_type = 'recurrence_based'
      }else if(task=="RecurrenceBasedAction"){
        trigger_type = 'recurrence_based_action'
      }

      var to_recipient_type = $("#approval_mailer_type_main").val()
      var to_recipient_list = []
      var to_recipient_dynamic_table = ""
      var to_recipient_dynamic_column = ""
      var to_config = {}

      var to_recipient_type_cc = $("#approval_mailer_type_main_cc").val()
      var to_recipient_list_cc = []
      var to_recipient_dynamic_table_cc = ""
      var to_recipient_dynamic_column_cc = ""
      var to_config_cc = {}

      var to_recipient_type_bcc = $("#approval_mailer_type_main_bcc").val()
      var to_recipient_list_bcc = []
      var to_recipient_dynamic_table_bcc = ""
      var to_recipient_dynamic_column_bcc = ""
      var to_config_bcc = {}

      var subject_email = ""
      var text_email = ""
      var task_config = {}

      if(to_recipient_type == "static"){
        to_config['to_recipient_type'] = to_recipient_type
        to_recipient_list = $("#approval_email_list_main").val()
        to_config['to_recipient_list'] = to_recipient_list
      }else if(to_recipient_type == "dynamic" || to_recipient_type == "dynamic_master_user"){
        to_config['to_recipient_type'] = to_recipient_type
        to_recipient_dynamic_table = $("#approval_dynamic_type_table_main").val()
        to_recipient_dynamic_column = $("#approval_dynamic_email_list_main").val()
        to_config['to_recipient_dynamic_table'] = to_recipient_dynamic_table
        to_config['to_recipient_dynamic_column'] = to_recipient_dynamic_column
      }else if(to_recipient_type == "dynamic_user"){
        to_config['to_recipient_type'] = to_recipient_type
      }else if(to_recipient_type == "static_user"){
        to_config['to_recipient_type'] = to_recipient_type
        to_config['to_recipient_list'] = $("#selectApproverUsersTo").val()
      }else if(to_recipient_type == "static_groups"){
        to_config['to_recipient_type'] = to_recipient_type
        to_config['to_recipient_list'] = $("#select2multiple_to").val()
      } else {
        to_config['to_recipient_type'] = to_recipient_type
      }

      if(to_recipient_type_cc == "static"){
        to_config_cc['to_recipient_type'] = to_recipient_type_cc
        to_recipient_list_cc = $("#approval_email_list_main_cc").val()
        to_config_cc['to_recipient_list'] = to_recipient_list_cc
      }else if(to_recipient_type_cc == "dynamic" || to_recipient_type_cc == "dynamic_master_user"){
        to_config_cc['to_recipient_type'] = to_recipient_type_cc
        to_recipient_dynamic_table_cc = $("#approval_dynamic_type_table_main_cc").val()
        to_recipient_dynamic_column_cc = $("#approval_dynamic_email_list_main_cc").val()
        to_config_cc['to_recipient_dynamic_table'] = to_recipient_dynamic_table_cc
        to_config_cc['to_recipient_dynamic_column'] = to_recipient_dynamic_column_cc
      }else if(to_recipient_type_cc == "dynamic_user"){
        to_config_cc['to_recipient_type'] = to_recipient_type_cc
      }else if(to_recipient_type_cc == "static_user"){
        to_config_cc['to_recipient_type'] = to_recipient_type_cc
        to_config_cc['to_recipient_list'] = $("#selectApproverUsersToCC").val()
      }else if(to_recipient_type_cc == "static_groups"){
        to_config_cc['to_recipient_type'] = to_recipient_type_cc
        to_config_cc['to_recipient_list'] = $("#select2multiple_toCC").val()
      } else {
        to_config_cc['to_recipient_type'] = to_recipient_type_cc
      }

      if(to_recipient_type_bcc == "static"){
        to_config_bcc['to_recipient_type'] = to_recipient_type_bcc
        to_recipient_list_bcc = $("#approval_email_list_main_bcc").val()
        to_config_bcc['to_recipient_list'] = to_recipient_list_bcc
      }else if(to_recipient_type_bcc == "dynamic" || to_recipient_type_bcc == "dynamic_master_user"){
        to_config_bcc['to_recipient_type'] = to_recipient_type_bcc
        to_recipient_dynamic_table_bcc = $("#approval_dynamic_type_table_main_bcc").val()
        to_recipient_dynamic_column_bcc = $("#approval_dynamic_email_list_main_bcc").val()
        to_config_bcc['to_recipient_dynamic_table'] = to_recipient_dynamic_table_bcc
        to_config_bcc['to_recipient_dynamic_column'] = to_recipient_dynamic_column_bcc
      }else if(to_recipient_type_bcc == "dynamic_user"){
        to_config_bcc['to_recipient_type'] = to_recipient_type_bcc
      }else if(to_recipient_type_bcc == "static_user"){
        to_config_bcc['to_recipient_type'] = to_recipient_type_bcc
        to_config_bcc['to_recipient_list'] = $("#selectApproverUsersToBCC").val()
      }else if(to_recipient_type_bcc == "static_groups"){
        to_config_bcc['to_recipient_type'] = to_recipient_type_bcc
        to_config_bcc['to_recipient_list'] = $("#select2multiple_toBCC").val()
      } else {
        to_config_bcc['to_recipient_type'] = to_recipient_type_bcc
      }

      subject_email=$('#subject_email').val();
      text_email=CKEDITOR.instances['text_email'].getData();
      attachmentConfig = JSON.parse($("#insert_attachment_main").attr('data-config'));
      attachmentConfig['addUploadedFilesAsAttachment'] = $('#addUserUploadedFilesAsAttachment').val();

      task_config = {
        'action_type': task,
        'trigger_type': trigger_type,
        'config': {
          'from_email':from_email,
          'skip_if_no_dynamic_data': skipIfNoDynamicData,
          'trigger_email_for':trigger_email_for,
          'to_config': to_config,
          'to_config_cc': to_config_cc,
          'to_config_bcc': to_config_bcc,
          'subject_email': subject_email,
          'text_email': text_email,
          'attachmentConfig': attachmentConfig,
        }
      }
    }

    if(task=='Schedule' || task=="RecurrenceBased" || task=="RecurrenceBasedAction"){
      let start_date = $("#schedulerEmailIntervalStartDate").val()
      let end_date = $("#schedulerEmailIntervalEndDate").val()
      let duration = $("#selectSchedulerEmailIntervalPeriodicity").val()
      let time_interval = $("#selectSchedulerEmailIntervalTime").val()
      let frequency = $("#selectSchedulerEmailFrequency").val()


      scheduler_config = {
        "start_date":start_date,
        "end_date": end_date,
        "duration": duration,
        "time_interval":time_interval,
        "frequency": frequency,
      }

      task_config["config"]["scheduler_config"] = scheduler_config
    }

    if(task=="ConditionBased"){
      cond = []
      $('.schedulerCondRow').find('.schedule_row').each(function(){
          temp_dic = {}
          $(this).find('div').find('input,select:visible').each(function(){
              if($(this).val()){
              temp_dic[$(this).attr('name')] = $(this).val()
              }
          })
          cond.push(temp_dic)
      })

      task_config["config"]["condition_based_config"] = cond
    }

    if(task=="RecurrenceBasedAction"){
      task_config["config"]["recurrence_action"] = {
        "element_id": $("#selectSchRecDecision").val(),
        "element_type":$("#selectSchRecDecision option:selected").attr('tab_type'),
        "table_name":$("#selectSchRecDecision option:selected").attr('table_name'),
        "action": $("#selectSchRecAction").val()
      }
    }

    var cellSelected = editorCopy.editor.graph.getModel().getCell($('#schedulerModal').find('.modal-footer').attr('data-shapeid'));
    cellShapeUniqueID = cellSelected.style.search("shapeUniqueID")
    if (cellShapeUniqueID < 0) {
      var itemID = ("message" + Math.random()).replace('.', "")
      cellSelected.style = cellSelected.style + "shapeUniqueID=" + itemID
    }
    else {
      var itemID = (cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=") + 1)
    }
    var indexSeparator = cellSelected.style.indexOf(';');
    var elementShape = cellSelected.style.substr(0, indexSeparator);

    $.ajax({
          url: window.location.pathname,
          data: {
            'processName': process_name,
            'subProcessName': subprocess_name,
            'elementID': itemID,
            'shape': elementShape,
            'operation': 'details_scheduler',
            'task_config':JSON.stringify(task_config),
            'name':name,
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            $("#schedulerModal").modal('hide')
            Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
      })

  })

</script>
</div>
<div class="modal fade" id="choose_icons_alert" tabindex="-1" role="dialog" data-focus="false" aria-labelledby="basicModal" aria-hidden="true">
  <div class="modal-dialog modal-lg-center" style="max-width: 500px; max-height: 500px;margin-top:90px;">
    <div class="modal-content" >
      <div class="modal-header" style="max-height: 500px; margin: 10px;">
        <h4 class="modal-title">Choose Icons</h4>
      </div>
      <div class="modal-body" >
        <div class="list_of_icons_alert">
        </div>
        <div style="margin-top:10px; margin-left:16px;">
          <button class="more_colors" id="alert_moreicons_button" data-toggle="modal" data-target="#moreicons_alert" data-backdrop="static" data-keyboard="false">More icons</button>
        </div>
      </div>
      <div class="modal-footer d-flex justify-content-between" >
        <button type="button" class="btn buttonfooter" onclick="$('#choose_icons_alert').modal('hide');" >Cancel <i class="fas fa-times"></i></button>
        <button type="button" class="btn buttonfooter" id = "saveicon_listview" onclick="$('#choose_icons_alert').modal('hide');" style="justify-content: flex-end"  onclick="">Save  <i class="fa-solid fa-floppy-disk"></i></button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="moreicons_alert">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 1022px;" role="document">
    <div class="modal-content" style="min-height: 400px;width:100%">
      <div class="modal-header">
        <h4 class="modal-title" id="exampleModalLongTitle">More Icons</h4>
      </div>
      <div class="modal-body">
        <input type="text textInput" style="margin: 10px auto;height: 28px;padding: 5px;border: 1px solid lightgrey;border-radius: 4px;" name="search-icons-alert" id="search-icons-alert" onkeyup="searchAlertIcons(this)" placeholder="Search Icons">
        <div class="wrapper" style="height: 426px; overflow-y: auto;">
          <div id="icons_category_alert">
            {% for category,icons in icons_data.items %}
            <h5>{{category}}</h5>
            <ul class="icon-picker-list" id="icons_cat_alert">
              {% for i in icons %}

              <li id="icon_cat">
                <a class="icon_alert" data-class="{{i}}" data-index="">
                  <span class="{{i}}" aria-hidden="true"></span>
                </a>
              </li>
              {% endfor %}
            </ul>

            {% endfor %}

          </div>
          <div class="icons_without_category_alert" id="icons_without_category_alert" style="display: none;">
            <ul class="icon-picker-list" id="icons_without_cat_alert">
              {% for i in icons_without_category %}
              <li id="icon_without_cat">
                <a class="icon_alert" data-class="{{i}}" data-index="">
                  <span class="{{i}}" aria-hidden="true"></span>
                </a>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="$('#moreicons_alert').modal('hide');">Close <span aria-hidden="true">&times;</span></button>
        <button type="button" class="btn btn-primary" id = "saveicon_more_listview" onclick="$('#moreicons_alert').modal('hide');">Save <i class="fa-solid fa-floppy-disk" style="color: white;"></i></button>
      </div>
    </div>
  </div>
</div>
<script>

  // icon

  var string = `<div class="row" white-space="nowrap">`
  var iconlist = ["fas fa-compass", "fas fa-address-card", "fas fa-clipboard", "fas fa-wallet", "fas fa-dollar-sign", "fas fa-table", "fas fa-atom", "fas fa-tasks", "fas fa-th", "fas fa-business-time", "fas fa-chart-area", "fas fa-chart-line", "fas fa-chart-bar", 'fas fa-chart-pie', "fas fa-sitemap", "fas fa-highlighter", "fas fa-th-large", "fas fa-globe", "fas fa-paperclip", "fas fa-project-diagram", "fas fa-print", "fas fa-i-cursor", "fas fa-indent", "fas fa-list-alt", "fas fa-list-ul", "fas fa-outdent", "far fa-building", "fas fa-bullseye", "fas fa-calendar", "far fa-compass"]
  for (i = 0; i < iconlist.length; i++) {
      if(iconlist.length){
      string += `<div class="col-2 icons"><a href="#" ><i class="${iconlist[i]} listoficonalert" style="font-size:1rem;color: black;font-size: 1rem;background: #fff;padding:0px;border-radius: 5px;" ></i>&nbsp&nbsp</a></div>`
      }
  }
  string += `</div>`

  $(".list_of_icons_alert").append(string)

  $('.listoficonalert').on("click", function () {
    $('.listoficonalert').each(function () {
      $(this).css("color", "black");
      $(this).css("background", "#fff");
    });
    $(this).attr("id", "selected_icon")
    $(this).css("color", "white");
    $(this).css("background", "var(--primary-color)");
    selectedIcon1 = $(this).attr("class").split(" ")[1]
    selectedIcon = `fa ${selectedIcon1}`

    icon_for = $(this).closest("#choose_icons_alert").attr("data-for-id")

    $(".icon_alert").each(function(){
      $(this).removeAttr("selected_a");
      $(this).css("background-color", "#f9f9f9");
      $(this).css("color","black");
    })
  })

  $("#saveicon_listview").click(function (){
    $(`#${icon_for}`).attr("data-selectd_icon",selectedIcon)
    $(`#${icon_for}`).closest(".nav-item").find(".msg_icon").attr("class",`fa ${selectedIcon1} msg_icon`)
  })

  function choose_alert_icons (element){

    $('#choose_icons_alert').modal('show');
    $('#choose_icons_alert').attr("data-for-id",$(element).attr("for"))

    $("#alert_moreicons_button").attr("data-for-id",$(element).attr("for"))
  }

  $("#alert_moreicons_button").click(function(){
    $("#moreicons_alert").attr("data-for-id",$(this).attr("data-for-id"))
  })


  // more icons
  $(".icon_alert").click(function () {

    $(".icon_alert").attr("selected_a", "false");
    $(".icon_alert").css("background-color", "#f9f9f9");
    $(".icon_alert").css("color", "black");

    $(this).attr("selected", "true");
    $(this).css("background-color", "var(--primary-color)");
    $(this).css("color", "var(--font-hover-color)");

    selectedIcon = $(this).attr("data-class")

    icon_for = $(this).closest("#moreicons_alert").attr("data-for-id")

    var list_icons = document.querySelectorAll(".icons a .listoficonalert")
    list_icons.forEach(element => {
      id = element.id
      element.removeAttribute('id')
      element.style.backgroundColor = "white"
      element.style.color = "black"
    })
  })

  $("#saveicon_more_listview").click(function (){
    $(`#${icon_for}`).attr("data-selectd_icon",selectedIcon)
    $(`#${icon_for}`).closest(".nav-item").find(".msg_icon").attr("class",`fa ${selectedIcon} msg_icon`)
    $('#choose_icons_alert').modal('hide');
  })

  function searchAlertIcons(obj) {
    var input, filter, ul, div, li, a, i, txtValue, h5;
    input = obj;
    if (input.value.length > 0) {
      $("#icons_category_alert").css("display", "none")
      $("#icons_without_category_alert").css("display", "block")
      filter = input.value.toUpperCase();
      div = document.getElementById("icons_without_category_alert");
      ul = document.getElementsByTagName("ul");
      li = div.getElementsByTagName("li");
      for (i = 0; i < li.length; i++) {
        a = li[i].getElementsByTagName("a")[0];
        txtValue = a.getAttribute("data-class");
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          li[i].style.display = "";
        } else {
          li[i].style.display = "none";
        }
      }
    }
    else {
      $("#icons_category_alert").css("display", "block")
      $("#icons_without_category_alert").css("display", "none")
    }
  }

</script>
</section>


<script>
  var condition_dict = new Object();
  var filter_dict = new Object();
  var tablesArray = new Array();
  var email_approval = new Array();
  var email_decision = new Array();


  $("#save_and_finalize").click(function () {
    var condition_list = new Array();
    var table2 = ($('#decisionBoxTable'))
    table2.find('tr').each(function (i, el) {
      if ($(this).find("select").length > 1){
        var table_details = {
          table_name: $("#select_conditionTable").val(),
          condition_name: ($("#condition_name_append").html()),
          column_name: ($(this).find('select').attr("name")),
          condition: ($(this).find("select").eq(0).val() + " " + $(this).find("select").eq(1).val()).trim(),
          input_value: ($(this).find('input').val())
        }
        if ($(this).find('input').attr("type") == "number") {
        table_details['input_value'] = Number($(this).find('input').val());
        } else {
          table_details['input_value'] = $(this).find('input').val();
        }
        tablesArray.push($("#select_conditionTable").val());
      } else {
        var table_details = {
          table_name: $("#select_conditionTable").val(),
          condition_name: ($("#condition_name_append").html()),
          column_name: ($(this).find('select').attr("name")),
          condition: $(this).find("select").val(),
          input_value: ($(this).find('input').val())
        }
        if ($(this).find('input').attr("type") == "number") {
          table_details['input_value'] = Number($(this).find('input').val());
        } else {
          table_details['input_value'] = $(this).find('input').val();
        }
        tablesArray.push($("#select_conditionTable").val());

      }
      condition_list.push(table_details);
    });

    const conditionVal = new Array();
    $('#decisionBoxTable').find('select').each(function () {
      conditionVal.push($(this).val());
    });
    const inpVal = new Array();
    $("#decisionBoxTable").find('input').each(function () {
      inpVal.push($(this).val());
    });
    var value_dict = {
      table_name: $("#select_conditionTable").val(),
      condition_name: ($("#condition_name_append").html()),
      condition_string: $('#decisionBoxTable').html(),
      condition_value: conditionVal,
      input_value: inpVal
    }

    condition_dict[$("#condition_name_append").text()] = condition_list;
    filter_dict[$(this).attr("conditionId")] = value_dict;
  });


  $("#save_and_add_condition").click(function () {
    var condition_list = new Array();
    var table2 = ($('#decisionBoxTable'))
    table2.find('tr').each(function (i, el) {
      if ($(this).find("select").length > 1){
      var table_details = {
        table_name: $("#select_conditionTable").val(),
        condition_name: ($("#condition_name_append").html()),
        column_name: ($(this).find('select').attr("name")),
        condition: ($(this).find("select").eq(0).val() + " " + $(this).find("select").eq(1).val()).trim(),
      }
      if ($(this).find('input').attr("type") == "number") {
        table_details['input_value'] = Number($(this).find('input').val());
      } else {
        table_details['input_value'] = $(this).find('input').val();
      }
      tablesArray.push($("#select_conditionTable").val());

    } else {
      var table_details = {
        table_name: $("#select_conditionTable").val(),
        condition_name: ($("#condition_name_append").html()),
        column_name: ($(this).find('select').attr("name")),
        condition: $(this).find("select").val(),
      }
      if ($(this).find('input').attr("type") == "number") {
        table_details['input_value'] = Number($(this).find('input').val());
      } else {
        table_details['input_value'] = $(this).find('input').val();
      }
      tablesArray.push($("#select_conditionTable").val());

    }
      condition_list.push(table_details);
    });

    const conditionVal = new Array();
    $('#decisionBoxTable').find('select').each(function () {
      conditionVal.push($(this).val());
    });
    const inpVal = new Array();
    $("#decisionBoxTable").find('input').each(function () {
      if ($(this).attr("type") == "number") {
        inpVal.push(Number($(this).val()));
      } else {
        inpVal.push($(this).val());
      }
    });
    var value_dict = {
      table_name: $("#select_conditionTable").val(),
      condition_name: ($("#condition_name_append").html()),
      condition_string: $('#decisionBoxTable').html(),
      condition_value: conditionVal,
      input_value: inpVal
    }

    condition_dict[$("#condition_name_append").text()] = condition_list;
    filter_dict[$(this).attr("conditionId")] = value_dict;
  });




  $("#decision_config").change(function () {
    if ($(this).val() == "Approval") {
      $("#carouselExampleIndicators").css("display", "block");
      $("#augmentation").css("display", "none");
      $('#configuration_row').find('td').eq(1).find('span').prop('contenteditable',true);
      $('.configure_button').prop('disabled',true);
    } else if ($(this).val() == "Augmentation" || $(this).val() == "augmentation") {
      $("#carouselExampleIndicators").css("display", "none");
      $("#augmentation").css("display", "block");
      $('.configure_button').prop('disabled',true);
    }
  })

  $(document).ready(function () {
    $('#select2multiple').select2({
      tags: true
    })
    $('#select2multiple1').select2({
      tags: true
    })

  })

  $("#addrow").click(function () {
    var next_sr_no = parseInt($('#config_table tbody tr:last-child td:first-child')[0].innerHTML) +
      1
    $('#configuration_row').append('<tr>' + '<td>' + next_sr_no + '</td>' +
      '<td> <span contenteditable="true" textarea style="display: inline-block;min-width: 10em;max-width:10em;overflow:hidden"></span></td>' +
      '<td><button type="button" class="btn btn-xs btn-primary configure_button" href="#carouselExampleIndicators" data-slide="next">Configure</button></td>' +
      '</tr>')
    var lastTr = $('#config_table').find('tr').last();
    lastTr.find('.configure_button').click(configure_click);
    $('.configure_button').prop('disabled',true);
    $('#carouselExampleIndicators').find('#config_table').find('#configuration_row').find('span').on('input',function() {
    var len=0;
    for(let i = 0; i < ($('#carouselExampleIndicators').find('#config_table').find('#configuration_row').find('span')).length; i++) {
      if($('#carouselExampleIndicators').find('#config_table').find('#configuration_row').find('span').eq(i).html() != '' && $('#decision_name').html() != '' && $('#decision_purpose').html() != '') {
        len = 1;
      } else {
        len = 0;
        break;
      }
    }
    if (len == 1){
        $('.configure_button').prop('disabled',false);

    } else {
      $('.configure_button').prop('disabled',true);
    }
  })
  })

  $('.configure_button').click(configure_click);

  function configure_click() {
    var condition_name = ($(this).closest('tr').find('td:nth-child(2) span').text())
    var condition_no = ($(this).closest('tr').find('td:nth-child(1)').text())
    $("#save_and_add_condition").attr("conditionId", condition_no);
    $("#save_and_finalize").attr("conditionId", condition_no);
    if (condition_no in filter_dict) {
      let obj = filter_dict[condition_no]
      $("#condition_name_append").html(obj["condition_name"]);
      $("#select_conditionTable").val(obj["table_name"]).trigger("change");
      conditionalTableDecisionBox();
      $('#decisionBoxTable').html(obj["condition_string"]);

      for (let i = 0; i < obj["input_value"].length; i++) {
        const value = obj["input_value"][i];
        const cond_value = obj["condition_value"][i];
        $("#decisionBoxTable").find('input').eq(i).val(value);
        $("#decisionBoxTable").find('select').eq(i).val(cond_value);
      }
      $('.remove_filter').on('click', removefilter)

    } else {
      $("#condition_name_append").html(condition_name);
      $("#condition_dropdown_decision").empty();
      $("#select_conditionTable").val("").trigger("change");
      $('#decisionBoxTable').empty()
    }
  }

  $("#select_conditionTable").on("select2:select", conditionalTableDecisionBox);





  function conditionalTableDecisionBox() {

    $('#decisionBoxTable').empty()
    $("#condition_dropdown_decision").empty()
    $.ajax({
      url: window.location.pathname,
      data: {
        'model_name': $("#select_conditionTable").val(),
        'operation': 'conditional_table',
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        var label_column = data.label_columns
        for (const [key, value] of Object.entries(label_column)) {
          $("#condition_dropdown_decision").append(
            '<li class="dropdown-item"><a href="javascript:void(0)" name=' +
            key + ' class="filter_btn">' + value + '</a></li>');
        }
        var form_fields = data.form_fields
        $('.filter_btn').click(function () {
          var name = $(this).attr('name');
          var text = $(this).text();
          var STRING = data.form_fields[name]
          $('#decisionBoxTable').append(STRING);

          $('#decisionBoxTable tr').eq(-1).find("select").each(function () {
    $(this).select2();
          });


          $('.remove_filter').on('click', removefilter);

          function removefilter() {
            $(this).closest("tr").remove();
          }
        });

      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    });
  }

  $('.remove_filter').on('click', removefilter)

  function removefilter() {
    $(this).closest("tr").remove();
  }

</script>


<!-- OCR -->
<script>

  $('#tablenameocr').on("select2:select", function () {
    tabocr = $('#tablenameocr').val()
    $.ajax({
      url: window.location.pathname,

      data: {
        'operation': 'dropFieldList',
        'tableName': tabocr,
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        $('#columnocr').empty()
        for (var i = 0; i < data.fieldList.length; i++) {
          $('#columnocr').append(new Option(data.fieldList[i], data.fieldList[i]));
        }
        if($('#tablenameocr').attr("data-reload") == "yes"){
          let data_ = JSON.parse($('#tablenameocr').attr("data-reloaddata"))
          $('#columnocr').val(data_.columns).trigger("change")
          $('#tablenameocr').removeAttr("data-reloaddata")
          $('#tablenameocr').removeAttr("data-reload")
        }
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
    })

  });

  $('#SaveButtonOcr').click(function () {
    let tab_header_name = $(this).parent().prev().find('#tabHeaderOcr').val()
    let tab_header_name_validation = $(this).parent().prev().find('.tabHeaderEmptyValidation')

    var ocrConfigDict = {};
    tabocr = $('#tablenameocr').val()
    colocr = $('#columnocr').val()
    ocrConfigDict["tablename"] = tabocr
    ocrConfigDict["columns"] = colocr
    ocrConfigDict["percentval"] = $('#ocrperc').val()
    ocrConfigDict["operationtype"] = $('#selectOperationocr').val()
    var iconselectorsOcr;
    $('.listoficons').each(function () {
      if ($(this).css("border").includes("rgb(184, 134, 11)")) {
        var number1 = $(this).attr("class").indexOf('listoficons') - 1
        iconselectorsOcr = $(this).attr("class").substr(0, number1)
      }
    });

    var cellSelected = editorCopy.editor.graph.getModel().getCell($('#ocrModal').find('.modal-footer').attr('data-shapeid'));
    cellShapeUniqueID = cellSelected.style.search("shapeUniqueID")
    if (cellShapeUniqueID < 0) {
      var itemID = ("cube" + Math.random()).replace('.', "")
      cellSelected.style = cellSelected.style + "shapeUniqueID=" + itemID
    }
    else {
      var itemID = (cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=") + 1)
    }
    var indexSeparator = cellSelected.style.indexOf(';');
    var elementShape = cellSelected.style.substr(0, indexSeparator);
    $.ajaxSetup({
      beforeSend: function (xhr, settings) {
        xhr.setRequestHeader("X-CSRFToken", ctoken);
      }
    });
    tab_header_name_validation.css('display','none')
    if(!tab_header_name){
      tab_header_name_validation.css('display','block')
    }else{
      $.ajax({
      url: window.location.pathname,

      data: {
        'operation': 'saveConfigOcr',
        'processName': process_name,
        'subProcessName': subprocess_name,
        'table_name':$('#tablenameocr').val(),
        'icon_tab': iconselectorsOcr,
        'tab_header_name': $('#tabHeaderOcr').val(),
        'tabBodyContent': JSON.stringify(ocrConfigDict),
        'elementID': itemID,
        'shape': elementShape
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        Swal.fire({icon: 'success',text: 'OCR configuration saved successfully!'});
        $('#ocrModal').modal('hide')
        $('#ocrperc')[0].value = ""
        $('#tablenameocr').val("").trigger('change')
        $('#columnocr').val("").trigger('change')
        $('#selectOperationocr').val("").trigger('change')
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Failure in saving the OCR configuration.  Please check your configuration and try again.'});
      }
    })
    }

  });




</script>

<!-- Pivot Report -->
<script>

  $("#SaveButtonPivotReport").on('click',function(){
    let report_name =$('#pivot_report_name').val()
    let category_name = $('#pivot_category_name').val()
    let tab_header_name = $(this).parent().prev().find('#tabHeaderPivotReport').val()
    let tab_header_name_validation = $(this).parent().prev().find('.tabHeaderEmptyValidation')
    let pivot_report_dict = {
      'category_name':category_name,
      'report_name': report_name
  }
    var iconselectorspivot;
    $('.listoficons').each(function () {
      if ($(this).css("border").includes("rgb(184, 134, 11)")) {
        var number1 = $(this).attr("class").indexOf('listoficons') - 1
        iconselectorspivot = $(this).attr("class").substr(0, number1)
      }
    });


    var cellSelected = editorCopy.editor.graph.getModel().getCell($('#pivotReportModal').find('.modal-footer').attr('data-shapeid'));
    cellShapeUniqueID = cellSelected.style.search("shapeUniqueID")
    if (cellShapeUniqueID < 0) {
      var itemID = ("hexagon" + Math.random()).replace('.', "")
      cellSelected.style = cellSelected.style + "shapeUniqueID=" + itemID
    }
    else {
      var itemID = (cellSelected.style.substr(cellShapeUniqueID)).substr((cellSelected.style.substr(cellShapeUniqueID)).search("=") + 1)
    }
    var indexSeparator = cellSelected.style.indexOf(';');
    var elementShape = cellSelected.style.substr(0, indexSeparator);

    $.ajaxSetup({
      beforeSend: function (xhr, settings) {
        xhr.setRequestHeader("X-CSRFToken", ctoken);
      }
    });

    let currentDevMode = "{{current_dev_mode}}"
        if(currentDevMode === "Edit" || currentDevMod =="Build"){
          $.ajax({
            url: window.location.pathname,
            data: {
            'operation': "fetchDependencies",
            'item_group_code':$('#graphContainerID').attr('data-process_code'),
            },
            type: "POST",
            dataType: "json",
            success: function (data) {

                if (data.appDependency.length > 0) {
                  $('#dependencyTable').empty()

                                for(var i=0;i<data.appDependency.length;i++){

                                    $('#dependencyTable').append(`<tr><td style="font-weight:bold">${i+1}.</td><td style="font-weight:bold;text-align:start">&nbsp;&nbsp;${data.appDependency[i]}</td></tr>`)
                                }
                                $('#dependencyChecker').modal('show')
                                $('#btn_dependencySave').off('click').on('click',function(){
                                  tab_header_name_validation.css('display','none')
                                  if(!tab_header_name){
                                    tab_header_name_validation.css('display','block')
                                  }else{
                                    $.ajax({
                                    url: window.location.pathname,
                                    data: {
                                      'operation': 'saveConfigPivotReport',
                                      'processName': process_name,
                                      'subProcessName': subprocess_name,
                                      'icon_tab':iconselectorspivot,
                                      'tab_header_name': tab_header_name ,
                                      'tabBodyContent': JSON.stringify(pivot_report_dict),
                                      'elementID': itemID,
                                      'shape': elementShape
                                    },
                                    type: "POST",
                                    dataType: "json",
                                    success: function (data) {
                                      Swal.fire({icon: 'success',text: 'Pivot Report configuration saved successfully!'});
                                      $("#pivotReportModal").modal('hide')
                                      $('#tabHeaderPivotReport').val("").trigger('change')
                                      $('#pivot_report_name').val("").trigger('change')
                                      $('#pivot_category_name').val("").trigger('change')
                                    },
                                    error: function () {
                                      Swal.fire({icon: 'error',text: 'Error! Failure in saving the Pivot Report configuration. Please check your configuration and try again.'});
                                    }
                                  })
                                  }
                                                  })
                } else {
                  tab_header_name_validation.css('display','none')
                  if(!tab_header_name){
                    tab_header_name_validation.css('display','block')
                  }else{
                    $.ajax({
                    url: window.location.pathname,
                    data: {
                      'operation': 'saveConfigPivotReport',
                      'processName': process_name,
                      'subProcessName': subprocess_name,
                      'icon_tab':iconselectorspivot,
                      'tab_header_name': tab_header_name ,
                      'tabBodyContent': JSON.stringify(pivot_report_dict),
                      'elementID': itemID,
                      'shape': elementShape
                    },
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                      Swal.fire({icon: 'success',text: 'Pivot Report configuration saved successfully!'});
                      $("#pivotReportModal").modal('hide')
                      $('#tabHeaderPivotReport').val("").trigger('change')
                      $('#pivot_report_name').val("").trigger('change')
                      $('#pivot_category_name').val("").trigger('change')
                    },
                    error: function () {
                      Swal.fire({icon: 'error',text: 'Error! Failure in saving the Pivot Report configuration. Please check your configuration and try again.'});
                    }
                  })
                  }
                }

            },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            });
          }else{
            tab_header_name_validation.css('display','none')
    if(!tab_header_name){
      tab_header_name_validation.css('display','block')
    }else{
      $.ajax({
      url: window.location.pathname,
      data: {
        'operation': 'saveConfigPivotReport',
        'processName': process_name,
        'subProcessName': subprocess_name,
        'icon_tab':iconselectorspivot,
        'tab_header_name': tab_header_name ,
        'tabBodyContent': JSON.stringify(pivot_report_dict),
        'elementID': itemID,
        'shape': elementShape
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        Swal.fire({icon: 'success',text: 'Pivot Report configuration saved successfully!'});
        $("#pivotReportModal").modal('hide')
        $('#tabHeaderPivotReport').val("").trigger('change')
        $('#pivot_report_name').val("").trigger('change')
        $('#pivot_category_name').val("").trigger('change')
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Failure in saving the Pivot Report configuration. Please check your configuration and  try again.'});
      }
    })
    }
        }




  })

</script>

<!-- Element configuration reload -->
<script>
var col_data = "";
var comparable = "";
var pf="";
var pt="";
var pc1="";
let f_element_id = ""
function create_view_config_load(element_id){
  $.ajax({
    url: window.location.pathname,
    data: {
      'element_id': element_id,
                'operation': 'create_view_config_load'
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
              p_sp_populate();
              dic_cases = data["cases"]
              dic_cb = data["custom_button"]
              $("#addCustomButtonId").attr("data-reloaddata",JSON.stringify(dic_cb))
              $("#selectAction").find("option[data-cb]").remove();
              for (const [key, value] of Object.entries(dic_cb)) {
                $("#selectAction").append(`<option value="${key}" data-cb="cb">${key}</option>"`)
              }
              createViewReset();
              $('#selectedComparableNumList').empty();
              $('#selectedFormfieldList').empty()
              $('#selectedMultipleColumn').empty();
              $('.selectTableColumns').empty();
              $('#selectTableColumnsflow').empty();
              $('.additional').empty();
              $('.def_values_opt').empty();
              $('.defaultValue').prop('checked',false);
              fieldAttributesCV =[]
              compareFields={}
              columnSelection = [];
              periodSelection={}
              fields = [];
              selectedColumn = []
              fieldSelectOrNot = 0
              fieldAttributesCV = data.js
              $("#viewHistory_columnAction").attr("data-reload","yes")
              $("#viewHistory_columnAction").attr("data-reloaddata",JSON.stringify(data))
              $("#viewDraft_columnAction").attr("data-reload","yes")
              $("#viewDraft_columnAction").attr("data-reloaddata",JSON.stringify(data))
              $("#viewHistory_displayColumns").attr("data-reload","yes")
              $("#viewHistory_displayColumns").attr("data-reloaddata",JSON.stringify(data))
              $("#viewRejectedRecords_displayColumns").attr("data-reload","yes")
              $("#viewRejectedRecords_displayColumns").attr("data-reloaddata",JSON.stringify(data))
              $('#selectFormTemplate').val(data.template).trigger("change");
              $('#selectFormTemplate').val(data.template).trigger("select2:select");
              if(data.replica_table == "yes" || data.replica_table == "-"){
                $("#mulsel_replica_check").prop("checked",true)
              }
              if (data.tab_data.Category_attributes.Template.form_styling_config) {
                let stylingConfig = data.tab_data.Category_attributes.Template.form_styling_config;
                if  (stylingConfig.grid_settings) {
                  let gridSettings = stylingConfig["grid_settings"]
                  $('#selectCVFormRows').val(gridSettings.rowDefinition).trigger('select2:select');
                  $('#selectCVFormRows').val(gridSettings.rowDefinition).trigger('change');
                  $('#selectCVFormRowsManualEntry').val(gridSettings.noOfRows).trigger('select2:select');
                  $('#selectCVFormRowsManualEntry').val(gridSettings.noOfRows).trigger('change');
                  $('#selectCVFormColumns').val(gridSettings.noOfColumnsInRow).trigger('select2:select');
                  $('#selectCVFormColumns').val(gridSettings.noOfColumnsInRow).trigger('change');
                  $('#saveFormStyleConfigButton').attr('data-config', JSON.stringify(stylingConfig));
                } else {
                  $('#saveFormStyleConfigButton').attr('data-config', '{}');
                }
              } else {
                $('#saveFormStyleConfigButton').attr('data-config', '{}');
              }
              if (data.tab_data.Category_attributes.Template.column_alignment) {
                let column_alignment = data.tab_data.Category_attributes.Template.column_alignment;
                $('#saveCreateViewColumnAlignmentButton').attr('data-config', JSON.stringify(column_alignment));
                if  (column_alignment.view_history_config) {
                  $('#selectGlobalHeaderVHCVColumnAlignment').val(column_alignment.view_history_config.global_header).trigger('change');
                  $('#selectGlobalContentVHCVColumnAlignment').val(column_alignment.view_history_config.global_content).trigger('change');
                }
                if  (column_alignment.view_rejected_config) {
                  $('#selectGlobalHeaderVRCVColumnAlignment').val(column_alignment.view_rejected_config.global_header).trigger('change');
                  $('#selectGlobalContentVRCVColumnAlignment').val(column_alignment.view_rejected_config.global_content).trigger('change');
                }
                if  (column_alignment.view_draft_config) {
                  $('#selectGlobalHeaderVDCVColumnAlignment').val(column_alignment.view_draft_config.global_header).trigger('change');
                  $('#selectGlobalContentVDCVColumnAlignment').val(column_alignment.view_draft_config.global_content).trigger('change');
                }
              } else {
                $('#saveCreateViewColumnAlignmentButton').attr('data-config', JSON.stringify({}));
              }

              if (data.tab_data.Category_attributes.Template.jsvalidation_config) {
                $("#js_filter_btn").attr('data-basicfilter-config',JSON.stringify(data.tab_data.Category_attributes.Template.jsvalidation_config))
                $(".jsfilter_val_message").val(data.tab_data.Category_attributes.Template.jsvalidation_config["val_message"]).trigger("change")
              }
              if(data.custom_messages && Object.keys(data.custom_messages).length != 0){
                $("#toggleCustomMessages").prop("checked",true)
                $("#customMessagesDiv").show()
                $("#customMessagesDiv").find(".c_msg_input").each(function() {

                  if(Object.keys(data.custom_messages[$(this).attr("name")]).length != 0){
                    if(data.custom_messages[$(this).attr("name")]["message"]){
                      $(this).val(data.custom_messages[$(this).attr("name")]["message"])
                    }
                    if(data.custom_messages[$(this).attr("name")]["icon"]){
                      $(this).closest(".nav-item").find(".msg_icon").attr("class",`${data.custom_messages[$(this).attr("name")]["icon"]} msg_icon`)
                    }
                  }
                })
              }

              if(data.big_data_parameters && Object.keys(data.big_data_parameters).length > 0){
                $("#toggle_big_data").prop("checked", true).trigger('change')
                if(data.big_data_parameters.server_side_columns){
                  foreignkey_columnnames = data.big_data_parameters.server_side_columns
                  $('#foreignkey_columnnames').attr("data-new_value", foreignkey_columnnames)
                  $('#foreignkey_columnnames').val(foreignkey_columnnames).trigger('change');
                }
                if(data.big_data_parameters.server_side_page_length){
                  $('#server_side_length').val(data.big_data_parameters.server_side_page_length).trigger('change');
                }
              } else {
                $("#toggle_big_data").prop("checked", false).trigger('change')
              }

              $("#selectFormTable").val(data.table_name).trigger("change")
                $('.listoficons').each(function(){
                  if($(this).attr('class').replace(' listoficons', '').trim() == data.icon.trim() )
                  {
                    $(this).css("border","1px solid rgb(184, 134, 11)")
                    return
                  }
                  else{
                    $(this).css("border","0px none rgb(184, 134, 11)")
                  }
                });
                if ((data.tab_data.Category_attributes.Template.carousel_view != undefined) &&
                (data.tab_data.Category_attributes.Template.carousel_view != "") &&
                (Object.keys(data.tab_data.Category_attributes.Template.carousel_view).length != 0)) {
                  $("#togglepagination").prop("checked", true).trigger('change')
                  $(".paginationrow").css("display", "block");
                  $("#pageSelection").css("display", "block")
                  $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'formTableFields',
                    'tablesForm': JSON.stringify(data.table_name),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (datav) {
                    verboseNamecara = {}
                    for (j in datav.finalFieldList) {
                      verboseNamecara[datav.finalFieldList[j]['fieldName']] = datav.finalFieldList[j]['verbose']
                    }
                    var nrowdata = data.tab_data.Category_attributes.Template.carousel_view
                    for (i in nrowdata){
                      addPageRow(verboseNamecara)
                      $(".pageFieldClass").last().val(nrowdata[i]).change()
                    }
                   },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              } else {
                $("#togglepagination").prop("checked", false).trigger('change')
                $("#addPageRowID").attr("nrow", 0)
                $(".paginationrow").empty()
                $(".paginationrow").css("display", "none");
                $("#pageSelection").css("display", "none")
              }

              if ((data.tab_data.Category_attributes.Template.carousel_view_min_fields != undefined) &&
                (data.tab_data.Category_attributes.Template.carousel_view_min_fields != "") &&
                (Object.keys(data.tab_data.Category_attributes.Template.carousel_view_min_fields).length != 0)) {
                  var nrowdata2 = data.tab_data.Category_attributes.Template.carousel_view_min_fields
                  $("#togglepagination_min_fields").prop("checked", true).trigger('change')
                  $(".paginationrow_min_fields").css("display", "block");
                  $("#pageSelection_min_fields").css("display", "block")
                  $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'formTableFields',
                    'tablesForm': JSON.stringify(data.table_name),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (datav) {
                    verboseName = []
                    $('#formfieldList').empty()
                    for (j in datav.finalFieldList) {
                      verboseName.push(datav.finalFieldList[j]['verbose'])
                    }
                    for (i in nrowdata2){
                      addPageRow_min_fields(verboseName)
                      $(".pageFieldClass_min_fields").last().val(nrowdata2[i]["fields"]).change()
                      $(".min_re_car").last().val(nrowdata2[i]["no_req_fields"]).change()
                    }
                   },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              } else {
                $("#togglepagination_min_fields").prop("checked", false).trigger('change')
                $("#addPageRowID_min_fields").attr("nrow", 0)
                $(".paginationrow_min_fields").empty()
                $(".paginationrow_min_fields").css("display", "none");
                $("#pageSelection_min_fields").css("display", "none")
              }

              if(data.tab_data.copy_paste_config){

                if(data.tab_data.copy_paste_config.copy.to_apply == true){
                  $("#field_copy_allow").prop("checked", true).trigger('change')
                  $("#fcopy_fields").attr("data-reload","yes")
                  $("#fcopy_fields").attr("data-reloaddata",JSON.stringify(data))
                }

                if(data.tab_data.copy_paste_config.paste.to_apply == true){
                  $("#field_paste_allow").prop("checked", true).trigger('change')
                  $("#fpaste_fields").attr("data-reload","yes")
                  $("#fpaste_fields").attr("data-reloaddata",JSON.stringify(data))
                }
            }

            if(data.tab_data.card_logo == true){
              $("#togglelogo_cre_card").prop("checked", true).trigger('change')
            }

            if(data.tab_data.email_logo == true){
              $("#togglelogo_email").prop("checked", true).trigger('change')
            }

            if(data.tab_data.user_profile_pic == true){
              $("#togglelogo_user_pic").prop("checked", true).trigger('change')
            }

            if(data.tab_data.user_email == true){
              $("#togglelogo_user_email").prop("checked", true).trigger('change')
            }

            if ((data.tab_data.Category_attributes.Template.column_reorder != undefined) &&
                (data.tab_data.Category_attributes.Template.column_reorder != "") &&
                (Object.keys(data.tab_data.Category_attributes.Template.column_reorder).length != 0)) {
                  $("#togglepagination_colorder").prop("checked", true).trigger('change')
                  $(".paginationrow_colorder").css("display", "block");
                  $("#pageSelection_colorder").css("display", "block")
                  $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'formTableFields',
                    'tablesForm': JSON.stringify(data.table_name),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (datav) {
                    verboseName = []
                    let tempp_v_dict = {}
                    $('#formfieldList').empty()
                    var nrowdata = data.tab_data.Category_attributes.Template.column_reorder
                    for (j in datav.finalFieldList) {
                      tempp_v_dict[datav.finalFieldList[j]['fieldName']] = datav.finalFieldList[j]['verbose']
                    }
                    $(".paginationrow_colorder").empty()
                    for(i in nrowdata){
                      $(".paginationrow_colorder").append(`
                      <li class="btn btn-sm btn-light col" name="${nrowdata[i]}" style="height:auto;margin: 5px auto;">
                        <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${tempp_v_dict[nrowdata[i]]}
                      </li>`);
                    }
                    $('#column-reorder').find('.sortable-order').sortable()
                   },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              } else {
                $("#togglepagination_colorder").prop("checked", false).trigger('change')
                $("#addPageRowID_colorder").attr("nrow", 0)
                $(".paginationrow_colorder").empty()
                $(".paginationrow_colorder").css("display", "none");
                $("#pageSelection_colorder").css("display", "none")
              }

                $('.dragContainer').empty();
                $('.dragContainer').append(`
                <div class="formTempContainer isActive" data-class="formTempContainer"
                  style="border: 1px solid black; position: absolute; left: 0px; top: 0px; width: 97%; height: 100%; padding: 3px; margin: 0px; background-color: rgb(255, 255, 255);">
                  <div class="float-right text"
                    style="display:block;right: 10px; top: 45%;position: absolute; left:10%;opacity:0.5; z-index:999">Template</div>
                  <div class="toolbar float-right" style="display: none; right: 10px; top: 1px; position: absolute; left: 100%;">
                    <button onclick="deleteElement1.call(this)"
                      style="background-color:transparent; border:transparent; border-color:transparent; position:sticky;"><i
                        class="far fa-trash-alt" style="color: var(--primary-color);"></i></button><br>
                    <button onclick="editElement.call(this)"
                      style="background-color:transparent; border:transparent; border-color:transparent; position:sticky"><i
                        class="far fa-edit" style="color: var(--primary-color);"></i></button><br>
                  </div>
                  <div class="card-body" style="margin:1px;max-height: 100%;overflow: hidden; overflow-y: scroll">
                    <div class="row formBtn" style="display: block;"></div>
                  </div>
                </div>
                `);

                if(Object.prototype.hasOwnProperty.call(data.tab_data, 'check_validForm')){
                  let v = data.tab_data.check_validForm
                  if(v){
                    $("#check_validForm").prop("checked", true).trigger('change')
                  }else{
                    $("#check_validForm").prop("checked", false).trigger('change')
                  }
                }

                if(Object.prototype.hasOwnProperty.call(data.tab_data, 'restrict_mand')){
                  if(data.tab_data.restrict_mand){
                    $("#togglepaginationmand").prop("checked", true).trigger('change')
                  }else{
                    $("#togglepaginationmand").prop("checked", false).trigger('change')
                  }
                }

                if(Object.prototype.hasOwnProperty.call(data.tab_data, 'restrict_wrap')){
                  if(data.tab_data.restrict_wrap){
                    $("#togglepaginationwarp").prop("checked", true).trigger('change')
                  }else{
                    $("#togglepaginationwarp").prop("checked", false).trigger('change')
                  }
                }

                $(".button_standard_save").each(function() {
                  if($(this).attr("value") == "Save"){
                    if($(this).hasClass("formBtn")){
                      $(".backbtn").css("display","none");
                    }
                    $(this).removeClass("formBtn")
                    $(this).addClass("formBtnSave")
                  }
                })
                $('.dragContainer').find('.formTempContainer').draggable({
                  grid: [ 50, 50 ]
                }).draggable("option", "grid", [ 50, 50 ]).resizable()
                $('.dragContainer').find('.formContainer').draggable({
                  grid: [ 50, 50 ]
                }).draggable("option", "grid", [ 50, 50 ]).resizable()
                $('.dragContainer').find('.formChild').draggable({
                  grid: [ 25, 25 ]
                }).draggable("option", "grid", [ 25, 25 ]).resizable();

                if ((Object.keys(data.tab_data.edit_labels).length != 0)) {
                  var nrowdata = data.tab_data.edit_labels
                  $("#toggleeditlabel").prop("checked", true).trigger('change')
                  $(".labelrow").css("display", "block");
                  $("#labelSelection").css("display", "block")
                  $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'formTableFields',
                    'tablesForm': JSON.stringify(data.table_name),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (datav) {
                    verboseNameEdit = {}
                    for (j in datav.finalFieldList) {
                      verboseNameEdit[datav.finalFieldList[j]['fieldName']] = datav.finalFieldList[j]['verbose']
                    }
                    for (i in nrowdata){
                      addPageRow1(verboseNameEdit)
                      $(".label_name_op").last().val(i).change()
                      $(".pageFieldClass1").last().val(nrowdata[i]).change()
                    }
                   },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              } else {
                $("#toggleeditlabel").prop("checked", false).trigger('change')
                $("#addPageRowID_1").attr("nrow", 0)
                $(".labelrow").empty()
                $(".labelrow").css("display", "none");
                $("#labelSelection").css("display", "none")
              }

                if (data.template == 'Constraint') {
                  if (data.constraint_holder) {
                  if(Object.keys(data.constraint_holder).length == 1){
                    var outsider=Object.keys(data.constraint_holder)[0];
                    var outsider_val =data.constraint_holder[outsider]
                    $('.constraint_name').val(outsider).trigger("change")
                      $('.constraint_type').val(outsider_val).trigger("change")
                      $('.add_tables').empty();
                  }else{
                    var outsider=Object.keys(data.constraint_holder)[0];
                    var outsider_val =data.constraint_holder[outsider]
                    $('.constraint_name').val(outsider).trigger("change")
                      $('.constraint_type').val(outsider_val).trigger("change")
                      $('.add_tables').empty();
                    for(var i=1;i<Object.keys(data.constraint_holder).length;i++){
                      let insider=Object.keys(data.constraint_holder)[i];
                      let insider_val =data.constraint_holder[insider];
                      $('.add_constraint').trigger('click')
                      $('.add_tables').find('.row').eq(-1).find('input').val(insider).trigger('change');
                      $('.add_tables').find('.row').eq(-1).find('select').val(insider_val).trigger('change');
                    }
                  }
                }



                $('.selectFormTable_constraint').val(data.selected_tables).trigger("change")

               setTimeout(() => {

                $('.selectFields_constraint').val(data.selectedConstraint_fields).trigger("change")
                $('.selectFields_constraint').val(data.selectedConstraint_fields).trigger("select2:select")
               }, 800);

                }



               if(data.template=="Comparable"){
                $.ajax({
                        url: window.location.pathname,

                        data: {
                          'operation': 'comparableformTableFields',
                          'tablesForm': JSON.stringify(data.table_name),
                        },
                        type: "POST",
                        dataType: "json",
                        success: function (data) {
                          $('#periodSelection').empty();
                          $('#selectCharColumn').empty();
                          $('#ComparableNumList').empty();
                          $('#selectedComparableNumList').empty();

                          for (j in data.intFieldList) {
                            $('#ComparableNumList').append(
                              `<button type="button" class="comparableField list-group-item list-group-item-action list-group-item-light" value="${data.intFieldList[j]['fieldName']}" data-fieldType="${data.intFieldList[j]['fieldType']}">${data.fieldListVerbose[data.intFieldList[j]['fieldName']]}</button>`
                            )
                          }
                          for (j in data.charFieldList) {
                            $('#selectCharColumn').append(
                              `<option class="columninput" value="${data.charFieldList[j]['fieldName']}">${data.fieldListVerbose[data.charFieldList[j]['fieldName']]}</option>`
                            )
                          }
                          if(typeof(col_data) != "undefined")
                        {
                          $('#selectCharColumn').val(col_data).trigger("change")
                          columnSelection = col_data
                        }
                        if(typeof(comparable) != undefined)
                        {
                        for (const [key, value] of Object.entries(comparable)) {
                          if(value == "min")
                          {
                          $('#selectedComparableNumList').append(`<div class="row"><button class="comparableFieldSelected list-group-item list-group-item-action list-group-item-light col-7" value="${key1}" data-toggle="dropdown" data-hover="dropdown" >${data.fieldListVerbose[key]}</button><select class="col-4 select2 form-control" style="float:left;"><option value="min" selected>Min</option><option value="max">Max</option><option value="mean">Mean</option></select></div>`)
                          }
                          else if(value == "max"){
                            $('#selectedComparableNumList').append(`<div class="row"><button class="comparableFieldSelected list-group-item list-group-item-action list-group-item-light col-7" value="${key}" data-toggle="dropdown" data-hover="dropdown" >${data.fieldListVerbose[key]}</button><select class="col-4 select2 form-control" style="float:left;"><option value="min">Min</option><option value="max" selected>Max</option><option value="mean">Mean</option></select></div>`)
                          }
                          else if(value == "mean")
                          {
                            $('#selectedComparableNumList').append(`<div class="row"><button class="comparableFieldSelected list-group-item list-group-item-action list-group-item-light col-7" value="${key}" data-toggle="dropdown" data-hover="dropdown" >${data.fieldListVerbose[key]}</button><select class="col-4 select2 form-control" style="float:left;"><option value="min">Min</option><option value="max">Max</option><option value="mean" selected>Mean</option></select></div>`)
                          }
                          else{
                            $('#selectedComparableNumList').append(`<div class="row"><button class="comparableFieldSelected list-group-item list-group-item-action list-group-item-light col-7" value="${fieldname}" data-toggle="dropdown" data-hover="dropdown" >${data.fieldListVerbose[fieldname]}</button><select class="col-4 select2 form-control" style="float:left;"><option value="" disabled selected>-----</option><option value="min">Min</option><option value="max">Max</option><option value="mean">Mean</option></select></div>`)
                          }
                          aggfuncprop = {
                          "fieldname": key,
                          "aggfunc": value
                        }

                        compareFields[key] = value;
                        $("#selectedComparableNumList div").find("select").each(function () {

    $(this).select2( )
                          $(this).addClass("aggfunc")
                        })
                        $(".aggfunc").on("change", function(){
                        let aggfunc = $(this).val();
                        let fieldname = $(this).closest("div.row").find("button").val();
                        aggfuncprop = {
                          "fieldname": fieldname,
                          "aggfunc": aggfunc
                        }

                        compareFields[fieldname] = aggfunc;
                        })
                        }
                        }


                          if (data.dateFieldList.length > 0){
                            html = "";
                            for (j in data.dateFieldList) {
                              html += `<option class="columninput" value="${data.dateFieldList[j]['fieldName']}">${data.fieldListVerbose[data.dateFieldList[j]['fieldName']]}</option>`
                            }
                            $('#periodSelection').append('<label class="acies_label" for="periodCol">Period:&nbsp;</label><select id="selectPeriodCol" class="select2 form-control" name="periodColumn">'+'<option value="" disabled selected>-----------</option>'+ html +'</select>')

                            $('#periodSelection').append(
                            `<label class="acies_label">From:</label><input type="date" name="periodFrom" class="periodinput" id="periodFrom"><label class="acies_label">To:</label><input type="date" name="periodTo" class="periodinput" id="periodTo">`
                            )

                          $("#selectPeriodCol").val(pc1).trigger("change")
                          periodSelection["period_col"] = pc1;
                          $("#periodFrom").val(pf)
                          periodSelection["periodFrom"] = pf;
                          $("#periodTo").val(pt)
                          periodSelection["periodTo"] = pt;
                          } else {
                            $('#periodSelection').empty()
                          }
                          $('.comparableField').click(selectedComparableField)

                          $('#selectPeriodCol').on('change', function(){
                            periodSelection["period_col"] = $(this).val();
                          })
                          $('.periodinput').on('change', function(){
                            period_type = $(this).attr("id");
                            periodSelection[period_type] = $(this).val();
                          })
                          $('#selectCharColumn').on('change', function(){
                            columnSelection = $(this).val();
                          })

                        },
                        error: function () {
                          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                        }
                      });
               }
                $('#tabHeaderCreateView').val(data.tab_header_name)
                $('#selectAction').val(data.action).trigger("change")
                $("#show_labels").prop("checked",data.tab_data.Category_attributes.Template.show_labels)


                col_data = data.col
                comparable = data.comparable
                pc1=data.period.period_col
                pf = data.period.periodFrom
                pt = data.period.periodTo
                fields = []
                var plusBtn = data.plus_btn
                var popUpOption = data.popup_option
                if (data.name_type){
                  for(var j=0; j<data.name_type.length; j++)
                  {
                    s_name = data.name_type[j].name
                    s_type = data.name_type[j].type
                    fieldproperty = {
                      "fieldname": s_name,
                      "fieldtype": s_type,
                      "fieldVerbose": data.name_type[j].verbose
                    }
                    fields.push(fieldproperty)
                    $('#selectedFormfieldList').append(
                    `<div class="row form_field_search_list">
                      <div class="col-8">
                      <button type="button" class="formFieldSelected list-group-item list-group-item-action list-group-item-light" value="${s_name}" data-fieldType="${s_type}" data-toggle="dropdown" data-hover="dropdown" >${data.name_type[j].verbose}</button>
                      </div><div class="col-4 searchable_template">
                      <input type="checkbox" name="${s_name}" class="checkboxinput form_search_selected" style="min-height:42px;">`);
                    fieldSelectOrNot = 1;
                    $('.multipleSelectedColumn').empty();
                    $('.multipleSelectedColumn').append(`<option value="${s_name}">${data.name_type[j].verbose}</option>`)

                    selectedColumn[j] =  data.name_type[j].name;
                  }
                  $('.formFieldSelected').click(function () {
                    for (let key = 0; key < fields.length; key++) {
                      if (fields[key].fieldname == $(this).val()) {
                        for(let i = 0; i < fieldAttributesCV.length; i++) {
                          if(fieldAttributesCV[i].hasOwnProperty(fields[key].fieldname)){
                            fieldAttributesCV.splice(i,1);
                            break;
                          }
                        }
                        removeSelectedFieldShape(fields[key].fieldname)
                        selectedColumn.splice(key,1);
                        fields.splice(key, 1);
                        if (fields.length == 0) {
                          populatePreview()
                          fieldAttributesCV = []
                        }

                        key--;
                        break;
                      }
                    }
                  if(fields.length > 0) {
                    fieldSelectOrNot = 1
                  } else {
                    fieldSelectOrNot = 0
                    }
                    if (len = 0 && fields.length == 0) {
                        $('.multipleSelectedColumn').empty();
                      }
                    if (fields.length == 0) {
                      $('.multipleSelectedColumn').empty();
                      for (let j=0; j<allFieldsColumnChar.length; j++){
                        $('.multipleSelectedColumn').append(
                          `<option value="${allFieldsColumnChar[j]}">${allFieldsColumnCharVerbose[j]}</option>`)
                      }
                    }

                    else {
                      $('.multipleSelectedColumn').empty();
                      for (i in allFieldsColumnChar){
                      for (let j=0; j<fields.length; j++){
                        if (fields[j].fieldname == allFieldsColumnChar[i]) {
                        $('.multipleSelectedColumn').append(
                          `<option value="${fields[j].fieldname}">${allFieldsColumnCharVerbose[i]}</option>`)
                      }
                      }
                    }
                  }

                    $(this).closest('.form_field_search_list').remove()


                  })
                }

                if (selectedColumn.length == 0) {
                $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'formTableFields',
                    'tablesForm': JSON.stringify(data.table_name),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    allFieldsColumns = []
                    allFieldsColumnsNull = []
                    allFieldsColumnsType = []
                    verboseName = []
                    $('#formfieldList').empty()
                    for (j in data.finalFieldList) {
                      $('#formfieldList').append(
                        `<button type="button" class="formField list-group-item list-group-item-action list-group-item-light" value="${data.finalFieldList[j]['fieldName']}" data-fieldType="${data.finalFieldList[j]['fieldType']}">${data.finalFieldList[j]['verbose']}</button>`
                      )
                      allFieldsColumns.push(data.finalFieldList[j]['fieldName']);
                      allFieldsColumnsNull.push(data.finalFieldList[j]['null']);
                      allFieldsColumnsType.push(data.finalFieldList[j]['fieldType'])
                      verboseName.push(data.finalFieldList[j]['verbose'])
                    }
                   },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
                } else {
                  $('.multipleSelectedColumn').val(m).trigger('change');
                  if (data.template == 'Flow Definition') {
                  $('#flowhiddenSelectedColumn').val(m).trigger('change');
                  }
                  $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'formTableFields',
                    'tablesForm': JSON.stringify(data.table_name),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#formfieldList').empty()
                    allFieldsColumns = []
                    allFieldsColumnsNull = []
                    allFieldsColumnsType = []
                    verboseName = []
                    for (j in data.finalFieldList) {
                      $('#formfieldList').append(
                        `<button type="button" class="formField list-group-item list-group-item-action list-group-item-light" value="${data.finalFieldList[j]['fieldName']}" data-fieldType="${data.finalFieldList[j]['fieldType']}">${data.finalFieldList[j]['verbose']}</button>`
                      )
                      allFieldsColumns.push(data.finalFieldList[j]['fieldName']);
                      allFieldsColumnsNull.push(data.finalFieldList[j]['null']);
                      allFieldsColumnsType.push(data.finalFieldList[j]['fieldType'])
                      verboseName.push(data.finalFieldList[j]['verbose'])
                    }
                   },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
                }
                if (data.table_name.length == 0 && selectedColumn.length == 0) {
                  $('.multipleSelectedColumn').empty();
                  $('.selectTableColumns').empty();
                  $('#selectTableColumnsflow').empty();
                  $('.additional').empty();
                  $('.def_values_opt').empty();
                }
                if (data.template == 'Flow Definition') {
                  setTimeout(function(){
                  $('#selectMultipleFormTableflow').val(data.mastertableflow).trigger("change");
                  var masterColumnflow = data.masterColumnflow
                  var flowcolumn = data.flowcolumn
                  $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'formTableMiltipleFieldsUnique',
                    'tablesForm': JSON.stringify([data.mastertableflow]),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#selectTableColumnsflow').empty()
                    for (j in data.finalFieldList) {
                      $('#selectTableColumnsflow').append(
                        `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['fieldVerbose']}</option>`
                      );
                    }
                    $('#selectTableColumnsflow').val(masterColumnflow).trigger('change');

                  },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })

                $.ajax({
                  url: window.location.pathname,

                  data: {
                    'operation': 'formTableFields',
                    'tablesForm': JSON.stringify(data.table_name),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    $('#flowhiddenSelectedColumn').empty()
                    allFieldsColumns = []
                    allFieldsColumnsNull = []
                    allFieldsColumnsType = []
                    for (j in data.finalFieldList) {
                      $('#flowhiddenSelectedColumn').append(
                        `<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['fieldName']}</option>`
                      );
                      allFieldsColumns.push(data.finalFieldList[j]['fieldName'])
                      allFieldsColumnsNull.push(data.finalFieldList[j]['null']);
                      allFieldsColumnsType.push(data.finalFieldList[j]['fieldType'])
                    }
                    $('#flowhiddenSelectedColumn').val(flowcolumn).trigger("change");

                  },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                })
              },300)
            }

              $("#selectAllField").attr("data-present","yes");
              $("#selectAllField").attr("data-relaod",JSON.stringify(data.selectedField));
              $('#selectField').empty();
              for(let key = 0 ; key < fields.length; key++){
                $('#selectField').append(`<option value="${fields[key].fieldname}" verbose-name="${fields[key].fieldVerbose}">fields[key].fieldname</option>`)
              }
              populatePreview()
              formLevelFieldList = []
              setTimeout(() => {
                if (data.form_Field) {
                  formLevelFieldList = data.form_Field
                }
              },500)
              $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).find('.color').removeClass('changeColor')
              $('input[type=radio][name=js][id=single]').prop('checked',true);
              $('input[type=radio][name=js][id=multiple]').prop('checked',false);
              $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','');
              $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','');
              $('#formModal').find('.formLevelFieldCol').empty()
              $('#formModal').find('.formLevelFieldVal').find('select').empty()
              $('#formModal').find('.formLevelFieldCond').val('').trigger('change')
              $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
              $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
              $('#formModal').find('.formLevelFieldValTag').css('display','none');
              $('#formModal').find('.formLevelFieldVal').css('display','block');
              $('#formModal').find('.formLevelJs').css('display','none');
              $('input[type=radio][name=js][value=single]').prop('checked',true)
              $('input[type=radio][name=js][value=multiple]').prop('checked',false)
              $('#formModal').find('.warningFormLevelFieldInp').css('display','none')
              $('#formModal').find('.warningFormLevelFieldCol').css('display','none')
              $('#formModal').find('.warningFormLevelFieldSel').css('display','none');
              $("#graphContainerID").attr("data-tab_name",data.tab_header_name);
              $('#selectCreateViewTemplate').val(data.customTemplate).trigger("change");
              if($('#selectCreateViewTemplate').val() == "Custom defined template") {
                $('#createViewModal').find('.previewCustomTemplate').css("display",'block');
              } else {
                $('#createViewModal').find('.previewCustomTemplate').css("display",'none');
              }
              dic_cases = data["cases"]
              $("#configureCasesButton").attr("data-reloaddata",JSON.stringify(dic_cases))

              var masterData = data.tab_data.Category_sub_elements[0].Category_sub_element_attributes[3]
              if (masterData.hasOwnProperty('Auto_compute')){
                if (masterData.Auto_compute == true){
                  $('#auto_compute_checkbox').prop('checked',true)
                }else{
                  $('#auto_compute_checkbox').prop('checked',false)
                }
              }
              if (masterData.hasOwnProperty('RTF_popup')){
                if (masterData.RTF_popup == true){
                  $('#viewRTFCB').prop('checked',true)
                }else{
                  $('#viewRTFCB').prop('checked',false)
                }
              }

              if(masterData.hasOwnProperty('Master_preview')){
                if(masterData.Master_preview == true){
                  $("#master_preview_mode").prop('checked',true)
                  previewMaster()
                  if(masterData.hasOwnProperty('Preview_mode')){
                    if(masterData.Preview_mode == true){
                      $("#save_preview_mode").prop('checked',true)
                    }else{
                      $("#save_preview_mode").prop('checked',false)
                    }
                  }else{
                    $("#save_preview_mode").prop('checked',false)
                  }
                  if(masterData.hasOwnProperty('Pdf_mode')){
                    if(masterData.Pdf_mode == true){
                      $("#save_pdf_mode").prop('checked',true)
                    }else{
                      $("#save_pdf_mode").prop('checked',false)
                    }
                  }else{
                    $("#save_pdf_mode").prop('checked',false)
                  }
                }else{
                  $("#master_preview_mode").prop('checked',false)
                  previewMaster()
                }
              } else {
                $("#master_preview_mode").prop('checked',false)
                previewMaster()
              }
              var dataList = data.createViewButtonStyling
              $('#editButtonId').attr('data-list',JSON.stringify(dataList))
              $('#embededComputationBtnID').attr('data-list',JSON.stringify(data.embededComputationCreatView))
              $('#grid_layout_btn').attr('data-list',JSON.stringify(data.grid_layout_config))

              if(Object.prototype.hasOwnProperty.call(data.tab_data.Category_attributes.Template, 'createViewCustomVal')){
                let reload_custom_validation = {}
                reload_custom_validation["reload_custom_validation"] = data.tab_data.Category_attributes.Template.createViewCustomVal
                $('.customValbtnDev').attr('data-data_config',JSON.stringify(reload_custom_validation))
              }

                if(data.recurrence_config){

                  if(data.recurrence_config.to_apply == true){
                    $("#togglerecurlabel").prop("checked", true).trigger('change')
                    $("#recurr_update_fields").attr("data-reload","yes")
                    $("#recurr_update_fields").attr("data-reloaddata",JSON.stringify(data))
                  }
                }

                if(data.restict_min_config){

                  if(data.restict_min_config.to_apply == true){
                    $("#togglerest_min_label").prop("checked", true).trigger('change')
                    $("#restrict_min_fields").attr("data-reload","yes")
                    $("#restrict_min_fields").attr("data-reloaddata",JSON.stringify(data.restict_min_config.colList))
                    $("#restrict_min_no_req").val(data.restict_min_config.no_of_fields).trigger("change")
                  }
                }

								$('#loadingSpinnerCreateview').css('display', 'none');
								$('#createViewMainCanvasContainer').css('pointer-events', 'all');
								$('#createViewMainCanvasContainer').css('cursor', 'default');
              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                $('#loadingSpinnerCreateview').css('display', 'none');
								$('#createViewMainCanvasContainer').css('pointer-events', 'all');
                $('#createViewMainCanvasContainer').css('cursor', 'default');
                $('#createViewFormCollectionContainer').css('pointer-events', 'all');
								$('#createViewFormCollectionContainer').css('cursor', 'default !important');
              }

            })
}
var seltables;
function list_view_config_load_multiple(view_name){
  $("#paginationDiv_mul").css("display","none");


  $.ajax({
              url: window.location.pathname,
              data: {
                'element_id': "",
                'operation': 'list_view_config_load',
                'config_dict': JSON.stringify(multable_config),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {


  if(Object.keys(data.comp_mul_config).length > 0){
    if (view_name in data){
  data = data[view_name]
  // f_element_id = element_id
  $("#pagination_mul").attr("data-list",JSON.stringify(data['pagination']));
  seltables = data.t_name

  if(data.icon != null){
  $('.listoficons').each(function(){
    if($(this).attr('class').replace(' listoficons', '').trim() == data.icon.trim() )
    {
      $(this).css("border","1px solid rgb(184, 134, 11)")
      return
    }
    else{
      $(this).css("border","0px none rgb(184, 134, 11)")
    }
    })
  }

$('#fn_extact_data_mul').val(data.extract_data_filename)
$('.subCategory[value="JS Attributes"]').attr('data-config', '');
$("#selectLVJSAttribute_mul").val('').trigger('change');
$('#dropFields_mul').empty()
$('#dropFieldsLVUpload_mul').empty()
$('#groupFields_mul').empty()
$('#groupFields_restrictview_mul').empty()
$('#restrictFields_mul').empty()
$('#editFieldsNS_mul').empty()
$('.subCategory').each(function () {
  $(this).css({ backgroundColor: '#565a5e' });
  $(this).css({ borderColor: '#565a5e' });
})
$('.subElementCards').find('input[type=checkbox]').each(function(){
  $(this)[0].checked=false
  $(this)[0].disabled=false
})
$('#subCategoryButtons_mul').find('.fa-check-circle').each(function(){
  $(this).css('display','none')
})
$('#Datatable_mul').css('display','none')
$('#Chart_mul').css('display','none')
$('#Alert_mul').css('display','none')
$('#Filter_mul').css('display','none')
$('#ListView_Action_mul').css('display','none')
$('#Custom_mul').css('display','none')
$('#customTemplateListView_mul').css('display','none')
$('#Formatter_mul').css('display','none')
$('#JSAttributes_mul').css('display','none')
$('#previewCard_mul').empty()
  for (var i = 0; i < data.fieldList.length; i++) {
    $('#dropFields_mul').append(new Option(data.fieldList[i], data.fieldNameList[i]));
    $('#dropFieldsLVUpload_mul').append(new Option(data.fieldList[i], data.fieldNameList[i]));
    $('#restrictFields_mul').append(new Option(data.fieldList[i], data.fieldNameList[i]));
    $('#editFieldsNS_mul').append(new Option(data.fieldList[i], data.fieldNameList[i]));
  }
  for (var i = 0; i < data.groupList.length; i++) {
    $('#groupFields_mul').append(new Option(data.groupList[i]["name"], data.groupList[i]["id"]));
    $('#groupFields_restrictview_mul').append(new Option(data.groupList[i]["name"], data.groupList[i]["id"]));
  }
  for (var i = 0; i < data.fieldList.length; i++) {
    $('#customColumn_mul').append(new Option(data.fieldList[i], data.fieldList[i]));
  }
  $('#subCategoryButtons_mul').find('.fa-check-circle').each(function(){
                $(this).css('display','inline-block')
            })

  if(data.formatter_tables.length > 0){
    $('#formatColumn_mul').empty()
    for(let i=0;i<data.formatter_fieldlist.length;i++){
        $('#formatColumn_mul').append(new Option(data.formatter_fieldlist[i], data.formatter_fieldlist[i]));
    }
    for(let i=0;i<data.t_name.length;i++){
      $("#formatTab_mul").append(new Option(data.t_name[i], data.t_name[i]))
    }
  }else{

    for(let i=0;i<data.t_name.length;i++){
      $("#formatTab_mul").append(new Option(data.t_name[i], data.t_name[i]))
    }
  }

  if (data.JSAttributes) {
    $('.subCategory[value="JS Attributes"]').attr('data-config', data.JSAttributes);
    $("#selectLVJSAttribute_mul").val(data.JSAttributes).trigger('change');
  };

  if(data.hasOwnProperty("listview_custom_messages") && Object.keys(data.listview_custom_messages).length != 0){
    $("#toggleCustomListViewMessages_multidropdown").prop("checked",true).trigger("change")
    $("#customListViewMessagesDiv_multidropdown").show()

    var saved_listview_custom_messages = data.listview_custom_messages

    $("#customListViewMessagesDiv_multidropdown").find(".c_msg_input").each(function() {

      if(saved_listview_custom_messages[$(this).attr("name")]){
        if(Object.keys(saved_listview_custom_messages[$(this).attr("name")]).length != 0){
          if(saved_listview_custom_messages[$(this).attr("name")]["message"]){
            $(this).val(saved_listview_custom_messages[$(this).attr("name")]["message"])
          }
          if(saved_listview_custom_messages[$(this).attr("name")]["icon"]){
            $(this).closest(".nav-item").find(".msg_icon").attr("class",`${saved_listview_custom_messages[$(this).attr("name")]["icon"]} msg_icon`)
          }
        }
      }

    })
  }else{
    $("#toggleCustomListViewMessages_multidropdown").prop("checked",false).trigger("change")
    $("#customListViewMessagesDiv_multidropdown").find(".c_msg_input").each(function() {
      $(this).val($(this).attr("data-value"))
      $(this).closest(".nav-item").find(".msg_icon").attr("class",$(this).closest(".nav-item").find(".msg_icon").attr("data-value"))
    })

  }


  $("#formatTab_mul").val(data.formatter_tables)
  $('.dropclass').val(["Country"]);

  $("#dropFields_mul").val(data.dropfields).trigger("change");
  $("#dropFieldsLVUpload_mul").val(data.dropfieldsLVupload).trigger("change");
  $("#groupFields_mul").val(data.groupsfields).trigger("change");
  $("#groupFields_restrictview_mul").val(data.GroupsFieldRestrictViews).trigger("change");
  $("#restrictFields_mul").val(data.restrictfields).trigger("change");
  $("#editFieldsNS_mul").val(data.editFieldsNS).trigger("change");

  if(data.hasOwnProperty('basicfilter_config')){
    let basicfilter_config = JSON.parse(data.basicfilter_config)
    $(document).find('#basicfilter_items_mul').find('.filter-table').empty()
    if(basicfilter_config.length >0){
      $("#saveBasicfilter_mul").attr('data-basicfilter-config',JSON.stringify(basicfilter_config))
    } else {
      $("#saveBasicfilter_mul").removeAttr('data-basicfilter-config');
    }
  } else {
    $("#saveBasicfilter_mul").removeAttr('data-basicfilter-config');
  }

    $('#customColumn_mul').val(data.customViewData).trigger("change");
    $('#Datatable_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
        var eleme = ($(this).attr("id"))
        var ele = ($(this))
        if(data.elements.Data_table.length == 0)
        {
          $("#notrequiredDT_mul").prop("checked", true)
          ele.prop("disabled", true)
        }

        for(var i=0; i< data.elements.Data_table.length;i++)
            {
            $('.subCategory').each(function (){
                  if($(this).val()=="Filter"){
                    $(this)[0].disabled= false
                  }
              })
              $("#save_buttonid_mul").prop('disabled', false);
              $("#saveListViewConfig_mul").prop('disabled', false);
              if(eleme.toUpperCase().replace("_MUL","") == data.elements.Data_table[i].toUpperCase())
              {
                ele.prop("checked", true)
              }

            }
      })
      $('#Chart_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
        var eleme = ($(this).attr("id"))
        var ele = ($(this))
        if(data.elements.Plot_chart.length == 0)
        {
          $("#notrequiredChart_mul").prop("checked", true)
          ele.prop("disabled", true)
        }

        for(var i=0; i< data.elements.Plot_chart.length;i++)
            {
              $("#saveListViewConfig_mul").prop('disabled', false);
              $("#Chart_mul .saveElementsButton").prop('disabled', false);
              if(eleme.toUpperCase().replace("_MUL","") == data.elements.Plot_chart[i].toUpperCase())
              {
                ele.prop("checked", true)
              }
            }
      })
      $('#Alert_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
        var eleme = ($(this).attr("id"))
        var ele = ($(this))
        if(data.elements.Set_alert.length == 0)
        {
          $("#notrequiredAlert_mul").prop("checked", true)
          ele.prop("disabled", true)
        }

        for(var i=0; i< data.elements.Set_alert.length;i++)
            {
            $("#saveListViewConfig_mul").prop('disabled', false);
            $("#Alert_mul .saveElementsButton").prop('disabled', false);
            $(".alertSubElements .saveElementsButton").prop('disabled', false);
              if(eleme.toUpperCase().replace("_MUL","") == data.elements.Set_alert[i].toUpperCase())
              {
                ele.prop("checked", true)
              }
            }
      })
      $('#Filter_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
        var eleme = ($(this).attr("id").replace("elements",""))
        var ele = ($(this))

        if(data.elements.Filter.length == 0)
        {
          $("#notrequiredFilter_mul").prop("checked", true)
              ele.prop("disabled", true)
        }

        for(var i=0; i< data.elements.Filter.length;i++)
            {
            $("#saveListViewConfig_mul").prop('disabled', false);
            $("#Filter_mul .saveElementsButton").prop('disabled', false);
              if(eleme.toUpperCase().replace("_MUL","") == data.elements.Filter[i].toUpperCase())
              {
              ele.prop("checked", true)
              }
            }

            $(`.subCategory[value="Filter"]`).on('click',function(){
            setTimeout(function(){
            if(Object.prototype.hasOwnProperty.call(data, "filter_date_range")){
              if(Object.prototype.hasOwnProperty.call(data["filter_date_range"], "field_name") && Object.prototype.hasOwnProperty.call(data["filter_date_range"], "table_name")){
                let tablename = data["filter_date_range"]['table_name']
                let fieldname = data["filter_date_range"]['field_name']
                  $(document).find(`#custom_field_daterange_selection`).val(fieldname).trigger('change')
                }
              }
            },500)
          })
      })

      $('#ListView_Action_mul').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){

        var eleme = ($(this).attr("id"))
        var ele = ($(this))
        if(data.elements.Action.length == 0)
        {
          $("#notrequiredListView_Action_mul").prop("checked", true)
          ele.prop("disabled", true)
        }

        for(var i=0; i< data.elements.Action.length;i++)
        {
          $("#saveListViewConfig_mul").prop('disabled', false);
          $("#save_actionbuttonid_mul").prop('disabled', false);
          $("#ListView_Action_mul .saveElementsButton").prop('disabled', false);
          if(eleme.toUpperCase().replace("_MUL","") == data.elements.Action[i].toUpperCase())
          {
            if(eleme.toUpperCase().replace("_MUL","") != "DELETE RECORD"){
              ele.prop("checked", true)
            }else{
              ele.prop("checked", true).trigger("change")
              $('#ListView_Action_mul').find('.listview_actionSubElements').find('input[type=checkbox]').eq(2).parent().parent().css("display","block")
              $('#ListView_Action_mul').find('.listview_actionSubElements').find('input[type=checkbox]').eq(3).parent().parent().css("display","block")

              if(data.delete_config.per_delete == "Yes"){
              $('#ListView_Action_mul').find('.listview_actionSubElements').find('input[type=checkbox]').eq(2).prop("checked", true)
              }

              if(data.delete_config.temp_delete == "Yes"){
              $('#ListView_Action_mul').find('.listview_actionSubElements').find('input[type=checkbox]').eq(3).prop("checked", true)
              }

              if(Object.keys(data.delete_config).length == 0){
              $('#ListView_Action_mul').find('.listview_actionSubElements').find('input[type=checkbox]').eq(2).prop("checked", true)
              }
            }
          }
        }
      })

  if (data.createViewName[0] != 'null' || data.createViewName[0] != 'Template' || data.createViewName[0] != ''){
    $('#selectMultiConfig_mul').val(data.createViewName).trigger('change');
  } else {
    $('#selectMultiConfig_mul').val('Default').trigger('change');
  }

  if ("formatter_config" in  data){
    let col_list = []
    let val_list = {}
    $("#formatterTable_mul").empty()
    for(let [key,value] of Object.entries(data.formatter_config) ){

      val_list[key] = value
      value = JSON.stringify(value)
      col_list.push(key)
      $("#formatterTable_mul").append(
                      `<tr>
                        <td style="text-align: center;" data-col_id="">${key.split("-")[0]}</td>
                        <td style="text-align: center;" data-col_id="">${key.split("-")[1]}</td>
                        <td style="text-align: center;">
                          <i class="far fa-edit"" onclick="showFormatter.call(this)" style="color:var(--primary-color);cursor: pointer;" data-col_id="${key.split("-")[1]}" data-table_name = "${key.split('-')[0]}" data-title="Add formatter" data-col_config='${value}'></i>
                        </td>
                      </tr>`
                    );
    }
    $("#formatColumn_mul").val(col_list)
    $("#configFormat_mul").attr("data-config_formatter",JSON.stringify(val_list))
    format_config_d = val_list
  }
  previewFunction();
  $('#customTemplateListView_mul').find('input').prop('checked',data.customTemplate)
  if($('#customTemplateListView_mul').find('input').prop('checked')) {
    $('#saveListViewConfig_mul').closest(".modal-footer").find(".previewCustomTemplate").prop('disabled',false);
  } else {
    $('#saveListViewConfig_mul').closest(".modal-footer").find(".previewCustomTemplate").prop('disabled',true);
  }
  $("#graphContainerID").attr("data-tab_name",data.tab_header_name);
  var order_id = {}
  var tableVal = data.t_order;
  if (tableVal != null){
    for(let i = 1; i <tableVal.length+1;i++){
      order_id[i] = tableVal[i-1]
    }
  }

  var values = data.t_linked
  if (values == undefined){

  }else{
    var hyperlinked = JSON.stringify(data.t_linked)
    $('#hyperlinkingBtn_mul').attr('data-list',hyperlinked)
  }
  var listViewButtonValues = JSON.stringify(data.t_listviewbuttons)
  $('#listViewButtonId_mul').attr('data-list',listViewButtonValues)
  if (data.t_formattingColumns_mul != null && Object.keys(data.t_formattingColumns_mul) > 0){
    $('#formattingColumnBtn_mul').attr('data-list',JSON.stringify(data.t_formattingColumns_mul));
  }else{
    $('#formattingColumnBtn_mul').attr('data-list',JSON.stringify(data.t_formatting));
  }
  $('#columnNamesRenamesButton_mul').attr('data-list',JSON.stringify(data.t_listViewColumnRenamed));
  $('#titleNameBtn_mul').attr('data-list',JSON.stringify(data.t_titleName_mul));
  $('#formattingColumnBtn_mul').attr('data-listtwo',JSON.stringify(data.t_titleRowFormatting_mul));
  $('#configure_actionbuttonid_mul').attr('data-list',JSON.stringify(data.t_actionButtonConfig_mul))
  $('#configure_action_column_id_mul').attr('data-list',JSON.stringify(data.t_configureActionColumn_mul))
  if (data.t_actionButtonsGroupTogether_mul == true){
    $('#action_btn_config_group_together_mul').prop('checked',true)
    $('#configure_actionbuttonid_mul').css('display','none');
  }else{
    $('#action_btn_config_group_together_mul').prop('checked',false)
    $('#configure_actionbuttonid_mul').css('display','block');
  }
  $('#buttonsGroupedTogether_mul').attr('data-list',JSON.stringify(data.t_buttons_grouping_mul))
  $('#formattingColumnBtn_mul').attr('data-listthree',JSON.stringify(data.t_columnHeadersHidden_mul))
  $('#group_by_action_btn_sub_mul').attr('data-list',JSON.stringify(data.t_group_by_config_mul))
  $('#quickFiltersBtn_mul').attr('data-list',JSON.stringify(data.t_quickFiltersOptions_mul))
  }
}
  },
  error: function(){
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }
        });

}

function list_view_config_load(element_id){

  $.ajax({
    url: window.location.pathname,
    data: {
      'process_name': $('#selectProcess option:selected').text(),
      'sub_process_name':$('#subprocess').val(),
      'operation': 'fetchRelatedCreateViews',
    },
    type: "POST",
    dataType: "json",
    success: function (data) {
            $("#pagination").attr("data-list",JSON.stringify(data['pagination']));
      $('#selectMultiConfig').empty();
      $('#selectMultiConfig').append(`<option value='Default' selected>Default</option>`);
      for (i in data.tab_header_name) {
        $('#selectMultiConfig').append(`<option value='${data.element_id[i]}'>${data.tab_header_name[i]}</option>`);
      }

      $('#selectMultiConfig_mul').empty();
      $('#selectMultiConfig_mul').append(`<option value='Default' selected>Default</option>`);
      for (i in data.tab_header_name) {
        $('#selectMultiConfig_mul').append(`<option value='${data.element_id[i]}'>${data.tab_header_name[i]}</option>`);
      }

    },
    error: function(){
      Swal.fire({icon: 'error',text: 'Error! Please try again.'});
    }
  });
  $.ajax({
              url: window.location.pathname,
              data: {
                'element_id': element_id,
                'operation': 'list_view_config_load'
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                gettableheaders=data["tableheader"]
                $("#paginationDiv").css("display","none");
                if(data.hasOwnProperty('pagination')){
                  $("#pagination").attr("data-list",JSON.stringify(data['pagination']))
                } else {
                  $("#pagination").attr("data-list",JSON.stringify([]))
                }
                if(!data.hasOwnProperty('mul_config')){
                  f_element_id = element_id
                  seltables = data.t_name
                  if ("MultipleTableMapping" in data) {
                    var mtablemap = JSON.stringify(data["MultipleTableMapping"])
                  }
                  else {
                    var mtablemap = ""
                  }
                  $("#addrowm").empty()
                  $("#map-save-data").attr('table-map-data', mtablemap)
                  listViewReset();
                  $('.listoficons').each(function(){
                    if($(this).attr('class').replace(' listoficons', '').trim() == data.icon.trim() )
                    {
                      $(this).css("border","1px solid rgb(184, 134, 11)")
                      return
                    }
                    else{
                      $(this).css("border","0px none rgb(184, 134, 11)")
                    }
                  })
							$('#selectTemplate').val('').trigger("change")
              $('#tabHeaderListView').val("").trigger('change')
              $('#create_view_display_selection').css('display','none');
              $('#create_view_display_selection').prop('checked',true);
              $('.subCategory[value="JS Attributes"]').attr('data-config', '');
              $("#selectLVJSAttribute").val('').trigger('change');
							$('#dropFields').empty()
							$('#dropFieldsLV_upload').empty()
              $('#groupFields').empty()
              $("#appFields_ref_cols").empty()
              $("#appFields_ref_table").val("").trigger("change")
							$('#restrictFields').empty()
              $("#editFieldsNS").empty()
              $("#appJSONTable").val("").trigger("change")
              $("#appJSONEditTable").val("").trigger("change")
              $("#appJSONCols").empty()
              $("#appJSONEditCols").empty()

              $("#appJSONTableReorder").val("").trigger("change")
              $("#appJSONColsReorder").empty()

							$('.subCategory').each(function () {
							  $(this).css({ backgroundColor: '#565a5e' });
							  $(this).css({ borderColor: '#565a5e' });
							})
							$('.subElementCards').find('input[type=checkbox]').each(function(){
							  $(this)[0].checked=false
							  $(this)[0].disabled=false
							})
							$('#subCategoryButtons').find('.fa-check-circle').each(function(){
							  $(this).css('display','none')
							})
							$('#Datatable').css('display','none')
							$('#Chart').css('display','none')
							$('#Alert').css('display','none')
              $('#Filter').css('display','none')
              $('#ListView_Action').css('display','none')
              $('#Custom').css('display','none')
              $('#customTemplateListView').css('display','none')
              $('#Formatter').css('display','none')
              $('#JSAttributes').css('display','none')
							$('#previewCard').empty()

                verboseNameAlign = {}
                for (var i = 0; i < data.fieldList.length; i++) {
                  $('#dropFields').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                  $('#dropFieldsLV_upload').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                  verboseNameAlign[data.fieldNameList[i]] = data.fieldList[i]
                  $('.select-subheader').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                  $('#restrictFields').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                  $("#editFieldsNS").append(new Option(data.fieldList[i], data.fieldNameList[i]));
                  $('#selectColumnForVDColAlignment').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                }

                for (var i = 0; i < data.groupList.length; i++) {
                  $('#groupFields').append(new Option(data.groupList[i]["name"], data.groupList[i]["id"]));
                }
                for (var i = 0; i < data.groupList.length; i++) {
                  $('#mention_usergroups').append(new Option(data.groupList[i]["name"], data.groupList[i]["id"]));
                }
                $('#reportingViewColumns_datefield_latest_entries').append(`<option value="" selected>Select field</option>`)
                for (var i = 0; i < data.fieldList_raw.length; i++) {
                  if (['DateTimeField','DateField'].includes(data.fieldList_data_types[i])){
                    $('#reportingViewColumns_datefield_latest_entries').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                  }
                  $('#reportingViewColumns_unique_indentfier_selector').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                  $('#reportingViewColumns').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                  $('#uniqueColumn').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                  $('#trackingColumn').append(new Option(data.fieldList[i], data.fieldNameList[i]));
                  $('#customColumn').append(new Option(data.fieldList_raw[i], data.fieldList_raw[i]));
                }

                $('#subCategoryButtons').find('.fa-check-circle').each(function(){
                              $(this).css('display','inline-block')
                          })

                $('#tabHeaderListView').val(data.tab_header_name)
                if( data.hasOwnProperty('create_view_selection_checker')   && $("#create_view_display_selection").parent().css('display') == "block"){
                  if(data.create_view_selection_checker == true){
                    $("#create_view_display_selection").prop('checked',true)
                  }else{
                    $("#create_view_display_selection").prop('checked',false)
                  }
                }

                if(!data.hasOwnProperty('create_view_selection_checker')){
                  $("#create_view_display_selection").prop('checked',true)
                }
                if(data.template == "Multiple table") {
                  $('#selectTablePC').select2('destroy');
                  $('#selectTablePC').attr('multiple','multiple');
                  $('#selectTablePC').select2();
                  $("#2selectblock").css('display', 'block');
                  $('#create_view_display_selection_id').css('display','none');
                  $("#create_view_display_selection").prop('checked', false);
                } else {
                  $('#create_view_display_selection_id').css('display','block');
                  $("#2selectblock").css('display', 'none');
                  $('#selectTablePC').select2('destroy');
                  $('#selectTablePC').removeAttr('multiple');
                  $('#selectTablePC').select2();
                }

                if(data.formatter_tables.length > 0){
                  for(let i=0;i<data.formatter_fieldlist.length;i++){
                      $('#formatColumn').append(new Option(data.formatter_fieldlist[i], data.formatter_fieldlist[i]));
                  }
                  for(let i=0;i<data.t_name.length;i++){
                    $("#formatTab").append(new Option(data.t_name[i], data.t_name[i]))
                  }
                }else{

                  for(let i=0;i<data.t_name.length;i++){
                    $("#formatTab").append(new Option(data.t_name[i], data.t_name[i]))
                  }
                }

                if(data.custom_alignment_transaction_data){
                  $('#custom_alignment_transaction_data').val(data.custom_alignment_transaction_data).trigger("change");
                }
                if(data.display_sections_approval_wall){
                  $('#display_sections_approval_wall').val(data.display_sections_approval_wall).trigger("change");
                }
                if(data.display_in_comments){
                  $('#display_in_comments').val(data.display_in_comments).trigger("change");
                }
                if(data.search_in_comments){
                  $('#search_in_comments').val(data.search_in_comments).trigger("change");
                }

                if (data.JSAttributes) {
                  $('.subCategory[value="JS Attributes"]').attr('data-config', data.JSAttributes);
                  $("#selectLVJSAttribute").val(data.JSAttributes).trigger('change');
                };

                $('#fn_extact_data').val(data.extract_data_filename)
                $("#formatTab").val(data.formatter_tables)

                $('#selectTablePC').val(data.t_name).trigger("change");


                if(data.approversDispFieldsListView){
                  $("#allowUsersToSetApproversDispFieldsListView").val(data.approversDispFieldsListView).trigger('change')
                }

                if(data.approversDispFormatListView){
                  $("#allowUsersToSetApproversDispFormatListView").val(data.approversDispFormatListView).trigger('change')
                }

                if(data.hasOwnProperty("listview_custom_messages") && Object.keys(data.listview_custom_messages).length != 0){
                  $("#toggleCustomListViewMessages").prop("checked",true).trigger("change")
                  $("#customListViewMessagesDiv").show()

                  var saved_listview_custom_messages = data.listview_custom_messages

                  $("#customListViewMessagesDiv").find(".c_msg_input").each(function() {

                    if(saved_listview_custom_messages[$(this).attr("name")]){
                      if(Object.keys(saved_listview_custom_messages[$(this).attr("name")]).length != 0){
                        if(saved_listview_custom_messages[$(this).attr("name")]["message"]){
                          $(this).val(saved_listview_custom_messages[$(this).attr("name")]["message"])
                        }
                        if(saved_listview_custom_messages[$(this).attr("name")]["icon"]){
                          $(this).closest(".nav-item").find(".msg_icon").attr("class",`${saved_listview_custom_messages[$(this).attr("name")]["icon"]} msg_icon`)
                        }
                      }
                    }

                  })
                }else{
                  $("#toggleCustomListViewMessages").prop("checked",false).trigger("change")
                  $("#customListViewMessagesDiv").find(".c_msg_input").each(function() {
                    $(this).val($(this).attr("data-value"))
                    $(this).closest(".nav-item").find(".msg_icon").attr("class",$(this).closest(".nav-item").find(".msg_icon").attr("data-value"))
                  })

                }

                $('#selectTable').val(data.t_name).trigger("change");
                $('#selectTemplate').val(data.template).trigger("change");
                $('.dropclass').val(["Country"]);

                $("#dropFields").val(data.dropfields).trigger("change");
                $("#dropFieldsLV_upload").val(data.dropfieldsLVupload).trigger("change");
                $('#selectCharactersToBeEscapedLV').val(data.escape_characters).trigger("change");
                if (data.editAutoPopulatePrecedenceCheck) {
                  $('#editAutoPopulatePrecedenceCheck').prop('checked', true);
                } else {
                  $('#editAutoPopulatePrecedenceCheck').prop('checked', false);
                }
                if (data.editAutoPopulatePrecedenceOnScenariosCheck) {
                  $('#editAutoPopulatePrecedenceOnScenariosCheck').prop('checked', true);
                } else {
                  $('#editAutoPopulatePrecedenceOnScenariosCheck').prop('checked', false);
                }
                if (data.resolve_all_comments) {
                  $('#resolve_all_comments').prop('checked', true);
                } else {
                  $('#resolve_all_comments').prop('checked', false);
                }
                if (data.reopen_all_comments) {
                  $('#reopen_all_comments').prop('checked', true);
                } else {
                  $('#reopen_all_comments').prop('checked', false);
                }
                if (data.resolve_individual_comments) {
                  $('#resolve_individual_comments').prop('checked', true);
                } else {
                  $('#resolve_individual_comments').prop('checked', false);
                }
                if (data.reopen_individual_comments) {
                  $('#reopen_individual_comments').prop('checked', true);
                } else {
                  $('#reopen_individual_comments').prop('checked', false);
                }
                $("#groupFields").val(data.groupsfields).trigger("change");
                $("#restrictFields").val(data.restrictfields).trigger("change");
                $("#editFieldsNS").val(data.editFieldsNS).trigger("change");
                if (data.dont_show_detail_btn) {
                  $('#dont_show_detail_btn').prop("checked", data.dont_show_detail_btn).trigger('change');
                }



                if (data.reportingViewTemplate == 'Reporting View' || data.reportingViewTemplate == 'List View With History'|| data.reportingViewTemplate == 'Approval Template') {
                  $("#reportingViewColumns").val(data.reportingViewColumns).trigger("change");


                  if(data.hasOwnProperty('reportingShowLatest')){
                    $('#reportingViewShowLatest').css('display','block')
                    $('#show_report_latest_checker').prop('checked',data["reportingShowLatest"])
                    if (data["reportingShowLatest"]){
                      $('#reportingViewShowLatest').find('.custom_datefield_selector').css('display','');
                      $('#reportingViewShowLatest').find('.unique_indentfier_selector').css('display','');
                      if (data.reportingViewColumns_datefields != null){
                        $('#reportingViewColumns_datefield_latest_entries').val(data.reportingViewColumns_datefields).trigger("change");
                      }
                      if (data.t_reportingViewColumns_unique_indentfier != null){
                        $('#reportingViewColumns_unique_indentfier_selector').val(data.t_reportingViewColumns_unique_indentfier).trigger("change");
                      }
                    }else{
                      $('#reportingViewShowLatest').find('.custom_datefield_selector').css('display','none');
                      $('#reportingViewShowLatest').find('.unique_indentfier_selector').css('display','none');
                    }
                  }else{
                    $('#reportingViewShowLatest').css('display','none')
                  }
                  $("#reportingViewColumns").val(data.reportingViewColumns).trigger("change");
                  $('#uniqueColumn').val(data.uniqueColumn).trigger('change');
                  $('#trackingColumn').val(data.trackingColumn).trigger('change');
                  $('#selectTemplate').val(data.reportingViewTemplate).trigger("change");
                  reportingDisp();
                }

                if(data.reportingViewTemplate == 'Approval Template'){
                  $("#appJSONTable").val(data.appJSONTable).trigger("change")
                  $("#appJSONTable").val(data.appJSONTable).trigger("select2:select")
                  $("#appJSONTable").attr("data-data",JSON.stringify(data.appJSONCols))

                  $("#appJSONEditTable").val(data.appJSONEditTable).trigger("change")
                  $("#appJSONEditTable").val(data.appJSONEditTable).trigger("select2:select")
                  $("#appJSONEditTable").attr("data-data",JSON.stringify(data.appJSONEditCols))

                  $("#appFields_ref_table").val(data.appFields_ref_table).trigger("change")
                  $("#appFields_ref_table").val(data.appFields_ref_table).trigger("select2:select")
                  $("#appFields_ref_table").attr("data-data",JSON.stringify(data.appFields_ref_cols))

                  $("#appJSONTableReorder").val(data.appJSONColsReorderTable).trigger("change")
                  $("#appJSONTableReorder").val(data.appJSONColsReorderTable).trigger("select2:select")
                  $("#appJSONTableReorder").attr("data-data",JSON.stringify(data.appJSONColsReorderDict))

                  if(data.hasOwnProperty('mention_usergroups')){
                    $("#mention_usergroups").val(data.mention_usergroups).trigger("change")
                    $("#mention_usergroups").val(data.mention_usergroups).trigger("select2:select")
                    $("#mention_usergroups").attr("data-data",JSON.stringify(data.mention_usergroups))
                  }

                  if(data.hasOwnProperty('reorderApprovalAuditLogDict')){
                    $("#reorderApprovalAuditLogList").empty()
                    for (let i = 1; i <= Object.keys(data.reorderApprovalAuditLogDict).length; i++) {

                      $("#reorderApprovalAuditLogList").append(`<li class="btn btn-sm btn-light col" name="${data["reorderApprovalAuditLogDict"][i]}" style="height:auto;margin: 5px auto;">
                                          <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${data["reorderApprovalAuditLogDict"][i]}
                                        </li>`)
                      }
                  }

                  if(data.hasOwnProperty('reorderApprovalLevelConfigDict')){
                    $("#reorderApprovalLevelConfigList").empty()
                    for (let i = 1; i <= Object.keys(data.reorderApprovalLevelConfigDict).length; i++) {

                      $("#reorderApprovalLevelConfigList").append(`<li class="btn btn-sm btn-light col" name="${data["reorderApprovalLevelConfigDict"][i]}" style="height:auto;margin: 5px auto;">
                                          <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${data["reorderApprovalLevelConfigDict"][i]}
                                        </li>`)
                      }
                  }
                }
                if(data.hasOwnProperty('basicfilter_config')){
                  let basicfilter_config = JSON.parse(data.basicfilter_config)
                                    $(document).find('#basicfilter_items').find('.filter-table').empty()
                  if(basicfilter_config.length >0){
                    $("#saveBasicfilter").attr('data-basicfilter-config',JSON.stringify(basicfilter_config))
                  } else {
                    $("#saveBasicfilter").removeAttr('data-basicfilter-config');
                  }
                } else {
                  $("#saveBasicfilter").removeAttr('data-basicfilter-config');
                }
                  $('#customColumn').val(data.customViewData).trigger("change");
                  $('#Datatable').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
                      var eleme = ($(this).attr("id"))
                      var ele = ($(this))
                      if(data.elements.Data_table.length == 0)
                      {
                        $("#notrequiredDT").prop("checked", true)
                        ele.prop("disabled", true)
                      }

                      for(var i=0; i< data.elements.Data_table.length;i++)
                         {
                          $('.subCategory').each(function (){
                                if($(this).val()=="Filter"){
                                  $(this)[0].disabled= false
                                }
                            })
                            $("#save_buttonid").prop('disabled', false);
                            $("#saveListViewConfig").prop('disabled', false);
                           if(eleme.toUpperCase() == data.elements.Data_table[i].toUpperCase())
                           {
                             ele.prop("checked", true)
                           }

                         }
                    })
                    $('#Chart').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
                      var eleme = ($(this).attr("id"))
                      var ele = ($(this))
                      if(data.elements.Plot_chart.length == 0)
                      {
                        $("#notrequiredChart").prop("checked", true)
                        ele.prop("disabled", true)
                      }

                      for(var i=0; i< data.elements.Plot_chart.length;i++)
                         {
                           $("#saveListViewConfig").prop('disabled', false);
                           $("#Chart .saveElementsButton").prop('disabled', false);
                           if(eleme.toUpperCase() == data.elements.Plot_chart[i].toUpperCase())
                           {
                             ele.prop("checked", true)
                           }
                         }
                    })
                    $('#Alert').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
                      var eleme = ($(this).attr("id"))
                      var ele = ($(this))
                      if(data.elements.Set_alert.length == 0)
                      {
                        $("#notrequiredAlert").prop("checked", true)
                        ele.prop("disabled", true)
                      }

                      for(var i=0; i< data.elements.Set_alert.length;i++)
                         {
                          $("#saveListViewConfig").prop('disabled', false);
                          $("#Alert .saveElementsButton").prop('disabled', false);
                          $(".alertSubElements .saveElementsButton").prop('disabled', false);
                           if(eleme.toUpperCase() == data.elements.Set_alert[i].toUpperCase())
                           {
                             ele.prop("checked", true)
                           }
                         }
                    })
                    $('#Filter').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){
                      var eleme = ($(this).attr("id").replace("elements",""))
                      var ele = ($(this))

                      if(data.elements.Filter.length == 0)
                      {
                        $("#notrequiredFilter").prop("checked", true)
                           ele.prop("disabled", true)
                      }

                      for(var i=0; i< data.elements.Filter.length;i++)
                         {
                          $("#saveListViewConfig").prop('disabled', false);
                          $("#Filter .saveElementsButton").prop('disabled', false);
                           if(eleme.toUpperCase() == data.elements.Filter[i].toUpperCase())
                           {
                            ele.prop("checked", true)
                           }
                         }

                         $(`.subCategory[value="Filter"]`).on('click',function(){
                          setTimeout(function(){
                          if(Object.prototype.hasOwnProperty.call(data, "filter_date_range")){
                            if(Object.prototype.hasOwnProperty.call(data["filter_date_range"], "field_name") && Object.prototype.hasOwnProperty.call(data["filter_date_range"], "table_name")){
                              let tablename = data["filter_date_range"]['table_name']
                              let fieldname = data["filter_date_range"]['field_name']
                                $(document).find(`#custom_field_daterange_selection`).val(fieldname).trigger('change')
                              }
                            }
                          },500)
                        })
                    })

                    $('#ListView_Action').find('.elementCheckboxes').find('input[type=checkbox]').each(function (){

                         var eleme = ($(this).attr("id"))
                      var ele = ($(this))
                      if(data.elements.Action.length == 0)
                      {
                        $("#notrequiredListView_Action").prop("checked", true)
                        ele.prop("disabled", true)
                      }

                      for(var i=0; i< data.elements.Action.length;i++)
                         {
                          $("#saveListViewConfig").prop('disabled', false);
                          $("#save_actionbuttonid").prop('disabled', false);
                          $("#ListView_Action .saveElementsButton").prop('disabled', false);
                           if(eleme.toUpperCase() == data.elements.Action[i].toUpperCase())
                           {
                            if (eleme.toUpperCase() == "PDF ACTION BUTTON"){
                              ele.prop("checked", true)
                              $('#configure_action_pdf_id').css('display','block');
                              action_column_modal_id_pdf_save()
                             }
                             else if(eleme.toUpperCase() != "DELETE RECORD"){
                              ele.prop("checked", true)
                             }else{
                               ele.prop("checked", true)
                               $('.listview_actionSubElements').find('input[type=checkbox]').eq(2).parent().parent().css("display","block")
                               $('.listview_actionSubElements').find('input[type=checkbox]').eq(3).parent().parent().css("display","block")

                               if(data.delete_config.per_delete == "Yes"){
                                $('.listview_actionSubElements').find('input[type=checkbox]').eq(2).prop("checked", true)
                               }

                               if(data.delete_config.temp_delete == "Yes"){
                                $('.listview_actionSubElements').find('input[type=checkbox]').eq(3).prop("checked", true)
                               }

                               if(Object.keys(data.delete_config).length == 0){
                                $('.listview_actionSubElements').find('input[type=checkbox]').eq(2).prop("checked", true)
                               }
                             }
                           }
                         }
                    })
                if (data.createViewName[0] != 'null' || data.createViewName[0] != 'Template' || data.createViewName[0] != ''){
                  $('#selectMultiConfig').val(data.createViewName).trigger('change');
                } else {
                  $('#selectMultiConfig').val('Default').trigger('change');
                }

                if(Object.prototype.hasOwnProperty.call(data, 'listViewCustomVal')){
                  let reload_custom_validation = {}
                  reload_custom_validation["reload_custom_validation"] = data.listViewCustomVal
                  $('.customValbtnDev').attr('data-data_config',JSON.stringify(reload_custom_validation))
                }

                if(Object.prototype.hasOwnProperty.call(data, 'allowListViewCustV')){
                  if(data.allowListViewCustV){
                    $("#allow_listv_custV").prop("checked",true);
                  }
                }

                if(Object.prototype.hasOwnProperty.call(data, 'allowListViewRTF')){
                  if(data.allowListViewRTF){
                    $("#allow_listv_rtf").prop("checked",true);
                  }
                }

                if(Object.prototype.hasOwnProperty.call(data, 'allowEditColAlign')){
                  if(data.allowEditColAlign){
                    $("#toggleeditcolAlign").prop("checked",true);
                  }
                }

                if(Object.prototype.hasOwnProperty.call(data, 'allowEditColConfig')){
                  $(".labelrowAlign").empty()
                  data_align = data.allowEditColConfig
                  for(let i=0;i<data_align.length;i++){
                    $("#addPageRowID_Align").trigger('click')
                    for(let [key,value] of Object.entries(data_align[i])){
                      $(".labelrowAlign").find('.newrowpageAlign').last().find(`select[name="${key}"]`).val(value).trigger("change")
                    }
                  }

                }
                if(Object.prototype.hasOwnProperty.call(data, 'viewDetailsColumnAlignmentConfig')){
                  data_align = data.viewDetailsColumnAlignmentConfig
                  $('#saveApprovalTColumnAlignmentButton').attr('data-config', JSON.stringify(data_align));
                }

                if ("formatter_config" in  data){
                  let col_list = []
                  let val_list = {}
                  $("#formatterTable").empty()
                  for(let [key,value] of Object.entries(data.formatter_config) ){

                    val_list[key] = value
                    value = JSON.stringify(value)
                    col_list.push(key)
                    $("#formatterTable").append(
                                    `<tr>
                                      <td style="text-align: center;" data-col_id="">${key.split("-")[0]}</td>
                                      <td style="text-align: center;" data-col_id="">${key.split("-")[1]}</td>
                                      <td style="text-align: center;">
                                        <i class="far fa-edit"" onclick="showFormatter.call(this)" style="color:var(--primary-color);cursor: pointer;" data-col_id="${key.split("-")[1]}" data-table_name = "${key.split('-')[0]}" data-title="Add formatter" data-col_config='${value}'></i>
                                      </td>
                                    </tr>`
                                  );
                  }
                  $("#formatColumn").val(col_list)
                  $("#configFormat").attr("data-config_formatter",JSON.stringify(val_list))
                  format_config_d = val_list
                }
                previewFunction();
                $('#customTemplateListView').find('input').prop('checked',data.customTemplate)
                if($('#customTemplateListView').find('input').prop('checked')) {
                  $('#saveListViewConfig').closest(".modal-footer").find(".previewCustomTemplate").prop('disabled',false);
                } else {
                  $('#saveListViewConfig').closest(".modal-footer").find(".previewCustomTemplate").prop('disabled',true);
                }
                $("#graphContainerID").attr("data-tab_name",data.tab_header_name);
                var order_id = {}
                var tableVal = data.t_order;
                if (tableVal != null){
                  for(let i = 1; i <tableVal.length+1;i++){
                    order_id[i] = tableVal[i-1]
                  }
                }

                var values = data.t_linked
                if (values == undefined){

                }else{
                  var hyperlinked = JSON.stringify(data.t_linked)
                  $('#hyperlinkingBtn').attr('data-list',hyperlinked)
                }
                var listViewButtonValues = JSON.stringify(data.t_listviewbuttons)
                $('#listViewButtonId').attr('data-list',listViewButtonValues)
                $('#columnNamesRenamesButton').attr('data-list',JSON.stringify(data.t_listViewColumnRenamed))
                $('#configure_edit_list_view_header_modal').attr('data-list',JSON.stringify(data.t_editListviewModalConfigs))
              if ($('#selectTemplate').val() == "Multiple table"){
                $('#listViewButtonEmbededComputationId').attr('data-list',JSON.stringify(data.t_listViewEmbededComputationMultiple))
                $("#formattingColumnBtn").attr('data-listtwo',JSON.stringify(data.t_titleRowFormatting))
                $("#formattingColumnBtn").attr('data-listthree',JSON.stringify(data.t_columnHeadersHidden))
                $("#dropFields_add").attr('data-data',JSON.stringify(data.dropfields))
                $("#dropFields_add_LV_upload").attr('data-data',JSON.stringify(data.dropfieldsLVupload))
                $("#editFields_add").attr("data-data",JSON.stringify(data.editFieldsNS))
                if (data.t_button_config != null){
                  if (data.t_button_config['addTableBtn'] == true){
                    $('#add_table_btn_listview').prop('checked',true)
                  }else{
                    $('#add_table_btn_listview').prop('checked',false)
                  }
                  if (data.t_button_config['tableOrderBtn'] == true){
                    $('#table_order_btn_listview').prop('checked',true)
                  }else{
                    $('#table_order_btn_listview').prop('checked',false)
                  }
                }
              }else{
                $("#formattingColumnBtn").attr('data-listtwo',JSON.stringify(data.t_titleRowFormatting))
                $("#formattingColumnBtn").attr('data-listthree',JSON.stringify(data.t_columnHeadersHidden))
                $('#listViewButtonEmbededComputationId').attr('data-list',JSON.stringify(data.t_listViewEmbededComputation))
              }
              if ($('#selectTemplate').val() == "Multiple table"){
                if(data.t_formattingMultiple != null){
                  $("#formattingColumnBtn").attr('data-list',JSON.stringify(data.t_formattingMultiple))
                }else{
                  $("#formattingColumnBtn").attr('data-list',JSON.stringify(data.t_formatting))
                }
              }else{
                $("#formattingColumnBtn").attr('data-list',JSON.stringify(data.t_formatting))
              }

              if ($('#selectTemplate').val() == "Multiple table"){
                $('#titleNameBtn').attr('data-list',JSON.stringify(data.t_titleNameMultiple))
                $('#buttonsGroupedTogether').attr('data-list',JSON.stringify(data.t_buttons_grouping))
                $('#configure_actionbuttonid_multiple').attr('data-list',JSON.stringify(data.t_actionButtonsConfig))
                $('#configure_action_column_id').attr('data-list',JSON.stringify(data.t_configureActionColumn))
                if (data.t_actionButtons_group_together == true){
                  $('#action_btn_config_group_together').prop('checked',true)
                  $('#configure_actionbuttonid_multiple').css('display','none');
                  $('#configure_action_column_id').css('display','block');
                }else{
                  $('#action_btn_config_group_together').prop('checked',false)
                  $('#configure_actionbuttonid_multiple').css('display','block');
                  $('#configure_action_column_id').css('display','none');
                }
                $('#configure_action_column_id').attr('data-list',JSON.stringify(data.t_configureActionColumn))
                $('#quickFiltersBtn').attr('data-list',JSON.stringify(data.t_quickFilterOptions))
                $('#group_by_action_btn_sub').attr('data-list',JSON.stringify(data.t_group_by_configs))
              }else{
                $('#titleNameBtn').attr('data-list',JSON.stringify(data.t_titleName))
                $('#buttonsGroupedTogether').attr('data-list',JSON.stringify(data.t_buttons_grouping))
                $('#configure_actionbuttonid').attr('data-list',JSON.stringify(data.t_actionButtonsConfig))
                if (data.t_actionButtons_group_together == true){
                  $('#action_btn_config_group_together').prop('checked',true)
                  $('#configure_actionbuttonid').css('display','none');
                  $('#configure_action_column_id').css('display','block');
                }else{
                  $('#action_btn_config_group_together').prop('checked',false)
                  $('#configure_actionbuttonid').css('display','block');
                  $('#configure_action_column_id').css('display','none');
                }
                $('#configure_action_column_id').attr('data-list',JSON.stringify(data.t_configureActionColumn))
                $('#quickFiltersBtn').attr('data-list',JSON.stringify(data.t_quickFilterOptions))

                $('#group_by_action_btn_sub').attr('data-list',JSON.stringify(data.t_group_by_configs))
              }
              $('#configure_action_pdf_id').attr('data-list',JSON.stringify(data.t_pdf_action_configs))
              if ($('#selectTemplate').val() == "Card View"){
                $('#card_view_sub_category').attr('data-list',JSON.stringify(data.t_cardviewconfig))
              }
              if ($('#selectTemplate').val() == "Reporting View" || $('#selectTemplate').val() == "Approval Template"){
                $("#formattingColumnBtn").attr('data-listfour',JSON.stringify(data.t_card_header_configs))
              }

              }
              else{
                listViewReset();
                def_val_mul_selected = data.mul_config.default_selected
                data_icon = data[def_val_mul_selected]["icon"]
                if(data_icon != null){
                  $('.listoficons').each(function(){
                    if($(this).attr('class').replace(' listoficons', '').trim() == data_icon.trim() )
                    {
                      $(this).css("border","1px solid rgb(184, 134, 11)")
                      return
                    }
                    else{
                      $(this).css("border","0px none rgb(184, 134, 11)")
                    }
                    })
                  }

                $("#tabHeaderListView").val(data.mul_config.tab_header_name)
                $("#selectTablePC").val(data.mul_config.t_name).trigger("change")
                $("#selectTablePC").val(data.mul_config.t_name).trigger("select2:select")
                $("#selectTemplate").val(data.mul_config.template).trigger("change")
                $(".default_mul_view").empty()
                for(let i=0;i<data.mul_config.default_view_options.length;i++){
                  $(".default_mul_view").append(`<option value='${data.mul_config.default_view_options[i]}'>${data.mul_config.default_view_options[i]}</option>`)
                }
                $('#previewCard').empty()
                $(".select23").select2()

                $(".default_mul_view").attr('mul_comp_config',JSON.stringify(data))
                multable_config = data.comp_mul_config
                multable_config_comp = data.eqcomp_config
                $(".default_mul_view").val(data.mul_config.default_selected).trigger("change")
                $("#saveListViewConfig").prop('disabled', false);

                  if (data.mul_config.default_view_options.length != 0) {
                    var nrowdata = data.mul_config.default_view_options
                    for (i in nrowdata){
                        addPageRow_mul()
                        $(".labelmul_op").last().val(nrowdata[i]).change()
                      }
                  } else {
                    $("#addPageRowID_mul").attr("nrow", 0)
                    $(".labelrow_mul").empty()
                  }
              }
                $('#listViewModalFooterContainer').find('.row').css('pointer-events', 'all');
                $('#listViewModalFooterContainer').css('cursor', 'default');
								$('#listViewModalFooterContainer').find('button').css('pointer-events', 'all');
								$('#listViewModalFooterContainer').css('cursor', 'default');


                $("#tableContainerEdit").empty();
                if($("#selectTemplate").val() == "Multiple table"){
                  tableNames = $('#selectTablePC').val()
                  for(let i=0;i<tableNames.length;i++){
                    $('#formatTableNames').append(new Option(tableNames[i], tableNames[i]));
                  }
                }
                if(data.hasOwnProperty('editedDisplayNamesMultipleTable') && Object.keys(data.editedDisplayNamesMultipleTable).length != 0){
                  $("#toggleEditTableCardNames").prop("checked",true).trigger("change")
                  $("#editTableCardNamesDiv").show()
                  $("#tableContainerEdit").empty()
                  var keysToAdd = []
                  for (var key in data.editedDisplayNamesMultipleTable) {
                    if (data.editedDisplayNamesMultipleTable.hasOwnProperty(key)) {
                      keysToAdd.push(key);
                    }
                  }
                  $("#formatTableNames").val(keysToAdd).trigger("change");

                  for (var key in data.editedDisplayNamesMultipleTable) {
                    var value = data.editedDisplayNamesMultipleTable[key]
                    $("#tableContainerEdit tr").each(function () {
                        if($(this).find(".originalTableNames").text() === key){
                          $(this).find(".originalTableNames").next(".displayTableNames").find("input").val(value);
                        }
                    });
                  }
                }

                $("#reorderTableCardsList").empty()
                if($("#selectTemplate").val() == "Multiple table"){
                  tableNames = $('#selectTablePC').val()

                  tableNames.forEach(function (tableName) {
                    var li = $("<li>").addClass("btn btn-sm btn-light col");
                    li.css({ "height": "auto", "margin": "5px auto" });
                    li.attr("name", tableName);

                    var span = $("<span>").addClass("ui-icon ui-icon-arrowthick-2-n-s float-left mt-1");
                    var text = document.createTextNode(tableName);

                    li.append(span);
                    li.append(text);

                    $("#reorderTableCardsList").append(li);
                  });

                }

                if(data.hasOwnProperty('reorderTableList')){
                  $("#reorderTableCardsList").empty()

                  for (let i = 0; i < data.reorderTableList.length; i++) {

                    const listItem = $("<li>")
                      .addClass("btn btn-sm btn-light col")
                      .attr("name", data.reorderTableList[i])
                      .css({ "height": "auto", "margin": "5px auto" })
                      .html(`<span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${data.reorderTableList[i]}`);

                    $("#reorderTableCardsList").append(listItem);
                  }
                }



              },


              error: function () {
                $('#listViewModalFooterContainer').find('.row').css('pointer-events', 'all');
								$('#listViewModalFooterContainer').css('cursor', 'default');
								$('#listViewModalFooterContainer').find('button').css('pointer-events', 'all');
								$('#listViewModalFooterContainer').css('cursor', 'default');
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
}
function analysis_config_load(element_id){
  $("#plotChart").prop("checked", false);
  $('#addTabs').prop("checked", false);
  $('#pdf').prop("checked", false);
  $('#saveTabsButton').prop("checked", false);
  $.ajax({
              url: window.location.pathname,
              data: {
                'element_id': element_id,
                'operation': 'analysis_config_load'
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                $('.listoficons').each(function(){
                  if($(this).attr('class').replace(' listoficons', '').trim() == data.icon.trim() )
                  {
                    $(this).css("border","1px solid rgb(184, 134, 11)")
                    return
                  }
                  else{
                    $(this).css("border","0px none rgb(184, 134, 11)")
                  }
                  })
                pack = data.tab_data.Analysis_Package
                if(data.tab_data.Layout) {
                  $('#selectAnalysisLayout').val(data.tab_data.Layout).trigger("change");
                } else {
                  $('#selectAnalysisLayout').val("Landscape").trigger("change");
                }
                if(data.tab_data['dashboardIndex'] != undefined){
                  $("#dashboardIndex").val(data.tab_data['dashboardIndex']).trigger("change")
                }
                if(data.tab_data['publishDashboardIndex'] != undefined){
                  $("#publishDashboardIndex").val(data.tab_data['publishDashboardIndex']).trigger("change")
                }
                $('#selectAnalysisPackage').val(pack).trigger("change");
                $('#tabHeaderAnalysis').val(data.tab_header_name)
                tab_num = Object.keys(data.tab_data.TabList).length
                tab_list_config = data.tab_data.TabList
                $('#tabNumber').val(tab_num).trigger('change');
                if(data.tab_data.PlotCharts == "Yes"){
                  $("#plotChart").prop("checked", true);
                }
                if(data.tab_data.tabConfigs == "Yes"){
                  $("#tabConfigs").prop("checked", true);
                }
                if(data.tab_data.AddTabs == "Yes"){
                  $('#addTabs').prop("checked", true);
                  $("#tabNumber").prop('disabled', true);
                }
                else{
                  $("#tabNumber").prop('disabled', false);
                }
                if(data.tab_data.PDF == "Yes"){
                  $('#pdf').prop("checked", true);
                }
                if(data.tab_data.share_with_group == "Yes"){
                  $('#share_with_group').prop("checked", true);
                }
                if(data.tab_data.global_settings == "Yes"){
                  $('#global_settings').prop("checked", true);
                }
                if(data.tab_data.SaveButton == "Yes"){
                  $('#saveTabsButton').prop("checked", true);
                }
                if(data.tab_data.dashboardIndexTemplate){
                  $('#dashboardIndexTemplate').val(data.tab_data.dashboardIndexTemplate).trigger("change");
                }
                if(data.tab_data.hasOwnProperty("Template")) {
                  $('#selectAnalysisTemplate').val(data.tab_data.Template).trigger("change");
                } else {
                  $('#selectAnalysisTemplate').val("System defined template").trigger("change");
                }
                if($('#selectAnalysisTemplate').val() == "Custom defined template") {
                  $('#saveAnalysisConfig').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',false);
                } else {
                  $('#saveAnalysisConfig').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',true);
                }
                $("#graphContainerID").attr("data-tab_name",data.tab_header_name);
                $('#analysisButtonId').attr('data-list',JSON.stringify(data.analysisButtonStyling))

                if(data.custom_messages_in_analysis != null &&Object.keys(data.custom_messages_in_analysis).length != 0 ){
                  $("#toggleCustomMessagesAnalysis").prop("checked",true)
                  if ($('#customMessagesDivAnalysis').css('display') == 'none'){
                    $('#customMessagesDivAnalysis').toggle()
                  }
                  if ('published_message' in data.custom_messages_in_analysis){
                    $('#published-content').find('#published_message').val(data.custom_messages_in_analysis['published_message']['message']).trigger('change')
                    $('#published-content').find('.msg_icon').attr('class',`${data.custom_messages_in_analysis['published_message']['icon']} msg_icon`)
                  }
                  if ('share_dashboard_message' in data.custom_messages_in_analysis){
                    $('#share_dashboard-content').find('#share_dashboard_message').val(data.custom_messages_in_analysis['share_dashboard_message']['message']).trigger('change')
                    $('#share_dashboard-content').find('.msg_icon').attr('class',`${data.custom_messages_in_analysis['share_dashboard_message']['icon']} msg_icon`)
                  }
                }else{
                  $("#toggleCustomMessagesAnalysis").prop("checked",false)
                }
              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
}

function upload_config_load(element_id){

  $.ajax({
              url: window.location.pathname,
              data: {
                'element_id': element_id,
                'operation': 'upload_config_load'
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                uploadReset();
                $('.selectComponents').find('.form-group').find('input[type=checkbox]').each(function(){
                    $(this).prop("checked", false);
                })

                $('.listoficons').each(function(){
                  if($(this).attr('class').replace(' listoficons', '').trim() == data.icon.trim() )
                  {
                    $(this).css("border","1px solid rgb(184, 134, 11)")
                    return
                  }
                  else{
                    $(this).css("border","0px none rgb(184, 134, 11)")
                  }
                  })

                $('.selectComponents').find('.form-group').find('input[type=checkbox]').each(function(){
                  var ele = ($(this).attr("id"))
                  var elem = ($(this))
                  for (const [key, value] of Object.entries(data.checkbox_data)) {
                  if(ele == (key + "+'1'"))
                  {
                    elem.prop("checked", true);
                  }
                }
                })
                $('#selectDataconnector').val(data.function).trigger("change")
                $('#tabHeaderDocument').val(data.tab_header_name);
                $("#selectDocumentTable").val(data.table_name).trigger("change");
                $("#graphContainerID").attr("data-tab_name",data.tab_header_name);
                $('#selectUploadTemplate').val(data.customTemplate).trigger('change');

                if(Object.prototype.hasOwnProperty.call(data, 'uploadCustomVal')){
                  let reload_custom_validation = {}
                  reload_custom_validation["reload_custom_validation"] = data.uploadCustomVal
                  $('.customValbtnDev').attr('data-data_config',JSON.stringify(reload_custom_validation))
                }

                if(Object.prototype.hasOwnProperty.call(data, 'allow_upload_custV')){
                  if(data.allow_upload_custV){
                    $("#allow_upload_custV").prop("checked",true);
                  }else{
                    $("#allow_upload_custV").prop("checked",false);
                  }
                }

                if(Object.prototype.hasOwnProperty.call(data, 'allow_map_column')){
                  if(data.allow_map_column){
                    $("#allow_map_column").prop("checked",true);
                  }else{
                    $("#allow_map_column").prop("checked",false);
                  }
                }

                if(Object.prototype.hasOwnProperty.call(data, 'allow_comp_logic')){
                  if(data.allow_comp_logic){
                    $("#allow_comp_logic").prop("checked",true);
                  }else{
                    $("#allow_comp_logic").prop("checked",false);
                  }
                }

                if(Object.prototype.hasOwnProperty.call(data, 'allow_stfp_upload')){
                  if(data.allow_stfp_upload){
                    $("#allow_stfp_upload").prop("checked",true);
                  }else{
                    $("#allow_stfp_upload").prop("checked",false);
                  }
                }

                if(Object.prototype.hasOwnProperty.call(data, 'allow_upload_compute')){
                  if(data.allow_upload_compute){
                    $("#allow_upload_compute").prop("checked",true);
                  }else{
                    $("#allow_upload_compute").prop("checked",false);
                  }
                  $("#allow_upload_compute").trigger("change")
                }

                if(Object.prototype.hasOwnProperty.call(data, 'upload_run_config')){
                  $("#upload_comp_table").val(data.upload_run_config.table).trigger("change")
                  $("#upload_comp_model").val(data.upload_run_config.comp_model).trigger("change")
                  $("#upload_comp_importEle").attr("data-data",data.upload_run_config.import_element_id)
                }

                if(Object.prototype.hasOwnProperty.call(data, 'upload_computed_config')){
                  let config_data = data.upload_computed_config["upload_computed_config"]
                  if(Object.keys(config_data).length > 0){
                    $(".computedFieldMapperButton").attr("data-data_config",JSON.stringify(config_data))
                  }
                }

                if(Object.prototype.hasOwnProperty.call(data, 'Columnmapper')){
                    $(".fieldUploadMapperButton").attr("data-data_config", data.Columnmapper);
                }

                if(data.hasOwnProperty("upload_view_custom_messages") && Object.keys(data.upload_view_custom_messages).length != 0){
                  $("#toggleCustomUploadViewMessages").prop("checked",true).trigger("change")
                  $("#customUploadViewMessagesDiv").show()

                  var saved_upload_view_custom_messages = data.upload_view_custom_messages

                  $("#customUploadViewMessagesDiv").find(".c_msg_input").each(function() {

                    if(saved_upload_view_custom_messages[$(this).attr("name")]){
                      if(Object.keys(saved_upload_view_custom_messages[$(this).attr("name")]).length != 0){
                        if(saved_upload_view_custom_messages[$(this).attr("name")]["message"]){
                          $(this).val(saved_upload_view_custom_messages[$(this).attr("name")]["message"])
                        }
                        if(saved_upload_view_custom_messages[$(this).attr("name")]["icon"]){
                          $(this).closest(".nav-item").find(".msg_icon").attr("class",`${saved_upload_view_custom_messages[$(this).attr("name")]["icon"]} msg_icon`)
                        }
                      }
                    }

                  })
                }else{
                  $("#toggleCustomUploadViewMessages").prop("checked",false).trigger("change")
                  $("#customUploadViewMessagesDiv").find(".c_msg_input").each(function() {
                    $(this).val($(this).attr("data-value"))
                    $(this).closest(".nav-item").find(".msg_icon").attr("class",$(this).closest(".nav-item").find(".msg_icon").attr("data-value"))
                  })

                }

                if(data.hasOwnProperty("DroppedFieldsUpload")){
                  $("#dropFields_add_upload").attr('data-data',JSON.stringify(data.DroppedFieldsUpload))
                }

                if($('#selectUploadTemplate').val() == "Custom defined template") {
                  $('#savedocumentConfig').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',false);
                } else {
                  $('#savedocumentConfig').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',true);
                }

                $('#uploadButtonId').attr('data-list',JSON.stringify(data.upload_button_styling))
              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
}


function computation_config_load(element_id){

$.ajax({
            url: window.location.pathname,
            data: {
              'element_id': element_id,
              'operation': 'computation_config_load'
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              $("#selectComputationModel").val(data.tab_data.model).trigger("change")
              $("#tabHeaderComp").val(data.tab_header_name).trigger("change")
              if(data.tab_data.hasOwnProperty("template")) {
                $('#selectComputationTemplate').val(data.tab_data.template).trigger("change")
              } else {
                $('#selectComputationTemplate').val("System defined template").trigger("change")
              }
              $("#graphContainerID").attr("data-tab_name",data.tab_data.model);
              if(data.previous_run == null){
                $("#selectComputationPrevRun").val("yes").trigger("change")
              }else{
                $("#selectComputationPrevRun").val(data.previous_run).trigger("change")
              }
              if($('#selectComputationTemplate').val() == "Custom defined template") {
                $('#saveComputationModel').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',false);
              } else {
                $('#saveComputationModel').closest('.modal-footer').find('.previewCustomTemplate').prop('disabled',true);
              }
              $('#computationButtonId').attr('data-list',JSON.stringify(data.comp_button_styling))
              if (data.button_config.scenario_config_btn == true){
                $('#configure_scenario_btn').prop('checked',true);
              }else{
                $('#configure_scenario_btn').prop('checked',false);
              }
              $('#computationConfigureGlobalVariableId').attr('data-list',JSON.stringify(data.global_variable_configs))
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
          })
}






var condition = "";

function decision_config_load(element_id){

  $.ajax({
              url: window.location.pathname,
              data: {
                'element_id': element_id,
                'operation': 'decision_config_load'
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                condition_dict={}
                tablesArray = [];
                for (let prop in filter_dict) {
                  delete filter_dict[prop];
                  }
							$("#config_table tbody tr td:nth-child(2) span").html("")
              $("#config_table tbody tr td:nth-child(2) span").html("")
              $("#select_conditionTable").val('').trigger("change")
              $("#decision_name").html(data.name)
              $("#decision_purpose").html(data.purpose)
              if(data.type != "augmentation") {

                CKEDITOR.instances['email_message'].setData(data.message)
                CKEDITOR.instances['email_message_send_back'].setData(data.message_send_back)
                CKEDITOR.instances['email_message_delegate'].setData(data.message_delegate)
                CKEDITOR.instances['email_message_mention'].setData(data.message_mention)
                CKEDITOR.instances['approval_decision_message_approve'].setData(data.approval_decision_message_approve)
                CKEDITOR.instances['approval_decision_message_reject'].setData(data.approval_decision_message_reject)
                if (data.approval_notification_subject) {
                  $('#approvalNotificationSubject').val(data.approval_notification_subject);
                }
                if (data.approval_decision_message_approve_subject) {
                  $('#approvalNotificationSubjectAN').val(data.approval_decision_message_approve_subject);
                }
                if (data.approval_decision_message_reject_subject) {
                  $('#approvalNotificationSubjectRN').val(data.approval_decision_message_reject_subject);
                }
                if(data.approval_notification_subject_send_back){
                  $('#approvalNotificationSubject_send_back').val(data.approval_notification_subject_send_back);
                }
                if(data.approval_notification_subject_delegate){
                  $('#approvalNotificationSubject_delegate').val(data.approval_notification_subject_delegate);
                }
                if(data.approval_notification_subject_mention){
                  $('#approvalNotificationSubject_mention').val(data.approval_notification_subject_mention);
                }

              $("#decision_config").val(data.type).trigger("change")
              $("#config_button").val(data.actions).trigger("select2:select");
              $("#config_button").val(data.actions).trigger("change")
              if(data.hasOwnProperty("smtpConfigKey")){
                $("#config_smtp_button").val(data.smtpConfigKey).trigger("change")
              }else{
                $("#config_smtp_button").val("default").trigger("change")
              }

              $("#selectApprovalType").val(data.approval_type).trigger("select2:select");
              $("#selectApprovalType").val(data.approval_type).trigger("change");
              if (data.approval_config.approver_type) {
                $("#selectApproverType").val(data.approval_config.approver_type).trigger("select2:select");
                $("#selectApproverType").val(data.approval_config.approver_type).trigger("change");
              }
              if (data.allow_users_to_set_approval_parameter) {
                $("#allowUsersToSetApprovers").val(data.allow_users_to_set_approval_parameter).trigger("select2:select");
                $("#allowUsersToSetApprovers").val(data.allow_users_to_set_approval_parameter).trigger("change");
                if(data.allow_users_to_set_approval_parameter == "allow_user"){
                  $("#allowUsersToSetApproversDispFields").val(data.approversDispFields).trigger('change')
                  $("#allowUsersToSetApproversDispFormat").val(data.approversDispFormat).trigger('change')
                }
              }
              if(data.maximum_approvers_allowed){
                $("#maximum_approvers").val(data.maximum_approvers_allowed).trigger('change')
              }
              if(data.maximum_levels_allowed){
                $("#maximum_levels").val(data.maximum_levels_allowed).trigger('change')
              }
              if (data.allowApprovalAssignment) {
                $('#allowApprovalAssignment').val(data.allowApprovalAssignment).trigger('select2:select');
                $('#allowApprovalAssignment').val(data.allowApprovalAssignment).trigger('change');
              }
              if (data.approvalInMailApprovalOption) {
                $('#approvalInMailApprovalOption').prop("checked", data.approvalInMailApprovalOption).trigger('change');
              }
              if (data.mailForApproverAdded) {
                $('#mailForApproverAdded').prop("checked", data.mailForApproverAdded).trigger('change');
              }
              if (data.notify_existing) {
                $('#notify_existing_li').css('display', 'block')
                $('#notify_existing').prop("checked", data.notify_existing).trigger('change');
              }
              if (data.approvalSkipLevelOption) {
                $('#approvalSkipLevelOption').prop("checked", data.approvalSkipLevelOption).trigger('change');
              }
              if (data.approvalSendAttachmentWithDecisionMail) {
                $('#approvalSendAttachmentWithDecisionMail').prop("checked", data.approvalSendAttachmentWithDecisionMail).trigger('change');
              }
              if (data.approval_type == 'hierarchical' || data.approval_type == 'hierarchical') {
                $("#selectApprovalHierarchyGroup").attr('data-config', data.approval_config.hierarchy_group)
                $("#selectApprovalHierarchyStartingLevel").attr('data-config', data.approval_config.starting_level)
                $("#selectApprovalHierarchyEndingingLevel").attr('data-config', data.approval_config.ending_level)
                $("#selectApprovalHierarchyGroup").val(data.approval_config.hierarchy_group).trigger("select2:select")
                $("#selectApprovalHierarchyGroup").val(data.approval_config.hierarchy_group).trigger("change")
                $("#selectApprovalHierarchyStartingLevel").val(data.approval_config.starting_level).trigger("change")
                $("#selectApprovalHierarchyEndingingLevel").val(data.approval_config.ending_level).trigger("change")
              } if (data.approval_type == 'dynamic_group') {
                $('#selectApproverGroupTable').val(data.approval_config.table_name).trigger('select2:select');
                $('#selectApproverGroupTable').val(data.approval_config.table_name).trigger('change');
                $('#selectApproverGroupField').val(data.approval_config.field).trigger('select2:select');
                $('#selectApproverGroupField').val(data.approval_config.field).trigger('change');
                $('#selectApproverGroupField').attr('data-config', data.approval_config.field);
              } if (data.approval_type == 'dynamic_user') {
                $('#selectApproverUserTable').val(data.approval_config.table_name).trigger('select2:select');
                $('#selectApproverUserTable').val(data.approval_config.table_name).trigger('change');
                $('#selectApproverUserField').val(data.approval_config.field).trigger('select2:select');
                $('#selectApproverUserField').val(data.approval_config.field).trigger('change');
                $('#selectApproverUserField').attr('data-config', data.approval_config.field);
              } if (data.approval_type == 'dynamic_master_group' || data.approval_type == 'dynamic_master_user') {
                $('#selectApproverGroupEntryParameter').val(data.approval_config.parameter).trigger('select2:select');
                $('#selectApproverGroupEntryParameter').val(data.approval_config.parameter).trigger('change');
                if (data.approval_config.parameter == 'extract_from_entry') {
                  $('#selectTableForParameter').val(data.approval_config.parameter_table_name).trigger('select2:select');
                  $('#selectTableForParameter').val(data.approval_config.parameter_table_name).trigger('change');
                  $('#selectFieldForParameter').val(data.approval_config.parameter_field).trigger('select2:select');
                  $('#selectFieldForParameter').val(data.approval_config.parameter_field).trigger('change');
                  $('#selectFieldForParameter').attr('data-config', data.approval_config.parameter_field);
                }
                for (let i = 0; i < data.approval_config.master_level_config.length; i++) {
                  const element = data.approval_config.master_level_config[i];
                  if (i > 0) {
                    $('#dynamicMasterBasedApprovalAddButton').trigger('click');
                  }
                  $('.masterBasedApprovalLevel').eq(i).find(".paramterMappingTable").val(element.table_name).trigger('select2:select');
                  $('.masterBasedApprovalLevel').eq(i).find(".paramterMappingTable").val(element.table_name).trigger('change');
                  $('.masterBasedApprovalLevel').eq(i).find(".paramterMappingField").val(element.mapping_field).trigger('change');
                  $('.masterBasedApprovalLevel').eq(i).find(".paramterMappingField").val(element.mapping_field).trigger('change');
                  $('.masterBasedApprovalLevel').eq(i).find(".paramterMappingField").attr('data-config', element.mapping_field);
                  $('.masterBasedApprovalLevel').eq(i).find(".paramterMappingApproverField").val(element.approver_field).trigger('change');
                  $('.masterBasedApprovalLevel').eq(i).find(".paramterMappingApproverField").val(element.approver_field).trigger('change');
                  $('.masterBasedApprovalLevel').eq(i).find(".paramterMappingApproverField").attr('data-config', element.approver_field);
                }

              } if (data.approval_type == 'static_user') {
                $('#selectApproverUsers').val(data.approval_config.user_list).trigger('select2:select');
                $('#selectApproverUsers').val(data.approval_config.user_list).trigger('change');
                $('#selectApproverUsers').attr('data-config', data.approval_config.user_list);
              } if (data.approval_type == 'multi_level') {
                $('#multiLevelApprovalButton').attr('data-config', JSON.stringify(data.approval_config.level_config));
              } else {
                $("#select2multiple").val(data.groups).trigger("change")
              }
              var email_approval=[]
              var email_decision=[]
                if ($('#config_button').val() == 'Set Approval and Email') {
                  if (data.approver_mailer_type == "static") {
                    var approval_email_list = JSON.parse(data.approval_email_list);
                  } else {
                    var approval_email_list = []
                  }
                  if (data.approver_decision_mailer_type == "static") {
                    var approval_decision_email_list = JSON.parse(data.approval_decision_email_list);
                  } else {
                    var approval_decision_email_list = []
                  }

                  $('#approval_mailer_type').val(data.approver_mailer_type).trigger('select2:select');
                  $('#approval_mailer_type').val(data.approver_mailer_type).trigger('change');
                  $('#approval_email_list').select2({'tags': true});
                  for (em of approval_email_list) {
                    $('#approval_email_list').append(`<option value='${em}' selected>${em}</option>`)
                  }
                  $('#approval_email_list').val(approval_email_list).trigger('select2:select');
                  $('#approval_email_list').val(approval_email_list).trigger('change');

                  $('#approval_decision_mailer_type').val(data.approver_decision_mailer_type).trigger('select2:select');
                  $('#approval_decision_mailer_type').val(data.approver_decision_mailer_type).trigger('change');
                  $('#approval_email_list').select2({'tags': true});
                  for (em of approval_decision_email_list) {
                    $('#approval_email_decision').append(`<option value='${em}' selected>${em}</option>`)
                  }
                  $('#approval_email_decision').val(approval_decision_email_list).trigger('select2:select');
                  $('#approval_email_decision').val(approval_decision_email_list).trigger('change');

                  if (data.approval_email_list) {
                    email_approval = JSON.parse( data.approval_email_list);
                  } else {
                    email_approval = [];
                  }
                  if (data.approval_decision_email_list) {
                    email_decision = JSON.parse(data.approval_decision_email_list);
                  } else {
                    email_decision = [];
                  }
                  if (data.approval_mail_additional_config) {
                    $('#approval_mailer_typeCC').val(data.approval_mail_additional_config.approver_mailer_typeCC).trigger('select2:select');
                    $('#approval_mailer_typeCC').val(data.approval_mail_additional_config.approver_mailer_typeCC).trigger('change');
                    $('#approval_email_listCC').select2({'tags': true});
                    if (data.approval_mail_additional_config.approval_email_listCC) {
                      for (em of data.approval_mail_additional_config.approval_email_listCC) {
                        $('#approval_email_listCC').append(`<option value='${em}' selected>${em}</option>`)
                      }
                      $('#approval_email_listCC').val(data.approval_mail_additional_config.approval_email_listCC).trigger('change');
                    }

                    $('#approval_decision_mailer_typeCC').val(data.approval_mail_additional_config.approver_decision_mailer_typeCC).trigger('select2:select');
                    $('#approval_decision_mailer_typeCC').val(data.approval_mail_additional_config.approver_decision_mailer_typeCC).trigger('change');
                    $('#approval_email_decisionCC').select2({'tags': true});
                    if (data.approval_mail_additional_config.approval_decision_email_listCC) {
                      for (em of data.approval_mail_additional_config.approval_decision_email_listCC) {
                        $('#approval_email_decisionCC').append(`<option value='${em}' selected>${em}</option>`)
                      }
                      $('#approval_email_decisionCC').val(data.approval_mail_additional_config.approval_decision_email_listCC).trigger('change');
                    }

                    $('#approval_mailer_typeBCC').val(data.approval_mail_additional_config.approver_mailer_typeBCC).trigger('select2:select');
                    $('#approval_mailer_typeBCC').val(data.approval_mail_additional_config.approver_mailer_typeBCC).trigger('change');
                    $('#approval_email_listBCC').select2({'tags': true});
                    if (data.approval_mail_additional_config.approval_email_listBCC) {
                      for (em of data.approval_mail_additional_config.approval_email_listBCC) {
                        $('#approval_email_listBCC').append(`<option value='${em}' selected>${em}</option>`)
                      }
                      $('#approval_email_listBCC').val(data.approval_mail_additional_config.approval_email_listBCC).trigger('change');
                    }

                    $('#approval_decision_mailer_typeBCC').val(data.approval_mail_additional_config.approver_decision_mailer_typeBCC).trigger('select2:select');
                    $('#approval_decision_mailer_typeBCC').val(data.approval_mail_additional_config.approver_decision_mailer_typeBCC).trigger('change');
                    $('#approval_email_decisionBCC').select2({'tags': true});
                    if (data.approval_mail_additional_config.approval_decision_email_listBCC) {
                      for (em of data.approval_mail_additional_config.approval_decision_email_listBCC) {
                        $('#approval_email_decisionBCC').append(`<option value='${em}' selected>${em}</option>`)
                      }
                      $('#approval_email_decisionBCC').val(data.approval_mail_additional_config.approval_decision_email_listBCC).trigger('change');
                    }
                  }

                  $('#dynamicAttachmentColumnWidthFieldContainer').attr('data-config', '{}');
                  if (data.approval_notification_attachment_config) {
                    var attachmentConfig = data.approval_notification_attachment_config;
                    $('#insert_attachment').attr('data-config', JSON.stringify(attachmentConfig));
                    $('#selectAttachmentType').val(attachmentConfig.attachment_type).trigger('select2:select');
                    $('#selectAttachmentType').val(attachmentConfig.attachment_type).trigger('change');
                    $('#addUserUploadedFilesAsAttachment').val(attachmentConfig.addUploadedFilesAsAttachment).trigger('select2:select');
                    $('#addUserUploadedFilesAsAttachment').val(attachmentConfig.addUploadedFilesAsAttachment).trigger('change');
                    if (attachmentConfig.attachment_type == 'dynamic') {
                      $('#selectDynamicAttachment').val(attachmentConfig.parameter).trigger('select2:select');
                      $('#selectDynamicAttachment').val(attachmentConfig.parameter).trigger('change');

                      if (attachmentConfig.parameter == "pdf" && attachmentConfig.additional_config) {
                        $('#dynamicAttachmentPDFDataLayoutOption').val(attachmentConfig.additional_config.layoutOption).trigger('select2:select');
                        $('#dynamicAttachmentPDFDataLayoutOption').val(attachmentConfig.additional_config.layoutOption).trigger('change');
                        if (attachmentConfig.additional_config.logoConfig) {
                          $('#dynamicAttachmentPDFAddLogo').val(attachmentConfig.additional_config.logoConfig.add_logo).trigger('select2:select');
                          $('#dynamicAttachmentPDFAddLogo').val(attachmentConfig.additional_config.logoConfig.add_logo).trigger('change');
                          $('#dynamicAttachmentPDFLogoPlacement').val(attachmentConfig.additional_config.logoConfig.placement).trigger('select2:select');
                          $('#dynamicAttachmentPDFLogoPlacement').val(attachmentConfig.additional_config.logoConfig.placement).trigger('change');
                          $("#dynamicAttachmentsPDFLogo").siblings(".custom-file-label").addClass("selected").html(attachmentConfig.additional_config.logoConfig.parameter);
                        }
                        if (attachmentConfig.additional_config.hasOwnProperty("dropcolumns")) {
                          if(attachmentConfig.additional_config.dropcolumns){
                            $("#dynamicAttachmentPDFDataDropColumns").attr("data-data",JSON.stringify(attachmentConfig.additional_config.dropcolumns))
                          }
                        }
                        if (attachmentConfig.additional_config.hasOwnProperty("droptable")) {
                          if(attachmentConfig.additional_config.droptable){
                            $("#dynamicAttachmentPDFDataDropTable").val(attachmentConfig.additional_config.droptable).trigger("change")
                            $("#dynamicAttachmentPDFDataDropTable").val(attachmentConfig.additional_config.droptable).trigger("select2:select")
                          }
                        }
                        if (attachmentConfig.additional_config.hasOwnProperty("transDataCols")) {
                          if(attachmentConfig.additional_config.transDataCols){
                            $("#dynamicAttachmentPDFTransData").val(attachmentConfig.additional_config.transDataCols).trigger("change")
                          }
                        }
                        if (attachmentConfig.additional_config.styleConfig) {
                          $('#dynamicAttachmentPDFCustomizeStyle').val(attachmentConfig.additional_config.styleConfig.customize_style).trigger('select2:select');
                          $('#dynamicAttachmentPDFCustomizeStyle').val(attachmentConfig.additional_config.styleConfig.customize_style).trigger('change');
                          $('#dynamicAttachmentPDFHeaderBGColor').val(attachmentConfig.additional_config.styleConfig.header_bg_color).trigger('change');
                          $('#dynamicAttachmentPDFHeaderTextColor').val(attachmentConfig.additional_config.styleConfig.header_text_color).trigger('change');
                          $('#dynamicAttachmentPDFCellBGColor').val(attachmentConfig.additional_config.styleConfig.cell_bg_color).trigger('change');
                          $('#dynamicAttachmentPDFCellTextColor').val(attachmentConfig.additional_config.styleConfig.cell_text_color).trigger('change');
                          $('#dynamicAttachmentPDFTableRowHeight').val(attachmentConfig.additional_config.styleConfig.row_height).trigger('change');
                          $('#dynamicAttachmentPDFTableColumnWidth').val(attachmentConfig.additional_config.styleConfig.customize_column_width).trigger('select2:select');
                          $('#dynamicAttachmentPDFTableColumnWidth').val(attachmentConfig.additional_config.styleConfig.customize_column_width).trigger('change');
                          $('#selectGlobalContentPDFANColumnAlignment').val(attachmentConfig.additional_config.styleConfig.column_alignment.global_content).trigger('select2:select');
                          $('#selectGlobalContentPDFANColumnAlignment').val(attachmentConfig.additional_config.styleConfig.column_alignment.global_content).trigger('change');
                          $('#selectGlobalHeaderPDFANColumnAlignment').val(attachmentConfig.additional_config.styleConfig.column_alignment.global_header).trigger('select2:select');
                          $('#selectGlobalHeaderPDFANColumnAlignment').val(attachmentConfig.additional_config.styleConfig.column_alignment.global_header).trigger('change');
                          if (attachmentConfig.additional_config.styleConfig.customize_column_width == "manual") {
                            $('#dynamicAttachmentPDFTableColumnStaticWidth').val(attachmentConfig.additional_config.styleConfig.static_column_width).trigger('change');
                            if (attachmentConfig.additional_config.styleConfig.custom_column_field_level_config) {
                              $('#dynamicAttachmentPDFTableColumnWidthTable').val(attachmentConfig.additional_config.styleConfig.custom_column_field_level_config.table).trigger('select2:select');
                              $('#dynamicAttachmentPDFTableColumnWidthTable').val(attachmentConfig.additional_config.styleConfig.custom_column_field_level_config.table).trigger('change');
                              $('#dynamicAttachmentColumnWidthFieldContainer').attr('data-config', JSON.stringify(attachmentConfig.additional_config.styleConfig.custom_column_field_level_config.field_config));
                            }
                          }
                        }
                      }
                    }
                  }

                  if (data.approval_notification_attachment_config_mention) {
                    var attachmentConfig = data.approval_notification_attachment_config_mention;
                    $('#insert_attachment_mention').attr('data-config', JSON.stringify(attachmentConfig));
                    $('#selectAttachmentType_mention').val(attachmentConfig.attachment_type).trigger('select2:select');
                    $('#selectAttachmentType_mention').val(attachmentConfig.attachment_type).trigger('change');
                    $('#addUserUploadedFilesAsAttachment_mention').val(attachmentConfig.addUploadedFilesAsAttachment).trigger('select2:select');
                    $('#addUserUploadedFilesAsAttachment_mention').val(attachmentConfig.addUploadedFilesAsAttachment).trigger('change');
                    if (attachmentConfig.attachment_type == 'dynamic') {
                      $('#selectDynamicAttachment_mention').val(attachmentConfig.parameter).trigger('select2:select');
                      $('#selectDynamicAttachment_mention').val(attachmentConfig.parameter).trigger('change');

                      if (attachmentConfig.parameter == "pdf" && attachmentConfig.additional_config) {
                        $('#dynamicAttachmentPDFDataLayoutOption_mention').val(attachmentConfig.additional_config.layoutOption).trigger('select2:select');
                        $('#dynamicAttachmentPDFDataLayoutOption_mention').val(attachmentConfig.additional_config.layoutOption).trigger('change');
                        if (attachmentConfig.additional_config.logoConfig) {
                          $('#dynamicAttachmentPDFAddLogo_mention').val(attachmentConfig.additional_config.logoConfig.add_logo).trigger('select2:select');
                          $('#dynamicAttachmentPDFAddLogo_mention').val(attachmentConfig.additional_config.logoConfig.add_logo).trigger('change');
                          $('#dynamicAttachmentPDFLogoPlacement_mention').val(attachmentConfig.additional_config.logoConfig.placement).trigger('select2:select');
                          $('#dynamicAttachmentPDFLogoPlacement_mention').val(attachmentConfig.additional_config.logoConfig.placement).trigger('change');
                          $("#dynamicAttachmentsPDFLogo_mention").siblings(".custom-file-label").addClass("selected").html(attachmentConfig.additional_config.logoConfig.parameter);
                        }
                        if (attachmentConfig.additional_config.hasOwnProperty("dropcolumns")) {
                          if(attachmentConfig.additional_config.dropcolumns){
                            $("#dynamicAttachmentPDFDataDropColumns_mention").attr("data-data",JSON.stringify(attachmentConfig.additional_config.dropcolumns))
                          }
                        }
                        if (attachmentConfig.additional_config.hasOwnProperty("droptable")) {
                          if(attachmentConfig.additional_config.droptable){
                            $("#dynamicAttachmentPDFDataDropTable_mention").val(attachmentConfig.additional_config.droptable).trigger("change")
                            $("#dynamicAttachmentPDFDataDropTable_mention").val(attachmentConfig.additional_config.droptable).trigger("select2:select")
                          }
                        }
                        if (attachmentConfig.additional_config.hasOwnProperty("transDataCols")) {
                          if(attachmentConfig.additional_config.transDataCols){
                            $("#dynamicAttachmentPDFTransData_mention").val(attachmentConfig.additional_config.transDataCols).trigger("change")
                          }
                        }
                        if (attachmentConfig.additional_config.styleConfig) {
                          $('#dynamicAttachmentPDFCustomizeStyle_mention').val(attachmentConfig.additional_config.styleConfig.customize_style).trigger('select2:select');
                          $('#dynamicAttachmentPDFCustomizeStyle_mention').val(attachmentConfig.additional_config.styleConfig.customize_style).trigger('change');
                          $('#dynamicAttachmentPDFHeaderBGColor_mention').val(attachmentConfig.additional_config.styleConfig.header_bg_color).trigger('change');
                          $('#dynamicAttachmentPDFHeaderTextColor_mention').val(attachmentConfig.additional_config.styleConfig.header_text_color).trigger('change');
                          $('#dynamicAttachmentPDFCellBGColor_mention').val(attachmentConfig.additional_config.styleConfig.cell_bg_color).trigger('change');
                          $('#dynamicAttachmentPDFCellTextColor_mention').val(attachmentConfig.additional_config.styleConfig.cell_text_color).trigger('change');
                          $('#dynamicAttachmentPDFTableRowHeight_mention').val(attachmentConfig.additional_config.styleConfig.row_height).trigger('change');
                          $('#dynamicAttachmentPDFTableColumnWidth_mention').val(attachmentConfig.additional_config.styleConfig.customize_column_width).trigger('select2:select');
                          $('#dynamicAttachmentPDFTableColumnWidth_mention').val(attachmentConfig.additional_config.styleConfig.customize_column_width).trigger('change');
                          $('#selectGlobalContentPDFANColumnAlignment_mention').val(attachmentConfig.additional_config.styleConfig.column_alignment.global_content).trigger('select2:select');
                          $('#selectGlobalContentPDFANColumnAlignment_mention').val(attachmentConfig.additional_config.styleConfig.column_alignment.global_content).trigger('change');
                          $('#selectGlobalHeaderPDFANColumnAlignment_mention').val(attachmentConfig.additional_config.styleConfig.column_alignment.global_header).trigger('select2:select');
                          $('#selectGlobalHeaderPDFANColumnAlignment_mention').val(attachmentConfig.additional_config.styleConfig.column_alignment.global_header).trigger('change');
                          if (attachmentConfig.additional_config.styleConfig.customize_column_width == "manual") {
                            $('#dynamicAttachmentPDFTableColumnStaticWidth_mention').val(attachmentConfig.additional_config.styleConfig.static_column_width).trigger('change');
                            if (attachmentConfig.additional_config.styleConfig.custom_column_field_level_config) {
                              $('#dynamicAttachmentPDFTableColumnWidthTable_mention').val(attachmentConfig.additional_config.styleConfig.custom_column_field_level_config.table).trigger('select2:select');
                              $('#dynamicAttachmentPDFTableColumnWidthTable_mention').val(attachmentConfig.additional_config.styleConfig.custom_column_field_level_config.table).trigger('change');
                              $('#dynamicAttachmentColumnWidthFieldContainer_mention').attr('data-config', JSON.stringify(attachmentConfig.additional_config.styleConfig.custom_column_field_level_config.field_config));
                            }
                          }
                        }
                      }
                    }
                  }

                  $('#email_list').css('display','block');
                }
                if (data.check == 'check') {
                  $('#carouselExampleIndicators').find('#addrow').css('display','none');
                  $('#carouselExampleIndicators').find('#config_table').css('display','none');
                  $('#carouselExampleIndicators').find('.carousel-inner').find('.carousel-item').eq(1).css('display','none');
                  $('.configure_button').prop('disabled',true);
                  $('#carouselExampleIndicators').find('.carousel-control-next-icon').attr("data-slide-to","2")
                  $('#carouselExampleIndicators').find('.carousel-control-prev-icon').attr("data-slide-to","0")
                  $('#carouselExampleIndicators').find('#selectAllDecison').prop('checked',true);

                } else {
                  $('#carouselExampleIndicators').find('#config_table').css('display','');
                  $('#carouselExampleIndicators').find('#addrow').css('display','');
                  $('#carouselExampleIndicators').find('.carousel-inner').find('.carousel-item').eq(1).css('display','');
                }

                $("#decisionBoxTable").html("")
                $("#condition_name_append").html("")
                $("#condition_dropdown_decision").empty();
                if (data.check != 'check') {
                  $('.configure_button').prop('disabled',false);
                  for(var k of data.tablename) {
                  tablesArray.push(k);
                }
                  for(var k in data.condition_template)
                  {
                    filter_dict[k] = data.condition_template[k]
                  }
                  var ob = data.condition[Object.keys(data.condition)[0]]
                  $("#configuration_row tr:first-child td").eq(1).find("span").html((Object.keys(data.condition))[0])
                  var next_sr_no = parseInt($('#config_table tbody tr:last-child td:first-child')[0].innerHTML) + 1
                  for(var key in data.condition)
                  {
                    condition_dict[key] = data.condition[key]
                    if(key != Object.keys(data.condition)[0]) {
                        $('#configuration_row').append('<tr>' + '<td>' + next_sr_no + '</td>' +
                      '<td> <span contenteditable="true" textarea style="display: inline-block;min-width: 10em;max-width:10em;overflow:hidden">'+ key + '</span></td>' +
                      '<td><button type="button" class="btn btn-xs btn-primary configure_button" href="#carouselExampleIndicators" data-slide="next">Configure</button></td>' +
                      '</tr>')
                      next_sr_no = next_sr_no + 1
                      var lastTr = $('#config_table').find('tr').last();
                      lastTr.find('.configure_button').click(configure_click);
                    }
                  }
                  var label_column = data.label_columns
                  for (const [key, value] of Object.entries(label_column)) {
                    $("#condition_dropdown_decision").append(
                      '<li class="dropdown-item"><a href="javascript:void(0)" name=' +
                      key + ' class="filter_btn">' + value + '</a></li>');
                  }
                  var form_fields = data.form_fields
                  $("#select_conditionTable").val(data.tablename).trigger("change")

                  $('.filter_btn').on('click',function () {
                    var name = $(this).attr('name');
                    var text = $(this).text();
                    var STRING = data.form_fields[name]
                    $('#decisionBoxTable').append(STRING);

                    $('#decisionBoxTable tr').eq(-1).find("select").each(function () {

    $(this).select2( );
                    });


                    $('.remove_filter').on('click', removefilter);

                    function removefilter() {
                      $(this).closest("tr").remove();
                    }

                  });
                  $('#configuration_row').find('td').eq(1).find('span').prop('contenteditable',false);
                } else {
                  $('#configuration_row').find('td').eq(1).find('span').prop('contenteditable',true);

                }

                $("#allowModifyColumn").prop("checked",data.modifyColumn);
                setTimeout(() => {
                  if(data.modifyColumn){
                    $(".modifyColumn").css("display","flex")
                    let modifyColumnTColumn = data.modifyColumnColumn
                    $("#modifyColumnTable").attr("data-reload","yes")
                    $("#modifyColumnTable").attr("data-reloaddata",JSON.stringify(data))
                    $("#modifyColumnTable").val(data.modifyColumnTable).trigger("change");
                  }
                },500)
              }


              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
}

$(document).ready(function() {
        $(".multipleform").select2({
      })
    });


var old_table=""
var tab_name=""
var base_table=""
var col_name=""
function report_config_load(element_id){
  $.ajax({
              url: window.location.pathname,
              data: {
                'element_id': element_id,
                'operation': 'report_config_load'
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                $('.reportElements').find("input[type=checkbox]").each(function(){
								$(this)[0].checked=false
							})
                old_table = data.table
                base_table= data.base_table_name
                col_name = data.base_col_name

                $('.listoficons').each(function(){
                  if($(this).attr('class').replace(' listoficons', '').trim() == data.icon.trim() )
                  {
                    $(this).css("border","1px solid rgb(184, 134, 11)")
                    return
                  }
                  else{
                    $(this).css("border","0px none rgb(184, 134, 11)")
                  }
                  })
                $('#tabHeaderReport').val(data.tab_header_name);
                $("#repname").val(data.table_name);
                $("#keytablename option").each(function () {
                      if ($(this).html().trim() == data.base_table_name.trim()) {
                          $(this).attr("selected", "selected").trigger("change");
                          return;
                      }
              });
              $('#keytablename').prop('disabled', true);
              $("#uniquekey option").each(function () {
                      if ($(this).html().trim() == data.base_col_name.trim()) {
                          $(this).attr("selected", "selected").trigger("change");
                          return;
                      }
              });
              $('#uniquekey').prop('disabled', true);
              $('#saveBaseCol').prop('disabled', true);
              $('#repname').prop('disabled', true);
                tab_name = data.table_name
                $("#tname").val(data.table_name);
                let result = Object.values(data.elements).every(o => o == "No");
                if(result == true)
                      {
                        $("#notrequiredReport").prop("checked", true)
                      }
                for (const [key, value] of Object.entries(data.elements))
                {
                  if(key == "Plot charts" && value =="Yes"){
                    $("#plotChartReport").prop("checked", true);
                  }
                  else if(key == "Set alert" && value == "Yes"){
                    $("#setAlertReport").prop("checked", true);
                  }
                  else if(key == "Customised report" && value == "Yes"){
                    $("#customisedReport").prop("checked", true);
                  }
                  else if(key == "Save template" && value == "Yes"){
                    $("#saveTemplate").prop("checked", true);
                  }
                  else if(key == "Expand" && value == "Yes"){
                    $("#expandReport").prop("checked", true);
                  }
                }


                var $TABLE = $('#table');
                $('#example11 tbody tr').remove()
                $('#export-btn').prop('disabled', true);
                $('#selectid').css('display', 'none');
                $('#edit-btn').css('display','block');
                $('#saveReportConfig').prop('disabled', false);

        for(var d in data.table){
        var templateString = `<tr class="hide">
                          <td><span id='fld_name' contenteditable="false" style="display: inline-block;min-width: 70px;">${data.table[d]["field name"]}</span></td>`
                          if(data.table[d]["field data type"] == "AutoField")
                          {
                            templateString = templateString  + ` <td contenteditable="false">
                            <select class="table_datatype browser-default custom-select" id="fieldselect"
                              disabled>
                              <option value="" disabled>Select</option>
                              <option value="AutoField" selected>AutoField (Primary key)</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["field data type"] == "CharField")
                          {
                            templateString = templateString  + ` <td contenteditable="false">
                            <select class="table_datatype browser-default custom-select" id="fieldselect"
                              disabled>
                              <option value="CharField" selected >CharField (Text,numbers,special characters,etc.)</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["field data type"] == "TextField")
                          {
                            templateString = templateString  + ` <td contenteditable="false">
                            <select class="table_datatype browser-default custom-select" id="fieldselect"
                              disabled>
                              <option value="TextField" selected>TextField (Large text)</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["field data type"] == "BooleanField")
                          {
                            templateString = templateString  + ` <td contenteditable="false">
                            <select class="table_datatype browser-default custom-select" id="fieldselect"
                              disabled>
                              <option value="BooleanField" selected>BooleanField (Yes or No,True or False,etc.</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["field data type"] == "FileField")
                          {
                            templateString = templateString  + ` <td contenteditable="false">
                            <select class="table_datatype browser-default custom-select" id="fieldselect"
                              disabled>
                              <option value="FileField" selected>FileField (File/Document upload)</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["field data type"] == "ImageField")
                          {
                            templateString = templateString  + ` <td contenteditable="false">
                            <select class="table_datatype browser-default custom-select" id="fieldselect"
                              disabled>
                              <option value="ImageField" selected>ImageField (image upload)</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["field data type"] == "IntegerField")
                          {
                            templateString = templateString  + ` <td contenteditable="false">
                            <select class="table_datatype browser-default custom-select" id="fieldselect"
                              disabled>
                              <option value="IntegerField" selected>IntegerField (Integer numbers)</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["field data type"] == "BigIntegerField")
                          {
                            templateString = templateString  + ` <td contenteditable="false">
                            <select class="table_datatype browser-default custom-select" id="fieldselect"
                              disabled>
                              <option value="BigIntegerField" selected>BigIntegerField (Big Integer numbers)</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["field data type"] == "FloatField")
                          {
                            templateString = templateString  + ` <td contenteditable="false">
                            <select class="table_datatype browser-default custom-select" id="fieldselect"
                              disabled>
                              <option value="FloatField" selected>FloatField (Integer or decimal numbers)</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["field data type"] == "DateField")
                          {
                            templateString = templateString  + ` <td contenteditable="false">
                            <select class="table_datatype browser-default custom-select" id="fieldselect"
                              disabled>
                              <option value="DateField" selected>DateField (Date)</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["field data type"] == "DateTimeField")
                          {
                            templateString = templateString  + ` <td contenteditable="false">
                            <select class="table_datatype browser-default custom-select" id="fieldselect"
                              disabled>
                              <option value="DateTimeField" selected>DateTimeField (Date and Time)</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["field data type"] == "TimeField")
                          {
                            templateString = templateString  + ` <td contenteditable="false">
                            <select class="table_datatype browser-default custom-select" id="fieldselect"
                              disabled>
                              <option value="TimeField" selected>TimeField (Time)</option>
                            </select>
                          </td>`
                        }
                        else
                        {
                          templateString = templateString  + ` <td contenteditable="false">
                            <select class="table_datatype browser-default custom-select" id="fieldselect"
                              disabled>
                              <option value="1" selected>${data.table[d]["field data type"]}</option>
                            </select>
                          </td>`
                        }

                        templateString = templateString  + ` <td><span id = 'prnt_tbl' contenteditable="false" style="display: inline-block;min-width: 70px;" disabled>${data.table[d]["parent table"]}</span></td>
                          <td><span contenteditable="false"  style="display: inline-block;min-width: 70px;">${data.table[d]["field header"]}</span></td>`

                          if(data.table[d]["nullable?"] == "No")
                          {
                            templateString = templateString  + `<td contenteditable="false">
                            <select class="browser-default custom-select" id="nulloption"
                              disabled>
                              <option value="2" selected >No</option>
                            </select>
                          </td>`
                          }
                          else if(data.table[d]["nullable?"] == "Yes")
                          {
                            templateString  = templateString  + `<td contenteditable="false">
                            <select class="browser-default custom-select" id="nulloption"
                              disabled>
                              <option value="1" selected>Yes</option>
                            </select>
                          </td>`
                          }
                          else{
                            templateString  = templateString  + `<td contenteditable="false">
                            <select class="browser-default custom-select" id="nulloption"
                              disabled>
                              <option value="" disabled selected>Select</option>
                              <option value="1">Yes</option>
                              <option value="2">No</option>
                            </select>
                          </td>`
                          }
                          templateString = templateString + `<td><span contenteditable="false" style="display: inline-block;min-width: 70px;" disabled>${data.table[d]["maximum length*"]}</span></td>
                          <td><span contenteditable="false" style="display: inline-block;min-width: 70px;" disabled>${data.table[d]["choices"]}</span></td>`

                          if(data.table[d]["computed value"] == "No"){

                          templateString  = templateString  + `<td contenteditable="false">
                            <select class="browser-default custom-select" id="computedoption"
                              disabled>
                              <option value="2" selected>No</option>
                            </select>
                          </td>`
                        }
                          else if(data.table[d]["computed value"] == "Yes")
                          {
                            templateString  = templateString  + `<td contenteditable="false">
                            <select class="browser-default custom-select" id="computedoption"
                              disabled>
                              <option value="1" selected>Yes</option>
                            </select>
                          </td>`
                          }
                          else{
                            templateString  = templateString  + `<td contenteditable="false">
                            <select class="browser-default custom-select" id="computedoption"
                              disabled>
                              <option value="" disabled selected >Select</option>
                            </select>
                          </td>`
                          }
                          templateString  = templateString  + `<td><span contenteditable="false" style="display: inline-block; min-width: 70px;" disabled>${data.table[d]["default"]}</span></td>`
                          if(data.table[d]["auto now?"] == "No")
                          {
                          templateString  = templateString  + `
                          <td contenteditable="false">
                            <select class="browser-default custom-select" disabled id="autonowoption"
                              disabled>
                              <option value="2" selected>No</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["auto now?"] == "Yes")
                          {
                            templateString  = templateString  + `<td contenteditable="false">
                            <select class="browser-default custom-select" disabled id="autonowoption"
                              disabled>
                              <option value="1" selected>Yes</option>
                            </select>
                          </td>`
                          }
                        else{
                          templateString  = templateString  + `<td contenteditable="false">
                            <select class="browser-default custom-select" disabled id="autonowoption"
                              disabled>
                              <option value="" disabled selected>Select</option>
                            </select>
                          </td>`

                        }
                        if(data.table[d]["editable?"] == "No")
                          {

                          templateString  = templateString  + `<td contenteditable="false">
                            <select class="browser-default custom-select" disabled id="editableoption">
                              <option value="2" selected>No</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["editable?"] == "Yes")
                          {

                          templateString  = templateString  + `<td contenteditable="false">
                            <select class="browser-default custom-select" disabled id="editableoption">
                              <option value="1" selected>Yes</option>
                            </select>
                          </td>`
                        }
                        else{
                          templateString  = templateString  + `<td contenteditable="false">
                            <select class="browser-default custom-select" disabled id="editableoption"
                              >
                              <option value="" disabled selected>Select</option>
                            </select>
                          </td>`
                        }
                        if(data.table[d]["aggregation"] == "Sum")
                        {
                        templateString  = templateString  + `<td>
                            <select class="browser-default custom-select editableagg" disabled>
                              <option value="1" selected>Sum</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["aggregation"] == "Average")
                        {
                        templateString  = templateString  + `<td>
                            <select class="browser-default custom-select editableagg" disabled>
                              <option value="2" selected>Average</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["aggregation"] == "Count")
                        {
                        templateString  = templateString  + `<td>
                            <select class="browser-default custom-select editableagg" disabled>
                              <option value="2" selected>Count</option>
                            </select>
                          </td>`
                        }
                        else if(data.table[d]["aggregation"] == "Direct relation")
                        {
                        templateString  = templateString  + `<td>
                            <select class="browser-default custom-select editableagg" disabled>
                              <option value="3" selected>Direct relation</option>
                            </select>
                          </td>`
                        }
                        else
                        {
                        templateString  = templateString  + `<td>
                            <select class="browser-default custom-select editableagg" disabled>

                            </select>
                          </td>`
                        }
                        if(data.table[d]["operation"] == "Add")
                        {
                        templateString  = templateString  + `<td>
                          <select class="browser-default custom-select opp" disabled>
                          <option value="Add" selected>Add</option>
                          </td>`
                        }
                        else if(data.table[d]["operation"] == "Subtract")
                        {
                        templateString  = templateString  + `<td>
                          <select class="browser-default custom-select opp" disabled>
                          <option value="Subtract" selected>Subtract</option>
                          </td>`
                        }
                        else if(data.table[d]["operation"] == "Multiply")
                        {
                        templateString  = templateString  + `<td>
                          <select class="browser-default custom-select opp" disabled>
                          <option value="Multiply" selected>Multiply</option>
                          </td>`
                        }
                        else if(data.table[d]["operation"] == "Divide")
                        {
                        templateString  = templateString  + `<td>
                          <select class="browser-default custom-select opp" disabled>
                          <option value="Divide" selected>Divide</option>
                          </td>`
                        }
                        else
                        {
                        templateString  = templateString  + `<td>
                          <select class="browser-default custom-select opp" disabled>
                          <option>${data.table[d]["operation"]}</option>
                          </td>`
                        }
                        templateString  = templateString  + `<td contenteditable="true">
                          <select class="form-control multipleform" multiple="multiple" style="width:8em;min-height:15px;height:40px;" disabled>`
                            for(var d1 in data.table[d]["data elements"])
                            {
                              templateString  = templateString  + `<option selected>${data.table[d]["data elements"][d1]}</option>`
                            }
                            templateString  = templateString  + `</select>
                        </td>
                          <td><span contenteditable="false" style="display: inline-block; min-width: 70px;" disabled>${data.table[d]["display"]}</span></td>
                          <td><span contenteditable="false" style="display: inline-block; min-width: 70px;" disabled>${data.table[d]["computed value"]}</span></td>
                          <td>
                            <span class="table_remove" id="removerow" disabled>
                              <a data-toggle="tooltip" title="Delete record" value="delete"><i name="actions" value="delete" class="far fa-trash-alt ihover javaSC thin-icontrash" style="font-size: 18px "></i></a>
                            </span>
                          </td>
                        </tr>`;

        $TABLE.find('table tbody').append(templateString);

                      }


              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            })
}


function scheduler_config_load(element_id) {
  $.ajax({
      url: window.location.pathname,
      data: {
        'element_id': element_id,
        'operation': 'scheduler_config_load'
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        $("#name_email").val(data.tab_header_name).trigger("change")
        $("#selectTask").val(data.response.action_type).trigger("select2:select")
        $("#selectTask").val(data.response.action_type).trigger("change")

        $("#from_email").val(data.response.config.from_email).trigger("change")
        $("#trigger_email_for").val(data.response.config.trigger_email_for).trigger("change")

        if(data.response.config.hasOwnProperty('to_config')){
          $("#approval_mailer_type_main").val(data.response.config.to_config.to_recipient_type).trigger("select2:select")
          $("#approval_mailer_type_main").val(data.response.config.to_config.to_recipient_type).trigger("change")

          if(data.response.config.to_config.to_recipient_type == "static"){
            $("#approval_email_list_main").empty()
            for(let i=0;i<data.response.config.to_config.to_recipient_list.length;i++){
              $("#approval_email_list_main").append(`<option value="${data.response.config.to_config.to_recipient_list[i]}">${data.response.config.to_config.to_recipient_list[i]}</option>`)
            }
            $("#approval_email_list_main").val(data.response.config.to_config.to_recipient_list).trigger("change")
          }

          if(data.response.config.to_config.to_recipient_type == "dynamic" || data.response.config.to_config.to_recipient_type == "dynamic_master_user"){
            $("#approval_dynamic_type_table_main").val(data.response.config.to_config.to_recipient_dynamic_table).trigger("select2:select")
            $("#approval_dynamic_type_table_main").val(data.response.config.to_config.to_recipient_dynamic_table).trigger("change")
            $("#approval_dynamic_email_list_main").attr("data-data",data.response.config.to_config.to_recipient_dynamic_column)
          }

          if(data.response.config.to_config.to_recipient_type == "static_user"){
            $("#selectApproverUsersTo").val(data.response.config.to_config.to_recipient_list).trigger("change")
          }

          if(data.response.config.to_config.to_recipient_type == "static_groups"){
            $("#select2multiple_to").val(data.response.config.to_config.to_recipient_list).trigger("change")
          }
        }

        if(data.response.config.hasOwnProperty('to_config_cc')){
          $("#approval_mailer_type_main_cc").val(data.response.config.to_config_cc.to_recipient_type).trigger("select2:select")
          $("#approval_mailer_type_main_cc").val(data.response.config.to_config_cc.to_recipient_type).trigger("change")

          if(data.response.config.to_config_cc.to_recipient_type == "static"){
            $("#approval_email_list_main_cc").empty()
            for(let i=0;i<data.response.config.to_config_cc.to_recipient_list.length;i++){
              $("#approval_email_list_main_cc").append(`<option value="${data.response.config.to_config_cc.to_recipient_list[i]}">${data.response.config.to_config_cc.to_recipient_list[i]}</option>`)
            }
            $("#approval_email_list_main_cc").val(data.response.config.to_config_cc.to_recipient_list).trigger("change")
          }

          if(data.response.config.to_config_cc.to_recipient_type == "dynamic" || data.response.config.to_config_cc.to_recipient_type == "dynamic_master_user"){
            $("#approval_dynamic_type_table_main_cc").val(data.response.config.to_config_cc.to_recipient_dynamic_table).trigger("select2:select")
            $("#approval_dynamic_type_table_main_cc").val(data.response.config.to_config_cc.to_recipient_dynamic_table).trigger("change")
            $("#approval_dynamic_email_list_main_cc").attr("data-data",data.response.config.to_config_cc.to_recipient_dynamic_column)
          }

          if(data.response.config.to_config_cc.to_recipient_type == "static_user"){
            $("#selectApproverUsersToCC").val(data.response.config.to_config_cc.to_recipient_list).trigger("change")
          }

          if(data.response.config.to_config_cc.to_recipient_type == "static_groups"){
            $("#select2multiple_toCC").val(data.response.config.to_config_cc.to_recipient_list).trigger("change")
          }
        }

        if(data.response.config.hasOwnProperty('to_config_bcc')){
          $("#approval_mailer_type_main_bcc").val(data.response.config.to_config_bcc.to_recipient_type).trigger("select2:select")
          $("#approval_mailer_type_main_bcc").val(data.response.config.to_config_bcc.to_recipient_type).trigger("change")

          if(data.response.config.to_config_bcc.to_recipient_type == "static"){
            $("#approval_email_list_main_bcc").empty()
            for(let i=0;i<data.response.config.to_config_bcc.to_recipient_list.length;i++){
              $("#approval_email_list_main_bcc").append(`<option value="${data.response.config.to_config_bcc.to_recipient_list[i]}">${data.response.config.to_config_bcc.to_recipient_list[i]}</option>`)
            }
            $("#approval_email_list_main_bcc").val(data.response.config.to_config_bcc.to_recipient_list).trigger("change")
          }

          if(data.response.config.to_config_bcc.to_recipient_type == "dynamic" || data.response.config.to_config_bcc.to_recipient_type == "dynamic_master_user"){
            $("#approval_dynamic_type_table_main_bcc").val(data.response.config.to_config_bcc.to_recipient_dynamic_table).trigger("select2:select")
            $("#approval_dynamic_type_table_main_bcc").val(data.response.config.to_config_bcc.to_recipient_dynamic_table).trigger("change")
            $("#approval_dynamic_email_list_main_bcc").attr("data-data",data.response.config.to_config_bcc.to_recipient_dynamic_column)
          }

          if(data.response.config.to_config_bcc.to_recipient_type == "static_user"){
            $("#selectApproverUsersToBCC").val(data.response.config.to_config_bcc.to_recipient_list).trigger("change")
          }

          if(data.response.config.to_config_bcc.to_recipient_type == "static_groups"){
            $("#select2multiple_toBCC").val(data.response.config.to_config_bcc.to_recipient_list).trigger("change")
          }
        }

        if(data.response.config.hasOwnProperty('condition_based_config')){
          $(".schedulerCondRow").empty()
          cond = data.response.config["condition_based_config"]
          for(let i=0;i<cond.length;i++){
            $("#selectSchedulerCondType").val(cond[i]["type"]).trigger("change")
            $(".schedule_master_btn").trigger("click")

            if(cond[i]["type"] == "group_based"){
              $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(1).find("select").val(cond[i]["condition"]).trigger("change")
              $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(2).find("select").val(cond[i]["input_value"]).trigger("change")
              $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(3).find("input").val(cond[i]["constraint"]).trigger("change")
              $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(4).find("input").val(cond[i]["rule_set"]).trigger("change")
            }else{
              $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(0).find("select").val(cond[i]["table_name"]).trigger("change")
              $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(1).find("select").attr("data-data",cond[i]["column"])
              $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(2).find("select").val(cond[i]["condition"]).trigger("change")
              $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(5).find("input").val(cond[i]["constraint"]).trigger("change")
              $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(6).find("input").val(cond[i]["rule_set"]).trigger("change")

              if(cond[i]["input_value"].constructor === Array){
                $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(4).find("select").empty()
                for(let jj=0;jj<cond[i]["input_value"].length;jj++){
                  $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(4).find("select").append(`<option value="${cond[i]["input_value"][jj]}">${cond[i]["input_value"][jj]}</option>`)
                }
                $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(4).find("select").val(cond[i]["input_value"]).trigger("change")
              }else{
                $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(3).find("select").empty()
                $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(3).find("select").append(`<option value="${cond[i]["input_value"]}">${cond[i]["input_value"]}</option>`)
                $(".schedulerCondRow").find(".schedule_row").last().find('div').eq(3).find("select").val(cond[i]["input_value"]).trigger("change")
              }
            }
          }
          $("#selectSchedulerCondType").val("").trigger("change")
        }

        if(data.response.config.hasOwnProperty('scheduler_config')){
          $("#schedulerEmailIntervalStartDate").val(data.response.config.scheduler_config.start_date).trigger("change")
          $("#schedulerEmailIntervalEndDate").val(data.response.config.scheduler_config.end_date).trigger("change")
          $("#selectSchedulerEmailIntervalPeriodicity").val(data.response.config.scheduler_config.duration).trigger("change")
          $("#selectSchedulerEmailIntervalTime").val(data.response.config.scheduler_config.time_interval).trigger("change")
          $("#selectSchedulerEmailFrequency").val(data.response.config.scheduler_config.frequency).trigger("change")
        }

        if(data.response.config.hasOwnProperty('recurrence_action')){
          $("#selectSchRecDecision").attr("data-data",data.response.config.recurrence_action.element_id)
          $("#selectSchRecDecision").attr('data-data2',JSON.stringify(data.response.config.recurrence_action.action))
        }

        setTimeout(function(){
          $("#to_email").select2({tags:true})
        },500)

        $("#subject_email").val(data.response.config.subject_email).trigger("change")
        CKEDITOR.instances['text_email'].setData(data.response.config.text_email)

        $("#subject_email_send_back").val(data.response.config.subject_email_send_back).trigger("change")
        CKEDITOR.instances['text_email'].setData(data.response.config.text_email_send_back)

        $("#subject_email_delegate").val(data.response.config.subject_email_delegate).trigger("change")
        CKEDITOR.instances['text_email'].setData(data.response.config.text_email_delegate)

        if (data.response.config.attachmentConfig) {
          $("#insert_attachment_main").attr('data-config',JSON.stringify(data.response.config.attachmentConfig))
          var attachmentConfig = data.response.config.attachmentConfig;
          $('#selectAttachmentType').val(attachmentConfig.attachment_type).trigger('select2:select');
          $('#selectAttachmentType').val(attachmentConfig.attachment_type).trigger('change');
          $('#addUserUploadedFilesAsAttachment').val(attachmentConfig.addUploadedFilesAsAttachment).trigger('select2:select');
          $('#addUserUploadedFilesAsAttachment').val(attachmentConfig.addUploadedFilesAsAttachment).trigger('change');
          if (attachmentConfig.attachment_type == 'dynamic') {
            $('#selectDynamicAttachment').val(attachmentConfig.parameter).trigger('select2:select');
            $('#selectDynamicAttachment').val(attachmentConfig.parameter).trigger('change');
            if (attachmentConfig.parameter == "pdf" && attachmentConfig.additional_config) {
              if (attachmentConfig.additional_config.logoConfig) {
                $('#dynamicAttachmentPDFAddLogo').val(attachmentConfig.additional_config.logoConfig.add_logo).trigger('select2:select');
                $('#dynamicAttachmentPDFAddLogo').val(attachmentConfig.additional_config.logoConfig.add_logo).trigger('change');
                $('#dynamicAttachmentPDFLogoPlacement').val(attachmentConfig.additional_config.logoConfig.placement).trigger('select2:select');
                $('#dynamicAttachmentPDFLogoPlacement').val(attachmentConfig.additional_config.logoConfig.placement).trigger('change');
              }
              if (attachmentConfig.additional_config.hasOwnProperty("dropcolumns")) {
                if(attachmentConfig.additional_config.dropcolumns){
                  $("#dynamicAttachmentPDFDataDropColumns").attr("data-data",JSON.stringify(attachmentConfig.additional_config.dropcolumns))
                }
              }
              if (attachmentConfig.additional_config.hasOwnProperty("droptable")) {
                if(attachmentConfig.additional_config.droptable){
                  $("#dynamicAttachmentPDFDataDropTable").val(attachmentConfig.additional_config.droptable).trigger("change")
                  $("#dynamicAttachmentPDFDataDropTable").val(attachmentConfig.additional_config.droptable).trigger("select2:select")
                }
              }
              if (attachmentConfig.additional_config.hasOwnProperty("transDataCols")) {
                if(attachmentConfig.additional_config.transDataCols){
                  $("#dynamicAttachmentPDFTransData").val(attachmentConfig.additional_config.transDataCols).trigger("change")
                }
              }

              if (attachmentConfig.additional_config.hasOwnProperty("layoutOption")) {
                if(attachmentConfig.additional_config.layoutOption){
                  $("#dynamicAttachmentPDFDataLayoutOption").val(attachmentConfig.additional_config.layoutOption).trigger("change")
                }
              }

              if (attachmentConfig.additional_config.styleConfig) {
                $('#dynamicAttachmentPDFCustomizeStyle').val(attachmentConfig.additional_config.styleConfig.customize_style).trigger('select2:select');
                $('#dynamicAttachmentPDFCustomizeStyle').val(attachmentConfig.additional_config.styleConfig.customize_style).trigger('change');
                $('#dynamicAttachmentPDFHeaderBGColor').val(attachmentConfig.additional_config.styleConfig.header_bg_color).trigger('change');
                $('#dynamicAttachmentPDFHeaderTextColor').val(attachmentConfig.additional_config.styleConfig.header_text_color).trigger('change');
                $('#dynamicAttachmentPDFCellBGColor').val(attachmentConfig.additional_config.styleConfig.cell_bg_color).trigger('change');
                $('#dynamicAttachmentPDFCellTextColor').val(attachmentConfig.additional_config.styleConfig.cell_text_color).trigger('change');
                $('#dynamicAttachmentPDFTableRowHeight').val(attachmentConfig.additional_config.styleConfig.row_height).trigger('change');
                $('#dynamicAttachmentPDFTableColumnWidth').val(attachmentConfig.additional_config.styleConfig.customize_column_width).trigger('select2:select');
                $('#dynamicAttachmentPDFTableColumnWidth').val(attachmentConfig.additional_config.styleConfig.customize_column_width).trigger('change');
                if (attachmentConfig.additional_config.styleConfig.customize_column_width == "manual") {
                  $('#dynamicAttachmentPDFTableColumnStaticWidth').val(attachmentConfig.additional_config.styleConfig.static_column_width).trigger('change');
                  if (attachmentConfig.additional_config.styleConfig.custom_column_field_level_config) {
                    $('#dynamicAttachmentPDFTableColumnWidthTable').val(attachmentConfig.additional_config.styleConfig.custom_column_field_level_config.table).trigger('select2:select');
                    $('#dynamicAttachmentPDFTableColumnWidthTable').val(attachmentConfig.additional_config.styleConfig.custom_column_field_level_config.table).trigger('change');
                    $('#dynamicAttachmentColumnWidthFieldContainer').attr('data-config', JSON.stringify(attachmentConfig.additional_config.styleConfig.custom_column_field_level_config.field_config));
                  }
                }
              }
            }

              if (attachmentConfig.additional_config.hasOwnProperty("scheduler_data_config")) {

                $("#dynamicAttachmentPDFDataDropTableFilter").val(attachmentConfig.additional_config.scheduler_data_config.scheduler_table).trigger("change")
                $("#dynamicAttachmentPDFDataDropTableFilter").val(attachmentConfig.additional_config.scheduler_data_config.scheduler_table).trigger("select2:select")

                $("#dynamicAttachmentPDFDataDropColumnsFilter").attr("data-data",JSON.stringify(attachmentConfig.additional_config.scheduler_data_config.scheduler_columns))

                $("#dynamicAttachmentPDFDataDropTableFilterUnderlying").val(attachmentConfig.additional_config.scheduler_data_config.scheduler_table_underlying).trigger("change")
                $("#dynamicAttachmentPDFDataDropTableFilterUnderlying").val(attachmentConfig.additional_config.scheduler_data_config.scheduler_table_underlying).trigger("select2:select")

                $("#dynamicAttachmentPDFDataDropColumnsFilterUnderlying").attr("data-data",JSON.stringify(attachmentConfig.additional_config.scheduler_data_config.scheduler_columns_underlying))

                $("#saveBasicfilter_schedule").attr("data-basicfilter-config", JSON.stringify(attachmentConfig.additional_config.scheduler_data_config.scheduler_filter))
                $("#saveBasicfilter_schedule_send_back").attr("data-basicfilter-config", JSON.stringify(attachmentConfig.additional_config.scheduler_data_config.scheduler_filter))
                $("#saveBasicfilter_schedule_delegate").attr("data-basicfilter-config", JSON.stringify(attachmentConfig.additional_config.scheduler_data_config.scheduler_filter))
              }
          }
        }

      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }

    })
  }

function ocr_config_load(element_id) {
  $.ajax({
      url: window.location.pathname,
      data: {
        'element_id': element_id,
        'operation': 'ocr_config_load'
      },
      type: "POST",
      dataType: "json",
      success: function (data) {

        $('.listoficons').each(function () {
          if ($(this).attr('class').replace(' listoficons', '').trim() == data.icon.trim()) {
            $(this).css("border", "1px solid rgb(184, 134, 11)")
            return
          }
          else {
            $(this).css("border", "0px none rgb(184, 134, 11)")
          }
        })
        $('#tabHeaderOcr').val(data.tab_header_name);
        $('#tablenameocr').attr("data-reload","yes")
        $('#tablenameocr').attr("data-reloaddata",JSON.stringify(data))
        $('#tablenameocr').val(data.table_name).trigger("change")
        $('#tablenameocr').val(data.table_name).trigger("select2:select")

        $('#ocrperc').val(data.percentval).trigger("change")
        $('#selectOperationocr').val(data.operationtype).trigger("change")
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }

    })
  }


  function pivotReport_config_load(element_id) {
  $.ajax({
      url: window.location.pathname,
      data: {
        'element_id': element_id,
        'operation': 'pivotReport_config_load'
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        $('.listoficons').each(function () {
          if ($(this).attr('class').replace(' listoficons', '').trim() == data.icon.trim()) {
            $(this).css("border", "1px solid rgb(184, 134, 11)")
            return
          }
          else {
            $(this).css("border", "0px none rgb(184, 134, 11)")
          }
        })
        $('#tabHeaderPivotReport').val(data['tab_header_name']).trigger('change')
							$('#pivot_report_name').val(data['tab_data']['report_name']).trigger('change')
							$('#pivot_category_name').val(data['tab_data']['category_name']).trigger('change')
      },
      error: function () {
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});
      }

    })
  }



$("#edit-btn").click(function(){
  if($('#example11 tbody tr')[0].innerText != "No data available in table")
    {
    var $TABLE = $('#table');
    var $rows = $TABLE.find('tr:not(:hidden)');
    var headers = [];
    var data = [];
    var data1 = [];
    // Get the headers (add special header logic here)
    $($rows.shift()).find('th:not(:empty)').each(function () {

      headers.push($(this).text().toLowerCase());

    });
      $rows.each(function (index,element) {
      if(index != 0){
      var $td = $(this).find('td');
      var h = {};
      var h1 = {};
      var dropdown_list = ["field data type", "nullable?", "computed value", "auto now?", "editable?","aggregation","operation","data elements"]
      var valid_field_dict = {
        "AutoField": ["field name", "field data type", "field header", "nullable?"],
        "CharField": ["field name", "field data type", "maximum length*", "field header", "choices", "nullable?"],
        "BooleanField": ["field name", "field data type", "field header", "nullable?"],
        "FileField": ["field name", "field data type", "upload path", "nullable?", "field header"],
        "IntegerField": ["field name", "field data type", "field header", "nullable?", "default"],
        "BigIntegerField": ["field name", "field data type", "field header", "nullable?", "default"],
        "DateField": ["field name", "field data type", "field header", "nullable?", "auto now?", "editable?"],
        "TimeField": ["field name", "field data type", "auto now?", "editable?", "nullable?", "field header"],
        "DateTimeField": ["field name", "field data type", "auto now?", "editable?", "nullable?", "field header"],
        "TextField": ["field name", "field data type", "field header", "nullable?"],
        "FloatField": ["field name", "field data type", "field header", "nullable?",],
        "ForeignKey" : ["field name", "field data type","field header", "parent table", "nullable?", "default"]
      }
      var data_type = $td.eq(1).find('option:selected').text();
      var data_type = data_type.split(" ")[0]

      headers.forEach((header, i) => {
        if (valid_field_dict[data_type].includes(header)) {
          if (dropdown_list.includes(header)) {
            h1[header] = $td.eq(i).find('option:selected').text();
          } else {
            h1[header] = $td.eq(i).text();
          }
        }
        if(dropdown_list.includes(header)){
          if($td.eq(i).find('option:selected').length>1){
            selectedValues=[]
            for(var j=0;j<$td.eq(i).find('option:selected').length;j++){
              selectedValues.push($td.eq(i).find('option:selected')[j].innerText)
            }
            if(header == "field data type")
            {
              if(selectedValues == "AutoField (Primary key)"){
                h[header]= "AutoField"
              }
              else if(selectedValues == "CharField (Text,numbers,special characters,etc.)"){
                h[header]= "CharField"
              }
              else if(selectedValues == "FloatField (Integer or decimal numbers)"){
                h[header]= "FloatField"
              }
              else if(selectedValues == "IntegerField (Integer numbers)"){
                h[header]= "IntegerField"
              }
              else if(selectedValues2 == "IntegerField (Integer numbers)"){
                h[header]= "IntegerField"
              }
              else if(selectedValues == "BigIntegerField (Big Integer numbers)"){
                h[header]= "BigIntegerField"
              }
              else if(selectedValues2 == "BigIntegerField (Big Integer numbers)"){
                h[header]= "BigIntegerField"
              }
              else if(selectedValues == "TextField (Large text)"){
                h[header]= "TextField"
              }
              else if(selectedValues == "BooleanField (Yes or No,True or False,etc."){
                h[header]= "BooleanField"
              }
              else if(selectedValues == "FileField (File/Document upload)"){
                h[header]= "FieldField"
              }
              else if(selectedValues == "ImageField (image upload)"){
                h[header]= "ImageField"
              }
              else if(selectedValues == "DateField (Date)"){
                h[header]= "DateField"
              }
              else if(selectedValues == "DateTimeField (Date and Time)"){
                h[header]= "DateTimeField"
              }
              else if(selectedValues == "TimeField (Time)"){
                h[header]= "TimeField"
              }
              else{
                h[header]=selectedValues
              }
            }
            else{
                h[header]=selectedValues
              }

          }
          else{
            var selectedValues1 = $td.eq(i).find('option:selected').text();
             if(header == "field data type")
            {
              if(selectedValues1 == "AutoField (Primary key)"){
                h[header]= "AutoField"
              }
              else if(selectedValues1 == "CharField (Text,numbers,special characters,etc.)"){
                h[header]= "CharField"
              }
              else if(selectedValues1 == "FloatField (Integer or decimal numbers)"){
                h[header]= "FloatField"
              }
              else if(selectedValues1 == "IntegerField (Integer numbers)"){
                h[header]= "IntegerField"
              }
              else if(selectedValues2 == "IntegerField (Integer numbers)"){
                h[header]= "IntegerField"
              }
              else if(selectedValues1 == "BigIntegerField (Big Integer numbers)"){
                h[header]= "BigIntegerField"
              }
              else if(selectedValues2 == "BigIntegerField (Big Integer numbers)"){
                h[header]= "BigIntegerField"
              }
              else if(selectedValues1 == "TextField (Large text)"){
                h[header]= "TextField"
              }
              else if(selectedValues1 == "BooleanField (Yes or No,True or False,etc."){
                h[header]= "BooleanField"
              }
              else if(selectedValues1 == "FileField (File/Document upload)"){
                h[header]= "FieldField"
              }
              else if(selectedValues1 == "ImageField (image upload)"){
                h[header]= "ImageField"
              }
              else if(selectedValues1 == "DateField (Date)"){
                h[header]= "DateField"
              }
              else if(selectedValues1 == "DateTimeField (Date and Time)"){
                h[header]= "DateTimeField"
              }
              else if(selectedValues1 == "TimeField (Time)"){
                h[header]= "TimeField"
              }
              else{
                h[header]=selectedValues1
              }
            }
            else{
                h[header]=selectedValues1
              }
          }
        }
        else{
          var selectedValues2 = $td.eq(i).text();
          if(header == "field data type")
            {
              if(selectedValues2 == "AutoField (Primary key)"){
                h[header]= "AutoField"
              }
              else if(selectedValues2 == "CharField (Text,numbers,special characters,etc.)"){
                h[header]= "CharField"
              }
              else if(selectedValues2 == "FloatField (Integer or decimal numbers)"){
                h[header]= "FloatField"
              }
              else if(selectedValues2 == "IntegerField (Integer numbers)"){
                h[header]= "IntegerField"
              }
              else if(selectedValues2 == "BigIntegerField (Big Integer numbers)"){
                h[header]= "BigIntegerField"
              }
              else if(selectedValues2 == "TextField (Large text)"){
                h[header]= "TextField"
              }
              else if(selectedValues2 == "BooleanField (Yes or No,True or False,etc."){
                h[header]= "BooleanField"
              }
              else if(selectedValues2 == "FileField (File/Document upload)"){
                h[header]= "FieldField"
              }
              else if(selectedValues2 == "ImageField (image upload)"){
                h[header]= "ImageField"
              }
              else if(selectedValues2 == "DateField (Date)"){
                h[header]= "DateField"
              }
              else if(selectedValues2 == "DateTimeField (Date and Time)"){
                h[header]= "DateTimeField"
              }
              else if(selectedValues2 == "TimeField (Time)"){
                h[header]= "TimeField"
              }
              else{
                h[header]=selectedValues2
              }
            }
            else{
                h[header]=selectedValues2
              }
        }
      });
      data1.push(h1);
      data.push(h);
      }
    })
    $EXPORT.text(JSON.stringify(data1));
    var table_name = $('#tname').val();
    $EXPORT.text(JSON.stringify(table_name));
    reportConfigJson["Report_Table_Name"]=$('#tname').val()
    reportConfigJson["Report_Base_Table_Name"]= base_table;
    reportConfigJson["Report_base_column"]=col_name;
    reportConfigJson["Report_Table_Structure"]=data




$.ajax({
      url: window.location.pathname,
       data: { 'tablename': tab_name, 'fieldDict': JSON.stringify(data),'fieldDict1': JSON.stringify(old_table), 'operation': 'addelement1' },
       type: "POST",
       dataType: "json",
       success:function(data) {
        Swal.fire({icon: 'success',text: 'Table edited succesfully!'});
         $('#edit-btn').prop('disabled', true);
       },
       error: function () {
         Swal.fire({icon: 'error',text: 'Error! Failure in editing the Table. Please check the edits made and try again.'});
       }
     })

    }
})

function flowConfigLoad(element_id){
  var source_id = $("#configureFlow").find(".modal-footer").find('.save').attr('data-source_id');
  var destination_id = $("#configureFlow").find(".modal-footer").find('.save').attr('data-dest_id');
  if (source_id.startsWith('parallelogram') && destination_id.startsWith('parallelogram')) {
    $('#computationModelFlowInputCard').css('display', 'block');
  } else {
    $('#computationModelFlowInputCard').css('display', 'none');
  };

  $.ajax({
      url: window.location.pathname,
      data: {
        'operation': 'fetchSubprocess',
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        $('#nextElement').attr("data-element",JSON.stringify(data.element_dic))
        $('#nextElement').empty();
        $('#nextElement').append(`<option value="">Default</option>`);
        $('#nextElement').append(`<option value="Approval">Approval</option>`);
        for(let [key,value] of Object.entries(data.subprocess) ) {
          $('#nextElement').append(`<option value="${key}">${value}</option>`);
        }
        $.ajax({
          url: window.location.pathname,
          data: {
            'operation': 'getFlowConfig',
            'element_id':element_id,
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            if(data.data != "") {
              data = JSON.parse(data.data);
              if(data.dependency){
                $("#configureFlow").find("#dependencyCheck").find("#select2").prop('checked',true)
              } else {
                $("#configureFlow").find("#dependencyCheck").find("#select2").prop('checked',false)
              }
              if(data.nextElement){
                $("#configureFlow").find("#dependencyCheck").find("#nextElement").val("").trigger("change")
                let dic_ = data.nextElement
                $("#configureFlow").find("#dependencyCheck").find("#nextElement").val(dic_["subprocess"]).trigger("change")
                $("#configureFlow").find("#dependencyCheck").find("#nextElementTab").val(dic_["element_id"]).trigger("change")
              } else {
                $("#configureFlow").find("#dependencyCheck").find("#nextElement").val("").trigger("change")
              }
              $("#configureFlow").find("#customValidation").prop('checked',true)
              $("#configureFlow").find("#dataValidation").prop('checked',true)
              if (data.hasOwnProperty("userValidation")){
                $("#configureFlow").find("#userValidation").prop('checked',data.userValidation)
                if(data.userValidation){
                  $(".flowUserValidation").css("display","flex");
                  $(".flowTable").attr("data-reload","yes")
                  $(".flowTable").attr("data-reloaddata",JSON.stringify(data))
                  $(".flowTable").val(data.condition.table).trigger("change");
                }
                $("#configureFlow").find("#userValidationTo").prop('checked',data.userValidationTo)
                if(data.userValidationTo){
                  $(".flowUserValidationTo").css("display","flex");
                  $(".flowTableTo").attr("data-reload","yes")
                  $(".flowTableTo").attr("data-reloaddata",JSON.stringify(data))
                  $(".flowTableTo").val(data.conditionTo.table).trigger("change");
                }
              }
              if (data.hasOwnProperty("emailValidation")){
                $("#configureFlow").find("#emailValidation").prop('checked',data.emailValidation)
              }
              if (data.hasOwnProperty("autoRun")){
                $("#configureFlow").find("#autoRun").prop('checked',data.autoRun)
              }
              if (data.hasOwnProperty("elementHide")){
                $("#configureFlow").find("#elementHide").prop('checked',data.elementHide)
              }
              if (data.hasOwnProperty("userValidationCC")){
                $("#configureFlow").find("#emailValidation").prop('checked',data.userValidationCC)
                if(data.userValidationCC){
                  $("#EBDisplayButtonID").attr("data-tablelist",JSON.stringify(data.conditionCC.config.column))
                  $("#EBDisplayButtonID").attr("data-tablepc",data.conditionCC.config.table)
                  $("#EBDisplayButtonID").attr("data-config",JSON.stringify(data.conditionCC.config.config))
                  $("#EBDisplayButtonID").attr("data-modelnamepc",data.conditionCC.config.model_name)
                  $(".computationCondition1").css("display","block")
                  let tablecc = data.conditionCC.config.table
                  $(".flowTableCC").empty()
                  $(".flowTableCC").append(`<option value="${tablecc}">${tablecc}</option>`)
                  $(".flowTableCC").val(tablecc).trigger("change")
                  let columnCC = data.conditionCC.config.column
                  flowColumnCC = columnCC
                  $(".flowColumnCC").empty()
                  $(".flowColumnCC").append(`<option value="">---</option>`)
                  for(let i = 0; i < columnCC.length; i++){
                    $(".flowColumnCC").append(`<option value="${columnCC[i]}">${columnCC[i]}</option>`)
                  }
                  $(".flowValueCC").select2({"tags":true})
                  $("#userValidationCC").prop("checked",data.userValidationCC)
                  if(data.userValidationCC){
                    $(".flowUserValidationCC").css("display","flex")
                  } else {
                    $(".flowUserValidationCC").css("display","none")
                  }
                  userValidationCCLoad(data)
                } else {
                  $(".computationCondition1").css("display","none")
                }
              } else {
                $(".computationCondition1").css("display","none")
              }
              if (data.hasOwnProperty("computationInputConfig")){
                $('#computationModelFlowInputCard > .card-body').attr('data-config',JSON.stringify(data.computationInputConfig));
              } else {
                $('#computationModelFlowInputCard > .card-body').attr('data-config','{}');
              }
            } else {
              $("#configureFlow").find("#dependencyCheck").find("#select2").prop('checked',false)
              $("#configureFlow").find("#dependencyCheck").find("#nextElement").val("").trigger("change")
            }
            eqBuilder("computationFlow", element_id, "modelelementid")
          },
          error: function () {Swal.fire({icon: 'error',text: 'Error! Please try again.'});}
        })
      },
      error: function () {Swal.fire({icon: 'error',text: 'Error! Please try again.'});}
    })
}

function fetchComputationInputFlowData() {
  var source_id = $("#configureFlow").find(".modal-footer").find('.save').attr('data-source_id');
  var destination_id = $("#configureFlow").find(".modal-footer").find('.save').attr('data-dest_id');
  var data = $('#computationModelFlowInputCard > .card-body').attr('data-comp-data');
  var existingConfig = $('#computationModelFlowInputCard > .card-body').attr('data-config');
  if (data == '{}') {
    $.ajax({
      url: window.location.pathname,
      data: {
        'operation': 'fetchComputationModelDetails',
        'source_id': source_id,
        'destination_id': destination_id,
      },
      type: "POST",
      dataType: "json",
      success: function (data) {

        $('#computationModelFlowInputCard > .card-body').attr('data-comp-data', JSON.stringify(data));

        $("#compModelFLowGVarMapContainer").empty();
        let destinationGlobalVars = data.destination_global_variables;
        let sourceGlobalVars = data.source_global_variables;
        let destinationModelImports = data.destination_model_imports;

        if (destinationModelImports) {
          $('#selectComputationInput').empty();
          $('#selectComputationInput').append('<option value="">---</option>');
          for (var [key, value] of Object.entries(destinationModelImports)) {
            $('#selectComputationInput').append(`<option value="${key}">${value}</option>`)
          }
        }

        let sourceGVarString = `<select class="select2 form-control currentModelGVar" required>`;
        sourceGVarString = sourceGVarString + `<option value="">Select global variable</option>`
        for (const [key, value] of Object.entries(sourceGlobalVars)) {
            let gVarName = sourceGlobalVars[i];
            sourceGVarString = sourceGVarString + `<option value="${key}" data-dataType="${value}">${key}</option>`
        }
        sourceGVarString = sourceGVarString + "</select>";


        for (const [key, value] of Object.entries(destinationGlobalVars)) {
          let rowString = `<div class="row" style="margin:auto; margin-bottom:1rem;">
            <div class="col-5" style="margin-top:auto; margin-bottom:auto;">
                <strong class="selectedModelGVarName" data-dataType="${value}">${key}</strong>
            </div>
            <div class="col-7">
                ${sourceGVarString}
            </div>
          </div>
          `
          $("#compModelFLowGVarMapContainer").append(rowString);
          $("#compModelFLowGVarMapContainer").find('.row').eq(-1).find('select option').each(function(){
            if ($(this).val() !== "") {
              if (value == 'dropdown-multiple') {
                if ($(this).attr('data-dataType') !== 'dropdown-multiple') {
                  $(this).remove();
                }
              } else if (value == 'dropdown') {
                if ($(this).attr('data-dataType') == 'dropdown-multiple' || $(this).attr('data-dataType') == 'file') {
                  $(this).remove();
                }
              } else if (value == 'file') {
                if ($(this).attr('data-dataType') !== 'file') {
                  $(this).remove();
                }
              } else {
                if ($(this).attr('data-dataType') == 'dropdown-multiple' || $(this).attr('data-dataType') == 'file') {
                  $(this).remove();
                }
              }
            }
          });
          $("#compModelFLowGVarMapContainer").find('.row').eq(-1).find('.select2').select2();
        };

        if (existingConfig && existingConfig != '{}') {
          existingConfig = JSON.parse(existingConfig);
          var gVarMapConfig = existingConfig['globalVariableMapper'];
          var passPrecedingOutputTo = existingConfig['passPrecedingOutputTo'];
          if (passPrecedingOutputTo) {
            $('#selectComputationInput').val(passPrecedingOutputTo).trigger('change');
          } else {
            $('#selectComputationInput').val('').trigger('change');
          };

          // Reload global variable mapping config
          if (gVarMapConfig) {
            $("#compModelFLowGVarMapContainer").find('.row').each(function(){
              let destinationVarName = $(this).find('.col-5').find('strong').text();
              if (Object.keys(gVarMapConfig).includes(destinationVarName)) {
                $(this).find('.col-7').find('.currentModelGVar').val(gVarMapConfig[destinationVarName]).trigger('change');
              }
            });
          };
        };

      },
      error: ()=>{
        Swal.fire({icon: 'error',text: 'Error! Failure in fetching model details. Please try again.'});
      }
    });
  } else {
    if (existingConfig && existingConfig != '{}') {
      existingConfig = JSON.parse(existingConfig);
      var gVarMapConfig = existingConfig['globalVariableMapper'];
      var passPrecedingOutputTo = existingConfig['passPrecedingOutputTo'];
      if (passPrecedingOutputTo) {
        $('#selectComputationInput').val(passPrecedingOutputTo).trigger('change');
      } else {
        $('#selectComputationInput').val('').trigger('change');
      };

      // Reload global variable mapping config
      if (gVarMapConfig) {
        $("#compModelFLowGVarMapContainer").find('.row').each(function(){
          let destinationVarName = $(this).find('.col-5').find('strong').text();
          if (Object.keys(gVarMapConfig).includes(destinationVarName)) {
            $(this).find('.col-7').find('.currentModelGVar').val(gVarMapConfig[destinationVarName]).trigger('change');
          }
        });
      };
    };
  };
};

function userValidationLoad(data) {
  for(let i = 0; i < data.condition.condition.length; i++){
    if (i != 0){
      $(".flowBody").append(indFlowHtml());
      $(".indFlow").eq(-1).find(".flowColumn").empty();
      $(".indFlow").eq(-1).find(".flowColumn").append(`<option value="" disabled selected>Select column</option>`);
      for(j = 0; j < flowColumn.length; j++){
        $(".indFlow").eq(-1).find(".flowColumn").append(`<option value="${flowColumn[j]["name"]}">${flowColumn[j]["verbose"]}`);
      }
    }
    $(".indFlow").eq(-1).find("select").select2();
    $(".indFlow").eq(-1).find(".flowColumn").val(data.condition.condition[i]["column_name"]).trigger("change")
    $(".indFlow").eq(-1).find(".flowCond").val(data.condition.condition[i]["condition"]).trigger("change")
    let check = 0
    $(".indFlow").eq(-1).find(".flowValue").each(function() {
      if($(this).attr("value") == data.condition.condition[i]["input_value"]) {
        check = 1;
      }
    })
    if(check == 0) {
      $(".indFlow").eq(-1).find(".flowValue").append(`<option value="${data.condition.condition[i]["input_value"]}">${data.condition.condition[i]["input_value"]}</option>`);
    }
    $(".indFlow").eq(-1).find(".flowValue").val(data.condition.condition[i]["input_value"]).trigger("change");
    $(".indFlow").eq(-1).find(".flowValue").select2({"tags":true});
  }
}
function userValidationCCLoad(data) {
  for(let i = 0; i < data.conditionCC.condition.length; i++){
    if (i != 0){
      $(".flowBodyCC").append(indFlowHtmlCC());
      $(".indFlowCC").eq(-1).find(".flowColumnCC").empty();
      $(".indFlowCC").eq(-1).find(".flowColumnCC").append(`<option value="" disabled selected>Select column</option>`);
      for(j = 0; j < flowColumnCC.length; j++){
        $(".indFlowCC").eq(-1).find(".flowColumnCC").append(`<option value="${flowColumnCC[j]}">${flowColumnCC[j]}`);
      }
    }
    $(".indFlowCC").eq(-1).find("select").select2();
    $(".indFlowCC").eq(-1).find(".flowColumnCC").val(data.conditionCC.condition[i]["column_name"]).trigger("change")
    $(".indFlowCC").eq(-1).find(".flowCondCC").val(data.conditionCC.condition[i]["condition"]).trigger("change")
    let check = 0
    if(check == 0) {
      $(".indFlowCC").eq(-1).find(".flowValueCC").append(`<option value="${data.conditionCC.condition[i]["input_value"]}">${data.conditionCC.condition[i]["input_value"]}</option>`);
    }
    $(".indFlowCC").eq(-1).find(".flowValueCC").val(data.conditionCC.condition[i]["input_value"]).trigger("change");
    $(".indFlowCC").eq(-1).find(".flowValueCC").select2({"tags":true});
  }
}

</script>
<!-- Element configuration reload ends-->
<!-- Save flow config -->
<script>
  function saveFlowConfig() {
    e_id = $(this).attr('data-id');
    data = {}
    data["dependency"] = $("#configureFlow").find("#dependencyCheck").find("#select2").prop('checked');
    data["parent"] = $(this).attr('data-source_id');
    data["autoRun"] = $("#autoRun").prop("checked");
    data["elementHide"] = $("#elementHide").prop("checked")
    data["child"] = $(this).attr('data-dest_id');
    data["nextElement"] = {"subprocess":$("#configureFlow").find("#dependencyCheck").find("#nextElement").val(),
      "element_id": $("#configureFlow").find("#dependencyCheck").find("#nextElementTab").val()
    }
    data["dataValidation"] = $("#dataValidation").prop("checked");
    data["customValidation"] = $("#customValidation").prop("checked");
    data["userValidation"] = $("#userValidation").prop("checked");
    let condition = {"table":$(".flowTable").val(),"condition":[]}
    if (data["userValidation"]) {
      let ind = 0
      let dic = {}
      $(".indFlow").each(function() {
        let type = ""
        for(let i = 0; i < flowColumn.length; i++) {
          if($(this).find(".flowColumn").val() == flowColumn[i]["name"]) {
            type = flowColumn[i]["datatype"]
            break
          }
        }
        dic = {
            "column_name": $(this).find(".flowColumn").val(),
            "condition": $(this).find(".flowCond").val(),
            "input_value": $(this).find(".flowValue").val(),
            "and_or": "and",
            "type":type,
        }
        condition["condition"].push(dic)
      })
      condition["condition"][condition["condition"].length - 1]["and_or"] = ""
    }
    data["condition"] = condition;
    data["userValidationTo"] = $("#userValidationTo").prop("checked");
    condition = {"table":$(".flowTableTo").val(),"condition":[]}
    if (data["userValidationTo"]) {
      let ind = 0
      let dic = {}
      $(".indFlowTo").each(function() {
        let type = ""
        for(let i = 0; i < flowColumnTo.length; i++) {
          if($(this).find(".flowColumnTo").val() == flowColumnTo[i]["name"]) {
            type = flowColumnTo[i]["datatype"]
            break
          }
        }
        dic = {
            "column_name": $(this).find(".flowColumnTo").val(),
            "condition": $(this).find(".flowCondTo").val(),
            "input_value": $(this).find(".flowValueTo").val(),
            "and_or": "and",
            "type":type,
        }
        condition["condition"].push(dic)
      })
      condition["condition"][condition["condition"].length - 1]["and_or"] = ""
    }

    data["conditionTo"] = condition;
    condition = []
    data["conditionCC"] = {"table":$(".flowTableCC").val(),"condition":[],"config":{}};
    data["userValidationCC"] = $("#userValidationCC").prop("checked");
    if($("#userValidationCC").prop("checked")) {
      data["userValidationCC"] = $("#userValidationCC").prop("checked");
      data["conditionCC"]["config"] = {
        "table": $("#EBDisplayButtonID").attr("data-tablepc"),
        "column": JSON.parse($("#EBDisplayButtonID").attr("data-tablelist")),
        "model_name": $("#EBDisplayButtonID").attr("data-name"),
        "config": JSON.parse($("#EBDisplayButtonID").attr("data-config"))
      }
      if (data["userValidationCC"]) {
        let ind = 0
        let dic = {}
        $(".indFlowCC").each(function() {
          let type = ""
          for(let i = 0; i < flowColumnTo.length; i++) {
            if($(this).find(".flowColumnCC").val() == flowColumnTo[i]["name"]) {
              type = flowColumnTo[i]["datatype"]
              break
            }
          }
          dic = {
              "column_name": $(this).find(".flowColumnCC").val(),
              "condition": $(this).find(".flowCondCC").val(),
              "input_value": $(this).find(".flowValueCC").val(),
              "and_or": "and",
              "type":type,
          }
          condition.push(dic)
        })
        condition[condition.length - 1]["and_or"] = ""
      }
      data["conditionCC"]["condition"] = condition;
    }

    data['computationInputConfig'] = {};
    if ($(this).attr('data-source_id').startsWith('parallelogram') && $(this).attr('data-dest_id').startsWith('parallelogram')) {
      data['computationInputConfig']['passPrecedingOutputTo'] = $('#selectComputationInput').val();
      var globalVarMapper = {};
      $("#compModelFLowGVarMapContainer").find('.row').each(function(){
        let destinationVarName = $(this).find('.col-5').find('strong').text();
        let mappedGVarName = $(this).find('.col-7').find('.currentModelGVar').val();
        globalVarMapper[destinationVarName] = mappedGVarName;
      });
      data['computationInputConfig']['globalVariableMapper'] = globalVarMapper;
    };
    $.ajax({
      url: window.location.pathname,
      data: {
        'operation': 'saveFlowConfig',
        'element_id':e_id,
        'data':JSON.stringify(data),
        'process_code':$('#selectProcess').val(),
        'subprocess_name':$('#subprocess').val()
      },
      type: "POST",
      dataType: "json",
      success: function (data) {

        if(data.hasOwnProperty('data')) {
          Swal.fire({icon: 'info',text: data.data});
        } else {
          Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
        }
      },
      error: function () {Swal.fire({icon: 'error',text: 'Error! Failure in saving the configuration. Please check and try again.'});}
    })
  }

</script>
<!-- ------------------------------------ -->
<script>
      ctoken = document.getElementById('form1').elements[0].value
      var images = [];

      var editor_grapejs = grapesjs.init({
        avoidInlineStyle: 1,
        height: "100%",
        container: "#gjs",
        allowScripts: 1,
        fromElement: 1,
        showOffsets: 1,
        assetManager: {
          embedAsBase64: 1,
          assets: images,
        },
        parser: {
          // options
        },

        selectorManager: { componentFirst: true },
        styleManager: { clearProperties: 1 },
        panels: {
        },
        canvas: {
          styles:[
            '/static/css/Base_theme/CSS_min.css',
            '/static/css/Acies_theme/Stylesheet1.css',
          ]
        },
        plugins: [
          'gjs-blocks-basic',
          'grapesjs-plugin-forms',
          'grapesjs-component-countdown',
          'grapesjs-plugin-export',
          'grapesjs-tabs',
          'grapesjs-custom-code',
          'grapesjs-touch',
          'grapesjs-parser-postcss',
          'grapesjs-tooltip',
          'grapesjs-tui-image-editor',
          'grapesjs-typed',
          'grapesjs-style-bg',
          'grapesjs-preset-webpage',
        ],
        pluginsOpts: {
          "grapesjs-tabs": {
            tabsBlock: {
              category: "Extra",
            },
          },
          "grapesjs-typed": {
            block: {
              category: "Extra",
              content: {
                type: "typed",
                "type-speed": 40,
                strings: ["Text row one", "Text row two", "Text row three"],
              },
            },
          },
        },
      });
      editor_grapejs.DomComponents.clear();
      const panelManager = editor_grapejs.Panels;
      editor_grapejs.I18n.addMessages({
        en: {
          styleManager: {
            properties: {
              "background-repeat": "Repeat",
              "background-position": "Position",
              "background-attachment": "Attachment",
              "background-size": "Size",
            },
          },
        },
      });
      editor_grapejs.DomComponents.clear();
      var pn = editor_grapejs.Panels;
      var modal = editor_grapejs.Modal;
      var cmdm = editor_grapejs.Commands;
      var rejectVar;
      cmdm.add("canvas-clear", function () {
        Swal.fire({
          icon: 'question',
          text: "Are you sure you want to clear the canvas? Click 'Yes' to confirm or click 'No' if you do not wish to clear it.",
                    showDenyButton: true,
                    showCancelButton: true,
                    confirmButtonText: 'Yes',
                    denyButtonText: 'No',
                  }).then((result) => {
                    if (result.isConfirmed) {
                      var comps = editor_grapejs.DomComponents.clear();
                        setTimeout(function () {
                          localStorage.clear();
                        }, 0);
                                  }
                  })
      });
      cmdm.add("set-device-desktop", {
        run: function (ed) {
          ed.setDevice("Desktop");
        },
        stop: function () {},
      });
      cmdm.add("set-device-tablet", {
        run: function (ed) {
          ed.setDevice("Tablet");
        },
        stop: function () {},
      });
      cmdm.add("set-device-mobile", {
        run: function (ed) {
          ed.setDevice("Mobile portrait");
        },
        stop: function () {},
      });

      // Add info command
      var mdlClass = "gjs-mdl-dialog-sm";
      var infoContainer = document.getElementById("info-panel");
      cmdm.add("open-info", function () {
        var mdlDialog = document.querySelector(".gjs-mdl-dialog");
        mdlDialog.className += " " + mdlClass;
        infoContainer.style.display = "block";
        modal.setTitle("About this demo");
        modal.setContent(infoContainer);
        modal.open();
        modal.getModel().once("change:open", function () {
          mdlDialog.className = mdlDialog.className.replace(mdlClass, "");
        });
      });
      pn.addButton("options", {
        id: "open-info",
        className: "fa fa-question-circle",
        command: function () {
          editor_grapejs.runCommand("open-info");
        },
        attributes: {
          title: "About",
          "data-tooltip-pos": "bottom",
        },
      });

      // Simple warn notifier
      var origWarn = console.warn;
      [
        ["sw-visibility", "Show Borders"],
        ["preview", "Preview"],
        ["fullscreen", "Fullscreen"],
        ["export-template", "Export"],
        ["undo", "Undo"],
        ["redo", "Redo"],
        ["gjs-open-import-webpage", "Import"],
        ["canvas-clear", "Clear canvas"],
      ].forEach(function (item) {
        pn.getButton("options", item[0]).set("attributes", {
          title: item[1],
          "data-tooltip-pos": "bottom",
        });
      });
      [
        ["open-sm", "Style Manager"],
        ["open-layers", "Layers"],
        ["open-blocks", "Blocks"],
      ].forEach(function (item) {
        pn.getButton("views", item[0]).set("attributes", {
          title: item[1],
          "data-tooltip-pos": "bottom",
        });
      });
      var titles = document.querySelectorAll("*[title]");

      for (var i = 0; i < titles.length; i++) {
        var el = titles[i];
        var title = el.getAttribute("title");
        title = title ? title.trim() : "";
        if (!title) break;
        el.setAttribute("data-tooltip", title);
        el.setAttribute("title", "");
      }

      // Show borders by default
      pn.getButton("options", "sw-visibility").set("active", 1);

      // Store and load events
      const panelViews = pn.addPanel({
        id: 'views'
      });
      panelViews.get('buttons').add([{
        attributes: {
          title: 'Open Code'
        },
        className: 'fa fa-file-code-o',
        command: 'open-code',
        togglable: false, //do not close when button is clicked again
        id: 'open-code'
      }]);
      const bm = editor_grapejs.BlockManager;
      bm.add("1X1", {
        label: "1X1",
        category: "Basic",
        attributes: { class: "gjs-fonts gjs-f-b1" },
        content: `
        <div class="row"><div class="col-12 cell" style="min-height:75px;"></div></div>
        `
      });
      bm.add("2X1", {
        label: "2X1",
        category: "Basic",
        attributes: { class: "gjs-fonts gjs-f-b2" },
        content: `
        <div class="row"><div class="col-6 cell" style="min-height:75px;"></div><div class="col-6 cell" style="min-height:75px;"></div></div>
        `
      });
      bm.add("3X1", {
        label: "3X1",
        category: "Basic",
        attributes: { class: "gjs-fonts gjs-f-b3" },
        content: `
          <div class="row"><div class="col-4 cell" style="min-height:75px;"></div><div class="col-4 cell" style="min-height:75px;"></div><div class="col-4 cell" style="min-height:75px;"></div></div>
        `
      });
      bm.add("2X1-3/7", {
        label: "2X1\n3/7",
        category: "Basic",
        attributes: { class: "gjs-fonts gjs-f-b37" },
        content: `
          <div class="row"><div class="col-4 cell" style="min-height:75px;"></div><div class="col-8 cell" style="min-height:75px;"></div></div>
        `
      });
      bm.remove("column1")
      bm.remove("column2")
      bm.remove("column3")
      bm.remove("column3-7")
      //Do stuff on load
      editor_grapejs.on("load", function () {
        var $ = grapesjs.$;
        // Show logo with the version
        // var logoCont = document.querySelector(".gjs-logo-cont");
        // document.querySelector(".gjs-logo-version").innerHTML = "";
        // var logoPanel = document.querySelector(".gjs-pn-commands");
        // logoPanel.appendChild(logoCont);

        // Load and show settings and style manager
        var openTmBtn = pn.getButton("views", "open-tm");
        openTmBtn && openTmBtn.set("active", 1);
        var openSm = pn.getButton("views", "open-sm");
        openSm && openSm.set("active", 1);

        // Add Settings Sector
        var traitsSector = $(
          '<div class="gjs-sm-sector no-select">' +
            '<div class="gjs-sm-title"><span class="icon-settings fa fa-cog"></span> Settings</div>' +
            '<div class="gjs-sm-properties" style="display: none;"></div></div>'
        );
        var traitsProps = traitsSector.find(".gjs-sm-properties");
        traitsProps.append($(".gjs-trt-traits"));
        $(".gjs-sm-sectors").before(traitsSector);
        traitsSector.find(".gjs-sm-title").on("click", function () {
          var traitStyle = traitsProps.get(0).style;
          var hidden = traitStyle.display == "none";
          if (hidden) {
            traitStyle.display = "block";
          } else {
            traitStyle.display = "none";
          }
        });

        // Open block manager
        var openBlocksBtn = editor_grapejs.Panels.getButton("views", "open-blocks");
        openBlocksBtn && openBlocksBtn.set("active", 1);

      });

      $('#gjs').find('.gjs-toolbar').prepend(`<div><i class="fas fa-wrench" onclick="openModal.call(this)" style="margin-top:35px;font-size:15px;"></i></div>`)//.eq(0).append(`<div class="fa fa-trash-o gjs-toolbar-item"></div>`));
      const logomove = () => {
        let url_string = window.location.pathname
        let f_occ = url_string.indexOf('/', url_string.indexOf('/') + 1)
        let s_occ = url_string.indexOf('/', url_string.indexOf('/') + f_occ +1)
        let t_occ = url_string.indexOf('/', url_string.indexOf('/') + s_occ +1)
        let app_code2 = url_string.substring(f_occ+1,s_occ)
        let current_dev_mode2 = url_string.substring(s_occ+1,t_occ)
        let modes = ["Build","Edit"]
        let url = ""
        if(current_dev_mode2 != "Build" && current_dev_mode2 != "Edit"){
          current_dev_mode2 = "User"
        }

        const logoelement = `
          <a href="/users/${app_code2}/${current_dev_mode2}/homePage/" style="padding-left: 8px;padding-right: 8px" class="float-left">
            <img
              id="imageAciesLogo"
              src="/static/images/Base_theme/A.png"
              alt="Acies Logo"
              class="brand-image img-responsive"
              align="left"
              style="float: left"
              height="30px"
            />
          </a>
        `;

        $(".gjs-pn-panels")
          .children()
          .eq(3)
          .find(".gjs-pn-buttons")
          .prepend(logoelement);
      };
      logomove();
      const addsavebutton = () => {
        const savebutton = `<a href='#' style="margin-left: 3px;margin-right: 8px;" class="savebtn gjs-pn-btn">
          <i class="fa fa-save  " style="user-select: auto; "></i>
        </a>`;
        const resetbutton = `<a href='#' style="margin-left: 3px;margin-right: 8px;margin-bottom: 2px" class="resetbtn gjs-pn-btn">
          <i class="fa fa-retweet" style="user-select: auto; "></i>
        </a>`;
        const resettooltip = `<div class="tooltipdiv" style="display:none;position:absolute;height:auto; width: 60px;color:white;top: 43px; padding:5px;left: 15px;border-radius:4px;background-color:#343a40;)"><span class="tooltiptext">Reset to default</span></div>`;
        const addwidgetbutton = `<a href='#' data-toggle="modal" data-target="#widgetmodal" style="margin-left: 3px;margin-right: 8px;margin-bottom: 2px" class="widgetbtn gjs-pn-btn">
          <i class="fas fa-wrench" style="user-select: auto; "></i>
        </a>

        `;
        const addwidgettooltip = `<div class="widgettooltipdiv" style="display:none;position:absolute;height:auto; width: 60px;color:white;top: 43px; padding:5px;left: -15px;border-radius:4px;background-color:#343a40;"><span class="tooltiptext">Add Custom Widget</span></div>`;

        $(".gjs-pn-panels")
          .children()
          .eq(1)
          .find(".gjs-pn-buttons")
          .append(savebutton);
        $(".gjs-pn-panels")
          .children()
          .eq(1)
          .find(".gjs-pn-buttons")
          .prepend(resetbutton)
          .append(resettooltip);
        $(".gjs-pn-panels")
          .children()
          .eq(1)
          .find(".gjs-pn-buttons")
          .prepend(addwidgetbutton)
          .append(addwidgettooltip);
        $(".gjs-pn-panels")
          .children()
          .eq(1)
          .find(".gjs-pn-buttons")
          .find("span")
          .eq(8)
          .remove();
      };
      editor_grapejs.DomComponents.clear();

</script>
<script>
  $('#selectCVFormRows').on('select2:select', function (){
    if ($(this).val() == 'manual') {
      $('#selectCVFormRowsManualEntryContainer').css('display', '');
    } else {
      $('#selectCVFormRowsManualEntryContainer').css('display', 'none');
    }
  });
  $('#applyGridSettingsChanges').on('click', function() {
    populatePreview();
  });
  $('#reOrderFields').on('change', function(){
    if ($(this).prop('checked')) {
      $('#createViewFormPreviewContainerCard > .form-row').css('min-height', "1rem");
      $('#createViewFormPreviewContainerCard > .form-row').sortable({cancel: ''});
      $('#createViewFormPreviewContainerCard > .row.formBtn > .form-buttons').find('input, button').prop('disabled', false);
      $('#createViewFormPreviewContainerCard > .form-row > .form-buttons').find('input, button').prop('disabled', false);
      $('#createViewFormPreviewContainerCard > .row.formBtn').sortable({cancel: ''});
      var droppableContainments = Array($(`#createViewFormPreviewContainerCard > .form-row`))
      var droppableButtonContainments = Array($(`#createViewFormPreviewContainerCard > .form-row,#createViewFormPreviewContainerCard > .row.formBtn`))
      $('#createViewFormPreviewContainerCard > .form-row > .form-group').draggable({connectToSortable: "#createViewFormPreviewContainerCard > .form-row", containment: droppableContainments});
      $('#createViewFormPreviewContainerCard > .row.formBtn > div.form-buttons').draggable({connectToSortable: "#createViewFormPreviewContainerCard > .form-row, #createViewFormPreviewContainerCard > .row.formBtn", containment: droppableButtonContainments, cancel: ''});
      $('#createViewFormPreviewContainerCard > .form-row > .form-group').css('margin-left', '0px');
      $('#createViewFormPreviewContainerCard > .form-row > .form-buttons').css('margin-left', '0px');
      $('#createViewFormPreviewContainerCard > .row.formBtn > .form-buttons').css('margin-left', '0px');
    } else {
      $('#createViewFormPreviewContainerCard > .form-row').css('min-height', "0px");
      $('#createViewFormPreviewContainerCard > .form-row').sortable('destroy');
      $('#createViewFormPreviewContainerCard > .row.formBtn, #createViewFormPreviewContainerCard > .form-row > .form-buttons').find('input, button').prop('disabled', true);
      $('#createViewFormPreviewContainerCard > .row.formBtn').sortable('destroy');
      $('#createViewFormPreviewContainerCard > .form-row > .form-group').draggable('destroy');
      $('#createViewFormPreviewContainerCard > .row.formBtn > div.form-buttons').draggable('destroy');
    }
    showFieldGrids()
  });
  $('#reSizeFields').on('change', function(){
    if ($(this).prop('checked')) {
      $('#resizingFieldControlLevelContainer').css('display', 'block');
      $('#resizingFieldControlLevel').off('select2:select').on('select2:select', function(){
        if ($(this).val() == "grid") {
          $('#resizing_info_small').text('Click on the field and select the size from the options below to resize it.');
          $('#selectFieldGridSizeContainer').css('display', 'block');
          $('#createViewFormPreviewContainerCard > .form-row > .form-group').off('click').on('click', function(){
            $('#createViewFormPreviewContainerCard > .form-row > .form-group').not(selectedBlock).css('background-color', '');
            $(this).css('background-color', '#f3f2f2');
            var selectedBlock = $(this);
            $('#selectFieldGridSizeLG, #selectFieldGridSizeMD, #selectFieldGridSizeSM').on('select2:select', function(){
              let largeScreen = $('#selectFieldGridSizeLG').val();
              let mediumScreen = $('#selectFieldGridSizeMD').val();
              let smallScreen = $('#selectFieldGridSizeSM').val();
              selectedBlock.attr("class", `form-group cv-form-field col-lg-${largeScreen} col-md-${mediumScreen} col-sm-${smallScreen}`);
              selectedBlock.attr('data-grid-lg', largeScreen);
              selectedBlock.attr('data-grid-md', mediumScreen);
              selectedBlock.attr('data-grid-sm', smallScreen);
            });
          });
        } else {
          $('#resizing_info_small').text('Click on the field and drag the field to resize it.');
          $('#selectFieldGridSizeContainer').css('display', 'none');
          var noOfColumns = $('#selectCVFormColumns').val();
          var currentFieldWidth = 100 / noOfColumns;
          $('#createViewFormPreviewContainerCard > .form-row > .form-group').off('click').on('click', function(){
            if (!$(this).attr('data-customized-width')) {
              $(this).css('width', `${currentFieldWidth}%`);
              $(this).attr('class', 'form-group cv-form-field');
            }
            $(this).css('background-color', '#f3f2f2');
            if (!$(this).hasClass('ui-resizable')) {
              $(this).resizable({
                containment: "parent"
              });
              $(this).on('resize', function(event, ui){
                var customizedHeight = ui.size.height;
                var customizedWidth = ui.size.width;
                var parentWidth = $(this).parent().width();
                $(this).attr('data-customized-width', `${customizedWidth/parentWidth * 100}%`);
                $(this).attr('data-customized-height', `${customizedHeight}px`);
              });
            };
          });
        }
      });
    } else {
      $('#createViewFormPreviewContainerCard > .form-row > .form-group').off('click').off('click');
      $('#createViewFormPreviewContainerCard > .form-row > .form-group.ui-resizable').not($(this)).resizable('destroy');
      $('#resizingFieldControlLevelContainer').css('display', 'none');
      $('#selectFieldGridSizeContainer').css('display', 'none');
      $('#createViewFormPreviewContainerCard > .form-row > .form-group').css('background-color', '');
    }
    showFieldGrids()
  });
  function showFieldGrids() {
    if ($('#reOrderFields').prop('checked') || $('#reSizeFields').prop('checked')) {
      $('#createViewFormPreviewContainerCard > .form-row').css('border', '2px dotted black');
      $('#createViewFormPreviewContainerCard > .form-row > .form-group').css('border', '1px dotted darkgray');
      $('#createViewFormPreviewContainerCard > .form-row > .form-group').css('border-radius', '2px');
    } else {
      $('#createViewFormPreviewContainerCard > .form-row > .form-group').css('border', '0px');
      $('#createViewFormPreviewContainerCard > .form-row').css('border', '0px');
    }
  }
  $('#saveFormStyleConfigButton').on('click', function() {
    var formStylingSettings = {};
    var formGridSettings = {};
    var rowDefinition = $('#selectCVFormRows').val();
    var noOfRows = $('#selectCVFormRowsManualEntry').val();
    var noOfColumnsInRow = $('#selectCVFormColumns').val();
    formGridSettings['rowDefinition'] = rowDefinition;
    formGridSettings['noOfRows'] = noOfRows;
    formGridSettings['noOfColumnsInRow'] = noOfColumnsInRow;

    formStylingSettings['grid_settings'] = formGridSettings;


    if ($('#reOrderFields').prop('checked')) {
      $('#reOrderFields').prop('checked', false).trigger('change');
    }
    if ($('#reSizeFields').prop('checked')) {
      $('#reSizeFields').prop('checked', false).trigger('change');
    }
    var fieldSizingPlacementConfig = {};
    for (let i = 0; i < noOfRows; i++) {
      let blocksInThisRow = {};
      $('#createViewFormPreviewContainerCard > .form-row').eq(i).find('.form-group.cv-form-field, .form-buttons').each(function(){
        let blockPConfig = {};
        let type = "field";
        if ($(this).hasClass('form-buttons')) {
          type = 'button';
        }
        blockPConfig['type'] = type;
        var name;
        if (type == 'field') {
          name = $(this).attr('data-field-name');
          let sizeConfig = {};
          if ($(this).attr('data-customized-width')) {
            sizeConfig['type'] = 'customized';
            sizeConfig['width'] = $(this).attr('data-customized-width');
            sizeConfig['height'] = $(this).attr('data-customized-height');
          } else {
            sizeConfig['type'] = 'bootstrap-grid';
            if ($(this).attr('data-grid-lg')) {
              sizeConfig['large_screen'] = $(this).attr('data-grid-lg');
              sizeConfig['medium_screen'] = $(this).attr('data-grid-md');
              sizeConfig['small_screen'] = $(this).attr('data-grid-sm');
            } else {
              sizeConfig['large_screen'] = String(Math.floor(12/noOfColumnsInRow));
              sizeConfig['medium_screen'] = String(Math.floor(12/noOfColumnsInRow));
              sizeConfig['small_screen'] = '12';
            }
          }
          blockPConfig['name'] = name;
          blockPConfig['sizeConfig'] = sizeConfig;
        } else {
          name = $(this).find('input').val();
          blockPConfig['name'] = name;
        };
        blocksInThisRow[blockPConfig['name']] = blockPConfig;
      });
      fieldSizingPlacementConfig[i] = blocksInThisRow;
    }
    formStylingSettings['sizing_placement_settings'] = fieldSizingPlacementConfig;

    // Buttons row
    var buttonRowConfig = [];
    $('#createViewFormPreviewContainerCard > .row.formBtn > .form-buttons').each(function(){
      var blockPConfig = {};
      name = $(this).find('input').val();
      blockPConfig['name'] = name;
      buttonRowConfig.push(blockPConfig);
    });
    formStylingSettings['button_row_config'] = buttonRowConfig;
    $('#saveFormStyleConfigButton').attr('data-config', JSON.stringify(formStylingSettings));
    $('#createViewUISettingsModal').modal('hide');
  });
  $('#resetFormStyleConfigButton').on('click', function(){
    $('#saveFormStyleConfigButton').attr('data-config', '{}');
    $('#selectCVFormRows').val('manual').trigger('select2:select');
    $('#selectCVFormRowsManualEntry').val(1).trigger('change')
    $('#selectCVFormColumns').val(4).trigger('change')
    $('#createViewUISettingsModal').modal('hide');
  });
</script>
<script>
  var component = editor_grapejs.getSelected()
  var commands = editor_grapejs.Commands;
  var scriptMaster,script
  var injectScript;
  var dic_cases = {}

  function closeDesignModal() {
    $('#designModal').css('display','none');
    $(".restoreL3").css("display","none");
    bm.remove("Create view");
    bm.remove("List view");
    bm.remove("Computation");
    bm.remove("Upload");
    bm.remove("Analysis");
    editor_grapejs.DomComponents.clear();
  };
  $(".savebtn").on("click", function () {
    $(this).html(`<i class="fa fa-circle-notch fa-spin"></i>&nbsp;&nbsp;`)
    var dic_widget_script = editor_grapejs.DomComponents.getWrapper().find(`span[data-js=countdown]`)
    var widget_script_ct = []
    for(let i = 0; i < dic_widget_script.length; i++) {
      if(1
      ) {
        widget_script_ct.push(dic_widget_script[i]["ccid"]);
      }
    }
    let script = $(".gjs-frame").contents().find('body').find('div').eq(0).find('script').text()
    let script1 = $(".gjs-frame").contents().find('body').find('script').text()
    let script_widget = script1.replace(script,"");
    var list_of_element = ""
    if(editor_grapejs.getHtml().includes('ellipse0')){
      list_of_element = "Analysis"
    } if(editor_grapejs.getHtml().includes('parallelogram')){
      list_of_element = "Computation"
    } if(editor_grapejs.getHtml().includes('document0')){
      list_of_element = "Upload"
    } if(editor_grapejs.getHtml().includes('process0')){
      list_of_element = "List view"
    } if(editor_grapejs.getHtml().includes('whiteSpace')){
      list_of_element = "Create view"
    }
    var prg_code = $("#graphContainerID").attr("data-process_code");
    var pr_name = $("#graphContainerID").attr("data-sub_process_name");
    var tab_name_ = $("#graphContainerID").attr("data-tab_name");

    l3Save([],prg_code,pr_name,$(this));
  });
  function fetchTemplate(operation,tabName="") {
    var prg_code = $("#graphContainerID").attr("data-process_code");
    var pr_name = $("#graphContainerID").attr("data-sub_process_name");
    var tab_name_ = $("#graphContainerID").attr("data-tab_name");
    $(".restoreL3").css("display","none");
    customTemplateAjax(prg_code,pr_name,tab_name_,operation,$(this),"","Custom template")
  }
  function customTemplateAjax(prg_code,pr_name,tab_name_,operation,thiss,component__="",text="") {
    thiss.html(`<i class="fa fa-circle-notch fa-spin"></i>&nbsp;&nbsp;`)
    let url_string = window.location.pathname
    let f_occ = url_string.indexOf('/', url_string.indexOf('/') + 1)
    let s_occ = url_string.indexOf('/', url_string.indexOf('/') + f_occ +1)
    let t_occ = url_string.indexOf('/', url_string.indexOf('/') + s_occ +1)
    let app_code2 = url_string.substring(f_occ+1,s_occ)
    let current_dev_mode2 = url_string.substring(s_occ+1,t_occ)
    if(current_dev_mode2 != "Build" && current_dev_mode2 != "Edit"){
      current_dev_mode2 = "User"
    }
    $.ajax({
      url: window.location.pathname,
      data: {
        'operation': operation,
        'process':prg_code,
        'subprocess':pr_name,
        'tab_name': tab_name_,
      },
      type: "POST",
      dataType: "json",
      success: function (data) {
        if (data["config"] == "yes") {
          $('#designModal').css('display','block');
          thiss.closest(".modal").modal("hide")

          html2 = `<iframe data-template_type="${data.template_type}" data-process="${data.process}" data-subprocess_name="${data.subprocess_name}" data-tab_name="${data.tab_name}" data-element_id="${data.element_id}" data-custom_template="custom_template" class="system_block">${data.template_name}</iframe>`

          component_.replaceWith(html2)
          $("#graphContainerID").attr("data-tab_name",data.tab_name);
          $('#l3Component').modal('hide')
        } else {
          Swal.fire({icon: 'warning',text: 'You will need to save your configuration brfore proceeding further.'});
        }
        if(thiss.hasClass("geButton")) {
          thiss.html('<i class="fas fa-file"></i>');
        } else {
          thiss.html(text);
        }
      },
      error: function () {
        if(thiss.hasClass("geButton")) {
          thiss.html('<i class="fas fa-file"></i>');
        } else {
          thiss.html(text);
        }
        Swal.fire({icon: 'error',text: 'Error! Please try again.'});;
      }
    })
  }
  function listViewReset() {
    $('#selectTablePC').val('').trigger("change")
    $('#selectTemplate').val('').trigger("change")
    $('#tabHeaderListView').val("").trigger('change')
    $('#dropFields').empty()
    $('#dropFieldsLV_upload').empty()
    $('#groupFields').empty()
    $('#mention_usergroups').empty()
    $("#appFields_ref_cols").empty()
    $("#appFields_ref_table").val("").trigger("change")
    $("#appJSONTable").val("").trigger("change")
    $("#appJSONEditTable").val("").trigger("change")
    $("#appJSONCols").empty()
    $("#appJSONEditCols").empty()
    $("#appJSONTableReorder").val("").trigger("change")
    $("#appJSONColsReorder").empty()
    $('#formatterTable').empty()
    $('#restrictFields').empty()
    $("#editFieldsNS").empty()
    $('#reportingViewColumns').empty();
    $('#reportingViewColumns_datefield_latest_entries').empty();
    $('#reportingViewColumns_unique_indentfier_selector').empty();
    $("#show_report_latest_checker").prop('checked',false)
    $("#dont_show_detail_btn").prop('checked',false)
    $('#uniqueColumn').empty();
    $('#customColumn').empty();
    $('#formatColumn').empty();
    $('#formatTab').empty();
    $('#trackingColumn').empty();
    $('#formatTableNames').empty();
    $('#tableContainerEdit').empty();
    $("#toggleEditTableCardNames").prop("checked",false).trigger("change")
    $("#toggleCustomListViewMessages").prop("checked",false).trigger("change")
    $("#customListViewMessagesDiv").find(".c_msg_input").each(function() {
      $(this).val($(this).attr("data-value"))
      $(this).closest(".nav-item").find(".msg_icon").attr("class",$(this).closest(".nav-item").find(".msg_icon").attr("data-value"))
    })
    $('.subCategory').each(function () {
      $(this).css({ backgroundColor: '#565a5e' });
      $(this).css({ borderColor: '#565a5e' });
    })
    $('.subElementCards').find('input[type=checkbox]').each(function(){
      $(this)[0].checked=false
      $(this)[0].disabled=false
    })
    $('#subCategoryButtons').find('.fa-check-circle').each(function(){
      $(this).css('display','none')
    })
    $('#configuration_val_row_dev').empty()
    $('.customValbtnDev').attr('data-data_config','{}')
    $('.carousel').carousel(0);
    $("#allow_listv_custV").prop("checked",false);
    $("#allow_listv_rtf").prop("checked",false);
    $("#toggleeditcolAlign").prop("checked", false).trigger('change')
    $("#labelSelectionColAli").css("display", "none")
		$(".labelrowAlign").empty()
    verboseNameAlign = {}
    $('#custom_validation_table_dev').empty()
    $('#custommValidationSelection_dev').val('').trigger('change')
    $('#custommValidationSelection_dev').empty()

    $('#Datatable').css('display','none')
    $('#Chart').css('display','none')
    $('#Alert').css('display','none')
    $('#Filter').css('display','none')
    $('#Custom').css('display','none')
    $('#Formatter').css('display','none')
    $('#customTemplateListView').css('display','none')
    $('#previewCard').empty()
    $('#basicfilter_items').find('.filter-table').empty();
    $('#saveListViewConfig').closest(".modal-footer").find(".previewCustomTemplate").prop('disabled',true);
    $('#muldrop_list_config_view').css('display','none')

    $('#dropFields_mul').empty()
    $('#dropFieldsLVUpload_mul').empty()
    $('#groupFields_mul').empty()
    $('#groupFields_restrictview_mul').empty()
    $('#formatterTable_mul').empty()
    $('#restrictFields_mul').empty()
    $('#editFieldsNS_mul').empty()
    $("#show_report_latest_checker").prop('checked',false)
    $("#dont_show_detail_btn").prop('checked',false)
    $('#customColumn_mul').empty();
    $('#formatColumn_mul').empty();
    $('#Datatable_mul').css('display','none')
    $('#Chart_mul').css('display','none')
    $('#Alert_mul').css('display','none')
    $('#Filter_mul').css('display','none')
    $('#Custom_mul').css('display','none')
    $('#Formatter_mul').css('display','none')
    $('#customTemplateListView_mul').css('display','none')
    $('#previewCard_mul').empty()
    $('#basicfilter_items_mul').find('.filter-table').empty();
    $('#saveListViewConfig_mul').closest(".modal-footer").find(".previewCustomTemplate").prop('disabled',true);
    $('.labelrow_mul').empty()
    $('.default_mul_view').empty()
    $("#dropFields_add").attr('data-data','{}')
    $("#dropFields_add_LV_upload").attr('data-data','{}')
    $("#editFieldsNS").attr('data-data','{}')
  }
  function listViewReset_Mul() {
    $('#basicfilter_items_mul').find('.filter-table').empty()
    setTimeout(function () {
    $('#previewCard_mul').empty()
    },500)
    $('#selectMultiConfig_mul').val('').trigger("change")
    $('#dropFields_mul').val('').trigger("change")
    $('#dropFieldsLVUpload_mul').val('').trigger("change")
    $('#groupFields_mul').val('').trigger("change")
    $('#groupFields_restrictview_mul').val('').trigger("change")
    $('#restrictFields_mul').val('').trigger("change")
    $('#editFieldsNS_mul').val('').trigger("change")
    $('#listViewEditButtonModal').find('.masterstyling').empty()
    $('#listViewButtonId_mul').attr('data-list',"")
    $('.subCategory').each(function () {
      $(this).css({ backgroundColor: '#565a5e' });
      $(this).css({ borderColor: '#565a5e' });
    })
    $('.subElementCards').find('input[type=checkbox]').each(function(){
      $(this)[0].checked=false
      $(this)[0].disabled=false
    })
    $('#subCategoryButtons_mul').find('.fa-check-circle').each(function(){
      $(this).css('display','none')
    })
    $("#configFormat_mul").attr("data-config_formatter","")
    $("#formatColumn_mul").val("").trigger("change")
    $('#saveBasicfilter_mul').removeAttr('data-basicfilter-config');

    $("#toggleCustomListViewMessages_multidropdown").prop("checked",false).trigger("change")
    $("#customListViewMessagesDiv_multidropdown").find(".c_msg_input").each(function() {
      $(this).val($(this).attr("data-value"))
      $(this).closest(".nav-item").find(".msg_icon").attr("class",$(this).closest(".nav-item").find(".msg_icon").attr("data-value"))
    })
  }
  function uploadReset() {
    $('#selectDocumentTable').val('').trigger("change");
    $('#selectDataconnector').val('').trigger("change");
    $('.selectComponents').find('.form-group').find('input[type=checkbox]').each(function(){
      $(this)[0].checked=false
    });
    document.getElementById('select_All').checked=false;
    $('.selectComponents').css('display','none');
    $("#allow_comp_logic").prop("checked",false);
    $("#allow_stfp_upload").prop("checked",false);
    $("#allow_map_column").prop("checked",false);
    $(".computedFieldMapperButton").attr('data-data_config','{}')
    $('#selectUploadTemplate').val("System defined template").trigger("change");
    $('#configuration_val_row_dev').empty()
    $('.customValbtnDev').attr('data-data_config','{}')
    $('.carousel').carousel(0);
    $("#allow_upload_custV").prop("checked",false);
    $('#custom_validation_table_dev').empty()
    $('#custommValidationSelection_dev').val('').trigger('change')
    $('#custommValidationSelection_dev').empty()
    $(".fieldUploadMapperButton").attr('data-data_config','[]')
    $("#allow_upload_compute").prop("checked",false);
    $("#allow_upload_compute").trigger('change')
    $('#upload_comp_table').val('').trigger("change");
    $('#upload_comp_model').val('').trigger("change");
    $('#upload_comp_importEle').empty();

    $("#customUploadViewMessagesDiv").find(".c_msg_input").each(function() {
      $(this).val($(this).attr("data-value"))
      $(this).closest(".nav-item").find(".msg_icon").attr("class",$(this).closest(".nav-item").find(".msg_icon").attr("data-value"))
    })

    $("#toggleCustomUploadViewMessages").prop("checked", false).trigger("change")

  }
  function analysisReset() {

    $('#plotChart')[0].checked=false
    $('#tabConfigs')[0].checked=false
    $('#SelectAll')[0].checked=false
    $('#addTabs')[0].checked=false
    $('#pdf')[0].checked=false
    $('#saveTabsButton')[0].checked=false
    $('#tabNumber')[0].value=""
    $('#selectAnalysisPackage').val("").trigger('change')
    $('#tabHeaderAnalysis').val("").trigger('change')
    $('#selectAnalysisTemplate').val("System defined template").trigger("change");
  }
  function createViewReset() {
        $('.dragContainer').empty();
        $('#selectFormTable').val('').trigger("change")
        $('#formfieldList').val('').trigger("change")
        $('#selectFormTemplate').val('').trigger("change")
        $('#selectedFormfieldList').empty()
        $('#selectAction').val('').trigger("change")
        $('#selectField').val('').trigger("change")
        $('.selectJSproperty').val('').trigger("change")
        $('#tabHeaderCreateView').val("").trigger('change')
        $('#selectTableColumns').empty();
        $('#selectTableColumnsflow').empty();
        $('#additional').empty();
        $('.def_values_opt').empty();
        $('#defaultValueConfig').find('#selectAlll').prop('checked',false);
        $('#selectMultipleFormTable').val('alertbasetable').trigger('change');
        $('#selectMultipleFormTableflow').val('alertbasetable').trigger('change');
        $('#selectCreateViewTemplate').val("System defined template").trigger("change");
        $("#show_labels").prop("checked",true)
        $("#togglepagination").prop("checked", false).trigger('change')
        $("#togglepagination_min_fields").prop("checked", false).trigger('change')
        $("#addPageRowID").attr("nrow", 0)
        $("#addPageRowID_min_fields").attr("nrow", 0)
        $(".paginationrow").empty()
        $(".fieldRestrict_min_page").css("display","none")
        $(".fieldRestrict_min").css("display","block")
        $(".paginationrow_min_fields").empty()
        $("#toggleeditlabel").prop("checked", false).trigger('change')
        $("#addPageRowID_1").attr("nrow", 0)
        $(".labelrow").empty()
        $("#field_copy_allow").prop("checked", false).trigger('change')
        $("#togglerecurlabel").prop("checked", false).trigger('change')
        $("#togglerest_min_label").prop("checked", false).trigger('change')
        $("#field_paste_allow").prop("checked", false).trigger('change')
        $("#fcopy_fields").val('').trigger("change")
        $("#recurr_update_fields").val('').trigger("change")
        $("#restrict_min_fields").val('').trigger("change")
        $("#restrict_min_no_req").val('').trigger("change")
        $("#fpaste_fields").val('').trigger("change")
        $("#f_col_check").prop("checked", false).trigger('change')
        $("#allField").prop("checked",false);
        $('#configuration_val_row_dev').empty()
        $('.customValbtnDev').attr('data-data_config','{}')
        $('.carousel').carousel(0);
        $('#custom_validation_table_dev').empty()
        $('#custommValidationSelection_dev').val('').trigger('change')
        $('#custommValidationSelection_dev').empty()
        $("selectAllField").empty();
        $("#togglepagination_colorder").prop("checked", false).trigger('change')
        $("#addPageRowID_colorder").attr("nrow", 0)
        $(".paginationrow_colorder").empty()
        col_val = 3
        $("#togglepaginationmand").prop("checked", false).trigger('change')
        $("#togglepaginationwarp").prop("checked", false).trigger('change')
        $("#check_validForm").prop("checked", false).trigger('change')
        $("#togglelogo_cre_card").prop("checked", false).trigger('change')
        $("#togglelogo_user_pic").prop("checked", false).trigger('change')
        $("#togglelogo_user_email").prop("checked", false).trigger('change')
        $("#togglelogo_email").prop("checked", false).trigger('change')
        $('#saveFormStyleConfigButton').attr('data-config', '{}');
        $("#js_filter_btn").attr('data-basicfilter-config','[]')
        $('#selectCVFormRows').val("auto").trigger('select2:select');
        $('#selectCVFormRowsManualEntry').val(1).trigger('change');
        $('#selectCVFormColumns').val(4).trigger('change');
        fieldAttributesCV =[]
        compareFields={}
        columnSelection = [];
        periodSelection={};
        fields = [];
        var htmlR = `
        <div class="card card-default collapsed-card">
          <div class="card-header">
            <p class="card-title">Cascading level 0</p>

            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:black"></i></button>
              <button type="button" class="btn btn-tool" onclick="cascadingCard.call(this)" style="color:black">Add levels</i></button>
            </div>
          </div>
          <div class="card-body row" style="display:flex">
            <div class="col-6" style="height: 16rem;overflow: scroll;">
              <p class="autopopulate1" style="font-weight: bold;">Select source table</p>
              <div class="" id="masterTableCascading1">
                <select class="masterTableSelectCascading1 select2 form-control" onchange="selectColFromTable.call(this)">
                  <option value="" selected>Select master table</option>
                  {% for i in tableList%}
                  <option value="{{i}}">{{i}}</option>
                  {%endfor%}
                </select>
              </div><br>
              <div class="autopopulate1" style="font-weight: bold;">Criteria field mapping through source table column</div><br>
              <div class="row" id="indFieldTypeCascading1">
                <div class="col-6" style="display: inline-block;">
                  <p>Current table field:</p>
                  <select class="select2 form-control indFieldTypeSelectCascading1">
                    <option value="" selected>Dependent field mapping through source table column</option>
                  </select>
                </div>
                <div class="col-6" style="display: inline-block;">
                  <p>Mapping table field:</p>
                  <select class="select2 form-control commonCol indFieldTypeMapperCascading1">
                    <option value="" selected>Select mapping field</option>
                  </select>
                </div>
              </div><br>
            </div>
            <div class="col-6" style="height: 16rem;overflow: scroll;">
              <div class="autopopulate1" style="display: flex; align-items: center; justify-content: space-between;" style="font-weight: bold;"><span style="font-weight: bold;">Select dependent field</span> <span class="float-right" style="font-size: 15px;" onclick="addIndField.call(this,'Cascading1')"><i class="fas fa-plus"></i></span></div><br>
              <div class="norow" id="depFieldTypeCascading1">
                <div class="row" style="margin-bottom:6px">
                  <div class="col-6">
                    <p>Current table field:</p>
                    <select class="depFieldTypeSelectCascading1 select2 form-control " onchange="casadingColOption.call(this)">
                      <option value="" selected>Select independent field</option>
                    </select>
                  </div>
                  <div class="col-5">
                    <p>Mapping table field:</p>
                    <select class="depFieldTypeMapperCascading1 select2 form-control commonCol">
                      <option value="" selected>Select mapping field</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    `
    $('.depFieldTypeMapperCascading1').select2();
    $('.depFieldTypeSelectCascading1').select2();
    $('.indFieldTypeMapperCascading1').select2();
    $('.indFieldTypeSelectCascading1').select2();
    $('.masterTableSelectCascading1').select2();
    $('#JSConfig').css('display','none');
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','');
    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','');
    $('#formModal').find('.formLevelFieldCol').empty()
    $('#formModal').find('.formLevelFieldVal').find('select').empty()
    $('#formModal').find('.formLevelFieldCond').val('').trigger('change')
    $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
    $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
    $('#formModal').find('.formLevelFieldValTag').css('display','none');
    $('#formModal').find('.formLevelFieldVal').css('display','block');
    $('#formModal').find('.formLevelJs').css('display','none');
    $('#formModal').find('.formLevelFieldReload').find('#carouselExampleIndicators1').find('.carousel-inner').empty();
    $('#formModal').find('.formFieldLevelReload').css('display','none');
    $('#formModal').find('.formLevelFieldVal').find('select').empty()
    $('#formModal').find('.formLevelFieldValTag').find('select').empty()
    var count = 0;
    $('#JSConfig').find('.multipleJS').each(function() {
      if(count > 0) {
        $(this).remove();
      }
      count++
    })
    $('#JSConfig').find('.multipleJS').eq(0).find('.selectJSproperty').val('').trigger('change')
    formLevelFieldList = []
  }
  function createViewReset1() {

    $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).find('.color').removeClass('changeColor')
      $('#formModal').modal('hide');
      if(fields.length == 0) {
        $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').find('.form-row').remove();
      }
      if(stateOfCss["save"] == "no") {
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).parent().attr("style",`${stateOfCss["previous"]}`);
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).parent().css("background-color",``);
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').css("background-color",`${stateOfCss["background-color"]}`);
        if($('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').attr('type') == 'file' || $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').attr('type') == 'image') {
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().find('label').css("background-color",`${stateOfCss["background-color"]}`);
        }
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').css("background-color",`${stateOfCss["background-color"]}`);
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').css("background-color",`${stateOfCss["background-color"]}`);
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().css("background-color",`${stateOfCss["background-color"]}`);
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').parent().css("background-color",`${stateOfCss["background-color"]}`);
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').parent().css("background-color",`${stateOfCss["background-color"]}`);
        if(stateOfCss["background-color"] != "" && stateOfCss["background-color"]) {
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').css('border-radius','5px');
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').css('border-radius','5px');
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').css('border-radius','5px');
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().css('border-radius','5px');
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').parent().css('border-radius','5px');
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').parent().css('border-radius','5px');
        } else {
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').css('border-radius','');
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').css('border-radius','');
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').css('border-radius','');
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('input').parent().css('border-radius','');
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('textarea').parent().css('border-radius','');
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find('select').parent().css('border-radius','');
        }
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).parent().removeAttr("title",`${stateOfCss["title"]}`);
        $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).parent().removeAttr("data-toggle",``);
        if(stateOfCss["span"] != "") {
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("span").remove();
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("small").remove();
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).append(`<small class="form-text text-muted">${stateOfCss["span"]}</small>`);

        } else {
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("span").remove();
          $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+stateOfCss["col"]).find("small").remove();

        }
      }
      previewHtml = '';
      previewHtml = $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).html();
      $('#createViewModal').find('.card-body').find('.formTempContainer').find('.card-body').html(previewHtml)
      $('#createViewModal').find('.card-body').find('.formTempContainer').find('.editjs').css('display','none')
      $('#createViewModal').css('display','block');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).find('.color').removeClass('changeColor')
      $('input[type=radio][name=js][id=single]').prop('checked',true);
      $('input[type=radio][name=js][id=multiple]').prop('checked',false);
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','');
      $('#formModal').find('.formLevelFieldCol').empty()
      $('#formModal').find('.formLevelFieldVal').find('select').empty()
      $('#formModal').find('.formLevelFieldCond').val('').trigger('change')
      $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
      $('#formModal').find('.formLevelFieldInput').val('').trigger('change')
      $('#formModal').find('.formLevelFieldValTag').css('display','none');
      $('#formModal').find('.formLevelFieldVal').css('display','block');
      $('#formModal').find('.formLevelFieldReload').find('#carouselExampleIndicators1').find('.carousel-inner').empty();
      $('#formModal').find('.formLevelFieldReload').css('display','none');
      $('#formModal').find('.formFieldJs').css('display','none');
      $('#formModal').find('.formLevelFieldVal').find('select').empty()
      $('#formModal').find('.formLevelFieldValTag').find('select').empty()
      $('#JSConfig').css('display','none');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('height','');
      $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card').eq(0).css('overflow','');

  }
  </script>
  <script>

    function l3Design() {
      $(".restoreL3").css("display","block");
      $(this).html(`<i class="fa fa-circle-notch fa-spin"></i>&nbsp;&nbsp;`)
      var thiss = $(this)
      bm.add("Create view", {
        label: `<i style="font-size: xx-large; margin-bottom: 20px" class="fas fa-paste"></i><div class="gjs-block-label">Create view</div>`,
        content: `
        <div title="create view" class="create view" style="width: 90px;height: 60px;border: 1.8px solid black;background-color: white;text-align: center;display: flex;justify-content: center;align-items: center;padding-top: 15px;margin-bottom: 10px;"><p>Create view</p></div>
        `
        ,
        category: 'App component',
        attributes: {
        title: "Create view",
        },
      });
      bm.add("Computation", {
        label: `<i style="font-size: xx-large; margin-bottom: 20px" class="fas fa-robot"></i><div class="gjs-block-label">Computation</div>`,
        content: `
        <div title="computation" class="computation" style="width: 80px;height: 60px;border: 1.8px solid black;background-color: white;text-align: center;display: flex;justify-content: center;align-items: center;padding-top: 15px;margin-bottom: 10px;transform: skew(-10deg);margin-left:15px;"><p>Computation</p></div>
        `
        ,
        category: 'App component',
        attributes: {
        title: "Computation",
        },
      });
      bm.add("Analysis", {
        label: `<i style="font-size: xx-large; margin-bottom: 20px" class="fa fa-bar-chart"></i><div class="gjs-block-label">Analysis</div>`,
        content: `
        <div title="analysis" class="analysis" style="width: 80px;height: 80px;border: 1.8px solid black;background-color: white;text-align: center;display: flex;justify-content: center;align-items: center;padding-top: 15px;margin-bottom: 10px; border-radius:40px;"><p>analysis</p></div>
        `
        ,
        category: 'App component',
        attributes: {
        title: "analysis",
        },
      });
      bm.add("List view", {
        label: `<i style="font-size: xx-large; margin-bottom: 20px" class="fa fa-table"></i><div class="gjs-block-label">List View</div>`,
        content: `
        <div title="listview" class="listview" style="width: 100px;height: 80px;border: 1.8px solid black;background-color: white;text-align: center;display: flex;justify-content: center;align-items: center;padding-top: 15px;margin-bottom: 10px;"><p>List View</p></div>
        `
        ,
        category: 'App component',
        attributes: {
        title: "listview",
        },
      });
      bm.add("Upload", {
        label: `<i style="font-size: xx-large; margin-bottom: 20px" class="fa fa-upload"></i><div class="gjs-block-label">Upload</div>`,
        content: `
        <div title="upload" class="upload" style="width: 100px;height: 80px;border: 1.8px solid black;background-color: white;text-align: center;display: flex;justify-content: center;align-items: center;padding-top: 15px;margin-bottom: 10px;"><p>Upload</p></div>
        `
        ,
        category: 'App component',
        attributes: {
        title: "upload",
        },
      });
      bm.add("Ordered list", {
      label: `<i style="font-size: xx-large; margin-bottom: 20px" class="	fas fa-list-ol"></i><div class="gjs-block-label">Ordered list</div>`,
      content: `
      <ol>
        <li>1</li>
        <li>2</li>
        <li>3</li>
      </ol> `
      ,
      category: 'Basic',
      attributes: {
        title: "ordered list",
      },
      });
      bm.add("Unordered list", {
      label: `<i style="font-size: xx-large; margin-bottom: 20px" class="	fas fa-list-ul"></i><div class="gjs-block-label">Unordered list</div>`,
      content: `
      <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
      </ul> `
      ,
      category: 'Basic',
      attributes: {
        title: "unordered list",
      },
      });
      var prg_code = $("#graphContainerID").attr("data-process_code");
      var pr_name = $("#graphContainerID").attr("data-sub_process_name");
      $.ajax({
        url: window.location.pathname,
        data: {
          'process': prg_code,
          'subprocess':pr_name,
          'operation': "fetchL3Design"
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          if(data["html"] != "") {

            editor_grapejs.addComponents(data["html"]);
            $(".gjs-frame").contents().find('body').find('.gjs-js-cont').empty()
            $(".gjs-frame").contents().find('body').find('.gjs-js-cont').append(`<div>${data["widget_script"]}</div>`)
          }
          thiss.html("Design Mode");
          $('#designModal').css('display','block');
          $(".version").empty()
          $(".version").append("<option value='' disabled selected>Select version</option>");
          for(let i = 0; i < data["version"].length; i++){
            $(".version").append(`<option value="${data.version[i]}">${data.version[i]}</option>`);
          }
        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })
    }
    var component_ = ""
    function openModal() {
      var component_type = ""
      component_ = editor_grapejs.getSelected()
      if(component_.getTrait('title').attributes.value == "create view") {
        component_type = "relatedCreateView"
      } else if(component_.getTrait('title').attributes.value == "computation") {
        component_type = "relatedComputation"
      } else if(component_.getTrait('title').attributes.value == "analysis") {
        component_type = "relatedAnalysis"
      } else if(component_.getTrait('title').attributes.value == "listview") {
        component_type = "relatedListView"
      } else if(component_.getTrait('title').attributes.value == "upload") {
        component_type = "relatedUpload"
      }
      var prg_code = $("#graphContainerID").attr("data-process_code");
      var pr_name = $("#graphContainerID").attr("data-sub_process_name");
      var prg_code_name = ($("#PN1").text()).replace(" Process: ","");
      let url_string = window.location.pathname
      let f_occ = url_string.indexOf('/', url_string.indexOf('/') + 1)
      let s_occ = url_string.indexOf('/', url_string.indexOf('/') + f_occ +1)
      let t_occ = url_string.indexOf('/', url_string.indexOf('/') + s_occ +1)
      let app_code2 = url_string.substring(f_occ+1,s_occ)
      let current_dev_mode2 = url_string.substring(s_occ+1,t_occ)
      let modes = ["Build","Edit"]
      let url = ""
      if(current_dev_mode2 != "Build" && current_dev_mode2 != "Edit"){
        current_dev_mode2 = "User"
      }
      $.ajax({
        url: `/users/${app_code2}/${current_dev_mode2}/processCreationsave/`,
        data: {
          'data_list': JSON.stringify({ process: prg_code, subprocess:pr_name}),
          'operation': component_type
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          $(".selectProcessName").empty();
          $(".selectProcessName").append(`<option value="${prg_code}">${prg_code_name}</option>`)
          $(".selectSubProcessName").empty();
          $(".selectSubProcessName").append(`<option value="${pr_name}">${pr_name}</option>`)
          $("#l3ComponentNames").empty();
          if(component_.getTrait('title').attributes.value == "create view") {
            $("#l3Component").find(".l3ComponentBtn").attr("data-name","fetchCreateViewConfigProcessCanvas")
          } else if(component_.getTrait('title').attributes.value == "computation") {
            $("#l3Component").find(".l3ComponentBtn").attr("data-name","fetchComputationConfigProcessCanvas")
          } else if(component_.getTrait('title').attributes.value == "analysis") {
            $("#l3Component").find(".l3ComponentBtn").attr("data-name","fetchAnalysisConfigProcessCanvas")
          } else if(component_.getTrait('title').attributes.value == "listview") {
            $("#l3Component").find(".l3ComponentBtn").attr("data-name","fetchListViewConfigProcessCanvas")
          } else if(component_.getTrait('title').attributes.value == "upload") {
            $("#l3Component").find(".l3ComponentBtn").attr("data-name","fetchUploadConfigProcessCanvas")
          }
          $("#l3ComponentNames").append(`<option value="" disabled selected>Select component name</option>`);
          for (var i = 0; i < data.name_list.length; i++) {
            $('#l3ComponentNames').append(new Option(data.name_list[i], data.name_list[i]));
          }
          $('#l3Component').modal('show');

        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })
    }
    function populateL3Component() {
      var l3ComponentType = $(this).attr('data-name');
      var prgCode_ = $(".selectProcessName").val();
      var prName_ = $(".selectSubProcessName").val();
      var tabName_ = $("#l3ComponentNames").val();
      customTemplateAjax(prgCode_,prName_,tabName_,l3ComponentType,$(this),component_,"Save")
    }
    function l3Save(element_id,prg_code,pr_name,thiss) {
      const decodeHtmlCharCodes = str =>
      str.replaceAll(/(&#(\d+);)/g, (match, capture, charCode) =>
        String.fromCharCode(charCode));
      var style_edit = editor_grapejs.DomComponents.getWrapper().find(`div[data-gjs-type=tab-content]`)
      var style_ = ""
      for(let i = 0; i < style_edit.length; i++){
        style_ = `#${style_edit[i]['ccid']} {display:block;}`
      }
      $(".gjs-frame").contents().find('body').find('div').find(".reject").remove();
      script = $(".gjs-frame").contents().find('body').find('div').eq(0).find('script').text()
      let script1 = $(".gjs-frame").contents().find('body').find('script').text()
      let script_widget = script1.replace(script,"");
      $.ajax({
        url: window.location.pathname,
        data: {
          "operation":"save_view_l3",
          "htmldata": decodeHtmlCharCodes(editor_grapejs.getHtml()),
          "script": "",
          "cssdata": JSON.stringify(editor_grapejs.getCss() + style_),
          "prg_code":prg_code,
          "pr_name":pr_name,
          "element_id_list":JSON.stringify(element_id),
          "widget_script":script_widget
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          $(".savebtn").html("Save")
          Swal.fire({icon: 'success',text: 'L3 Template saved successfully!'});
          url = `/users/${urlPath}/processGraphModule/preview/` +`?prg_code=${data.prg_code}&pr_code=${data.pr_code}`
          $('.nextbtn').attr('href',url)
        },
        failure: function () {
          $(".savebtn").html("Save")
          Swal.fire({icon: 'error',text: 'Error! No custom homepage exist. Please try again.'});
        },
      });
    }
    function restoreL3() {
      var prgCode_ =  $("#graphContainerID").attr("data-process_code");
      var prName_ = $("#graphContainerID").attr("data-sub_process_name");
      $.ajax({
        url: window.location.pathname,
        data: {
          "operation":"restore_l3",
          "prg_code":prgCode_,
          "pr_name":prName_,
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          $(".restoreL3").html("System l3 template")
          $('#designModal').css('display','none');
          $(".restoreL3").css("display","none");
          Swal.fire({icon: 'success',text: 'System defined L3 Template restored successfully!'});
          editor_grapejs.DomComponents.clear();
        },
        failure: function () {
          $(".restoreL3").html("System l3 template")
          Swal.fire({icon: 'error',text: 'Error! No custom homepage exist. Please try again.'});
        },
      });
    }
  </script>
  <script>
  function InOperationTag(){

  }
  function configureCases() {
    $("#formModal").modal('hide');
    let data1 = $(this).attr("data-reloaddata")
    if(data1 != undefined){
      data1 = JSON.parse(data1);
      $(this).removeAttr("data-reloaddata")
      casesReload(data1)
    }
    $("#casesModal").css("display","block");
  }
  function indCasesHtmlFirst(id) {
    if (id!= undefined){
      var indentifier = 'field_based'
      var options = `
      <option value="Equal to">Equal to</option>
      <option value="Not Equal to">Not Equal to</option>
      <option value="Greater than">Greater than</option>
      <option value="Smaller than">Smaller than</option>
      `
      var onchangePopulateCasesValue = 'populateCasesValueFieldBased'
    }else{
      var indentifier = ''
      var options =`
      <option value="Equal to">Equal to</option>
      <option value="In">In</option>
      <option value="Not Equal to">Not Equal to</option>
      <option value="Not In">Not In</option>
      <option value="Greater than">Greater than</option>
      <option value="Smaller than">Smaller than</option>
      `
      var onchangePopulateCasesValue = 'populateCasesValue'
    }
    let html_ind_cases = `
    <div class="row indCases ${indentifier} col-12">
      <div class="col-3">
        <label>Scenario Name:</label>
        <input  class="form-control textInput casesName"  placeholder="Enter Cases Name" required>
      </div>
      <div class="col-3">
        <label>Scenario Parameter:</label>
        <select class="select2 form-control casesColumn" onchange="${onchangePopulateCasesValue}.call(this)">
        </select>
      </div>
      <div class="col-3">
        <label>Condition:</label>
        <select class="select2 form-control casesCond" onchange="changeSelectTag.call(this)">
          <option value="" disabled selected>Select condition</option>
          ${options}
        </select>
      </div>
      <div class="col-2">
        <label>Criteria:</label>
        <select class="select2 form-control casesValue">
        </select>
      </div>
      <div class="col-1">
        <i class="fas fa-remove" onclick="removeIndCases.call(this)" style="font-size: initial;padding-top: 30px;"></i>
      </div>
    </div>
    `
    return html_ind_cases
  }
  function indCasesHtml(id) {
    if (id!= undefined){
      var indentifier = 'field_based'
      var options = `
      <option value="Equal to">Equal to</option>
      <option value="Not Equal to">Not Equal to</option>
      <option value="Greater than">Greater than</option>
      <option value="Smaller than">Smaller than</option>
      `
      var onchangePopulateCasesValue = 'populateCasesValueFieldBased'
    }else{
      var indentifier = ''
      var options =`
      <option value="Equal to">Equal to</option>
      <option value="In">In</option>
      <option value="Not Equal to">Not Equal to</option>
      <option value="Not In">Not In</option>
      <option value="Greater than">Greater than</option>
      <option value="Smaller than">Smaller than</option>
      `
      var onchangePopulateCasesValue = 'populateCasesValue'
    }
    html_cases = `
    <div class="row indCases ${indentifier} col-12" style="margin-top:20px;">
      <div class="col-3">
        <input  class="form-control textInput casesName"  placeholder="Enter Cases Name" required>
      </div>
      <div class="col-3">
        <select class="select2 form-control casesColumn" onchange="${onchangePopulateCasesValue}.call(this)">
        </select>
      </div>
      <div class="col-3">
        <select class="select2 form-control casesCond" onchange="changeSelectTag.call(this)">
          ${options}
        </select>
      </div>
      <div class="col-2">
        <select class="select2 form-control casesValue">
        </select>
      </div>
      <div class="col-1">
        <i class="fas fa-remove" onclick="removeIndCases.call(this)" style="font-size: initial;"></i>
      </div>
    </div>
    `
    return html_cases
  }
  function addIndCasesFieldBased(dict,key){
    var html_cases
    if($(this).closest(".casesBody").find(".indCases")[0] != undefined){
      html_cases = indCasesHtml('field_based');
    } else {
      html_cases = indCasesHtmlFirst('field_based');
    }
    $(this).closest(".casesBody").append(html_cases);
    $(this).closest(".casesBody").find(".indCases").eq(-1).find("select").each(function() {

    $(this).select2( );
    })
    $(this).closest(".casesBody").find(".indCases").eq(-1).find(".casesColumn").empty();
    $(this).closest(".casesBody").find(".indCases").eq(-1).find(".casesColumn").append(`<option value="">Select column</option>`);
    for(let i = 0; i < allFieldsColumns.length; i++) {
      $(this).closest(".casesBody").find(".indCases").eq(-1).find(".casesColumn").append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`);
    }
    if (dict!= undefined && key!= undefined){
      $(this).closest(".casesBody").find('.casesName').eq(-1).val(dict['case_name']).trigger('change')
      $(this).closest(".casesBody").find('.casesColumn').eq(-1).val(dict['column']).trigger('change')
      $(this).closest(".casesBody").find('.casesCond').eq(-1).val(dict['condition']).trigger('change')
      $(this).closest(".casesBody").find('.casesValue').eq(-1).val(dict['field_based']).trigger('change')
    }

  }
  function addIndCases(id) {
    var html_cases
    if($(this).closest(".casesBody").find(".indCases")[0] != undefined){
      html_cases = indCasesHtml();
    } else {
      html_cases = indCasesHtmlFirst();
    }
    $(this).closest(".casesBody").append(html_cases);
    $(this).closest(".casesBody").find(".indCases").eq(-1).find("select").each(function() {
        $(this).select2({"tags":true});
    })
    $(this).closest(".casesBody").find(".indCases").eq(-1).find(".casesColumn").empty();
    $(this).closest(".casesBody").find(".indCases").eq(-1).find(".casesColumn").append(`<option value="">Select column</option>`);
    for(let i = 0; i < allFieldsColumns.length; i++) {
      $(this).closest(".casesBody").find(".indCases").eq(-1).find(".casesColumn").append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`);
    }
  }
  function removeIndCases(){
    $(this).closest(".indCases").remove();
  }
  function closeCases() {
    $("#formModal").modal('show')
    $("#casesModal").css("display","none")
  }
  function populateCasesValueFieldBased(){
    $(this).closest(".indCases").find(".casesValue").empty();
    $(this).closest(".indCases").find(".casesValue").append(`<option selected disbaled value="">Select</option>`)
    for(let i = 0; i < allFieldsColumns.length; i++) {
      $(this).closest(".indCases").find(".casesValue").append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`);
    }
  }
  function populateCasesValue() {
    $(this).closest(".indCases").find(".casesValue").empty();
    var thiss = $(this)
    $.ajax({
        url: window.location.pathname,
        data: {
          "operation":"populateCasesValue",
          "table":JSON.stringify($("#selectFormTable").val()),
          "column":$(this).closest(".indCases").eq(-1).find(".casesColumn").val(),
        },
        type: "POST",
        dataType: "json",
        "async":false,
        success: function (data) {
          for(let i = 0; i < data["value"].length; i++){
            thiss.closest(".indCases").find(".casesValue").append(`<option value="${data["value"][i]}">${data["value"][i]}</option>"`);
          }
        },
        failure: function () {
          $(".restoreL3").html("System l3 template")
          Swal.fire({icon: 'error',text: 'Error! No custom homepage exist. Please try again.'});
        },
      });
  }
  function changeSelectTag() {
    if($(this).val() == "In" || $(this).val() == "Not In"){
      $(this).closest(".indCases").find(".casesValue").select2("destroy");
      $(this).closest(".indCases").find(".casesValue").attr("multiple","multiple");
      $(this).closest(".indCases").find(".casesValue").select2({"tags":true});
    } else {
      $(this).closest(".indCases").find(".casesValue").select2("destroy");
      $(this).closest(".indCases").find(".casesValue").removeAttr("multiple");
      $(this).closest(".indCases").find(".casesValue").select2({"tags":true});
    }
  }
  function saveCases() {
    dic_cases = {}
    var error_handler = false
    let field_type_cases = ""
    $(this).closest("#casesModal").find(".indCases").each(function() {
      if(["",undefined,null," "].includes($(this).find(".casesName").val())){
        error_handler = true;
      } else{
        for(let i = 0; i < allFieldsColumns.length; i++){
          if(allFieldsColumns[i] ==  $(this).find(".casesColumn").val()){
            field_type_cases = allFieldsColumnsType[i];
            break;
          }
        }
        dic_cases[$(this).find(".casesName").val()] = {
          "case_name": $(this).find(".casesName").val(),
          "condition": $(this).find(".casesCond").val(),
          "value": $(this).find(".casesValue").val(),
          "column": $(this).find(".casesColumn").val(),
          "data_type": field_type_cases,
        }
        if ($(this).hasClass('field_based')){
          dic_cases[$(this).find(".casesName").val()] = {
            "case_name": $(this).find(".casesName").val(),
            "condition": $(this).find(".casesCond").val(),
            "value": $(this).find(".casesValue").val(),
            "column": $(this).find(".casesColumn").val(),
            "data_type": field_type_cases,
            'field_based':$(this).find(".casesValue").val(),
          }
        }else{
          dic_cases[$(this).find(".casesName").val()] = {
            "case_name": $(this).find(".casesName").val(),
            "condition": $(this).find(".casesCond").val(),
            "value": $(this).find(".casesValue").val(),
            "column": $(this).find(".casesColumn").val(),
            "data_type": field_type_cases,
          }
        }
      }
    })
    if(error_handler){
      Swal.fire({icon: 'warning',text: 'Case name cannot be left blank.'});
    }else{
      $('#JSConfig').find(".selectCases").empty();
      $('#JSConfig').find(".selectCases").append(`<option value="" disabled>Select cases</option>`);
      for(let [key,value] of Object.entries(dic_cases) ) {
        $('#JSConfig').find(".selectCases").append(`<option value="${key}">${key}</option>`);
      }
      $("#casesModal").css("display","none");
      $("#formModal").modal('show');
    }

  }
  function resetCases() {
    var ind_ = 0;
    $(".casesBody").find(".indCases").each(function() {
      if(1) {
        $(this).remove()
      } else{
        $(this).find(".casesName").empty();
        $(this).find(".casesColumn").empty();
        $(this).find(".casesValue").empty();
      }
      ind_ = ind_ + 1;
    })
  }
  function selectCases() {

  }
  $(".casesBody").find(".indCases").find("select").each(function() {
    $(this).select2({"tags":true});
  })
  $(".gjs-pn-buttons").find("span[title='Open Code']").on("click",function(){
    $(this).closest(".gjs-pn-panels").find(".code-panel").find("section").eq(1).css("display","none")
  })
  const addwidgetbutton = `<a href='#' data-toggle="modal" data-target="#widgetmodal" style="margin-left: 3px;margin-right: 8px;margin-bottom: 2px" class="widgetbtn gjs-pn-btn">
    <i class="fas fa-wrench" style="user-select: auto; "></i>
  </a>

  `;
  const addwidgettooltip = `<div class="widgettooltipdiv" style="display:none;position:absolute;height:auto; width: 60px;color:white;top: 43px; padding:5px;left: -15px;border-radius:4px;background-color:#343a40;"><span class="tooltiptext">Add Custom Widget</span></div>`;

  const nextbutton = `<a href='#' style="margin-left: 3px;margin-right: 8px;" target ="_blank" class="nextbtn gjs-pn-btn">
    <i class="fas fa-long-arrow-alt-right" style="user-select: auto;color: white; "></i>
  </a>`;


  $(".gjs-pn-panels")
  .children()
  .eq(1)
  .find(".gjs-pn-buttons")
  .prepend(addwidgetbutton)
  .append(addwidgettooltip);
  $(".gjs-pn-panels")
  .children()
  .eq(1)
  .find(".gjs-pn-buttons")
  .prepend(`
    <select class="select2 form control version" onchange="fetchVersion.call(this)">
      <option value="" disabled selected>Select version</option>
    </select>
  `)
  $(".gjs-pn-panels")
  .children()
  .eq(1)
  .find(".gjs-pn-buttons")
  .append(nextbutton);
  $(".widgetbtn").hover(() => {
        $(".widgettooltipdiv").css({
          display: "block",
        });
      });
      $(".widgetbtn").mouseout(() => {
        $(".widgettooltipdiv").css({
          display: "none",
        });
      });
      const getCategories = (blocks) => {
          const categories = [
            ...new Set(blocks.map((block) => block.attributes.category.id)),
          ];
          return categories;
        };
      $(".widgetbtn").click(() => {
        $("#panelname").empty();
        getCategories(editor_grapejs.BlockManager.getAll().models).forEach(
          (category) => {
            $("#panelname").append(
              `<option value="${category}">${category}</option>`
            );
          }
        );
        $('#panelname').select2({
          dropdownParent: $('#widgetmodal')
        });
        const css = editor_grapejs.CodeManager.getCode(editor_grapejs.getSelected(), 'css', {cssc: editor_grapejs.CssComposer});
      });
      $(".newpanelbtn").on("click", () => {
        $(this).css('background-color','var(--primary-color)');
        $(".newpanelform").css({
          display: "block",
        });
        $(".existingpanelform").css({
          display: "none",
        });
      });
      $(".existingpanelbtn").on("click", () => {
        $(this).css('background-color','var(--primary-color)');
        $(".newpanelform").css({
          display: "none",
        });
        $(".existingpanelform").css({
          display: "block",
        });
      });
      $(".savenewwidgetbtn").click((e) => {
        $(this).css('background-color','var(--primary-color)');
        e.preventDefault();
        const elementselected = editor_grapejs.getSelected();
        const panelname = $(".newpanelname").val();
        const widgetname = $(".newwidgetname").val();
        const iconclass = $('#newiconselect').val();
        const panelexists = getCategories(editor_grapejs.BlockManager.getAll().models).find((category)=>category===panelname)
        const blockexists = editor_grapejs.BlockManager.get(widgetname)
        const selectedhtml = editor_grapejs.getSelected().toHTML()
        const selectedcss = editor_grapejs.CodeManager.getCode(editor_grapejs.getSelected(), 'css', {cssc: editor_grapejs.CssComposer});


        if (
          panelname === "" ||
          !panelname ||

          widgetname === "" ||
          !widgetname

        ) {
          Swal.fire({icon: 'warning',text: 'Fields cannot be left blank. Please ensure to fill all necessary fields.'});
        }else if(panelexists){
          Swal.fire({icon: 'warning',text: 'Panel already exists. Please add a new panel or select an existing one.'});
        }
        else if (elementselected.length === 0) {
          Swal.fire({icon: 'warning',text: 'Select a container/ block to save.'});
        } else if(blockexists){
          Swal.fire({icon: 'warning',text: 'Block with the same ID already exists, please choose a unique name to proceed.'});
        }else {
          bm.add(widgetname, {
            label: `<i style="font-size: xx-large; margin-bottom: 20px" data-panel="${panelname}" data-widget="${widgetname}" ondblclick="deleteWidgets.call(this)" class="${iconclass}"></i><div class="gjs-block-label">${widgetname}</div>`,
            content: `${selectedhtml} <style>${selectedcss}</style>`,
            // content: [...editor_grapejs.getSelectedAll(), ...styles1],
            category: panelname,
            attributes: {
              title: widgetname,
            },
          });
          let url_string = window.location.pathname
          let f_occ = url_string.indexOf('/', url_string.indexOf('/') + 1)
          let s_occ = url_string.indexOf('/', url_string.indexOf('/') + f_occ +1)
          let t_occ = url_string.indexOf('/', url_string.indexOf('/') + s_occ +1)
          let app_code2 = url_string.substring(f_occ+1,s_occ)
          let current_dev_mode2 = url_string.substring(s_occ+1,t_occ)
          let modes = ["Build","Edit"]
          let url = ""
          if(current_dev_mode2 != "Build" && current_dev_mode2 != "Edit"){
            current_dev_mode2 = "User"
          }
          $.ajax({
            url:`/users/${app_code2}/${current_dev_mode2}/processGraphModule/`,
            data: {
              "operation":"create_widgets",
              "widget": JSON.stringify(editor_grapejs.BlockManager.get(widgetname))
            },
            type: "POST",
            dataType: "json",
            success: function () {
              Swal.fire({icon: 'success',text: 'Widget saved successfully!'});
              // $("#widgetmodal").modal("hide");
            },
            failure: function () {
              Swal.fire({icon: 'error',text: 'Error! Failure in saving the Widget. Please try again.'});
            },
          });

        }
      });
      $(".savenewwidgetbtnstd").click((e) => {
        $(this).css('background-color','var(--primary-color)');
        e.preventDefault();
        const elementselected = editor_grapejs.getSelected();
        const panelname = $(".newpanelname").val();
        const widgetname = $(".newwidgetname").val();
        const iconclass = $('#newiconselect').val();
        const panelexists = getCategories(editor_grapejs.BlockManager.getAll().models).find((category)=>category===panelname)
        const blockexists = editor_grapejs.BlockManager.get(widgetname)
        const selectedhtml = editor_grapejs.getSelected().toHTML()
        const selectedcss = editor_grapejs.CodeManager.getCode(editor_grapejs.getSelected(), 'css', {cssc: editor_grapejs.CssComposer});


        if (
          panelname === "" ||
          !panelname ||

          widgetname === "" ||
          !widgetname

        ) {
          Swal.fire({icon: 'warning',text: 'Fields cannot be left blank. Please ensure to fill all necessary fields'});
        }else if(panelexists){
          Swal.fire({icon: 'warning',text: 'Panel already exists. Please add a new panel or select an existing one.'});
        }
        else if (elementselected.length === 0) {
          Swal.fire({icon: 'warning',text: 'Select a container/ block to save.'});
        } else if(blockexists){
          Swal.fire({icon: 'warning',text: 'Block with the same ID already exists, please choose a unique name to proceed.'});
        }else {
          bm.add(widgetname, {
            label: `<i style="font-size: xx-large; margin-bottom: 20px" data-panel="${panelname}" data-widget="${widgetname}"  class="${iconclass}"></i><div class="gjs-block-label">${widgetname}</div>`,
            content: `${selectedhtml} <style>${selectedcss}</style>`,
            // content: [...editor_grapejs.getSelectedAll(), ...styles1],
            category: panelname,
            attributes: {
              title: widgetname,
            },
          });
          $.ajax({
            url:window.location.pathname,
            data: {
              "operation":"create_widgets_std",
              "widget": JSON.stringify(editor_grapejs.BlockManager.get(widgetname))
            },
            type: "POST",
            dataType: "json",
            success: function () {
              Swal.fire({icon: 'success',text: 'Widget saved successfully!'});
              // $("#widgetmodal").modal("hide");
            },
            failure: function () {
              Swal.fire({icon: 'error',text: 'Error! Failure in saving the Widget. Please try again.'});
            },
          });

        }
      });
      var deleteWidgets = function() {
        Swal.fire({
          icon:'question',
          text: "Do you want to delete the widget? Click 'Yes' to confirm or click 'No' if you do not wish to delete it.",
                    showDenyButton: true,
                    showCancelButton: true,
                    confirmButtonText: 'Yes',
                    denyButtonText: 'No',
                  }).then((result) => {
                    if (result.isConfirmed) {
                      var remove_widget = "";
                      id_widget = $(this).attr('data-widget')
                      for(let i = 0; i < widgetsarray.length; i++) {
                        if(id_widget == widgetsarray[i]['id']) {
                          remove_widget = widgetsarray[i]['id']
                          widgetsarray.splice(i,1);
                          break;
                        }
                      }
                      $.ajax({
                          url:window.location.pathname,
                          data: {
                            "operation":"delete_widgets",
                            "widget": JSON.stringify(widgetsarray)
                          },
                          type: "POST",
                          dataType: "json",
                          success: function () {
                            Swal.fire({icon: 'success',text: 'Widget deleted successfully.'});
                            bm.remove(remove_widget)
                          },
                          failure: function () {
                            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                          },
                        });
                    }
                  })
      }
      $(".saveexistingwidgetbtn").click((e) => {
        e.preventDefault();
        const elementselected = editor_grapejs.getSelectedAll();
        const panelname = $('#panelname option:selected').val();
        const widgetname = $(".existingwidgetname").val();
        const iconclass = $('#iconselect').val();
        const blockexists = editor_grapejs.BlockManager.get(widgetname)
        const selectedhtml = editor_grapejs.getSelected().toHTML()
        const selectedcss = editor_grapejs.CodeManager.getCode(editor_grapejs.getSelected(), 'css', {cssc: editor_grapejs.CssComposer});
        if (
          panelname === "" ||
          !panelname ||

          widgetname === "" ||
          !widgetname

        ) {
          Swal.fire({icon: 'warning',text: 'Fields cannot be left blank. Please ensure to fill all necessary fields.'});
        } else if (elementselected.length === 0) {
          Swal.fire({icon: 'warning',text: 'Select a container/ block to save.'});
        }else if(blockexists){
          Swal.fire({icon: 'warning',text: 'Block with the same ID already exists, please choose a unique name to proceed.'});
        } else {
          bm.add(widgetname, {
            label: `<i style="font-size: xx-large; margin-bottom: 20px" data-panel="${panelname}" data-widget="${widgetname}" ondblclick="deleteWidgets.call(this)" class="${iconclass}"></i><div class="gjs-block-label">${widgetname}</div>`,
            content: `${selectedhtml} <style>${selectedcss}</style>`,
            category: panelname,
            attributes: {
              title: widgetname,
            },
          });
          $.ajax({
            url:window.location.pathname,
            data: {
              "operation":"create_widgets",
              "widget": JSON.stringify(editor_grapejs.BlockManager.get(widgetname))
            },
            type: "POST",
            dataType: "json",
            success: function () {
              Swal.fire({icon: 'success',text: 'Widget saved successfully!'});
              // $("#widgetmodal").modal("hide");
            },
            failure: function () {
              Swal.fire({icon: 'error',text: 'Error! Failure in saving the Widget. Please try again.'});
            },
          });
        }
      });
      $(".saveexistingwidgetbtnstd").click((e) => {
        e.preventDefault();
        const elementselected = editor_grapejs.getSelectedAll();
        const panelname = $('#panelname option:selected').val();
        const widgetname = $(".existingwidgetname").val();
        const iconclass = $('#iconselect').val();
        const blockexists = editor_grapejs.BlockManager.get(widgetname)
        const selectedhtml = editor_grapejs.getSelected().toHTML()
        const selectedcss = editor_grapejs.CodeManager.getCode(editor_grapejs.getSelected(), 'css', {cssc: editor_grapejs.CssComposer});
        if (
          panelname === "" ||
          !panelname ||

          widgetname === "" ||
          !widgetname

        ) {
          Swal.fire({icon: 'warning',text: 'Fields cannot be left blank. Please ensure to fill all necessary fields'});
        } else if (elementselected.length === 0) {
          Swal.fire({icon: 'warning',text: 'Select a container/ block to save.'});
        }else if(blockexists){
          Swal.fire({icon: 'warning',text: 'Block with the same ID already exists, please choose a unique name to proceed.'});
        } else {
          bm.add(widgetname, {
            label: `<i style="font-size: xx-large; margin-bottom: 20px" data-panel="${panelname}" data-widget="${widgetname}" class="${iconclass}"></i><div class="gjs-block-label">${widgetname}</div>`,
            content: `${selectedhtml} <style>${selectedcss}</style>`,
            category: panelname,
            attributes: {
              title: widgetname,
            },
          });
          $.ajax({
            url:window.location.pathname,
            data: {
              "operation":"create_widgets_std",
              "widget": JSON.stringify(editor_grapejs.BlockManager.get(widgetname))
            },
            type: "POST",
            dataType: "json",
            success: function () {
              Swal.fire({icon: 'success',text: 'Widget saved successfully!'});
              // $("#widgetmodal").modal("hide");
            },
            failure: function () {
              Swal.fire({icon: 'error',text: 'Error! Failure in saving the Widget. Please try again.'});
            },
          });
        }
      });

    var True = true;
    function allowModifyColumn() {
      if($(this).prop("checked")){
        $(".modifyColumn").css("display","flex")
      } else {
        $(".modifyColumn").css("display","flex")
      }
    }
    function previewMaster(){
      if ($('#master_preview_mode').prop("checked")){
        $("#save_preview_mode_div").css('display','flex')
      }else{
        $("#save_preview_mode_div").css('display','none')
      }
    }
    function populateModifyColumn(){
      $.ajax({
        url: window.location.pathname,
        data: {
          'operation': 'formTableFields',
          'tablesForm': JSON.stringify($("#modifyColumnTable").val()),
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          $("#modifyColumn_").empty();
          for (j in data.finalFieldList) {
            $("#modifyColumn_").append(`<option data-table="${data.finalFieldList[j]['table']}" data-type="${data.finalFieldList[j]['fieldType']}" data-choice="${data.finalFieldList[j]["dropdown"]}" data-null="${data.finalFieldList[j]['null']}" value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
          }
          if($("#modifyColumnTable").attr("data-reload") == "yes"){
            let data1 = JSON.parse($("#modifyColumnTable").attr("data-reloaddata"))
            $("#modifyColumnTable").removeAttr("data-reload")
            $("#modifyColumnTable").removeAttr("data-reloaddata")
            modifyColumnTableLoad(data1)
          }
        },
        failure: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        },
      });
    }
    var process_sprocess_ = {};
    function editButton(obj){
      $("#formModal").modal('hide')
      var attrData = $(obj).attr('data-list')
      if (attrData == ''|| attrData =='{}'){

      }else {
        var parsedAttrdata = JSON.parse(attrData)
        $('#editButtonModal').find('.modal-body').empty()
        $('#editButtonModal').find('.modal-body').append(`
        <div class="card-header">
          <div class="float-right" style="margin-right: 6px;">
            <button onclick="populateEditButtonContent(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
          </div>
        </div>
        `)
        i = 0
        for (var key in parsedAttrdata){
          var content = EditButtonContent()
          $('#editButtonModal').find('.modal-body').append(content)
          var singleCard = $('#editButtonModal').find('.masterstyling').eq(i)
          $(singleCard).find('.selectButtonsOptions').val(key).trigger('change')
          for (var key2 in parsedAttrdata[key]){
            $(singleCard).find('[data-css]').each(function(){
              if ($(this).attr('data-css') == key2){
                $(this).val(parsedAttrdata[key][key2]).trigger('change')
              }
            })
          }
          $(singleCard).find('.iconappend').attr('data-list',parsedAttrdata[key]['data-icon'])
          i = i + 1
      }
      }
      $('#editButtonModal').modal('show')
      $('#editButtonModal').find('select').each(function(){

    $(this).select2( )
  })
    }
    function hexToRGB(hex, alpha) {
      var r = parseInt(hex.slice(1, 3), 16),
          g = parseInt(hex.slice(3, 5), 16),
          b = parseInt(hex.slice(5, 7), 16);

      if (alpha) {
          return "rgba(" + r + "," + g + "," + b + "," + alpha + ")";
      } else {
          return "rgb(" + r + "," + g + "," + b + ")";
      }
  }

    function saveEditButton(obj){

      var cards = $('#editButtonModal').find('.masterstyling')
      var fullValues = {}
      var lengthOfCards = cards.length;
      for (let i = 0; i < lengthOfCards; i++) {
        var values = {}
        var singleCard = $('#editButtonModal').find('.masterstyling').eq(i)
        var selectedButton = $(singleCard).find('.selectButtonsOptions').val()
        $(singleCard).find('[data-css]').each(function(){values[$(this).attr('data-css')] = $(this).val()})
        values['data-icon'] = $(singleCard).find('.iconappend').attr('data-list')
        values['rgba'] = hexToRGB(values['background-color'],values['opacity'])
        fullValues[selectedButton] = values
      }
      $('#editButtonId').attr('data-list',JSON.stringify(fullValues))
      $('#editButtonModal').modal('hide')
      $("#formModal").modal('show')
    }
    function closeEditButton(obj){
      $('#editButtonModal').modal('hide')
      $("#formModal").modal('show')
    }
    function addCustomButton(){
      $("#formModal").modal('hide')
      let data1 = $(this).attr("data-reloaddata")
      if (data1 != undefined){
        $(this).removeAttr("data-reloaddata")
        data1 = JSON.parse(data1)
        customButtonLoad(data1)
      }
      $("#customButtonModal").css("display","block");
    }
    function customButtonProcess() {
      if(process_sprocess_.hasOwnProperty($(this).val())){
        $(this).closest(".indCustomButton").find(".customButtonSubProcess").empty();
        for(let i = 0; i < process_sprocess_[$(this).val()].length; i++){
          $(this).closest(".indCustomButton").find(".customButtonSubProcess").append(`<option value="${process_sprocess_[$(this).val()][i]}">${process_sprocess_[$(this).val()][i]}</option>`);
        }
      }
    }
    function closeCustomButton(){
      $("#customButtonModal").css("display","none");
      $("#formModal").modal('show')
    }
    function customButtonNavigate(){
      if($(this).val() == "Navigate"){
        $(this).closest(".indCustomButton").find(".customButtonAppInAppCont").css("display","block")
      } else {
        $(this).closest(".indCustomButton").find(".customButtonAppInAppCont").css("display","none");
        $(this).closest(".indCustomButton").find(".customButtonCustomLinkCont").css("display","none");
        $(this).closest(".indCustomButton").find(".customButtonPSpCont").css("display","none");
      }
    }
    function customButtonAppInApp(){
      if($(this).val() == "In App"){
        $(this).closest(".indCustomButton").find(".customButtonCustomLinkCont").css("display","none");
        $(this).closest(".indCustomButton").find(".customButtonPSpCont").css("display","block");
      } else {
        $(this).closest(".indCustomButton").find(".customButtonPSpCont").css("display","none");
        $(this).closest(".indCustomButton").find(".customButtonCustomLinkCont").css("display","block");
      }
    }
    function addIndCustomButtons(){
      $(this).closest(".customButtonBody").append(customButtonHtml());
      $(this).closest(".customButtonBody").find(".customButtonProcess").eq(-1).append(`<option value="">Select process</option>`);
      for(let [key,value] of Object.entries(process_sprocess_) ){
        $(this).closest(".customButtonBody").find(".customButtonProcess").eq(-1).append(`<option value="${key}">${key}</option>`);
      }
      $(this).closest(".customButtonBody").find(".indCustomButton").eq(-1).find("select").select2();
    }
    function removeIndCustomButtons(){
      $(this).closest(".indCustomButton").remove();
    }
    function customButtonHtml(){
      var html_customButton = ""
      html_customButton = html_customButton + `
      <div class="row indCustomButton" style="margin-top: 15px;">
        <div class="col-2">
          <label>Button Name:</label>
          <input class="form-control customButtonName"  placeholder="Enter Button Name" required>
        </div>
        <div class="col-2">
          <label>Navigate ?:</label>
          <select class="select2 form-control customButtonNavigate" onchange="customButtonNavigate.call(this)">
            <option value="" disabled selected>Navigate</option>
            <option value="Navigate">Yes</option>
            <option value="Idle">No</option>
          </select>
        </div>
        <div class="col-2 customButtonAppInAppCont" style="display:none;">
          <label>Navigate to:</label>
          <select class="select2 form-control customButtonAppInApp" onchange="customButtonAppInApp.call(this)">
            <option value="" disabled selected>Navigate to</option>
            <option value="In App">In app screen</option>
            <option value="Custom">Custom url</option>
          </select>
        </div>
        <div class="col-4 customButtonCustomLinkCont" style="display:none;">
          <label>Custom navigation:</label>
          <input class="form-control customButtonCustomLink" type="url">
        </div>
        <div class="col-2 customButtonPSpCont" style="display:none;">
          <label>Process:</label>
          <select class="select2 form-control customButtonProcess" onchange="customButtonProcess.call(this)">
            <option value="" disabled selected>Select process</option>
          </select>
        </div>
        <div class="col-2 customButtonPSpCont" style="display:none;">
          <label>Subprocess:</label>
          <select class="select2 form-control customButtonSubProcess">
            <option value="" disabled selected>Select subprocess</option>
          </select>
        </div>
        <div class="col-1">
          <label>Color:</label>
          <input class="form-control customButtonColor" type="color" required>
        </div>
        <div class="col-1">
          <i class="fas fa-remove" onclick="removeIndCustomButtons.call(this)" style="font-size: initial;margin-top: 35px;"></i>
        </div>
      </div>
      `
      return html_customButton
    }
    var dic_cb = {}
    function saveCustomButton(){
      dic_cb = {}
      $("#selectAction").find("option[data-cb]").each(function(){
        $("#formModal").find(`input[name='${$(this).val()}']`).remove();
        $(this).remove();
      })
      $(".indCustomButton").each(function() {
        $("#selectAction").append(`<option data-cb="cb" value="${$(this).find(".customButtonName").val()}">${$(this).find(".customButtonName").val()}</option>`)
        dic_cb[$(this).find(".customButtonName").val()] = {
          "name":$(this).find(".customButtonName").val(),
          "navigation": $(this).find(".customButtonNavigate").val(),
          "navigation_type": $(this).find(".customButtonAppInApp").val(),
          "process": $(this).find(".customButtonProcess").val(),
          "subprocess": $(this).find(".customButtonSubProcess").val(),
          "link": $(this).find(".customButtonCustomLink").val(),
          "color": $(this).find(".customButtonColor").val()
        }
      })
      $("#customButtonModal").css("display","none");
      $("#formModal").modal('show')
    }
    function p_sp_populate(){
      $.ajax({
        url: window.location.pathname,
        data: {
          "operation":"fetchProcessSubprocess",
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          process_sprocess_ = data;
          $(".customButtonProcess").empty()
          $(".customButtonProcess").append(`<option value="">Select process</option>`);
          for(let [key,value] of Object.entries(process_sprocess_) ){
            $(".customButtonProcess").append(`<option value="${key}">${key}</option>`);
          }
        },
        failure: function () {
          Swal.fire({icon: 'warning',text: 'No process or subprocess exist.'});
        },
      });
    }
    button_dic = []
    function appendButton(thiss){
      for(let i = 0; i < button_dic.length; i++){
        thiss.append(button_dic[i])
      }
    }
    $("#selectTablePC").on('change', function() {
      seltables = $(this).val();
    })

    $("#tablemapsave").on('click', function () {
      MultipleTableMapping = {}
      $(".addednewrow").each(function() {
          MultipleTableMapping[$(this).find(".table").val()] = $(this).find(".id").val()
        })
        $("#map-save-data").attr('table-map-data', JSON.stringify(MultipleTableMapping))
    })
    $("#map-save-data").on('click', function () {
      $("#addrowm").empty()
      if ($("#map-save-data").attr('table-map-data') != "") {
        mtablemap = JSON.parse($("#map-save-data").attr('table-map-data'))
        if (Object.keys(mtablemap).length > 0) {
                    for (i in mtablemap) {
                      addrowmap();
                      $(".addednewrow").last().each(function() {
                          $(this).find(".table").val(i).trigger("change")
                          $(this).find(".id").val(mtablemap[i]).trigger("change")
                        })

                      }
                    }
                  }
    })
    function addrowmap() {
      var elem = `<div class="addednewrow form-group mt-2 form-inline">
        <select class="select2 mr-2 form-control table" style="width:200px"><option selected disabled>Select table</option>`
      if(typeof(seltables) != 'object'){
        seltables = [seltables]
      }
      $.each(seltables, function(key, value) {
      elem += `<option value=${value}>${value}</option>`
      });
      elem += `</select><select class="select2 form-control id" style="width:200px"><option selected>Select element</option>`

      $('#selectMultiConfig option').each(function () {
        elem += `<option value=${$(this).val()}>${$(this).text()}</option>`
      });
      elem += `</select>
      <button class="btn btn-sm fa fa-minus" onclick="$(this).parent().remove()"></button>
      </div>`
      $("#addrowm").append(elem);
      $("#addrowm").find("select").select2();
      $("#addrowm").find(".select2").addClass("mr-3")
    }
    </script>
    <script>
    flowColumn = []
    flowValue = []
    function flowTable() {
      if($(this).val() != undefined) {
        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFields',
            'tablesForm': JSON.stringify([$(this).val()]),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            ind = 0;
            $(".indFlow").each(function() {
              if(ind != 0){
                $(this).remove();
              }
              ind++
            })
            $(".flowColumn").empty();
            $(".flowColumn").append(`<option value"" disabled selected>Select column</option>`)
            for (j in data.finalFieldList) {
              if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from') {
                flowColumn[j] = {
                  "name":data.finalFieldList[j]['fieldName'],
                  "verbose":data.finalFieldList[j]['verbose'],
                  "datatype":data.finalFieldList[j]['fieldType']
                }
                $(".flowColumn").append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
              }
            }
            if($(".flowTable").attr("data-reload") == "yes"){
              let data1 = JSON.parse($(".flowTable").attr("data-reloaddata"))
              $(".flowTable").removeAttr("data-reloaddata")
              $(".flowTable").removeAttr("data-reload")
              userValidationLoad(data1)
            }
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })
      }
    }
    function userValidation() {
      if($(this).prop("checked")) {
        $(".flowUserValidation").css("display","flex");
      } else {
        $(".flowUserValidation").css("display","none");
        $(".flowTable").val("").trigger("change");
        ind = 0;
        $(".indFlow").each(function() {
          if(ind != 0){
            $(this).remove();
          }
          ind++
        })
      }
    }
    function indFlowHtml() {
      html_cases = `
      <div class="row indFlow flowUserValidation" style="margin-top:10px;">
        <div class="col-4">
          <select class="select2 form-control flowColumn" onchange="populateFlowValue.call(this)">
          </select>
        </div>
        <div class="col-4">
          <select class="select2 form-control flowCond" onchange="changeFlowSelectTag.call(this)">
            <option value="" disabled selected>Select condition</option>
            <option value="Equal to">Equal to</option>
            <option value="IN">In</option>
            <option value="Not Equal to">Not Equal to</option>
            <option value="NOT IN">Not In</option>
            <option value="Greater than">Greater than</option>
            <option value="Smaller than">Smaller than</option>
            <option value="Starts with">Starts with</option>
            <option value="Ends with">Ends with</option>
          </select>
        </div>
        <div class="col-3">
          <select class="select2 form-control flowValue">
          </select>
        </div>
        <div class="col-1">
          <i class="fas fa-remove" onclick="removeIndFlow.call(this)" style="font-size: initial;"></i>
        </div>
      </div>
      `
      return html_cases
    }
    function changeFlowSelectTag() {
      if($(this).val() == "IN" || $(this).val() == "NOT IN"){
        $(this).closest(".indFlow").find(".flowValue").select2("destroy");
        $(this).closest(".indFlow").find(".flowValue").attr("multiple","multiple");
        $(this).closest(".indFlow").find(".flowValue").select2({"tags":true});
      } else {
        $(this).closest(".indFlow").find(".flowValue").select2("destroy");
        $(this).closest(".indFlow").find(".flowValue").removeAttr("multiple");
        $(this).closest(".indFlow").find(".flowValue").select2({"tags":true});
      }
    }
    function addIndFlow() {
      var html_flow = indFlowHtml();
      $(this).closest(".flowBody").append(html_flow);
      $(this).closest(".flowBody").find(".indFlow").eq(-1).find("select").each(function() {
        $(this).select2({"tags":true});
      })
      $(this).closest(".flowBody").find(".indFlow").eq(-1).find(".flowColumn").empty();
      $(this).closest(".flowBody").find(".indFlow").eq(-1).find(".flowColumn").append(`<option value="">Select column</option>`);
      for(let i = 0; i < flowColumn.length; i++) {
        $(this).closest(".flowBody").find(".indFlow").eq(-1).find(".flowColumn").append(`<option value="${flowColumn[i]["name"]}">${flowColumn[i]["verbose"]}</option>`);
      }
    }
    function removeIndFlow(){
      $(this).closest(".indFlow").remove();
    }
    function closeCases() {
      $("#formModal").modal('show')
      $("#casesModal").css("display","none")
    }
    function populateFlowValue() {
      $(this).closest(".indFlow").find(".flowValue").empty();
      var thiss = $(this)
      $.ajax({
          url: window.location.pathname,
          data: {
            "operation":"populateCasesValue",
            "table":JSON.stringify([$(".flowTable").val()]),
            "column":$(this).closest(".indFlow").eq(-1).find(".flowColumn").val(),
          },
          type: "POST",
          dataType: "json",
          "async":false,
          success: function (data) {

            for(let i = 0; i < data["value"].length; i++){
              thiss.closest(".indFlow").find(".flowValue").append(`<option value="${data["value_real"][i]}">${data["value"][i]}</option>"`);
            }
            thiss.closest(".indFlow").find(".flowValue").select2({"tags":true})
          },
          failure: function () {
            $(".restoreL3").html("System l3 template")
            Swal.fire({icon: 'error',text: 'Error! No custom homepage exist. Please try again.'});
          },
        });
    }
    </script>
    <script>
      $('#listViewAppTempVDAlignment').on('click', ()=>{
        if ($('#selectTemplate').val() == "Approval Template") {
          $('#accordionColumnAlignment').css('display', 'block');
          $('#accordionColumnAlignmentViewDetail').css('display', 'none');
          var existingConfig = $('#saveApprovalTColumnAlignmentButton').attr('data-config');
          if (existingConfig) {
            existingConfig = JSON.parse(existingConfig);
            if (existingConfig.transaction_data_config) {
              $('#selectGlobalHeaderTDColumnAlignment').val(existingConfig.transaction_data_config.global_header).trigger('change');
              $('#selectGlobalContentTDColumnAlignment').val(existingConfig.transaction_data_config.global_content).trigger('change');
              var fieldLevelConfig = Array(Object.values(existingConfig.transaction_data_config.field_level_config))[0];
              for (let val in fieldLevelConfig) {
                var fData = fieldLevelConfig[val];
                $('#tDataColumnAlignmentContainer').find('.row.col-12').eq(val).find('.col-4').eq(1).find('.header').val(fData.header).trigger('change');
                $('#tDataColumnAlignmentContainer').find('.row.col-12').eq(val).find('.col-4').eq(2).find('.content').val(fData.content).trigger('change');
              }
            }
            if (existingConfig.audit_trail_config) {
              $('#selectAuditTGlobalHeaderColumnAlignment').val(existingConfig.audit_trail_config.global_header).trigger('change');
              $('#selectAuditTGlobalContentColumnAlignment').val(existingConfig.audit_trail_config.global_content).trigger('change');
              var fieldLevelConfig = Array(Object.values(existingConfig.audit_trail_config.field_level_config))[0];
              for (let val in fieldLevelConfig) {
                var fData = fieldLevelConfig[val];
                $('#collapseColumnAlignmentTwo').find('.row.auditTrailFieldLevelContainer').eq(val).find('.col-4').eq(1).find('.header').val(fData.header).trigger('change');
                $('#collapseColumnAlignmentTwo').find('.row.auditTrailFieldLevelContainer').eq(val).find('.col-4').eq(2).find('.content').val(fData.content).trigger('change');
              }
            }
            if (existingConfig.approval_level_config) {
              $('#selectLevelConfigGlobalHeaderColumnAlignment').val(existingConfig.approval_level_config.global_header).trigger('change');
              $('#selectLevelConfigGlobalContentColumnAlignment').val(existingConfig.approval_level_config.global_content).trigger('change');
              var fieldLevelConfig = Array(Object.values(existingConfig.approval_level_config.field_level_config))[0];
              for (let val in fieldLevelConfig) {
                var fData = fieldLevelConfig[val];
                $('#collapseColumnAlignmentThree').find('.row.levelConfigFieldLevelContainer').eq(val).find('.col-4').eq(1).find('.header').val(fData.header).trigger('change');
                $('#collapseColumnAlignmentThree').find('.row.levelConfigFieldLevelContainer').eq(val).find('.col-4').eq(2).find('.content').val(fData.content).trigger('change');
              }
            }
          }
        } else {
          $('#accordionColumnAlignment').css('display', 'none');
          $('#accordionColumnAlignmentViewDetail').css('display', 'block');
        }
        $('#viewDetailsColumnAlignmentModal').modal('show');
      });

      $('#selectTableVDColumnAlignment').on('select2:select', function(){
        if ($(this).val()) {
          $.ajax({
            url: window.location.pathname,
            data: {
              'operation': 'formTableFields',
              'tablesForm': JSON.stringify([$(this).val()]),
            },
            type: "POST",
            dataType: "json",
            async:false,
            success: function (data) {
              $("#selectColumnVDColumnAlignment").empty();
              $('#vDataColumnAlignmentContainer').empty();
              $("#selectColumnVDColumnAlignment").append(`<option value"" disabled selected>Select column</option>`)
              for (j in data.finalFieldList) {
                $("#selectColumnVDColumnAlignment").append(`<option data-table="${data.finalFieldList[j]['table']}" value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
              }
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
          });
        }
      });

      $("#selectColumnVDColumnAlignment").on('select2:select', function(){
        if ($(this).val()) {
          $('#vDataColumnAlignmentContainer').append(`
            <div class="row col-12">
              <div class="col-4">
                <span class="removeAlignment">&times;</span> &nbsp; <strong data-value="${$(this).val()}">${$("#selectColumnTDColumnAlignment > option:selected").text()}</strong>
              </div>
              <div class="col-4">
                <select class="select2 form-control header">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
              <div class="col-4">
                <select class="select2 form-control content">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
            </div>
          `);
          $('#vDataColumnAlignmentContainer').find('.row').eq(-1).find('.select2').select2();
          $('#vDataColumnAlignmentContainer').find('.row').eq(-1).find('.removeAlignment').on('click', function(){
            $(this).parent().parent().remove();
          })
        }
      });

      $('#saveApprovalTColumnAlignmentButton').on('click', function(){
        var approvalTempColumnAlignmentConfig = {};

        if ($('#selectTemplate').val() == "Approval Template") {
          // Transaction Data Config
          var transactionDataConfig = {};
          transactionDataConfig['global_header'] = $('#selectGlobalHeaderTDColumnAlignment').val();
          transactionDataConfig['global_content'] = $('#selectGlobalContentTDColumnAlignment').val();
          var individualFieldConfigTD = {};
          $('#tDataColumnAlignmentContainer').find('.row.col-12').each(function(){
            var fieldName = $(this).find('.col-4').eq(0).find('strong').text();
            var headerAlignment = $(this).find('.col-4').eq(1).find('.header').val();
            var contentAlignment = $(this).find('.col-4').eq(2).find('.content').val();
            individualFieldConfigTD[fieldName] = {header: headerAlignment, content: contentAlignment};
          });
          transactionDataConfig['field_level_config'] = individualFieldConfigTD;
          approvalTempColumnAlignmentConfig['transaction_data_config'] = transactionDataConfig;

          // Audit Trail Config
          var auditTrailConfig = {}
          auditTrailConfig['global_header'] = $('#selectAuditTGlobalHeaderColumnAlignment').val();
          auditTrailConfig['global_content'] = $('#selectAuditTGlobalContentColumnAlignment').val();
          var individualFieldConfigAuditT = {};
          $('#collapseColumnAlignmentTwo').find('.row.auditTrailFieldLevelContainer').each(function(){
            var fieldName = $(this).find('.col-4').eq(0).find('strong').text();
            var headerAlignment = $(this).find('.col-4').eq(1).find('.header').val();
            var contentAlignment = $(this).find('.col-4').eq(2).find('.content').val();
            individualFieldConfigAuditT[fieldName] = {header: headerAlignment, content: contentAlignment};
          });
          auditTrailConfig['field_level_config'] = individualFieldConfigAuditT;
          approvalTempColumnAlignmentConfig['audit_trail_config'] = auditTrailConfig;

          // Approval Level Config
          var approvalLevelConfig = {}
          approvalLevelConfig['global_header'] = $('#selectLevelConfigGlobalHeaderColumnAlignment').val();
          approvalLevelConfig['global_content'] = $('#selectLevelConfigGlobalContentColumnAlignment').val();
          var individualFieldConfigLevelC = {};
          $('#collapseColumnAlignmentThree').find('.row.levelConfigFieldLevelContainer').each(function(){
            var fieldName = $(this).find('.col-4').eq(0).find('strong').text();
            var headerAlignment = $(this).find('.col-4').eq(1).find('.header').val();
            var contentAlignment = $(this).find('.col-4').eq(2).find('.content').val();
            individualFieldConfigLevelC[fieldName] = {header: headerAlignment, content: contentAlignment};
          });
          approvalLevelConfig['field_level_config'] = individualFieldConfigLevelC;
          approvalTempColumnAlignmentConfig['approval_level_config'] = approvalLevelConfig;

          // Approvers Config
          var approversConfig = {}
          approversConfig['global_header'] = $('#selectApproversGlobalHeaderColumnAlignment').val();
          approversConfig['global_content'] = $('#selectApproversGlobalContentColumnAlignment').val();
          approversConfig['field_level_config'] = {};
          approvalTempColumnAlignmentConfig['approver_config'] = approversConfig;

          // Approval Decision Email Config
          var approvalEmailConfig = {}
          approvalEmailConfig['global_header'] = $('#selectApprovalEmailGlobalHeaderColumnAlignment').val();
          approvalEmailConfig['global_content'] = $('#selectApprovalEmailGlobalContentColumnAlignment').val();
          approvalEmailConfig['field_level_config'] = {};
          approvalTempColumnAlignmentConfig['approval_decision_email_config'] = approvalEmailConfig;

          // Approved By Config
          var approvedByConfig = {}
          approvedByConfig['global_header'] = $('#selectApprovedByGlobalHeaderColumnAlignment').val();
          approvedByConfig['global_content'] = $('#selectApprovedByGlobalContentColumnAlignment').val();
          approvedByConfig['field_level_config'] = {};
          approvalTempColumnAlignmentConfig['approved_by_config'] = approvedByConfig;

          // Approval Comments Config
          var approvalCommentsConfig = {}
          approvalCommentsConfig['global_header'] = $('#selectApprovalCommentsGlobalHeaderColumnAlignment').val();
          approvalCommentsConfig['global_content'] = $('#selectApprovalCommentsGlobalContentColumnAlignment').val();
          approvalCommentsConfig['field_level_config'] = {};
          approvalTempColumnAlignmentConfig['approval_comments_config'] = approvalCommentsConfig;
        } else {
          var viewDetailsConfig = {};
          viewDetailsConfig['column'] = $('#selectColumnForVDColAlignment').val();
          viewDetailsConfig['global_header'] = $('#selectGlobalHeaderVDColumnAlignment').val();
          viewDetailsConfig['global_content'] = $('#selectGlobalContentVDColumnAlignment').val();
          var individualFieldConfigVD = {};
          $('#vDataColumnAlignmentContainer').find('.row.col-12').each(function(){
            var fieldName = $(this).find('.col-4').eq(0).find('strong').attr('data-value');
            var headerAlignment = $(this).find('.col-4').eq(1).find('.header').val();
            var contentAlignment = $(this).find('.col-4').eq(2).find('.content').val();
            individualFieldConfigVD[fieldName] = {header: headerAlignment, content: contentAlignment};
          });
          viewDetailsConfig['field_level_config'] = individualFieldConfigVD;
          approvalTempColumnAlignmentConfig['view_details_config'] = viewDetailsConfig;
        }
        $('#saveApprovalTColumnAlignmentButton').attr('data-config', JSON.stringify(approvalTempColumnAlignmentConfig));
        $('#viewDetailsColumnAlignmentModal').modal('hide');
      });

      $("#selectColumnVHCVColumnAlignment").on('select2:select', function(){
        if ($(this).val()) {
          $('#vHCVColumnAlignmentContainer').append(`
            <div class="row col-12">
              <div class="col-4">
                <span class="removeAlignment">&times;</span> &nbsp; <strong data-value="${$(this).val()}">${$("#selectColumnVHCVColumnAlignment > option:selected").text()}</strong>
              </div>
              <div class="col-4">
                <select class="select2 form-control header">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
              <div class="col-4">
                <select class="select2 form-control content">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
            </div>
          `);
          $('#vHCVColumnAlignmentContainer').find('.row').eq(-1).find('.select2').select2();
          $('#vHCVColumnAlignmentContainer').find('.row').eq(-1).find('.removeAlignment').on('click', function(){
            $(this).parent().parent().remove();
          })
        }
      });
      $("#selectColumnVRCVColumnAlignment").on('select2:select', function(){
        if ($(this).val()) {
          $('#vRCVColumnAlignmentContainer').append(`
            <div class="row col-12">
              <div class="col-4">
                <span class="removeAlignment">&times;</span> &nbsp; <strong data-value="${$(this).val()}">${$("#selectColumnVRCVColumnAlignment > option:selected").text()}</strong>
              </div>
              <div class="col-4">
                <select class="select2 form-control header">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
              <div class="col-4">
                <select class="select2 form-control content">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
            </div>
          `);
          $('#vRCVColumnAlignmentContainer').find('.row').eq(-1).find('.select2').select2();
          $('#vRCVColumnAlignmentContainer').find('.row').eq(-1).find('.removeAlignment').on('click', function(){
            $(this).parent().parent().remove();
          })
        }
      });
      $("#selectColumnVDCVColumnAlignment").on('select2:select', function(){
        if ($(this).val()) {
          $('#vDCVColumnAlignmentContainer').append(`
            <div class="row col-12">
              <div class="col-4">
                <span class="removeAlignment">&times;</span> &nbsp; <strong data-value="${$(this).val()}">${$("#selectColumnVDCVColumnAlignment > option:selected").text()}</strong>
              </div>
              <div class="col-4">
                <select class="select2 form-control header">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
              <div class="col-4">
                <select class="select2 form-control content">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
            </div>
          `);
          $('#vDCVColumnAlignmentContainer').find('.row').eq(-1).find('.select2').select2();
          $('#vDCVColumnAlignmentContainer').find('.row').eq(-1).find('.removeAlignment').on('click', function(){
            $(this).parent().parent().remove();
          })
        }
      });

      $('#saveCreateViewColumnAlignmentButton').on('click', function(){
        var createViewColumnAlignmentConfig = {};

        // View History Config
        var viewDetailsConfig = {};
        viewDetailsConfig['global_header'] = $('#selectGlobalHeaderVHCVColumnAlignment').val();
        viewDetailsConfig['global_content'] = $('#selectGlobalContentVHCVColumnAlignment').val();
        var individualFieldConfigVD = {};
        $('#vHCVColumnAlignmentContainer').find('.row.col-12').each(function(){
          var fieldName = $(this).find('.col-4').eq(0).find('strong').attr('data-value');
          var headerAlignment = $(this).find('.col-4').eq(1).find('.header').val();
          var contentAlignment = $(this).find('.col-4').eq(2).find('.content').val();
          individualFieldConfigVD[fieldName] = {header: headerAlignment, content: contentAlignment};
        });
        viewDetailsConfig['field_level_config'] = individualFieldConfigVD;
        createViewColumnAlignmentConfig['view_history_config'] = viewDetailsConfig;

        // View Rejected Config
        var viewDetailsConfig = {};
        viewDetailsConfig['global_header'] = $('#selectGlobalHeaderVRCVColumnAlignment').val();
        viewDetailsConfig['global_content'] = $('#selectGlobalContentVRCVColumnAlignment').val();
        var individualFieldConfigVD = {};
        $('#vRCVColumnAlignmentContainer').find('.row.col-12').each(function(){
          var fieldName = $(this).find('.col-4').eq(0).find('strong').attr('data-value');
          var headerAlignment = $(this).find('.col-4').eq(1).find('.header').val();
          var contentAlignment = $(this).find('.col-4').eq(2).find('.content').val();
          individualFieldConfigVD[fieldName] = {header: headerAlignment, content: contentAlignment};
        });
        viewDetailsConfig['field_level_config'] = individualFieldConfigVD;
        createViewColumnAlignmentConfig['view_rejected_config'] = viewDetailsConfig;

        // View Draft Config
        var viewDetailsConfig = {};
        viewDetailsConfig['global_header'] = $('#selectGlobalHeaderVDCVColumnAlignment').val();
        viewDetailsConfig['global_content'] = $('#selectGlobalContentVDCVColumnAlignment').val();
        var individualFieldConfigVD = {};
        $('#vDCVColumnAlignmentContainer').find('.row.col-12').each(function(){
          var fieldName = $(this).find('.col-4').eq(0).find('strong').attr('data-value');
          var headerAlignment = $(this).find('.col-4').eq(1).find('.header').val();
          var contentAlignment = $(this).find('.col-4').eq(2).find('.content').val();
          individualFieldConfigVD[fieldName] = {header: headerAlignment, content: contentAlignment};
        });
        viewDetailsConfig['field_level_config'] = individualFieldConfigVD;
        createViewColumnAlignmentConfig['view_draft_config'] = viewDetailsConfig;

        $(this).attr('data-config', JSON.stringify(createViewColumnAlignmentConfig));
        $('#createViewColumnAlignmentModal').modal('hide');
      });

    </script>
    <script>
      $('#dynamicAttachmentPDFDataLayoutOption').on('select2:select', function(){
        if ($(this).val() == 'vertical') {
          $("#selectColumnForPDFANColAlignment").empty();
          $("#selectColumnForPDFANColAlignment").append('<option val="" disabled selected>Select Column</option>');
          $("#selectColumnForPDFANColAlignment").append('<option val="Field">Field</option>');
          $("#selectColumnForPDFANColAlignment").append('<option val="Value">Value</option>');
        }
      });
      $("#selectColumnForPDFANColAlignment").on('select2:select', function(){
        if ($(this).val()) {
          $('#pdfColumnAlignmentContainerAN').append(`
            <div class="row col-12">
              <div class="col-4">
                <span class="removeAlignment">&times;</span> &nbsp; <strong data-value="${$(this).val()}">${$("#selectColumnForPDFANColAlignment > option:selected").text()}</strong>
              </div>
              <div class="col-4">
                <select class="select2 form-control header">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
              <div class="col-4">
                <select class="select2 form-control content">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
            </div>
          `);
          $('#pdfColumnAlignmentContainerAN').find('.row').eq(-1).find('.select2').select2();
          $('#pdfColumnAlignmentContainerAN').find('.row').eq(-1).find('.removeAlignment').on('click', function(){
            $(this).parent().parent().remove();
          })
        }
      });
    </script>
    <script>
      $('#pdfDataLayoutOption').on('select2:select', function(){
        if ($(this).val() == 'vertical') {
          $("#selectColumnForPDFLVColAlignment").empty();
          $("#selectColumnForPDFLVColAlignment").append('<option val="" disabled selected>Select Column</option>');
          $("#selectColumnForPDFLVColAlignment").append('<option val="Field">Field</option>');
          $("#selectColumnForPDFLVColAlignment").append('<option val="Value">Value</option>');
        }
      });
      $("#selectColumnForPDFLVColAlignment").on('select2:select', function(){
        if ($(this).val()) {
          $('#pdfColumnAlignmentContainer').append(`
            <div class="row col-12">
              <div class="col-4">
                <span class="removeAlignment">&times;</span> &nbsp; <strong data-value="${$(this).val()}">${$("#selectColumnForPDFLVColAlignment > option:selected").text()}</strong>
              </div>
              <div class="col-4">
                <select class="select2 form-control header">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
              <div class="col-4">
                <select class="select2 form-control content">
                  <option value="left">Left</option>
                  <option value="center" selected>Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
            </div>
          `);
          $('#pdfColumnAlignmentContainer').find('.row').eq(-1).find('.select2').select2();
          $('#pdfColumnAlignmentContainer').find('.row').eq(-1).find('.removeAlignment').on('click', function(){
            $(this).parent().parent().remove();
          })
        }
      });
    </script>
    <script>
    function userValidation() {
      if($(this).prop("checked")) {
        $(".flowUserValidation").css("display","flex");
      } else {
        $(".flowUserValidation").css("display","none");
        $(".flowTable").val("").trigger("change");
        ind = 0;
        $(".indFlow").each(function() {
          if(ind != 0){
            $(this).remove();
          }
          ind++
        })
      }
    }
    function indFlowHtml() {
      html_cases = `
      <div class="row indFlow flowUserValidation" style="margin-top:10px;">
        <div class="col-4">
          <select class="select2 form-control flowColumn" onchange="populateFlowValue.call(this)">
          </select>
        </div>
        <div class="col-4">
          <select class="select2 form-control flowCond" onchange="changeFlowSelectTag.call(this)">
            <option value="" disabled selected>Select condition</option>
            <option value="Equal to">Equal to</option>
            <option value="IN">In</option>
            <option value="Not Equal to">Not Equal to</option>
            <option value="NOT IN">Not In</option>
            <option value="Greater than">Greater than</option>
            <option value="Smaller than">Smaller than</option>
            <option value="Starts with">Starts with</option>
            <option value="Ends with">Ends with</option>
          </select>
        </div>
        <div class="col-3">
          <select class="select2 form-control flowValue">
          </select>
        </div>
        <div class="col-1">
          <i class="fas fa-remove" onclick="removeIndFlow.call(this)" style="font-size: initial;"></i>
        </div>
      </div>
      `
      return html_cases
    }
    function changeFlowSelectTag() {
      if($(this).val() == "IN" || $(this).val() == "NOT IN"){
        $(this).closest(".indFlow").find(".flowValue").select2("destroy");
        $(this).closest(".indFlow").find(".flowValue").attr("multiple","multiple");
        $(this).closest(".indFlow").find(".flowValue").select2({"tags":true});
      } else {
        $(this).closest(".indFlow").find(".flowValue").select2("destroy");
        $(this).closest(".indFlow").find(".flowValue").removeAttr("multiple");
        $(this).closest(".indFlow").find(".flowValue").select2({"tags":true});
      }
    }
    function addIndFlow() {
      var html_flow = indFlowHtml();
      $(this).closest(".flowBody").append(html_flow);
      $(this).closest(".flowBody").find(".indFlow").eq(-1).find("select").each(function() {
        $(this).select2({"tags":true});
      })
      $(this).closest(".flowBody").find(".indFlow").eq(-1).find(".flowColumn").empty();
      $(this).closest(".flowBody").find(".indFlow").eq(-1).find(".flowColumn").append(`<option value="">Select column</option>`);
      for(let i = 0; i < flowColumn.length; i++) {
        $(this).closest(".flowBody").find(".indFlow").eq(-1).find(".flowColumn").append(`<option value="${flowColumn[i]["name"]}">${flowColumn[i]["verbose"]}</option>`);
      }
    }
    function removeIndFlow(){
      $(this).closest(".indFlow").remove();
    }
    function closeCases() {
      $("#formModal").modal('show')
      $("#casesModal").css("display","none")
    }
    function populateFlowValue() {
      $(this).closest(".indFlow").find(".flowValue").empty();
      var thiss = $(this)
      $.ajax({
          url: window.location.pathname,
          data: {
            "operation":"populateCasesValue",
            "table":JSON.stringify([$(".flowTable").val()]),
            "column":$(this).closest(".indFlow").eq(-1).find(".flowColumn").val(),
          },
          type: "POST",
          dataType: "json",
          "async":false,
          success: function (data) {

            for(let i = 0; i < data["value"].length; i++){
              thiss.closest(".indFlow").find(".flowValue").append(`<option value="${data["value_real"][i]}">${data["value"][i]}</option>"`);
            }
            thiss.closest(".indFlow").find(".flowValue").select2({"tags":true})
          },
          failure: function () {
            $(".restoreL3").html("System l3 template")
            Swal.fire({icon: 'error',text: 'Error! No custom homepage exist. Please try again.'});
          },
        });
    }
    let augmentationColumn = [];
    function augmentationTable() {
      if($(this).val() != undefined) {
        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFields',
            'tablesForm': JSON.stringify($(this).val()),
          },
          type: "POST",
          dataType: "json",
          async:false,
          success: function (data) {
            ind = 0;
            $(".indAugmentation").each(function() {
              if(ind != 0){
                $(this).remove();
              }
              ind++
            })
            $(".augmentationColumn").empty();
            $(".augmentationColumn").append(`<option value"" disabled selected>Select column</option>`)
            for (j in data.finalFieldList) {
              if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from') {
                augmentationColumn[j] = {
                  "name":data.finalFieldList[j]['fieldName'],
                  "verbose":data.finalFieldList[j]['verbose'],
                  "datatype":data.finalFieldList[j]['fieldType'],
                  "table": data.finalFieldList[j]['table'],
                }
                $(".augmentationColumn").append(`<option data-table="${data.finalFieldList[j]['table']}" value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
              }
            }
            if($(".augmentationTable").attr("data-reload") == "yes") {
              let data1 = JSON.parse($(".augmentationTable").attr("data-reloaddata"))
              $(".augmentationTable").removeAttr("data-reloaddata")
              $(".augmentationTable").removeAttr("data-reload")
              augmentationTableLoad(data1)
            }
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })
      }
    }
    function indAugmentationHtml() {
      html_cases = `
      <div class="row indAugmentation" style="margin-top:10px;">
        <div class="col-3">
          <select class="select2 form-control augmentationColumn" onchange="populateAugmentationValue.call(this)">
          </select>
        </div>
        <div class="col-3">
          <select class="select2 form-control augmentationCond" onchange="changeAugmentationSelectTag.call(this)">
            <option value="" disabled selected>Select condition</option>
            <option value="Equal to">Equal to</option>
            <option value="IN">In</option>
            <option value="Not Equal to">Not Equal to</option>
            <option value="NOT IN">Not In</option>
            <option value="Greater than">Greater than</option>
            <option value="Smaller than">Smaller than</option>
            <option value="Starts with">Starts with</option>
            <option value="Ends with">Ends with</option>
          </select>
        </div>
        <div class="col-3">
          <select class="select2 form-control augmentationValue">
          </select>
        </div>
        <div class="col-2">
          <select class="select2 form-control augmentationNextElement">
          </select>
        </div>
        <div class="col-1">
          <i class="fas fa-remove" onclick="removeIndAugmentation.call(this)" style="font-size: initial;"></i>
        </div>
      </div>
      `
      return html_cases
    }
    function changeAugmentationSelectTag() {
      if($(this).val() == "IN" || $(this).val() == "NOT IN"){
        $(this).closest(".indAugmentation").find(".augmentationValue").select2("destroy");
        $(this).closest(".indAugmentation").find(".augmentationValue").attr("multiple","multiple");
        $(this).closest(".indAugmentation").find(".augmentationValue").select2({"tags":true});
      } else {
        $(this).closest(".indAugmentation").find(".augmentationValue").select2("destroy");
        $(this).closest(".indAugmentation").find(".augmentationValue").removeAttr("multiple");
        $(this).closest(".indAugmentation").find(".augmentationValue").select2({"tags":true});
      }
    }
    function addIndAugmentation() {
      var html_flow = indAugmentationHtml();
      $(this).closest(".augmentationBody").append(html_flow);
      $(this).closest(".augmentationBody").find(".indAugmentation").eq(-1).find("select").each(function() {
        $(this).select2({"tags":true});
      })
      $(this).closest(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationColumn").empty();
      $(this).closest(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationColumn").append(`<option value="">Select column</option>`);
      for(let i = 0; i < augmentationColumn.length; i++) {
        $(this).closest(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationColumn").append(`<option data-table="${augmentationColumn[i]["table"]}" value="${augmentationColumn[i]["name"]}">${augmentationColumn[i]["verbose"]}</option>`);
      }
      $(this).closest(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationNextElement").empty();
      for(let j = 0; j < childConnected.length; j++){
        $(this).closest(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationNextElement").append(`<option value="${childConnected[j]}">${childName[j]}</option>`);
      }
    }
    function removeIndAugmentation(){
      $(this).closest(".indAugmentation").remove();
    }
    function closeCases() {
      $("#formModal").modal('show')
      $("#casesModal").css("display","none");
    }
function addConNewScheduler(event){
  event.preventDefault()
  let html = ""

  if($("#selectSchedulerCondType").val() == ""){
    Swal.fire({icon: 'info',text: 'Please select one of the condition type'});
  }else{
    if($("#selectSchedulerCondType").val() == "group_based"){
      html = `
        <div class="schedule_row row p-2">
          <div class="col-2" style="display:inline-flex;">
            <i class="fas fa-times m-2" style="cursor:pointer;" onclick="removeSchCond.call(this)" data-toggle="tooltip" title="Remove condition"></i>
            <select class="select2 form-control w-100" disabled name="column_name">
              <option value="curr_user" selected>User</option>
            </select>
          </div>
          <div class="col-2">
            <select class="select2 form-control" name="condition">
              <option value="IN">IN</option>
              <option value="NOT IN">NOT IN</option>
            </select>
          </div>
          <div class="col-2">
            <select class="select2 form-control" multiple name="input_value">
              {% for i in groupList%}
                <option value='{{i}}'>{{i}}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-1">
            <input class="form-control" type="text" placeholder="Constraint" name="constraint">
          </div>
          <div class="col-1">
            <input class="form-control" type="text" placeholder="Rule set" name="rule_set">
          </div>
          <div class="col-1" style="display:none;">
            <input class="form-control" type="text" value="group_based" name="type">
          </div>
        </div>
      `

    }else if($("#selectSchedulerCondType").val() == "trans_based"){
      html = `
      <div class="schedule_row row p-2">
          <div class="col-2" style="display:inline-flex;">
            <i class="fas fa-times m-2" style="cursor:pointer;" onclick="removeSchCond.call(this)" data-toggle="tooltip" title="Remove condition"></i>
            <select class="select2 form-control w-100 sch_table_select" name="table_name">
              {% for i in tableList%}
              <option value="{{i}}">{{i}}</option>
              {%endfor%}
            </select>
          </div>
          <div class="col-2">
            <select class="select2 form-control" name="column">
            </select>
          </div>
          <div class="col-2">
            <select class="select2 form-control sch_cond_trans" name="condition">
              <option value="Greater than">Greater than</option>
              <option value="Greater than equal to">Greater than equal to</option>
              <option value="Smaller than">Smaller than</option>
              <option value="Smaller than equal to">Smaller than equal to</option>
              <option value="Equal to">Equal to</option>
              <option value="Not Equal to">Not Equal to</option>
              <option value="IN">IN</option>
              <option value="NOT IN">NOT IN</option>
            </select>
          </div>
          <div class="col-3 not_in_sch">
            <select class="select2bs4 form-control" name="input_value">
            </select>
          </div>
          <div class="col-3 in_sch" style="display:none;">
            <select class="select2bs4 form-control" multiple name="input_value">
            </select>
          </div>
          <div class="col-1">
            <input class="form-control" type="text" placeholder="Constraint" name="constraint">
          </div>
          <div class="col-1">
            <input class="form-control" type="text" placeholder="Rule set" name="rule_set">
          </div>
          <div class="col-1" style="display:none;">
            <input class="form-control" type="text" value="trans_based" name="type">
          </div>
        </div>
      `
    }

    $(this).parent().parent().parent().find(".schedulerCondRow").append(html)
    $(this).parent().parent().parent().find(".schedulerCondRow").find('.schedule_row').last().find('.select2').each(function(){

    $(this).select2( )
  })
    $(this).parent().parent().parent().find(".schedulerCondRow").find('.schedule_row').last().find(".select2bs4").select2({width:'100%',tags:true})

    $(this).parent().parent().parent().find(".schedulerCondRow").find('.schedule_row').last().find('.sch_cond_trans').on("change", function(){
      if(["IN", "NOT IN"].includes($(this).val())){
        $(this).parent().parent().find('.in_sch').css("display","block")
        $(this).parent().parent().find('.not_in_sch').css("display","none")
      }else{
        $(this).parent().parent().find('.in_sch').css("display","none")
        $(this).parent().parent().find('.not_in_sch').css("display","block")
      }
    })

    $(this).parent().parent().parent().find(".schedulerCondRow").find('.schedule_row').last().find('.sch_table_select').on("change",function(){

      let table_name = $(this).val()
      let bl_this = $(this)

      $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'dropFieldList',
              'tableName':table_name,
            },
            type: "POST",
            dataType: "json",
            success: function (data) {

              $(bl_this).parent().parent().find('div').eq(1).find('select').empty()

              for (var i = 0; i < data.fieldList.length; i++) {
                $(bl_this).parent().parent().find('div').eq(1).find('select').append(new Option(data.fieldList[i], data.fieldNameList[i]));
              }

              let data_reload = $(bl_this).parent().parent().find('div').eq(1).find('select').attr("data-data")
              if(data_reload){
                $(bl_this).parent().parent().find('div').eq(1).find('select').val(data_reload).trigger("change")
                $(bl_this).parent().parent().find('div').eq(1).find('select').removeAttr("data-data")
              }
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }

          })

    })

  }


}

function removeSchCond(){
  $(this).parent().parent().remove()
}

function addConNewScheduler_send_back(event){
  event.preventDefault()
  let html = ""

  if($("#selectSchedulerCondType_send_back").val() == ""){
    Swal.fire({icon: 'info',text: 'Please select one of the condition type'});
  }else{
    if($("#selectSchedulerCondType_send_back").val() == "group_based"){
      html = `
        <div class="schedule_row row p-2">
          <div class="col-2" style="display:inline-flex;">
            <i class="fas fa-times m-2" style="cursor:pointer;" onclick="removeSchCond_send_back.call(this)" data-toggle="tooltip" title="Remove condition"></i>
            <select class="select2 form-control w-100" disabled name="column_name">
              <option value="curr_user" selected>User</option>
            </select>
          </div>
          <div class="col-2">
            <select class="select2 form-control" name="condition">
              <option value="IN">IN</option>
              <option value="NOT IN">NOT IN</option>
            </select>
          </div>
          <div class="col-2">
            <select class="select2 form-control" multiple name="input_value">
              {% for i in groupList%}
                <option value='{{i}}'>{{i}}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-1">
            <input class="form-control" type="text" placeholder="Constraint" name="constraint">
          </div>
          <div class="col-1">
            <input class="form-control" type="text" placeholder="Rule set" name="rule_set">
          </div>
          <div class="col-1" style="display:none;">
            <input class="form-control" type="text" value="group_based" name="type">
          </div>
        </div>
      `

    }else if($("#selectSchedulerCondType_send_back").val() == "trans_based"){
      html = `
      <div class="schedule_row row p-2">
          <div class="col-2" style="display:inline-flex;">
            <i class="fas fa-times m-2" style="cursor:pointer;" onclick="removeSchCond_send_back.call(this)" data-toggle="tooltip" title="Remove condition"></i>
            <select class="select2 form-control w-100 sch_table_select" name="table_name">
              {% for i in tableList%}
              <option value="{{i}}">{{i}}</option>
              {%endfor%}
            </select>
          </div>
          <div class="col-2">
            <select class="select2 form-control" name="column">
            </select>
          </div>
          <div class="col-2">
            <select class="select2 form-control sch_cond_trans" name="condition">
              <option value="Greater than">Greater than</option>
              <option value="Greater than equal to">Greater than equal to</option>
              <option value="Smaller than">Smaller than</option>
              <option value="Smaller than equal to">Smaller than equal to</option>
              <option value="Equal to">Equal to</option>
              <option value="Not Equal to">Not Equal to</option>
              <option value="IN">IN</option>
              <option value="NOT IN">NOT IN</option>
            </select>
          </div>
          <div class="col-3 not_in_sch">
            <select class="select2bs4 form-control" name="input_value">
            </select>
          </div>
          <div class="col-3 in_sch" style="display:none;">
            <select class="select2bs4 form-control" multiple name="input_value">
            </select>
          </div>
          <div class="col-1">
            <input class="form-control" type="text" placeholder="Constraint" name="constraint">
          </div>
          <div class="col-1">
            <input class="form-control" type="text" placeholder="Rule set" name="rule_set">
          </div>
          <div class="col-1" style="display:none;">
            <input class="form-control" type="text" value="trans_based" name="type">
          </div>
        </div>
      `
    }

    $(this).parent().parent().parent().find(".schedulerCondRow").append(html)
    $(this).parent().parent().parent().find(".schedulerCondRow").find('.schedule_row').last().find('.select2').each(function(){
    parent = $(this).parent()
    $(this).select2({dropdownParent:parent})
  })
    $(this).parent().parent().parent().find(".schedulerCondRow").find('.schedule_row').last().find(".select2bs4").select2({width:'100%',tags:true})

    $(this).parent().parent().parent().find(".schedulerCondRow").find('.schedule_row').last().find('.sch_cond_trans').on("change", function(){
      if(["IN", "NOT IN"].includes($(this).val())){
        $(this).parent().parent().find('.in_sch').css("display","block")
        $(this).parent().parent().find('.not_in_sch').css("display","none")
      }else{
        $(this).parent().parent().find('.in_sch').css("display","none")
        $(this).parent().parent().find('.not_in_sch').css("display","block")
      }
    })

    $(this).parent().parent().parent().find(".schedulerCondRow").find('.schedule_row').last().find('.sch_table_select').on("change",function(){

      let table_name = $(this).val()
      let bl_this = $(this)

      $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'dropFieldList',
              'tableName':table_name,
            },
            type: "POST",
            dataType: "json",
            success: function (data) {

              $(bl_this).parent().parent().find('div').eq(1).find('select').empty()

              for (var i = 0; i < data.fieldList.length; i++) {
                $(bl_this).parent().parent().find('div').eq(1).find('select').append(new Option(data.fieldList[i], data.fieldNameList[i]));
              }

              let data_reload = $(bl_this).parent().parent().find('div').eq(1).find('select').attr("data-data")
              if(data_reload){
                $(bl_this).parent().parent().find('div').eq(1).find('select').val(data_reload).trigger("change")
                $(bl_this).parent().parent().find('div').eq(1).find('select').removeAttr("data-data")
              }
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }

          })

    })

  }


}

function removeSchCond_send_back(){
  $(this).parent().parent().remove()
}


function addConNewScheduler_delegate(event){
  event.preventDefault()
  let html = ""

  if($("#selectSchedulerCondType_delegate").val() == ""){
    Swal.fire({icon: 'info',text: 'Please select one of the condition type'});
  }else{
    if($("#selectSchedulerCondType_delegate").val() == "group_based"){
      html = `
        <div class="schedule_row row p-2">
          <div class="col-2" style="display:inline-flex;">
            <i class="fas fa-times m-2" style="cursor:pointer;" onclick="removeSchCond_delegate.call(this)" data-toggle="tooltip" title="Remove condition"></i>
            <select class="select2 form-control w-100" disabled name="column_name">
              <option value="curr_user" selected>User</option>
            </select>
          </div>
          <div class="col-2">
            <select class="select2 form-control" name="condition">
              <option value="IN">IN</option>
              <option value="NOT IN">NOT IN</option>
            </select>
          </div>
          <div class="col-2">
            <select class="select2 form-control" multiple name="input_value">
              {% for i in groupList%}
                <option value='{{i}}'>{{i}}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-1">
            <input class="form-control" type="text" placeholder="Constraint" name="constraint">
          </div>
          <div class="col-1">
            <input class="form-control" type="text" placeholder="Rule set" name="rule_set">
          </div>
          <div class="col-1" style="display:none;">
            <input class="form-control" type="text" value="group_based" name="type">
          </div>
        </div>
      `

    }else if($("#selectSchedulerCondType_delegate").val() == "trans_based"){
      html = `
      <div class="schedule_row row p-2">
          <div class="col-2" style="display:inline-flex;">
            <i class="fas fa-times m-2" style="cursor:pointer;" onclick="removeSchCond_delegate.call(this)" data-toggle="tooltip" title="Remove condition"></i>
            <select class="select2 form-control w-100 sch_table_select" name="table_name">
              {% for i in tableList%}
              <option value="{{i}}">{{i}}</option>
              {%endfor%}
            </select>
          </div>
          <div class="col-2">
            <select class="select2 form-control" name="column">
            </select>
          </div>
          <div class="col-2">
            <select class="select2 form-control sch_cond_trans" name="condition">
              <option value="Greater than">Greater than</option>
              <option value="Greater than equal to">Greater than equal to</option>
              <option value="Smaller than">Smaller than</option>
              <option value="Smaller than equal to">Smaller than equal to</option>
              <option value="Equal to">Equal to</option>
              <option value="Not Equal to">Not Equal to</option>
              <option value="IN">IN</option>
              <option value="NOT IN">NOT IN</option>
            </select>
          </div>
          <div class="col-3 not_in_sch">
            <select class="select2bs4 form-control" name="input_value">
            </select>
          </div>
          <div class="col-3 in_sch" style="display:none;">
            <select class="select2bs4 form-control" multiple name="input_value">
            </select>
          </div>
          <div class="col-1">
            <input class="form-control" type="text" placeholder="Constraint" name="constraint">
          </div>
          <div class="col-1">
            <input class="form-control" type="text" placeholder="Rule set" name="rule_set">
          </div>
          <div class="col-1" style="display:none;">
            <input class="form-control" type="text" value="trans_based" name="type">
          </div>
        </div>
      `
    }

    $(this).parent().parent().parent().find(".schedulerCondRow").append(html)
    $(this).parent().parent().parent().find(".schedulerCondRow").find('.schedule_row').last().find('.select2').each(function(){
    parent = $(this).parent()
    $(this).select2({dropdownParent:parent})
  })
    $(this).parent().parent().parent().find(".schedulerCondRow").find('.schedule_row').last().find(".select2bs4").select2({width:'100%',tags:true})

    $(this).parent().parent().parent().find(".schedulerCondRow").find('.schedule_row').last().find('.sch_cond_trans').on("change", function(){
      if(["IN", "NOT IN"].includes($(this).val())){
        $(this).parent().parent().find('.in_sch').css("display","block")
        $(this).parent().parent().find('.not_in_sch').css("display","none")
      }else{
        $(this).parent().parent().find('.in_sch').css("display","none")
        $(this).parent().parent().find('.not_in_sch').css("display","block")
      }
    })

    $(this).parent().parent().parent().find(".schedulerCondRow").find('.schedule_row').last().find('.sch_table_select').on("change",function(){

      let table_name = $(this).val()
      let bl_this = $(this)

      $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'dropFieldList',
              'tableName':table_name,
            },
            type: "POST",
            dataType: "json",
            success: function (data) {

              $(bl_this).parent().parent().find('div').eq(1).find('select').empty()

              for (var i = 0; i < data.fieldList.length; i++) {
                $(bl_this).parent().parent().find('div').eq(1).find('select').append(new Option(data.fieldList[i], data.fieldNameList[i]));
              }

              let data_reload = $(bl_this).parent().parent().find('div').eq(1).find('select').attr("data-data")
              if(data_reload){
                $(bl_this).parent().parent().find('div').eq(1).find('select').val(data_reload).trigger("change")
                $(bl_this).parent().parent().find('div').eq(1).find('select').removeAttr("data-data")
              }
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }

          })

    })

  }


}

function removeSchCond_delegate(){
  $(this).parent().parent().remove()
}





function populateAugmentationValue() {
      $(this).closest(".indAugmentation").find(".augmentationValue").empty();
      var thiss = $(this)
      $.ajax({
          url: window.location.pathname,
          data: {
            "operation":"populateCasesValue",
            "table":JSON.stringify($(".augmentationTable").val()),
            "column":$(this).closest(".indAugmentation").eq(-1).find(".augmentationColumn").val(),
          },
          type: "POST",
          dataType: "json",
          "async":false,
          success: function (data) {

            for(let i = 0; i < data["value"].length; i++){
              thiss.closest(".indAugmentation").find(".augmentationValue").append(`<option value="${data["value_real"][i]}">${data["value"][i]}</option>"`);
            }
            thiss.closest(".indAugmentation").find(".augmentationValue").select2({"tags":true})
          },
          failure: function () {
            $(".restoreL3").html("System l3 template")
            Swal.fire({icon: 'error',text: 'Error! No custom homepage exist. Please try again.'});
          },
        });
    }
    function fetchVersion() {
      closeDesignModal()
      $(".restoreL3").css("display","block");
      $(".l3Design").html(`<i class="fa fa-circle-notch fa-spin"></i>&nbsp;&nbsp;`)
      var thiss = $(".l3Design")
      bm.add("Create view", {
        label: `<i style="font-size: xx-large; margin-bottom: 20px" class="fas fa-paste"></i><div class="gjs-block-label">Create view</div>`,
        content: `
        <div title="create view" class="create view" style="width: 90px;height: 60px;border: 1.8px solid black;background-color: white;text-align: center;display: flex;justify-content: center;align-items: center;padding-top: 15px;margin-bottom: 10px;"><p>Create view</p></div>
        `
        ,
        category: 'App component',
        attributes: {
        title: "Create view",
        },
      });
      bm.add("Computation", {
        label: `<i style="font-size: xx-large; margin-bottom: 20px" class="fas fa-robot"></i><div class="gjs-block-label">Computation</div>`,
        content: `
        <div title="computation" class="computation" style="width: 80px;height: 60px;border: 1.8px solid black;background-color: white;text-align: center;display: flex;justify-content: center;align-items: center;padding-top: 15px;margin-bottom: 10px;transform: skew(-10deg);margin-left:15px;"><p>Computation</p></div>
        `
        ,
        category: 'App component',
        attributes: {
        title: "Computation",
        },
      });
      bm.add("Analysis", {
        label: `<i style="font-size: xx-large; margin-bottom: 20px" class="fa fa-bar-chart"></i><div class="gjs-block-label">Analysis</div>`,
        content: `
        <div title="analysis" class="analysis" style="width: 80px;height: 80px;border: 1.8px solid black;background-color: white;text-align: center;display: flex;justify-content: center;align-items: center;padding-top: 15px;margin-bottom: 10px; border-radius:40px;"><p>analysis</p></div>
        `
        ,
        category: 'App component',
        attributes: {
        title: "analysis",
        },
      });
      bm.add("List view", {
        label: `<i style="font-size: xx-large; margin-bottom: 20px" class="fa fa-table"></i><div class="gjs-block-label">List View</div>`,
        content: `
        <div title="listview" class="listview" style="width: 100px;height: 80px;border: 1.8px solid black;background-color: white;text-align: center;display: flex;justify-content: center;align-items: center;padding-top: 15px;margin-bottom: 10px;"><p>List View</p></div>
        `
        ,
        category: 'App component',
        attributes: {
        title: "listview",
        },
      });
      bm.add("Upload", {
        label: `<i style="font-size: xx-large; margin-bottom: 20px" class="fa fa-upload"></i><div class="gjs-block-label">Upload</div>`,
        content: `
        <div title="upload" class="upload" style="width: 100px;height: 80px;border: 1.8px solid black;background-color: white;text-align: center;display: flex;justify-content: center;align-items: center;padding-top: 15px;margin-bottom: 10px;"><p>Upload</p></div>
        `
        ,
        category: 'App component',
        attributes: {
        title: "upload",
        },
      });
      var prg_code = $("#graphContainerID").attr("data-process_code");
      var pr_name = $("#graphContainerID").attr("data-sub_process_name");
      $.ajax({
        url: window.location.pathname,
        data: {
          'process': prg_code,
          'subprocess':pr_name,
          'operation': "fetchVersionL3Design",
          "version": $(this).val(),
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          if(data["html"] != "") {
            editor_grapejs.addComponents(data["html"]);
            $(".gjs-frame").contents().find('body').find('.gjs-js-cont').empty()
            $(".gjs-frame").contents().find('body').find('.gjs-js-cont').append(`<div>${data["script"]}</div>`)
          }
          thiss.html("Design Mode");
          $('#designModal').css('display','block');
        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })
    }
    let flowColumnTo = []
    let flowValueTo = []
    function flowTableTo() {
      if($(this).val() != undefined) {
        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFields',
            'tablesForm': JSON.stringify([$(this).val()]),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            ind = 0;
            $(".indFlowTo").each(function() {
              if(ind != 0){
                $(this).remove();
              }
              ind++
            })
            $(".flowColumnTo").empty();
            $(".flowColumnTo").append(`<option value"" disabled selected>Select column</option>`)
            for (j in data.finalFieldList) {
              if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from') {
                flowColumnTo[j] = {
                  "name":data.finalFieldList[j]['fieldName'],
                  "verbose":data.finalFieldList[j]['verbose'],
                  "datatype":data.finalFieldList[j]['fieldType']
                }
                $(".flowColumnTo").append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
              }
            }
            if($(".flowTableTo").attr("data-reload") == "yes") {
              let data1 = JSON.parse($(".flowTableTo").attr("data-reloaddata"))
              $(".flowTableTo").removeAttr("data-reload")
              $(".flowTableTo").removeAttr("data-reload")
              userValidationLoadTo(data1)
            }
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })
      }
    }
    function userValidationTo() {
      if($(this).prop("checked")) {
        $(".flowUserValidationTo").css("display","flex");
      } else {
        $(".flowUserValidationTo").css("display","none");
        $(".flowTableTo").val("").trigger("change");
        ind = 0;
        $(".indFlowTo").each(function() {
          if(ind != 0){
            $(this).remove();
          }
          ind++
        })
      }
    }
    function indFlowHtmlTo() {
      html_cases = `
      <div class="row indFlowTo flowUserValidationTo" style="margin-top:10px;">
        <div class="col-4">
          <select class="select2 form-control flowColumnTo" onchange="populateFlowValueTo.call(this)">
          </select>
        </div>
        <div class="col-4">
          <select class="select2 form-control flowCondTo" onchange="changeFlowSelectTagTo.call(this)">
            <option value="" disabled selected>Select condition</option>
            <option value="Equal to">Equal to</option>
            <option value="IN">In</option>
            <option value="Not Equal to">Not Equal to</option>
            <option value="NOT IN">Not In</option>
            <option value="Greater than">Greater than</option>
            <option value="Smaller than">Smaller than</option>
            <option value="Starts with">Starts with</option>
            <option value="Ends with">Ends with</option>
          </select>
        </div>
        <div class="col-3">
          <select class="select2 form-control flowValueTo">
          </select>
        </div>
        <div class="col-1">
          <i class="fas fa-remove" onclick="removeIndFlowTo.call(this)" style="font-size: initial;"></i>
        </div>
      </div>
      `
      return html_cases
    }
    function changeFlowSelectTagTo() {
      if($(this).val() == "IN" || $(this).val() == "NOT IN"){
        $(this).closest(".indFlowTo").find(".flowValueTo").select2("destroy");
        $(this).closest(".indFlowTo").find(".flowValueTo").attr("multiple","multiple");
        $(this).closest(".indFlowTo").find(".flowValueTo").select2({"tags":true});
      } else {
        $(this).closest(".indFlowTo").find(".flowValueTo").select2("destroy");
        $(this).closest(".indFlowTo").find(".flowValueTo").removeAttr("multiple");
        $(this).closest(".indFlowTo").find(".flowValueTo").select2({"tags":true});
      }
    }
    function addIndFlowTo() {
      var html_flow = indFlowHtmlTo();
      $(this).closest(".flowBodyTo").append(html_flow);
      $(this).closest(".flowBodyTo").find(".indFlowTo").eq(-1).find("select").each(function() {
        $(this).select2({"tags":true});
      })
      $(this).closest(".flowBodyTo").find(".indFlowTo").eq(-1).find(".flowColumnTo").empty();
      $(this).closest(".flowBodyTo").find(".indFlowTo").eq(-1).find(".flowColumnTo").append(`<option value="">Select column</option>`);
      for(let i = 0; i < flowColumnTo.length; i++) {
        $(this).closest(".flowBodyTo").find(".indFlowTo").eq(-1).find(".flowColumnTo").append(`<option value="${flowColumnTo[i]["name"]}">${flowColumnTo[i]["verbose"]}</option>`);
      }
    }
    function removeIndFlowTo(){
      $(this).closest(".indFlowTo").remove();
    }
    function populateFlowValueTo() {
      $(this).closest(".indFlowTo").find(".flowValueTo").empty();
      var thiss = $(this)
      $.ajax({
          url: window.location.pathname,
          data: {
            "operation":"populateCasesValue",
            "table":JSON.stringify([$(".flowTableTo").val()]),
            "column":$(this).closest(".indFlowTo").eq(-1).find(".flowColumnTo").val(),
          },
          type: "POST",
          dataType: "json",
          "async":false,
          success: function (data) {

            for(let i = 0; i < data["value"].length; i++){
              thiss.closest(".indFlowTo").find(".flowValueTo").append(`<option value="${data["value_real"][i]}">${data["value"][i]}</option>"`);
            }
            thiss.closest(".indFlowTo").find(".flowValueTo").select2({"tags":true})
          },
          failure: function () {
            $(".restoreL3").html("System l3 template")
            Swal.fire({icon: 'error',text: 'Error! No custom homepage exist. Please try again.'});
          },
        });
    }
    function userValidationLoadTo(data) {
      for(let i = 0; i < data.conditionTo.condition.length; i++){
        if (i != 0){
          $(".flowBodyTo").append(indFlowHtml());
          $(".indFlowTo").eq(-1).find(".flowColumnTo").empty();
          $(".indFlowTo").eq(-1).find(".flowColumnTo").append(`<option value="" disabled selected>Select column</option>`);
          for(j = 0; j < flowColumnTo.length; j++){
            $(".indFlowTo").eq(-1).find(".flowColumnTo").append(`<option value="${flowColumnTo[j]["name"]}">${flowColumnTo[j]["verbose"]}`);
          }
        }
        $(".indFlowTo").eq(-1).find("select").select2();
        $(".indFlowTo").eq(-1).find(".flowColumnTo").val(data.conditionTo.condition[i]["column_name"]).trigger("change")
        $(".indFlowTo").eq(-1).find(".flowCondTo").val(data.conditionTo.condition[i]["condition"]).trigger("change")
        let check = 0
        $(".indFlowTo").eq(-1).find(".flowValueTo").each(function() {
          if($(this).attr("value") == data.conditionTo.condition[i]["input_value"]) {
            check = 1;
          }
        })
        if(check == 0) {
          $(".indFlowTo").eq(-1).find(".flowValueTo").append(`<option value="${data.conditionTo.condition[i]["input_value"]}">${data.conditionTo.condition[i]["input_value"]}</option>`);
        }
        $(".indFlowTo").eq(-1).find(".flowValueTo").val(data.conditionTo.condition[i]["input_value"]).trigger("change");
        $(".indFlowTo").eq(-1).find(".flowValueTo").select2({"tags":true});
      }
    }
    function formLevelFieldMasterTableLoad(data1,k,r) {
      $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configContLink').find('.formLevelFieldColName').eq(0).find('select').val(data1[r]['value']).trigger('change')
      $('#JSConfig').find('.multipleJs').eq(k).find('.formLevelJs').find('.configContLink').find('.formLevelFieldColName').eq(1).find('select').val(data1[r]['selectedColumn']).trigger('change')
    }
    function selectColFromTableLoad(data1,k,j) {
      for(let i = 0; i < data1[j]['depField'].length; i++) {
        $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('.indFieldTypeMapperCascading1').val(data1[j]['indMapper']).trigger('change');
        $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('.indFieldTypeSelectCascading1').val(data1[j]['indField']).trigger('change');
        $('#JSConfig').find('.multipleJs').eq(k).find('#cascadingCard1').find('.card-default').eq(j).find('.depFieldTypeMapperCascading1').eq(i).val(data1[j]['depMapper'][i]).trigger('change');
      }
    }
    function selectpctypeLoad(data1,k,index,colName,valuesCond) {
      var values = data1[index][colName][0]['jsattr'][k]['finaljsattr'][2][0]['value']
      if (valuesCond != "") {
        var values1 = data1[index][colName][0]['jsattr'][k]['finaljsattr'][2][0]['condition']
        for(let y1 = 0; y1 < values1["cond"].length; y1++) {
          $('#JSConfig').find('.multipleJs').eq(k).find('.selectparentcolumnCond').eq(y1).val(values1["column"][y1]).trigger('change');
        }
      }
      $('#JSConfig').find('.multipleJs').eq(k).find('.selectparentcolumn').val(values).trigger('change');
    }
    function selectparentcolumnLoad(data1,k) {
      $('#JSConfig').find('.multipleJs').eq(k).find('.selectdefcolumn').val(data1).trigger('change');
    }

    function masterTableSelectLoad(data1,k,index,colName){
      var values = data1[index][colName][0]['jsattr'][k]['finaljsattr'][2][0]['value']
      var values3 = []
      var values1 = data1[index][colName][0]['jsattr'][k]['finaljsattr'][0][0]['value']
      var values2 = [];
      if(data1[index][colName][0]['jsattr'][k]['finaljsattr'][2][0].hasOwnProperty('indValue')) {
        values2 = data1[index][colName][0]['jsattr'][k]['finaljsattr'][2][0]['indValue'];
      }
      if(data1[index][colName][0]['jsattr'][k]['finaljsattr'][2][0].hasOwnProperty('depValue')) {
        values3 = data1[index][colName][0]['jsattr'][k]['finaljsattr'][2][0]['depValue']
      }
      $('#JSConfig').find('.multipleJs').eq(k).find('.indFieldTypeMapper').val(values).trigger('change')
      for(let i = 0; i < values1['depField'].length; i++) {
        $('#JSConfig').find('.multipleJs').eq(k).find('.depFieldTypeMapper').eq(i).val(values1['depMapper'][i]).trigger('change');
      }
      for(let i = 0; i < values2.length; i++) {
        $('#JSConfig').find('.multipleJs').eq(k).find(".indDepFieldType").append(indDepFieldHtml());
        for(j in allFieldsColumns){
          if (allFieldsColumnsType[j] != "BooleanField") {
            $('#JSConfig').find('.multipleJs').eq(k).find(".indDepFieldType").find('.indDepFieldTypeSelect').eq(i).append(`<option value="${allFieldsColumns[j]}">${verboseName[j]}</option>`)
          }
        }
        $('#JSConfig').find('.multipleJs').eq(k).find(".indDepFieldType").find(".indDepFieldTypeSelect").eq(i).val(values2[i]).trigger('change');
        $('#JSConfig').find('.multipleJs').eq(k).find(".indDepFieldType").find(".indDepFieldTypeSelect").select2();

        for(j in commonCol){
          $('#JSConfig').find('.multipleJs').eq(k).find(".indDepFieldType").find('.indDepFieldTypeMapper').eq(i).append(`<option value="${commonCol[j]}">${commonColVerb[j]}</option>`)
        }
        $('#JSConfig').find('.multipleJs').eq(k).find(".indDepFieldType").find(".indDepFieldTypeMapper").eq(i).val(values3[i]).trigger('change');
        $('#JSConfig').find('.multipleJs').eq(k).find(".indDepFieldType").find(".indDepFieldTypeMapper").select2();
      }
    }

    $('#uploadButtonId').click(function(event){
      event.preventDefault();
    });
      function uploadButtonStyling(obj){
        $('#documentModal').modal('hide');
              var attrData = $(obj).attr('data-list')
              if (attrData == ''|| attrData =='{}'){

              }else {
                var parsedAttrdata = JSON.parse(attrData)
                $('#uploadButtonModal').find('.modal-body').empty()
                $('#uploadButtonModal').find('.modal-body').append(`
                <div class="card-header">
                  <div class="float-right" style="margin-right: 6px;">
                    <button onclick="uploadpopulateContent(this)" class="btn btn-primary" type="button">Design button styling <i class="fas fa-plus populateoption" name="false"  style="margin-right: 4px;"><span style="color: var(--primary-color); font-size: 17.6px; font-family: Arial; font-weight: normal; margin-left: 3px;"></span></i></button>
                  </div>
                </div>
                `)
                i = 0
                for (var key in parsedAttrdata){
                  var content = uploadEditButtonContent()
                  $('#uploadButtonModal').find('.modal-body').append(content)
                  var singleCard = $('#uploadButtonModal').find('.masterstyling').eq(i)
                  $(singleCard).find('.selectButtonsOptions').val(key).trigger('change')
                  for (var key2 in parsedAttrdata[key]){
                    $(singleCard).find('[data-css]').each(function(){
                      if ($(this).attr('data-css') == key2){
                        $(this).val(parsedAttrdata[key][key2]).trigger('change')
                      }
                    })
                  }
                  $(singleCard).find('.iconappend').attr('data-list',parsedAttrdata[key]['data-icon'])
                  i = i + 1
              }
              }
          $('#uploadButtonModal').modal('show')
          $('#uploadButtonModal').find('select').each(function(){

    $(this).select2( )
  })
      }
      function uploadpopulateContent(obj){
        var content = uploadEditButtonContent()
        $('#uploadButtonModal').find('.modal-body').append(content)
        $('#uploadButtonModal').find('select').each(function(){

    $(this).select2( )
  })
      }
      function uploadSelectedButtonName(obj){
        $(obj).parent().parent().parent().parent().find('[data-css]').eq(0).val($(obj).find("option:selected").text()).trigger('change')
      }
      function uploadRemoveEditButtonContent(obj){
        $(obj).parent().parent().parent().parent().remove()
      }
      var uploadEditButtonFunctionCall = 0
      function uploadEditButtonContent(){
        uploadEditButtonFunctionCall++;
          return(`
          <div class="card collapsed-card multipleJs masterstyling" id="upload_master_stylling${uploadEditButtonFunctionCall}" style="margin-left:-12px;margin-right: -12px;">
            <div class="card-header row">
              <div class="form-group col-8" style="display:flex; align-items: center; margin-bottom: 0px;">
                <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select the Button:</p>
                <div class="col-4">
                <select class="select2 form-control selectButtonsOptions" onchange="uploadSelectedButtonName(this)" style="margin-left: 5px;">
                  <option value="" disabled selected>Select Button</option>
                  <option value="uploadcancel">Cancel</option>
                  <option value="uploadupload">Upload</option>
                  <option value="uploadmapcolumns">Map Columns</option>
                  <option value="uploadcustomvalidation">Custom Validation</option>
                  <option value="uploadaddcomputationlogic">Add Computation Logic</option>
                  <option value="uploaddownloaddata">Download data</option>
                  <option value="uploaduploadhistory">Upload history</option>
                  <option value="uploadlastuploaderrors">Last upload errors</option>
                  <option value="uploaddetailederrorlog">Detailed error log</option>
                  <option value="advancesettings">Advance settings</option>
                  <option value="uploadviewtransactionstatus">View Transaction Status</option>
                  <option value="uploaddownloadformat">Download Format</option>
                  </select>
                  </div>
                </div>
                  <div class="col-4">
                    <div class="card-tools float-right">
                      <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                      <button type="button" class="btn btn-tool" onclick="uploadRemoveEditButtonContent(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
                  </div>
                </div>
            </div>
            <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
              <div class="row" style="padding-left: 15px;">
                <div class="col-4">
                  <p style="font-weight: bold;">Text of button:</p>
                  <input type="text"  data-css="text" class="textinput textInput form-control ">
                </div>
                <div class="col-4">
                    <p style="font-weight: bold;">Select text color:</p>
                    <input type="color" value="#ffffff" class="form-control" data-css="color">
                </div>
                <div class="col-4">
                    <p style="font-weight: bold;">Select background color:</p>
                    <div class="input-group">
                      <input type="color" value="#565a5e" class="form-control " data-css="background-color">
                      <select class="select2 form-control" data-css="opacity" >
                        <option value="1" selected >None</option>
                        <option value="0.9">0.9</option>
                        <option value="0.8">0.8</option>
                        <option value="0.7">0.7</option>
                        <option value="0.8">0.8</option>
                        <option value="0.7">0.7</option>
                        <option value="0.6">0.6</option>
                        <option value="0.5">0.5</option>
                        <option value="0.4">0.4</option>
                        <option value="0.3">0.3</option>
                        <option value="0.2">0.2</option>
                        <option value="0.1">0.1</option>
                        <option value="0">0</option>
                      </select>
                  </div>
                </div>
              </div>
              <div class="row" style="padding-left: 15px; padding-top:15px;">
                  <div class="col-4" >
                  <p style="font-weight: bold;">Select border type:</p>
                  <select class="select2 form-control" data-css="border-style" >
                      <option value="none">No border</option>
                      <option value="dotted" >Dotted</option>
                      <option value="dashed" >Dashed</option>
                      <option value="solid" >Solid</option>
                      <option value="double" >Double</option>
                      <option value="groove" >Groove</option>
                      <option value="ridge" >Ridge</option>
                      <option value="inset" >Inset</option>
                      <option value="outset" >Outset</option>
                      <option value="dotted dashed solid double" >Dotted dashed solid double</option>
                  </select>
                  </div>
                  <div class="col-4">
                  <p style="font-weight: bold;">Select border width:</p>
                  <div class="input-group">
                      <input type="float" class="form-control" data-css="border-width" >
                      <select class="select2 form-control" data-css="border-measure">
                        <option value="">None</option>
                        <option value="px">px</option>
                      </select>
                  </div>
                  </div>
                  <div class="col-4">
                    <p style="font-weight: bold;">Select border color:</p>
                    <input type="color" class="form-control" data-css="border-color" >
                  </div>
              </div>
              <div class="row" style="padding-left: 15px; padding-top:15px;">
                <div class="col-4" >
                  <p style="font-weight: bold;">Select icon to add:</p>
                  <button class="btn btn-primary iconappend" type="button" onclick="icon_button_selector(this)" data-list="">
                    Icon Selector
                  </button>
                </div>
                <div class="col-4">
                  <p style="font-weight: bold;">Select icon color:</p>
                  <input type="color" value="#ffffff" class="form-control" data-css="icon-color">
                </div>
                <div class="col-4" >
                  <p style="font-weight: bold;">Select button size:</p>
                  <select class="select2 form-control" data-css="font-size">
                    <option value="none">Normal</option>
                    <option value="10px">Xtra small</option>
                    <option value="12px">Small</option>
                    <option value="16px">Medium</option>
                    <option value="20px">Large</option>
                    <option value="24px">Xtra large</option>
                  </select>
                </div>

              </div>
              <div class="row" style="padding-left: 15px; padding-top:15px;">
                <div class="col-4">
                  <p style="font-weight: bold;">Select hover action:</p>
                  <select class="select2 form-control" onchange="uploadhoverOptionsEditButton(this)" data-css="hoveractions">
                    <option value="none">No Effect</option>
                    <option value="Color">Color</option>
                    <option value="Gradient">Gradient</option>
                    <option value="textsize">Text-size</option>
                  </select>
                </div>
                <div class="col-4">
                  <p style="font-weight: bold;">Select shape:</p>
                  <select class="select2 form-control" data-css="shape">
                    <option value="">Select Shape</option>
                    <option value="square">Square</option>
                    <option value="circle">Circle</option>
                    <option value="oval">Oval</option>
                    <option value="rectangle">Rectangle</option>
                    <option value="parallelogram">Parallelogram</option>
                  </select>
                </div>
            </div>
            <div class="row hoverButton" style="padding-left: 15px; padding-top:15px; width: 100%; display: flex;">

            </div>
            </div>
          </div>
          </div>`)
      }
      function uploadhoverOptionsEditButton(obj){
        var value = $(obj).val()
          if (value == 'Color'){
            $(obj).parent().parent().parent().find('.hoverButton').empty()
            $(obj).parent().parent().parent().find('.hoverButton').append(`
            <div class="col-4" >
              <p style="font-weight: bold;">Color of hover:</p>
              <input type="color" class="form-control stylingJsFieldColorInput" data-css="hover-color" value="#ffffff" required>
            </div>
            `)
          }else if (value == 'Gradient'){
            $(obj).parent().parent().parent().find('.hoverButton').empty()
            $(obj).parent().parent().parent().find('.hoverButton').append(`
            <div class="col-4" >
              <p style="font-weight: bold;">Select type of gradient:</p>
              <select class="select2 Gradeints form-control" data-css="type-gradient" required=""  >
                <option value="linear-gradient">Linear Gradients</option>
                <option value="radial-gradient">Radial Gradients</option>
                <option value="conic-gradient">Conic Gradients</option>
              </select>
            </div>
            <div class="col-4" >
              <p style="font-weight: bold;">Color 1:</p>
              <input type="color" class="form-control stylingJsFieldColorInput" data-css="gradient-color-1" required>
            </div>
            <div class="col-4" >
              <p style="font-weight: bold;">Color 2:</p>
              <input type="color" class="form-control stylingJsFieldColorInput" data-css="gradient-color-2" required>
            </div>
            `)
          }else if (value == 'textsize'){
            $(obj).parent().parent().parent().find('.hoverButton').empty()
            $(obj).parent().parent().parent().find('.hoverButton').append(`
            <div class="col-4" >
              <p style="font-weight: bold;">Select size:</p>
              <select class="select2 form-control" data-css="hover-text-size" required=""  >
                <option value="none">Normal</option>
                <option value="10px">Xtra small</option>
                <option value="12px">Small</option>
                <option value="16px">Medium</option>
                <option value="20px">Large</option>
                <option value="24px">Xtra large</option>
              </select>
            </div>
            `)
          }else if (value == 'none'){
            $(obj).parent().parent().parent().find('.hoverButton').empty()
          }
          $('#uploadButtonModal').find('.hoverButton').find('select').each(function(){

    $(this).select2( )
  })
      }
      function uploadcloseEditButton(obj){
        $('#documentModal').modal('show');
        $('#uploadButtonModal').modal('hide')
      }
      function uploadSaveEditButton(obj){
        var cards = $('#uploadButtonModal').find('.masterstyling')
        var fullValues = {}
        var lengthOfCards = cards.length;
        for (let i = 0; i < lengthOfCards; i++) {
          var values = {}
          var singleCard = $('#uploadButtonModal').find('.masterstyling').eq(i)
          var selectedButton = $(singleCard).find('.selectButtonsOptions').val()
          $(singleCard).find('[data-css]').each(function(){values[$(this).attr('data-css')] = $(this).val()})
          values['data-icon'] = $(singleCard).find('.iconappend').attr('data-list')
          values['rgba'] = hexToRGB(values['background-color'],values['opacity'])
          fullValues[selectedButton] = values
        }
        $('#uploadButtonId').attr('data-list',JSON.stringify(fullValues))
        $('#uploadButtonModal').modal('hide')
        $("#documentModal").modal('show');
      }
      function extractUploadButtons(obj){
        var buttonValues = $('#uploadButtonId').attr('data-list')
        if (buttonValues == '' || buttonValues == '{}' ){
          return null
        }else {
          var parsedValues = JSON.parse(buttonValues)
          return parsedValues
        }
      }
      function augmentationTableLoad(config_) {
      let i = 0
      let val_present = false
      for (const [key, value] of Object.entries(config_)) {
        if(value != "augmentation" && !["decision_name","decision_purpose"].includes(key)){
          if(i != 0){
            $(".augmentationBody").append(indAugmentationHtml());
            $(".augmentationBody").find("select").select2();
            $(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationValue").select2({tags:true});
            $(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationNextElement").empty();
            for(let j = 0; j < childConnected.length; j++){
              $(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationNextElement").append(`<option value="${childConnected[j]}">${childName[j]}</option>`)
            }
            $(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationColumn").empty()
            for(let j = 0; j < augmentationColumn.length; j++){
              $(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationColumn").append(`<option data-table="${augmentationColumn[j]["table"]}" value="${augmentationColumn[j]["name"]}">${augmentationColumn[j]["verbose"]}</option>`)
            }
          }
          $(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationColumn").val(value["column"]).trigger("change")
          $(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationCond").val(value["condition"]).trigger("change")
          $(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationValue").find("option").each(function() {
            if($(this).attr("value") == value["value"]){
              val_present = true
            }
          })
          if (!val_present) {
            $(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationValue").append(`<option value="${value["value"]}">${value["value"]}</option>`)
          }
          $(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationValue").val(value["value"]).trigger("change")
          $(".augmentationBody").find(".indAugmentation").eq(-1).find(".augmentationNextElement").val(key).trigger("change")

          i++
        }
      }
    }
    function modifyColumnTableLoad(data1) {
      $("#modifyColumn_").val(data1.modifyColumnColumn).trigger("change");
    }
    function casesReload(dic_cases) {
      var ind_ = 0
      for(let [key,value] of Object.entries(dic_cases) ){
          if ('field_based' in value){
            addIndCasesFieldBased.call($('#casesModal').find('.add_field_based_scenarios'),value,key)
          }else{
            if(ind_ != 0){
              $(".casesBody").append(indCasesHtml());
            } else {
              $(".casesBody").append(indCasesHtmlFirst());
            }
            $(".indCases").eq(-1).find("select").select2({"tags":true});
            $(".indCases").eq(-1).find(".casesValue").empty();
            $(".indCases").eq(-1).find(".casesColumn").empty();
            $(".indCases").eq(-1).find(".casesColumn").append(`<option value="">Select column</option>`);
            for(let i = 0; i < allFieldsColumns.length; i++) {
              $(".indCases").eq(-1).find(".casesColumn").append(`<option value="${allFieldsColumns[i]}">${verboseName[i]}</option>`);
            }
            $(".indCases").eq(-1).find(".casesName").val(key).trigger("change");
            $(".indCases").eq(-1).find(".casesCond").val(value["condition"]).trigger("change");
            $(".indCases").eq(-1).find(".casesColumn").val(value["column"]).trigger("change");
            var value_present = false;
            $(".indCases").eq(-1).find(".casesValue").find("option").each(function(){
              if($(this).attr("value") == value["value"]){
                value_present = true
              }
            })
            if(!value_present){
              if(value["condition"] == "In" || value["condition"] == "Not In"){
                for(let o = 0; o < value["condition"].length; o++){
                  $(".indCases").eq(-1).find(".casesValue").append(`<option value="${value["value"][o]}">${value["value"][o]}</option>`)
                }
              } else {
                $(".indCases").eq(-1).find(".casesValue").append(`<option value="${value["value"]}">${value["value"]}</option>`)
              }
            }
            $(".indCases").eq(-1).find(".casesValue").val(value["value"]).trigger("change");
          }
          ind_ = ind_ + 1;
        }
    }
    function customButtonLoad(dic_cb) {
      var ind_ = 0
      for (const [key, value] of Object.entries(dic_cb)) {
        if(ind_ != 0){
          $(".customButtonBody").append(customButtonHtml());
          $(".customButtonBody").find(".indCustomButton").eq(-1).find(".customButtonProcess").append(`<option value="">Select process</option>`);
          for(let [key,value] of Object.entries(process_sprocess_) ){
            $(".customButtonBody").find(".indCustomButton").eq(-1).find(".customButtonProcess").append(`<option value="${key}">${key}</option>`);
          }
        }
        $(".customButtonBody").find(".indCustomButton").eq(-1).find(".customButtonName").val(value["name"]).trigger("change");
        $(".customButtonBody").find(".indCustomButton").eq(-1).find(".customButtonNavigate").val(value["navigation"]).trigger("change");
        $(".customButtonBody").find(".indCustomButton").eq(-1).find(".customButtonAppInApp").val(value["navigation_type"]).trigger("change");
        $(".customButtonBody").find(".indCustomButton").eq(-1).find(".customButtonProcess").val(value["process"]).trigger("change");
        $(".customButtonBody").find(".indCustomButton").eq(-1).find(".customButtonSubProcess").val(value["subprocess"]).trigger("change");
        $(".customButtonBody").find(".indCustomButton").eq(-1).find(".customButtonColor").val(value["color"]).trigger("change");
        $(".customButtonBody").find(".indCustomButton").eq(-1).find(".customButtonCustomLink").val(value["link"]).trigger("change");
        if(value["navigation"] == "Idle"){
          $(".customButtonBody").find(".indCustomButton").eq(-1).find(".customButtonCustomLinkCont").css("display","none")
        }
        ind_ = ind_ + 1;
      }
      $(".indCustomButton").find("select").select2();
    }
    function viewHistory_columnActionLoad(data){
      if(data.hasOwnProperty('viewHistory_columns')){
        let viewhistory_config =data.viewHistory_columns
        if(viewhistory_config){
          for(var tname in viewhistory_config){
            if(viewhistory_config[tname].length>0){

              for(let k=0;k<viewhistory_config[tname].length;k++){
                $(`#viewHistory_columnAction`).find(`option[data-table-name='${tname}'][value='${viewhistory_config[tname][k]}']`).prop('selected', true)
                $(`#viewHistory_columnAction`).select2()
              }
            }
          }
        }
      }
    }
    function viewDraft_columnActionLoad(data){
      if(data.hasOwnProperty('viewDraft_columns')){
        let viewdraft_config =data.viewDraft_columns
        if(viewdraft_config){
          for(var tname in viewdraft_config){
            if(viewdraft_config[tname].length>0){

              for(let k=0;k<viewdraft_config[tname].length;k++){
                $(`#viewDraft_columnAction`).find(`option[data-table-name='${tname}'][value='${viewdraft_config[tname][k]}']`).prop('selected', true)
                $(`#viewDraft_columnAction`).select2()
              }
            }
          }
        }
      }
    }
    function viewHistory_displayColumnsLoad(data){
      if(data.hasOwnProperty('viewHistory_displayColumns_columns')){
        let viewHistory_dropColumns_config =data.viewHistory_displayColumns_columns
        if(viewHistory_dropColumns_config){
          for(var tname in viewHistory_dropColumns_config){
            if(viewHistory_dropColumns_config[tname].length>0){

              for(let k=0;k<viewHistory_dropColumns_config[tname].length;k++){
                $(`#viewHistory_displayColumns`).find(`option[data-table-name='${tname}'][value='${viewHistory_dropColumns_config[tname][k]}']`).prop('selected', true)
                $(`#viewHistory_displayColumns`).select2()
              }
            }
          }
        }
      }
    }

    function viewRejectedRecords_displayColumnsLoad(data){
      if(data.hasOwnProperty('viewRejectedRecords_displayColumns_columns')){
        let viewRejectedRecords_dropColumns_config =data.viewRejectedRecords_displayColumns_columns
        if(viewRejectedRecords_dropColumns_config){
          for(var tname in viewRejectedRecords_dropColumns_config){
            if(viewRejectedRecords_dropColumns_config[tname].length>0){

              for(let k=0;k<viewRejectedRecords_dropColumns_config[tname].length;k++){
                $(`#viewRejectedRecords_displayColumns`).find(`option[data-table-name='${tname}'][value='${viewRejectedRecords_dropColumns_config[tname][k]}']`).prop('selected', true)
                $(`#viewRejectedRecords_displayColumns`).select2()
              }
            }
          }
        }
      }
    }
    $('#EBDisplayButtonID').off('click').on('click', function () {
      $('#EBDisplayModel').modal('show')
    })
    $('.closeEqBuilder').on('click', function () {
      $('#EBDisplayModel').modal('hide')
    })
    $('#configureFlow').on('shown.bs.modal', function () {
      $(document).off('focusin.modal')
    })
    $('#EBDisplayModel').on('shown.bs.modal', function () {
      $(document).off('focusin.modal')
    })
    let flowColumnCC = []
    function indFlowHtmlCC() {
      let html_cases = `
      <div class="row indFlowCC flowUserValidationCC" style="margin-top:10px;">
        <div class="col-4">
          <select class="select2 form-control flowColumnCC">
          </select>
        </div>
        <div class="col-4">
          <select class="select2 form-control flowCondCC" onchange="changeFlowSelectTagTo.call(this)">
            <option value="" disabled selected>Select condition</option>
            <option value="Equal to">Equal to</option>
            <option value="IN">In</option>
            <option value="Not Equal to">Not Equal to</option>
            <option value="NOT IN">Not In</option>
            <option value="Greater than">Greater than</option>
            <option value="Smaller than">Smaller than</option>
            <option value="Starts with">Starts with</option>
            <option value="Ends with">Ends with</option>
          </select>
        </div>
        <div class="col-3">
          <select class="select2 form-control flowValueCC">
          </select>
        </div>
        <div class="col-1">
          <i class="fas fa-remove" onclick="removeIndFlowCC.call(this)" style="font-size: initial;"></i>
        </div>
      </div>
      `
      return html_cases
    }
    function computationCondition() {
      $(".computationCondition1").css("display","block")
      let tablecc = $("#EBDisplayButtonID").attr("data-tablepc")
      $(".flowTableCC").empty()
      $(".flowTableCC").append(`<option value="${tablecc}">${tablecc}</option>`)
      let columnCC = JSON.parse($("#EBDisplayButtonID").attr("data-tablelist"))
      flowColumnCC = columnCC
      $(".flowColumnCC").empty()
      $(".flowColumnCC").append(`<option value="">---</option>`)
      for(let i = 0; i < columnCC.length; i++){
        $(".flowColumnCC").append(`<option value="${columnCC[i]}">${columnCC[i]}</option>`)
      }
      $(".flowValueCC").select2({"tags":true})
    }
    function addIndFlowCC() {
      var html_flow = indFlowHtmlCC();
      $(this).closest(".flowBodyCC").append(html_flow);
      $(this).closest(".flowBodyCC").find(".indFlowCC").eq(-1).find("select").each(function() {
        $(this).select2({"tags":true});
      })
      $(this).closest(".flowBodyCC").find(".indFlowCC").eq(-1).find(".flowColumnCC").empty();
      $(this).closest(".flowBodyCC").find(".indFlowCC").eq(-1).find(".flowColumnCC").append(`<option value="">Select column</option>`);
      for(let i = 0; i < flowColumnCC.length; i++) {
        $(this).closest(".flowBodyCC").find(".indFlowCC").eq(-1).find(".flowColumnCC").append(`<option value="${flowColumnCC[i]}">${flowColumnCC[i]}</option>`);
      }
    }
    function removeIndFlowCC(){
      $(this).closest(".indFlowCC").remove();
    }
    function changeFlowSelectTagCC() {
      if($(this).val() == "IN" || $(this).val() == "NOT IN"){
        $(this).closest(".indFlowCC").find(".flowValueCC").select2("destroy");
        $(this).closest(".indFlowCC").find(".flowValueCC").attr("multiple","multiple");
        $(this).closest(".indFlowCC").find(".flowValueCC").select2({"tags":true});
      } else {
        $(this).closest(".indFlowCC").find(".flowValueCC").select2("destroy");
        $(this).closest(".indFlowCC").find(".flowValueCC").removeAttr("multiple");
        $(this).closest(".indFlowCC").find(".flowValueCC").select2({"tags":true});
      }
    }
    function userValidationCC() {
      if($(this).prop("checked")) {
        $(".flowUserValidationCC").css("display","flex");
      } else {
        $(".flowUserValidationCC").css("display","none");
        $(".flowTableCC").val("").trigger("change");
        ind = 0;
        $(".indFlowCC").each(function() {
          if(ind != 0){
            $(this).remove();
          }
          ind++
        })
      }
    }
    function saveFlowLink() {
      let element_id = $(this).closest(".modal-footer").attr("data-element_id")
      let element_name = $(this).closest(".modal-footer").attr("data-source_element")
      if(![null,""].includes($("#flowLinkName").val())){
        $.ajax({
          url: window.location.pathname,
          data: {
            'process_code': $("#graphContainerID").attr("data-process_code"),
            'sub_process_name':$("#graphContainerID").attr("data-sub_process_name"),
            'element_id':element_id,
            'pr_code': $('#flowLinkSubprocess').val(),
            'name':$("#flowLinkName").val(),
            'source_element_id':"not required",
            'element_name':"element_name",
            'operation': 'saveFlowLink'
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
          },
          error: function(){
            Swal.fire({icon: 'error',text: 'Error! Failure in saving the configuration. Please check and try again.'});
          }
        });
      } else {
        Swal.fire({icon: 'warning',text: 'Link name cannot be left blank.'});
      }
    }
    function reloadFlowLinkConfig(element_id){
      $.ajax({
          url: window.location.pathname,
          data: {
            'process_code': $("#graphContainerID").attr("data-process_code"),
            'sub_process_name':$("#graphContainerID").attr("data-sub_process_name"),
            'element_id':element_id,
            'operation': 'reloadFlowLink'
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            if(data.message != "fail"){
              let payload = JSON.parse(data.payload)
              $('#flowLinkSubprocess').val(payload.pr_code).trigger("change")
              $('#flowLinkName').val(payload.name).trigger("change")
              $('#flowLinkElement').empty()
              $('#flowLinkElement').append(`<option value="${payload.source_element_id}">${payload.element_name}</option>`)
            }
          },
          error: function(){
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        });
    }
    function saveFlowLinkTo() {
      let element_id = $(this).closest(".modal-footer").attr("data-element_id")
      let pr_code = ""
      $("#flowLinkNameOption").find("option").each(function() {
        if($("#flowLinkNameOption").val() == $(this).attr("value")){
          pr_code = $(this).attr("data-pr_code")
        }
      })
      $.ajax({
        url: window.location.pathname,
        data: {
          'process_code': $("#graphContainerID").attr("data-process_code"),
          'sub_process_name':$("#graphContainerID").attr("data-sub_process_name"),
          'element_id':element_id,
          'name':$("#flowLinkNameOption").val(),
          'pr_code_dest':pr_code,
          'operation': 'saveFlowLinkTo',
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
        },
        error: function(){
          Swal.fire({icon: 'error',text: 'Error! Failure in saving the configuration. Please check and try again.'});
        }
      });
    }
    function reloadFlowLinkToConfig(element_id) {
      $.ajax({
          url: window.location.pathname,
          data: {
            'process_code': $("#graphContainerID").attr("data-process_code"),
            'sub_process_name':$("#graphContainerID").attr("data-sub_process_name"),
            'element_id':element_id,
            'operation': 'reloadFlowLinkTo'
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            if(data.message != "fail"){
              let payload = JSON.parse(data.payload)
              $('#flowLinkNameOption').val(payload.name).trigger("change")
            }
          },
          error: function() {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })
    }
    function closeStaticPages() {
      editor_grapejs.DomComponents.clear();
      $("#designModal").css('display','none');
      $("#staticPageSave").css("display","none")
      $(".savebtn").css("display","block")
      $('.restoreL3').css("display","block")
    }
    let static_page_html = ""
    let static_page_css = ""
    let static_page_script = `
      var items = document.querySelectorAll('.navbar-burger');
      for (var i = 0, len = items.length; i < len; i++) {
        (function(){
          var e,t=0,n=function(){
            var e,t=document.createElement("void"),n={
              transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};
            for(e in n)if(void 0!==t.style[e])return n[e]}
          (),r=function(e){
            var t=window.getComputedStyle(e),n=t.display,r=(t.position,t.visibility,t.height,parseInt(t["max-height"]));
            if("none"!==n&&"0"!==r)return e.offsetHeight;
            e.style.height="auto",e.style.display="block",e.style.position="absolute",e.style.visibility="hidden";
            var i=e.offsetHeight;
            return e.style.height="",e.style.display="",e.style.position="",e.style.visibility="",i}
          ,i=function(e){
            t=1;
            var n=r(e),i=e.style;
            i.display="block",i.transition="max-height 0.25s ease-in-out",i.overflowY="hidden",""==i["max-height"]&&(i["max-height"]=0),0==parseInt(i["max-height"])?(i["max-height"]="0",setTimeout(function(){
              i["max-height"]=n+"px"}
    ,10)):i["max-height"]="0"}
          ,a=function(r){
            if(r.preventDefault(),!t){
              var a=this.closest("[data-gjs=navbar]"),o=a.querySelector("[data-gjs=navbar-items]");
              i(o),e||(o.addEventListener(n,function(){
                t=0;
                var e=o.style;
                0==parseInt(e["max-height"])&&(e.display="",e["max-height"]="")}
                                        ),e=1)}
          };
          "gjs-collapse"in this||this.addEventListener("click",a),this["gjs-collapse"]=1
        }
        .bind(items[i]))();
      }
      //commentClose
      //comment this
      setTimeout(function() {
        var item_ = document.querySelectorAll('[data-type=grapesjs-modal]');
        if (!item_) return;
        (function(){
          if (this.length > 0){
            for(var a=Array.from(this.getElementsByTagName("form")),n=a.shift(),o=0;o<a.length;o++)a[o].addEventListener("submit",function(a){return a.preventDefault()});var t=Array.from(this.getElementsByTagName("button"));t=t.filter(function(a){return"submit"===a.getAttribute("type")});var e=t.pop();if(e&&n){var d=document.createElement("button");d.setAttribute("type","submit"),d.style.display="none",n.prepend(d),e.addEventListener("click",function(a){a.preventDefault(),d.click()})}Boolean("true")&&function(a,n,o){var t=function(a,o,t){if(!a.getElementById(t)||void 0===jQuery.fn.modal){var e=a.createElement(n);e.id=t,e.src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js",o.parentNode.insertBefore(e,o)}};if(!a.getElementById("grapesjs-modal-jquery")&&"undefined"==typeof jQuery){var e,d=a.getElementsByTagName(n)[0];e=a.createElement(n),e.id="grapesjs-modal-jquery",e.src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js",e.onload=function(){t(a,e,"grapesjs-modal-bootstrap")},d.parentNode.insertBefore(e,d)}"undefined"!=typeof jQuery&&t(a,a.body,"grapesjs-modal-bootstrap")}(document,"script")
          }
          ;}.bind(item_))({})
      }, 1);
      //commentClose
    `

    function staticHtmlSave() {
      static_page_html = ""
      static_page_css = ""
      let thiss = $(this)
      let thi = this
      const decodeHtmlCharCodes = str =>
          str.replaceAll(/(&#(\d+);)/g, (match, capture, charCode) =>
            String.fromCharCode(charCode));
      $(".gjs-frame").contents().find('body').find('.reject').remove()
      script_ = $(".gjs-frame").contents().find('body').find('div').eq(0).find('script').text()
      let script1 = $(".gjs-frame").contents().find('body').find('script').text()
      let script_widget = script1.replace(script_,"");
      let script2 = $(".gjs-frame").contents().find('body').find('script').text()

      //script2 = script2.replace(script,"");
      try {
        rejectVar.replaceWith('');

      } catch {

      }
      var e_id_del = [];
      var list_of_element = [];
      if (typeof(element_id_gjs) === 'undefined'){
          element_id_gjs = []
      }
      var dic_widget_script = editor_grapejs.DomComponents.getWrapper().find(`span[data-js=countdown]`)
      var widget_script_ct = []
      for(let i = 0; i < dic_widget_script.length; i++) {
        if(1
        ) {
          widget_script_ct.push(dic_widget_script[i]["ccid"]);
        }
      }
      static_page_html = decodeHtmlCharCodes(editor_grapejs.getHtml())
      static_page_css = JSON.stringify(editor_grapejs.getCss() + `.chartDivSection {
        overflow:scroll;
        pointer-events:cursor;
      }`)
      $('#staticPage').modal("show");
      $("#designModal").css("display","none");
    }

    function staticPageSave() {
      let process_code = $('#graphContainerID').attr('data-process_code')
      let subprocess_name = $('#graphContainerID').attr('data-sub_process_name')
      $.ajax({
          url:window.location.href,
          data: {
            "operation":"save_view_page",
            "htmldata": static_page_html,
            "script": static_page_script,
            "cssdata": static_page_css,
            "template_name": $("#templateName").val(),
            "display_tab": $("#displayType").val(),
            "element_id": $('#staticPage').find('.modal-footer').attr("data-element_id"),
            "process_code": process_code,
            "subprocess_name": subprocess_name
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            static_page_html = "";
            Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
          },
          failure: function () {
            static_page_html = "";
            Swal.fire({icon: 'error',text: 'Error! No custom homepage exist. Please try again.'});
          },
        });
        Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
    }

    function reloadStaticPages() {
      $('#designModal').css('display','block');
      $('#staticPage').modal("hide");
      $("#staticPageSave").css("display","block")
      $(".savebtn").css("display","none")
      $('.restoreL3').css("display","none")
      $.ajax({
        url: window.location.pathname,
        data: {
          'operation': "reloadStaticPages",
          'element_id': $('#staticPage').find('.modal-footer').attr("data-element_id"),
          'name': $("#templateName").val()
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          if(data["html"] != ""){
            static_page_html = data["html"];
            $(".gjs-frame").contents().find('body').find('div').eq(0).append(data["html"])
            script = $(".gjs-frame").contents().find('body').find('div').eq(0).find('script').text();
            injectScript = script

            $(".gjs-frame").contents().find('body').find('div').eq(0).find('script').remove()
            var html = $(".gjs-frame").contents().find('body').find('div').eq(0).html()
            $(".gjs-frame").contents().find('body').find('div').eq(0).empty();
            $(".gjs-frame").contents().find('body').find('div').append("<div class='reject'>"+
              `<script>` + data["script"] + `</` + `script></div>`
            );
            rejectVar = editor_grapejs.addComponents(html)
          }
        },
        error: function() {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })
    }
    function nextElement(){
      if ($(this).attr("data-element") != undefined){
        let data1 = JSON.parse($(this).attr("data-element"))
        let value = $(this).val();
        $("#nextElementTab").empty()
        $("#nextElementTab").append(`<option value="">Default tab</option>`)
        for(let i in data1[value]){
          $("#nextElementTab").append(`<option value="${data1[value][i]["element_id"]}">${data1[value][i]["tab_header_name"]}</option>`)
        }
      }
    }
    </script>
    <script>{{script | safe}}</script>
    <script>{% include 'user_defined_template/widget.js' %}</script>
    <script>{% include 'user_defined_template/standard_widget.js' %}</script>
    <script>
      var script = ""
    widgetsarray.forEach((widget)=>{
      bm.add(widget.id,widget)
    });

    standard_widgetsarray.forEach((widget)=>{
      bm.add(widget.id,widget)
    });
    </script>
    <script>
      $('.gjs-block').on('mouseenter',function() {
        $('.gjs-block-label').css('color','var(--primary-color)')
      })
      function breadcrumbs() {
        let process_code = $('#graphContainerID').attr('data-process_code')
        let subprocess_name = $('#graphContainerID').attr('data-sub_process_name')

        $.ajax({
        url: window.location.pathname,
          data: {
            'operation': "loadBreadcrumbs",
            'process_code': process_code,
            'subprocess_name': subprocess_name,
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            if(Object.keys(data).length != 0){
              $("#breadcrumbsChange").val(data.type).trigger("change")
              if(data.type == "custom") {
                $("#PN5").find(".row").empty()
                let html = `
                  <div class="col-2">
                    <input class="form-control breadcrumbsValue">
                  </div>
                `
                for(let i = 0; i < data["breadcrumbs"].length; i++) {
                  if (1) {
                    $("#PN5").find(".row").append(html)
                  }
                  $(".breadcrumbsValue").eq(-1).val(data["breadcrumbs"][i]).trigger("change")
                }
              }
            }
          },
          error: function() {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })
        $("#breadcrumbsModal").modal("show");
      }

      function breadcrumbsChange() {
        if($(this).val() == "default"){
          $("#PN4").css("display","block");
          $("#PN5").css("display","none");
        } else if($(this).val() == "custom") {
          $("#PN4").css("display","none");
          $("#PN5").css("display","block");
        } else {
          $("#PN4").css("display","none");
          $("#PN5").css("display","none");
        }
      }

      function addBreadcrumbs() {
        let html = `
          <div class="col-3">
            <input class="form-control breadcrumbsValue" style="margin-bottom:10px;">
          </div>
        `
        $(this).closest(".custom").find(".row").append(html)
      }

      function removeBreadcrumbs() {
        $(this).closest(".custom").find(".row").find(".col-2").eq(-1).remove()
      }

      function saveBreadcrumbs() {
        let dic = {
          "type": $("#breadcrumbsChange").val(),
          "breadcrumbs": ""
        }
        if($("#breadcrumbsChange").val() == "custom") {
          let arr = []
          $(".breadcrumbsValue").each(function() {
            arr.push($(this).val())
          })
          dic["breadcrumbs"] = arr
        }

        let process_code = $('#graphContainerID').attr('data-process_code')
        let subprocess_name = $('#graphContainerID').attr('data-sub_process_name')

        $.ajax({
        url: window.location.pathname,
          data: {
            'operation': "saveBreadcrumbs",
            'process_code': process_code,
            'subprocess_name': subprocess_name,
            'config': JSON.stringify(dic)
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            Swal.fire({icon: 'success',text: 'Configuration saved successfully!'});
          },
          error: function() {
            Swal.fire({icon: 'error',text: 'Error! Failure in saving the configuration. Please check and try again.'});
          }
        })
      }
      $("#allField").on("change", function() {
        if($(this).prop("checked")){
          $("#selectAllField").val(allFieldsColumns).trigger("change");
        } else{
          $("#selectAllField").val("").trigger("change");
        }
        selected_fields = {}
        $(".paginationrow_colorder").empty()
        $("#selectAllField option:selected").each(function () {
          var $this = $(this);
          if ($this.length) {
            var selText = $this.text();
            selected_fields[$this.val()] = selText
          }
        });
        addPageRow_colorder(selected_fields)

        $('#column-reorder').find('.sortable-order').sortable()
      })

      $('#selectAllField').on('select2:select', function (e) {
          var data = e.params.data;
          $(".paginationrow_colorder").append(`
          <li class="btn btn-sm btn-light col" name="${data.id}" style="height:auto;margin: 5px auto;">
            <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${data.text}
          </li>`);
      $('#column-reorder').find('.sortable-order').sortable()
      });

      $('#selectAllField').on('select2:unselect', function (e) {
          var data = e.params.data;
          $(`.paginationrow_colorder li[name='${data.id}']`).remove()
      });

      $("#selectAllField").on("change",function() {
        $(this).parent().find(".select2-container").css("max-height","9rem");
        $(this).parent().find(".select2-container").css("overflow-y","scroll");
        if(($(this).val()).length > 0) {
          for(let i = 0; i < allFieldsColumns.length; i++) {
            if (allFieldsColumnsNull[i] == 1) {
              $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+allFieldsColumns[i]).closest(".form-group").parent().css("display",`none`);
            }
          }
          let val1 = $(this).val();
          for(let i = 0; i < val1.length; i++) {
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+val1[i]).closest(".form-group").parent().css("display",`block`);
          }
        } else {
          for(let i = 0; i < allFieldsColumns.length; i++) {
            $('#formModal').find('.row').find('.col-8').find('.modal-body').eq(0).find('.card-body').eq(0).find('.form-row').find("#"+allFieldsColumns[i]).closest(".form-group").parent().css("display",`block`);
          }
        }
        var selectedColumns = $(this).val()
        populatePreview(selectedColumns=selectedColumns);
      })

    function eventTrigger() {
      $(".stylingJsDetailsInput, .stylingJsHoverInput, .stylingJsInstructionInput").on({
        keydown: function(event) {
          if (event.which === 222)
          return false;
        },
          // if a space copied and pasted in the input field, replace it (remove it):
        change: function() {
          if(this.value != null || this.value != undefined){
            if(this.value.includes('"')){
              this.value = this.value.replace('"', "");
            } else if(this.value.includes("'")){
              this.value = this.value.replace("'", "");
            }
          }
        }
      })
    }
    var masterDepTableColumn = [];

    function masterDepTableSelect() {

      $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFields',
            'tablesForm': JSON.stringify([$(this).val()]),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            masterDepTableColumn = [];
            for (j in data.finalFieldList) {
              if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from') {
                masterDepTableColumn.push({
                  "name":data.finalFieldList[j]['fieldName'],
                  "verbose":data.finalFieldList[j]['verbose'],
                  "datatype":data.finalFieldList[j]['fieldType']
                });
                $(".indDepFieldTypeMapper").append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
              }
            }
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })
    }
    function indDepFieldHtml() {
      let html = `
        <div class="wrappers col-12" style="display:flex">
          <div class="col-5" style="display: inline-block;">
            <select  class="select2 form-control indDepFieldTypeSelect">
              <option value="" selected>Dependent field</option>
            </select>
          </div>
          <div class="col-5" style="display: inline-block;">
            <select  class="select2 form-control indDepFieldTypeMapper commonCol">
              <option value="" selected>Mapper field</option>
            </select>
          </div>
          <div class="col-2" style="display: inline-block;float:right">
            <i class="fas fa-remove" style="color:black; font-size:16px; margin-top: 5px; float:right" onclick="removeIndDepField.call(this)"></i>
          </div>
        </div>
      `
      return html
    }

    function addIndDepField() {
      let html = indDepFieldHtml();
      $(this).closest(".autopopulate").find(".indDepFieldType").append(html);

      for(let i = 0; i < masterDepTableColumn.length; i++){
        $(this).closest(".autopopulate").find(".indDepFieldType").find(".indDepFieldTypeMapper").eq(-1).append(`<option value="${masterDepTableColumn[i]["name"]}">${masterDepTableColumn[i]["verbose"]}</option>`);
      }
      for(j in allFieldsColumns){
        if (allFieldsColumnsType[j] != "BooleanField") {
          $(this).closest(".autopopulate").find(".indDepFieldType").find('.indDepFieldTypeSelect').eq(-1).append(`<option value="${allFieldsColumns[j]}">${verboseName[j]}</option>`)
        }
      }
      $(this).closest(".autopopulate").find(".indDepFieldType").find(".wrappers").eq(-1).find('.select2').each(function(){

    $(this).select2( )
  });

      for(j in commonCol){
        $(this).closest(".autopopulate").find(".indDepFieldType").find('.indDepFieldTypeMapper').eq(-1).append(`<option value="${commonCol[j]}">${commonColVerb[j]}</option>`)
      }
      $(this).closest(".autopopulate").find(".indDepFieldType").find(".wrappers").eq(-1).find('.select2').each(function(){

    $(this).select2( )
  });
    }

    function removeIndDepField() {
      $(this).closest(".wrappers").remove();
    }

    function saveFlowController() {
      let elementId = $(this).closest(".modal-footer").attr("data-element_id");
      let elementType = "flowController";
      let elementShape = "square";
      function findTable(column) {
        let table_arr =  $(".augmentationTable").val()
        let table = ""
        if(table_arr.length > 0){
          for(let i = 0; i < (table_arr).length; i++){
            $(this).find(".augmentationColumn").find("option").each(function() {
              if($(this).attr("data-table") == table_arr[i] && $(this).attr("value") == column){
                table = table_arr[i]
              }
            })
          }
          if(table == ""){
            return "NULL"
          } else {
            return table
          }
        } else {
          return "NULL"
        }
      }
      let dic = {"decision_type":"augmentation",
        'decision_name': $("#decision_name").html(),
        'decision_purpose': $("#decision_purpose").html(),
      }
      $(".indAugmentation").each(function() {
        let type = ""
        for(let i = 0; i < augmentationColumn.length; i++) {
          if($(this).find(".augmentationColumn").val() == augmentationColumn[i]["name"]){
            type = augmentationColumn[i]["datatype"]
          }
        }
        dic[$(this).find(".augmentationNextElement").val()] = {
          "column": $(this).find(".augmentationColumn").val(),
          "condition": $(this).find(".augmentationCond").val(),
          "table": findTable.call(this,$(this).find(".augmentationColumn").val()),
          "value": $(this).find(".augmentationValue").val(),
          "type": type,
        }
      })
      var flowControllerBody= {
        "type":"augmentation",
        "Category_sub_elements": [{
          "Category_sub_element_name": "Augmentation",
          "Category_sub_element_attributes": [{
            "Category_attr": "Table_name",
            "value": ""
          }, {
            "Category_attr": "Field_Choice",
            "value": dic
          }]
        }]
      }

      $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'saveFlowControllerElementConfig',
            'processName': process_name,
            'subProcessName': subprocess_name,
            'tableName': JSON.stringify($(".augmentationTable").val()),
            'tabBodyContent': JSON.stringify(flowControllerBody),
            'elementID': elementId,
            'shape': elementShape,
            'element_type':elementType,
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            $('#decisionModal').modal("hide")
            Swal.fire({icon: 'success',text: 'Augmentation saved successfully!'});
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Failure in saving the Augmentation. Please check and try again.'});
          }
        })
    }
    function flowControllerConfigLoad() {
      $.ajax({
        url: window.location.pathname,
        data: {
          'element_id': element_id,
          'operation': 'flowcontroller_config_load'
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          if(data.type == "augmentation") {
            $("#decision_config").val(data.type).trigger("change");
            let config_ = data.config
            let value_ = []
            for (const [key, value] of Object.entries(data.config)) {
              if(value != "augmentation" && !["decision_name","decision_purpose"].includes(key)){
                value_.push(value["table"])
              }
            }
            $(".augmentationTable").attr("data-reload","yes")
            $(".augmentationTable").attr("data-reloaddata",JSON.stringify(config_));
            $(".augmentationTable").val(value_).trigger("change")
          }
        },
        error:function(err) {

        }
      })
    }

    function removeScheduleFlow() {
      $("#saveSchedulerFlow").attr("data-delete",dest_element_id)
      $(this).closest(".indScheduleFlow").remove()
    }
    function scheduleFlowHtml(){
      let btn_id = String(Math.random()).replace(".","")
      let data = JSON.parse($("#schedulerFlowModal").attr("data-element_list"))
      let elementNameHtml = `<option value="" disabled selected>Select element</option>`
      let dic = {
        "decision_box":{"Approve all":"Approve all","Reject all":"Reject all"},
        "computation": {"Run model":"Run model"},
        "analysis": {"Refresh charts":"Refresh charts"},
        "create_view": {"Save":"Save"},
        "list_view": {"Upload":"Upload","Refresh table":"Refresh table","Edit":"Edit"},
        "data_connector": {"Upload":"Upload"},
        "flowController": {"Run":"Run"}
      }
      let dic_ = {
        "create_view": {"Save":"Save","Computed fields":"Computed fields"},
        "list_view": {"Upload":"Upload","Save edit":"Edit"},
        "computation": {"Run model":"Run computation"},
        "data_connector": {"Upload":"Upload"},
        "decision_box": {"Approve all":"Approve all","Reject all":"Reject all"},
        "flowController": {"Run":"Run"}
      }
      let source_element_type = ""
      for (i in data){
        if(data[i].hasOwnProperty("c_element_id")){
          if(data[i]["element_id"] == source_element_id){
            source_element_id = data[i]["c_element_id"]
          }
        }
      }
      if(source_element_id.includes('decision')){
        source_element_type = "decision_box"
      } else if(source_element_id.includes('ellipse')){
        source_element_type = "analysis"
      } else if(source_element_id.includes('parallelogram')){
        source_element_type = "computation"
      } else if(source_element_id.includes('document')){
        source_element_type = "data_connector"
      } else if(source_element_id.includes('process')){
        source_element_type = "list_view"
      } else if(source_element_id.includes('whiteSpace')){
        source_element_type = "create_view"
      } else if(source_element_id.includes('linkto')){
        source_element_type = "flowlinkto"
      } else if(source_element_id.includes('flowCon')){
        source_element_type = "flowController"
      }
      let dest_element_type = ""
      if(dest_element_id.includes('decision')){
        dest_element_type = "decision_box"
      } else if(dest_element_id.includes('ellipse')){
        dest_element_type = "analysis"
      } else if(dest_element_id.includes('parallelogram')){
        dest_element_type = "computation"
      } else if(dest_element_id.includes('document')){
        dest_element_type = "data_connector"
      } else if(dest_element_id.includes('process')){
        dest_element_type = "list_view"
      } else if(dest_element_id.includes('whiteSpace')){
        dest_element_type = "create_view"
      } else if(dest_element_id.includes('flowCont')){
        dest_element_type = "flowController"
      }
      let trigger = `<option value="" disabled>Select trigger event</option>
      `
      for(let [key,value] of Object.entries(dic_[source_element_type]) ){
        trigger = trigger + `<option value="${key}">${value}</option>`
      }
      let actionDropdown = `<option value="" disabled selected>Select action</option>`
      if(dic.hasOwnProperty(dest_element_type)) {
        for(let [key,value] of Object.entries(dic[dest_element_type]) ){
          actionDropdown = actionDropdown + `<option value="${key}">${value}</option>`
        }
      } else {
        for(let [key,value] of Object.entries(dic[dest_element_type]) ){
          actionDropdown = actionDropdown + `<option value="${key}">${value}</option>`
        }
      }
      for(let i = 0; i < data.length; i++) {
        if (data[i]["tab_type"] == "computation"){
          elementNameHtml = elementNameHtml + `<option data-tab_type="${data[i]["tab_type"]}" data-element_id="${data[i]["element_id"]}" value="${data[i]["computation_name"]}">${data[i]["computation_name"]}</option>`
        } else {
          elementNameHtml = elementNameHtml + `<option data-tab_type="${data[i]["tab_type"]}" data-element_id="${data[i]["element_id"]}" value="${data[i]["tab_header_name"]}">${data[i]["tab_header_name"]}</option>`
        }
      }
      return(`
        <div class="card indScheduleFlow">
          <div class="card-header">
            <div class="col-4" style="display: inline-block">
                <div class="schedulerFlowElementName" onclick="schedulerFlowElement.call(this)" data-src_element_id = "${source_element_id}" data-dest_element_id = "${dest_element_id}" style="color:var(--primary-color); display:flex;">
                  <p style="margin-top: 8px;margin-bottom:0px;">${source_element_type}</p>
                  <p style="font-size:24px;margin-left: 5px;margin-right: 5px;margin-bottom:0px;"> →</p>
                  <p style="margin-top: 8px;margin-bottom:0px;"> ${dest_element_type}</p>
                </div>
              </div>
            <div class="card-tools float-right">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus" style="color:var(--primary-color);"></i><i class="fas fa-remove" onclick="removeScheduleFlow.call(this)" style="font-size: initial;margin-top: 5px;margin-left: 20px;color:var(--primary-color);"></i></button>
            </div>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-4" style="margin-bottom: 10px;">
                <select class="select2 form-control schedulerType" onchange="changeScheduleType.call(this)">
                  <option value="" disabled selected>Select Schedule type</option>
                  <option value="Interval">Interval</option>
                  <option value="On trigger">On trigger</option>
                  <option value="Flow automate">Flow automater</option>
                </select>
              </div>
              <div class="col-4 schedulerTypeIntervalCommon" style="display:none; margin-bottom: 10px;">
                <select class="select2 form-control schedulerTypeInterval">
                  <option value="" disabled selected>Select Schedule Interval</option>
                  <option value="Daily">Daily</option>
                  <option value="Weekly">Weekly</option>
                  <option value="Monthly">Monthly</option>
                  <option value="Monthly/5th day">Monthly/5th day</option>
                  <option value="Quarterly">Quarterly</option>
                  <option value="Pre-Quarterly">Pre-Quarterly</option>
                  <option value="Yearly">Yearly</option>
                </select>
              </div>
              <div class="col-4 schedulerTypeIntervalCommon" style="display:none;margin-bottom: 10px;">
                <input type="date" format="yyyy-mm-dd" class="form-control schedulerTypeStartDate">
              </div>
              <div class="col-4 schedulerTypeIntervalCommon" style="display:none;margin-bottom: 10px;">
                <input type="date" format="yyyy-mm-dd" class="form-control schedulerTypeEndDate">
              </div>
              <div class="col-4 schedulerTypeIntervalCommon" style="display:none;margin-bottom: 10px;">
                <input type="time" class="form-control schedulerTypeIntervalTime">
              </div>
              <div class="col-4" style="display:none;margin-bottom: 10px;">
                <input type="datetime-local" class="form-control schedulerTypeCustom">
              </div>
              <div class="col-4" style="display:none;margin-bottom: 10px;">
                <select class="select2 form-control schedulerTrigger" multiple>
                  ${trigger}
                </select>
              </div>
              <div class="col-4" style="margin-bottom: 10px;">
                <select class="select2 form-control schedulerAction">
                  ${actionDropdown}
                </select>
              </div>
              <div class="col-4">
                <button class="btn btn-secondary schedulerCondition" id="${btn_id}" onclick="openSchedulerCondition.call(this,'${btn_id}')">condition</button>
              </div>
            </div>
          </div>
        </div>
      `)
    }

    function openSchedulerCondition(id_) {
      $("#schedulerFlowModalCondition").attr("data-btn_id",id_)
      $(".indScheduler").remove()
      if ($("#"+id_).attr("data-condition") != undefined){
        let dataCondition = JSON.parse($("#"+id_).attr("data-condition"))
        let dataTable = $("#"+id_).attr("data-table")
        $(".schedulerTable").attr("data-reload","yes")
        $(".schedulerTable").attr("data-reloaddata",JSON.stringify(dataCondition))
        $(".schedulerTable").val(dataTable).trigger("change")
      }
      $("#schedulerFlowModalCondition").modal("show");
    }
    function saveSchedulerCondition() {
      let ind = 0
      let dic = {}
      let condition = []
      $(".indScheduler").each(function() {
        let type = ""
        for(let i = 0; i < schedulerColumn.length; i++) {
          if($(this).find(".schedulerColumn").val() == schedulerColumn[i]["name"]) {
            type = schedulerColumn[i]["datatype"]
            break
          }
        }
        dic = {
            "column_name": $(this).find(".schedulerColumn").val(),
            "condition": $(this).find(".schedulerCond").val(),
            "input_value": $(this).find(".schedulerValue").val(),
            "and_or": "and",
            "type":type,
        }
        condition.push(dic)
      })
      if(condition.length > 0){
        condition[condition.length - 1]["and_or"] = ""
      }
      let id__ = $("#schedulerFlowModalCondition").attr("data-btn_id")
      $("#"+id__).attr("data-condition",JSON.stringify(condition))
      $("#"+id__).attr("data-table",$(".schedulerTable").val())
      $("#schedulerFlowModalCondition").modal("hide")
    }
    function addScheduleFlow() {
      $("#saveSchedulerFlow").removeAttr("data-delete");

      if($(this).closest(".modal-body").find(".scheduleFlowBody").find(".indScheduleFlow").length == 0) {

        $(this).closest(".modal-body").find(".scheduleFlowBody").append(scheduleFlowHtml())
        $(".indScheduleFlow").find('.select2').each(function(){

    $(this).select2( )
  })
      }
    }
    function changeScheduleType() {
      if($(this).closest(".indScheduleFlow").find(".schedulerType").val() == "Interval") {
        $(this).closest(".indScheduleFlow").find(".schedulerTypeIntervalCommon").css("display","block")
        $(this).closest(".indScheduleFlow").find(".schedulerTypeCustom").parent().css("display","none")
        $(this).closest(".indScheduleFlow").find(".schedulerTrigger").parent().css("display","none")
      } else if($(this).closest(".indScheduleFlow").find(".schedulerType").val() == "Flow automate") {
        $(this).closest(".indScheduleFlow").find(".schedulerTypeIntervalCommon").css("display","none")
        $(this).closest(".indScheduleFlow").find(".schedulerTypeCustom").parent().css("display","none")
        $(this).closest(".indScheduleFlow").find(".schedulerTrigger").parent().css("display","none")
      } else if($(this).closest(".indScheduleFlow").find(".schedulerType").val() == "On trigger") {
        $(this).closest(".indScheduleFlow").find(".schedulerTypeIntervalCommon").css("display","none")
        $(this).closest(".indScheduleFlow").find(".schedulerTypeCustom").parent().css("display","none")
        $(this).closest(".indScheduleFlow").find(".schedulerTrigger").parent().css("display","block")
      }
    }
    let source_element_id, dest_element_id
    function schedulerFlowElement(){
      let data = JSON.parse($("#schedulerFlowModal").attr("data-element_list"))
      let dic = {
        "decision_box":{"Approve all":"Approve all","Reject all":"Reject all"},
        "computation": {"Run model":"Run model"},
        "analysis": {"Refresh charts":"Refresh charts"},
        "create_view": {"Save":"Save"},
        "list_view": {"Upload":"Upload","Refresh table":"Refresh table","Edit":"Edit"},
        "data_connector": {"Upload":"Upload"},
        "flowController": {"Run":"Run"}
      }
      let dic_ = {
        "create_view": {"Save":"Save","Computed fields":"Computed fields"},
        "list_view": {"Upload":"Upload","Save edit":"Edit"},
        "computation": {"Run model":"Run computation"},
        "data_connector": {"Upload":"Upload"},
        "decision_box": {"Approve all":"Approve all","Reject all":"Reject all"},
        "flowController": {"Run":"Run"}
      }
      let source_element_type = ""
      for (i in data){
        if(data[i].hasOwnProperty("c_element_id")){
          if(data[i]["element_id"] == source_element_id){
            source_element_id = data[i]["c_element_id"]
          }
        }
      }
      if(source_element_id.includes('decision')){
        source_element_type = "decision_box"
      } else if(source_element_id.includes('ellipse')){
        source_element_type = "analysis"
      } else if(source_element_id.includes('parallelogram')){
        source_element_type = "computation"
      } else if(source_element_id.includes('document')){
        source_element_type = "data_connector"
      } else if(source_element_id.includes('process')){
        source_element_type = "list_view"
      } else if(source_element_id.includes('whiteSpace')){
        source_element_type = "create_view"
      } else if(source_element_id.includes('whiteSpace')){
        source_element_type = "flowlinkto"
      } else if(source_element_id.includes('flowCon')){
        source_element_type = "flowController"
      }
      let dest_element_type = ""
      if(dest_element_id.includes('decision')){
        dest_element_type = "decision_box"
      } else if(dest_element_id.includes('ellipse')){
        dest_element_type = "analysis"
      } else if(dest_element_id.includes('parallelogram')){
        dest_element_type = "computation"
      } else if(dest_element_id.includes('document')){
        dest_element_type = "data_connector"
      } else if(dest_element_id.includes('process')){
        dest_element_type = "list_view"
      } else if(dest_element_id.includes('whiteSpace')){
        dest_element_type = "create_view"
      } else if(dest_element_id.includes('flowCon')){
        dest_element_type = "flowController"
      }
      let actionDropdown = `<option value="" disabled selected>Select action</option>`
      let trigger = `<option value="" disabled>Select trigger event</option>
      `
      for(let [key,value] of Object.entries(dic_[source_element_type]) ){
        trigger = trigger + `<option value="${key}">${value}</option>`
      }
      for(let [key,value] of Object.entries(dic[dest_element_type]) ){
        actionDropdown = actionDropdown + `<option value="${key}">${value}</option>`
      }
      $(this).closest(".indScheduleFlow").find(".schedulerAction").html(actionDropdown)
      $(this).closest(".indScheduleFlow").find(".schedulerTrigger").html(trigger)
    }
    function saveSchedulerFlow() {
      let payload = []
      $(".indScheduleFlow").each(function() {
        let condition = []
        let tableCondition = ""
        if ($(this).find(".schedulerCondition").attr("data-condition") != undefined){
          condition = JSON.parse($(this).find(".schedulerCondition").attr("data-condition"))
          tableCondition = $(this).find(".schedulerCondition").attr("data-table")
        }
        let dest_element_type = ""
        if(dest_element_id.includes('decision')){
          dest_element_type = "decision_box"
        } else if(dest_element_id.includes('ellipse')){
          dest_element_type = "analysis"
        } else if(dest_element_id.includes('parallelogram')){
          dest_element_type = "computation"
        } else if(dest_element_id.includes('document')){
          dest_element_type = "data_connector"
        } else if(dest_element_id.includes('process')){
          dest_element_type = "list_view"
        } else if(dest_element_id.includes('whiteSpace')){
          dest_element_type = "create_view"
        }
        payload.push({
          "scheduled_element_name":dest_element_type,
          "schedule_type":$(this).find(".schedulerType").val(),
          "schedule_interval":$(this).find(".schedulerTypeInterval").val(),
          "time":$(this).find(".schedulerTypeIntervalTime").val(),
          "start_date": $(this).find(".schedulerTypeStartDate").val(),
          "end_date": $(this).find(".schedulerTypeEndDate").val(),
          "custom_datetime":$(this).find(".schedulerTypeCustom").val(),
          "event_trigger":$(this).find(".schedulerTrigger").val(),
          "action":$(this).find(".schedulerAction").val(),
          "element_id":dest_element_id,
          "src_element_id": source_element_id,
          "condition":condition,
          "table": tableCondition
        })
      })
      let deleteElement = ""
      if ($("#saveSchedulerFlow").attr("data-delete") != undefined){
        deleteElement = $("#saveSchedulerFlow").attr("data-delete")
        $("#saveSchedulerFlow").removeAttr("data-delete")
      }
      $.ajax({
          url: window.location.pathname,
          data: {
            'process_code': $("#graphContainerID").attr("data-process_code"),
            'sub_process_name':$("#graphContainerID").attr("data-sub_process_name"),
            "scheduler_config":JSON.stringify(payload),
            'operation': 'saveSchedulerConfig',
            'delete_element': deleteElement
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            alert("Configuration saved successfully.")
          },
          error: function() {
            alert("Error")
          }
        })
    }
    schedulerColumn = []
    schedulerValue = []
    function schedulerTable() {
      if($(this).val() != undefined) {
        $.ajax({
          url: window.location.pathname,

          data: {
            'operation': 'formTableFields',
            'tablesForm': JSON.stringify([$(this).val()]),
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            ind = 0;
            $(".indScheduler").each(function() {
              $(this).remove();
              ind++
            })
            $(".schedulerColumn").empty();
            $(".schedulerColumn").append(`<option value"" disabled selected>Select column</option>`)
            for (j in data.finalFieldList) {
              if (data.finalFieldList[j]['fieldName'] != 'created_by' && data.finalFieldList[j]['fieldName'] != 'created_date' && data.finalFieldList[j]['fieldName'] != 'modified_by' && data.finalFieldList[j]['fieldName'] != 'modified_date' && data.finalFieldList[j]['fieldName'] != 'active_to' && data.finalFieldList[j]['fieldName'] != 'active_from') {
                schedulerColumn[j] = {
                  "name":data.finalFieldList[j]['fieldName'],
                  "verbose":data.finalFieldList[j]['verbose'],
                  "datatype":data.finalFieldList[j]['fieldType']
                }
                $(".schedulerColumn").append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
              }
            }
            if($(".schedulerTable").attr("data-reload") == "yes"){
              let data1 = JSON.parse($(".schedulerTable").attr("data-reloaddata"))

              userValidationLoadScheduler(data1)
            }
          },
          error: function () {
            alert("Error");
          }
        })
      }
    }
    function userValidation() {
      if($(this).prop("checked")) {
        $(".schedulerUserValidation").css("display","flex");
      } else {
        $(".schedulerUserValidation").css("display","none");
        $(".schedulerTable").val("").trigger("change");
        ind = 0;
        $(".indScheduler").each(function() {
          if(ind != 0){
            $(this).remove();
          }
          ind++
        })
      }
    }
    function indSchedulerHtml() {
      html_cases = `
      <div class="row indScheduler schedulerUserValidation" style="margin-top:10px;">
        <div class="col-4">
          <select class="select2 form-control schedulerColumn">
          </select>
        </div>
        <div class="col-4">
          <select class="select2 form-control schedulerCond" onchange="changeSchedulerSelectTag.call(this)">
            <option value="" disabled selected>Select condition</option>
            <option value="Equal to">Equal to</option>
            <option value="IN">In</option>
            <option value="Not Equal to">Not Equal to</option>
            <option value="NOT IN">Not In</option>
            <option value="Greater than">Greater than</option>
            <option value="Smaller than">Smaller than</option>
            <option value="Starts with">Starts with</option>
            <option value="Ends with">Ends with</option>
          </select>
        </div>
        <div class="col-3">
          <select class="select2 form-control schedulerValue">
          </select>
        </div>
        <div class="col-1">
          <i class="fas fa-remove" onclick="removeIndScheduler.call(this)" style="font-size: initial;"></i>
        </div>
      </div>
      `
      return html_cases
    }
    function changeSchedulerSelectTag() {
      if($(this).val() == "IN" || $(this).val() == "NOT IN"){
        $(this).closest(".indScheduler").find(".schedulerValue").select2("destroy");
        $(this).closest(".indScheduler").find(".schedulerValue").attr("multiple","multiple");
        $(this).closest(".indScheduler").find(".schedulerValue").select2({"tags":true});
      } else {
        $(this).closest(".indScheduler").find(".schedulerValue").select2("destroy");
        $(this).closest(".indScheduler").find(".schedulerValue").removeAttr("multiple");
        $(this).closest(".indScheduler").find(".schedulerValue").select2({"tags":true});
      }
    }
    function addIndScheduler() {
      var html_scheduler = indSchedulerHtml();
      $(this).closest(".schedulerBody").append(html_scheduler);
      $(this).closest(".schedulerBody").find(".indScheduler").eq(-1).find("select").each(function() {
        $(this).select2({"tags":true});
      })
      $(this).closest(".schedulerBody").find(".indScheduler").eq(-1).find(".schedulerColumn").empty();
      $(this).closest(".schedulerBody").find(".indScheduler").eq(-1).find(".schedulerColumn").append(`<option value="">Select column</option>`);
      for(let i = 0; i < schedulerColumn.length; i++) {
        $(this).closest(".schedulerBody").find(".indScheduler").eq(-1).find(".schedulerColumn").append(`<option value="${schedulerColumn[i]["name"]}">${schedulerColumn[i]["verbose"]}</option>`);
      }
      $(this).closest(".schedulerBody").find(".indScheduler").eq(-1).find(".schedulerFlowElementName").trigger("click")
    }
    function removeIndScheduler(){
      $(this).closest(".indScheduler").remove();
    }
    function userValidationLoadScheduler(data) {
      for(let i = 0; i < data.length; i++){
        if (1){
          $(".schedulerBody").append(indSchedulerHtml());
          $(".indScheduler").eq(-1).find(".schedulerColumn").empty();
          $(".indScheduler").eq(-1).find(".schedulerColumn").append(`<option value="" disabled selected>Select column</option>`);
          for(j = 0; j < schedulerColumn.length; j++){
            $(".indScheduler").eq(-1).find(".schedulerColumn").append(`<option value="${schedulerColumn[j]["name"]}">${schedulerColumn[j]["verbose"]}`);
          }
        }
        $(".indScheduler").eq(-1).find("select").select2();
        $(".indScheduler").eq(-1).find(".schedulerColumn").val(data[i]["column_name"]).trigger("change")
        $(".indScheduler").eq(-1).find(".schedulerCond").val(data[i]["condition"]).trigger("change")
        let check = 0
        $(".indScheduler").eq(-1).find(".schedulerValue").each(function() {
          if($(this).attr("value") == data[i]["input_value"]) {
            check = 1;
          }
        })
        if(check == 0) {
          $(".indScheduler").eq(-1).find(".schedulerValue").append(`<option value="${data[i]["input_value"]}">${data[i]["input_value"]}</option>`);
        }
        $(".indFscheduler").eq(-1).find(".schedulerValue").val(data[i]["input_value"]).trigger("change");
        $(".indFscheduler").eq(-1).find(".schedulerValue").select2({"tags":true});
      }
    }
    var shapes1 = {
      "create_view":`
        <div class="col-2" onclick="giveDetail.call(this)" style='white-space: normal>
          <div class="square name">Create view</div>
        </div>
      `,
      "list_view":`
        <div class="col-2" onclick="giveDetail.call(this)" style='white-space: normal>
        <div class="rectangle name"><div class="rectangle1">List view</div>
        </div>
      `,
      "analysis":`
        <div class="col-2" onclick="giveDetail.call(this)" style='white-space: normal>
          <div class="circle name" style="text-align:center;">Analysis</div>
        </div>
      `,
      "computation":`
        <div class="col-2" onclick="giveDetail.call(this)" style='white-space: normal>
          <div class="parallelogram name">Computation</div>
        </div>
      `,
      "data_connector":`
        <div class="col-2" onclick="giveDetail.call(this)" style='white-space: normal>
          <svg style="left: 1px; top: 1px; width: 100%; height: 100%; display: block; position: relative; overflow: hidden;"><g><g></g><g><g transform="translate(0.5,0.5)" style="visibility: visible;">
            <path d="M 4.32 15.84 L 90.72 15.84 L 90.72 64.8 Q 69.12 49.26 47.52 64.8 Q 25.92 80.34 4.32 64.8 L 4.32 24.48 Z" fill="#ffffff" stroke="#000000" stroke-width="1.3" stroke-miterlimit="10" pointer-events="all"></path></g><g style=""><g transform="scale(0.24)"><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="417%" height="417%"><div style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 354px; height: 3px; padding-top: 150px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 56; text-align: center; "><div class="name" style="display: inline-block; font-size: 56px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Upload</div></div></div></foreignObject></g></g></g><g></g><g></g></g></svg>
        </div>
      `,
      "decision_box":`
        <div class="col-2" onclick="giveDetail.call(this)" style='white-space: normal>
          <svg style="left: 1px; top: 1px; width: 100%; height: 100%; display: block; position: relative; overflow: hidden;"><g><g></g><g><g transform="translate(0.5,0.5)" style="visibility: visible;">
            <path  d="M 47.94 4.08 L 88.74 44.88 L 47.85 85.68 L 7.14 44.88 Z" fill="#ffffff" stroke="#000000" stroke-width="1.3" stroke-miterlimit="10" pointer-events="all"></path></g><g style=""><g transform="scale(0.24)"><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="417%" height="417%"><div style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 354px; height: 3px; padding-top: 150px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 36; text-align: center; "><div class="name" style="display: inline-block; font-size: 36px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Decision box</div></div></div></foreignObject></g></g></g><g></g><g></g></g></svg>
        </div>
      `,
      "arrow":`
        <div class="col-1">
          <div style="font-size:54px"> &#8594;</div>
        </div>
      `
    }
    var xml_sent;
    var viewDetail = function() {
      var triggerType = $("#viewDetailSchedulerEvent").val();
      $('#flowDetail').find('.indDetail').css('display','none');
      $('#dependencyChecker').attr("save","no");
      e = $.Event("keydown");
      e.ctrlKey = true; // CTRL
      e.which = 83; // S
      $(document).trigger(e);
      var enc = new mxCodec(mxUtils.createXmlDocument());
      var node = enc.encode(graph.getModel());
      var xml = mxUtils.getPrettyXml(node);
      $.ajax({
            url: window.location.pathname,
            data: {
            "operation":"fetchFlowDetail",
            'process_code': $("#graphContainerID").attr("data-process_code"),
            'sub_process_name':$("#graphContainerID").attr("data-sub_process_name"),
            "trigger_type":triggerType,
            "xml": xml
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              $('#dependencyChecker').removeAttr("save");
                $('#flowDetailBody').find('.row').empty();
                for(let j = 0; j < data.flow.length; j++){
                  $('#flowDetail').attr("data-first_id",JSON.stringify(data.flow));
                  $('#flowDetailBody').find('.row').append(`<div class="card col-12" style="display:flex;flex-direction:row;justify-content: center;"></div>`)
                  for (let i = 0; i < data.flow[j].length;i++){
                    let is_present = false
                    if (elementType(data.flow[j][i]) != "") {
                      $('#flowDetailBody').find('.row').find(".card").eq(-1).append(`${shapes[elementType(data.flow[j][i])]}`);
                      let color = ""
                      if(i != (data.flow[j].length - 1)) {
                        for(let k in data.trigger_data){
                          if(data.trigger_data[k]["dest_element_id"] == data.flow[j][i+1]){
                            if(data.trigger_data[k]["trigger_event"] == "On trigger"){
                              is_present = true
                              color = "yellow"
                            } else {
                              is_present = true
                              color = "green"
                            }
                          }
                        }
                        if(!is_present) {
                          color = ""
                        }
                        $('#flowDetailBody').find('.row').find(".card").eq(-1).append(`${shapes1["arrow"]}`);
                        $('#flowDetailBody').find('.row').find(".col-1").eq(-1).children().css('color',`${color}`)
                      }
                    }
                  }
                  $('#flowDetailBody').find('.row').append('<br>')
                }
                $("#flowDetail").modal("show")
                for(let i = 0; i < 0; i++) {
                  if (data.data[i].tab_type != "flowlink" && data.data[i].tab_type != "flowlinkto") {
                    $('#flowDetailBody').find('.row').append(`${shapes[data.data[i].tab_type]}`);
                    if(data.data[i]["current_status"] == "Fail"){
                      color = "red"
                    } else if(data.data[i]["current_status"] == "Pass"){
                      color = "green"
                    } else if(data.data[i]["current_status"] == "Not started" || data.data[i]["current_status"] == "Not required" || data.data[i]["current_status"] == "Ongoing"){
                      color = "#FFD700"
                    }
                    if(i != (data.data.length - 1)) {
                      $('#flowDetailBody').find('.row').append(`${shapes1["arrow"]}`);
                      $('#flowDetailBody').find('.row').find(".col-1").eq(-1).children().css('color',`${color}`)
                    }
                    $('#flowDetailBody').find('.row').find(".col-2").eq(-1).find('path').attr('stroke',`${color}`)
                    $('#flowDetailBody').find('.row').find(".col-2").eq(-1).children().css('border-color',`${color}`)
                    $('#flowDetailBody').find('.row').find(".col-2").eq(-1).children().css('text-align',`center`)
                    if(color != "green"){
                      $('#flowDetailBody').find('.row').find(".col-2").eq(-1).attr('data-link',`${data.data[i]["subprocess"]}`)
                    }
                    $('#flowDetailBody').find('.row').find(".col-2").eq(-1).attr('data-title',`${data.data[i]["detailed_status"]}`)
                    $('#flowDetailBody').find('.row').find(".col-2").eq(-1).attr('data-status',`${data.data[i]["current_status"]}`)
                    $('#flowDetailBody').find('.row').find(".col-2").eq(-1).attr('data-name',`${data.data[i]["element_name"]}`)
                    $('#flowDetailBody').find('.row').find(".col-2").eq(-1).attr('data-t_id',`${data.data[i]["transaction_id"]}`)
                    $('#flowDetailBody').find('.row').find(".col-2").eq(-1).attr('data-e_id',`${data.data[i]["element_id"]}`)
                    $('#flowDetailBody').find('.row').find(".col-2").eq(-1).attr('onclick',`giveDetail.call(this)`)
                    if(data.data[i].tab_type != "decision_box"){
                      $('#flowDetailBody').find('.row').find(".col-2").eq(-1).find('.name').html(data.data[i]["element_name"])
                    }
                  }
                }
                $(".schedulerFlowType").attr("data-schedule_process",JSON.stringify(data["schedule_process"]));
                let data1 = {};
                if ($(".schedulerFlowType").attr("data-schedule_process") != undefined){
                  data1 = JSON.parse($(".schedulerFlowType").attr("data-schedule_process"));

                }
                $(".scheduleDate").val(data1["startDate"]);
                $(".scheduleIntervalDay").val(data1["intervalDay"]).trigger("change");
                $(".scheduleTime").val(data1["time"]);
                $(".scheduleInterval").val(data1["interval"])
                $(".scheduleRepeat").val(data1["repeat"])
            },
            error: function(){
              $('#dependencyChecker').removeAttr("save");
            },
            failure: function () {
            alert("No custom homepage exists");
            $('#dependencyChecker').removeAttr("save");
            },
        });
    }

    function schedulerFlowType() {
      viewDetail.call(this)
    }
    function elementType(dest_element_id){
      let dest_element_type = ""
      if(dest_element_id.includes('decision')){
        dest_element_type = "decision_box"
      } else if(dest_element_id.includes('ellipse')){
        dest_element_type = "analysis"
      } else if(dest_element_id.includes('parallelogram')){
        dest_element_type = "computation"
      } else if(dest_element_id.includes('document')){
        dest_element_type = "data_connector"
      } else if(dest_element_id.includes('process')){
        dest_element_type = "list_view"
      } else if(dest_element_id.includes('whiteSpace')){
        dest_element_type = "create_view"
      } else if(dest_element_id.includes('linkto')){
        dest_element_type = "flowlinkto"
      } else if(dest_element_id.includes('link')){
        dest_element_type = "flowlink"
      }
      return dest_element_type
    }
    function viewDetailSchedulerEvent(){
      let triggerType = $(this).val()
      $.ajax({
            url: window.location.pathname,
            data: {
            "operation":"fetchFlowDetail",
            'process_code': $("#graphContainerID").attr("data-process_code"),
            'sub_process_name':$("#graphContainerID").attr("data-sub_process_name"),
            "trigger_type":$(this).val(),
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
                let color = ""
                $('#flowDetailBody').find('.row').empty();
                for(let j = 0; j < data.flow.length; j++){
                  $('#flowDetailBody').find('.row').append(`<div class="card col-12" style="display:flex;flex-direction:row;justify-content: center;"></div>`)
                  for (let i = 0; i < data.flow[j].length;i++){
                    if (elementType(data.flow[j][i]) != "") {
                      $('#flowDetailBody').find('.row').find(".card").eq(-1).append(`${shapes[elementType(data.flow[j][i])]}`);
                      let borderColor = $('#flowDetailBody').find('.row').find(".col-1").eq(-1).children().css('color')

                      if(i != 0){
                        $('#flowDetailBody').find('.row').find(".col-2").eq(-1).find('path').attr('stroke',`${borderColor}`)
                        $('#flowDetailBody').find('.row').find(".col-2").eq(-1).children().css('border-color',`${borderColor}`)
                      }

                      color = ""
                      is_present = false
                      if(i != (data.flow[j].length - 1)) {
                        for(let k in data.trigger_data){
                          if(data.trigger_data[k]["dest_element_id"] == data.flow[j][i+1]){
                            if(data.trigger_data[k]["trigger_event"] == "On trigger"){
                              if(triggerType == data.trigger_data[k]["trigger_event"]){
                                is_present = true
                                color = "yellow"
                                $('#flowDetailBody').find('.row').find(".col-2").eq(-1).find('path').attr('stroke',`${color}`)
                                $('#flowDetailBody').find('.row').find(".col-2").eq(-1).children().css('border-color',`${color}`)

                              }
                            } else {
                              if (triggerType == data.trigger_data[k]["trigger_event"]){
                                is_present = true
                                color = "green"
                                $('#flowDetailBody').find('.row').find(".col-2").eq(-1).find('path').attr('stroke',`${color}`)
                                $('#flowDetailBody').find('.row').find(".col-2").eq(-1).children().css('border-color',`${color}`)

                              }
                            }
                          }
                        }
                        if(!is_present) {
                          color = ""
                        }
                        $('#flowDetailBody').find('.row').find(".card").eq(-1).append(`${shapes1["arrow"]}`);
                        $('#flowDetailBody').find('.row').find(".col-1").eq(-1).children().css('color',`${color}`)
                      }
                    }
                  }
                  $('#flowDetailBody').find('.row').append('<br>')
                }
            },
            failure: function () {
            alert("No custom homepage exists");
            },
        });
      }

      function scheduleSubprocess() {
        $("#scheduleProcess").modal("show");
      }
      function saveSchedule() {
        let attr = JSON.parse($('#flowDetail').attr("data-first_id"))
        let src_element_id = attr[0][1]
        let element_id = attr[0][2]
        let dic = {
          "startDate": $("#scheduleProcess").find(".scheduleDate").val(),
          "interval": $("#scheduleProcess").find(".scheduleInterval").val(),
          "repeat": $("#scheduleProcess").find(".scheduleRepeat").val(),
          "time": $("#scheduleProcess").find(".scheduleTime").val(),
          "intervalDay": $("#scheduleProcess").find(".scheduleIntervalDay").val(),
          "firstElementId": attr,
          "src_element_id": src_element_id,
          "element_id": element_id
        }
        $.ajax({
          url: window.location.pathname,
          data: {
            'process_code': $("#graphContainerID").attr("data-process_code"),
            'sub_process_name':$("#graphContainerID").attr("data-sub_process_name"),
            "scheduler_config":JSON.stringify(dic),
            'operation': 'saveSchedule',
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            alert("Configuration saved successfully.")
            $("#scheduleProcess").modal("hide");
          },
          error: function() {
            alert("Error")
          }
        })
      }

    function getColumns(table){
      $.ajax({
        url: window.location.pathname,
        data: {
          'operation': 'formTableFields',
          'tablesForm': JSON.stringify([table]),
        },
        async: false,
        type: "POST",
        dataType: "json",
        success: function (data) {
          for (j in data.finalFieldList2) {
            $(".mainCont").find(".subCont").eq(-1).find(".selectColumnMultiselect").append(`<option value="${data.finalFieldList2[j]['fieldName']}">${data.finalFieldList2[j]['verbose']}</option>`)
          }
        },
        error: function () {
          alert("Errorrrr");
        }
      })
    }
    function openMultiselectCondition(index) {
      $("#multiselectConditionModal").modal("show");
      $("#multiselectConditionModal").attr("data-number",index);
      $(".mainCont").empty();
      if($(this).attr("data-data") != undefined){
        let data = JSON.parse($(this).attr("data-data"));
        for(let i = 0; i < data.length; i++){
          addMultiselectCond();
          $(".mainCont").find(".subCont").eq(-1).find(".selectConditionMultiselect").val(data[i]["cond"]).trigger("change")
          $(".mainCont").find(".subCont").eq(-1).find(".selectColumnMultiselect").val(data[i]["condColumn"]).trigger("change")
          $(".mainCont").find(".subCont").eq(-1).find(".dynamicValMultiselect").val(data[i]["dynamicVal"]).trigger("change")
          $(".mainCont").find(".subCont").eq(-1).find(".multiselectConstraint").val(data[i]["constraint"]).trigger("change")
          $(".mainCont").find(".subCont").eq(-1).find(".multiselectSet").val(data[i]["ruleSet"]).trigger("change")
          if(JSON.stringify(data[i]["condValue"]).includes("[")){
            let data1 = data[i]["condValue"]
            $(".mainCont").find(".subCont").eq(-1).find(".valueMultiselectTag").css("display","block")
            for(let j = 0; j < data1.length; j++){
              $(".mainCont").find(".subCont").eq(-1).find(".valueMultiselectTag").find("select").append(`<option value="${data1[j]}">${data1[j]}</option>`)
            }
            $(".mainCont").find(".subCont").eq(-1).find(".valueMultiselectTag").find("select").val(data1).trigger("change")
          } else {
            let data1 = data[i]["condValue"]
            $(".mainCont").find(".subCont").eq(-1).find(".valueMultiselect").find("select").append(`<option value="${data1}">${data1}</option>`)
            $(".mainCont").find(".subCont").eq(-1).find(".valueMultiselect").find("select").val(data1).trigger("change")
          }
          $(".mainCont").find(".subCont").eq(-1).find(".selectColumnMultiselect").val(data[i]["condColumn"]).trigger("change")
        }
      }
    }
    function saveMultiselectCondition() {
      let dic = []
      var condValue = []
      var cond = []
      var condColumn = []
      var dynamicVal = []
      var constraint = []
      var ruleSet = []
      let dic1 = {}
      $(this).closest(".modal").find('.subCont').each(function() {
        dic1 = {
          "condValue":"",
          "cond":"",
          "condColumn":"",
          "dynamicVal":"",
          "constraint":"",
          "ruleSet":""
        }
        if($(this).find('.valueMultiselect').css('display') != 'none') {
          var tempVal = $(this).find('.valueMultiselect').find('select').val();
          dic1.condValue = tempVal;
        } else {
          dic1.condValue = $(this).find('.valueMultiselectTag').find('select').val();
        }
        var temp = $(this).find('.selectConditionMultiselect').val()

        dic1.cond = temp;
        dic1.condColumn = $(this).find('.selectColumnMultiselect').val();
        dic1.dynamicVal = $(this).find('.dynamicValMultiselect').val();
        dic1.constraint = $(this).find('.multiselectConstraint').val();
        dic1.ruleSet = $(this).find('.multiselectSet').val();
        dic.push(dic1)
      })
      let index = $("#multiselectConditionModal").attr("data-number");
      $(".multiSelectCard").eq(parseInt(index)).find("button").attr("data-data",JSON.stringify(dic))
    }
    function multiselectConditionHtml(){
      let html = `
      <div class="subCont col-12" style="display:flex; margin-top: 10px">
      <div class="col-3">
        <p style="font-weight: bold;">Select Condition Column</p>
        <select class="select2 form-control selectColumnMultiselect" name="selectparentcolumnCond" >
        </select>
      </div>
      <div class="col-2">
        <p style="font-weight: bold;">Select condition:</p>
        <select class="select2 form-control selectConditionMultiselect" required onchange="multiselectCondChange.call(this)">
          <option value="Greater than">Greater than</option>
          <option value="Smaller than">Smaller than</option>
          <option value="Equal to">Equal to</option>
          <option value="Not Equal to">Not Equal to</option>
          <option value="IN">In</option>
          <option value="NOT IN">Not In</option>
          <option value="Starts with">Starts with</option>
          <option value="Ends with">Ends with</option>
        </select>
      </div>
      <div class="col-2 valueMultiselect">
        <p style="font-weight: bold;">Select value:</p>
        <select class="select2 form-control tags" required>
        </select>
      </div>
      <div class="col-2 valueMultiselectTag" style="display: none;">
        <p style="font-weight: bold;">Select value:</p>
        <select class="select2 form-control tags" required multiple>
        </select>
      </div>
      <div class="col-2">
        <p style="font-weight: bold;">Select value:</p>
        <select class="select2 form-control dynamicValMultiselect">
          <option value="" selected>Select value</option>
          <option value="curr_user">Current User</option>
          <option value="curr_date">Current Date</option>
        </select>
      </div>
      <div class="col-1">
        <p style="font-weight: bold;">Constraint</p>
        <input class="form-control multiselectConstraint" type="text">
      </div>
      <div class="col-1">
        <p style="font-weight: bold;">Rule set:</p>
        <input class="form-control multiselectSet" type="text">
      </div>
      <div class="col-1">
        <i class="fas fa-minus" onclick="removeMultiselectCond.call(this)" data-toggle="tooltip" title="Remove condition"></i> </i>
      </div>
    </div>
      `
      return html
    }
    function multiselectCondChange(){
      if($(this).val() == "IN" || $(this).val() == "NOT IN"){
        $(this).closest(".subCont").find(".valueMultiselectTag").css("display","block");
        $(this).closest(".subCont").find(".valueMultiselect").css("display","none");
      } else {
        $(this).closest(".subCont").find(".valueMultiselectTag").css("display","none");
        $(this).closest(".subCont").find(".valueMultiselect").css("display","block");
      }
    }
    function removeMultiselectCond() {
      $(this).closest(".subCont").remove(".valueMultiselectTag").css("display","block");
    }
    function addMultiselectCond() {
      $(".mainCont").append(multiselectConditionHtml());
      $(".mainCont").find(".subCont").eq(-1).find('.select2').each(function(){

    $(this).select2( )
  });
      $(".mainCont").find(".subCont").eq(-1).find(".tags").select2({"tags":true});
      let index = $("#multiselectConditionModal").attr("data-number");
      let option = $(".additional").eq(parseInt(index)).html();
      option = option.replaceAll("data-","");
      getColumns($(".selectMultipleFormTable").eq(index).val());

    }

    function resetSchedule() {
      $.ajax({
          url: window.location.pathname,
          data: {
            'process_code': $("#graphContainerID").attr("data-process_code"),
            'sub_process_name':$("#graphContainerID").attr("data-sub_process_name"),
            "scheduler_config":JSON.stringify({}),
            'operation': 'resetSchedule',
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            alert("Configuration reset successfully.")
            $("#scheduleProcess").modal("hide");
          },
          error: function() {
            alert("Error")
          }
        })
    }

    $('#selectApprovalType').off('select2:select').on('select2:select', function(){
      if($(this).val() == "static"){
        $("#staticGroupBasedContainer").css("display","block");
        $("#hierarchyGroupBasedContainer").css("display","none");
        $("#staticUserBasedContainer").css("display","none");
        $("#dynamicGroupBasedContainer").css("display","none");
        $("#dynamicUserBasedContainer").css("display","none");
        $("#dynamicGroupMasterBasedContainer").css("display","none");
        $('#multiLevelApprovalButton').css('display', 'none');
      } else if($(this).val() == "static_user"){
        $("#staticUserBasedContainer").css("display","block");
        $("#staticGroupBasedContainer").css("display","none");
        $("#hierarchyGroupBasedContainer").css("display","none");
        $("#dynamicGroupBasedContainer").css("display","none");
        $("#dynamicUserBasedContainer").css("display","none");
        $("#dynamicGroupMasterBasedContainer").css("display","none");
        $('#multiLevelApprovalButton').css('display', 'none');
        $.ajax({
          url: window.location.pathname,
          async: false,
          data: {
            'operation': 'fetchUsersList',
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            $('#selectApproverUsers').empty();
            for (i of data['users_list']) {
              $("#selectApproverUsers").append(`<option value="${i}">${i}</option>`);
            }
            if ($('#selectApproverUsers').attr('data-config')) {
              $('#selectApproverUsers').val($('#selectApproverUsers').attr('data-config')).trigger('change');
              $('#selectApproverUsers').removeAttr('data-config');
            }
          }, error: ()=>{
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        });
      } else if($(this).val() == "dynamic_group"){
        $("#dynamicGroupBasedContainer").css("display","block");
        $("#dynamicUserBasedContainer").css("display","none");
        $("#hierarchyGroupBasedContainer").css("display","none");
        $("#staticGroupBasedContainer").css("display","none");
        $("#dynamicGroupMasterBasedContainer").css("display","none");
        $("#staticUserBasedContainer").css("display","none");
        $('#multiLevelApprovalButton').css('display', 'none');
        $('#selectApproverGroupTable').off('select2:select').on('select2:select', function(){
          $.ajax({
            url: window.location.pathname,
            async: false,
            data: {
              'operation': 'fetchColumnsList',
              'table_name': $(this).val(),
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              $('#selectApproverGroupField').empty();
              for (i in data['field_list']) {
                $("#selectApproverGroupField").append(`<option value="${i}">${data['field_list'][i]}</option>`);
              }
              if ($('#selectApproverGroupField').attr('data-config')) {
                $('#selectApproverGroupField').val($('#selectApproverGroupField').attr('data-config')).trigger('change');
                $('#selectApproverGroupField').removeAttr('data-config');
              }
            }, error: ()=>{
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
          });
        });

      } else if($(this).val() == "dynamic_user"){
        $("#dynamicUserBasedContainer").css("display","block");
        $("#dynamicGroupBasedContainer").css("display","none");
        $("#hierarchyGroupBasedContainer").css("display","none");
        $("#dynamicGroupMasterBasedContainer").css("display","none");
        $("#staticGroupBasedContainer").css("display","none");
        $("#staticUserBasedContainer").css("display","none");
        $('#multiLevelApprovalButton').css('display', 'none');
        $('#selectApproverUserTable').off('select2:select').on('select2:select', function(){
          $.ajax({
            url: window.location.pathname,
            async: false,
            data: {
              'operation': 'fetchColumnsList',
              'table_name': $(this).val(),
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              $('#selectApproverUserField').empty();
              for (i in data['field_list']) {
                $("#selectApproverUserField").append(`<option value="${i}">${data['field_list'][i]}</option>`);
              }
              if ($('#selectApproverUserField').attr('data-config')) {
                $('#selectApproverUserField').val($('#selectApproverUserField').attr('data-config')).trigger('change');
                $('#selectApproverUserField').removeAttr('data-config');
              }
            }, error: ()=>{
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
          });
        });

      } else if($(this).val() == "dynamic_master_group" || $(this).val() == "dynamic_master_user"){
        $("#dynamicGroupMasterBasedContainer").css("display","block");
        $("#dynamicGroupBasedContainer").css("display","none");
        $("#dynamicUserBasedContainer").css("display","none");
        $("#hierarchyGroupBasedContainer").css("display","none");
        $("#staticGroupBasedContainer").css("display","none");
        $("#staticUserBasedContainer").css("display","none");
        $('#dynamicParameterFromEntryContainer').css('display', 'none');
        $('#multiLevelApprovalButton').css('display', 'none');

        $('#selectApproverGroupEntryParameter').off('select2:select').on('select2:select', function(){
          if ($(this).val() == 'extract_from_entry') {
            $('#dynamicParameterFromEntryContainer').css('display', 'block');
            $('#selectTableForParameter').off('select2:select').on('select2:select', function(){
              $.ajax({
                url: window.location.pathname,
                async: false,
                data: {
                  'operation': 'fetchColumnsList',
                  'table_name': $(this).val(),
                },
                type: "POST",
                dataType: "json",
                success: function (data) {
                  $('#selectFieldForParameter').empty();
                  for (i in data['field_list']) {
                    $("#selectFieldForParameter").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                  }
                  if ($('#selectFieldForParameter').attr('data-config')) {
                    $('#selectFieldForParameter').val($('#selectFieldForParameter').attr('data-config')).trigger('change');
                    $('#selectFieldForParameter').removeAttr('data-config');
                  }
                }, error: ()=>{
                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                }
              });
            });
          } else {
            $('#dynamicParameterFromEntryContainer').css('display', 'none');
          }
        });

        $('.paramterMappingTable').off('select2:select').on('select2:select', function(){
          var mappingElement = $(this).closest('.masterBasedApprovalLevel').find('.col-12').eq(1).find('.paramterMappingField').eq(0);
          var fieldElement = $(this).closest('.masterBasedApprovalLevel').find('.col-12').eq(2).find('.paramterMappingApproverField').eq(0);
          $.ajax({
            url: window.location.pathname,
            async: false,
            data: {
              'operation': 'fetchColumnsList',
              'table_name': $(this).val(),
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              mappingElement.empty();
              fieldElement.empty();
              for (i in data['field_list']) {
                mappingElement.append(`<option value="${i}">${data['field_list'][i]}</option>`);
                fieldElement.append(`<option value="${i}">${data['field_list'][i]}</option>`);
              }
              if (mappingElement.attr('data-config')) {
                mappingElement.val(mappingElement.attr('data-config')).trigger('select2:select');
                mappingElement.val(mappingElement.attr('data-config')).trigger('change');
                mappingElement.removeAttr('data-config');
              }
              if (fieldElement.attr('data-config')) {
                fieldElement.val(fieldElement.attr('data-config')).trigger('select2:select');
                fieldElement.val(fieldElement.attr('data-config')).trigger('change');
                fieldElement.removeAttr('data-config');
              }
            }, error: ()=>{
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
          });
        });

        $('#dynamicMasterBasedApprovalAddButton').off('click').on('click', function(){
          if ($('.masterBasedApprovalLevel').length < 4) {
            $('#masterLevelContainer').append(`
              <div class="masterBasedApprovalLevel col-12" style="border-bottom:lightgray solid 1px;border-top:lightgray solid 1px; padding-bottom: 0.5rem; padding-top: 0.5rem;">
                <div class="col-12">
                  <label>Select Table For Parameter Mapping:</label>
                  <select class="select2 form-control paramterMappingTable">
                    {% for i in tableList%}
                      <option value="{{i}}">{{i}}</option>
                    {%endfor%}
                  </select>
                </div>
                <div class="col-12">
                  <label for="paramterMappingField">Select Field For Parameter Mapping:</label>
                  <select class="select2 form-control paramterMappingField">
                  </select>
                </div>
                <div class="col-12">
                  <label for="">Select Field For Identifying Approver:</label>
                  <select class="select2 form-control paramterMappingApproverField">
                  </select>
                </div>
              </div>
            `
            );
            $('#masterLevelContainer').find('.masterBasedApprovalLevel').eq(-1).find('.select2').select2();
            $('.paramterMappingTable').off('select2:select').on('select2:select', function(){
              var mappingElement = $(this).closest('.masterBasedApprovalLevel').find('.col-12').eq(1).find('.paramterMappingField').eq(0);
              var fieldElement = $(this).closest('.masterBasedApprovalLevel').find('.col-12').eq(2).find('.paramterMappingApproverField').eq(0);
              $.ajax({
                url: window.location.pathname,
                async: false,
                data: {
                  'operation': 'fetchColumnsList',
                  'table_name': $(this).val(),
                },
                type: "POST",
                dataType: "json",
                success: function (data) {
                  mappingElement.empty();
                  fieldElement.empty();
                  for (i in data['field_list']) {
                    mappingElement.append(`<option value="${i}">${data['field_list'][i]}</option>`);
                    fieldElement.append(`<option value="${i}">${data['field_list'][i]}</option>`);
                  }
                  if (mappingElement.attr('data-config')) {
                    mappingElement.val(mappingElement.attr('data-config')).trigger('select2:select');
                    mappingElement.val(mappingElement.attr('data-config')).trigger('change');
                    mappingElement.removeAttr('data-config');
                  }
                  if (fieldElement.attr('data-config')) {
                    fieldElement.val(fieldElement.attr('data-config')).trigger('select2:select');
                    fieldElement.val(fieldElement.attr('data-config')).trigger('change');
                    fieldElement.removeAttr('data-config');
                  }
                }, error: ()=>{
                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                }
              });
            });
          }
        });


      } else if($(this).val() == "hierarchical" || $(this).val() == "hierarchical_user"){
        hierarchyDic1 = {};
        $("#staticGroupBasedContainer").css("display","none");
        $("#hierarchyGroupBasedContainer").css("display","block");
        $("#staticUserBasedContainer").css("display","none");
        $("#dynamicGroupMasterBasedContainer").css("display","none");
        $("#dynamicGroupBasedContainer").css("display","none");
        $("#dynamicUserBasedContainer").css("display","none");
        $('#multiLevelApprovalButton').css('display', 'none');
        $.ajax({
          url: window.location.pathname,
          async: false,
          data: {
            'operation': 'fetchHierarchyGroups',
          },
          type: "POST",
          dataType: "json",
          success: function (data) {
            var existingConfig = $("#selectApprovalHierarchyGroup").attr('data-config');
            $("#selectApprovalHierarchyGroup").empty();
            $("#selectApprovalHierarchyGroup").append(`<option value="">---</option>`);
            for(i in data["hierarchy_groups"]){
              $("#selectApprovalHierarchyGroup").append(`<option value="${data["hierarchy_groups"][i]}">${data["hierarchy_groups"][i]}</option>`);
            }
            if (existingConfig) {
              $("#selectApprovalHierarchyGroup").val(existingConfig).trigger('select2:select');
              $("#selectApprovalHierarchyGroup").val(existingConfig).trigger('change');
            }
            $("#selectApprovalHierarchyGroup").off('select2:select').on('select2:select', function(){
              if ($(this).val() != "") {
                $.ajax({
                  url: window.location.pathname,
                  async: false,
                  data: {
                    'operation': 'fetchHierarchyGroupLevels',
                    'group_selected': $(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    var startingLevelConfig = $("#selectApprovalHierarchyStartingLevel").val();
                    var endingLevelConfig = $("#selectApprovalHierarchyEndingLevel").val();
                    $("#selectApprovalHierarchyStartingLevel").empty();
                    $("#selectApprovalHierarchyEndingingLevel").empty();
                    for(i in data["hierarchy_level"]){
                      $("#selectApprovalHierarchyStartingLevel").append(`<option value="${data["hierarchy_level"][i]}">Level ${data["hierarchy_level"][i]}</option>`);
                      $("#selectApprovalHierarchyEndingingLevel").append(`<option value="${data["hierarchy_level"][i]}">Level ${data["hierarchy_level"][i]}</option>`);
                    }
                    if (startingLevelConfig) {
                      $("#selectApprovalHierarchyStartingLevel").val(startingLevelConfig).trigger('select2:select');
                      $("#selectApprovalHierarchyStartingLevel").val(startingLevelConfig).trigger('change');
                    }
                    if (endingLevelConfig) {
                      $("#selectApprovalHierarchyEndingLevel").val(endingLevelConfig).trigger('select2:select');
                      $("#selectApprovalHierarchyEndingLevel").val(endingLevelConfig).trigger('change');
                    }
                  },
                  error: function () {
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                });
              } else {
                $("#selectApprovalHierarchyStartingLevel").empty();
                $("#selectApprovalHierarchyEndingingLevel").empty();
              }
            });
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })
      } else if($(this).val() == "multi_level") {
        $("#dynamicGroupMasterBasedContainer").css("display","none");
        $("#dynamicGroupBasedContainer").css("display","none");
        $("#dynamicUserBasedContainer").css("display","none");
        $("#hierarchyGroupBasedContainer").css("display","none");
        $("#staticGroupBasedContainer").css("display","none");
        $("#staticUserBasedContainer").css("display","none");
        $('#dynamicParameterFromEntryContainer').css('display', 'none');
        $('#multiLevelApprovalButton').css('display', 'block');
        $('#multiLevelApprovalButton').off('click').on('click', function(){
          $('#approvalLevelContainer').empty();
          if ($('#multiLevelApprovalButton').attr('data-config')) {
            var existingConfig = JSON.parse($('#multiLevelApprovalButton').attr('data-config'));
            for (let index = 0; index < existingConfig.length; index++) {
              const levelConfig = existingConfig[index];
              addApprovalLevel();
              var currentApprovalContainer = $('#approvalLevelContainer').find('.approvalLevelParentContainer').eq(-1);
              currentApprovalContainer.find(".selectApprovalTypeMLA").val(levelConfig.approval_type).trigger("select2:select");
              currentApprovalContainer.find(".selectApprovalTypeMLA").val(levelConfig.approval_type).trigger("change");
              currentApprovalContainer.find(".selectApproverTypeMLA").val(levelConfig.approver_type).trigger("select2:select");
              currentApprovalContainer.find(".selectApproverTypeMLA").val(levelConfig.approver_type).trigger("change");
              if (levelConfig.approval_type == 'dynamic_group') {
                currentApprovalContainer.find('.selectApproverGroupTableMLA').val(levelConfig.table_name).trigger('select2:select');
                currentApprovalContainer.find('.selectApproverGroupTableMLA').val(levelConfig.table_name).trigger('change');
                currentApprovalContainer.find('.selectApproverGroupFieldMLA').val(levelConfig.field).trigger('select2:select');
                currentApprovalContainer.find('.selectApproverGroupFieldMLA').val(levelConfig.field).trigger('change');
                currentApprovalContainer.find('.selectApproverGroupFieldMLA').attr('data-config', levelConfig.field);
              } if (levelConfig.approval_type == 'dynamic_user') {
                currentApprovalContainer.find('.selectApproverUserTableMLA').val(levelConfig.table_name).trigger('select2:select');
                currentApprovalContainer.find('.selectApproverUserTableMLA').val(levelConfig.table_name).trigger('change');
                currentApprovalContainer.find('.selectApproverUserFieldMLA').val(levelConfig.field).trigger('select2:select');
                currentApprovalContainer.find('.selectApproverUserFieldMLA').val(levelConfig.field).trigger('change');
                currentApprovalContainer.find('.selectApproverUserFieldMLA').attr('data-config', levelConfig.field);
              } if (levelConfig.approval_type == 'dynamic_master_group' || levelConfig.approval_type == 'dynamic_master_user') {
                currentApprovalContainer.find('.selectApproverGroupEntryParameterMLA').val(levelConfig.parameter).trigger('select2:select');
                currentApprovalContainer.find('.selectApproverGroupEntryParameterMLA').val(levelConfig.parameter).trigger('change');
                if (levelConfig.parameter == 'extract_from_entry') {
                  currentApprovalContainer.find('.selectTableForParameterMLA').val(levelConfig.parameter_table_name).trigger('select2:select');
                  currentApprovalContainer.find('.selectTableForParameterMLA').val(levelConfig.parameter_table_name).trigger('change');
                  currentApprovalContainer.find('.selectFieldForParameterMLA').val(levelConfig.parameter_field).trigger('select2:select');
                  currentApprovalContainer.find('.selectFieldForParameterMLA').val(levelConfig.parameter_field).trigger('change');
                  currentApprovalContainer.find('.selectFieldForParameterMLA').attr('data-config', levelConfig.parameter_field);
                }
                for (let i = 0; i < levelConfig.master_level_config.length; i++) {
                  const element = levelConfig.master_level_config[i];
                  if (i > 0) {
                    currentApprovalContainer.find('.dynamicMasterBasedApprovalAddButtonMLA').trigger('click');
                  }
                  currentApprovalContainer.find('.masterBasedApprovalLevel').eq(i).find(".paramterMappingTable").val(element.table_name).trigger('select2:select');
                  currentApprovalContainer.find('.masterBasedApprovalLevel').eq(i).find(".paramterMappingTable").val(element.table_name).trigger('change');
                  currentApprovalContainer.find('.masterBasedApprovalLevel').eq(i).find(".paramterMappingField").val(element.mapping_field).trigger('change');
                  currentApprovalContainer.find('.masterBasedApprovalLevel').eq(i).find(".paramterMappingField").val(element.mapping_field).trigger('change');
                  currentApprovalContainer.find('.masterBasedApprovalLevel').eq(i).find(".paramterMappingField").attr('data-config', element.mapping_field);
                  currentApprovalContainer.find('.masterBasedApprovalLevel').eq(i).find(".paramterMappingApproverField").val(element.approver_field).trigger('change');
                  currentApprovalContainer.find('.masterBasedApprovalLevel').eq(i).find(".paramterMappingApproverField").val(element.approver_field).trigger('change');
                  currentApprovalContainer.find('.masterBasedApprovalLevel').eq(i).find(".paramterMappingApproverField").attr('data-config', element.approver_field);
                }

              } if (levelConfig.approval_type == 'static_user') {
                currentApprovalContainer.find('.selectApproverUsersMLA').val(levelConfig.user_list).trigger('select2:select');
                currentApprovalContainer.find('.selectApproverUsersMLA').val(levelConfig.user_list).trigger('change');
                currentApprovalContainer.find('.selectApproverUsersMLA').attr('data-config', levelConfig.user_list);
              } else {
                currentApprovalContainer.find(".select2multipleMLA").val(levelConfig.group_list).trigger("select2:select");
                currentApprovalContainer.find(".select2multipleMLA").val(levelConfig.group_list).trigger("change");
              }
            }
          }
          $('#multiLevelApprovalModal').modal('show');
        });
      }
    });

    $('#allowUsersToSetApprovers').off('select2:select').on('select2:select', function(){
      if($(this).val() == "allow_user" || $(this).val() == "allow_group"){
        $('#maximum_approvers_div').css('display', 'block');
        $('#maximum_levels_div').css('display', 'block');
      }
      else{
        $('#maximum_approvers_div').css('display', 'none');
        $('#maximum_levels_div').css('display', 'none');
      }
    });

    function addApprovalLevel(){
      $('#approvalLevelContainer').append(`
        <div class="card card-default collapsed-card col-12 approvalLevelParentContainer">
          <div class='card-header'>
            <div class="card-title">Configure Level</div>
            <div class="card-tools">
              <button type="button" class="btn btn-tool removeApprovalLevelContainer"><i class="fas fa-trash-alt" style="color:red;"></i></button>
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i></button>
            </div>

          </div>
          <div class="card-body" style="max-height:20rem;overflow-y: auto;">
            <div class="col-12 form-group">
              <label for="selectApproverTypeMLA">Select Approver Type:</label>
              <select class="select2 form-control selectApproverTypeMLA">
                <option value='several' selected>Several Approvers</option>
                <option value='joint'>Joint Approvers</option>
              </select>
            </div>

            <div class="col-12 form-group">
              <label for="selectApprovalTypeMLA">Select Approval Type:</label>
              <select class="select2 form-control selectApprovalTypeMLA">
                <option value='static'>Static Group Based</option>
                <option value='static_user'>Static User Based</option>
                <option value='dynamic_group'>Dynamic Group Based</option>
                <option value='dynamic_user'>Dynamic User Based</option>
                <option value='dynamic_master_group'>Dynamic Group Master Based</option>
                <option value='dynamic_master_user'>Dynamic User Master Based</option>
              </select>
            </div>

            <!-- Static Group Based -->
            <div class="col-12 form-group staticGroupBasedContainerMLA">
              <label for="select2multiple">Select Approver Group:</label>
              <select class="select2 form-control js-example-basic-multiple select2multipleMLA"
                style="min-height:29px;max-height:29px;height:29px;" multiple="multiple">
                {% for i in groupList%}
                <option value='{{i}}'>{{i}}</option>
                {% endfor %}
              </select>
            </div>

            <!-- Static User Based -->
            <div class="col-12 form-group staticUserBasedContainerMLA" style="display: none;">
              <label for="selectApproverUsers">Select Approvers:</label>
              <select class="select2 form-control js-example-basic-multiple selectApproverUsersMLA"
                style="min-height:29px;max-height:29px;height:29px;" multiple="multiple">
              </select>
            </div>

            <!-- Dynamic Group Based -->
            <div class="col-12 form-group dynamicGroupBasedContainerMLA" style="display: none;">
              <div class="row">
                <div class="col-12">
                  <label for="selectApproverGroupTableMLA">Select Table:</label>
                  <select class="select2 form-control js-example-basic-multiple selectApproverGroupTableMLA"
                    style="min-height:29px;max-height:29px;height:29px;">
                    {% for i in tableList%}
                      <option value="{{i}}">{{i}}</option>
                    {%endfor%}
                  </select>
                </div>
                <div class="col-12">
                  <label for="selectApproverGroupFieldMLA">Select Field to Identify Approver Group:</label>
                  <select class="select2 form-control js-example-basic-multiple selectApproverGroupFieldMLA"
                    style="min-height:29px;max-height:29px;height:29px;">
                  </select>
                </div>
              </div>
            </div>

            <!-- Dynamic User Based -->
            <div class="col-12 form-group dynamicUserBasedContainerMLA" style="display: none;">
              <div class="row">
                <div class="col-12">
                  <label for="selectApproverUserTableMLA">Select Table:</label>
                  <select class="select2 form-control js-example-basic-multiple selectApproverUserTableMLA"
                    style="min-height:29px;max-height:29px;height:29px;">
                    {% for i in tableList%}
                      <option value="{{i}}">{{i}}</option>
                    {%endfor%}
                  </select>
                </div>
                <div class="col-12">
                  <label for="selectApproverUserFieldMLA">Select Field to Identify Approver Group:</label>
                  <select class="select2 form-control js-example-basic-multiple selectApproverUserFieldMLA"
                    style="min-height:29px;max-height:29px;height:29px;">
                  </select>
                </div>
              </div>
            </div>


            <!-- Dynamic Group Based -->
            <div class="col-12 form-group dynamicGroupMasterBasedContainerMLA" style="display: none;">
              <div class="row">
                <div class="col-12">
                  <label for="selectApproverGroupEntryParameterMLA">Select Entry Parameter:</label>
                  <select class="select2 form-control js-example-basic-multiple selectApproverGroupEntryParameterMLA"
                    style="min-height:29px;max-height:29px;height:29px;">
                    <option value='user_username' selected>Username of User Creating Entry</option><
                    <option value='user_email'>Email Id of User Creating Entry</option><
                    <option value='extract_from_entry'>Extract Parameter From Field in Entry</option><
                  </select>
                </div>
                <div class='col-12 dynamicParameterFromEntryContainerMLA' style='display:none'>
                  <div class="col-12">
                    <label for="selectTableForParameterMLA">Select Table:</label>
                    <select class="select2 form-control selectTableForParameterMLA">
                      {% for i in tableList%}
                        <option value="{{i}}">{{i}}</option>
                      {%endfor%}
                    </select>
                  </div>
                  <div class="col-12">
                    <label for="selectFieldForParameterMLA">Select Field to Extract Parameter:</label>
                    <select class="select2 form-control selectFieldForParameterMLA">
                    </select>
                  </div>
                </div>
                <div class="col-12">
                  <br>
                  <button type="button" class="btn btn-primary dynamicMasterBasedApprovalAddButtonMLA">Add Level</button>
                  <br>
                </div>
                <div class="col-12 masterLevelContainerMLA">
                  <div class="masterBasedApprovalLevel col-12" style="border-bottom:lightgray solid 1px;border-top:lightgray solid 1px; padding-bottom: 0.5rem; padding-top: 0.5rem;">
                    <div class="col-12">
                      <label>Select Table For Parameter Mapping:</label>
                      <select class="select2 form-control paramterMappingTable">
                        {% for i in tableList%}
                          <option value="{{i}}">{{i}}</option>
                        {%endfor%}
                      </select>
                    </div>
                    <div class="col-12">
                      <label for="paramterMappingField">Select Field For Parameter Mapping:</label>
                      <select class="select2 form-control paramterMappingField">
                      </select>
                    </div>
                    <div class="col-12">
                      <label for="">Select Field For Identifying Approver:</label>
                      <select class="select2 form-control paramterMappingApproverField">
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Dynamic Hierarchical Based -->
            <div class="col-12 hierarchyGroupBasedContainerMLA" style="display: none;">
              <div class="row">
                <div class="col-12 form-group">
                  <label for="selectApprovalHierarchyGroupMLA">Select Hierarchy Group:</label>
                  <select class="select2 form-control selectApprovalHierarchyGroupMLA">
                  </select>
                </div>
                <div class="col-12 form-group">
                  <label for="selectApprovalHierarchyStartingLevelMLA">Select Starting Level:</label>
                  <select class="select2 form-control selectApprovalHierarchyStartingLevelMLA">
                  </select>
                </div>
                <div class="col-12 form-group">
                  <label for="selectApprovalHierarchyEndingingLevelMLA">Select Ending Level:</label>
                  <select class="select2 form-control selectApprovalHierarchyEndingingLevelMLA">
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
      `);
      $('#approvalLevelContainer').find('.approvalLevelParentContainer').eq(-1).find('.removeApprovalLevelContainer').click(function(){
        var $target = $(this).closest('.approvalLevelParentContainer');
        $target.hide('slow', function(){ $target.remove(); });
      });
      $('#approvalLevelContainer').find('.approvalLevelParentContainer').eq(-1).find('.select2').select2();
      $('#approvalLevelContainer').find('.approvalLevelParentContainer').eq(-1).find('.selectApprovalTypeMLA').off('select2:select').on('select2:select', function(){
        var currentLevelCard = $(this).parent().parent();
        if($(this).val() == "static"){
          currentLevelCard.find(".staticGroupBasedContainerMLA").css("display","block");
          currentLevelCard.find(".hierarchyGroupBasedContainerMLA").css("display","none");
          currentLevelCard.find(".staticUserBasedContainerMLA").css("display","none");
          currentLevelCard.find(".dynamicGroupBasedContainerMLA").css("display","none");
          currentLevelCard.find(".dynamicUserBasedContainerMLA").css("display","none");
          currentLevelCard.find(".dynamicGroupMasterBasedContainerMLA").css("display","none");
        } else if($(this).val() == "static_user"){
          currentLevelCard.find(".staticUserBasedContainerMLA").css("display","block");
          currentLevelCard.find(".staticGroupBasedContainerMLA").css("display","none");
          currentLevelCard.find(".hierarchyGroupBasedContainerMLA").css("display","none");
          currentLevelCard.find(".dynamicGroupBasedContainerMLA").css("display","none");
          currentLevelCard.find(".dynamicUserBasedContainerMLA").css("display","none");
          currentLevelCard.find(".dynamicGroupMasterBasedContainerMLA").css("display","none");
          $.ajax({
            url: window.location.pathname,
            async: false,
            data: {
              'operation': 'fetchUsersList',
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              currentLevelCard.find('.selectApproverUsersMLA').empty();
              for (i of data['users_list']) {
                currentLevelCard.find(".selectApproverUsersMLA").append(`<option value="${i}">${i}</option>`);
              }
              if (currentLevelCard.find('.selectApproverUsersMLA').attr('data-config')) {
                currentLevelCard.find('.selectApproverUsersMLA').val(currentLevelCard.find('.selectApproverUsersMLA').attr('data-config')).trigger('change');
                currentLevelCard.find('.selectApproverUsersMLA').removeAttr('data-config');
              }
            }, error: ()=>{
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
          });
        } else if($(this).val() == "dynamic_group"){
          currentLevelCard.find(".dynamicGroupBasedContainerMLA").css("display","block");
          currentLevelCard.find(".dynamicUserBasedContainerMLA").css("display","none");
          currentLevelCard.find(".hierarchyGroupBasedContainerMLA").css("display","none");
          currentLevelCard.find(".staticGroupBasedContainerMLA").css("display","none");
          currentLevelCard.find(".dynamicGroupMasterBasedContainerMLA").css("display","none");
          currentLevelCard.find(".staticUserBasedContainerMLA").css("display","none");
          currentLevelCard.find('.selectApproverGroupTableMLA').off('select2:select').on('select2:select', function(){
            $.ajax({
              url: window.location.pathname,
              async: false,
              data: {
                'operation': 'fetchColumnsList',
                'table_name': $(this).val(),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                currentLevelCard.find('.selectApproverGroupFieldMLA').empty();
                for (i in data['field_list']) {
                  currentLevelCard.find(".selectApproverGroupFieldMLA").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                }
                if (currentLevelCard.find('.selectApproverGroupFieldMLA').attr('data-config')) {
                  currentLevelCard.find('.selectApproverGroupFieldMLA').val(currentLevelCard.find('.selectApproverGroupFieldMLA').attr('data-config')).trigger('change');
                  currentLevelCard.find('.selectApproverGroupFieldMLA').removeAttr('data-config');
                }
              }, error: ()=>{
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            });
          });

        } else if($(this).val() == "dynamic_user"){
          currentLevelCard.find(".dynamicUserBasedContainerMLA").css("display","block");
          currentLevelCard.find(".dynamicGroupBasedContainerMLA").css("display","none");
          currentLevelCard.find(".hierarchyGroupBasedContainerMLA").css("display","none");
          currentLevelCard.find(".dynamicGroupMasterBasedContainerMLA").css("display","none");
          currentLevelCard.find(".staticGroupBasedContainerMLA").css("display","none");
          currentLevelCard.find(".staticUserBasedContainerMLA").css("display","none");
          currentLevelCard.find('.selectApproverUserTableMLA').off('select2:select').on('select2:select', function(){
            $.ajax({
              url: window.location.pathname,
              async: false,
              data: {
                'operation': 'fetchColumnsList',
                'table_name': $(this).val(),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                currentLevelCard.find('.selectApproverUserFieldMLA').empty();
                for (i in data['field_list']) {
                  currentLevelCard.find(".selectApproverUserFieldMLA").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                }
                if (currentLevelCard.find('.selectApproverUserFieldMLA').attr('data-config')) {
                  currentLevelCard.find('.selectApproverUserFieldMLA').val(currentLevelCard.find('.selectApproverUserFieldMLA').attr('data-config')).trigger('change');
                  currentLevelCard.find('.selectApproverUserFieldMLA').removeAttr('data-config');
                }
              }, error: ()=>{
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            });
          });

        } else if($(this).val() == "dynamic_master_group" || $(this).val() == "dynamic_master_user"){
          currentLevelCard.find(".dynamicGroupMasterBasedContainerMLA").css("display","block");
          currentLevelCard.find(".dynamicGroupBasedContainerMLA").css("display","none");
          currentLevelCard.find(".dynamicUserBasedContainerMLA").css("display","none");
          currentLevelCard.find(".hierarchyGroupBasedContainerMLA").css("display","none");
          currentLevelCard.find(".staticGroupBasedContainerMLA").css("display","none");
          currentLevelCard.find(".staticUserBasedContainerMLA").css("display","none");
          currentLevelCard.find('.dynamicParameterFromEntryContainerMLA').css('display', 'none');

          currentLevelCard.find('.selectApproverGroupEntryParameterMLA').off('select2:select').on('select2:select', function(){
            if ($(this).val() == 'extract_from_entry') {
              currentLevelCard.find('.dynamicParameterFromEntryContainerMLA').css('display', 'block');
              currentLevelCard.find('.selectTableForParameterMLA').off('select2:select').on('select2:select', function(){
                $.ajax({
                  url: window.location.pathname,
                  async: false,
                  data: {
                    'operation': 'fetchColumnsList',
                    'table_name': $(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    currentLevelCard.find('.selectFieldForParameterMLA').empty();
                    for (i in data['field_list']) {
                      currentLevelCard.find(".selectFieldForParameterMLA").append(`<option value="${i}">${data['field_list'][i]}</option>`);
                    }
                    if (currentLevelCard.find('.selectFieldForParameterMLA').attr('data-config')) {
                      currentLevelCard.find('.selectFieldForParameterMLA').val(currentLevelCard.find('.selectFieldForParameterMLA').attr('data-config')).trigger('change');
                      currentLevelCard.find('.selectFieldForParameterMLA').removeAttr('data-config');
                    }
                  }, error: ()=>{
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                });
              });
            } else {
              currentLevelCard.find('.dynamicParameterFromEntryContainerMLA').css('display', 'none');
            }
          });

          $('.paramterMappingTable').off('select2:select').on('select2:select', function(){
            var mappingElement = $(this).closest('.masterBasedApprovalLevel').find('.col-12').eq(1).find('.paramterMappingField').eq(0);
            var fieldElement = $(this).closest('.masterBasedApprovalLevel').find('.col-12').eq(2).find('.paramterMappingApproverField').eq(0);
            $.ajax({
              url: window.location.pathname,
              async: false,
              data: {
                'operation': 'fetchColumnsList',
                'table_name': $(this).val(),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                mappingElement.empty();
                fieldElement.empty();
                for (i in data['field_list']) {
                  mappingElement.append(`<option value="${i}">${data['field_list'][i]}</option>`);
                  fieldElement.append(`<option value="${i}">${data['field_list'][i]}</option>`);
                }
                if (mappingElement.attr('data-config')) {
                  mappingElement.val(mappingElement.attr('data-config')).trigger('select2:select');
                  mappingElement.val(mappingElement.attr('data-config')).trigger('change');
                  mappingElement.removeAttr('data-config');
                }
                if (fieldElement.attr('data-config')) {
                  fieldElement.val(fieldElement.attr('data-config')).trigger('select2:select');
                  fieldElement.val(fieldElement.attr('data-config')).trigger('change');
                  fieldElement.removeAttr('data-config');
                }
              }, error: ()=>{
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
            });
          });

          currentLevelCard.find('.dynamicMasterBasedApprovalAddButtonMLA').off('click').on('click', function(){
            if (currentLevelCard.find('.masterBasedApprovalLevel').length < 4) {
              currentLevelCard.find('.masterLevelContainerMLA').append(`
                <div class="masterBasedApprovalLevel col-12" style="border-bottom:lightgray solid 1px;border-top:lightgray solid 1px; padding-bottom: 0.5rem; padding-top: 0.5rem;">
                  <div class="col-12">
                    <label>Select Table For Parameter Mapping:</label>
                    <select class="select2 form-control paramterMappingTable">
                      {% for i in tableList%}
                        <option value="{{i}}">{{i}}</option>
                      {%endfor%}
                    </select>
                  </div>
                  <div class="col-12">
                    <label for="paramterMappingField">Select Field For Parameter Mapping:</label>
                    <select class="select2 form-control paramterMappingField">
                    </select>
                  </div>
                  <div class="col-12">
                    <label for="">Select Field For Identifying Approver:</label>
                    <select class="select2 form-control paramterMappingApproverField">
                    </select>
                  </div>
                </div>
              `
              );
              currentLevelCard.find('.masterLevelContainerMLA').find('.masterBasedApprovalLevel').eq(-1).find('select').each(function(){

    $(this).select2( )
  });
              $('.paramterMappingTable').off('select2:select').on('select2:select', function(){
                var mappingElement = $(this).closest('.masterBasedApprovalLevel').find('.col-12').eq(1).find('.paramterMappingField').eq(0);
                var fieldElement = $(this).closest('.masterBasedApprovalLevel').find('.col-12').eq(2).find('.paramterMappingApproverField').eq(0);
                $.ajax({
                  url: window.location.pathname,
                  async: false,
                  data: {
                    'operation': 'fetchColumnsList',
                    'table_name': $(this).val(),
                  },
                  type: "POST",
                  dataType: "json",
                  success: function (data) {
                    mappingElement.empty();
                    fieldElement.empty();
                    for (i in data['field_list']) {
                      mappingElement.append(`<option value="${i}">${data['field_list'][i]}</option>`);
                      fieldElement.append(`<option value="${i}">${data['field_list'][i]}</option>`);
                    }
                    if (mappingElement.attr('data-config')) {
                      mappingElement.val(mappingElement.attr('data-config')).trigger('select2:select');
                      mappingElement.val(mappingElement.attr('data-config')).trigger('change');
                      mappingElement.removeAttr('data-config');
                    }
                    if (fieldElement.attr('data-config')) {
                      fieldElement.val(fieldElement.attr('data-config')).trigger('select2:select');
                      fieldElement.val(fieldElement.attr('data-config')).trigger('change');
                      fieldElement.removeAttr('data-config');
                    }
                  }, error: ()=>{
                    Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                  }
                });
              });
            }
          });
        }
      });
    }


    $('#saveMultiLevelApprovalButton').on('click', function(){
      var multiLevelApprovalConfig = [];
      $('#approvalLevelContainer').find('.approvalLevelParentContainer').each(function(){
        var approvalLevelConfig = {};
        if ($(this).find(".selectApprovalTypeMLA").val() == "dynamic_group") {
          var approvalLevelConfig = {
            approval_type: $(this).find(".selectApprovalTypeMLA").val(),
            table_name: $(this).find('.selectApproverGroupTableMLA').val(),
            field: $(this).find('.selectApproverGroupFieldMLA').val(),
            approver_type: $('.selectApproverTypeMLA').val(),
          };
        } else if ($(this).find(".selectApprovalTypeMLA").val() == "dynamic_user") {
          var approvalLevelConfig = {
            approval_type: $(this).find(".selectApprovalTypeMLA").val(),
            table_name: $(this).find('.selectApproverUserTableMLA').val(),
            field: $(this).find('.selectApproverUserFieldMLA').val(),
            approver_type: $('.selectApproverTypeMLA').val(),
          };
        } else if ($(this).find(".selectApprovalTypeMLA").val() == "dynamic_master_group" || $(this).find(".selectApprovalTypeMLA").val() == "dynamic_master_user") {
          var approvalLevelConfig = {
            approval_type: $(this).find(".selectApprovalTypeMLA").val(),
            parameter: $(this).find('.selectApproverGroupEntryParameterMLA').val(),
            approver_type: $('#selectApproverType').val(),
          };
          if ($(this).find('.selectApproverGroupEntryParameterMLA').val() == 'extract_from_entry') {
            approvalLevelConfig['parameter_table_name'] = $(this).find('.selectTableForParameterMLA').val();
            approvalLevelConfig['parameter_field'] = $(this).find('.selectFieldForParameterMLA').val();
          }
          // Master Config
          var approvalMasterConfig = [];
          $(this).find('.masterBasedApprovalLevel').each(function(){
            var levelConfig = {
              'table_name': $(this).find('.paramterMappingTable').val(),
              'mapping_field': $(this).find('.paramterMappingField').val(),
              'approver_field': $(this).find('.paramterMappingApproverField').val(),
            };
            approvalMasterConfig.push(levelConfig);
          });
          approvalLevelConfig['master_level_config'] = approvalMasterConfig;
        } else if ($(this).find(".selectApprovalTypeMLA").val() == "static_user") {

          var approvalLevelConfig = {
            approval_type: $(this).find(".selectApprovalTypeMLA").val(),
            user_list: $(this).find('.selectApproverUsersMLA').val(),
            approver_type: $('.selectApproverTypeMLA').val(),
          };

        } else if ($(this).find(".selectApprovalTypeMLA").val() == "static") {
          var approvalLevelConfig = {
            approval_type: $(this).find(".selectApprovalTypeMLA").val(),
            group_list: $(this).find('.select2multipleMLA').val(),
            approver_type: $('.selectApproverTypeMLA').val(),
          };

        } else {
          var approvalLevelConfig = {};
        }
        multiLevelApprovalConfig.push(approvalLevelConfig);
      });
      $('#multiLevelApprovalButton').attr('data-config', JSON.stringify(multiLevelApprovalConfig));
      $('#multiLevelApprovalModal').modal('hide');
    });

    function SavePagination(){
      $(".pageCheck").css("display","inline-block");
      $("#pagination").attr("data-list",JSON.stringify($("#paginationSelect").val()));
    }

    function SavePagination_mul(){
      $(".pageCheck_mul").css("display","inline-block");
      $("#pagination_mul").attr("data-list",JSON.stringify($("#paginationSelect_mul").val()));
    }

    function PaginationSelect(){

    }

    function PaginationSelect_mul(){

    }
    function showEq(){
      if(compValProcess){
        $('#where_condition_Modal').modal('hide')
        $('#EBDisplayModel').modal('show')
      }
    }
    function master_field_comparison_filter_modal_close(obj){
      $('#formModal').modal('show')
      $('#master_field_comparison_filter_modal').modal('hide')
    }
    function master_field_comparison_filter_modal_save(obj){
      $('#formModal').modal('show')
      $('#master_field_comparison_filter_modal').modal('hide')
      var lengthOfCards = $('#master_field_comparison_filter_modal').find('.modal-body').find('.condition_box').find('.masterfomatting').length
      var main_list = []
      for (let i = 0; i < lengthOfCards; i++){
        var values = {}
        var singleCard = $('#master_field_comparison_filter_modal').find('.modal-body').find('.condition_box').find('.masterfomatting').eq(i)
        $(singleCard).find('')
        values['column'] = $(singleCard).find('.columnNames').val()
        values['condition_type'] = $(singleCard).find('.field_conditions').find('select').val();
        values['condition_type'] = $(singleCard).find('.field_conditions').find('select').val();
        values['conditional_condition'] = $(singleCard).find('.conditional_condition').val();

        values['conditional_input_value'] = $(singleCard).find('.conditional_input_value').find('select,input').val();
        values['rulset'] = $(singleCard).find('.rulset').find('input').val()
        values['constraint'] = $(singleCard).find('.constraint').find('input').val()
        main_list.push(values)
      }
      $('#JSConfig').find('.modal-body').children().eq($(obj).attr('modal-index')).find('.js_action_populate').find('button').attr('data-list',JSON.stringify(main_list))
    }
    function master_field_comparison_div(obj){
      $('#master_field_comparison_filter_modal').find('.modal-body').find('.condition_box').find('.masterfomatting').remove();
      $('#formModal').modal('hide')
      $('#master_field_comparison_filter_modal').modal('show')
      $('#master_field_comparison_filter_modal_save').attr('modal-index',$(obj).closest('.multipleJs').index())
      $('#master_field_comparison_filter_modal').find('.modal-body').find('button').attr('data-table',$(obj).closest('.js_action_populate').find('.master_field_table').val())
      if ($(obj).closest('.js_action_populate').find('.master_field_column').attr('data-list') != undefined){
        $('#master_field_comparison_filter_modal').find('.modal-body').find('button').attr('data-column-list',$(obj).closest('.js_action_populate').find('.master_field_column').attr('data-list'))
      }
      if ($(obj).attr('data-list')!= undefined){
        var parsedAttrData = JSON.parse($(obj).attr('data-list'))
        for (let i in parsedAttrData){
          $('#master_field_comparison_filter_modal').find('.modal-body').find('button').click();
          var singleCard = $('#master_field_comparison_filter_modal').find('.modal-body').find('.condition_box').find('.masterfomatting').eq(-1)
          $(singleCard).find('.columnNames').val(parsedAttrData[i]['column']).trigger('change')
          $(singleCard).find('.field_conditions').find('select').val(parsedAttrData[i]['condition_type']).trigger('change')
          $(singleCard).find('.conditional_condition').val(parsedAttrData[i]['conditional_condition']).trigger('change')
          if ($(singleCard).find(`.conditional_input_value`).find('select').hasClass('select2_condition_class')){
            $(singleCard).find(`.conditional_input_value`).find('select').empty()
            if (parsedAttrData[i]['conditional_condition'] == 'In'){
              var parssedInputValue = parsedAttrData[i]['conditional_input_value']
              for (let h in parssedInputValue){
                $(singleCard).find(`.conditional_input_value`).find('select').append(`<option value="${parssedInputValue[h]}">${parssedInputValue[h]}</option>`)
              }
              $(singleCard).find(`.conditional_input_value`).find('select').val(parssedInputValue).trigger('change')
            }else{
              $(singleCard).find(`.conditional_input_value`).find('select').append(`<option value="${parsedAttrData[i]['conditional_input_value']}">${parsedAttrData[i]['conditional_input_value']}</option>`)
              $(singleCard).find(`.conditional_input_value`).find('select').val(parsedAttrData[i]['conditional_input_value']).trigger('change')
            }
          }else{
            $(singleCard).find(`.conditional_input_value`).find('input,select').val(parsedAttrData[i]['conditional_input_value']).trigger('change')
          }
          $(singleCard).find('.rulset').find('input').val(parsedAttrData[i]['rulset']).trigger('change')
          $(singleCard).find('.constraint').find('input').val(parsedAttrData[i]['constraint']).trigger('change')
        }
      }
    }
    function addConditionsMasterFieldComparison(obj){
      if ($(obj).attr('data-table') != ''&& $(obj).attr('data-column-list')!= ''){
        var content = `
        <div class="row masterfomatting" data-select2-id="2747">
          <div class="col-2" style="margin-bottom:10px;">
            <select class="select2 form-control columnNames" onchange="onChangeConditionColumnFormatting(this)">
              <option value="" disabled selected>Select</option>
            </select>
          </div>
          <div class="col-2 field_conditions" style="margin-bottom:10px;">
             <select class="select2 form-control" onchange="field_type_MasterFieldComparison(this)">
              <option value="static">Static</option>
              <option value="field_based">Field based</option>
            </select>
          </div>
          <div class="col-2" style="margin-bottom:10px;">
             <select class="select2 form-control conditional_condition" onchange="onChangeConditionFormatting(this)">
              <option value="" disabled selected>Select Column</option>
            </select>
          </div>
          <div class="col-2 conditional_input_value" style="margin-bottom:10px;">
            <div class="conditional_format_value_input">
              <select class="select2 form-control select2_condition_class condition_select2 conditional_value"></select>
            </div>
          </div>
          <div class="col rulset">
            <input type="text" class="textinput textInput form-control  ">
          </div>
          <div class="col constraint">
            <input type="text" class="textinput textInput form-control  ">
          </div>
          <div class="col-1">
            <i class="fas fa-remove" onclick="removeConditionColumnFormatting(this)" style="cursor:pointer;padding-top: 0.6rem;"></i>
          </div>
        </div>
        `
        $(obj).closest('.modal-body').find('.condition_box').append(content)
        var column_list = JSON.parse($(obj).attr('data-column-list'))
        for (let i in column_list){
          $(obj).closest('.modal-body').find('.condition_box').find('.masterfomatting').eq(-1).find('.columnNames').append(`<option value="${column_list[i]['originalName']}" data-datatype="${column_list[i]['data-type']}">${column_list[i]['verboseName']}</option>`)
        }
        $(obj).closest('.modal-body').find('.condition_box').find('select').select2()
        $('.select2_condition_class').select2({
          tags: true
        })
      }
    }
    function field_type_MasterFieldComparison(obj){
      if ($(obj).val()=='static'){
        $(obj).closest('.masterfomatting').find('.field_based_conditional_format_value_input').attr('class','conditional_format_value_input');
        $(obj).closest('.masterfomatting').find('.conditional_format_value_input').empty();
        $(obj).closest('.masterfomatting').find('.conditional_format_value_input').append(`<select class="select2 form-control select2_condition_class condition_select2 conditional_value"></select>`)
        $('.select2_condition_class').select2({
          tags: true
        })
      }else{
        $(obj).closest('.masterfomatting').find('.conditional_format_value_input').attr('class','field_based_conditional_format_value_input')
        $(obj).closest('.masterfomatting').find('.field_based_conditional_format_value_input').empty()
        $(obj).closest('.masterfomatting').find('.field_based_conditional_format_value_input').append(`<select class="select2 form-control"></select>`)
        $(obj).closest('.masterfomatting').find('.field_based_conditional_format_value_input').find('select').append('<option value="" disabled selected>Select Column</option>')
        for (let i in allFieldsColumns){
          $(obj).closest('.masterfomatting').find('.field_based_conditional_format_value_input').find('select').append(`<option value="${allFieldsColumns[i]}" data-type="${allFieldsColumnsType[i]}">${verboseName[i]}</option>`)
        }
        $(obj).closest('.masterfomatting').find('.field_based_conditional_format_value_input').find('select').select2();
      }
    }
    function master_field_table_fetch(obj){
      $.ajax({
        url: window.location.pathname,
        data: {
          'operation': 'fecthing_verbose_name_column_rename',
          'model_name': $(obj).val(),
          'json_model_name':'',
          'json_column_name':JSON.stringify({}),
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          var columnOptions = ''
          $(obj).closest('.js_action_populate').find('.master_field_column').attr('data-list',JSON.stringify(data.data))
          var data = data.data
          $(obj).closest('.js_action_populate').find('.master_field_column').select2('destroy')
          $(obj).closest('.js_action_populate').find('.master_field_column').empty();
          columnOptions += '<option value="" disabled selected>Select Column</option>'
          for (j in data) {
            if(['DateField','IntegerField','FloatField','TimeField','DateTimeField'].includes(data[j]['data-type'])){
              columnOptions +=  `<option value="${data[j]['originalName']}" data-type="${data[j]['data-type']}">${data[j]['verboseName']}</option>`
            }
          }
          $(obj).closest('.js_action_populate').find('.master_field_column').append(columnOptions);
          $(obj).closest('.js_action_populate').find('.master_field_column').select2();
          if ($(obj).attr('data-column')!= undefined){
            $(obj).closest('.js_action_populate').find('.master_field_column').val($(obj).attr('data-column')).trigger('change')
          }
        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })
    }
    function staticFieldNewJsActions(obj){
      $(obj).closest('.js_action_populate').find('.dependant_value_div').css('display','none');
      $(obj).closest('.js_action_populate').find('.static_value_div').css('display','none');
      $(obj).closest('.js_action_populate').find('.master_field_comparison_div').css('display','none');
      $(obj).closest('.js_action_populate').find('.master_field_comparison_div_table_list').css('display','none');
      $(obj).closest('.js_action_populate').find('.master_field_comparison_div_table_column').css('display','none');

      if ($(obj).val() =='field_based'){
        $(obj).closest('.js_action_populate').find('.dependant_value_div').css('display','');
      }else if ($(obj).val()=='master_field_comparison'){
        $(obj).closest('.js_action_populate').find('.master_field_comparison_div').css('display','');
        $(obj).closest('.js_action_populate').find('.master_field_comparison_div_table_list').css('display','');
        $(obj).closest('.js_action_populate').find('.master_field_comparison_div_table_column').css('display','');
      }else{
        $(obj).closest('.js_action_populate').find('.static_value_div').css('display','');
      }
    }
    function configureValComp () {
      compValProcess = true
      compValProcessName = $('#selectFormTable').val()[0]+'_'+$('#selectField').val()+'_'+"compjs"+'_'+(Math.floor(Math.random() * (100000000000 - 999999999 + 1)) + 999999999).toString()
      eq_present = $(this).attr("data-eq_id")
      compValVarName = $(this).parent().parent().parent().find('.val_based_msg_global_var').val()
      if(eq_present && eq_present != undefined){
        compValProcessName = eq_present
        $(this).attr("data-eq_id",eq_present)
        eqBuilder(compValProcessName, "", "modelelementid")
      }else{
        $(this).attr("data-eq_id",compValProcessName)
        eqBuilder(compValProcessName, "", "modelelementid")
      }
    }

    </script>
    <!-- table header script -->
     <script>
     var count =0
      function tableHeader(){
      $('#dataTableModal').modal('hide')
       let len= Object.keys(gettableheaders).length
       count++

         if(len>0 && count===1){

          document.getElementsByClassName("select-header")[0].value=Object.keys(gettableheaders)[0]
          $('.select-subheader').eq(0).val(Object.values(gettableheaders)[0]).trigger('change')
        for(let i=1;i<len;i++){
          document.getElementById('addHeaderBtn').click()
          document.getElementsByClassName("select-header")[i].value=Object.keys(gettableheaders)[i]
          $('.select-subheader').eq(i).val(Object.values(gettableheaders)[i]).trigger('change')
        }

      }
    }
    function columnHeaderRename(obj){
      if($('#selectTemplate').val() == 'Multi Dropdown View'){
        $('#columnNamesRenamesModal').modal('show')
        $('#dataTableModal').modal('hide')
        $('.dataTableModal_mul').modal('hide')
      }else{
        $('#columnNamesRenamesModal').modal('show')
        $('#dataTableModal').modal('hide')
      }

      $('#columnNamesRenamesModal').find('.body-column-header-name').empty()
      var attrData = $(obj).attr('data-list')
      if (attrData == ''|| attrData =='{}'|| attrData == 'null'){

      }else{
        if($('#selectTemplate').val() == 'Multiple table'){
          var parsedAttrData = JSON.parse(attrData)
          for (let i in parsedAttrData){
            columnNamesRenamesModalContent_multiple(i,parsedAttrData[i])
          }
        }else{
          var parsedAttrData = JSON.parse(attrData)
          if (`${$('#selectTablePC').val()}`in parsedAttrData){
            $('#columnNamesRenamesModal').find('#allow_checkbox_column_rename').prop('checked',parsedAttrData[$('#selectTablePC').val()]['edit_list_view_check']);
            columnNamesRenamesModalContent($('#columnNamesRenamesModal').find('.card-header').find('button'),parsedAttrData[$('#selectTablePC').val()]['config'])
          }
        }

      }
    }
    var columnNamesRenamesModalContent_multiple_checkbox_id = 0
    function columnNamesRenamesModalContent_multiple(tablename,dict){
      columnNamesRenamesModalContent_multiple_checkbox_id++
      content = `<div class="card collapsed-card masterfomatting_main_card" style="margin-top:10px;">
        <div class="card-header row">
          <div class="form-group col-7" style="display:flex; margin-bottom: 0px;">
              <p style="margin-right: 5px; white-space: nowrap; font-weight:bold; color:var(--primary-color);">Select Table:</p>
            <div class="col-8" style="margin-left:15px;">
            <select class="select2 form-control tableNames" onchange="rename_column_table_multiple(this)"  style="margin-left: 5px;">
              <option value="" disabled selected>Select Table</option>
            </select>
            </div>
          </div>

              <div class="col-4">
                <div class="card-tools float-right">
                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
                  <button type="button" class="btn btn-tool" onclick="formattingRemoveContentMultiple(this)"><i class="fas fa-remove" style="color:var(--primary-color);"></i></button>
              </div>
            </div>
        </div>
        <div class="card-body" style="max-height: 25rem;overflow: hidden;overflow: overlay">
          <div class="row checkbox">
            <div class="col-12">
              <div class="custom-control custom-checkbox">
              <input type="checkbox" id="allow_checkbox_column_rename_${columnNamesRenamesModalContent_multiple_checkbox_id}" name="allow_checkbox_column_rename_${columnNamesRenamesModalContent_multiple_checkbox_id}" class="checkboxinput custom-control-input" json_model_name="">
              <label for="allow_checkbox_column_rename_${columnNamesRenamesModalContent_multiple_checkbox_id}" class="custom-control-label">For edit list view?</label>
            </div>
          </div>
          </div>
          <div class="row plus_button">
            <div class="col-12">
              <div class="float-right" style="margin-right: 6px;">
                <button type="button" class="btn btn-tool plus" onclick="renameColumnHeadersValuesContentMultiple(this)"><i class="fas fa-plus" style="color:var(--primary-color);"></i></button>
              </div>
            </div>
          </div>
          <div class="default-values row">
            <div class="col-5" >
              <p style="font-weight: bold;">Select column:</p>
              <div style="display:none;">
                <select class="select2 form-control" data-column="selected_column">
                  <option value="" disabled selected>Select Column</option>
                </select>
              </div>
            </div>
            <div class="col-5" >
              <p style="font-weight: bold;">Rename column name:</p>
            </div>
          </div>

        </div>
        </div>
      </div>
      </div>`
      $('#columnNamesRenamesModal').find('.body-column-header-name').append(content)
      var lastCard = $('#columnNamesRenamesModal').find('.body-column-header-name').find('.masterfomatting_main_card').slice(-1)
      $(lastCard).find('.tableNames').empty()
      var selectedTables = $('#selectTablePC').val()
      $(lastCard).find('.tableNames').append(`<option value="" disabled selected>Select Table</option>`)
      for (let i in selectedTables){
        $(lastCard).find('.tableNames').append(`<option value="${selectedTables[i]}">${selectedTables[i]}</option>`)
      }
      $(lastCard).find('.tableNames').select2()
      if (tablename!= undefined && dict != undefined){
        $(lastCard).find('.tableNames').attr('data-list',JSON.stringify(dict))
        $(lastCard).find('.checkbox').find('input').prop('checked',dict['edit_list_view_check'])
        $(lastCard).find('.tableNames').val(tablename).trigger('change')
      }
    }
    function rename_column_table_multiple(obj){
      var json_model_name = ''
      var json_model_columns = ''
      $.ajax({
        url: window.location.pathname,
        data: {
          'operation': 'fecthing_verbose_name_column_rename',
          'model_name': $(obj).val(),
          'json_model_name':json_model_name,
          'json_column_name':JSON.stringify(json_model_columns),
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          var columnOptions = ''
          var json_data = data.json_data
          var data = data.data
          columnOptions += '<option value="" disabled selected>Select Column</option>'
          var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record']`).prop('checked')
          var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
          var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
          var viewRecord = $('.listview_actionSubElements').find(`[id='View Record']`).prop('checked')
          var Approve = $('.listview_actionSubElements').find(`[id='Approve']`).prop('checked');
          var delegateApproval = $('.listview_actionSubElements').find(`[id='Delegate Approval']`).prop('checked');
          var Reject = $('.listview_actionSubElements').find(`[id='Reject']`).prop('checked')
          var Sendtopreviousapprover = $('.listview_actionSubElements').find(`[id='Send to previous approver']`).prop('checked')
          var PDFActionButton = $('.listview_actionSubElements').find(`[id='PDF Action Button']`).prop('checked')
          var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord,'Approve':Approve, 'delegateApproval': delegateApproval, 'Reject':Reject,'Send to previous approver':Sendtopreviousapprover,'PDF Action Button':PDFActionButton}
          var groupTogether = $('#action_btn_config_group_together').prop('checked')
          var requiredTag = $('#notrequiredListView_Action').prop('checked')
          var columnHeaderValues = {}
          if (json_data.length > 0){
            for (j in json_data) {
              columnOptions +=  `<option value="${json_data[j]['originalName']}">${json_data[j]['verboseName']}</option>`
            }
          }
          if (requiredTag == false){
            if (groupTogether == true){
              columnOptions += `<option value="Actions">Actions</option>`
            }else{
              for (let i in actionBtn){
                if (actionBtn[i]== true){
                  columnOptions += `<option value="${i}">${i}</option>`
                }
              }
            }
          }
          for (j in data) {
            columnOptions +=  `<option value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
          }
          $(obj).closest('.masterfomatting_main_card').find('.default-values').find('select').empty()
          $(obj).closest('.masterfomatting_main_card').find('.default-values').find('select').append(columnOptions)
          if($(obj).attr('data-list')!= undefined){
            var parsedAttrData = JSON.parse($(obj).attr('data-list'))
            for (let k in parsedAttrData['config']){
              renameColumnHeadersValuesContentMultiple($(obj).closest('.masterfomatting_main_card').find('.plus_button'),parsedAttrData['config'][k])
            }
          }
        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })
    }
    function renameColumnHeadersValuesContentMultiple(obj,list){
      var content = `
      <div class="row masterfomatting" style="margin-top:1rem;">
        <div class="col-5" >
          <select class="select2 form-control" data-column="selected_column">
            <option value="" disabled selected>Select Column</option>
          </select>
        </div>
        <div class="col-5">
          <input type="text" class="textinput textInput form-control " data-column="renamed_column_name">
        </div>
        <div class="col-2">
          <i class="fas fa-remove" onclick="removeColumnNamesRenamesModalContent(this)" style="cursor:pointer;padding-top:1em;"></i>
        </div>
      </div>
      `
      $(obj).closest('.card-body').append(content)
      var lastCard = $(obj).closest('.card-body').find('.masterfomatting').slice(-1)
      $(lastCard).find('select').empty()
      $(lastCard).find('select').append($(obj).closest('.card-body').find('.default-values').find('select').html());
      $(lastCard).find('select').each(function(){

    $(this).select2( )
  });
      if(list != undefined){
        $(lastCard).find('select').val(list['selected_column']).trigger('change')
        $(lastCard).find('input').val(list['renamed_column_name']).trigger('change')
      }
    }
    function columnNamesRenamesModalsaveEditButton_multiple(obj){
      $('#columnNamesRenamesModal').modal('hide')
      $('#dataTableModal').modal('show')

      var storedValues = {}
      var lengthOfCards = $('#columnNamesRenamesModal').find('.body-column-header-name').find('.masterfomatting_main_card').length
      for (let i = 0; i < lengthOfCards; i++){
        var fullValues = {}
        var listOfValues = []
        var singleCard = $('#columnNamesRenamesModal').find('.body-column-header-name').find('.masterfomatting_main_card').eq(i)
        var lengthOfColumns =  $(singleCard).find('.card-body').find('.masterfomatting').length
        for (let j = 0; j < lengthOfColumns; j++){
          var values = {}
          var singleRow = $(singleCard).find('.card-body').find('.masterfomatting').eq(j)
          values['selected_column'] = $(singleRow).find('select').val()
          values['renamed_column_name'] = $(singleRow).find('input').val()
          listOfValues.push(values)
        }
        fullValues['config'] = listOfValues
        fullValues['edit_list_view_check'] = $(singleCard).find('.checkbox').find('input').prop('checked')
        fullValues['json_model_name'] = ''
        storedValues[$(singleCard).find('.tableNames').val()] = fullValues
      }
      $('#columnNamesRenamesButton').attr('data-list',JSON.stringify(storedValues))
    }
    function columnNamesRenamesModalContent(obj,list){
      var json_model_name = ''
      var json_model_columns = ''
      var json_flag = false
      if ($('#selectTemplate').val() =='Approval Template'){
        var GroupByConfigs = $('#group_by_action_btn_sub').attr('data-list')
        var jsonTable = $('#appFields_ref_table')
        if (GroupByConfigs != '{}' && GroupByConfigs != '' && GroupByConfigs != 'null'){
          var GroupByConfigs = JSON.parse(GroupByConfigs)
          if (GroupByConfigs['group_by_switch']){
            if (GroupByConfigs[$('#selectTablePC').val()]['data-json-table'] != ''){
              json_model_name = GroupByConfigs[$('#selectTablePC').val()]['data-json-table']
              json_model_columns = [...GroupByConfigs[$('#selectTablePC').val()]['levels'],...GroupByConfigs[$('#selectTablePC').val()]['selected_columns']]
            }else{
              json_flag = true
            }
          }else{
            json_flag = true
          }
        }else{
          json_flag = true
        }
        if (json_flag){
          if ($(jsonTable).val() != ''){
            if ($('#appFields_ref_cols').val().length > 0){
              json_model_name = $(jsonTable).val()
              json_model_columns = $('#appFields_ref_cols').val()
            }
          }
        }
      }
      $.ajax({
        url: window.location.pathname,

        data: {
          'operation': 'fecthing_verbose_name_column_rename',
          'model_name': $('#selectTablePC').val(),
          'json_model_name':json_model_name,
          'json_column_name':JSON.stringify(json_model_columns),
        },
        type: "POST",
        dataType: "json",
        success: function (data) {
          var flag = false
          if(list != undefined){
            flag = true
          }else{
            flag = false
          }
          var columnOptions = ''
          var json_data = data.json_data
          var data = data.data
          columnOptions += '<option value="" disabled selected>Select Column</option>'
          if ($('#selectTemplate').val() =='Multi Dropdown View'){
            var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record_mul']`).prop('checked')
            var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
            var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
            var viewRecord = $('.listview_actionSubElements').find(`[id='View Record_mul']`).prop('checked')
            var Approve = $('.listview_actionSubElements').find(`[id='Approve_mul']`).prop('checked')
            var delegateApproval = $('.listview_actionSubElements').find(`[id='Delegate Approval_mul']`).prop('checked');
            var Reject = $('.listview_actionSubElements').find(`[id='Reject_mul']`).prop('checked')
            var Sendtopreviousapprover = $('.listview_actionSubElements').find(`[id='Send to previous approver_mul']`).prop('checked')
            var PDFActionButton = $('.listview_actionSubElements').find(`[id='PDF Action Button_mul']`).prop('checked')
            var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord,'Approve':Approve, 'delegateApproval': delegateApproval, 'Reject':Reject,'Send to previous approver':Sendtopreviousapprover,'PDF Action Button':PDFActionButton}
            var groupTogether = $('#action_btn_config_group_together_mul').prop('checked')
            var requiredTag = $('#notrequiredListView_Action_mul').prop('checked')
          }else{
            var editRecord =  $('.listview_actionSubElements').find(`[id='Edit Record']`).prop('checked')
            var permDeleteRecord = $('.listview_actionSubElements').find(`[name='Perm Delete Record']`).prop('checked')
            var tempDeleteRecord = $('.listview_actionSubElements').find(`[name='Temp Delete Record']`).prop('checked')
            var viewRecord = $('.listview_actionSubElements').find(`[id='View Record']`).prop('checked')
            var Approve = $('.listview_actionSubElements').find(`[id='Approve']`).prop('checked')
            var delegateApproval = $('.listview_actionSubElements').find(`[id='Delegate Approval']`).prop('checked');
            var Reject = $('.listview_actionSubElements').find(`[id='Reject']`).prop('checked')
            var Sendtopreviousapprover = $('.listview_actionSubElements').find(`[id='Send to previous approver']`).prop('checked')
            var PDFActionButton = $('.listview_actionSubElements').find(`[id='PDF Action Button']`).prop('checked')
            var actionBtn = {'Edit':editRecord,'Delete':permDeleteRecord,'Temporary delete':tempDeleteRecord,'View':viewRecord,'Approve':Approve, 'delegateApproval': delegateApproval, 'Reject':Reject,'Send to previous approver':Sendtopreviousapprover,'PDF Action Button':PDFActionButton}
            var groupTogether = $('#action_btn_config_group_together').prop('checked')
            var requiredTag = $('#notrequiredListView_Action').prop('checked')
          }
          var columnHeaderValues = {}
          if (json_data.length > 0){
            for (j in json_data) {
              columnOptions +=  `<option value="${json_data[j]['originalName']}">${json_data[j]['verboseName']}</option>`
            }
          }
          if (requiredTag == false){
            if (groupTogether == true){
              columnOptions += `<option value="Actions">Actions</option>`
            }else{
              for (let i in actionBtn){
                if (actionBtn[i]== true){
                  columnOptions += `<option value="${i}">${i}</option>`
                }
              }
            }
          }
          for (j in data) {
            columnOptions +=  `<option value="${data[j]['originalName']}">${data[j]['verboseName']}</option>`
          }
          var content = `
          <div class="row masterfomatting" style="margin-top:1rem;">
            <div class="col-5" >
              <p style="font-weight: bold;">Select column:</p>
              <select class="select2 form-control" data-column="selected_column">
                <option value="" disabled selected>Select Column</option>
              </select>
            </div>
            <div class="col-5" >
              <p style="font-weight: bold;">Rename column name:</p>
              <input type="text" class="textinput textInput form-control " data-column="renamed_column_name">
            </div>
            <div class="col-2">
              <i class="fas fa-remove" onclick="removeColumnNamesRenamesModalContent(this)" style="cursor:pointer;padding-top:3.4em;"></i>
            </div>
          </div>
          `

          if (flag){
            $('#columnNamesRenamesModal').find('.body-column-header-name').empty();
            for (let k in list){
              $('#columnNamesRenamesModal').find('.body-column-header-name').append(content)
              var lastCard = $('#columnNamesRenamesModal').find('.body-column-header-name').find('.masterfomatting').slice(-1)
              $(lastCard).find('select').empty();
              $(lastCard).find('select').append(columnOptions)
              $(lastCard).find('select').each(function(){

    $(this).select2( )
  });
              $(lastCard).find('select').val(list[k]['selected_column']).trigger('change')
              $(lastCard).find('input').val(list[k]['renamed_column_name']).trigger('change')
            }
          }else{
            $('#columnNamesRenamesModal').find('.body-column-header-name').append(content)
            var lastCard = $('#columnNamesRenamesModal').find('.body-column-header-name').find('.masterfomatting').slice(-1)
            $(lastCard).find('select').empty();
            $(lastCard).find('select').append(columnOptions)
            $(lastCard).find('select').each(function(){

    $(this).select2( )
  });
          }
          $('#columnNamesRenamesModal').find('#allow_checkbox_column_rename').attr('json_model_name',json_model_name)
        },
        error: function () {
          Swal.fire({icon: 'error',text: 'Error! Please try again.'});
        }
      })
    }
    function removeColumnNamesRenamesModalContent(obj){
      $(obj).closest('.masterfomatting').remove()
    }
    function columnNamesRenamesModalcloseEditButton(obj){
      if($('#selectTemplate').val() == 'Multi Dropdown View'){
        $('#columnNamesRenamesModal').modal('hide')
        $('#dataTableModal').modal('show')
        $('.dataTableModal_mul').modal('show')
      }else{
        $('#columnNamesRenamesModal').modal('hide')
        $('#dataTableModal').modal('show')
      }
    }
    function columnNamesRenamesModalsaveEditButton(obj){
      if($('#selectTemplate').val() == 'Multi Dropdown View'){
        $('#columnNamesRenamesModal').modal('hide')
        $('#dataTableModal').modal('show')
        $('.dataTableModal_mul').modal('show')
      }else{
        $('#columnNamesRenamesModal').modal('hide')
        $('#dataTableModal').modal('show')
      }
      var fullValues = {}
      var listOfValues = []
      var lengthOfCards = $('#columnNamesRenamesModal').find('.body-column-header-name').find('.masterfomatting').length
      for (let i = 0; i < lengthOfCards; i++){
        var values = {}
        var singleCard = $('#columnNamesRenamesModal').find('.body-column-header-name').find('.masterfomatting').eq(i)
        $(singleCard).find('[data-column]').each(function(){
          values[$(this).attr('data-column')] = $(this).val()
        })
        listOfValues.push(values)
      }
      fullValues['config'] = listOfValues
      fullValues['edit_list_view_check'] = $('#columnNamesRenamesModal').find('#allow_checkbox_column_rename').prop('checked');
      fullValues['json_model_name'] = $('#columnNamesRenamesModal').find('#allow_checkbox_column_rename').attr('json_model_name')
      if($('#selectTemplate').val() == 'Multi Dropdown View'){
        $('#columnNamesRenamesButton_mul').attr('data-list',JSON.stringify({[$('#selectTablePC').val()]:fullValues}))
      }else{
        $('#columnNamesRenamesButton').attr('data-list',JSON.stringify({[$('#selectTablePC').val()]:fullValues}))
      }
    }
    </script>
    <!-- table header add header -->
      <script>



      function addHeader() {
        $(".table-header-fields")
          .eq(0)
          .clone()
          .find("select").val("").end() // ***
          .show()
          .insertAfter(".table-header-fields:last");

          $('.select-subheader').select2()



      };
      $('.all-fields').on('click', ".cancel", function() {
          $(this).closest('.table-header-fields').remove();
        });

    function saveHeaderSubheader(){
    var headerResult={}
    let select_header=document.getElementsByClassName("select-header")
    let select_subheader=document.getElementsByClassName("select-subheader")

    for(let i=0;i<select_subheader.length;i++){
      var selected = [];
        for (var option of document.getElementsByClassName('select-subheader')[i].options)
        {
            if (option.selected) {
                selected.push(option.value);
            }
        }

      headerResult[select_header[i].value]=selected
    }

    $('#tableHeaderBtn').attr('data-data',JSON.stringify(headerResult))
     Swal.fire({icon: 'success',text: 'Data added successfully.'});
    $('#tableHeaderModal').modal('hide');
    $('#dataTableModal').modal('show');
    }

    function check_master_foreignkey(type){
      let table_name = $(this).parent().parent().parent().parent().parent().find(".masterTableSelect").val()
      let col_name = $(this).val()

      if(table_name && col_name){
        $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'check_master_foreignkey',
              'col_name': col_name,
              'table_name': table_name,
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              if(data.msg != "No_msg"){
                Swal.fire({icon: 'info',text: data.msg});
              }
          },
          error: function () {
            Swal.fire({icon: 'error',text: 'Error! Please try again.'});
          }
        })
      }
    }

    function addParams(){
      let filter_type = $(this).val()
      $(this).parent().parent().find(".fk-master-btn").attr("onclick", `addFKMasterCond.call(this, '${filter_type}')`)
    }


    function getColumnsMaster() {
        let cur = $(this)
        let tname = cur.parent().parent().parent().parent().find(".selectpctype").val()
        if($(this).val()){
          $.ajax({
                url: window.location.pathname,
                data: {
                  'operation': 'formTableFieldsAll',
                  'tablesForm':JSON.stringify([$(this).val()]),
                },
                type: "POST",
                dataType: "json",
                success: function (data) {
                  cur.parent().parent().find('.selectparentcolumnMasterCond').empty();
                  cur.parent().parent().find('.selectparentreturncolumnMasterCond').empty();

                  r1 = cur.parent().parent().find('.selectparentcolumnMasterCond').attr('data-data')
                  r2 = cur.parent().parent().find('.selectparentreturncolumnMasterCond').attr('data-data')
                  for(j in data.finalFieldList){
                      cur.parent().parent().find('.selectparentcolumnMasterCond').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
                      cur.parent().parent().find('.selectparentreturncolumnMasterCond').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
                  }

                  if(r1){
                    cur.parent().parent().find('.selectparentcolumnMasterCond').val(r1).trigger('change')
                    cur.parent().parent().find('.selectparentcolumnMasterCond').removeAttr('data-data')
                  }

                  if(r2){
                    cur.parent().parent().find('.selectparentreturncolumnMasterCond').val(r2).trigger('change')
                    cur.parent().parent().find('.selectparentreturncolumnMasterCond').removeAttr('data-data')
                  }

                },
                error: function () {
                  Swal.fire({icon: 'error',text: 'Error! Please try again.'});
                }
        })

        $.ajax({
            url: window.location.pathname,

            data: {
              'operation': 'formTableFieldsAll',
              'tablesForm':JSON.stringify([tname]),
            },
            type: "POST",
            dataType: "json",
            success: function (data) {
              cur.parent().parent().find('.selectreturnMasterCond').empty();

              r3 = cur.parent().parent().find('.selectreturnMasterCond').attr('data-data')

              for(j in data.finalFieldList){
                cur.parent().parent().find('.selectreturnMasterCond').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
              }

              if(r3){
                cur.parent().parent().find('.selectreturnMasterCond').val(r3).trigger('change')
                cur.parent().parent().find('.selectreturnMasterCond').removeAttr('data-data')
              }
            },
            error: function () {
              Swal.fire({icon: 'error',text: 'Error! Please try again.'});
            }
    })
      }
    }


    function getColumnsMaster1() {
        let cur = $(this)
        let tname = cur.parent().parent().parent().parent().find(".selectpctype").val()

        if($(this).val()){
          $.ajax({
              url: window.location.pathname,

              data: {
                'operation': 'formTableFieldsAll',
                'tablesForm':JSON.stringify([tname]),
              },
              type: "POST",
              dataType: "json",
              success: function (data) {
                cur.parent().parent().find('.foreignKeyColBasedReturnCol').empty();

                r3 = cur.parent().parent().find('.foreignKeyColBasedReturnCol').attr('data-data')

                for(j in data.finalFieldList){
                  cur.parent().parent().find('.foreignKeyColBasedReturnCol').append(`<option value="${data.finalFieldList[j]['fieldName']}">${data.finalFieldList[j]['verbose']}</option>`)
                }

                if(r3){
                  cur.parent().parent().find('.foreignKeyColBasedReturnCol').val(r3).trigger('change')
                  cur.parent().parent().find('.foreignKeyColBasedReturnCol').removeAttr('data-data')
                }
              },
              error: function () {
                Swal.fire({icon: 'error',text: 'Error! Please try again.'});
              }
          })
        }

    }
    function checkTemplateApproval(){
      let template = $('#selectTemplate').val()
      if(template != "Approval Template"){
        Swal.fire({icon: 'info',text: 'Can only select the option for Approval Template.'});
        $(this).prop("checked",false)
      }
    }
    $("#save_url").click(function(event){
      set_ins = $('#set_instructions').val();
      var pattern = /\{([^}]+)\}/g;
      var linkExists = pattern.test(set_ins);
      if (linkExists) {
        alert("Link is already present in instructions.");
      }
      else {
        url_text = '{' + $('#url_text1').val() + '}';
        added_text = set_ins + ' ' + url_text;
        $('#set_instructions').val(added_text).trigger('change');
        ap_code = $('#select_app_hyperlink').val();
        subp_code = $('#select_subprocess_hyperlink').val();
      }
      })
    $("#instructions_url_dropdown").on("select2:select", function(){
      var selectedValue = document.getElementById("instructions_url_dropdown").value;
      var field1 = document.getElementById("manaddlink");
      var field2 = document.getElementById("inapplink");
      field1.style.display = "none";
      field2.style.display = "none";
      if (selectedValue === "addman") {
          field1.style.display = "block";
      } else if (selectedValue === "inapp") {
          field2.style.display = "block";
          $.ajax({
            url: window.location.pathname,
            type: "POST",
            data: {
              'operation': "get_app_list",
            },
            success: function(data) {
              var dropdown = document.getElementById("select_app_hyperlink");
              document.getElementById("select_app_hyperlink").innerHTML="";
              $("#select_app_hyperlink").append($('<option>', {
                value: 'default',
                text: 'Select app'
              }));
              Object.entries(data).forEach(function([key, value]) {
                var option = document.createElement("option");
                option.text = value;
                option.value = key;
                dropdown.add(option);
              });
              if ($('#select_app_hyperlink').attr('data-existing-config')) {
                var selectedApplication = $('#select_app_hyperlink').attr('data-existing-config');
                $('#select_app_hyperlink').val(selectedApplication).trigger('select2:select');
                $('#select_app_hyperlink').val(selectedApplication).trigger('change');
              }
            },
            error: function() {
            }
    });
      }
      })
    $("#select_app_hyperlink").on("select2:select", function(){
      app_code = $(this).val();
      $.ajax({
        url: window.location.pathname,
        type: "POST",
        data: {
          'operation': "get_process_list",
          'app_code':app_code,
        },
        success: function(data){
          prod = document.getElementById("select_process_hyperlink")
          document.getElementById("select_process_hyperlink").innerHTML="";
          $("#select_process_hyperlink").append($('<option>', {
            value: 'default',
            text: 'Select process'}));
            Object.entries(data).forEach(function([key, value]) {
              var option = document.createElement("option");
              option.text = value;
              option.value = key;
              prod.add(option);
             });
             if ($('#select_process_hyperlink').attr('data-existing-config')) {
              var selectedProcess = $('#select_process_hyperlink').attr('data-existing-config');
              $('#select_process_hyperlink').val(selectedProcess).trigger('select2:select');
              $('#select_process_hyperlink').val(selectedProcess).trigger('change');
            }
          },
        error: function(){
        }
      });
    })
    $("#select_process_hyperlink").on("select2:select", function(){
      app_code = $('#select_app_hyperlink').val();
      pro_code = $(this).val();
      $.ajax({
        url: window.location.pathname,
        type: "POST",
        data: {
          'operation': "get_subprocess_list",
          'app_code' : app_code,
          'pro_code' : pro_code,
        },
        success: function(data){
          subd = document.getElementById("select_subprocess_hyperlink")
          document.getElementById("select_subprocess_hyperlink").innerHTML="";
          $("#select_subprocess_hyperlink").append($('<option>', {
            value: 'default',
            text: 'Select subprocess'}));
            Object.entries(data).forEach(function([key, value]) {
              var option = document.createElement("option");
              option.text = value;
              option.value = key;
              subd.add(option);
            });
            if ($('#select_subprocess_hyperlink').attr('data-existing-config')) {
              var selectedSubprocess = $('#select_subprocess_hyperlink').attr('data-existing-config');
              $('#select_subprocess_hyperlink').val(selectedSubprocess).trigger('select2:select');
              $('#select_subprocess_hyperlink').val(selectedSubprocess).trigger('change');
            }
        },
        error: function(){
        }
      });
    })

    $( document ).ready(function() {
      $('select.select2:not(.modal select.select2)').each(function(){
        parent = $(this).parent()
        $(this).select2({dropdownParent:parent})
      })
      $('.modal select.select2').each(function(){
        $(this).select2()
      })

      $(".nav-accordion").click(function(){
        var content = $(this).attr("data-target")
        if($(`#${content}`).css("display") == "none"){
        $(`#${content}`).slideDown();
        $(this).children("span").html('<i class="fa fa-chevron-up" style="float: right;"></i>')
        }else{
        $(`#${content}`).slideUp();
        $(this).children("span").html('<i class="fa fa-chevron-down" style="float: right;"></i>')
        }
      })
    });



  </script>
{% endblock %}