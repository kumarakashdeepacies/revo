function masterStandardButtonFunc(){function e(){_=$(this).attr("id"),setTimeout(function(){$("#"+_).prop("disabled","disabled")},100)}function t(){$(this).prop("disabled","disabled")}function a(){const e=$(this).attr("data-elementID");let t=$(this).attr("data-table-name");if(t.startsWith("[")&&(t=JSON.parse(t)),t.constructor===Array){$(`#custommValidationSelection_${e}`).empty(),$(`#custommValidationSelection_${e}`).append("<option value='value'selected disabled>Select Option Name</option>");for(let a=0;a<t.length;a++)$(`#custommValidationSelection_${e}`).append(new Option(t[a],t[a]))}else $(`#custommValidationSelection_${e}`).empty(),$(`#custommValidationSelection_${e}`).append("<option value='value'selected disabled>Select Option Name</option>"),$(`#custommValidationSelection_${e}`).append(new Option(t,t));reloadCustomValidation(e)}function n(e,t,a,n){$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"fetch_custom_messages",element_id:t,message:e},type:"POST",dataType:"json",success:function(o){var l="",i="";o.data.custom_messages&&(l=o.data.custom_messages.message,i=o.data.custom_messages.icon),"custom_val_applied_message"==e?(iconHtml="",i&&(iconHtml=`<i class="${i}" style="border: 0 !important;"></i>`),Swal.fire({icon:"success",iconHtml:iconHtml,text:l||"Custom Validation applied successfully!"}),$(`#customValidationList${t}`).attr("value",o.reload_custom_validation),$(`#customValidationList1${t}`).attr("value",o.reload_custom_validation)):"custom_val_removed_message"==e?$(`#customValidationList${t}`).attr("value")?($(`#customValidationList${t}`).attr("value",""),$(`#customValidationList1${t}`).attr("value",""),iconHtml="",i&&(iconHtml=`<i class="${i}" style="border: 0 !important;"></i>`),Swal.fire({icon:"success",iconHtml:iconHtml,text:l||"Custom Validation removed successfully!"})):Swal.fire({icon:"warning",text:"No custom validation is set."}):"custom_val_load_message"==e?(iconHtml="",i&&(iconHtml=`<i class="${i}" style="border: 0 !important;"></i>`),Swal.fire({title:a,icon:"question",iconHtml:iconHtml,text:l||`Do you wish to load the ${a} configuration?\n\n Click 'Yes' to confirm or click 'No' if you do not wish to load it.`,showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then(e=>{e.isConfirmed&&$.ajax({url:`/users/${urlPath}/constriant_get_data/`,data:{elementID:t,operation:"reload_config_mapper"},type:"POST",dataType:"json",success:function(e){if(Object.prototype.hasOwnProperty.call(e,"reload_custom_validation")&&e.reload_custom_validation){const n=JSON.parse(e.reload_custom_validation);$.ajax({url:`/users/${urlPath}/constriant_get_data/`,data:{model_name:a,operation:"custom_conditional_table"},type:"POST",dataType:"json",success:function(e){$(`#custommValidationSelection_${t}`).val(a).trigger("change");for(const l of n[a]){const a=l.column_name,n=e.form_fields[a];function o(){$(this).closest("tr").remove()}$(`#custom_validation_table_${t}`).append(n),$(`#custom_validation_table_${t} tr`).eq(-1).find("td").eq(3).find("div").find("select").removeAttr("onchange"),$(`#custom_validation_table_${t} tr`).eq(-1).find("select").each(function(){parent=$(this).parent(),$(this).select2({dropdownParent:parent})}),$(`#custom_validation_table_${t} tr`).eq(-1).find("td").eq(1).find("div").find("input").val(l.constraint_name).trigger("change"),$(`#custom_validation_table_${t} tr`).eq(-1).find("td").eq(2).find("div").find("input").val(l.rule_set).trigger("change"),$(`#custom_validation_table_${t} tr`).eq(-1).find("td").eq(3).find("div").find("select").val(l.condition_name).trigger("change"),$(`#custom_validation_table_${t} tr`).eq(-1).find("td").eq(4).find("div").find("input").val(l.input_value).trigger("change"),$(".remove_filter").on("click",o)}if(n.hasOwnProperty("Master_filter"))for(const a of n.Master_filter){const n=a.column_name,l=e.form_fields_master[n];function o(){$(this).closest("tr").remove()}$(`#custom_validation_table_${t}`).append(l),$(`#custom_validation_table_${t} tr`).eq(-1).find("td").eq(3).find("div").find("select").attr("data-data",a.input_value),$(`#custom_validation_table_${t} tr`).eq(-1).find("select").each(function(){parent=$(this).parent(),$(this).select2({dropdownParent:parent})}),$(`#custom_validation_table_${t} tr`).eq(-1).find("td").eq(1).find("div").find("input").val(a.constraint_name).trigger("change"),$(`#custom_validation_table_${t} tr`).eq(-1).find("td").eq(2).find("div").find("input").val(a.rule_set).trigger("change"),$(`#custom_validation_table_${t} tr`).eq(-1).find("td").eq(3).find("div").find("select").val(a.table_name).trigger("change"),$(".remove_filter").on("click",o)}},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})})):"custom_val_delete_message"==e&&(iconHtml="",i&&(iconHtml=`<i class="${i}" style="border: 0 !important;"></i>`),Swal.fire({title:n,icon:"question",iconHtml:iconHtml,text:l||`Do you wish to delete ${n} configuration ?`,showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then(e=>{e.isConfirmed&&$.ajax({url:`/users/${urlPath}/constriant_get_data/`,data:{elementID:t,field_delete_name:n,operation:"delete_custom_validation"},type:"POST",dataType:"json",success:function(e){reloadCustomValidation(t)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}))},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}function o(e){$.ajax({url:`/users/${urlPath}/constriant_get_data/`,data:{elementID:e,operation:"reload_config_mapper"},type:"POST",dataType:"json",success:function(t){Object.prototype.hasOwnProperty.call(t,"reload_custom_validation")&&t.reload_custom_validation&&n("custom_val_applied_message",e)},error:function(){Swal.fire({icon:"error",text:"Error! Failure in applying custom validation. Please try again."})}})}function l(){_=$(this).attr("data-elementID"),$(`.columnconfiguremapper[data-elementid=${_}]`).prop("disabled",!0),$(`#Columnmapper${_}`).on("select2:select",function(){null!=$(this).val()&&$(`input[data-file-id=${_}]`).val()&&($(`.columnconfiguremapper[data-elementid=${_}]`).prop("disabled",!1),$(`.saveConfigMapper[data-elementid=${_}]`).prop("disabled",!1))});let e=$(this).attr("data-table-name");if(e.startsWith("[")&&(e=JSON.parse(e)),$(`#Columnmapper${_}`).select2(),e.constructor===Array){$(`#Columnmapper${_}`).empty(),$(`#Columnmapper${_}`).append("<option value='value'selected disabled>Select Option Name</option>");for(let t=0;t<e.length;t++)$(`#Columnmapper${_}`).append(new Option(e[t],e[t]))}else $(`#Columnmapper${_}`).empty(),$(`#Columnmapper${_}`).append("<option value='value'selected disabled>Select Option Name</option>"),$(`#Columnmapper${_}`).append(new Option(e,e));let t=!1;$(`#columnmapperDict${_}`).attr("data-edit")?p(_,t):(t=!0,p(_,t))}function i(){_=$(this).attr("data-elementID"),$(`.columnconfiguremapperBU[data-elementID=${_}]`).prop("disabled",!0),$(`#ColumnmapperBU${_}`).on("select2:select",function(){null!=$(this).val()&&$(`input[data-file-id-bk=${_}]`).val()&&($(`.columnconfiguremapperBU[data-elementID=${_}]`).prop("disabled",!1),$(`.saveConfigMapperBU[data-elementID=${_}]`).prop("disabled",!1))});let e=$(this).attr("data-table-name");if(e.startsWith("[")&&(e=JSON.parse(e)),$(`#ColumnmapperBU${_}`).select2(),e.constructor===Array){$(`#ColumnmapperBU${_}`).empty(),$(`#ColumnmapperBU${_}`).append("<option value='value'selected disabled>Select table</option>");for(let t=0;t<e.length;t++)$(`#ColumnmapperBU${_}`).append(new Option(e[t],e[t]))}else $(`#ColumnmapperBU${_}`).empty(),$(`#ColumnmapperBU${_}`).append("<option value='value'selected disabled>Select table</option>"),$(`#ColumnmapperBU${_}`).append(new Option(e,e))}function r(){_=$(this).attr("data-elementid"),b=new FormData($(`form[data-form-id=uploadfileform${_}]`)[0]),b.append("operation","columnmapper_global"),h=$(this).parent().parent().find("select").val(),b.append("table_name",h),b.append("elementID",_);const e=$(`form[data-form-id=uploadfileform${_}]`).find("input[type=file]").val();$(".saveConfigMapper").css("display","none"),$.ajaxSetup({beforeSend:function(e,t){e.setRequestHeader("X-CSRFToken",ctoken)}}),e?$.ajax({url:`/users/${urlPath}/constriant_get_data/`,cache:!1,contentType:!1,processData:!1,data:b,type:"POST",dataType:"json",success:function(e){$(`.submitconfigmapper[data-elementid=${_}]`).css("display","none"),$(`#modal-table-head${_}`).css("display","block"),$(`#modal-table-head-done${_}`).css("display","none"),$(`#modal-table-body-columnmapper${_}`).empty(),g=e.columnlist;let t=0;for(const a of e.columnlist){let n="";n+=`<th id="Columnmapper1${_}_${[t]}">${a}</th>`,n+=`<td ><select id="Columnmapper${_}_${[t]}" class="select2 form-control" name="Columnmapper"  data-placeholder="Column Mapper" >\n\n                    </select></td>`,$(`#modal-table-body-columnmapper${_}`).append("<tr>"+n+"</tr>"),$(`#modal-table-body-columnmapper${_}`).find(".select2").select2({width:"100%"});for(let a=0;a<e.columnlist1.length;a++)$(`#Columnmapper${_}_${[t]}`).append(new Option(e.columnlist1[a],e.columnlist1[a]));$(`#Columnmapper${_}_${[t]}`).val(a).trigger("change"),t++}$(`.savecolumnconfiguremapper[data-elementID=${_}]`).css("display","block"),$(`#columnmapperDict${_}`).attr("data-checker",!0)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}}):Swal.fire({icon:"error",text:"File not found."})}function s(){_=$(this).attr("data-elementID"),y=new FormData($(`form[data-form-id=uploadfileform123${_}]`)[0]),y.append("operation","columnmapper_global"),k=$(this).parent().parent().find("select").val(),y.append("table_name",k),y.append("elementID",_);const e=$(`form[data-form-id=uploadfileform123${_}]`).find("input[type=file]").val();$.ajaxSetup({beforeSend:function(e,t){e.setRequestHeader("X-CSRFToken",ctoken)}}),e?$.ajax({url:`/users/${urlPath}/constriant_get_data/`,cache:!1,contentType:!1,processData:!1,data:y,type:"POST",dataType:"json",success:function(e){$(`#modal-table-headBU${_}`).css("display","block"),$(`#modal-table-head-doneBU${_}`).css("display","none"),$(`#modal-table-body-columnmapperBU${_}`).empty(),v=e.columnlist;let t=0;for(const a of e.columnlist){let n="";n+=`<th id="Columnmapper1${_}_${[t]}">${a}</th>`,n+=`<td ><select id="ColumnmapperBU${_}_${[t]}" class="select2 form-control" name="Columnmapper"  data-placeholder="Column Mapper" >\n  \n                      </select></td>`,$(`#modal-table-body-columnmapperBU${_}`).append("<tr>"+n+"</tr>"),$(`#modal-table-body-columnmapperBU${_}`).find(".select2").select2({width:"100%"});for(let a=0;a<e.columnlist1.length;a++)$(`#ColumnmapperBU${_}_${[t]}`).append(new Option(e.columnlist1[a],e.columnlist1[a]));$(`#ColumnmapperBU${_}_${[t]}`).val(a).trigger("change"),t++}$(`#columnmapperDictBU${_}`).attr("data-checker",!0)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}}):Swal.fire({icon:"error",text:"File not found."})}function c(){_=$(this).attr("data-elementid");let e=[];const t=document.getElementById(`columnmapperDict${_}`).getAttribute("data-save-config");if(t&&"[]"!==String(t)){e=JSON.parse(t);for(let t=0;t<e.length;t++){const a=Object.keys(e[t]);if(a[0]===h){const a=e.indexOf(e[t]);e.splice(a,1)}}}const a={},n=[],o=[],l=[];for(let e=0;e<g.length;e++){const t={},a=$(`#Columnmapper1${_}_${[e]}`).html(),i=$(`#Columnmapper${_}_${[e]}`).val();"undefined"!==String(i)&&""!==i&&null!==i&&(o.includes(i)?($(`#samecolumnwarning${_}`).html(`${[i]} is already assigned to another column, please reconfigure the column mapper.`),l.push(!0),$(".saveConfigMapper").css("display","none")):(o.push(i),t[i]=a,n.push(t),l.push(!1)))}if(l.includes(!0))$(".saveConfigMapper").css("display","none");else{$(`#samecolumnwarning${_}`).empty(),$(`#modal-table-body-columnmapper${_}`).empty(),$(`#modal-table-head-done${_}`).css("display","block"),$(`#modal-table-head-done${_}`).empty();let t="";t+='<th style="text-align: center;font-weight:bold"  disabled>Table Name</th>',t+='<td style="text-align: center;font-weight:bold" disabled>Reconfigure</td>',t+='<td style="text-align: center;font-weight:bold" disabled>Apply</td>',$(`#modal-table-body-columnmapper${_}`).append("<tr>"+t+"</tr>");let o=document.getElementById(`columnmapperDict${_}`).getAttribute("value");if(o&&"[]"!==String(o)){o=JSON.parse(o);for(const e of o)if(String(Object.keys(e)[0])!==String(h)){const t=Object.keys(e)[0];let a="";a+=`<th style="text-align: center;">${t}</th>`,a+=`<td style="text-align: center;"><button type="button" class="btn-primary reconfigurecolumnmapper" name="${t}" id="reconfigurecolumnmapper_${t}"><i class="fas fa-trash"></i></button></td>`,a+=`<td style="align-items: center;"><div class="custom-control custom-checkbox " style="margin-left:45%" >\n              <input type="checkbox" class="applyConfig custom-control-input" name="${t}"  id=${t+_} data-elementid=${_} >\n              <label for=${t+_} class="custom-control-label">\n              </label>\n                </div></td>`,$(`#modal-table-body-columnmapper${_}`).append("<tr>"+a+"</tr>")}}let l="";l+=`<th style="text-align: center;">${[h]}</th>`,l+=`<td style="text-align: center;"><button type="button" class="btn-primary reconfigurecolumnmapper" name="${[h]}" id="reconfigurecolumnmapper_${[h]}"><i class="fas fa-trash"></i></button></td>`,l+=`<td style="align-items: center;"><div class="custom-control custom-checkbox " style="margin-left:45%" >\n\n              <input type="checkbox" class="applyConfig custom-control-input" name="${[h]}"  id=${[h]+_} data-elementid=${_} >\n              <label for=${[h]+_} class="custom-control-label">\n              </label>\n            </div></td>`,$("input[type=checkbox]").prop("checked",!1),$(`input[type=checkbox][name="${[h]}"]`).prop("checked",!0),$(`#modal-table-body-columnmapper${_}`).append("<tr>"+l+"</tr>"),a[h]=n,e.push(a),$(".applyConfig").change(function(){const e=$(this).attr("name");$(this).is(":checked")?$("input[type=checkbox]").each(function(){$(this).attr("name")===e?$(this).removeAttr("checked"):$(this).prop("checked",!1)}):$("input[type=checkbox]").each(function(){$("input[type=checkbox]").prop("checked",!1),$(`#columnmapperDict${_}`).attr("value","[]")})}),$(".reconfigurecolumnmapper").click(function(){$(`#samecolumnwarning${_}`).empty();const t=$(this).attr("name");$(`#Columnmapper${_}`).find(`option[value='${t}']`).removeAttr("disabled"),$(this).closest("tr").remove();for(let a=0;a<e.length;a++){const n=Object.keys(e[a]);if(String(n[0])===String(t)){const t=e.indexOf(e[a]);e.splice(t,1),$(`#columnmapperDict${_}`).attr("data-save-config",JSON.stringify(e))}}$(`#columnmapperDict${_}`).attr("data-edit","true")}),$(this).css("display","none"),$(".saveConfigMapper").css("display","block"),$(`.submitconfigmapper[data-elementid=${_}]`).css("display","block"),$(`#columnmapperDict${_}`).attr("data-save-config",JSON.stringify(e)),$(`#columnmapperDict${_}`).attr("data-edit","true"),$(`.saveConfigMapper[data-elementid=${_}]`).prop("disabled",!1),w=e}}function d(){_=$(this).attr("data-elementid");let e=[];const t=document.getElementById(`columnmapperDictBU${_}`).getAttribute("data-save-config");if(t&&"[]"!==String(t)){e=JSON.parse(t);for(let t=0;t<e.length;t++){const a=Object.keys(e[t]);if(a[0]===h){const a=e.indexOf(e[t]);e.splice(a,1)}}}const a={},n=[],o=[],l=[];for(let e=0;e<v.length;e++){const t={},a=$(`#Columnmapper1${_}_${[e]}`).html(),i=$(`#ColumnmapperBU${_}_${[e]}`).val();"undefined"!==String(i)&&""!==i&&null!==i&&(o.includes(i)?($(`#samecolumnwarningBU${_}`).html(`${[i]} is already assigned to another column, please reconfigure the column mapper.`),l.push(!0)):(o.push(i),t[i]=a,n.push(t),l.push(!1)))}l.includes(!0)||(a[k]=n,e.push(a),$(`#columnmapperDictBU${_}`).attr("value",JSON.stringify(e)),$(`#columnmapperDictBU${_}`).attr("data-edit","true"),$(`#columnMapperModalBU${_}`).modal("hide"),e)}function p(e,t){$.ajax({url:`/users/${urlPath}/constriant_get_data/`,data:{elementID:e,operation:"reload_config_mapper"},type:"POST",dataType:"json",success:function(a){if(a.reload_data&&!0===t){x=JSON.parse(a.reload_data),$(`#samecolumnwarning${e}`).empty(),$(`#modal-table-body-columnmapper${e}`).empty(),$(`#modal-table-head-done${e}`).css("display","block"),$(`#modal-table-head-done${e}`).empty();let t="";t+='<th style="text-align: center;font-weight:bold" disabled>Table Name</th>',t+='<td style="text-align: center;font-weight:bold" disabled>Reconfigure</td>',t+='<td style="text-align: center;font-weight:bold" disabled>Apply</td>',$(`#modal-table-body-columnmapper${e}`).append("<tr>"+t+"</tr>");for(const t of x){let a="";a+=`<th style="text-align: center;">${Object.keys(t)[0]}</th>`,a+=`<td style="text-align: center;"><button type="button" class="btn-primary reconfigurecolumnmapper" name="${Object.keys(t)[0]}" id="reconfigurecolumnmapper_${Object.keys(t)[0]}"><i class="fas fa-trash"></i></button></td>`,a+=`<td style="align-items: center;"><div class="custom-control custom-checkbox " style="margin-left:45%" >\n                   <input type="checkbox" class="applyConfig custom-control-input" name="${Object.keys(t)[0]}"  id=${Object.keys(t)[0]+e} data-elementid=${e} >\n                   <label for=${Object.keys(t)[0]+e} class="custom-control-label">\n                   </label>\n                 </div></td>`,$(`#modal-table-body-columnmapper${e}`).append("<tr>"+a+"</tr>")}S&&$(`input[type=checkbox][name=${S}]`).prop("checked",!0),$(".reconfigurecolumnmapper").click(function(){$(`#samecolumnwarning${e}`).empty();const t=$(this).attr("name");$(`#Columnmapper${e}`).find(`option[value='${t}']`).removeAttr("disabled"),$(this).closest("tr").remove();for(let a=0;a<x.length;a++){const n=Object.keys(x[a]);if(n[0]===t){const t=x.indexOf(x[a]);x.splice(t,1),$(`#columnmapperDict${e}`).attr("value","[]"),$(`#columnmapperDict${e}`).attr("data-save-config",JSON.stringify(x))}}$(`.columnconfiguremapper[data-elementid=${e}]`).prop("disabled",!1),$(`.saveConfigMapper[data-elementid=${e}]`).prop("disabled",!1),$(`.loadConfigMapper[data-elementid=${e}]`).prop("disabled",!1)}),$(".applyConfig").change(function(){const t=$(this).attr("name");S=t,$(this).is(":checked")?$("input[type=checkbox]").each(function(){$(this).attr("name")===t?($(this).removeAttr("checked"),$(`.submitconfigmapper[data-elementid=${e}]`).css("display","block")):$(this).prop("checked",!1)}):$("input[type=checkbox]").each(function(){$("input[type=checkbox]").prop("checked",!1),$(`#columnmapperDict${e}`).attr("value","[]")})}),$(`#columnmapperDict${e}`).attr("data-has-reloaded","true")}},error:function(){Swal.fire({icon:"error",text:"Error! Failure in saving configuration. Please check your configuration and try again."})}})}function m(e){const t=x,a=JSON.parse($(`#columnmapperDict${e}`).attr("data-save-config"));for(const e of a)for(let a=0;a<t.length;a++){const n=Object.keys(t[a]);if(String(n[0])===String(Object.keys(e)[0])){const e=t.indexOf(t[a]);t.splice(e,1)}}if(t.length>0)for(const e of t)a.push(e);$.ajax({url:`/users/${urlPath}/constriant_get_data/`,data:{elementID:e,mapper_data:JSON.stringify(a),operation:"save_config_mapper"},type:"POST",dataType:"json",success:function(t){$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"fetch_upload_view_custom_messages",element_id:e,messages:JSON.stringify(["save_column_mapper_message"])},type:"POST",dataType:"json",success:function(e){message="",icon="",e.save_column_mapper_message&&(message=e.save_column_mapper_message.message,icon=e.save_column_mapper_message.icon),iconHtml="",icon&&(iconHtml=`<i class="${icon}" style="border: 0 !important;"></i>`),Swal.fire({icon:"success",iconHtml:iconHtml,text:message||"Configuration saved successfully!"})},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})},error:function(){Swal.fire({icon:"error",text:"Error! Failure in saving configuration. Please check your configuration and try again."})}})}function u(){_=$(this).attr("data-elementid"),$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"fetch_upload_view_custom_messages",element_id:_,messages:JSON.stringify(["submit_mapper_config_message","select_table_mapper_config_message"])},type:"POST",dataType:"json",success:function(e){const t=$(`input[type=checkbox][data-elementid=${_}]:checked`).attr("name");if(t)if(message="",icon="",e.submit_mapper_config_message&&(message=e.submit_mapper_config_message.message,icon=e.submit_mapper_config_message.icon),iconHtml="",icon&&(iconHtml=`<i class="${icon}" style="border: 0 !important;"></i>`),w.length>0){for(let e=0;e<w.length;e++){let a=Object.keys(w[e]);if(String(a[0])===String(t))$(`#columnmapperDict${_}`).attr("value",JSON.stringify([w[e]]));else for(let e=0;e<x.length;e++)a=Object.keys(x[e]),String(a[0])===String(t)&&$(`#columnmapperDict${_}`).attr("value",JSON.stringify([x[e]]))}Swal.fire({icon:"success",iconHtml:iconHtml,text:message||"Mapper configuration submitted successfully!"}),$(`#columnMapperModal${_}`).modal("hide")}else{for(let e=0;e<x.length;e++){const a=Object.keys(x[e]);String(a[0])===String(t)&&$(`#columnmapperDict${_}`).attr("value",JSON.stringify([x[e]]))}Swal.fire({icon:"success",iconHtml:iconHtml,text:message||"Mapper configuration submitted successfully!"}),$(`#columnMapperModal${_}`).modal("hide")}else message="",icon="",e.select_table_mapper_config_message&&(message=e.select_table_mapper_config_message.message,icon=e.select_table_mapper_config_message.icon),iconHtml="",icon&&(iconHtml=`<i class="${icon}" style="border: 0 !important;"></i>`),Swal.fire({icon:"warning",iconHtml:iconHtml,text:message||"Select the Table Name."})},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}function f(){_=$(this).attr("data-elementid");const e=new FormData($(`form[data-form-id=uploadfileform${_}]`)[0]);e.append("operation","columnmapper_global"),h=$(`input[type=checkbox][data-elementid=${_}]:checked`).attr("name"),"null"!==String(h)&&"undefined"!==String(h)||(h=$("select").val()),e.append("table_name",h),e.append("elementID",_);const t=$(`form[data-form-id=uploadfileform${_}]`).find("input[type=file]").val();h&&t?($(`.submitconfigmapper[data-elementid=${_}]`).css("display","none"),$.ajax({url:`/users/${urlPath}/constriant_get_data/`,cache:!1,contentType:!1,processData:!1,data:e,type:"POST",dataType:"json",success:function(e){e.saved_data&&e.saved_data.length>0&&$(`#columnmapperDict${_}`).attr("value",JSON.stringify(e.saved_data));for(const t of e.saved_data)if(String(h)===String(Object.keys(t)[0])){$(".saveConfigMapper").css("display","none"),$(`#modal-table-head${_}`).css("display","block"),$(`#modal-table-head-done${_}`).css("display","none"),$(`#modal-table-body-columnmapper${_}`).empty(),g=e.columnlist;let a=0;for(const t of e.columnlist){let n="";n+=`<th id="Columnmapper1${_}_${[a]}">${t}</th>`,n+=`<td ><select id="Columnmapper${_}_${[a]}" data-reload-value='${t}' class="select2 form-control" name="Columnmapper"  data-placeholder="Column Mapper" >\n                    </select></td>`,$(`#modal-table-body-columnmapper${_}`).append("<tr>"+n+"</tr>"),$(`#modal-table-body-columnmapper${_}`).find(".select2").select2({width:"100%"});for(let t=0;t<e.columnlist1.length;t++)$(`#Columnmapper${_}_${[a]}`).append(new Option(e.columnlist1[t],e.columnlist1[t]));$(`#Columnmapper${_}_${[a]}`).val(t).trigger("change"),a++}for(const e of t[h])$(`select[data-reload-value=${Object.values(e)[0]}]`).val(Object.keys(e)[0]).trigger("change");$(`.savecolumnconfiguremapper[data-elementID=${_}]`).css("display","block")}},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})):Swal.fire({icon:"warning",text:"No Table selected / File not found."})}let _="";$(".button_standard_save").click(e),$(".standard_button_click").click(t),$(".columnMapperButton").on("click",l),$(".submitconfigmapper").on("click",u),$(".columnconfiguremapper").on("click",r),$(".loadConfigMapper").on("click",f),$(".savecolumnconfiguremapper").on("click",c),$(".fieldUploadMapperButton").off("click").on("click",uploadmapperDev),$(".columnconfiguremapperdev").on("click",columnMapperDev),$(".savecolumnconfiguremapperdev").on("click",saveColumnMapperDev),$(".loadConfigMapperdev").on("click",loadConfigMapperDev),$(".columnMapperButtonBulkUpdate").on("click",i),$(".columnconfiguremapperBU").on("click",s),$(".savecolumnconfiguremapperBU").on("click",d),$(".saveConfigMapper").on("click",function(){_=$(this).attr("data-elementID"),m(_)}),$(".customValidationButton").on("click",a),$(".submitcustomvalidation").on("click",function(){_=$(this).attr("data-elementID"),o(_)}),$(".custom-file-input").on("change",function(e){var t="";for(let a=0;a<e.target.files.length;a++)t+=`${e.target.files[a].name} `;$(this).siblings(".custom-file-label").addClass("selected").html(t),$(this).siblings(".custom-file-label").attr("data-toggle","tooltip"),$(this).siblings(".custom-file-label").attr("title",t),$(this).attr("data-toggle","tooltip"),$(this).attr("title",t)}),$(document).on("click",".removecustomvalidation",function(){_=$(this).attr("data-elementID"),n("custom_val_removed_message",_)}),$(document).on("click",".editcustomexist_validation",function(){_=$(this).attr("data-element-id");const e=$(this).attr("name");n("custom_val_load_message",_,e)}),$(document).on("click",".reconfigurecustomvalidation",function(){_=$(this).attr("data-element-id");const e=$(this).attr("name");n("custom_val_delete_message",_,null,e)});var b="",g=[],h="",y="",v=[],k="",w=[],x=[],S=""}function conditionalTable(e){$(`#custom_validation_table_${e}`).empty(),$(`#condition_dropdown${e}`).empty(),$(`#condition_dropdown1${e}`).empty(),$.ajax({url:`/users/${urlPath}/constriant_get_data/`,data:{model_name:$(`#custommValidationSelection_${e}`).val(),operation:"custom_conditional_table"},type:"POST",dataType:"json",success:function(t){const a=t.label_columns;$(`#condition_dropdown${e}`).empty(),$(`#condition_dropdown1${e}`).empty();for(const[t,n]of Object.entries(a))$(`#condition_dropdown${e}`).append('<li class="dropdown-item"><a href="javascript:void(0)" name='+t+' class="filter_btn">'+n+"</a></li>"),$(`#condition_dropdown1${e}`).append('<li class="dropdown-item"><a href="javascript:void(0)" name='+t+' class="filter_btn_master" style="color:var(--primary-color);font-size:11px;">'+n+"</a></li>");$(".filter_btn").click(function(){function a(){$(this).closest("tr").remove()}const n=$(this).attr("name"),o=t.form_fields[n];$(`#custom_validation_table_${e}`).append(o),$(`#custom_validation_table_${e} tr`).eq(-1).find("select").each(function(){parent=$(this).parent(),$(this).select2({dropdownParent:parent})}),$(".remove_filter").on("click",a)}),$(".filter_btn_master").click(function(){function a(){$(this).closest("tr").remove()}const n=$(this).attr("name"),o=t.form_fields_master[n];$(`#custom_validation_table_${e}`).append(o),$(`#custom_validation_table_${e} tr`).eq(-1).find("select").each(function(){parent=$(this).parent(),$(this).select2({dropdownParent:parent})}),$(".remove_filter").on("click",a)})},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}function saveCustomValidation(e){const t={},a=[];let n=[],o=!1;$(`#custom_validation_table_${e}`).find("tr:not(.master_filter)").each(function(){const e={},t=$(this).find("td").find("input[name='Constraint_name']").val(),n=$(this).find("td").find("input[name='Rule_set']").val();e.column_name=$(this).find("td").find(".select2bs4").attr("name"),e.condition_name=$(this).find("td").find(".select2bs4 option:selected").val(),e.input_value=$(this).find("td").eq(4).find("div").find("input").val(),e.constraint_name=t,e.rule_set=n,t||n||(o=!0),a.push(e)}),t[$(`#custommValidationSelection_${e}`).val()]=a,$(`#custom_validation_table_${e}`).find("tr.master_filter").each(function(){const e={},t=$(this).find("td").find("input[name='Constraint_name']").val(),a=$(this).find("td").find("input[name='Rule_set']").val();e.column_name=$(this).find("td").find(".select2bs4").attr("name"),e.condition_name="Isin",e.input_value=$(this).find("td").find(".master_column_vals").val(),e.constraint_name=t,e.rule_set=a,e.table_name=$(this).find("td").find(".master_col_table").val(),t||a||(o=!0),n.push(e)}),t.Master_filter=n,o?Swal.fire({icon:"warning",text:"Constraint Name and Rule Set are mandatory to proceed further."}):$.ajax({url:`/users/${urlPath}/constriant_get_data/`,data:{model_name:$(`#custommValidationSelection_${e}`).val(),elementID:e,custom_validation_data:JSON.stringify(t),operation:"save_custom_validation"},type:"POST",dataType:"json",success:function(t){iconHtml="",t.custom_icon&&(iconHtml=`<i class="${t.custom_icon}" style="border: 0 !important;"></i>`),Swal.fire({icon:"success",iconHtml:iconHtml,text:t.custom_msg||"Custom validation configuration saved successfully!"}),$(`.carousel-control-prev[href='#carouselCustomValidation${e}']`).click(),setTimeout(function(){reloadCustomValidation(e)},250)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}function reloadCustomValidation(e){$.ajax({url:`/users/${urlPath}/constriant_get_data/`,data:{elementID:e,operation:"reload_config_mapper"},type:"POST",dataType:"json",success:function(t){if(Object.prototype.hasOwnProperty.call(t,"reload_custom_validation")&&t.reload_custom_validation){const a=JSON.parse(t.reload_custom_validation);$(`#configuration_val_row_${e}`).empty();let n="",o=1;for(const t in a)"Master_filter"!=t&&(n+=`<tr> <td>${o}</td> <td value='${t}'>${t}</td> <td><button type="button" class="btn-primary reconfigurecustomvalidation" name="${t}" data-element-id="${e}" id="reconfigurecustomvalidation_${t}"><i class="fas fa-trash"></i></button> <button type="button" class="btn-primary editcustomexist_validation" name="${t}" data-element-id="${e}" href="#carouselCustomValidation${e}" data-slide="next" id="editcustomexist_validation_${t}"><i class="fas fa-edit"></i></button></td></tr>`,o++);$(`#configuration_val_row_${e}`).append(n),$(`#customValidationList${e}`).attr("value",t.reload_custom_validation),$(`#customValidationList1${e}`).attr("value",t.reload_custom_validation)}},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}function setSheetName(e){const t=$(`#sheetNameChange_content${e}`).find("tr").find("td").eq(0).text(),a=$(`#configure_sheet${e}`).val(),n={};n[t]=a,$(`#edit_upload_save${e}`).attr("data-sheet-details",JSON.stringify(n)),$(`#edit_upload_save${e}`).click()}function setSkipSheetName(e){let t=[$(`#sheetNameChange_content${e}`).find("tr").find("td").eq(0).text()];if($(`#SkipSheetInfo${e}`).attr("data-skip-sheet")){let a=$(`#SkipSheetInfo${e}`).attr("data-skip-sheet");a&&(a=JSON.parse(a),t=[...t,...a])}$(`#SkipSheetInfo${e}`).attr("data-skip-sheet",JSON.stringify(t)),$(`#edit_upload_save${e}`).click()}function UploadDatafunc(e,t){const a=windowLocationAttr.href.includes("multiupload/");var n=$(`#advance_pandas_settings_upload${t}`).attr("data-config");n||(n="{}"),e.append("import_engine_config",n);let o="";if("false"===String(a)){if(o=windowLocationAttr.href+"multiupload/",!o.includes("Pr")){const e=t;for(let t=0;t<item_code_list.length;t++)if(Object.prototype.hasOwnProperty.call(item_code_list[t],e)){const a=item_code_list[t][e];o=`/users/${urlPath}/`+a+"/multiupload/";break}}}else if(o=windowLocationAttr.href,!o.includes("Pr")){const e=t;for(let t=0;t<item_code_list.length;t++)if(Object.prototype.hasOwnProperty.call(item_code_list[t],e)){const a=item_code_list[t][e];o=`/users/${urlPath}/`+a+"/";break}}""!=$(`#find_replace_${t}`).attr("data-final-index")&&e.append("edited_index",$(`#find_replace_${t}`).attr("data-final-index"));var l={};$(".select_dash_null").each(function(){for(i in l[$(this).attr("data-tablename")]||(l[$(this).attr("data-tablename")]={}),$(this).val())l[$(this).attr("data-tablename")][$(this).val()[i]]=$(this).parent().find(".select_dash_value").val()}),e.append("dash_null_dict",JSON.stringify(l)),
"true"==$(`#uploadButton3_preview${t}`).attr("ignore_ne")?(e.append("dup_col_check_dict","true"),$(`#uploadButton3_preview${t}`).attr("ignore_ne","false")):e.append("dup_col_check_dict","false"),$.ajax({url:o,data:e,contentType:!1,cache:!1,async:!1,processData:!1,type:"POST",dataType:"json",success:function(e){if(Object.prototype.hasOwnProperty.call(e,"no_file_found"))windowLocationAttr.reload();else if(Object.prototype.hasOwnProperty.call(e,"dup_col_exists"))$(`#bulk_upload_in_progress_${t}`).removeClass("show"),$("body").css("pointer-events","auto"),Swal.fire({icon:"warning",text:"The uploaded file contains columns that do not exist in the table. The data in these columns will not be considered. Do you still want to proceed?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Yes",denyButtonText:"No"}).then(e=>{e.isConfirmed?($(`#uploadButton3_preview${t}`).attr("ignore_ne","false"),$(`#uploadButton3_preview${t}`).trigger("click")):$(`#uploadButton3_preview${t}`).attr("ignore_ne","true")});else if(Object.prototype.hasOwnProperty.call(e,"changeSheetName")){$(`#edit_upload_save${t}`).removeAttr("data-sheet-details");const a=e.changesheet,n=e.result_listt;if($(`#sheetNameChange_content${t}`).find("tr").find("td").eq(0).text(a).trigger("change"),$(`#configure_sheet${t}`).empty(),$(`#configure_sheet${t}`).append("<option value=' '> Select Table Name</option>"),n)for(const e of n)$(`#configure_sheet${t}`).append(`<option value='${e}'>${e}</option>`);setTimeout(function(){$(`#sheetNameChangeModal${t}`).modal("show")},1200),$(`#configure_sheet${t}`).select2({dropdownParent:$(`#sheetNameChangeModal${t}`),theme:"classic",width:"90%"})}else if(Object.prototype.hasOwnProperty.call(e,"sheetname")){const a=JSON.parse(e.sheetname);Object.prototype.hasOwnProperty.call(e,"job_id")&&Swal.fire({icon:"success",text:`Validations successful! Uploading in progress for sheet ${a[a.length-1]}...`}),$(`#edit_upload_save${t}`).attr("sheetname",e.sheetname),$(`#edit_upload_save${t}`).removeAttr("data-edit"),$(`#edit_upload_save${t}`).click()}else{const a=JSON.parse(e.columns_header);if($(`#find_replace_${t}`).attr("data-table-name",e.current_table_name),Object.prototype.hasOwnProperty.call(e,"model_status")){$(`#bulk_upload_in_progress_${t}`).removeClass("show"),$("body").css("pointer-events","auto"),$(`#edit_upload_modal${t}`).modal("show"),$(`#EditModalTab${t} li:last`).css("display","none"),$(`#EditModalTab${t} a[href="#upload_error_tab${t}"]`).tab("show");const n=["created_date","modified_by","modified_date","created_by","Error_Details","total_error_count","transaction_id"];let o="";for(let e=0;e<a.length;e++)!1===n.includes(a[e])&&(o+=`<th value=${a[e]}>${a[e]}</th>`);let l="";if(Object.prototype.hasOwnProperty.call(e,"validation_list")){const t=JSON.parse(e.validation_list);for(const e of t){l+=`<tr><td>${Object.keys(e)[0]}</td>`;for(let t=0;t<a.length;t++)!1===n.includes(a[t])&&(e[Object.keys(e)[0]].includes(a[t])?l+="<td ><i class='fa fa-window-close'  style='color:red;'></i></td>":l+="<td><i class='fa fa-check-circle' style='color:var(--primary-color);'></i></td>");l+="</tr>"}}let i="";if(Object.prototype.hasOwnProperty.call(e,"custom_condition_dict")&&"{}"!==String(e.custom_condition_dict)){const t=JSON.parse(e.custom_condition_dict);for(const e in t){i+=`<tr><td>${e}</td>`;for(let o=0;o<a.length;o++)if(!1===n.includes(a[o]))if(Object.keys(t[e]).includes(a[o])){const n={};n[a[o]]=t[e][a[o]],n[a[o]].length>0?i+=`<td><i class='fa fa-window-close error_highlight' data-target-index='${JSON.stringify(n)}' data-target-column='${a[o]}' style='color:red;cursor:pointer'></i></td>`:i+=`<td><i class='fa fa-check-circle'     data-target-column='${a[o]}' style='color:var(--primary-color);'></i></td>`}else i+=`<td><i class='fa fa-check-circle'     data-target-column='${a[o]}' style='color:var(--primary-color);'></i></td>`;i+="</tr>"}}$(`#upload_error_tab${t}`).find(".error_validation_upload_card_content").find(".card-body").find(`#error_upload_modal_datatable${t}`+"_wrapper").remove(),$(`#upload_error_tab${t}`).find(".error_validation_upload_card_content").find(".card-body").find(`#error_upload_modal_datatable${t}`).remove(),$(".error_summary_card").remove();const r=`\n          <table id="error_upload_modal_datatable${t}" class="row-border display table" style="width: 100%;">\n          <thead class="error_upload_header">\n            <th>Validation Type</th>\n            ${o}\n          </thead>\n          <tbody id="error_upload_content">\n            ${l}\n            ${i}\n          </tbody>\n          </table>`;if($(`#upload_error_tab${t}`).find(".error_validation_upload_card_content").find(".card-body").append(r),Object.prototype.hasOwnProperty.call(e,"error_val_count_dict")&&"{}"!==String(e.error_val_count_dict)){let o="",l="";const i=JSON.parse(e.error_val_count_dict);for(let e=0;e<a.length;e++)!1===n.includes(a[e])&&(o+=`<th value=${a[e]}> ${a[e]} </th>`);l+="<tr><td style='font-weight:bold'>Passed</td>";for(const e in i)!1===n.includes(e)&&(l+=`<td data-target-col='${i[e]}'>${i[e].Passed}</td>`);l+="</tr>",l+="<tr><td style='font-weight:bold'>Failed</td>";for(const e in i)!1===n.includes(e)&&(l+=`<td data-target-col='${i[e]}'>${i[e].Failed}</td>`);l+="</tr>",$(`#upload_error_tab${t}`).find(".error_validation_upload_card_content").find(".card-body").find(`#error_validation_count_modal_datatable${t}`+"_wrapper").remove(),$(`#upload_error_tab${t}`).find(".error_validation_upload_card_content").find(".card-body").find(`#error_validation_count_modal_datatable${t}`).remove();const r=`\n\n              <table id="error_validation_count_modal_datatable${t}" class="row-border display table" style="width: 100%;">\n\n              <thead class="error_validation_count_header">\n                <th> Status </th>\n                ${o}\n\n              </thead>\n              <tbody id="error_validation_count_content"  style="overflow-x: scroll;max-width: 200px;">\n              ${l}\n\n              </tbody>\n          </table>\n              `;$(`#upload_error_tab${t}`).find(".error_validation_upload_card_content").find(".card-body").append(r)}Object.prototype.hasOwnProperty.call(e,"job_id")?$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"fetch_upload_view_custom_messages",element_id:t,messages:JSON.stringify(["successful_validation_message","successful_upload_message"])},type:"POST",dataType:"json",success:function(t){message="",icon="",t.successful_validation_message&&(message=t.successful_validation_message.message,icon=t.successful_validation_message.icon),iconHtml="",icon&&(iconHtml=`<i class="${icon}" style="border: 0 !important;"></i>`),Swal.fire({icon:"success",iconHtml:iconHtml,text:message||"Validations successful! Uploading in progress...\n You may continue with other tasks. You`ll be notified via the notification bell on successful upload."});let a=e.job_id,n="ws://";"https:"===windowLocationAttr.protocol&&(n="wss://");let o=new WebSocket(n+windowLocationAttr.host+`/ws/queued_upload_output/${a}/`);o.onmessage=function(a){let n=JSON.parse(a.data);if("done"===n.message){message="",icon="",t.successful_upload_message&&(message=t.successful_upload_message.message,icon=t.successful_upload_message.icon),iconHtml="",icon&&(iconHtml=`<i class="${icon}" style="border: 0 !important;"></i>`);let a="Upload successful!";if(void 0!==e.sheet_list){var o=JSON.parse(e.sheet_list);o.forEach(function(e,t){a+=e,t<o.length-1&&(a+=", ")})}Swal.fire({icon:"success",iconHtml:iconHtml,text:message||a}).then(e=>{e.isConfirmed&&windowLocationAttr.reload()})}}},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}}):$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"fetch_upload_view_custom_messages",element_id:t,messages:JSON.stringify(["successful_upload_message"])},type:"POST",dataType:"json",success:function(e){message="",icon="",e.successful_upload&&(message=e.successful_upload.message,icon=e.successful_upload.icon),iconHtml="",icon&&(iconHtml=`<i class="${icon}" style="border: 0 !important;"></i>`),Swal.fire({icon:"success",iconHtml:iconHtml,text:message||"Upload successful!"}).then(e=>{e.isConfirmed&&windowLocationAttr.reload()})},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}else{$(`#EditModalTab${t} a[href="#edit_data_tab${t}"]`).removeClass("disabled");const a=JSON.parse(e.result),n=JSON.parse(e.columns_header),o=e.stored_updated_data;let l="",i="";for(let e=0;e<n.length;e++)"Error_Details"!==String(n[e])&&(l+=`<th value=${n[e]}>${n[e]}</th>`);$(`#bulk_upload_in_progress_${t}`).removeClass("show"),$("body").css("pointer-events","auto"),$(`#edit_upload_modal${t}`).modal("show"),$(`#EditModalTab${t} a[href="#upload_error_tab${t}"]`).tab("show"),$(`#edit_upload_modal_datatable${t}`+"_wrapper").remove(),$(`#edit_upload_modal_datatable${t}`).remove(),$(`#upload_error_tab${t}`).find(".error_validation_upload_card_content").find(".error_validation_upload_content").find(`#error_upload_modal_datatable${t}`+"_wrapper").remove(),$(`#upload_error_tab${t}`).find(".error_validation_upload_card_content").find(".error_validation_upload_content").find(`#error_upload_modal_datatable${t}`).remove(),$(".error_summary_card").remove(),$(`#edit_upload_save${t}`).attr("data-edit",o),""==$(`#find_replace_${t}`).attr("data-final-index")&&$(`#find_replace_${t}`).attr("data-final-index",e.error_report_index);for(let e=0;e<Object.keys(a).length;e++){i+=`<tr data-index=${Object.keys(a)[e]}>`;const t=Object.keys(a)[e];for(let e=0;e<Object.keys(a[t]).length;e++)"Error_Details"!==String(Object.keys(a[t])[e])&&(i+=`<td data-key='${Object.keys(a[t])[e]}' style='text-align:center' contenteditable ">${a[t][Object.keys(a[t])[e]]}</td>`);i+="</tr>"}let r="";if(Object.prototype.hasOwnProperty.call(e,"validation_list")){const t=JSON.parse(e.validation_list),a=JSON.parse(e.navigation_list);for(const e of t){r+=`<tr><td>${Object.keys(e)[0]}</td>`;for(let t=0;t<n.length-1;t++)e[Object.keys(e)[0]].includes(n[t])?r+=`<td><i class='fa fa-window-close error_highlight' data-target-index='${JSON.stringify(a[Object.keys(e)[0]])}' data-target-column='${n[t]}' style='color:red;cursor:pointer'></i></td>`:r+=`<td><i class='fa fa-check-circle'  data-target-column='${n[t]}' style='color:var(--primary-color);'></i></td>`;r+="</tr>"}}let s="";if(Object.prototype.hasOwnProperty.call(e,"custom_validation_list")&&"{}"!==String(e.custom_validation_list)){const t=JSON.parse(e.custom_validation_list);for(const e in t){s+=`<tr><td>${e}</td>`;for(let a=0;a<n.length-1;a++)if(Object.keys(t[e]).includes(n[a])){const o={};o[n[a]]=t[e][n[a]],o[n[a]].length>0?s+=`<td><i class='fa fa-window-close error_highlight' data-target-index='${JSON.stringify(o)}' data-target-column='${n[a]}' style='color:red;cursor:pointer'></i></td>`:s+=`<td><i class='fa fa-check-circle'     data-target-column='${n[a]}' style='color:var(--primary-color);'></i></td>`}else s+=`<td><i class='fa fa-check-circle'     data-target-column='${n[a]}' style='color:var(--primary-color);'></i></td>`;s+="</tr>"}}const c=`\n            <table id="error_upload_modal_datatable${t}" class="row-border display table" style="width: 100%;">\n            <thead class="error_upload_header">\n              <th>Validation Type</th>\n              ${l}\n            </thead>\n            <tbody id="error_upload_content">\n              ${r}\n              ${s}\n            </tbody>\n            </table>`;if($(`#upload_error_tab${t}`).find(".error_validation_upload_card_content").find(".card-body").append(c),Object.prototype.hasOwnProperty.call(e,"error_validation_count")&&"{}"!==String(e.error_validation_count)){let a="",o="";const l=["Error_Details","total_error_count"],i=JSON.parse(e.error_validation_count);for(let e=0;e<n.length;e++)"Error_Details"!==String(n[e])&&(a+=`<th value=${n[e]}> ${n[e]} </th>`);o+="<tr><td style='font-weight:bold'>Passed</td>";for(const e in i)!1===l.includes(e)&&(o+=`<td data-target-col='${i[e]}'>${i[e].Passed}</td>`);o+="</tr>",o+="<tr><td style='font-weight:bold'>Failed</td>";for(const e in i)!1===l.includes(e)&&(o+=`<td data-target-col='${i[e]}'>${i[e].Failed}</td>`);o+="</tr>",$(`#upload_error_tab${t}`).find(".error_validation_upload_card_content").find(".card-body").find(`#error_validation_count_modal_datatable${t}`+"_wrapper").remove(),$(`#upload_error_tab${t}`).find(".error_validation_upload_card_content").find(".card-body").find(`#error_validation_count_modal_datatable${t}`).remove();const r=`\n\n                <table id="error_validation_count_modal_datatable${t}" class="row-border display table" style="width: 100%;">\n\n                <thead class="error_validation_count_header" >\n                <th> Status </th>\n                ${a}\n\n                </thead>\n                <tbody id="error_validation_count_content"  style="overflow-x: scroll;max-width: 200px;">\n                ${o}\n                </tbody>\n                </table>`;$(`#upload_error_tab${t}`).find(".error_validation_upload_card_content").find(".card-body").append(r)}$(document).on("click",".error_highlight",function(){$(`#EditModalTab${t} a[href="#edit_data_tab${t}"]`).tab("show");const e=$(this).attr("data-target-column"),a=JSON.parse($(this).attr("data-target-index"));$(`#edit_upload_modal_datatable${t}`).find("#edit_upload_content").find("tr").find("td").css("background","white");for(let o=0;o<Object.keys(a).length;o++)if(String(Object.keys(a)[o])===String(e))for(let l=0;l<a[Object.keys(a)[o]].length;l++){const i=n.indexOf(e);$(`#edit_upload_modal_datatable${t}`).find("#edit_upload_content").find(`tr[data-index="${a[Object.keys(a)[o]][l]}"`).find("td").eq(i).css("background","pink")}$(`#edit_upload_modal_datatable${t}`).DataTable().columns.adjust()});let d="";if(Object.prototype.hasOwnProperty.call(e,"error_details")){d+="<ul>";const t=JSON.parse(e.error_details);for(let e=0;e<t.length;e++)d+=`<li style='list-style-type: square;text-align: start;color:darkred'>${t[e]}</li><br>`;d+="</ul><br>"}const p=`\n            <table id="edit_upload_modal_datatable${t}" class="row-border display " style="width: 100%;">\n                <thead class="edit_upload_header">\n                  ${l}\n                </thead>\n                <tbody id="edit_upload_content">\n                  ${i}\n                </tbody>\n              </table>`;$(`#edit_data_tab${t}`).append(p),$(`#upload_error_tab${t}`).append(`<div class="card error_summary_card card-default collapsed-card" style="margin-top:10px;">\n              <div class="card-header" style='background:#565a5e;'>\n                <h6 class="card-title" style='color:white;'>Summary</h6>\n                <div class="card-tools">\n                  <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i></button>\n                </div>\n              </div>\n              <div class="card-body validation_summary" style="max-height: 15rem;overflow-y:auto;">\n                  ${d}\n              </div>\n            </div>`)}$(`#error_validation_count_modal_datatable${t}`).DataTable({autoWidth:!0,scrollY:200,scrollX:100,scrollCollapse:!0,sScrollXInner:"100%",bInfo:!1,searching:!1,destroy:!0,bRetrieve:!0,bProcessing:!0,bDestroy:!0,ordering:!1,orderCellsTop:!0,responsive:!0,colReorder:{fixedColumns:!0},deferRender:!0,paging:!1,lengthMenu:[[1,5,50,-1],[1,5,50,"All"]],pageLength:50,buttons:[],columnDefs:[{width:"200px",targets:"_all",className:"dt-center allColumnClass all"},{targets:0,width:"2%",className:"noVis"}]}),$(`#edit_upload_modal_datatable${t}`).DataTable({autoWidth:!0,scrollY:200,scrollX:100,scrollCollapse:!0,sScrollXInner:"100%",bInfo:!1,searching:!1,destroy:!0,bRetrieve:!0,bProcessing:!0,bDestroy:!0,ordering:!1,orderCellsTop:!0,responsive:!0,colReorder:{fixedColumns:!0},deferRender:!0,paging:!1,lengthMenu:[[1,5,50,-1],[1,5,50,"All"]],pageLength:50,buttons:[],columnDefs:[{width:"200px",targets:"_all",className:"dt-center allColumnClass all"},{targets:0,width:"2%",className:"noVis"}]}),$(`#error_upload_modal_datatable${t}`).DataTable({autoWidth:!0,scrollY:200,scrollX:200,scrollCollapse:!0,sScrollXInner:"100%",bInfo:!1,searching:!1,destroy:!0,bRetrieve:!0,bProcessing:!0,bDestroy:!0,ordering:!1,orderCellsTop:!0,responsive:!0,colReorder:{fixedColumns:!0},deferRender:!0,paging:!1,lengthMenu:[[1,5,50,-1],[1,5,50,"All"]],pageLength:50,buttons:[],columnDefs:[{width:"200px",targets:"_all",className:"dt-center allColumnClass all"},{targets:0,width:"22%",className:"noVis"}]}),$(`#EditModalTab${t}`).on("click",function(){setTimeout(function(){$(`#edit_upload_modal_datatable${t}`).DataTable().columns.adjust(),$(`#error_upload_modal_datatable${t}`).DataTable().columns.adjust(),$(`#error_validation_count_modal_datatable${t}`).DataTable().columns.adjust()},500)}),$(`#edit_upload_modal_datatable${t}`).DataTable().columns.adjust(),$(`#error_upload_modal_datatable${t}`).DataTable().columns.adjust(),$(`#error_validation_count_modal_datatable${t}`).DataTable().columns.adjust()}},error:function(){$(`#bulk_upload_in_progress_${t}`).removeClass("show"),$("body").css("pointer-events","auto"),Swal.fire({icon:"error",text:"Error! Please try again."})}})}function uploadmapper(){const e=$(this).attr("data-elementID");$(`.columnconfiguremapper[data-elementid=${e}]`).prop("disabled",!0),$(`#Columnmapper${e}`).on("select2:select",function(){null!=$(this).val()&&$(`input[data-file-id=${e}]`).val()&&($(`.columnconfiguremapper[data-elementid=${e}]`).prop("disabled",!1),$(`.saveConfigMapper[data-elementid=${e}]`).prop("disabled",!1))});let t=$(this).attr("data-table-name");if(t.startsWith("[")&&(t=JSON.parse(t)),$(`#Columnmapper${e}`).select2(),t.constructor===Array){$(`#Columnmapper${e}`).empty(),$(`#Columnmapper${e}`).append("<option value='value'selected disabled>Select Option Name</option>");for(let a=0;a<t.length;a++)$(`#Columnmapper${e}`).append(new Option(t[a],t[a]))}else $(`#Columnmapper${e}`).empty(),$(`#Columnmapper${e}`).append("<option value='value'selected disabled>Select Option Name</option>"),$(`#Columnmapper${e}`).append(new Option(t,t));const a=!1;$(`#columnmapperDict${e}`).attr("data-edit"),reloadConfigData(e,a)}function columnMapper(){const e=$(this).attr("data-elementid"),t=new FormData($(`form[data-form-id=uploadfileform${e}]`)[0]);t.append("operation","columnmapper_global");let a=$(this).parent().parent().find("select").val();t.append("table_name",a),t.append("elementID",e);const n=$(`form[data-form-id=uploadfileform${e}]`).find("input[type=file]").val();$(".saveConfigMapper").css("display","none"),$.ajaxSetup({beforeSend:function(e,t){e.setRequestHeader("X-CSRFToken",ctoken)}}),n?$.ajax({url:`/users/${urlPath}/constriant_get_data/`,cache:!1,contentType:!1,processData:!1,data:t,type:"POST",dataType:"json",success:function(t){$(`.submitconfigmapper[data-elementid=${e}]`).css("display","none"),$(`#modal-table-head${e}`).css("display","block"),$(`#modal-table-head-done${e}`).css("display","none"),$(`#modal-table-body-columnmapper${e}`).empty(),columnsql=t.columnlist;let a=0;for(const n of t.columnlist){let o="";o+=`<th id="Columnmapper1${e}_${[a]}">${n}</th>`,o+=`<td ><select id="Columnmapper${e}_${[a]}" class="select2 form-control" name="Columnmapper"  data-placeholder="Column Mapper" >\n\n                    </select></td>`,$(`#modal-table-body-columnmapper${e}`).append("<tr>"+o+"</tr>"),$(`#modal-table-body-columnmapper${e}`).find(".select2").select2({width:"100%"});for(let n=0;n<t.columnlist1.length;n++)$(`#Columnmapper${e}_${[a]}`).append(new Option(t.columnlist1[n],t.columnlist1[n]));$(`#Columnmapper${e}_${[a]}`).val(n).trigger("change"),a++}$(`.savecolumnconfiguremapper[data-elementID=${e}]`).css("display","block"),$(`#columnmapperDict${e}`).attr("data-checker",!0)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}}):Swal.fire({icon:"warning",text:"File not found"})}function saveColumnMapper(){const e=$(this).attr("data-elementid");let t=[];const a=document.getElementById(`columnmapperDict${e}`).getAttribute("data-save-config");if(a&&"[]"!==String(a)){t=JSON.parse(a);for(let e=0;e<t.length;e++){const a=Object.keys(t[e]);if(a[0]===tableName){const a=t.indexOf(t[e]);t.splice(a,1)}}}const n={},o=[],l=[],i=[];for(let t=0;t<columnsql.length;t++){const a={},n=$(`#Columnmapper1${e}_${[t]}`).html(),r=$(`#Columnmapper${e}_${[t]}`).val();"undefined"!==String(r)&&""!==r&&"null"!==String(r)&&(l.includes(r)?($(`#samecolumnwarning${e}`).html(`${[r]} is already assigned to another column, please reconfigure the column mapper.`),i.push(!0),$(".saveConfigMapper").css("display","none")):(l.push(r),a[r]=n,o.push(a),i.push(!1)))}if(i.includes(!0))$(".saveConfigMapper").css("display","none");else{$(`#samecolumnwarning${e}`).empty(),$(`#modal-table-body-columnmapper${e}`).empty(),$(`#modal-table-head-done${e}`).css("display","block"),$(`#modal-table-head-done${e}`).empty();let a="";a+='<th style="text-align: center;font-weight:bold"  disabled>Table Name</th>',a+='<td style="text-align: center;font-weight:bold" disabled>Reconfigure</td>',a+='<td style="text-align: center;font-weight:bold" disabled>Apply</td>',$(`#modal-table-body-columnmapper${e}`).append("<tr>"+a+"</tr>");let l=document.getElementById(`columnmapperDict${e}`).getAttribute("value");if(l&&"[]"!==String(l)){l=JSON.parse(l);for(const t of l)if(String(Object.keys(t)[0])!==tableName){const a=Object.keys(t)[0];let n="";n+=`<th style="text-align: center;">${a}</th>`,n+=`<td style="text-align: center;"><button type="button" class="btn-primary reconfigurecolumnmapper" name="${a}" id="reconfigurecolumnmapper_${a}"><i class="fas fa-trash"></i></button></td>`,n+=`<td style="align-items: center;"><div class="custom-control custom-checkbox " style="margin-left:45%" >\n              <input type="checkbox" class="applyConfig custom-control-input" name="${a}"  id=${a+e} data-elementid=${e} >\n              <label for=${a+e} class="custom-control-label">\n              </label>\n                </div></td>`,$(`#modal-table-body-columnmapper${e}`).append("<tr>"+n+"</tr>")}}let i="";i+=`<th style="text-align: center;">${[tableName]}</th>`,i+=`<td style="text-align: center;"><button type="button" class="btn-primary reconfigurecolumnmapper" name="${[tableName]}" id="reconfigurecolumnmapper_${[tableName]}"><i class="fas fa-trash"></i></button></td>`,i+=`<td style="align-items: center;"><div class="custom-control custom-checkbox " style="margin-left:45%" >\n\n              <input type="checkbox" class="applyConfig custom-control-input" name="${[tableName]}"  id=${[tableName]+e} data-elementid=${e} >\n              <label for=${[tableName]+e} class="custom-control-label">\n              </label>\n            </div></td>`,$("input[type=checkbox]").prop("checked",!1),$(`input[type=checkbox][name="${[tableName]}"]`).prop("checked",!0),$(`#modal-table-body-columnmapper${e}`).append("<tr>"+i+"</tr>"),n[tableName]=o,t.push(n),$(".applyConfig").change(function(){const t=$(this).attr("name");$(this).is(":checked")?$("input[type=checkbox]").each(function(){$(this).attr("name")===t?$(this).removeAttr("checked"):$(this).prop("checked",!1)}):$("input[type=checkbox]").each(function(){$("input[type=checkbox]").prop("checked",!1),$(`#columnmapperDict${e}`).attr("value","[]")})}),$(".reconfigurecolumnmapper").click(function(){$(`#samecolumnwarning${e}`).empty();const a=$(this).attr("name");$(`#Columnmapper${e}`).find(`option[value='${a}']`).removeAttr("disabled"),$(this).closest("tr").remove();for(let n=0;n<t.length;n++){const o=Object.keys(t[n]);if(String(o[0])===String(a)){const a=t.indexOf(t[n]);t.splice(a,1),$(`#columnmapperDict${e}`).attr("data-save-config",JSON.stringify(t))}}$(`#columnmapperDict${e}`).attr("data-edit","true")}),$(this).css("display","none"),$(".saveConfigMapper").css("display","block"),$(`.submitconfigmapper[data-elementid=${e}]`).css("display","block"),$(`#columnmapperDict${e}`).attr("data-save-config",JSON.stringify(t)),$(`#columnmapperDict${e}`).attr("data-edit","true"),$(`.saveConfigMapper[data-elementid=${e}]`).prop("disabled",!1),submitFinalData=t}}function reloadConfigData(e,t){$.ajax({url:`/users/${urlPath}/constriant_get_data/`,data:{elementID:e,operation:"reload_config_mapper"},type:"POST",dataType:"json",success:function(a){if(a.reload_data&&!0===t){finaldictcolumnmapperReload=JSON.parse(a.reload_data),$(`#samecolumnwarning${e}`).empty(),$(`#modal-table-body-columnmapper${e}`).empty(),$(`#modal-table-head-done${e}`).css("display","block"),$(`#modal-table-head-done${e}`).empty();let t="";t+='<th style="text-align: center;font-weight:bold" disabled>Table Name</th>',t+='<td style="text-align: center;font-weight:bold" disabled>Reconfigure</td>',t+='<td style="text-align: center;font-weight:bold" disabled>Apply</td>',$(`#modal-table-body-columnmapper${e}`).append("<tr>"+t+"</tr>");for(const t of finaldictcolumnmapperReload){let a="";a+=`<th style="text-align: center;">${Object.keys(t)[0]}</th>`,a+=`<td style="text-align: center;"><button type="button" class="btn-primary reconfigurecolumnmapper" name="${Object.keys(t)[0]}" id="reconfigurecolumnmapper_${Object.keys(t)[0]}"><i class="fas fa-trash"></i></button></td>`,a+=`<td style="align-items: center;"><div class="custom-control custom-checkbox " style="margin-left:45%" >\n                   <input type="checkbox" class="applyConfig custom-control-input" name="${Object.keys(t)[0]}"  id=${Object.keys(t)[0]+e} data-elementid=${e} >\n                   <label for=${Object.keys(t)[0]+e} class="custom-control-label">\n                   </label>\n                 </div></td>`,$(`#modal-table-body-columnmapper${e}`).append("<tr>"+a+"</tr>")}reloadChecker&&$(`input[type=checkbox][name=${reloadChecker}]`).prop("checked",!0),$(".reconfigurecolumnmapper").click(function(){$(`#samecolumnwarning${e}`).empty();const t=$(this).attr("name");$(`#Columnmapper${e}`).find(`option[value='${t}']`).removeAttr("disabled"),$(this).closest("tr").remove();for(let a=0;a<finaldictcolumnmapperReload.length;a++){const n=Object.keys(finaldictcolumnmapperReload[a]);if(n[0]===t){const t=finaldictcolumnmapperReload.indexOf(finaldictcolumnmapperReload[a]);finaldictcolumnmapperReload.splice(t,1),$(`#columnmapperDict${e}`).attr("value","[]"),$(`#columnmapperDict${e}`).attr("data-save-config",JSON.stringify(finaldictcolumnmapperReload))}}$(`.columnconfiguremapper[data-elementid=${e}]`).prop("disabled",!1),$(`.saveConfigMapper[data-elementid=${e}]`).prop("disabled",!1),$(`.loadConfigMapper[data-elementid=${e}]`).prop("disabled",!1)}),$(".applyConfig").change(function(){const t=$(this).attr("name");reloadChecker=t,$(this).is(":checked")?$("input[type=checkbox]").each(function(){$(this).attr("name")===t?($(this).removeAttr("checked"),$(`.submitconfigmapper[data-elementid=${e}]`).css("display","block")):$(this).prop("checked",!1)}):$("input[type=checkbox]").each(function(){$("input[type=checkbox]").prop("checked",!1),$(`#columnmapperDict${e}`).attr("value","[]")})}),$(`#columnmapperDict${e}`).attr("data-has-reloaded","true")}},error:function(){Swal.fire({icon:"error",text:"Error! Failure in saving configuration. Please check your configuration and try again."})}})}function saveConfigMapper(e){const t=finaldictcolumnmapperReload,a=JSON.parse($(`#columnmapperDict${e}`).attr("data-save-config"));for(const e of a)for(let a=0;a<t.length;a++){const n=Object.keys(t[a]);if(String(n[0])===String(Object.keys(e)[0])){const e=t.indexOf(t[a]);t.splice(e,1)}}if(t.length>0)for(const e of t)a.push(e);$.ajax({url:`/users/${urlPath}/constriant_get_data/`,data:{elementID:e,mapper_data:JSON.stringify(a),operation:"save_config_mapper"},type:"POST",dataType:"json",success:function(e){Swal.fire({icon:"success",text:"Configuration saved successfully!"})},error:function(){Swal.fire({icon:"error",text:"Error! Failure in saving configuration. Please check your configuration and try again."})}})}function SubmitConfigmapper(){const e=$(this).attr("data-elementid"),t=$(`input[type=checkbox][data-elementid=${e}]:checked`).attr("name");if(t)if(submitFinalData.length>0){for(let a=0;a<submitFinalData.length;a++){const n=Object.keys(submitFinalData[a]);if(String(n[0])===String(t))$(`#columnmapperDict${e}`).attr("value",JSON.stringify([submitFinalData[a]]));else for(let a=0;a<finaldictcolumnmapperReload.length;a++){const n=Object.keys(finaldictcolumnmapperReload[a]);String(n[0])===String(t)&&$(`#columnmapperDict${e}`).attr("value",JSON.stringify([finaldictcolumnmapperReload[a]]))}}Swal.fire({icon:"success",text:"Mapper configuration submitted successfully!"}),$(`#columnMapperModal${e}`).modal("hide")}else{for(let a=0;a<finaldictcolumnmapperReload.length;a++){const n=Object.keys(finaldictcolumnmapperReload[a]);String(n[0])===String(t)&&$(`#columnmapperDict${e}`).attr("value",JSON.stringify([finaldictcolumnmapperReload[a]]))}Swal.fire({icon:"success",text:"Mapper configuration submitted successfully!"}),$(`#columnMapperModal${e}`).modal("hide")}else Swal.fire({icon:"warning",text:"Select the Table Name."})}function loadConfigMapper(){const e=$(this).attr("data-elementid"),t=new FormData($(`form[data-form-id=uploadfileform${e}]`)[0]);t.append("operation","columnmapper_global"),tableName=$(`input[type=checkbox][data-elementid=${e}]:checked`).attr("name"),"null"!==String(tableName)&&"undefined"!==String(tableName)||(tableName=$("select").val()),t.append("table_name",tableName),t.append("elementID",e);const a=$(`form[data-form-id=uploadfileform${e}]`).find("input[type=file]").val();tableName&&a?($(`.submitconfigmapper[data-elementid=${e}]`).css("display","none"),$.ajax({url:`/users/${urlPath}/constriant_get_data/`,cache:!1,contentType:!1,processData:!1,data:t,type:"POST",dataType:"json",success:function(t){t.saved_data&&t.saved_data.length>0&&$(`#columnmapperDict${e}`).attr("value",JSON.stringify(t.saved_data));for(const a of t.saved_data)if(String(tableName)===String(Object.keys(a)[0])){$(".saveConfigMapper").css("display","none"),$(`#modal-table-head${e}`).css("display","block"),$(`#modal-table-head-done${e}`).css("display","none"),$(`#modal-table-body-columnmapper${e}`).empty(),columnsql=t.columnlist;let n=0;for(const a of t.columnlist){let o="";o+=`<th id="Columnmapper1${e}_${[n]}">${a}</th>`,o+=`<td ><select id="Columnmapper${e}_${[n]}" data-reload-value='${a}' class="select2 form-control" name="Columnmapper"  data-placeholder="Column Mapper" >\n                    </select></td>`,$(`#modal-table-body-columnmapper${e}`).append("<tr>"+o+"</tr>"),$(`#modal-table-body-columnmapper${e}`).find(".select2").select2({width:"100%"});for(let a=0;a<t.columnlist1.length;a++)$(`#Columnmapper${e}_${[n]}`).append(new Option(t.columnlist1[a],t.columnlist1[a]));$(`#Columnmapper${e}_${[n]}`).val(a).trigger("change"),n++}for(const e of a[tableName])$(`select[data-reload-value=${Object.values(e)[0]}]`).val(Object.keys(e)[0]).trigger("change");$(`.savecolumnconfiguremapper[data-elementID=${e}]`).css("display","block")}},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})):Swal.fire({icon:"warning",text:"No Table selected / File not found."})}function generateTable(e){const t=$(`textarea[name=excel_data_table_generator2][data-element-id=${e}]`).val();var a=(new DOMParser).parseFromString(t,"text/html");let n=a.body.textContent||"";var o=n.replaceAll('"',"").replaceAll(" ","").replaceAll("\n","");o||(n="");const l=n.split("\n"),i=l[0].split("\t");let r="";for(const e in i)r+=`<th>${i[e]}</th>`;l.shift();let s="";for(const e in l)if(l[e]){const t=l[e].split("\t");s+="<tr>";for(const e in t)s+=`<td contenteditable>${t[e]}</td>`;s+="</tr>"}$(`#save_generated_table_${e}`+"_wrapper").remove(),$(`#save_generated_table_${e}`).remove(),$(document).find(`#savetablegenerator_${e}`).prop("disabled",!1);const c=`\n<table id="save_generated_table_${e}"  class="row-border display" style="display: none;">\n<thead class="table_generator_header">\n${r}\n</thead>\n<tbody id='save_generated_table_body_${e}'>\n${s}\n</tbody>\n</table>`
;$(`#result_table_generated_${e}`).append(c),$(`#result_table_generated_${e}`).css("display","block"),$(`#save_generated_table_${e}`).css("display","block"),$(`#save_generated_table_${e}`).DataTable({autoWidth:!0,scrollY:200,scrollX:200,scrollCollapse:!0,sScrollXInner:"100%",bInfo:!1,searching:!0,destroy:!0,bRetrieve:!0,bProcessing:!0,bDestroy:!0,ordering:!1,orderCellsTop:!0,responsive:!0,colReorder:{fixedColumns:!0},deferRender:!0,paging:!1,lengthMenu:[[1,5,50,-1],[1,5,50,"All"]],pageLength:50,buttons:[],columnDefs:[{width:"200px",targets:"_all",className:"dt-center allColumnClass all"},{targets:0,width:"22%",className:"noVis"}]}),setTimeout(function(){$(`#save_generated_table_${e}`).DataTable().columns.adjust()},1e3)}function savegeneratorData(e,t){const a=$(`#savetablegenerator_${e}`).attr("data-current-table"),n=[],o=t;$(`#save_generated_table_${e} tbody tr`).each(function(){const e={};$(this).find("td").each(function(){const t=$(this).index(),a=$(this).closest("table").find("thead").find("th").eq(t).text().trim();e[a]=$(this).text()}),n.push(e)}),$.ajax({url:`/users/${urlPath}/${o}/`,data:{model_name:a,table_data:JSON.stringify(n),element_id:e,operation:"save_tablegenerator_data"},type:"POST",dataType:"json",success:function(e){windowLocationAttr.reload()},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}function refreshTablegenerator(e){$(`textarea[name=excel_data_table_generator2][data-element-id=${e}]`).val(" ").trigger("change"),$(`#save_generated_table_${e}`).css("display","none"),$(`#result_table_generated_${e}`).css("display","none"),$(`save_generated_table_body_${e}`).empty()}function previewUploadElementData(e,t){$(`#previewUploadModal${e}`).modal("show"),$(`#previewUploadBody${e}`).empty(),$(`#previewUpload_unknownsheet${e}`).remove();const a=windowLocation.split("/")[4];t.append("operation","previewUploadData"),$.ajax({url:`/users/${urlPath}/${a}/`,data:t,contentType:!1,cache:!1,async:!1,processData:!1,type:"POST",dataType:"json",success:function(t){const a=JSON.parse(t.context);if(a.length>0)for(const t of a)$(`#previewUploadBody${e}`).append(t);if(Object.prototype.hasOwnProperty.call(t,"unknown_sheet")){const a=JSON.parse(t.unknown_sheet);a.length>0&&$(`<div id='previewUpload_unknownsheet${e}' ><ul><li style="color:red;text-align: justify;"><h6>Sheet ${a.join(", ")} does not exist.</h6></li></ul></div>`).insertBefore(`#previewUpload_footer${e}`)}$("table.previewUploadTable").DataTable({autoWidth:!1,scrollY:200,scrollX:500,scrollCollapse:!0,sScrollXInner:"100%",bInfo:!1,bRetrieve:!0,bProcessing:!0,bDestroy:!0,ordering:!1,orderCellsTop:!0,responsive:!0,colReorder:{fixedColumnsLeft:1},deferRender:!0,paging:!0,lengthMenu:[[1,5,50,-1],[1,5,50,"All"]],pageLength:50,dom:"lfBrtip",buttons:[],columnDefs:[{targets:"_all",className:"dt-center allColumnClass all"},{targets:0,width:"20%",className:"noVis"}]}),$(document).find(".cardUploadtoggle").on("click",function(){setTimeout(function(){$("table.previewUploadTable").DataTable().columns.adjust()},300)})},error:function(){Swal.fire({icon:"error",text:"Error! Failure in displaying data. Please try again."})}})}function CompMapper(e){let t=$(e).attr("data-elementID"),a=$(e).attr("data-table-name"),n=[],o=$('a[data-toggle="tab"].active.l3items').find("span").eq(0).text();if($.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{element_id:t,operation:"get_fields_comp_upload"},type:"POST",dataType:"json",success:function(e){if(n=Object.keys(e.tablelist),$(`#modal-table-body-computedFieldMapper_main_table_${t}`).empty(),Object.keys(e).length>0)for(let[a,n]of Object.entries(e.tablelist))$(`#modal-table-body-computedFieldMapper_main_table_${t}`).append(`\n          <tr>\n            <td style="text-align:center;" class="${a}_table_${t}">\n                ${a}\n            </td>\n            <td style="text-align:center;">\n                <span>\n                <a data-toggle="tooltip" class="delete_actions_upload_eq" title="Delete" value="eq" id="delete_${a}_EBDisplayButtonID_${t}"><i name="actions1" value="eq" class="far fa-trash-alt ihover javaSC thin-icontrash" style="font-size: 18px;"></i></a>\n              </span>\n            </td>\n            <td style="align-items: center;">\n                <div class="custom-control custom-checkbox" style="margin-left:45%">\n                <input type="checkbox" id="everyrun_${a}_${t}" data-elementID="${t}" name="everyrun_${a}_${t}" class="checkboxinput custom-control-input" value="new">\n                <label for="everyrun_${a}_${t}" class="custom-control-label"></label>\n              </div>\n            </td>\n          </tr>\n          `),n&&$(`#everyrun_${a}_${t}`).prop("checked",!0)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}}),a.startsWith("[")&&(a=JSON.parse(a)),$(`#computedFieldMapper_table_${t}`).select2(),a.constructor===Array){$(`#computedFieldMapper_table_${t}`).empty(),$(`#computedFieldMapper_table_${t}`).append("<option value='value'selected disabled>Select Table</option>");for(let e=0;e<a.length;e++)$(`#computedFieldMapper_table_${t}`).append(new Option(a[e],a[e]))}else $(`#computedFieldMapper_table_${t}`).empty(),$(`#computedFieldMapper_table_${t}`).append("<option value='value'selected disabled>Select Table</option>"),$(`#computedFieldMapper_table_${t}`).append(new Option(a,a));$(`#FieldMapper_EBDisplayButtonID_${t}`).off("click").on("click",function(){listViewComp=!0,listViewModelName=$(`#computedFieldMapper_table_${t}`).val(),listViewCompCol=t,$("#EBDisplayModel").css("z-index",1051),$("#EBDisplayModel").modal("show"),reloadCompConfig(listViewModelName+"_devcomp_"+o)}),$("#EBDisplayModel").off("hide.bs.modal").on("hide.bs.modal",function(){listViewComp=!1,$("#EBDisplayModel").css("z-index",1050),$("#where_condition").css("display","block"),$("#export_data_equ").css("display","block");let e={};$(`#modal-table-body-computedFieldMapper_main_table_${t}`).find("tr").each(function(){name_t=$(this).find("td").eq(0).text().trim(),null!=name_t&&(e[name_t]=$(`#everyrun_${name_t}_${t}`).is(":checked"))}),$(`#modal-table-body-computedFieldMapper_main_table_${t}`).empty();let a=[];a=Object.keys(e),a.push($(`#computedFieldMapper_table_${t}`).val()),a=new Set(a),a=Array.from(a);for(let l=0;l<a.length;l++)$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{element_id:a[l]+"_devcomp_"+o,operation:"get_fields_comp_upload2"},type:"POST",dataType:"json",success:function(a){n=Object.keys(a.tablelist);let l={};for(let e=0;e<n.length;e++)n[e]=n[e].replace("_devcomp","").replace(`_${o}`,""),l[n[e]]=$(`#everyrun_${n[e]}_${t}`).is(":checked");if(Object.keys(a).length>0)for(let[e,n]of Object.entries(a.tablelist))$(`#modal-table-body-computedFieldMapper_main_table_${t}`).append(`\n            <tr>\n              <td style="text-align:center;" class="${e.replace("_devcomp","").replace(`_${o}`,"")}_table_${t}">\n                  ${e.replace("_devcomp","").replace(`_${o}`,"")}\n              </td>\n              <td style="text-align:center;">\n                  <span>\n                  <a data-toggle="tooltip" class="delete_actions_upload_eq" title="Delete" value="eq" id="delete_${e.replace("_devcomp","").replace(`_${o}`,"")}_EBDisplayButtonID_${t}"><i name="actions1" value="eq" class="far fa-trash-alt ihover javaSC thin-icontrash" style="font-size: 18px;"></i></a>\n                </span>\n              </td>\n              <td style="align-items: center;">\n                  <div class="custom-control custom-checkbox" style="margin-left:45%">\n                  <input type="checkbox" id="everyrun_${e.replace("_devcomp","").replace(`_${o}`,"")}_${t}" data-elementID="${t}" name="everyrun_${e.replace("_devcomp","").replace(`_${o}`,"")}_${t}" class="checkboxinput custom-control-input" value="new">\n                  <label for="everyrun_${e.replace("_devcomp","").replace(`_${o}`,"")}_${t}" class="custom-control-label"></label>\n                </div>\n              </td>\n            </tr>\n            `),n&&$(`#everyrun_${e.replace("_devcomp","").replace(`_${o}`,"")}_${t}`).prop("checked",!0);if(Object.keys(e).length>0)for(let[a,n]of Object.entries(e))n&&$(`#everyrun_${a.replace("_devcomp","").replace(`_${o}`,"")}_${t}`).prop("checked",!0)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}),$("#EBDisplayModel").on("show.bs.modal",function(){$("#where_condition").css("display","none"),$("#export_data_equ").css("display","none"),$("#functionsList").find("div").find("a").attr("data-element_comp","datamgm")}),$("#save_workflow_equ").off("click").on("click",function(){SaveCompFlow(listViewModelName+"_devcomp_"+o)}),$(`#savecomputedFieldMapper_button_${t}`).off("click").on("click",function(){let e={};$(`#modal-table-body-computedFieldMapper_main_table_${t}`).find("tr").each(function(){name_t=$(this).find("td").eq(0).text().trim(),e[name_t]=$(`#everyrun_${name_t}_${t}`).is(":checked")}),$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{element_id:t,operation:"save_fields_comp_upload",data:JSON.stringify(e)},type:"POST",dataType:"json",success:function(e){$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"fetch_upload_view_custom_messages",element_id:t,messages:JSON.stringify(["computation_configured_message"])},type:"POST",dataType:"json",success:function(e){message="",icon="",e.computation_configured_message&&(message=e.computation_configured_message.message,icon=e.computation_configured_message.icon),iconHtml="",icon&&(iconHtml=`<i class="${icon}" style="border: 0 !important;"></i>`),Swal.fire({icon:"success",iconHtml:iconHtml,text:message||"Configuration saved successfully!"}).then(e=>{e.isConfirmed&&windowLocationAttr.reload()})},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})},error:function(){Swal.fire({icon:"error",text:"Error! Failure in saving configuration. Please check your configuration and try again."})}})}),$(document).on("click",".delete_actions_upload_eq",function(e){e.stopImmediatePropagation();let a=$(this).attr("id"),l=a.replace("delete_","").replace(`_EBDisplayButtonID_${t}`,"");const i=window.confirm("Remove the computation logic ?");i&&$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{tablename:l+"_devcomp_"+o,element_id:t,operation:"removeCompCal"},type:"POST",dataType:"json",success:function(){$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{element_id:t,operation:"get_fields_comp_upload"},type:"POST",dataType:"json",success:function(e){if(n=Object.keys(e.tablelist),$(`#modal-table-body-computedFieldMapper_main_table_${t}`).empty(),Object.keys(e).length>0)for(let[a,n]of Object.entries(e.tablelist))$(`#modal-table-body-computedFieldMapper_main_table_${t}`).append(`\n                  <tr>\n                    <td style="text-align:center;" class="${a}_table_${t}">\n                        ${a}\n                    </td>\n                    <td style="text-align:center;">\n                        <span>\n                        <a data-toggle="tooltip" class="delete_actions_upload_eq" title="Delete" value="eq" id="delete_${a}_EBDisplayButtonID_${t}"><i name="actions1" value="eq" class="far fa-trash-alt ihover javaSC thin-icontrash" style="font-size: 18px;"></i></a>\n                      </span>\n                    </td>\n                    <td style="align-items: center;">\n                        <div class="custom-control custom-checkbox" style="margin-left:45%">\n                        <input type="checkbox" id="everyrun_${a}_${t}" data-elementID="${t}" name="everyrun_${a}_${t}" class="checkboxinput custom-control-input" value="new">\n                        <label for="everyrun_${a}_${t}" class="custom-control-label"></label>\n                      </div>\n                    </td>\n                  </tr>\n                  `),n&&$(`#everyrun_${a}_${t}`).prop("checked",!0)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})})}function fetchColVals(){col=$(this).parent().parent().parent().find(".master_column_vals"),col_index=$(this).parent().parent().parent().index(),elementID=$(this).parent().parent().parent().parent().attr("id").replace("custom_validation_table_",""),reload_data=$(this).attr("data-data"),null==reload_data&&(reload_data=""),$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{tablename:$(this).val(),col_index:col_index,elementID:elementID,reload_data:reload_data,operation:"fetchcols"},type:"POST",dataType:"json",success:function(e){$(`#custom_validation_table_${e.elementID} tr`).eq(e.col_index).find("td").eq(4).find("div").find("select").empty(),$(`#custom_validation_table_${e.elementID} tr`).eq(e.col_index).find("td").eq(4).find("div").find("select").append('<option value ="" selected disabled>Column</option>');for(const[t,a]of Object.entries(e.data))$(`#custom_validation_table_${e.elementID} tr`).eq(e.col_index).find("td").eq(4).find("div").find("select").append(`<option value = "${t}">${a}</option>`);$(`#custom_validation_table_${e.elementID} tr`).eq(e.col_index).find("td").eq(4).find("div").find("select").val(e.reload_data).trigger("change")},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}function CompMapperDev(e){$("#documentModal").modal("hide");let t=$("#selectDocumentTable").val(),a=[],n=$("#tabHeaderDocument").val();$("#computedFieldMapper_table").val("").trigger("change"),$("#modal-table-body-computedFieldMapper_main_table").empty();let o=$(".computedFieldMapperButton").attr("data-data_config");if(null!=o?(o=JSON.parse(o),o={tablelist:o}):o={tablelist:{}},a=Object.keys(o.tablelist),$("#modal-table-body-computedFieldMapper_main_table").empty(),Object.keys(o).length>0)for(let[e,t]of Object.entries(o.tablelist))$("#modal-table-body-computedFieldMapper_main_table").append(`\n        <tr>\n          <td style="text-align:center;" class="${e}_table">\n              ${e}\n          </td>\n          <td style="text-align:center;">\n              <span>\n              <a data-toggle="tooltip" class="delete_actions_upload_eq" title="Delete" value="eq" id="delete_${e}_EBDisplayButtonID_${n}"><i name="actions1" value="eq" class="far fa-trash-alt ihover javaSC thin-icontrash" style="font-size: 18px;"></i></a>\n            </span>\n          </td>\n          <td style="align-items: center;">\n              <div class="custom-control custom-checkbox" style="margin-left:45%">\n              <input type="checkbox" id="everyrun_${e}" data-elementID="" name="everyrun_${e}" class="checkboxinput custom-control-input" value="new">\n              <label for="everyrun_${e}" class="custom-control-label"></label>\n            </div>\n          </td>\n        </tr>\n        `),t&&$(`#everyrun_${e}`).prop("checked",!0);if($("#computedFieldMapper_table").select2(),t.constructor===Array){$("#computedFieldMapper_table").empty(),$("#computedFieldMapper_table").append("<option value='value'selected disabled>Select Table</option>");for(let e=0;e<t.length;e++)$("#computedFieldMapper_table").append(new Option(t[e],t[e]))}else $("#computedFieldMapper_table").empty(),$("#computedFieldMapper_table").append("<option value='value'selected disabled>Select Table</option>"),$("#computedFieldMapper_table").append(new Option(t,t));$("#FieldMapper_EBDisplayButtonID").off("click").on("click",function(){listViewComp=!0,listViewModelName=$("#computedFieldMapper_table").val(),listViewCompCol="document",$("#EBDisplayModel").css("z-index",1051),$("#EBDisplayModel").modal("show"),reloadCompConfig(listViewModelName+"_devcomp_"+n)}),$("#EBDisplayModel").off("hide.bs.modal").on("hide.bs.modal",function(){listViewComp=!1,$("#EBDisplayModel").css("z-index",1050),$("#where_condition").css("display","block"),$("#export_data_equ").css("display","block"),listViewCompCol="";let e={};$("#modal-table-body-computedFieldMapper_main_table").find("tr").each(function(){name_t=$(this).find("td").eq(0).text().trim(),null!=name_t&&(e[name_t]=$(`#everyrun_${name_t}`).is(":checked"))}),$("#modal-table-body-computedFieldMapper_main_table").empty();let t=[];t=Object.keys(e),t.push($("#computedFieldMapper_table").val()),t=new Set(t),t=Array.from(t);for(let o=0;o<t.length;o++)$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{element_id:t[o]+"_devcomp_"+n,operation:"get_fields_comp_upload2"},type:"POST",dataType:"json",success:function(t){a=Object.keys(t.tablelist);let o={};for(let e=0;e<a.length;e++)a[e]=a[e].replace("_devcomp","").replace(`_${n}`,""),o[a[e]]=$(`#everyrun_${a[e]}`).is(":checked");if(Object.keys(t).length>0)for(let[e,a]of Object.entries(t.tablelist))$("#modal-table-body-computedFieldMapper_main_table").append(`\n              <tr>\n                <td style="text-align:center;" class="${e.replace("_devcomp","").replace(`_${n}`,"")}_table">\n                    ${e.replace("_devcomp","").replace(`_${n}`,"")}\n                </td>\n                <td style="text-align:center;">\n                    <span>\n                    <a data-toggle="tooltip" class="delete_actions_upload_eq" title="Delete" value="eq" id="delete_${e.replace("_devcomp","").replace(`_${n}`,"")}_EBDisplayButtonID_${n}"><i name="actions1" value="eq" class="far fa-trash-alt ihover javaSC thin-icontrash" style="font-size: 18px;"></i></a>\n                  </span>\n                </td>\n                <td style="align-items: center;">\n                    <div class="custom-control custom-checkbox" style="margin-left:45%">\n                    <input type="checkbox" id="everyrun_${e.replace("_devcomp","").replace(`_${n}`,"")}" data-elementID="" name="everyrun_${e.replace("_devcomp","").replace(`_${n}`,"")}" class="checkboxinput custom-control-input" value="new">\n                    <label for="everyrun_${e.replace("_devcomp","").replace(`_${n}`,"")}" class="custom-control-label"></label>\n                  </div>\n                </td>\n              </tr>\n              `),a&&$(`#everyrun_${e.replace("_devcomp","").replace(`_${n}`,"")}`).prop("checked",!0);if(Object.keys(e).length>0)for(let[t,a]of Object.entries(e))a&&$(`#everyrun_${t.replace("_devcomp","").replace(`_${n}`,"")}`).prop("checked",!0)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}),$("#EBDisplayModel").on("show.bs.modal",function(){$("#where_condition").css("display","none"),$("#export_data_equ").css("display","none"),$("#functionsList").find("div").find("a").attr("data-element_comp","datamgm")}),$("#save_workflow_equ").off("click").on("click",function(){SaveCompFlow(listViewModelName+"_devcomp_"+n)}),$("#savecomputedFieldMapper_button").off("click").on("click",function(){let e={};$("#modal-table-body-computedFieldMapper_main_table").find("tr").each(function(){name_t=$(this).find("td").eq(0).text().trim(),e[name_t]=$(`#everyrun_${name_t}`).is(":checked")}),$(".computedFieldMapperButton").attr("data-data_config",JSON.stringify(e)),$("#computedFieldMapper").modal("hide"),$("#documentModal").modal("show")}),$(document).on("click",".delete_actions_upload_eq",function(e){e.stopImmediatePropagation();let t=$(this).attr("id"),l=t.replace("delete_","").replace(`_EBDisplayButtonID_${n}`,"");const i=window.confirm("Remove the computation logic ?");if(i){let e=$(".computedFieldMapperButton").attr("data-data_config");e=null==e||""==e||"{}"==e?{}:JSON.parse(e),delete e[l],o={tablelist:e},$(".computedFieldMapperButton").attr("data-data_config",JSON.stringify(e)),$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{tablename:l+"_devcomp_"+n,operation:"removeCompCal_dev"},type:"POST",dataType:"json",success:function(){if(a=Object.keys(o.tablelist),$("#modal-table-body-computedFieldMapper_main_table").empty(),Object.keys(o).length>0)for(let[e,t]of Object.entries(o.tablelist))$("#modal-table-body-computedFieldMapper_main_table").append(`\n                    <tr>\n                      <td style="text-align:center;" class="${e}_table">\n                          ${e}\n                      </td>\n                      <td style="text-align:center;">\n                          <span>\n                          <a data-toggle="tooltip" class="delete_actions_upload_eq" title="Delete" value="eq" id="delete_${e}_EBDisplayButtonID_${n}"><i name="actions1" value="eq" class="far fa-trash-alt ihover javaSC thin-icontrash" style="font-size: 18px;"></i></a>\n                        </span>\n                      </td>\n                      <td style="align-items: center;">\n                          <div class="custom-control custom-checkbox" style="margin-left:45%">\n                          <input type="checkbox" id="everyrun_${e}" data-elementID="" name="everyrun_${e}" class="checkboxinput custom-control-input" value="new">\n                          <label for="everyrun_${e}" class="custom-control-label"></label>\n                        </div>\n                      </td>\n                    </tr>\n                    `),t&&$(`#everyrun_${e}`).prop("checked",!0)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}})}function uploadmapperDev(){$("#documentModal").modal("hide"),$("#Columnmapper").val("").trigger("change"),$("#samecolumnwarning").empty(),$("#modal-table-body-columnmapper").empty(),$("#modal-table-head-done").css("display","block"),$("#modal-table-head-done").empty(),$("#uploadFileColMapper").val("").trigger("change");let e="";e+='<th style="text-align: center;font-weight:bold" disabled>Table Name</th>',e+='<td style="text-align: center;font-weight:bold" disabled>Reconfigure</td>',e+='<td style="text-align: center;font-weight:bold" disabled>Apply</td>',$("#modal-table-body-columnmapper").append("<tr>"+e+"</tr>"),$(".columnconfiguremapperdev").prop("disabled",!0),$("#Columnmapper").on("select2:select",function(){null!=$(this).val()&&""!=$(this).val()&&null!=$(this).val()&&($(".columnconfiguremapperdev").prop("disabled",!1),tableNameDev=$("#Columnmapper").val())});let t=$("#selectDocumentTable").val();if($("#Columnmapper").select2(),t.constructor===Array){$("#Columnmapper").empty(),$("#Columnmapper").append("<option value='value'selected disabled>Select Option Name</option>");for(let e=0;e<t.length;e++)$("#Columnmapper").append(new Option(t[e],t[e]))}else $("#Columnmapper").empty(),$("#Columnmapper").append("<option value='value'selected disabled>Select Option Name</option>"),$("#Columnmapper").append(new Option(t,t));reloadConfigDataDev()}function reloadConfigDataDev(){let e=$(".fieldUploadMapperButton").attr("data-data_config");if(null!=e&&""!=e&&"[]"!=e?(e=JSON.parse(e),e={reload_data:e}):e={reload_data:[]},e.reload_data){finaldictcolumnmapperDevReload=e.reload_data;let t={};$("#modal-table-body-columnmapper").find("tr").slice(1).each(function(){name_t=$(this).find("th").eq(0).text().trim(),null!=name_t&&(t[name_t]=$("#"+name_t).is(":checked"))}),$("#samecolumnwarning").empty(),$("#modal-table-body-columnmapper").empty(),$("#modal-table-head-done").css("display","block"),$("#modal-table-head-done").empty();let a="";a+='<th style="text-align: center;font-weight:bold" disabled>Table Name</th>',a+='<td style="text-align: center;font-weight:bold" disabled>Reconfigure</td>',a+='<td style="text-align: center;font-weight:bold" disabled>Apply</td>',$("#modal-table-body-columnmapper").append("<tr>"+a+"</tr>");for(const e of finaldictcolumnmapperDevReload){let t="";t+=`<th style="text-align: center;">${Object.keys(e)[0]}</th>`,t+=`<td style="text-align: center;"><button type="button" class="btn-primary reconfigurecolumnmapperdev" name="${Object.keys(e)[0]}" id="reconfigurecolumnmapper_${Object.keys(e)[0]}"><i class="fas fa-trash"></i></button></td>`,t+=`<td style="align-items: center;"><div class="custom-control custom-checkbox " style="margin-left:45%" >\n                <input type="checkbox" class="applyConfig custom-control-input" name="${Object.keys(e)[0]}"  id=${Object.keys(e)[0]} data-elementid='' >\n                <label for=${Object.keys(e)[0]} class="custom-control-label">\n                </label>\n              </div></td>`,$("#modal-table-body-columnmapper").append("<tr>"+t+"</tr>")}if(reloadDevChecker&&$(`input[type=checkbox][name=${reloadDevChecker}]`).prop("checked",!0),$(".reconfigurecolumnmapperdev").click(function(){$("#samecolumnwarning").empty();const e=$(this).attr("name");$("#Columnmapper").find(`option[value='${e}']`).removeAttr("disabled"),$(this).closest("tr").remove();for(let t=0;t<finaldictcolumnmapperDevReload.length;t++){const a=Object.keys(finaldictcolumnmapperDevReload[t]);if(a[0]===e){const e=finaldictcolumnmapperDevReload.indexOf(finaldictcolumnmapperDevReload[t]);finaldictcolumnmapperDevReload.splice(e,1),$(".fieldUploadMapperButton").attr("data-data_config",JSON.stringify(finaldictcolumnmapperDevReload))}}$(".columnconfiguremapperdev").prop("disabled",!1),$(".loadConfigMapper").prop("disabled",!1)}),Object.keys(t).length>0)for(let[e,a]of Object.entries(t))a&&$(`#${e}`).prop("checked",!0)}}function columnMapperDev(){tableNameS=$("#Columnmapper").val(),tableNameDev=tableNameS;const e=$("#uploadFileColMapper").val();e?(dataForm=new FormData($("#uploadfileformColMapper")[0]),dataForm.append("operation","columnmapper_global_dev"),dataForm.append("table_name",tableNameDev),dataForm.append("elementID","elementID"),$.ajaxSetup({beforeSend:function(e,t){e.setRequestHeader("X-CSRFToken",ctoken)}}),$.ajax({url:`/users/${urlPath}/constriant_get_data/`,cache:!1,contentType:!1,processData:!1,data:dataForm,type:"POST",dataType:"json",success:function(e){$("#modal-table-head").css("display","block"),$("#modal-table-head-done").css("display","none"),$("#modal-table-body-columnmapper").empty(),columnsqlDev=e.columnlist;let t=0;for(const a of e.columnlist){let n="";n+=`<th id="Columnmapper1_${[t]}">${a}</th>`,n+=`<td ><select id="Columnmapper_${[t]}" class="select2 form-control" name="Columnmapper"  data-placeholder="Column Mapper" >\n    \n                        </select></td>`,$("#modal-table-body-columnmapper").append("<tr>"+n+"</tr>"),$("#modal-table-body-columnmapper").find(".select2").select2({width:"100%"});for(let a=0;a<e.columnlist1.length;a++)$(`#Columnmapper_${[t]}`).append(new Option(e.columnlist1[a],e.columnlist1[a]));$(`#Columnmapper_${[t]}`).val(a).trigger("change"),t++}$(".savecolumnconfiguremapperdev").css("display","block")},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})):""!=tableNameS&&null!=tableNameS&&$.ajax({url:`/users/${urlPath}/constriant_get_data/`,data:{table_name:tableNameDev,operation:"columnmapper_global_dev2"},type:"POST",dataType:"json",success:function(e){$("#modal-table-head").css("display","block"),$("#modal-table-head-done").css("display","none"),$("#modal-table-body-columnmapper").empty(),columnsqlDev=e.columnlist;let t=0;for(const a of e.columnlist){let n="";n+=`<th id="Columnmapper1_${[t]}">${a}</th>`,n+=`<td ><select id="Columnmapper_${[t]}" class="select2 form-control" name="Columnmapper"  data-placeholder="Column Mapper" >\n      \n                          </select></td>`,$("#modal-table-body-columnmapper").append("<tr>"+n+"</tr>"),$("#modal-table-body-columnmapper").find(".select2").select2({width:"100%",tags:!0});for(let a=0;a<e.columnlist1.length;a++)$(`#Columnmapper_${[t]}`).append(new Option(e.columnlist1[a],e.columnlist1[a]));$(`#Columnmapper_${[t]}`).val(a).trigger("change"),t++}$(".savecolumnconfiguremapperdev").css("display","block")},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}function saveColumnMapperDev(){let e=[];if(""!=tableNameDev&&null!=tableNameDev){const t=$(".fieldUploadMapperButton").attr("data-data_config");if(t&&"[]"!==String(t)){e=JSON.parse(t);for(let t=0;t<e.length;t++){const a=Object.keys(e[t]);if(a[0]===tableNameDev){const a=e.indexOf(e[t]);e.splice(a,1)}}}const a={},n=[],o=[],l=[];for(let e=0;e<columnsqlDev.length;e++){const t={},a=$(`#Columnmapper1_${[e]}`).html(),i=$(`#Columnmapper_${[e]}`).val();"undefined"!==String(i)&&""!==i&&null!==i&&(o.includes(i)?($("#samecolumnwarning").html(`${[i]} is already assigned to another column, please reconfigure the column mapper.`),l.push(!0)):(o.push(i),t[i]=a,n.push(t),l.push(!1)))}if(!l.includes(!0)){let t={};$("#modal-table-body-columnmapper").find("tr").slice(1).each(function(){name_t=$(this).find("th").eq(0).text().trim(),null!=name_t&&(t[name_t]=$("#"+name_t).is(":checked"))}),$("#samecolumnwarning").empty(),$("#modal-table-body-columnmapper").empty(),$("#modal-table-head-done").css("display","block"),$("#modal-table-head-done").empty();let o="";o+='<th style="text-align: center;font-weight:bold"  disabled>Table Name</th>',o+='<td style="text-align: center;font-weight:bold" disabled>Reconfigure</td>',o+='<td style="text-align: center;font-weight:bold" disabled>Apply</td>',$("#modal-table-body-columnmapper").append("<tr>"+o+"</tr>");let l=$(".fieldUploadMapperButton").attr("data-data_config");if(l&&"[]"!==String(l)){l=JSON.parse(l);for(const e of l)if(String(Object.keys(e)[0])!==String(tableNameDev)){const t=Object.keys(e)[0];let a="";a+=`<th style="text-align: center;">${t}</th>`,a+=`<td style="text-align: center;"><button type="button" class="btn-primary reconfigurecolumnmapperdev" name="${t}" id="reconfigurecolumnmapper_${t}"><i class="fas fa-trash"></i></button></td>`,a+=`<td style="align-items: center;"><div class="custom-control custom-checkbox " style="margin-left:45%" >\n                  <input type="checkbox" class="applyConfig custom-control-input" name="${t}"  id=${t} >\n                  <label for=${t} class="custom-control-label">\n                  </label>\n                    </div></td>`,$("#modal-table-body-columnmapper").append("<tr>"+a+"</tr>")}}let i="";if(i+=`<th style="text-align: center;">${[tableNameDev]}</th>`,i+=`<td style="text-align: center;"><button type="button" class="btn-primary reconfigurecolumnmapperdev" name="${[tableNameDev]}" id="reconfigurecolumnmapper_${[tableNameDev]}"><i class="fas fa-trash"></i></button></td>`,i+=`<td style="align-items: center;"><div class="custom-control custom-checkbox " style="margin-left:45%" >\n    \n                  <input type="checkbox" class="applyConfig custom-control-input" name="${[tableNameDev]}"  id=${[tableNameDev]}>\n                  <label for=${[tableNameDev]} class="custom-control-label">\n                  </label>\n                </div></td>`,$(`input[type=checkbox][name="${[tableNameDev]}"]`).prop("checked",!0),$("#modal-table-body-columnmapper").append("<tr>"+i+"</tr>"),a[tableNameDev]=n,e.push(a),Object.keys(t).length>0)for(let[e,a]of Object.entries(t))a&&$(`#${e}`).prop("checked",!0);$(".reconfigurecolumnmapperdev").click(function(){$("#samecolumnwarning").empty();const t=$(this).attr("name");$("#Columnmapper").find(`option[value='${t}']`).removeAttr("disabled"),$(this).closest("tr").remove();for(let a=0;a<e.length;a++){const n=Object.keys(e[a]);if(String(n[0])===String(t)){const t=e.indexOf(e[a]);e.splice(t,1),$(".fieldUploadMapperButton").attr("data-data_config",JSON.stringify(e))}}}),$(this).css("display","none"),$(".fieldUploadMapperButton").attr("data-data_config",JSON.stringify(e)),submitFinalDataDev=e}}}function loadConfigMapperDev(){tableName=$("#Columnmapper").val();const e=new FormData($("#uploadfileformColMapper")[0]);e.append("operation","columnmapper_global_dev"),e.append("table_name",tableName),e.append("elementID","elementID");const t=$("#uploadFileColMapper").val();""!=tableName&&null!=tableName&&t?$.ajax({url:`/users/${urlPath}/constriant_get_data/`,cache:!1,contentType:!1,processData:!1,data:e,type:"POST",dataType:"json",success:function(e){let t=$(".fieldUploadMapperButton").attr("data-data_config");null!=t&&"[]"!=t&&""!=t?(t=JSON.parse(t),t={saved_data:t}):t={saved_data:[]};for(const a of t.saved_data)if(String(tableName)===String(Object.keys(a)[0])){$("#modal-table-head").css("display","block"),$("#modal-table-head-done").css("display","none"),$("#modal-table-body-columnmapper").empty(),
columnsqlDev=e.columnlist;let t=0;for(const a of e.columnlist){let n="";n+=`<th id="Columnmapper1_${[t]}">${a}</th>`,n+=`<td ><select id="Columnmapper_${[t]}" data-reload-value='${a}' class="select2 form-control" name="Columnmapper"  data-placeholder="Column Mapper" >\n                        </select></td>`,$("#modal-table-body-columnmapper").append("<tr>"+n+"</tr>"),$("#modal-table-body-columnmapper").find(".select2").select2({width:"100%"});for(let a=0;a<e.columnlist1.length;a++)$(`#Columnmapper_${[t]}`).append(new Option(e.columnlist1[a],e.columnlist1[a]));$(`#Columnmapper_${[t]}`).val(a).trigger("change"),t++}for(const e of a[tableName])$(`select[data-reload-value=${Object.values(e)[0]}]`).val(Object.keys(e)[0]).trigger("change");$(".savecolumnconfiguremapperdev").css("display","block")}},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}}):""!=tableName&&null!=tableName?$.ajax({url:`/users/${urlPath}/constriant_get_data/`,data:{table_name:tableName,operation:"columnmapper_global_dev2"},type:"POST",dataType:"json",success:function(e){let t=$(".fieldUploadMapperButton").attr("data-data_config");null!=t&&"[]"!=t&&""!=t?(t=JSON.parse(t),t={saved_data:t}):t={saved_data:[]};for(const a of t.saved_data)if(String(tableName)===String(Object.keys(a)[0])){$("#modal-table-head").css("display","block"),$("#modal-table-head-done").css("display","none"),$("#modal-table-body-columnmapper").empty(),columnsqlDev=e.columnlist;let t=0;for(const a of e.columnlist){let n="";n+=`<th id="Columnmapper1_${[t]}">${a}</th>`,n+=`<td ><select id="Columnmapper_${[t]}" data-reload-value='${a}' class="select2 form-control" name="Columnmapper"  data-placeholder="Column Mapper" >\n                        </select></td>`,$("#modal-table-body-columnmapper").append("<tr>"+n+"</tr>"),$("#modal-table-body-columnmapper").find(".select2").select2({width:"100%"});for(let a=0;a<e.columnlist1.length;a++)$(`#Columnmapper_${[t]}`).append(new Option(e.columnlist1[a],e.columnlist1[a]));$(`#Columnmapper_${[t]}`).val(a).trigger("change"),t++}for(const e of a[tableName])$(`select[data-reload-value=${Object.values(e)[0]}]`).val(Object.keys(e)[0]).trigger("change");$(".savecolumnconfiguremapperdev").css("display","block")}},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}}):Swal.fire({icon:"warning",text:"No Table selected / File not found."})}var submitFinalData=[],finaldictcolumnmapperReload=[],reloadChecker="",finaldictcolumnmapperDevReload=[],reloadDevChecker="",dataFormDev="",columnsqlDev=[],tableNameDev="",submitFinalDataDev=[];