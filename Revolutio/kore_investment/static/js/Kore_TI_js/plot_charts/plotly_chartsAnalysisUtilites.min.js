function setBorderProperties(t,e,a,i,n){e&&$(`#${e}`).on("change",function(){let o=document.getElementById(t),l=document.getElementById(e),r=document.getElementById(a).value,d=document.getElementById(i).value,s=document.getElementById(n).value;change_border_color(o,l,r,d,s)}),a&&$(`#${a}`).on("change",function(){let o=document.getElementById(t),l=document.getElementById(e),r=document.getElementById(a).value,d=document.getElementById(i).value,s=document.getElementById(n).value;change_border_color(o,l,r,d,s)}),i&&$(`#${i}`).on("change",function(){let o=document.getElementById(t),l=document.getElementById(i).value,r=document.getElementById(e),d=document.getElementById(a).value,s=document.getElementById(n).value;change_border_color(o,r,d,l,s)}),n&&$(`#${n}`).on("change",function(){let o=document.getElementById(t),l=document.getElementById(e),r=document.getElementById(a).value,d=document.getElementById(i).value,s=document.getElementById(n).value;change_border_color(o,l,r,d,s)})}function setShadowProperties(t,e,a,i,n,o,l){e&&$(`#${e}`).on("change",function(){let r=document.getElementById(t),d=document.getElementById(e),s=document.getElementById(a).value,c=document.getElementById(i).value,u=document.getElementById(n).value,g=document.getElementById(o).value,h=document.getElementById(l).value;change_shadow_color(r,d,s,c,u,g,h)}),a&&$(`#${a}`).on("change",function(){let r=document.getElementById(t),d=document.getElementById(e),s=document.getElementById(a).value,c=document.getElementById(i).value,u=document.getElementById(n).value,g=document.getElementById(o).value,h=document.getElementById(l).value;change_shadow_color(r,d,s,c,u,g,h)}),i&&$(`#${i}`).on("change",function(){let r=document.getElementById(t),d=document.getElementById(e),s=document.getElementById(a).value,c=document.getElementById(i).value,u=document.getElementById(n).value,g=document.getElementById(o).value,h=document.getElementById(l).value;change_shadow_color(r,d,s,c,u,g,h)}),n&&$(`#${n}`).on("change",function(){let r=document.getElementById(t),d=document.getElementById(e),s=document.getElementById(a).value,c=document.getElementById(i).value,u=document.getElementById(n).value,g=document.getElementById(o).value,h=document.getElementById(l).value;change_shadow_color(r,d,s,c,u,g,h)}),o&&$(`#${o}`).on("change",function(){let r=document.getElementById(t),d=document.getElementById(e),s=document.getElementById(a).value,c=document.getElementById(i).value,u=document.getElementById(n).value,g=document.getElementById(o).value,h=document.getElementById(l).value;change_shadow_color(r,d,s,c,u,g,h)}),l&&$(`#${l}`).on("change",function(){let r=document.getElementById(t),d=document.getElementById(e),s=document.getElementById(a).value,c=document.getElementById(i).value,u=document.getElementById(n).value,g=document.getElementById(o).value,h=document.getElementById(l).value;change_shadow_color(r,d,s,c,u,g,h)}),e&&$(`#${l}`).on("change",function(){let r=document.getElementById(t),d=document.getElementById(e),s=document.getElementById(a).value,c=document.getElementById(i).value,u=document.getElementById(n).value,g=document.getElementById(o).value,h=document.getElementById(l).value;change_shadow_color(r,d,s,c,u,g,h)})}function change_border_color(t,e,a,i,n){"null"!==String(t)&&("true"===String(e.checked)?$(`#${t.id}`).css("border",i+"px "+n+" "+a):$(`#${t.id}`).css("border","none"),$(`#${t.id}`).attr("data-borderon",e.checked),$(`#${t.id}`).attr("data-borderColor",a),$(`#${t.id}`).attr("data-borderThickness",i),$(`#${t.id}`).attr("data-borderStyle",n))}function change_shadow_color(t,e,a,i,n,o,l){if("null"!==String(t)){if("true"===String(e.checked))$(`#${t.id}`).css("boxShadow",i+"px "+n+"px "+o+"px "+l+"px "+a);else{let e=$(`#${t.id}`).attr("data-xaxis").split("."),a=e[e.length-1];"ico"===String(a)?$(`#${t.id}`).css("boxShadow","none"):$(`#${t.id}`).css("boxShadow","0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)")}$(`#${t.id}`).attr("data-shadecolor",a),$(`#${t.id}`).attr("data-shadowon",e.checked),$(`#${t.id}`).attr("data-shadowX",i),$(`#${t.id}`).attr("data-shadowY",n),$(`#${t.id}`).attr("data-shadowblurry",o),$(`#${t.id}`).attr("data-shadowThick",l)}}function change_shadow_global(t,e,a,i,n,o,l){if("null"!==String(t)){if("true"===String(e))$(`#${t.id}`).css("boxShadow",i+"px "+n+"px "+o+"px "+l+"px "+a);else{let e=$(`#${t.id}`).attr("data-xaxis").split("."),a=e[e.length-1];"ico"===String(a)?$(`#${t.id}`).css("boxShadow","none"):$(`#${t.id}`).css("boxShadow","0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)")}$(`#${t.id}`).attr("data-shadecolor",a),$(`#${t.id}`).attr("data-shadowon",e),$(`#${t.id}`).attr("data-shadowX",i),$(`#${t.id}`).attr("data-shadowY",n),$(`#${t.id}`).attr("data-shadowblurry",o),$(`#${t.id}`).attr("data-shadowThick",l)}}function change_border_global(t,e,a,i,n){"null"!==String(t)&&("true"===String(e)&&($(`#${t.id}`).css("border",i+"px "+n+" "+a),$(".myDiv").css("border",i+"px "+n+" "+a)),$(`#${t.id}`).attr("data-borderon",e),$(`#${t.id}`).attr("data-borderColor",a),$(`#${t.id}`).attr("data-borderThickness",i),$(`#${t.id}`).attr("data-borderStyle",n))}function change_header_color(t,e,a){"null"===String(e)&&"null"===String(t)||($(`#${e.id}`).closest(".card-header").css("color",a),$(`#${t.id}`).attr("data-header_color",a))}function change_header_bgcolor(t,e,a){"null"===String(e)&&"null"===String(t)||($(`#${e.id}`).closest(".card-header").css("background-color",a),$(`#${t.id}`).attr("data-header_bgcolor",a))}function change_header_fontsize(t,e,a){"null"===String(e)&&"null"===String(t)||($(`#${e.id}`).find("h5").css("font-size",a+"px"),$(`#${t.id}`).attr("data-header_fontsize",a))}function change_header_fontweight(t,e,a){"null"!==String(e)&&String(t),null!=e&&$(`#${e.id}`).find("h5").css("font-weight",a),null!=t&&$(`#${t.id}`).attr("data-header_fontweight",a)}function change_header_fontstyle(t,e,a){"null"!==String(e)||String(t),null!=e&&$(`#${e.id}`).find("h5").css("font-family",a),null!=t&&$(`#${t.id}`).attr("data-header_fontstyle",a)}function change_header_alignment(t,e,a){"null"===String(e)&&"null"===String(t)||(null!=e&&$(`#${e.id}`).find("h5").css("text-align",a),null!=t&&$(`#${t.id}`).attr("data-header_alignment",a))}function toggleGridlines(t,e){document.getElementById(t).onclick=function(){let a=document.getElementById(t).value;var i=e.layout.xaxis.title.text;let n="";"show_gridlines"===String(a)&&(n={yaxis:{showgrid:!0,automargin:!0},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:i,font:{family:"Arial"}}}},document.getElementById(t).value="hide_gridlines",document.getElementById(t).innerHTML="Hide Gridlines"),"hide_gridlines"===String(a)&&(n={yaxis:{showgrid:!1,automargin:!0},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:i,font:{family:"Arial"}}}},document.getElementById(t).value="show_gridlines",document.getElementById(t).innerHTML="Show Gridlines"),Plotly.relayout(e,n),$(`#${id6}`).attr("data-layout",JSON.stringify(e.layout));let o=$(`#${t}`).val();$(`#${id6}`).attr("data-config_gridlines",o)}}function setPlotConfigHeaderProperties(t,e,a,i,n,o,l,r){let d="",s="";document.getElementById(a).onchange=function(){d=document.getElementById(t),s=document.getElementById(e);let a=$(this).val();change_header_alignment(s,d,a)},document.getElementById(i).onchange=function(){d=document.getElementById(t),s=document.getElementById(e);let a=$(this).val();change_header_fontstyle(s,d,a)},document.getElementById(n).onchange=function(){d=document.getElementById(t),s=document.getElementById(e);let a=$(this).val();change_header_bgcolor(s,d,a)},document.getElementById(o).onchange=function(){d=document.getElementById(t);let a=$(this).val();s=document.getElementById(e),change_header_color(s,d,a)},document.getElementById(l).onchange=function(){d=document.getElementById(t);let a=$(this).val();s=document.getElementById(e),change_header_fontsize(s,d,a)},document.getElementById(r).onchange=function(){d=document.getElementById(t);let a=$(this).val();s=document.getElementById(e),change_header_fontweight(s,d,a)}}function setPlotConfigLabelProperties(t,e,a,i,n,o,l){let r,d;if(graph_subtype_array.includes(n)){if(l)if(l.xaxis.title){if(l.xaxis.title.font.color){let t=l.xaxis.title.font.color;document.getElementById(a).value=t,document.getElementById(a).dispatchEvent(new Event("change"))}if(l.xaxis.title.font.size){let t=l.xaxis.title.font.size;document.getElementById(i).value=t,document.getElementById(i).dispatchEvent(new Event("change"))}}else if(l.yaxis.title){if(l.yaxis.title.font.color){let t=l.yaxis.title.font.color;document.getElementById(a).value=t,document.getElementById(a).dispatchEvent(new Event("change"))}if(l.yaxis.title.font.size){let t=l.yaxis.title.font.size;document.getElementById(i).value=t,document.getElementById(i).dispatchEvent(new Event("change"))}}document.getElementById(a).onchange=function(){var a=document.getElementById(e);r=$(this).val(),main_div=document.getElementById(t),changePlotConfigLabelProperties(main_div,a,n,r,d,e,o,l)},document.getElementById(i).onchange=function(){var a=document.getElementById(e);d=$(this).val(),main_div=document.getElementById(t),changePlotConfigLabelProperties(main_div,a,n,r,d,e,o,l)}}}function changePlotConfigLabelProperties(t,e,a,i,n,o,l,r){if(graph_subtype_array.includes(a)&&"Funnel"!==a&&"Funnel_Stacked"!==a&&"Multiple_Line_Chart"!==a){var d=JSON.parse($("#"+t.id).attr("data-layout"));i&&t&&(r.yaxis.title&&(r.yaxis.title.font.color=i,d.yaxis.title.font.color=i),r.xaxis.title&&(r.xaxis.title.font.color=i,d.xaxis.title.font.color=i),$("#"+t.id).attr("data-layout",JSON.stringify(d)),Plotly.update(o,l,r)),n&&t&&(r.yaxis.title&&(r.yaxis.title.font.size=n,d.yaxis.title.font.size=n),r.xaxis.title&&(r.xaxis.title.font.size=n,d.xaxis.title.font.size=n),$("#"+t.id).attr("data-layout",JSON.stringify(d)),Plotly.update(o,l,r))}if("Funnel"===a||"Funnel_Stacked"===a){d=JSON.parse($("#"+t.id).attr("data-layout"));i&&t&&(r.yaxis.title&&(r.yaxis.title.font.color=i,d.yaxis.title.font.color=i),$("#"+t.id).attr("data-layout",JSON.stringify(d)),Plotly.update(o,l,r)),n&&t&&(r.yaxis.title&&(r.yaxis.title.font.size=n,d.yaxis.title.font.size=n),$("#"+t.id).attr("data-layout",JSON.stringify(d)),Plotly.update(o,l,r))}if("Multiple_Line_Chart"===a){d=JSON.parse($("#"+t.id).attr("data-layout"));i&&t&&(r.xaxis.title&&(r.xaxis.title.font.color=i,d.xaxis.title.font.color=i),$("#"+t.id).attr("data-layout",JSON.stringify(d)),Plotly.update(o,l,r)),n&&t&&(r.xaxis.title&&(r.xaxis.title.font.size=n,d.xaxis.title.font.size=n),$("#"+t.id).attr("data-layout",JSON.stringify(d)),Plotly.update(o,l,r))}}function TableColunmReorder(t,e,a,i,n,o,l,r){for(var d=e,s=$(`#${d}`).find("ul"),c=0;c<a.length;c++)for(let t in n.mappingDict)a[c]===t&&$(`<li class="btn btn-sm btn-light col" name="${a[c]}" style="height:auto;margin:5px auto;overflow: auto;"> <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${n.mappingDict[t]}</li>`).appendTo(s);s.sortable(),s.sortable({stop:function(){var t=[],e=[];$("#"+r).find(".sortable-order").children().each(function(){t.push($(this).attr("name")),e.push($(this).text().trim())}),s.attr("data-column-reorder",JSON.stringify(t)),s.attr("data-column-reorder1",JSON.stringify(e))}});const u=document.getElementById(l),g=document.getElementById(r);u.addEventListener("change",function(){this.checked?g.style.display="block":g.style.display="none"});var h=document.getElementById(e);h&&$(`#${d} .saveBtn_order`).on("click",function(){function e(t){"null"!==String(t)&&$(`#${t.id}`).attr("data-xaxis",a)}var a=$(`#${d} #${o}`).attr("data-column-reorder"),l=JSON.parse($(`#${d} #${o}`).attr("data-column-reorder1"));main_div=document.getElementById(t),e(main_div);var r=$(`#${main_div.id}`).attr("data-label_color"),s=$(`#${main_div.id}`).attr("data-label_fontsize");$(`#table_example${i}`).DataTable().destroy();var c=$(`#table_example${i}`).find("thead tr"),u=$(`#table_example${i}`).find("tbody");c.empty();for(let t=0;t<l.length;t++)$(`<th>${l[t]}</th>`).appendTo(c).css({color:r,"font-size":s+"px"});u.empty();for(var g=0;g<n.content.length;g++){var h=$("<tr>");for(let t=0;t<l.length;t++)h.append("<td>"+n.content[g][l[t]]+"</td>");$(h).appendTo(u)}var p=[];for(let t=0;t<l.length;t++)p.push({title:l[t]});$(`#table_example${i}`).DataTable({columns:p,autoWidth:!1,scrollY:"50vh",scrollCollapse:!0,scrollX:"110%",orderCellsTop:!0,responsive:!0,stateSave:!0,deferRender:!0,paging:!0,lengthMenu:[[1,5,10,25,50,75,100,-1],[1,5,10,25,50,75,100,"All"]],pageLength:10,dom:"lfBrtip",sScrollX:"100%",scrollX:!0,buttons:[{extend:"collection",text:"Export",buttons:[{extend:"copy",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"excel",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"csv",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"pdf",title:"",exportOptions:{columns:":visible:not(.noVis)"}}]}],columnDefs:[{targets:"_all",className:"dt-center allColumnClass all buttons_export_class"}],colReorder:{reorderCallback:function(){}}})})}function nestedTableColunmReorder(t,e,a,i,n,o,l,r){for(var d=e,s=$(`#${d}`).find("ul"),c=0;c<a.length;c++)for(let t in n.mappingDict)a[c]===t&&$(`<li class="btn btn-sm btn-light col" name="${a[c]}" style="height:auto;margin:5px auto;overflow: auto;"> <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${n.mappingDict[t]}</li>`).appendTo(s);s.sortable(),s.sortable({stop:function(){var t=[],e=[];$("#"+r).find(".sortable-order").children().each(function(){t.push($(this).attr("name")),e.push($(this).text().trim())}),s.attr("data-column-reorder",JSON.stringify(t)),s.attr("data-column-reorder1",JSON.stringify(e))}});const u=document.getElementById(l),g=document.getElementById(r);u.addEventListener("change",function(){this.checked?g.style.display="block":g.style.display="none"});var h=document.getElementById(e);h&&$(`#${d} .saveBtn_order1`).on("click",function(){function e(t,e,i){if(t){$(`#${t.id}`).attr("data-yaxis",l);let n=[],o=a,r=[];for(let t=0;t<i.length;t++){const a=i[t],l=o.indexOf(a);-1!==l&&(n.push(a),r.push(e[l]))}$(`#${t.id}`).attr("data-operation",JSON.stringify(r)),a=n,e=r}}let l=$(`#${d} #${o}`).attr("data-column-reorder"),r=JSON.parse($(`#${d} #${o}`).attr("data-column-reorder1")),s=document.getElementById(t);var c=$(`#${s.id}`).attr("data-label_color"),u=$(`#${s.id}`).attr("data-label_fontsize");let g=JSON.parse($(`#${s.id}`).attr("data-operation")),h=JSON.parse(l);e(s,g,h);var p=[{title:"Category",field:"Category",width:150}];for(let t=0;t<r.length;t++)p.push({title:r[t],field:r[t]});new Tabulator(`#${i}`,{data:n.table_data,layout:"fitDataFill",dataTree:!0,dataTreeCollapseElement:"<i class='fas fa-minus tab_minus' style='font-size:0.8rem;color:darkgoldenrod'></i>&nbsp;&nbsp;",dataTreeExpandElement:"<i class='fas fa-plus tab_minus' style='font-size:0.8rem;color:darkgoldenrod'></i>&nbsp;&nbsp;",movableColumns:!1,resizableRows:!0,columns:p});setTimeout(()=>{$(`#${i}`).find(".tabulator-sortable").css("color",c),$(`#${i}`).find(".tabulator-headers").css("font-size",u+"px")},0)})}function ChangeAxesTitle(t,e,a,i){let n=` <label style="font-size:1.1rem">Change the title of the axes:</label>\n<input type="text" placeholder="X Axis Title" id="${t}" size="7" value="${a}">\n<input type="text" placeholder="Y Axis Title" id="${e}" size="7" value="${i}">`;return n}function globalShadowFunction(){const t=$(".global_shadow").prop("checked"),e=$(".global_shadow_x").val(),a=$(".global_shadow_y").val(),i=$(".global_shadow_blur").val(),n=$(".global_shadow_thickness").val(),o=$(".global_shadow_color").val();"true"===String(t)?$(".myDiv").css("boxShadow",e+"px "+a+"px "+i+"px "+n+"px "+o):"true"===String(t)?$(".myDiv").css("boxShadow",e+"px "+a+"px "+i+"px "+n+"px "+o):$(".myDiv").css("boxShadow","none")}function globalBorderFunction(){const t=$(".global_border").prop("checked"),e=$(".global_border_thickness").val(),a=$(".global_border_style").val(),i=$(".global_border_color").val();"true"===String(t)?$(".myDiv").css("border",e+"px "+a+" "+i):"true"===String(t)?$(".myDiv").css("border",e+"px "+a+" "+i):$(".myDiv").css("border","none")}function overflowContainer(){const t=$(".chartDivSection").attr("data-layout");let e,a=$(this).attr("data-id_parent"),i="",n="",o="",l="";l="Portrait"===String(t)?1105:715,"hover"===String($(this).attr("data-event"))?($(this).parent().find(".dropdown-content").css("top","1.5rem"),e=$(this).attr("data-id"),a=$(this).attr("data-id_parent"),i=parseInt($("#"+a).css("top")),n=parseInt($(this).parent().find(".dropdown-content").css("height")),o=i+n+10,o>l?$(this).parent().find(".dropdown-content").css("top",`-${o-l+3}px`):$(this).parent().find(".dropdown-content").css("top","1.5rem")):(e=$(this).attr("data-id"),a=$(this).attr("data-id_parent"),i=parseInt($("#"+a).css("top")),n=parseInt($("#"+e).css("height")),o=i+n,o>l&&setTimeout(()=>{$("#"+e).css("top",`${i-(o-l)-40}px`)},100))}function globalApplyButtonClick(){let t=$(this).attr("data_elementid");const e=document.getElementById(`myColor${t}`).value;$(`#analysisTabContent${t}`).find(".chartDivSection").css("background-color",e),$(`#analysisTabContent${t}`).find(".chartDivSection").attr("config_background-color",e),$(`#analysisDashboard${t} .tab-content`).attr("config_background-color",e),$(`#analysisTab${t}`).find(".nav-link").attr("config_background-color",e),"background_image"===String($(`#global_bg${t}`).val())?""===String($(`#bg_image_url${t}`).html())&&"undefined"===String($(`#bg_image_url${t}`).html())||("Landscape"===String($(`#analysisTabContent${t}`).find(".chartDivSection").attr("data-layout"))?$(`#analysisTabContent${t}`).find(".chartDivSection").css("background-size","1125px 715px"):"Portrait"===String($(`#analysisTabContent${t}`).find(".chartDivSection").attr("data-layout"))?$(`#analysisTabContent${t}`).find(".chartDivSection").css("background-size","900px 1105px"):$(`#analysisTabContent${t}`).find(".chartDivSection").css("background-size","100%"),$(`#analysisTabContent${t}`).find(".chartDivSection").css("background-image","url(data:image/png;base64,"+$(`#bg_image_url${t}`).html())):($(`#analysisTabContent${t}`).find(".chartDivSection").css("background-size","14.26% 10em"),$(`#analysisTabContent${t}`).find(".chartDivSection").css({"background-image":"linear-gradient(rgba(0, 0, 0, 1) 0.07px, transparent 0.36%), linear-gradient(90deg, rgba(0, 0, 0, 1) 0.07px, transparent 0.46px)"}))}function gridLine(){let t=$(this).attr("id");if("background_color"===String($(".global_bg_selection").val())||t.includes("process")){const t=$(this).closest(".tab-pane").find(".chartDivSection").css("background-image");"none"===String(t)?$(this).closest(".tab-pane").find(".chartDivSection").css({"background-image":"linear-gradient(rgba(0, 0, 0, 1) 0.07px, transparent 0.36%), linear-gradient(90deg, rgba(0, 0, 0, 1) 0.07px, transparent 0.46px)"}):$(this).closest(".tab-pane").find(".chartDivSection").css("background-image","none")}}function componentToHex(t){const e=t.toString(16);return"1"===String(e.length)?"0"+e:e}function rgb2hex(t,e,a){const i=a|e<<8|t<<16;return"#"+(16777216+i).toString(16).slice(1)}function hex2rgb(t){let e="",a="",i="";return"#"===String(t.charAt(0))&&(t=t.substr(1)),e=t.charAt(0)+""+t.charAt(1),a=t.charAt(2)+""+t.charAt(3),i=t.charAt(4)+""+t.charAt(5),e=parseInt(e,16),a=parseInt(a,16),i=parseInt(i,16),"rgb("+e+","+a+","+i+")"}function gradient_filter(t,e){const a=[],i=t;a.push(i);for(let t=0;t<e-1;t++){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),e=.8*parseInt(t[1],16),i=.8*parseInt(t[2],16),n=.8*parseInt(t[3],16),o="#"+componentToHex(Math.round(e))+componentToHex(Math.round(i))+componentToHex(Math.round(n));a.push(o)}return a}function resetOpacity(t,e="charts"){let a=".charts";"card_charts"===e&&(a=".card charts"),document.getElementById(t).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})}function closeFilterModal(t){document.getElementById(t).onclick=function(){let e=document.getElementById(t).parentElement.parentElement.parentElement.id;document.getElementById(e).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})}}function closeConditionModal(t){document.getElementById(t).onclick=function(){let e=document.getElementById(t).parentElement.parentElement.parentElement.id;document.getElementById(e).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})}}function chartResizeable(t,e){$(`#${t}`).resizable({start:function(e,a){document.getElementById(t).className="card charts ui-resizable ui-draggable ui-resizable-resizing"},stop:function(a,i){let n="";n=i.size.height<=250?.7*i.size.height:i.size.height>250&&i.size.height<=275?.785*i.size.height:i.size.height>275&&i.size.height<=300?.8*i.size.height:i.size.height>300&&i.size.height<=350?.82*i.size.height:i.size.height>350&&i.size.height<=420?.85*i.size.height:i.size.height>420&&i.size.height<=450?.87*i.size.height:i.size.height>450&&i.size.height<=500?.88*i.size.height:i.size.height>500&&i.size.height<=550?.89*i.size.height:i.size.height>550&&i.size.height<=650?.9*i.size.height:i.size.height>650&&i.size.height<=730?.92*i.size.height:i.size.height>730?.945*i.size.height:.895*i.size.height;let o=.995*i.size.width,l={height:n,width:o};Plotly.relayout(e,l),$(`#${t}`).attr("data-layout",JSON.stringify(e.layout))}})}function myFunction(){document.getElementById("myDropdown").classList.toggle("show")}function reset_function(t,e){t.points;for(const[a,i]of Object.entries(crossFilterDict1))if(String(a)===String(t["tab-id"])){for(let a=0;a<i.length;a++)if(String(i[a].id)===String(t.id)){const n=$("#"+i[a].id+"card").attr("data-table_name"),o=$("#"+i[a].id+"card").attr("data-"+e+"axis");$.ajax({url:`/users/${urlPath}/plotly_interaction/`,data:{operation:"interaction",table:n,column:o,val:JSON.stringify(t.points)},type:"POST",dataType:"json",success:function(a){crossfilterFunction(t,a.data,e,n,a.data2)},error:function(t){}})}break}}function crossfilterFunction(crossfilterdict,data,axis,table,data2){const points=crossfilterdict.points;for(const[key,value]of Object.entries(crossFilterDict1)){if(String(key)===String(crossfilterdict["tab-id"]))for(let i=0;i<value.length;i++)try{let datadata="",bool,tester1;if("Table"===String(value[i].plot_type)){const t=value.map(t=>t.plot_type),e=t.filter(function(t){return"Table"!=t&&"Aggregation"!=t}),a=Math.floor(Math.random()*e.length),i=t.indexOf(e[a]);var colName1=$("#"+value[i].id+"card").attr("data-xaxis"),colName=Object.keys(data2).find(t=>data2[t]===colName1)}else{let t=$("#"+value[i].id+"card").attr("data-data");if(t)try{tester1=JSON.parse(t)}catch(t){console.log(t)}var colName1=$("#"+value[i].id+"card").attr("data-xaxis"),colName=Object.keys(data2).find(t=>data2[t]===colName1)}if(String(value[i].id)!==String(crossfilterdict.id)&&$("#"+value[i].id+"interaction").is(":checked")&&String(table)===String($("#"+value[i].id+"card").attr("data-table_name"))){if("Vertical_Bar"===String(value[i].plot_type)||"Vertical_Histogram"===String(value[i].plot_type)||"Cumulative_Histogram"===String(value[i].plot_type)||"Vertical_Waterfall"===String(value[i].plot_type)||"Vertical_Area"===String(value[i].plot_type))if("Vertical_Area"===String(value[i].plot_type))for(let t=0;t<tester1[0].x.length;t++)data[colName].includes(tester1[0].x[t].toString())?$("#"+value[i].id+"card").find(".lines").find("path").eq(t).css("opacity",1):$("#"+value[i].id+"card").find(".lines").find("path").eq(t).css("opacity",.4);else for(let t=0;t<tester1[0].x.length;t++)null!=data[colName]&&(data[colName].includes(tester1[0].x[t].toString())?$("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",1):$("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",.4));if("Bubble_Chart"===String(value[i].plot_type)){for(let t=0;t<tester1[0].x.length;t++)data[colName].includes(tester1[0].x[t].toString())?($("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",.7),bool=0):$("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",.2);if(bool)for(let t=0;t<tester1[0].y.length;t++)data[colName].includes(tester1[0].y[t])?$("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",.7):$("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",.2)}if("Scatter"===String(value[i].plot_type)){bool=1;for(let t=0;t<tester1[0].x.length;t++)data[colName].includes(tester1[0].x[t])?($("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",1),bool=0):$("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",.2);if(bool)for(let t=0;t<tester1[0].y.length;t++)data[colName].includes(tester1[0].y[t])?($("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",1),bool=0):$("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",.2)}if("Horizontal_Dot_Plot"===String(value[i].plot_type)){let t=1;for(let e=0;e<tester1[0].y.length;e++)data[colName].includes(tester1[0].y[e])?($("#"+value[i].id+"card").find(".points").find("path").eq(e).css("opacity",1),t=0):$("#"+value[i].id+"card").find(".points").find("path").eq(e).css("opacity",.2);if(t)for(let e=0;e<tester1[0].x.length;e++)data[colName].includes(tester1[0].x[e])?($("#"+value[i].id+"card").find(".points").find("path").eq(e).css("opacity",1),t=0):$("#"+value[i].id+"card").find(".points").find("path").eq(e).css("opacity",.2)}if("Vertical_Box"===String(value[i].plot_type)){let t=1;datadata=[...new Set(tester1[0].x)];for(let e=0;e<datadata.length;e++)data[colName].includes(datadata[e].toString())?($("#"+value[i].id+"card").find(".boxes").find("path").eq(e).css("opacity",1),t=0):$("#"+value[i].id+"card").find(".boxes").find("path").eq(e).css("opacity",.4);if(t){datadata=[...new Set(tester1[0].y)];for(let e=0;e<datadata.length;e++)data[colName].includes(datadata[e]).toString()?($("#"+value[i].id+"card").find(".boxes").find("path").eq(e).css("opacity",1),t=0):$("#"+value[i].id+"card").find(".boxes").find("path").eq(e).css("opacity",.4)}}if("Vertical_Grouped_Box"===String(value[i].plot_type)){datadata=[...new Set(tester1[0].x)];for(let t=0;t<datadata.length;t++)data[colName].includes(datadata[t].toString())?($("#"+value[i].id+"card").find(".boxes").eq(0).find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".boxes").eq(1).find("path").eq(t).css("opacity",1)):($("#"+value[i].id+"card").find(".boxes").eq(0).find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".boxes").eq(1).find("path").eq(t).css("opacity",.4))}if("Vertical_Grouped_Violin"===String(value[i].plot_type)){datadata=[...new Set(tester1[0].x)];for(let t=0;t<datadata.length;t++)data[colName].includes(datadata[t].toString())?($("#"+value[i].id+"card").find(".violins").eq(0).find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".violins").eq(1).find("path").eq(t).css("opacity",1)):($("#"+value[i].id+"card").find(".violins").eq(0).find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".violins").eq(1).find("path").eq(t).css("opacity",.4))}"Horizontal_Grouped_Box"===String(value[i].plot_type)&&(datadata=[...new Set(tester1[0].y)]);for(let t=0;t<datadata.length;t++)data[colName].includes(datadata[t])?($("#"+value[i].id+"card").find(".boxes").eq(0).find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".boxes").eq(1).find("path").eq(t).css("opacity",1)):($("#"+value[i].id+"card").find(".boxes").eq(0).find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".boxes").eq(1).find("path").eq(t).css("opacity",.4))}if("Horizontal_Grouped_Violin"===String(value[i].plot_type)){datadata=[...new Set(tester1[0].y)];for(let t=0;t<datadata.length;t++)data[colName].includes(datadata[t])?($("#"+value[i].id+"card").find(".violins").eq(0).find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".violins").eq(1).find("path").eq(t).css("opacity",1)):($("#"+value[i].id+"card").find(".violins").eq(0).find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".violins").eq(1).find("path").eq(t).css("opacity",.4))}else if("Horizontal_Box"===String(value[i].plot_type)){datadata=[...new Set(tester1[0].y)];let t=1;for(let e=0;e<datadata.length;e++)data[colName].includes(datadata[e])?($("#"+value[i].id+"card").find(".boxes").find("path").eq(e).css("opacity",1),t=0):$("#"+value[i].id+"card").find(".boxes").find("path").eq(e).css("opacity",.4);if(t){datadata=[...new Set(tester1[0].x)];for(let e=0;e<datadata.length;e++)data[colName].includes(datadata[e])?($("#"+value[i].id+"card").find(".boxes").find("path").eq(e).css("opacity",1),t=0):$("#"+value[i].id+"card").find(".boxes").find("path").eq(e).css("opacity",.4)}}else if("Horizontal_Violin"===String(value[i].plot_type)){datadata=[...new Set(tester1[0].y)];let t=1;for(let e=0;e<datadata.length;e++)data[colName].includes(datadata[e])?($("#"+value[i].id+"card").find(".violins").find("path").eq(e).css("opacity",1),t=0):$("#"+value[i].id+"card").find(".violins").find("path").eq(e).css("opacity",.4)}else if("Vertical_Violin"===String(value[i].plot_type)){datadata=[...new Set(tester1[0].x)];let t=1;for(let e=0;e<datadata.length;e++)data[colName].includes(datadata[e].toString())?($("#"+value[i].id+"card").find(".violins").find("path").eq(e).css("opacity",1),t=0):$("#"+value[i].id+"card").find(".violins").find("path").eq(e).css("opacity",.4)}else if("Horizontal_Bar"===String(value[i].plot_type)||"Horizontal_Histogram"===String(value[i].plot_type)||"Horizontal_Waterfall"===String(value[i].plot_type)||"Horizontal_Area"===String(value[i].plot_type))if("Horizontal_Area"===String(value[i].plot_type))for(let t=0;t<tester1[0].y.length;t++)data[colName].includes(tester1[0].y[t])?$("#"+value[i].id+"card").find(".lines").find("path").eq(t).css("opacity",1):$("#"+value[i].id+"card").find(".lines").find("path").eq(t).css("opacity",.4);else for(let t=0;t<tester1[0].y.length;t++)data[colName].includes(tester1[0].y[t])?$("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",1):$("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",.4);else if("Vertical_Waterfall_Grouped"===String(value[i].plot_type))for(let t=0;t<tester1[0].x.length;t++)data[colName].includes(tester1[0].x[t].toString())?($("#"+value[i].id+"card").find(".bars").eq(0).find(".points").find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".bars").eq(0).find(".regions").find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".bars").eq(1).find(".points").find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".bars").eq(1).find(".regions").find("path").eq(t).css("opacity",1)):($("#"+value[i].id+"card").find(".bars").eq(0).find(".points").find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".bars").eq(0).find(".regions").find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".bars").eq(1).find(".points").find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".bars").eq(1).find(".regions").find("path").eq(t).css("opacity",.4));else if("Horizontal_Waterfall_Grouped"===String(value[i].plot_type))for(let t=0;t<tester1[0].y.length;t++)data[colName].includes(tester1[0].y[t])?($("#"+value[i].id+"card").find(".bars").eq(0).find(".points").find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".bars").eq(0).find(".lines").find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".bars").eq(1).find(".points").find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".bars").eq(1).find(".lines").find("path").eq(t).css("opacity",1)):($("#"+value[i].id+"card").find(".bars").eq(0).find(".points").find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".bars").eq(0).find(".lines").find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".bars").eq(1).find(".points").find("path").eq(t).css("opacity",.4),
$("#"+value[i].id+"card").find(".bars").eq(1).find(".lines").find("path").eq(t).css("opacity",.4));else if("Vertical_Bar_Grouped"===String(value[i].plot_type)||"Vertical_Bar_Stacked"===String(value[i].plot_type)||"Bar_Grouped_and_Line"===String(value[i].plot_type)||"Bar_Stacked_and_Line"===String(value[i].plot_type)||"Bar_Stacked_and_Multiple_Line"===String(value[i].plot_type))for(let t=0;t<tester1[0].x.length;t++)data[colName].includes(tester1[0].x[t].toString())?($("#"+value[i].id+"card").find(".bars").eq(0).find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".bars").eq(1).find("path").eq(t).css("opacity",1)):($("#"+value[i].id+"card").find(".bars").eq(0).find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".bars").eq(1).find("path").eq(t).css("opacity",.4));else if("Funnel_Stacked"===String(value[i].plot_type))for(let t=0;t<tester1[0].y.length;t++)data[colName].includes(tester1[0].y[t])?($("#"+value[i].id+"card").find(".bars").eq(0).find(".points").find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".bars").eq(0).find(".regions").find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".bars").eq(1).find(".points").find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".bars").eq(1).find(".regions").find("path").eq(t).css("opacity",1)):($("#"+value[i].id+"card").find(".bars").eq(0).find(".points").find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".bars").eq(0).find(".regions").find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".bars").eq(1).find(".points").find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".bars").eq(1).find(".regions").find("path").eq(t).css("opacity",.4));else if("Horizontal_Bar_Grouped"===String(value[i].plot_type)||"Horizontal_Bar_Stacked"===String(value[i].plot_type))for(let t=0;t<tester1[0].y.length;t++)data[colName].includes(tester1[0].y[t])?($("#"+value[i].id+"card").find(".bars").eq(0).find("path").eq(t).css("opacity",1),$("#"+value[i].id+"card").find(".bars").eq(1).find("path").eq(t).css("opacity",1)):($("#"+value[i].id+"card").find(".bars").eq(0).find("path").eq(t).css("opacity",.4),$("#"+value[i].id+"card").find(".bars").eq(1).find("path").eq(t).css("opacity",.4));else if("Pie_Chart"===String(value[i].plot_type)||"Treemap"===String(value[i].plot_type)||"Donut_Chart"===String(value[i].plot_type)||"Sunburst"===String(value[i].plot_type)||"Funnel_Area"===String(value[i].plot_type)||"Funnel"===String(value[i].plot_type))if("Funnel"===String(value[i].plot_type))for(let t=0;t<tester1[0].y.length;t++)data[colName].includes(tester1[0].y[t])?$("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",1):$("#"+value[i].id+"card").find(".points").find("path").eq(t).css("opacity",.2);else if("Funnel_Area"===String(value[i].plot_type))for(let t=0;t<tester1[0].text.length;t++)data[colName].includes(tester1[0].text[t])?$("#"+value[i].id+"card").find("path").eq(t).css("opacity",1):$("#"+value[i].id+"card").find("path").eq(t).css("opacity",.2);else if("Treemap"===String(value[i].plot_type))for(let t=0;t<tester1[0].labels.length;t++)data[colName].includes(tester1[0].labels[t])?$("#"+value[i].id+"card").find(".treemap").find("path").eq(t+1).css("opacity",1):$("#"+value[i].id+"card").find(".treemap").find("path").eq(t+1).css("opacity",.2);else for(let t=0;t<tester1[0].labels.length;t++)data[colName].includes(tester1[0].labels[t])?$("#"+value[i].id+"card").find("path").eq(t).css("opacity",1):$("#"+value[i].id+"card").find("path").eq(t).css("opacity",.2);else if("Table"===String(value[i].plot_type)){let t=[...new Set(data[colName])],e="";for(let a=0;a<t.length;a++)a<t.length-1?e+="\\b"+t[a]+"\\b|":e+="\\b"+t[a]+"\\b";var oTable=$("#table_example"+value[i].id).DataTable(),col2=JSON.parse($("#"+value[i].id+"card").attr("data-xaxis")),ind=col2.indexOf(colName1);oTable.column(ind).search(e,!0,!1).draw()}else if("Aggregation"===String(value[i].plot_type)){let arr=JSON.parse($("#"+value[i].id+"card").attr("data-filter_input_final")),obj={...data};if(arr.length>0)for(let item=0;item<arr.length;item++){let col=arr[item].column_name,column=Object.keys(data2).find(t=>data2[t]===col),condition=arr[item].condition_name,filter_value=arr[item].filter_value,data_category=arr[item].data_category,ind=[];if("Numerical"===data_category&&""!=filter_value)"Equal to"===condition&&(ind=obj[column].map((t,e)=>t==filter_value?e:"").filter(String)),"Not Equal to"===condition&&(ind=obj[column].map((t,e)=>t!=filter_value?e:"").filter(String)),"Greater than"===condition&&(ind=obj[column].map((t,e)=>t>filter_value?e:"").filter(String)),"Smaller than"===condition&&(ind=obj[column].map((t,e)=>t<filter_value?e:"").filter(String));else{let cond="";if(""!=filter_value){for(let t=0;t<filter_value.length;t++)t!=filter_value.length-1?cond+=`elm == filter_value[${t}] || `:cond+=`elm == filter_value[${t}] `;ind=obj[column].map((elm,idx)=>eval(cond)?idx:"").filter(String)}}if(""!=filter_value)for(let t in obj){let e=[];if(ind.length>0){for(let a=0;a<obj[t].length;a++)for(let i=0;i<ind.length;i++)a==ind[i]&&e.push(obj[t][a]);obj[t]=e}else obj[t]=e}}let count=obj[colName],unique_data=[...new Set(count)],data_operation=$("#"+value[i].id+"card").attr("data-operation");if("Count"===data_operation)$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(count.length);else if("Sum"===data_operation){let t=0;for(let e=0;e<count.length;e++)t+=count[e];$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(t)}else if("Maximum"===data_operation){let t=Math.max(...count);$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(t)}else if("Minimum"===data_operation){let t=Math.min(...count);$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(t)}else if("Average"===data_operation){let t=0;for(let e=0;e<count.length;e++)t+=count[e];let e=(t/count.length).toFixed(2);$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(e)}else if("Median"===data_operation){const t=t=>{t.sort(function(t,e){return t-e});var e=Math.floor(t.length/2);return t.length%2?t[e]:(t[e-1]+t[e])/2};$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(t(count))}else if("Count Distinct"===data_operation){let t=unique_data.length;$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(t)}else if("Variance"===data_operation){const t=(t=[])=>{if(!t.length)return 0;const e=t.reduce((t,e)=>t+e),{length:a}=t,i=e/a;let n=0;return t.forEach(t=>{n+=(t-i)*(t-i)}),n/=a,n};$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(t(count))}else if("Standard Deviation"===data_operation){const t=t=>{const e=t.length,a=t.reduce((t,e)=>t+e)/e;return Math.sqrt(t.map(t=>Math.pow(t-a,2)).reduce((t,e)=>t+e)/e)};$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(t(count))}else if("Kurtosis"===data_operation){const t=t=>{for(var e,a=t.length,i=t.reduce((t,e)=>t+e,0),n=i/t.length,o=0,l=0,r=0;r<a;r++)e=t[r]-n,o+=e*e,l+=e*e*e*e;return(a-1)/((a-2)*(a-3))*(a*(a+1)*l/(o*o)-3*(a-1))};$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(t(count))}else if("Skewness"===data_operation){const t=t=>{for(var e,a=t.reduce((t,e)=>t+e,0),i=a/t.length,n=0,o=0,l=0;l<t.length;l++)e=t[l]-i,n+=e*e,o+=e*e*e;var r=t.length-1,d=Math.sqrt(n/r),s=t.length,c=Math.pow(d,3);return s*o/((s-1)*(s-2)*c)};$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(t(count))}else if("First"===data_operation){let t=count[0];$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(t)}else if("Last"===data_operation){let t=count[count.length-1];$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(t)}else if("Top N"===data_operation||"Bottom N"===data_operation){let t,e;"Top N"===data_operation?(t=count.sort((t,e)=>e-t),e=unique_data.sort((t,e)=>e-t)):(t=count.sort((t,e)=>t-e),e=unique_data.sort((t,e)=>t-e));let a=$("#"+value[i].id+"card").attr("data-operation_n"),n=$("#"+value[i].id+"card").attr("data-computed_number"),o=JSON.parse($("#"+value[i].id+"card").attr("data-agg_distinct"));if("Sum"===a){let a=0;if(o)if(n>e.length)for(let t=0;t<e.length;t++)a+=e[t];else for(let t=0;t<n;t++)a+=e[t];else if(n>t.length)for(let e=0;e<t.length;e++)a+=t[e];else for(let e=0;e<n;e++)a+=t[e];$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(a)}else if("Maximum"===a||"Minimum"===a)if("Maximum"===a){let e=t[0];$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(e)}else{let a;a=o?e.slice(0,n):t.slice(0,n),$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(a[a.length-1])}else if("Count"===a||"Count Distinct"===a){let l;l=o||"Count Distinct"===a?e.slice(0,n):t.slice(0,n),$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(l.length)}else if("Average"===a){let a=0,l,r;if(o){r=e.slice(0,n);for(let t=0;t<r.length;t++)a+=r[t];l=(a/r.length).toFixed(2)}else{r=t.slice(0,n);for(let t=0;t<r.length;t++)a+=r[t];l=(a/r.length).toFixed(2)}$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(l)}else if("Median"===a){let a;const l=t=>{t.sort(function(t,e){return t-e});var e=Math.floor(t.length/2);return t.length%2?t[e]:(t[e-1]+t[e])/2};a=o?e.slice(0,n):t.slice(0,n),$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(l(a))}else if("Variance"===a){let a;const l=(t=[])=>{if(!t.length)return 0;const e=t.reduce((t,e)=>t+e),{length:a}=t,i=e/a;let n=0;return t.forEach(t=>{n+=(t-i)*(t-i)}),n/=a,n};a=o?e.slice(0,n):t.slice(0,n),$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(l(a))}else if("Standard Deviation"===a){let a;const l=t=>{const e=t.length,a=t.reduce((t,e)=>t+e)/e;return Math.sqrt(t.map(t=>Math.pow(t-a,2)).reduce((t,e)=>t+e)/e)};a=o?e.slice(0,n):t.slice(0,n),$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(l(a))}else if("Kurtosis"===a){let a;function findKurtosis(t){for(var e,a=t.length,i=t.reduce((t,e)=>t+e,0),n=i/t.length,o=0,l=0,r=0;r<a;r++)e=t[r]-n,o+=e*e,l+=e*e*e*e;return(a-1)/((a-2)*(a-3))*(a*(a+1)*l/(o*o)-3*(a-1))}a=o?e.slice(0,n):t.slice(0,n),$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(findKurtosis(a))}else if("Skewness"===a){let a;const l=t=>{for(var e,a=t.reduce((t,e)=>t+e,0),i=a/t.length,n=0,o=0,l=0;l<t.length;l++)e=t[l]-i,n+=e*e,o+=e*e*e;var r=t.length-1,d=Math.sqrt(n/r),s=t.length,c=Math.pow(d,3);return s*o/((s-1)*(s-2)*c)};a=o?e.slice(0,n):t.slice(0,n),$("#"+value[i].id+"card").find("#"+value[i].id+"xtitle").eq(0).text(l(a))}}}}finally{}break}}function saveGroupConfigAnalysis(t,e){const a={};let i="",n=window.location.pathname,o=n.indexOf("/",n.indexOf("/")+1),l=n.indexOf("/",n.indexOf("/")+o+1),r=n.indexOf("/",n.indexOf("/")+l+1),d=(n.substring(o+1,l),n.substring(l+1,r));"Build"!=d&&"Edit"!=d&&(d="User"),a.ElementID=t,null!=$(`#${t+"-tab"}`).children()[0]?a.ParentL3Name=$(`#${t+"-tab"}`).children()[0].innerText:a.ParentL3Name=$(`#${t+"_tab_content"}`).attr("data-header_name"),a.ParentULID="analysisTab"+t,a.ParentTabContainerID="analysisTabContent"+t;const s=[],c=[];let u=!1;$(`#analysisTab${t}`).find(".nav-link").each(function(){$(this).attr("id").includes("indexTab")&&(u=!0)}),a.indexTab=u,$(`#analysisTab${t}`).find(".nav-link").each(function(){const e=$(this).closest(".nav-tabs").attr("id").split("analysisTab")[1],a=$(this).attr("id").replace("analysistab"+e,"");let i=$(`#analysisrow${t}${a}`).css("background-image");i="none"===String(i)?"no":"yes";const n=$(`#analysisDashboard${t} .tab-content`).attr("config_background-color"),o=$(".indextabBG").val(),l=$(".indextabFC").val(),r=$(".themeColor").val(),d=$(".themeColor1").val(),u=$(".global_header_color").val(),g=$(".global_header_bgcolor").val(),h=$(".global_header_fontsize").val(),p=$(".global_header_fontweight").val(),f=$(".global_header_fontstyle").val(),_=$(".global_header_alignment").val(),m=$(".global_shadow").prop("checked"),y=$(".global_border").prop("checked"),b=$(".global_shadow_color").val(),v=$(".global_shadow_x").val(),x=$(".global_shadow_y").val(),S=$(".global_shadow_blur").val(),q=$(".global_shadow_thickness").val(),B=$(".global_border_color").val(),w=$(".global_border_thickness").val(),E=$(".global_border_style").val(),I=windowLocationAttr.href.split("/"),z=I[I.length-2],k=$(`#bg_image_name${t}`).html(),T=$(`#global_bg${t}`).val();let N="no";"true"===String($(".global_gradient_color").prop("checked"))&&(N="yes");let C="Index";null!=$(this).find(".tabname")[0]&&(C=$(this).find(".tabname")[0].innerText);const D={aID:$(this).attr("id"),grid:i,aHref:$(this).attr("href"),chartDivContainer:$(this).find(".tabname").attr("data-tab_ct"),subTabName:C,commentButtonID:`AddComment${t}`+a,pdfButtonID:`analysisPDF${t}`+a,deleteButtonID:"removeTab"+t+a,tabHeaderID:`tabHeader${t}`+a,slicerConfigButtonId:`slicerConfig${t}`+a,"tab_background-color":n,outer_color:r,inner_color:d,g_color:N,header_color:u,header_bg_color:g,header_fontsize:h,header_fontweight:p,header_fontstyle:f,global_header_alignment:_,global_checkBox:m,indexCard_BGColor:o,indexCard_FontColor:l,global_checkBox_border:y,global_shadowColor:b,global_shadowXOffset:v,global_shadowYOffset:x,global_shadowBlur:S,global_shadowThickness:q,global_borderColor:B,global_borderThickness:w,global_borderStyle:E,global_bg_name:k,global_bg_value:T,global_bg_folder:z},H={slicerTable:[],slicerParameter:[],slicerBoolean:[],slicerReload:[],multipleSlicer:[]};$(`.selectSlicerConfig_${t}${a}`).each(function(){const t=$(this).attr("data-slicertable"),e=$(this).attr("data-slicerColumn");H.slicerTable.push(t),H.slicerParameter.push(e);const a=$(this).val();$(this).find("option[value='']").length>0?H.slicerBoolean.push("True"):H.slicerBoolean.push("False"),H.slicerReload.push(a),$(this).attr("multiple")?H.multipleSlicer.push(!0):H.multipleSlicer.push(!1)}),$("#analysisrow"+t+a).find(".charts").each(function(){const t=$(this).attr("id").split("card")[0];c.push($("#"+t+"interaction").prop("checked"))}),D.crossFilter=c,D.tabSlicerConfig=H,$(`${$(this).attr("href")}`).css("display","block");const O=$(`#${$(this).find(".tabname").attr("data-tab_ct")}`).height();D.chartDivContainerHeight=O,s.push(D),$(`${$(this).attr("href")}`).css("display","")}),a.subTabContent=s,a.slicerTabConnectDict=slicerTabConnectDict;const g=[];$(`#analysisTabContent${t}`).find(".chartDivSection").each(function(){const t={};t.ParentTabID=$(this).parent().attr("id"),$(`#${$(this).parent().attr("id")}`).css("display","block"),t.ParentContainerID=$(this).attr("id");const e=[];$(this).find(".charts").each(function(){const t=$(this).parent().attr("id"),a=$(this).find("h5").css("font-size");let n=$(this).find("h5")[0].innerText;const o=$(this).attr("data-conditional_table"),l=$(this).attr("data-conditional_columns_value"),r=parseInt($(this).attr("data-header_fontsize")),d=$(this).attr("data-header_fontweight"),s=$(this).attr("data-header_fontstyle"),c=$(this).attr("data-header_color"),u=$(this).attr("data-header_bgcolor"),g=$(this).attr("data-header_alignment"),h=$(this).attr("data-id"),p=$(this).attr("data-subtype"),f=(document.querySelector(`#${t}`).offsetHeight,$(this).attr("data-table_name"));let _,m="",y="",b="",v="";$(this).css("background-color");let x=$(this).attr("data-color");const S=$(this).attr("data-bgcolor"),q=$(this).attr("data-globalbg"),B=$(this).attr("data-grad_color"),w=$(this).attr("data-global_bg_color"),E=$(this).attr("data-global_ind_color"),I=$(this).attr("data-config_data_value"),z=$(this).attr("data-config_valuesize"),k=$(this).attr("data-config_titlesize"),T=$(this).attr("data-config_color"),N=$(this).attr("data-config_gridlines"),C=$(this).attr("data-config_labels");let D=$(this).attr("data-config_xrange");const H=$(this).attr("data-config_x_axis_title"),O=$(this).attr("data-config_y_axis_title"),V=$(this).attr("data-legend_x"),P=$(this).attr("data-config_label_placement"),F=$(this).attr("data-legend_y"),A=$(this).attr("data-config_element_color"),G=$(this).attr("data-element_label");let M="";"undefined"===String(D)&&(D="");let J=$(this).attr("data-config_yrange");"undefined"===String(J)&&(J=""),x=$(this).css("background-color");const L=$(this).attr("data-shadecolor"),j=$(this).attr("data-shadowX"),W=$(this).attr("data-shadowY"),Y=$(this).attr("data-shadowblurry"),R=$(this).attr("data-shadowThick"),X=$(this).attr("data-shadowon"),K=$(this).attr("data-borderColor"),U=$(this).attr("data-borderStyle"),Q=$(this).attr("data-borderThickness"),Z=$(this).attr("data-borderon");let tt=$(this).height(),et=$(this).width(),at="",it="";"true"==$(this).attr("data-borderon")&&(tt=$(this).height()+2*Q,et=$(this).width()+2*Q),null!=$(this).attr("data-filter_columns")&&(m=JSON.parse($(this).attr("data-filter_columns"))),null!=$(this).attr("data-filter_input_final")&&(M=JSON.parse($(this).attr("data-filter_input_final"))),null!=$(this).attr("data-filter_dtrange")&&(i=JSON.parse($(this).attr("data-filter_dtrange"))),"Nested_Table"!==String(p)&&"Aggregation"!==String(p)&&"Image"!==String(p)&&"Table"!==String(p)&&(at=$(this).attr("data-layout"),it=JSON.parse($(this).attr("data-data")),changedtext=$(this).attr("data-changed_text"),"undefined"!==String($(this).attr("data-line_column"))&&(_=$(this).attr("data-line_column"))),"Aggregation"===String(p)&&(y=$(this).find("p").css("font-size"),n=$(this).find("h5")[0].innerText,b=$(this).find("p")[0].innerText,v=$(this).find("h5").attr("data_value")),"Pie_Chart"!==String(p)&&"Treemap"!==String(p)&&"Donut_Chart"!==String(p)||(it[0].labels=[],it[0].values=[]),"Sunburst"===String(p)&&(it[0].labels=[],it[0].values=[],it[0].ids=[],it[0].parents=[]),"Vertical_Bar"!==String(p)&&"Funnel"!==String(p)&&"Horizontal_Bar"!==String(p)&&"Line"!==String(p)&&"Stepped_Line"!==String(p)&&"Area"!==String(p)&&"Horizontal_Area"!==String(p)&&"Scatter"!==String(p)&&"2D_Histogram_Contour"!==String(p)&&"Vertical_Box"!==String(p)&&"Horizontal_Box"!==String(p)&&"Horizontal_Dot_Plot"!==String(p)&&"Scatter_with_Straight_Lines_and_Markers"!==String(p)&&"Vertical_Violin"!==String(p)&&"Horizontal_Violin"!==String(p)&&"3D_Scatter_Plot"!==String(p)||(it[0].x=[],it[0].y=[]),"3D_Scatter_Plot"===String(p)&&(it[0].z=[]),"Vertical_Waterfall"!==String(p)&&"Horizontal_Waterfall"!==String(p)||(it[0].x=[],it[0].y=[],it[0].measure=[]),"Funnel_Area"===String(p)&&(it[0].text=[],it[0].values=[]),"Vertical_Histogram"!==String(p)&&"Cumulative_Histogram"!==String(p)||(it[0].x=[]),"Horizontal_Histogram"===String(p)&&(it[0].y=[]),"Angular_Gauge"===String(p)&&(it[0].value=[],it[0].title=[],it[0].gauge.axis.range=[]),"Bullet_Gauge"===String(p)&&(it[0].value=[],it[0].gauge.axis.range=[]),"Vertical_Bar_Stacked"!==String(p)&&"Vertical_Grouped_Box"!==String(p)&&"Vertical_Bar_Grouped"!==String(p)&&"Vertical_Line_Stacked"!==String(p)&&"Vertical_Area_Stacked"!==String(p)&&"Horizontal_Area_Stacked"!==String(p)&&"Vertical_Waterfall_Grouped"!==String(p)&&"Horizontal_Bar_Stacked"!==String(p)&&"Horizontal_Grouped_Box"!==String(p)&&"Horizontal_Bar_Grouped"!==String(p)&&"Horizontal_Waterfall_Grouped"!==String(p)&&"Funnel_Stacked"!==String(p)||(it[0].x=[],it[1].x=[],it[0].y=[],it[1].y=[]),"Vertical_Waterfall_Grouped"===String(p)&&(it[0].measure=[],it[1].measure=[]);const nt=$(this).attr("data-xaxis"),ot=$(this).attr("data-yaxis"),lt=$(this).attr("data-secondcolumn"),rt=$(this).attr("data-computed_number"),dt=$(this).attr("data-is_title"),st=$(this).attr("data-title_value"),ct=$(this).attr("data-total_y"),ut=$(this).attr("data-operation_n"),gt=$(this).attr("data-agg_distinct"),ht=$(this).attr("data-operation");"Nested_Table"!==String(p)&&"Aggregation"!==String(p)&&"Image"!==String(p)&&"Table"!==String(p)?e.push({is_title:dt,title_value:st,conditional_columns_value:l,conditional_table:o,header_alignment:g,header_fontstyle:s,header_fontsize:r,header_fontweight:d,header_color:c,header_bgcolor:u,data_shadowon:X,data_shadecolor:L,data_shadowX:j,data_shadowY:W,data_shadowblurry:Y,data_shadowThick:R,data_borderColor:K,data_borderStyle:U,data_borderon:Z,data_borderThickness:Q,total_y:ct,color:x,plot_bg_color:S,global_bg:q,grad_color:B,global_bgcolor:w,global_ind_color:E,element_label:G,config_element_color:A,config_data_value:I,config_valuesize:z,config_titlesize:k,config_label_placement:P,legend_x:V,legend_y:F,computed_number:rt,operation_n:ut,agg_distinct:gt,operation:ht,tableName:f,chartheader:n,config_x_axis_title:H,config_y_axis_title:O,config_yrange:J,config_xrange:D,config_gridlines:N,config_labels:C,x_axis:nt,y_axis:ot,second_column:lt,filters:m,filter_input_final:M,line_column:_,height:tt,width:et,position:$(this).position(),layout:JSON.parse(at),data:it,id:h,graph_subtype:p,changed_text:JSON.parse(changedtext),config_color:T,backgroundcolor:x,drange:i}):e.push({is_title:dt,title_value:st,conditional_columns_value:l,conditional_table:o,header_alignment:g,header_fontstyle:s,header_fontsize:r,header_fontweight:d,header_color:c,header_bgcolor:u,data_shadowon:X,data_shadecolor:L,data_shadowX:j,data_shadowY:W,data_shadowblurry:Y,data_shadowThick:R,data_borderColor:K,data_borderStyle:U,data_borderon:Z,data_borderThickness:Q,total_y:ct,color:x,plot_bg_color:S,global_bg:q,grad_color:B,global_bgcolor:w,global_ind_color:E,element_label:G,config_element_color:A,config_data_value:I,config_valuesize:z,config_titlesize:k,config_label_placement:P,legend_x:V,legend_y:F,computed_number:rt,operation_n:ut,agg_distinct:gt,operation:ht,tableName:f,chartheader:n,config_x_axis_title:H,config_y_axis_title:O,chart_title:b,config_yrange:J,config_xrange:D,config_gridlines:N,config_labels:C,data_value:v,x_axis:nt,y_axis:ot,second_column:lt,height:tt,filters:m,filter_input_final:M,height:tt,width:et,position:$(this).position(),id:h,graph_subtype:p,backgroundcolor:x,config_color:T,font_size:a,titlefontsize:y,drange:i})}),$(this).find(".commentboxcard").each(function(){const t=$(this).find(".commentbox").html(),a=$(this).height(),i=$(this).width();if("undefined"===String($(this).attr("data-id")))e.push({chartType:"Textbox",height:a,width:i,position:$(this).position(),textboxvalue:t});else{const n=$(this).attr("data-id");e.push({chartType:"Textbox",height:a,width:i,position:$(this).position(),textboxvalue:t,id_text_editor:n})}}),t.chartJson=e,g.push(t),$(`#${$(this).parent().attr("id")}`).css("display","")}),a.subTabChartDetails=g,null!=$(`#saveShare${t}`).attr("data-custom-message")?custom_messages_in_analysis=$(`#saveShare${t}`).attr("data-custom-message"):custom_messages_in_analysis=JSON.stringify({}),$.ajax({url:`/users/${urlPath}/userConfigSave/`,data:{operation:"saveGroupAnalysisTab",analysisDataDict:JSON.stringify(a),groupname:JSON.stringify(e),screenURL:windowLocation,element_id:t,custom_messages_in_analysis:custom_messages_in_analysis},type:"POST",dataType:"json",success:function(e){if(null!=$(`#saveShare${t}`).attr("data-custom-message")&&""!=$(`#saveShare${t}`).attr("data-custom-message")){var a=JSON.parse($(`#saveShare${t}`).attr("data-custom-message"));Swal.fire({icon:"success",iconHtml:`<i class = "${a.icon}"></i>`,text:e.data}).then(function(){location.reload()})}else Swal.fire({icon:"success",text:e.data}).then(function(){location.reload()})},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}function plotFilterFunction(t,e){const a={tableName:t,filters:e,operation:"filter_data"};$.ajax({url:`/users/${urlPath}/create_filter_inputs/`,data:a,type:"POST",dataType:"json",success:function(t){if(null!=t.filter_inputs){let a='<div class="row"><div class="col-12 card-header" style="font-size: medium; color:var(--primary-color); font-weight: bold;"><input type="checkbox" id="filter_dtrange" onclick="showDaterange.call(this)" class="float-right mt-2 checkboxinput custom-checkbox" style="margin: 0px; margin-left:-11px"><p style="margin:0px;margin-left:-11px">Date Range</p></div><div class="col-12 showrange" style="display:none;">\n        <select class="select2 form-control seldatecol"><option value="" disabled selected>------</option></select><div>\n        <div style="margin-left:-0.7em;">\n        <div class="col-6"> <div class="input-group date">\n        <b style="margin-right:1em;font-weight:600;color:var(--primary-color);margin-top: 1rem;">Start Date:</b>\n                                <div style="display:flex;">\n                                <input type="text" style="width:11rem;" id="startdate" class="datepickerinput p-2 " data-dp-config="{&quot;id&quot;: &quot;dp_2&quot;, &quot;picker_type&quot;: &quot;DATE&quot;, &quot;linked_to&quot;: null, &quot;options&quot;: {&quot;showClose&quot;: true, &quot;showClear&quot;: true, &quot;showTodayButton&quot;: true, &quot;format&quot;: &quot;YYYY-MM-DD&quot;}}">\n                                <div class="input-group-addon input-group-append input-group-text" style="padding: 0.40rem .30rem"> <i class="glyphicon glyphicon-calendar"></i></div></div></div></div>\n\n                                <div class="col-6"> <div class="input-group date">\n                                <b style="margin-right:1em;font-weight:600;color:var(--primary-color);margin-top: 1rem;">End Date:</b>\n                                <div style="display:flex;">\n                                                        <input style="width:11rem;" type="text" id="enddate" class="datepickerinput p-2 " data-dp-config="{&quot;id&quot;: &quot;dp_2&quot;, &quot;picker_type&quot;: &quot;DATE&quot;, &quot;linked_to&quot;: null, &quot;options&quot;: {&quot;showClose&quot;: true, &quot;showClear&quot;: true, &quot;showTodayButton&quot;: true, &quot;format&quot;: &quot;YYYY-MM-DD&quot;}}">\n                                                        <div class="input-group-addon input-group-append input-group-text" style="padding: 0.40rem .30rem"> <i class="glyphicon glyphicon-calendar"></i></div></div></div></div>\n         </div>\n     </div></div>';for(i in cols=[],cols_ver=[],t.filter_inputs){const e=t.filter_inputs[i].field_name,n=t.filter_inputs[i].column_name,o=t.filter_inputs[i].data_type;if(["CharField","TextField","DateField","DateTimeField","TimeField","BooleanField"].includes(o)){for(j in a+=`<div class="col-12 form-group">\n                        <label class="acies_label col-md-12" style="color:darkgoldenrod;font-size:larger;margin-left:-0.2rem">${n}:</label>\n                        <select  class="select2 categorical_filter_inputs form-control" name="${e}" data-data_type="${o}"\n                          required multiple>`,t.filter_inputs[i].unique_data)a+=`<option value="${t.filter_inputs[i].unique_data[j]}">${t.filter_inputs[i].unique_data[j]}</option>`;a+="</select></div>"}["AutoField","IntegerField","BigIntegerField","FloatField"].includes(o)&&(a+=`<div class="col-12 form-group">\n                        <div class=""><b style="font-weight:bold;font-size:larger;color:darkgoldenrod" class="numerical_column_name">${n}:</b></div>\n                        <br>\n                        <div class="row">\n                        <div class="col-6">\n                        <select class="select2 numerical_column_condition" name="${e}" data-data_type="${o}" required>\n                        <option value="Equal to">Equal to</option>\n                        <option value="Not Equal to">Not Equal to</option>\n                        <option value="Greater than">Greater than</option>\n                        <option value="Smaller than">Smaller than</option>\n                        <option value="Top N">Top N</option>\n                        </select>\n                        </div>\n                        <div class="col-5">\n                        <input type="number" placeholder="${n}" name="${e}_input" style="padding-left:0.5rem" step="any" class="numberinput numerical_column_value form-control">\n                        </div>\n                        </div>\n                        </div>`),["DateField","DateTimeField"].includes(o)&&(cols.push(e),cols_ver.push(n))}a+="<br></div>",$(`.filter_card_body${elementID}`).append(a);for(let t=0;t<cols.length;t++)$(".seldatecol").append(`<option value="${cols[t]}">${cols_ver[t]}</option>`);var e=JSON.parse($("#startdate").attr("data-dp-config"));$("#startdate").datetimepicker({showClose:!0,showClear:!0,showTodayButton:!0,format:e.options.format,locale:"en"}),$("#enddate").datetimepicker({showClose:!0,showClear:!0,showTodayButton:!0,format:e.options.format,locale:"en"}),$("select.select2:not(.modal select.select2)").each(function(){parent=$(this).parent(),$(this).select2({dropdownParent:parent})}),$(".modal select.select2").each(function(){$(this).select2()})}},error:function(){}})}function gradientColorApply(t,e,a,i,n=""){$(`#${a}`).click(function(){if("true"===String($(this).prop("checked"))){$(`#${t}`).val();let a=[],o=$(`#${t}`).val();a.push(o);for(let t=0;t<n-1;t++){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),e=.8*parseInt(t[1],16),i=.8*parseInt(t[2],16),n=.8*parseInt(t[3],16),o="#"+componentToHex(Math.round(e))+componentToHex(Math.round(i))+componentToHex(Math.round(n));a.push(o)}let l={marker:{color:a}};Plotly.restyle(i,l),$(`#${e}`).attr("data-data",JSON.stringify(i.data)),$(`#${e}`).attr("data-grad_color","yes")}else{let a=[],o=$(`#${t}`).val();for(let t=0;t<n;t++)a.push(o);let l={marker:{color:a}};Plotly.restyle(i,l),$(`#${e}`).attr("data-data",JSON.stringify(i.data)),$(`#${e}`).attr("data-grad_color","no")}})}function showDaterange(){$(this).is(":checked")?$(this).parent().parent().find(".showrange").css("display","block"):$(this).parent().parent().find(".showrange").css("display","none")}var graph_subtype_array=["Bubble_Chart","Vertical_Bar","Vertical_Bar_Stacked","Vertical_Bar_Grouped","Horizontal_Bar","Horizontal_Bar_Stacked","Horizontal_Bar_Grouped","Scatter","Scatter_with_Straight_Lines_and_Markers","Horizontal_Dot_Plot","Line","Vertical_Line_Stacked","Stepped_Line","Vertical_Area","Vertical_Area_Stacked","Horizontal_Area","Horizontal_Area_Stacked","Vertical_Waterfall","Vertical_Waterfall_Grouped","Horizontal_Waterfall_Grouped","Horizontal_Waterfall","Vertical_Box","Vertical_Grouped_Box","Horizontal_Box","Horizontal_Grouped_Box","Vertical_Histogram","Cumulative_Histogram","Horizontal_Histogram","2D_Histogram_Contour","Stacked_Histogram","Vertical_Violin","Horizontal_Violin","Vertical_Grouped_Violin","Horizontal_Grouped_Violin","Bar_Grouped_and_Line","Bar_Stacked_and_Line","Bar_Stacked_and_Multiple_Line","Multiple_Line_Chart","Funnel","Funnel_Stacked"];$(".global_shadow").change(globalShadowFunction),$(".global_shadow_x").change(globalShadowFunction),$(".global_shadow_y").change(globalShadowFunction),$(".global_shadow_blur").change(globalShadowFunction),$(".global_shadow_thickness").change(globalShadowFunction),$(".global_shadow_color").change(globalShadowFunction),$(".global_border").change(globalBorderFunction),$(".global_border_thickness").change(globalBorderFunction),$(".global_border_style").change(globalBorderFunction),$(".global_border_color").change(globalBorderFunction),$(".charts").draggable({containment:"parent",handle:".handle_for_draggable_charts",opacity:.5,scrollSpeed:200,scrollSensitivity:100,zIndex:100,drag:function(t,e){const a=1/.94;e.position.left,e.position.right,e.position.top,e.position.bottom;__dx=(e.position.left-e.originalPosition.left)*a,__dx1=(e.position.right-e.originalPosition.right)*a,__dy=(e.position.top-e.originalPosition.top)*a,__dy1=(e.position.bottom-e.originalPosition.bottom)*a,e.position.left=e.originalPosition.left+__dx,e.position.right=e.originalPosition.right+__dx1,e.position.top=e.originalPosition.top+__dy,e.position.bottom=e.originalPosition.bottom+__dy1}}),$(".draggable_div").draggable({containment:"parent",opacity:.5,scrollSpeed:200,scrollSensitivity:100}),$(".datacards").draggable({containment:"parent",handle:".handle_for_draggable_charts",opacity:.5,scrollSpeed:200,scrollSensitivity:100}),$(".contentEditable").each(function(){$(this).on("click",function(){$(this).attr("contenteditable","true"),$(this).focus()}),$(this).focusout(function(){$(this).removeAttr("contenteditable")})}),
$(".modal-dialog").draggable({handle:".modal-header",scrollSpeed:200,scrollSensitivity:100}),$("ul.nav-tabs a").click(function(t){t.preventDefault(),$(this).tab("show")}),$(".global_applyButton").on("click",globalApplyButtonClick),$(".card_global").click(function(){$(this).find("i").toggleClass("fas fa-plus fas fa-minus")}),$(".global_header_color").change(function(){const t=$(this).val();$(".inner-div_title").css("color",t)}),$(".global_header_fontsize").change(function(){const t=$(this).val()+"px",e=parseInt($(this).val())+20+"px";$(".inner-div_title").css("font-size",t),$(".inner-div_header").css("height",e)}),$(".global_header_fontstyle").change(function(){const t=$(this).val();$(".inner-div_title").css("font-family",t)}),$(".global_header_alignment").change(function(){const t=$(this).val();$(".inner-div_title").css("text-align",t)}),$(".global_header_fontweight").change(function(){const t=$(this).val();$(".inner-div_title").css("font-weight",t)}),$(".global_header_bgcolor").change(function(){const t=$(this).val();$(".inner-div_header").css("background-color",t)}),$("#saveall").click(function(){let t=windowLocation,e=t.indexOf("/",t.indexOf("/")+1),a=t.indexOf("/",t.indexOf("/")+e+1),i=t.indexOf("/",t.indexOf("/")+a+1),n=(t.substring(e+1,a),t.substring(a+1,i));"Build"!=n&&"Edit"!=n&&(n="User"),$(".savealltab").each(function(){const t=$(this).attr("id");let e=[];$(this).parent().css("display");$(this).parent().css("display","block");const a=document.querySelector(`#${t}`).offsetHeight,i="analysistab"+t.split("w")[1],n=$(`#${i}`).children()[0].children[0].innerText;$(".charts").each(function(){const i=$(this).parent().attr("id");if(String(i)===String(t)){const i=$(this).find("h5")[0].innerText,o=$(this).attr("data-layout"),l=JSON.parse($(this).attr("data-data")),r=$(this).attr("data-id"),d=$(this).attr("data-subtype"),s=$(this).attr("data-changed_text");"Pie_Chart"!==String(d)&&"Treemap"!==String(d)&&"Donut_Chart"!==String(d)||(l[0].labels=[],l[0].values=[]),"Sunburst"===String(d)&&(l[0].labels=[],l[0].values=[],l[0].ids=[],l[0].parents=[]),"Vertical_Bar"!==String(d)&&"Funnel"!==String(d)&&"Horizontal_Bar"!==String(d)&&"Line"!==String(d)&&"Stepped_Line"!==String(d)&&"Area"!==String(d)&&"Horizontal_Area"!==String(d)&&"Scatter"!==String(d)&&"2D_Histogram_Contour"!==String(d)&&"Vertical_Box"!==String(d)&&"Horizontal_Box"!==String(d)&&"Horizontal_Dot_Plot"!==String(d)&&"Scatter_with_Straight_Lines_and_Markers"!==String(d)&&"Vertical_Violin"!==String(d)&&"Horizontal_Violin"!==String(d)&&"3D_Scatter_Plot"!==String(d)||(l[0].x=[],l[0].y=[]),"3D_Scatter_Plot"===String(d)&&(l[0].z=[]),"Vertical_Waterfall"!==String(d)&&"Horizontal_Waterfall"!==String(d)||(l[0].x=[],l[0].y=[],l[0].measure=[]),"Funnel_Area"===String(d)&&(l[0].text=[],l[0].values=[]),"Vertical_Histogram"!==String(d)&&"Cumulative_Histogram"!==String(d)||(l[0].x=[]),"Horizontal_Histogram"===String(d)&&(l[0].y=[]),"Angular_Gauge"===String(d)&&(l[0].value=[],l[0].title=[],l[0].gauge.axis.range=[]),"Bullet_Gauge"===String(d)&&(l[0].value=[],l[0].gauge.axis.range=[]),"Vertical_Bar_Stacked"!==String(d)&&"Vertical_Grouped_Box"!==String(d)&&"Vertical_Bar_Grouped"!==String(d)&&"Vertical_Line_Stacked"!==String(d)&&"Vertical_Area_Stacked"!==String(d)&&"Horizontal_Area_Stacked"!==String(d)&&"Vertical_Waterfall_Grouped"!==String(d)&&"Horizontal_Bar_Stacked"!==String(d)&&"Horizontal_Grouped_Box"!==String(d)&&"Horizontal_Bar_Grouped"!==String(d)&&"Horizontal_Waterfall_Grouped"!==String(d)&&"Funnel_Stacked"!==String(d)||(l[0].x=[],l[1].x=[],l[0].y=[],l[1].y=[]),"Vertical_Waterfall_Grouped"===String(d)&&(l[0].measure=[],l[1].measure=[]);const c=$(this).attr("data-xaxis"),u=$(this).attr("data-yaxis"),g=$(this).attr("data-secondcolumn"),h=$(this).attr("data-operation");e.push({entity:entity,date:date,model:model,operation:h,tabheight:a,tab_name:n,chartheader:i,x_axis:c,y_axis:u,second_column:g,tab_id:t,height:$(this).height(),width:$(this).width(),position:$(this).position(),layout:JSON.parse(o),data:l,id:r,graph_subtype:d,changed_text:JSON.parse(s)})}}),$(".draggable_charts").each(function(){const i=$(this).parent().attr("id");if(i==t){const i=$(this).attr("data-xaxis"),o=$(this).attr("data-yaxis"),l=$(this).attr("data-secondcolumn"),r=$(this).attr("data-entity"),d=$(this).attr("data-date"),s=$(this).attr("data-model"),c=$(this).attr("data-operation"),u=$(this).attr("data-layout"),g=$(this).attr("data-data"),h=$(this).attr("data-id"),p=$(this).attr("data-subtype"),f=$(this).css("background-color"),_=$(this).find("h5").css("font-size"),m=$(this).find("p").css("font-size");e.push({entity:r,date:d,model:s,operation:c,tabheight:a,tab_name:n,x_axis:i,y_axis:o,second_column:l,tab_id:t,height:$(this).height(),width:$(this).width(),position:$(this).position(),layout:u,data:g,id:h,graph_subtype:p,backgroundcolor:f,titlefontsize:m,valuefontsize:_})}}),$(".commentboxcard").each(function(){const i=$(this).parent().attr("id");if(String(i)===String(t)){const i=$(this).attr("data-tab"),o=document.getElementById(i).value,l=$(`#${i}`).height(),r=$(`#${i}`).width();e.push({graph_subtype:"Textbox",tabheight:a,tab_name:n,tab_id:t,height:l,width:r,position:$(this).position(),textboxvalue:o,textboxid:i})}}),$(this).parent().css("display",""),$.ajax({url:"/dashboard/save_plot",data:{operation:"savePlotHomePage",plotDataList:JSON.stringify(e),tab_id:t,tab_name:n,tabheight:a},type:"POST",dataType:"json",success:function(t){e=[]},error:function(){}})})});