function masterPlotly(t){if("undefined"!==String($("form").find("input[name='csrfmiddlewaretoken']").attr("value"))){const t=$("form").find("input[name='csrfmiddlewaretoken']").attr("value");$.ajaxSetup({beforeSend:function(a,e){a.setRequestHeader("X-CSRFToken",t)}})}"Landscape"===String($(".chartDivSection").attr("data-layout"))?$(".chartDivSection").css({"background-image":"linear-gradient(rgba(0, 0, 0, 0.2) 0.05rem, transparent 0.36%), linear-gradient(90deg, rgba(0, 0, 0, 0.2) 0.05rem, transparent 0.36%)","background-size":"5% 5%",width:"100%",margin:"auto",border:"solid black 0.1px","flex-wrap":"wrap","aspect-ratio":16/9,"overflow-y":"hidden","overflow-x":"hidden"}):"Portrait"===String($(".chartDivSection").attr("data-layout"))?$(".chartDivSection").css({"background-image":"linear-gradient(rgba(0, 0, 0, 0.2) 0.05rem, transparent 0.36%), linear-gradient(90deg, rgba(0, 0, 0, 0.2) 0.05rem, transparent 0.36%)","background-size":"5% 5%",width:"1080px",margin:"auto",border:"solid black 0.1px",display:"flex","flex-wrap":"wrap","aspect-ratio":9/16,"overflow-y":"hidden","overflow-x":"hidden"}):$(".chartDivSection").css({width:"92%","padding-left":"70px","padding-top":"9px","padding-right":"9px"}),"undefined"===String(typeof t)&&(t=[]);for(const l in t){function a(){const t=$(this).attr("data-elementID");let a="",e="";$(`#chartTypes${t}`).css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","none"),document.getElementById(`plotlyButtonDiv${t}`).style.display="none",document.getElementById(`XY_AXIS${t}`).style.display="none",document.getElementById(`BubbleXYZ_AXIS${t}`).style.display="none",document.getElementById(`Table_AXIS${t}`).style.display="none",document.getElementById(`Pivot_AXIS${elementID}`).style.display="none",document.getElementById(`XYOP_AXIS${t}`).style.display="none",document.getElementById(`XYfloatOP_AXIS${t}`).style.display="none",document.getElementById(`MultipleLine_AXIS${t}`).style.display="none",document.getElementById(`XfloatYOP_AXIS${t}`).style.display="none",document.getElementById(`XYZ_AXIS${t}`).style.display="none",document.getElementById(`XYfloatYfloatOP_AXIS${t}`).style.display="none",document.getElementById(`XYMultipleOP_AXIS${t}`).style.display="none",document.getElementById(`XfloatXfloatYOP_AXIS${t}`).style.display="none",document.getElementById(`XMultipleYOP_AXIS${t}`).style.display="none",document.getElementById(`CVfloatO_AXIS${t}`).style.display="none",document.getElementById(`Image_${t}`).style.display="none",document.getElementById(`CSVfloat_AXIS${t}`).style.display="none",document.getElementById(`aggcard_n${t}`).style.display="none",document.getElementById(`agg_card_AXIS${t}`).style.display="none",document.getElementById(`aggcard_${t}`).style.display="none",document.getElementById(`CSVfloatO_AXIS${t}`).style.display="none",document.getElementById(`Value_AXIS${t}`).style.display="none",document.getElementById(`XYYOP_AXIS${t}`).style.display="none",document.getElementById(`XYZ_AXIS${t}`).style.display="none",document.getElementById(`ValueOp_AXIS${t}`).style.display="none",document.getElementById(`XX_AXIS${t}`).style.display="none",document.getElementById(`XYYHOP_AXIS${t}`).style.display="none",document.getElementById(`CLfloatO_AXIS${t}`).style.display="none",document.getElementById(`XYfloatYComboOP_AXIS${t}`).style.display="none",document.getElementById(`MultipleLine_Combo_AXIS${t}`).style.display="none",$(`.filter_card_body${t}`).empty(),$("#collapseTwo").removeClass("show"),"Scatter"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XY_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYTab${t}`).append(new Option(e,a,!1,!1))})),"Bubble Chart"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`BubbleXYZ_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectBubbleXYTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectBubbleXYTab${t}`).append(new Option(e,a,!1,!1))})),"Scatter with Straight Lines and Markers"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XY_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYTab${t}`).append(new Option(e,a,!1,!1))})),"2D Histogram Contour"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XY_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYTab${t}`).append(new Option(e,a,!1,!1))})),"Horizontal Dot Plot"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYOPTab${t}`).append(new Option(e,a,!1,!1))})),"Vertical Box"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYOPTab${t}`).append(new Option(e,a,!1,!1))})),"Horizontal Box"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYOPTab${t}`).append(new Option(e,a,!1,!1))})),"Vertical Violin"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYOPTab${t}`).append(new Option(e,a,!1,!1))})),"Horizontal Violin"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYOPTab${t}`).append(new Option(e,a,!1,!1))})),"Vertical Bar"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYfloatOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYOPETab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYOPETab${t}`).append(new Option(e,a,!1,!1))})),"Line"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYfloatOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYOPETab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYOPETab${t}`).append(new Option(e,a,!1,!1))})),"Multiple Line Chart"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`MultipleLine_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYOPE_multipleTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYOPE_multipleTab${t}`).append(new Option(e,a,!1,!1))})),"Stepped Line"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYfloatOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYOPETab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYOPETab${t}`).append(new Option(e,a,!1,!1))})),"Vertical Area"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYfloatOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYOPETab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYOPETab${t}`).append(new Option(e,a,!1,!1))})),"Vertical Waterfall"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYfloatOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYOPETab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYOPETab${t}`).append(new Option(e,a,!1,!1))})),"3D Scatter"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYZ_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYZTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYZTab${t}`).append(new Option(e,a,!1,!1))})),"3D Mesh"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYZ_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYZTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYZTab${t}`).append(new Option(e,a,!1,!1))})),"Horizontal Bar"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XfloatYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXFloatTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXFloatTab${t}`).append(new Option(e,a,!1,!1))})),"Horizontal Area"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XfloatYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXFloatTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXFloatTab${t}`).append(new Option(e,a,!1,!1))})),"Horizontal Waterfall"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XfloatYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXFloatTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXFloatTab${t}`).append(new Option(e,a,!1,!1))})),"Funnel"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XfloatYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXFloatTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXFloatTab${t}`).append(new Option(e,a,!1,!1))})),"Funnel Area"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XfloatYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXFloatTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXFloatTab${t}`).append(new Option(e,a,!1,!1))})),"Vertical Bar Stacked"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYMultipleOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYMultipleOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYMultipleOPTab${t}`).append(new Option(e,a,!1,!1))})),"Vertical Bar Grouped"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYMultipleOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYMultipleOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYMultipleOPTab${t}`).append(new Option(e,a,!1,!1))})),"Bar Grouped and Line"!==String(document.getElementById(`selectPlotly${t}`).value)&&"Bar Stacked and Line"!==String(document.getElementById(`selectPlotly${t}`).value)||(document.getElementById(`XYfloatYComboOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYY1OPComboTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYY1OPComboTab${t}`).append(new Option(e,a,!1,!1))})),"Bar Stacked and Multiple Line"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`MultipleLine_Combo_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYOPE_multipleComboTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYOPE_multipleComboTab${t}`).append(new Option(e,a,!1,!1))})),"Vertical Line Stacked"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYfloatYfloatOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYY1OPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYY1OPTab${t}`).append(new Option(e,a,!1,!1))})),"Vertical Area Stacked"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYfloatYfloatOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYY1OPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYY1OPTab${t}`).append(new Option(e,a,!1,!1))})),"Vertical Waterfall Grouped"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYfloatYfloatOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXYY1OPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXYY1OPTab${t}`).append(new Option(e,a,!1,!1))})),"Horizontal Bar Stacked"!==String(document.getElementById(`selectPlotly${t}`).value)&&"Horizontal Bar Grouped"!==String(document.getElementById(`selectPlotly${t}`).value)||(document.getElementById(`XMultipleYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXMultipleYOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXMultipleYOPTab${t}`).append(new Option(e,a,!1,!1))})),"Horizontal Area Stacked"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XfloatXfloatYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXX1OPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXX1OPTab${t}`).append(new Option(e,a,!1,!1))})),"Horizontal Waterfall Grouped"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XfloatXfloatYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXX1OPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXX1OPTab${t}`).append(new Option(e,a,!1,!1))})),"Funnel Stacked"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XfloatXfloatYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXX1OPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXX1OPTab${t}`).append(new Option(e,a,!1,!1))})),"Pie Chart"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CVfloatO_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCVOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCVOPTab${t}`).append(new Option(e,a,!1,!1))})),"Image"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`Image_${t}`).style.display="block",$(".filter_plot_card").css("display","none"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#image_Tab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#image_Tab${t}`).append(new Option(e,a,!1,!1))})),"Donut Chart"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CVfloatO_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCVOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCVOPTab${t}`).append(new Option(e,a,!1,!1))})),"Treemap"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CVfloatO_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCVOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCVOPTab${t}`).append(new Option(e,a,!1,!1))})),"Sum"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CSVfloat_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCSVTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCSVTab${t}`).append(new Option(e,a,!1,!1))})),"Top N"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`aggcard_n${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectAggTabn${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectAggTabn${t}`).append(new Option(e,a,!1,!1))})),"Bottom N"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`aggcard_n${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectAggTabn${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectAggTabn${t}`).append(new Option(e,a,!1,!1))})),"Maximum"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`aggcard_${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectAggTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectAggTab${t}`).append(new Option(e,a,!1,!1))})),"Minimum"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`aggcard_${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectAggTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectAggTab${t}`).append(new Option(e,a,!1,!1))})),"Count"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`agg_card_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectAggCSVTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectAggCSVTab${t}`).append(new Option(e,a,!1,!1))})),"Count Distinct"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`agg_card_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectAggCSVTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectAggCSVTab${t}`).append(new Option(e,a,!1,!1))})),"First"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`agg_card_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectAggCSVTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectAggCSVTab${t}`).append(new Option(e,a,!1,!1))})),"Last"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`agg_card_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectAggCSVTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectAggCSVTab${t}`).append(new Option(e,a,!1,!1))})),"Average"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CSVfloat_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCSVTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCSVTab${t}`).append(new Option(e,a,!1,!1))})),"Median"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CSVfloat_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCSVTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCSVTab${t}`).append(new Option(e,a,!1,!1))})),"Variance"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CSVfloat_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCSVTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCSVTab${t}`).append(new Option(e,a,!1,!1))})),"Skewness"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CSVfloat_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCSVTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCSVTab${t}`).append(new Option(e,a,!1,!1))})),"Kurtosis"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CSVfloat_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCSVTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCSVTab${t}`).append(new Option(e,a,!1,!1))})),"Standard Deviation"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CSVfloat_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCSVTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCSVTab${t}`).append(new Option(e,a,!1,!1))})),"Sunburst"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CSVfloatO_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCSVOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCSVOPTab${t}`).append(new Option(e,a,!1,!1))})),"Angular Gauge"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CSVfloatO_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCSVOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCSVOPTab${t}`).append(new Option(e,a,!1,!1))})),"Bullet Gauge"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CSVfloatO_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCSVOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCSVOPTab${t}`).append(new Option(e,a,!1,!1))})),"Vertical Grouped Box"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectYYOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectYYOPTab${t}`).append(new Option(e,a,!1,!1))})),"Vertical Grouped Violin"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYYOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectYYOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectYYOPTab${t}`).append(new Option(e,a,!1,!1))})),"Horizontal Grouped Violin"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYYHOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXXHOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXXHOPTab${t}`).append(new Option(e,a,!1,!1))})),"Horizontal Grouped Box"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XYYHOP_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXXHOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXXHOPTab${t}`).append(new Option(e,a,!1,!1))})),"Vertical Histogram"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`Value_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectValueTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectValueTab${t}`).append(new Option(e,a,!1,!1))})),"Cumulative Histogram"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`Value_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectValueTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),
e=$(this)[0].innerHTML,$(`#selectValueTab${t}`).append(new Option(e,a,!1,!1))})),"Horizontal Histogram"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`Value_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectValueTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectValueTab${t}`).append(new Option(e,a,!1,!1))})),"Bubble Map"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`ValueOp_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectValueOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectValueOPTab${t}`).append(new Option(e,a,!1,!1))})),"Chloropath Map"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`ValueOp_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectValueOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectValueOPTab${t}`).append(new Option(e,a,!1,!1))})),"Stacked Histogram"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`XX_AXIS${t}`).style.display="block",$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectXXTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectXXTab${t}`).append(new Option(e,a,!1,!1))})),"Nested Table"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`CLfloatO_AXIS${t}`).style.display="block",$(".table_type").html("Nested_Table"),$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#selectCLOPTab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#selectCLOPTab${t}`).append(new Option(e,a,!1,!1))})),"Table"===String(document.getElementById(`selectPlotly${t}`).value)&&(document.getElementById(`Table_AXIS${t}`).style.display="block",$(".table_type").html("Table"),$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#table_Tab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#table_Tab${t}`).append(new Option(e,a,!1,!1))})),["Pivot Table","Table Barchart","Heatmap","Row Heatmap","Col Heatmap","Line Chart","Bar Chart","Stacked Bar Chart","Area Chart","Scatter Chart"].includes(String(document.getElementById(`selectPlotly${t}`).value))&&(document.getElementById(`Pivot_AXIS${t}`).style.display="block",$(".table_type").html("Pivot Report"),$(".filter_plot_card").css("display","block"),$(`#plotlyButtonDiv${t}`).css("display","block"),$(`#select_pivot_Tab${t}`).find("option").slice(1).remove(),$(`#analysisTab${t}`).find(".tabname").each(function(){a=$(this).attr("data-tab_ct"),e=$(this)[0].innerHTML,$(`#select_pivot_Tab${t}`).append(new Option(e,a,!1,!1))}))}function e(){let t=$(this).attr("id").replace("plotlyButton","");$("#plotSection"+t).css("display","block"),$(`#PlotElements${t}`).modal("hide"),$(".modal-backdrop").remove();const a=$(`#selectTable${t}`).val(),e=document.getElementById(`selectPlotly${t}`).value.split("|")[0],o=$(this).attr("chartCategory").split("|")[0];let l="",d="";const i=[];let r="",n="",s="",c="",_="",g="",p="",h="",b="",y="",u="",m="",f=[],v="",x="",w="",k="",I="",B="",E="",D="",S="",C="",T="",N="",O="",P="",A={};if($(`.filter_card_body${t}`).find(".categorical_filter_inputs").each(function(){const t={};c=$(this).attr("name"),_=$(this).val(),t.column_name=c,t.filter_value=_,t.data_type=$(this).attr("data-data_type"),t.data_category="Categorical",i.push(t)}),$(`.filter_card_body${t}`).find(".numerical_column_condition").each(function(){const t={};c=$(this).attr("name"),g=$(this).val(),_=$(this).parent().next().find(".numerical_column_value").val(),t.column_name=c,t.condition_name=g,t.filter_value=_,t.data_type=$(this).attr("data-data_type"),t.data_category="Numerical",i.push(t)}),$(`.filter_card_body${t}`).find("#filter_dtrange").is(":checked")&&(A.col_name=$(".seldatecol").val(),A.start_date=$("#startdate").val(),A.end_date=$("#enddate").val()),"Aggregation"===String(o)&&("Sum"!==String(e)&&"Average"!==String(e)&&"Median"!==String(e)&&"Variance"!==String(e)&&"Skewness"!==String(e)&&"Kurtosis"!==String(e)&&"Standard Deviation"!==String(e)||(s=$(`#selectAggIcon_float${t}`).val()),"Count"!==String(e)&&"Count Distinct"!==String(e)&&"First"!==String(e)&&"Last"!==String(e)||(s=$(`#selectAggIcon_axis${t}`).val()),"Minimum"!==String(e)&&"Maximum"!==String(e)||(s=$(`#selectAggIcon${t}`).val()),"Top N"!==String(e)&&"Bottom N"!==String(e)||(s=$(`#selectAggIcon_n${t}`).val())),"Vertical Bar"!==String(e)&&"Vertical Waterfall"!==String(e)&&"Line"!==String(e)&&"Stepped Line"!==String(e)&&"Vertical Area"!==String(e)||(r=$(`#selectXH${t}`).val(),n=$(`#selectYfloat${t}`).val(),p=$(`#selectYfloat${t}`).val(),h=$(`#selectoperations${t}`).val(),y=$(`#selectXYOPETab${t}`).val(),l=JSON.stringify($(`#selectfilter${t}`).val()),u=o,m=e),["Pivot Table","Table Barchart","Heatmap","Row Heatmap","Col Heatmap","Line Chart","Bar Chart","Stacked Bar Chart","Area Chart","Scatter Chart"].includes(String(e))&&(r=JSON.stringify($(`#select_pivot_rows${t}`).val()),h=$(`#select_pivot_operations${t}`).val(),y=$(`#select_pivot_Tab${t}`).val(),l=JSON.stringify($(`#select_pivot_filter${t}`).val()),u=o,m=e),"Table"===String(e)){var J=[];if($("#tablecol_reorder").is(":checked")&&$("#tableColumnReorder").find(".sortable-order").children().each(function(){J.push($(this).attr("name"))}),0==J.length){const a=$(`#select_table_columns${t}`).val();if(a&&a.length>0)r=JSON.stringify(a),n=JSON.stringify(a);else{var H=[];$(`#select_table_columns${t}`).find("option").each(function(){H.push($(this).attr("value"))}),r=JSON.stringify(H),n=JSON.stringify(H)}}else r=JSON.stringify(J),n=JSON.stringify(J);f=[],$(".conditional_body").each(function(){const t={};t.column_name=$(this).find(".conditional_column_name").val(),t.column_datatype=$(this).find(".conditional_column_name").find("option:selected").attr("data-datatype"),t.column_condition=$(this).find(".conditional_condition").val(),t.condition_value=$(this).find(".conditional_value").val(),t.condition_color=$(this).find(".conditional_color_input").val(),null!=t.column_name&&null!=t.column_name&&f.push(t)}),selectedOptions=$(`#columnAlignmentButtonTable${t}`).attr("data-listdata")?JSON.parse($(`#columnAlignmentButtonTable${t}`).attr("data-listdata")):JSON.parse('[{"global_config":{"globalHeaderColumnAlignment":"center","globalContentColumnAlignment":"center"},"columns_config":[]}]'),h=$(`#fk_value${t}`).prop("checked"),y=$(`#table_Tab${t}`).val(),l=JSON.stringify($(`#selectfilter24${t}`).val()),u=o,m=e}if("Multiple Line Chart"===String(e)){r=$(`#selectX_multiple${t}`).val(),p=$(`#selectX_multiple${t}`).val(),n=[],v=$(`#select_multiple_y${t}`).val();for(let a=1;a<=v;a++)n.push($(`#selectY${a}_multiplefloat${t}`).val());n=JSON.stringify(n),h=$(`#select_multiple_operations${t}`).val(),y=$(`#selectXYOPE_multipleTab${t}`).val(),l=JSON.stringify($(`#selectfilter23${t}`).val()),u=o,m=e}if("Funnel"!==String(e)&&"Funnel Area"!==String(e)&&"Horizontal Bar"!==String(e)&&"Horizontal Area"!==String(e)&&"Horizontal Waterfall"!==String(e)||(r=$(`#selectXfloat${t}`).val(),n=$(`#selectYH${t}`).val(),p=$(`#selectXfloat${t}`).val(),h=$(`#opt${t}`).val(),y=$(`#selectXFloatTab${t}`).val(),l=JSON.stringify($(`#selectfilter1${t}`).val()),u=o,m=e),"Vertical Histogram"!==String(e)&&"Horizontal Histogram"!==String(e)&&"Cumulative Histogram"!==String(e)||(r=$(`#select_histovalue${t}`).val(),n=$(`#select_histovalue${t}`).val(),p=$(`#select_histovalue${t}`).val(),l=JSON.stringify($(`#selectfilter2${t}`).val()),h=$(`#select_histovalue${t}`).val(),y=$(`#selectValueTab${t}`).val(),u=o,m=e),"Stacked Histogram"===String(e)&&(r=$(`#select_xxaxis${t}`).val(),n=$(`#select_xx1axis${t}`).val(),p=$(`#select_xxaxis${t}`).val(),l=JSON.stringify($(`#selectfilter3${t}`).val()),h=$(`#select_xxaxis${t}`).val(),y=$(`#selectXXTab${t}`).val(),u=o,m=e),"Sum"!==String(e)&&"Average"!==String(e)&&"Median"!==String(e)&&"Variance"!==String(e)&&"Skewness"!==String(e)&&"Kurtosis"!==String(e)&&"Standard Deviation"!==String(e)||(r=$(`#selectval${t}`).val(),n=$(`#selectval${t}`).val(),p=$(`#selectval${t}`).val(),w=$(`#agg_header_max${t}`).prop("checked"),k=$(`#agg_header_value_max${t}`).val(),y=$(`#selectCSVTab${t}`).val(),u=o,m=e,l=JSON.stringify($(`#selectfilter16${t}`).val()),h=e),"Count"!==String(e)&&"Count Distinct"!==String(e)&&"First"!==String(e)&&"Last"!==String(e)||(r=$(`#select_allval${t}`).val(),n=$(`#select_allval${t}`).val(),p=$(`#select_allval${t}`).val(),w=$(`#agg_header_count${t}`).prop("checked"),k=$(`#agg_header_value_count${t}`).val(),y=$(`#selectAggCSVTab${t}`).val(),u=o,m=e,l=JSON.stringify($(`#selectfilter20${t}`).val()),h=e),"Minimum"!==String(e)&&"Maximum"!==String(e)||(r=$(`#select_agg_val${t}`).val(),n=$(`#select_agg_val${t}`).val(),p=$(`#select_agg_val${t}`).val(),w=$(`#agg_header${t}`).prop("checked"),k=$(`#agg_header_value${t}`).val(),y=$(`#selectAggTab${t}`).val(),u=o,m=e,l=JSON.stringify($(`#selectfilter21${t}`).val()),h=e),"Top N"!==String(e)&&"Bottom N"!==String(e)||(r=$(`#selectval_n${t}`).val(),n=$(`#selectval_n${t}`).val(),p=$(`#selectval_n${t}`).val(),I=$(`#computed_number${t}`).val(),w=$(`#agg_header_sum${t}`).prop("checked"),k=$(`#agg_header_value_sum${t}`).val(),y=$(`#selectAggTabn${t}`).val(),B=$(`#selectop_n${t}`).val(),E=String($(`#agg_distinct${t}`).prop("checked")),u=o,m=e,l=JSON.stringify($(`#selectfilter22${t}`).val()),h=e),"Sunburst"!==String(e)&&"Angular Gauge"!==String(e)&&"Bullet Gauge"!==String(e)||(r=$(`#select_cat${t}`).val(),n=$(`#select_subcat${t}`).val(),p=$(`#select_val${t}`).val(),l=JSON.stringify($(`#selectfilter4${t}`).val()),h=$(`#select_op${t}`).val(),y=$(`#selectCSVOPTab${t}`).val(),u=o,m=e),"Pie Chart"!==String(e)&&"Donut Chart"!==String(e)&&"Treemap"!==String(e)||(r=$(`#select_category${t}`).val(),n=$(`#select_value${t}`).val(),p=$(`#select_value${t}`).val(),l=JSON.stringify($(`#selectfilter5${t}`).val()),h=$(`#select_options${t}`).val(),y=$(`#selectCVOPTab${t}`).val(),u=o,m=e),"Image"===String(e)&&(P=new FormData($(this).parent().parent().find("form.uploadimage")[0]),D=windowLocationAttr.href.split("/"),S=D[D.length-2],C=(t+Math.random()).replace(".","").replace(/\s/g,""),P.append("upload_image",$(this).parent().parent().find("input[name='upload_image']").val()),P.append("operation","uploadImage"),P.append("folder_name",S),P.append("elementid",C),r=$(`#image_${t}`).val().substr($(`#image_${t}`).val().lastIndexOf("\\")+1).split(".")[0]+"."+$(`#image_${t}`).val().split(".")[1],n=$(`#image_${t}`).val().substr($(`#image_${t}`).val().lastIndexOf("\\")+1).split(".")[0].replace(/[\W_]+/g,""),p=S,l=JSON.stringify([]),h=C,y=$(`#image_Tab${t}`).val(),u=o,m=e,$.ajax({url:`/users/${urlPath}/upload_image/`,data:P,type:"POST",cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(t){const e={is_title:w,title_value:k,total_y:v,total_L:x,computed_number:I,operation_n:B,agg_distinct:E,second_column:p,color:z,x_axis:r,y_axis:n,operation:h,operation_line:b,optionvalues:optionvalues,optionvalues_line:optionvalues_line,graph_type:u,graph_subtype:m,tableName:a,tabNameID:y,filters:l,line_column:d,filter_input_final:JSON.stringify(i),drange:JSON.stringify(A)};let o=y.replace("analysisrow","selectSlicerConfig_"),s=[],c=[];for(let t=0;t<$(`.${o}`).length;t++)s.push($(`.${o}`).eq(t).val()),c.push($(`.${o}`).eq(t).attr("data-slicerColumn"));plotFunction(e,c=c,s=s,o=o)}})),"Scatter"!==String(e)&&"2D Histogram Contour"!==String(e)&&"Scatter with Straight Lines and Markers"!==String(e)||(r=$(`#selectX${t}`).val(),n=$(`#selectY${t}`).val(),p=$(`#selectY${t}`).val(),l=JSON.stringify($(`#selectfilter6${t}`).val()),y=$(`#selectXYTab${t}`).val(),u=o,m=e),"Vertical Box"!==String(e)&&"Horizontal Box"!==String(e)&&"Horizontal Dot Plot"!==String(e)&&"Vertical Violin"!==String(e)&&"Horizontal Violin"!==String(e)||(r=$(`#selectXaxis${t}`).val(),n=$(`#selectYaxis${t}`).val(),p=$(`#selectYaxis${t}`).val(),l=JSON.stringify($(`#selectfilter7${t}`).val()),y=$(`#selectXYOPTab${t}`).val(),u=o,m=e),"Vertical Line Stacked"!==String(e)&&"Vertical Area Stacked"!==String(e)&&"Vertical Waterfall Grouped"!==String(e)||(r=$(`#select_X${t}`).val(),n=$(`#select_Y${t}`).val(),p=$(`#select_Y1${t}`).val(),l=JSON.stringify($(`#selectfilter8${t}`).val()),h=$(`#select_OP${t}`).val(),y=$(`#selectXYY1OPTab${t}`).val(),u=o,m=e),"Vertical Bar Stacked"===String(e)||"Vertical Bar Grouped"===String(e)){r=$(`#select_Xm${t}`).val(),n=[],v=$(`#select_YMultiple_no${t}`).val();for(let a=1;a<=v;a++)n.push($(`#select_Y${a}Multiple${t}`).val());n=JSON.stringify(n),h=$(`#select_YMultipleOP${t}`).val(),y=$(`#selectXYMultipleOPTab${t}`).val(),l=JSON.stringify($(`#selectfilter26${t}`).val()),u=o,m=e}if("Bar Grouped and Line"===String(e)||"Bar Stacked and Line"===String(e)){r=$(`#select_XmultipleCombo${t}`).val(),n=[],v=$(`#select_YmultipleCombo_no${t}`).val();for(let a=1;a<=v;a++)n.push($(`#select_Y${a}multipleCombo${t}`).val());n=JSON.stringify(n),d=$(`#select_LineCombo${t}`).val(),h=$(`#select_OPCombo${t}`).val(),b=$(`#select_OPCombo_2${t}`).val(),y=$(`#selectXYY1OPComboTab${t}`).val(),l=JSON.stringify($(`#selectfilter17${t}`).val()),u=o,m=e}if("Bar Stacked and Multiple Line"===String(e)){r=$(`#select_XmultipleLineCombo${t}`).val(),n=[],v=$(`#select_YmultipleLineCombo_no${t}`).val();for(let a=1;a<=v;a++)n.push($(`#select_Y${a}multipleLineCombo${t}`).val());n=JSON.stringify(n),d=[],x=$(`#select_multiple_combo_line${t}`).val();for(let a=1;a<=x;a++)d.push($(`#select_L${a}multipleCombo${t}`).val());d=JSON.stringify(d),h=$(`#select_multipleCombo${t}`).val(),b=$(`#select_multipleCombo_line${t}`).val(),y=$(`#selectXYOPE_multipleComboTab${t}`).val(),l=JSON.stringify($(`#selectfilter25${t}`).val()),u=o,m=e}if("Vertical Grouped Violin"!==String(e)&&"Vertical Grouped Box"!==String(e)||(r=$(`#selectX_axis${t}`).val(),n=$(`#selectY_axis${t}`).val(),p=$(`#selectY1_axis${t}`).val(),l=JSON.stringify($(`#selectfilter10${t}`).val()),y=$(`#selectYYOPTab${t}`).val(),u=o,m=e),"Horizontal Area Stacked"!==String(e)&&"Horizontal Waterfall Grouped"!==String(e)&&"Funnel Stacked"!==String(e)||(r=$(`#select_xf${t}`).val(),n=$(`#select_yn${t}`).val(),p=$(`#select_xf1${t}`).val(),l=JSON.stringify($(`#selectfilter11${t}`).val()),h=$(`#select_xxy${t}`).val(),y=$(`#selectXX1OPTab${t}`).val(),u=o,m=e),"Horizontal Bar Stacked"===String(e)||"Horizontal Bar Grouped"===String(e)){r=[],v=$(`#select_XMultiple_no${t}`).val();for(let a=1;a<=v;a++)r.push($(`#select_X${a}Multiple${t}`).val());r=JSON.stringify(r),n=$(`#select_Ym${t}`).val(),l=JSON.stringify($(`#selectfilter29${t}`).val()),h=$(`#select_XMultipleOP${t}`).val(),y=$(`#selectXMultipleYOPTab${t}`).val(),u=o,m=e}if("Horizontal Grouped Violin"!==String(e)&&"Horizontal Grouped Box"!==String(e)||(r=$(`#selectXH_axis${t}`).val(),n=$(`#selectYH_axis${t}`).val(),p=$(`#selectX1H_axis${t}`).val(),l=JSON.stringify($(`#selectfilter12${t}`).val()),y=$(`#selectXXHOPTab${t}`).val(),u=o,m=e),"Bubble Map"!==String(e)&&"Chloropeth Map"!==String(e)||(T=document.getElementById("entity_id").value,N=document.getElementById("date_id").value,O=document.getElementById("model_id").value,r=document.getElementById("x_axissunburst").value,n=document.getElementById("y_axissunburst").value,p=document.getElementById("y_axissunburst2").value,h=document.getElementById("operationsunburst").value,u=document.getElementById("graph_type").value,m=document.getElementById("graph_subtype").value),"3D Scatter"!==String(e)&&"3D Mesh"!==String(e)||(r=$(`#select_X1${t}`).val(),n=$(`#select_Y11${t}`).val(),p=$(`#select_Z1${t}`).val(),l=JSON.stringify($(`#selectfilter14${t}`).val()),y=$(`#selectXYZTab${t}`).val(),u=o,m=e),"Bubble Chart"===String(e)&&(r=$(`#selectBubble_X${t}`).val(),n=$(`#selectBubble_Y${t}`).val(),p=$(`#selectBubble_Z${t}`).val(),l=JSON.stringify($(`#selectfilter18${t}`).val()),y=$(`#selectBubbleXYTab${t}`).val(),u=o,m=e),"Nested Table"===String(e)){const a=[],d=$(`#select_categories_level1${t}`).val(),i=$(`#select_categories_level2${t}`).val(),s=$(`#select_categories_level3${t}`).val(),c=$(`#select_categories_level4${t}`).val(),_=$(`#select_categories_level5${t}`).val();"null"!==String(d)&&a.push(d),"null"!==String(i)&&a.push(i),"null"!==String(s)&&a.push(s),"null"!==String(c)&&a.push(c),"null"!==String(_)&&a.push(_),r=JSON.stringify(a);J=[];$("#nestedtablecol_reorder").is(":checked")&&$("#nestedTableColumnReorder").find(".sortable-order").children().each(function(){J.push($(this).attr("name"))}),n=0==J.length?JSON.stringify($(`#select_columns${t}`).val()):JSON.stringify(J),p=$(`#selectCLOPTab${t}`).val(),column_data=$(`#select_columns${t}`).val(),operation_data=[];for(let a=0;a<column_data.length;a++){const e=document.getElementById(`select_table_operation${column_data[a]}${t}`);e&&operation_data.push(e.value)}if(0==J.length)h=JSON.stringify(operation_data);else{const t=column_data,a=operation_data,e=J,o=[],l=[];for(let d=0;d<e.length;d++){const i=e[d],r=t.indexOf(i);-1!==r&&(o.push(i),l.push(a[r]))}h=JSON.stringify(l)}l=JSON.stringify($(`#selectfilter15${t}`).val()),y=$(`#selectCLOPTab${t}`).val(),u=o,m=e,f=[],$(".nested_conditional_body").each(function(){const t={};t.nested_type=$(this).find(".nested_column").val(),t.column_name=$(this).find(".nested_conditional_column_name").val(),t.column_datatype=$(this).find(".nested_conditional_column_name").find("option:selected").attr("data-datatype"),t.column_condition=$(this).find(".nested_conditional_condition").val(),t.condition_value=$(this).find(".nested_conditional_value").val(),t.condition_color=$(this).find(".nested_conditional_color_input").val(),null!=t.column_name&&null!=t.column_name&&f.push(t)})}const z="#b8860b";if("Table"!==String(e)&&"Nested Table"!==String(e)?f="":(f=JSON.stringify(f),$(`#conditionalModal${t}`).find(".conditional_body").each(function(t){"0"!==String(t)?$(this).remove():($(this).find(".conditional_column_name").val(""),$(this).find(".conditional_condition").val(""),$(this).find(".conditional_value").val(""),$(this).find(".conditional_value").val("").trigger("change"))})),"Image"!==String(e)){const t={is_title:w,title_value:k,conditional_table:f,total_y:v,total_L:x,computed_number:I,operation_n:B,agg_distinct:E,second_column:p,color:z,x_axis:r,y_axis:n,operation:h,operation_line:b,graph_type:u,graph_subtype:m,tableName:a,tabNameID:y,filters:l,line_column:d,filter_input_final:JSON.stringify(i),img_icon:s,drange:JSON.stringify(A)};let e=y.replace("analysisrow","selectSlicerConfig_"),o=[],c=[];for(let t=0;t<$(`.${e}`).length;t++)o.push($(`.${e}`).eq(t).val()),c.push($(`.${e}`).eq(t).attr("data-slicerColumn"));parseInt($("#"+y).css("width"));$("#"+y).append('<i class="fa fa-spinner fa-pulse loadingSymbol" style="position:absolute;font-size: 100px;margin-left:50%; margin-top:15%; z-index: 99999;"></i>'),plotFunction(t,c=c,o=o,e=e)}}elementID=t[l],$(".plotAjax").change(function(){"collapse"!==String($("#collapseTwo").attr("class"))&&$("#collapseTwo").removeClass("show")}),$(`.filter_card_header${elementID}`).click(function(){let t=$(this).attr("data-elementid");$(`.filter_card_body${t}`).empty();const a=$(`#selectTable${t}`).val();let e="";const o=document.getElementById(`selectPlotly${t}`).value.split("|")[0];"Vertical Bar"!==String(o)&&"Vertical Waterfall"!==String(o)&&"Line"!==String(o)&&"Stepped Line"!==String(o)&&"Vertical Area"!==String(o)||(e=JSON.stringify($(`#selectfilter${t}`).val())),"Funnel"!==String(o)&&"Funnel Area"!==String(o)&&"Horizontal Bar"!==String(o)&&"Horizontal Area"!==String(o)&&"Horizontal Waterfall"!==String(o)||(e=JSON.stringify($(`#selectfilter1${t}`).val())),"Vertical Histogram"!==String(o)&&"Horizontal Histogram"!==String(o)&&"Cumulative Histogram"!==String(o)||(e=JSON.stringify($(`#selectfilter2${t}`).val())),"Stacked Histogram"===String(o)&&(e=JSON.stringify($(`#selectfilter3${t}`).val())),"Sunburst"!==String(o)&&"Angular Gauge"!==String(o)&&"Bullet Gauge"!==String(o)||(e=JSON.stringify($(`#selectfilter4${t}`).val())),"Pie Chart"!==String(o)&&"Donut Chart"!==String(o)&&"Treemap"!==String(o)||(e=JSON.stringify($(`#selectfilter5${t}`).val())),"Scatter"!==String(o)&&"2D Histogram Contour"!==String(o)&&"Scatter with Straight Lines and Markers"!==String(o)||(e=JSON.stringify($(`#selectfilter6${t}`).val())),"Vertical Box"!==String(o)&&"Horizontal Box"!==String(o)&&"Horizontal Dot Plot"!==String(o)&&"Vertical Violin"!==String(o)&&"Horizontal Violin"!==String(o)||(e=JSON.stringify($(`#selectfilter7${t}`).val())),"Vertical Line Stacked"!==String(o)&&"Vertical Area Stacked"!==String(o)&&"Vertical Waterfall Grouped"!==String(o)||(e=JSON.stringify($(`#selectfilter8${t}`).val())),"Vertical Bar Stacked"!==String(o)&&"Vertical Bar Grouped"!==String(o)||(e=JSON.stringify($(`#selectfilter26${t}`).val())),"Vertical Grouped Violin"!==String(o)&&"Vertical Grouped Box"!==String(o)||(e=JSON.stringify($(`#selectfilter10${t}`).val())),"Horizontal Area Stacked"!==String(o)&&"Horizontal Waterfall Grouped"!==String(o)&&"Funnel Stacked"!==String(o)||(e=JSON.stringify($(`#selectfilter11${t}`).val())),"Horizontal Bar Stacked"!==String(o)&&"Horizontal Bar Grouped"!==String(o)||(e=JSON.stringify($(`#selectfilter29${t}`).val())),"Horizontal Grouped Violin"!==String(o)&&"Horizontal Grouped Box"!==String(o)||(e=JSON.stringify($(`#selectfilter12${t}`).val())),"Bubble Map"!==String(o)&&"Chloropeth Map"!==String(o)||(e=JSON.stringify($(`#selectfilter13${t}`).val())),"3D Scatter"!==String(o)&&"3D Mesh"!==String(o)||(e=JSON.stringify($(`#selectfilter14${t}`).val())),"Nested Table"===String(o)&&(e=JSON.stringify($(`#selectfilter15${t}`).val())),"Sum"!==String(o)&&"Average"!==String(o)&&"Median"!==String(o)&&"Variance"!==String(o)&&"Skewness"!==String(o)&&"Kurtosis"!==String(o)&&"Standard Deviation"!==String(o)||(e=JSON.stringify($(`#selectfilter16${t}`).val())),"Minimum"!==String(o)&&"Maximum"!==String(o)||(e=JSON.stringify($(`#selectfilter21${t}`).val())),"Top N"!==String(o)&&"Bottom N"!==String(o)||(e=JSON.stringify($(`#selectfilter22${t}`).val())),"Count"!==String(o)&&"Count Distinct"!==String(o)&&"First"!==String(o)&&"Last"!==String(o)||(e=JSON.stringify($(`#selectfilter20${t}`).val())),"Bar Grouped and Line"!==String(o)&&"Bar Stacked and Line"!==String(o)||(e=JSON.stringify($(`#selectfilter17${t}`).val())),"Bar Stacked and Multiple Line"===String(o)&&(e=JSON.stringify($(`#selectfilter25${t}`).val())),"Bubble Chart"===String(o)&&(e=JSON.stringify($(`#selectfilter18${t}`).val())),"Multiple Line Chart"===String(o)&&(e=JSON.stringify($(`#selectfilter23${t}`).val())),"Table"===String(o)&&(e=JSON.stringify($(`#selectfilter24${t}`).val())),["Pivot Table","Table Barchart","Heatmap","Row Heatmap","Col Heatmap","Line Chart","Bar Chart","Stacked Bar Chart","Area Chart","Scatter Chart"].includes(String(o))&&(e=JSON.stringify($(`#select_pivot_filter${t}`).val())),plotFilterFunction(a,e)}),$(`.plotlyCategory${elementID}`).click(function(){let t=$(this).attr("data-elementid");document.getElementById(`plotlyButtonDiv${t}`).style.display="none",document.getElementById(`XY_AXIS${t}`).style.display="none",document.getElementById(`BubbleXYZ_AXIS${t}`).style.display="none",document.getElementById(`Table_AXIS${t}`).style.display="none",document.getElementById(`Pivot_AXIS${t}`).style.display="none",document.getElementById(`XYOP_AXIS${t}`).style.display="none",document.getElementById(`XYfloatOP_AXIS${t}`).style.display="none",document.getElementById(`MultipleLine_AXIS${t}`).style.display="none",document.getElementById(`XfloatYOP_AXIS${t}`).style.display="none",document.getElementById(`XYZ_AXIS${t}`).style.display="none",document.getElementById(`XYfloatYfloatOP_AXIS${t}`).style.display="none",document.getElementById(`XYMultipleOP_AXIS${t}`).style.display="none",document.getElementById(`XfloatXfloatYOP_AXIS${t}`).style.display="none",document.getElementById(`XMultipleYOP_AXIS${t}`).style.display="none",document.getElementById(`CVfloatO_AXIS${t}`).style.display="none",document.getElementById(`Image_${t}`).style.display="none",document.getElementById(`CSVfloat_AXIS${t}`).style.display="none",document.getElementById(`aggcard_n${t}`).style.display="none",document.getElementById(`agg_card_AXIS${t}`).style.display="none",document.getElementById(`aggcard_${t}`).style.display="none",document.getElementById(`CSVfloatO_AXIS${t}`).style.display="none",document.getElementById(`XYYOP_AXIS${t}`).style.display="none",document.getElementById(`XYZ_AXIS${t}`).style.display="none",document.getElementById(`ValueOp_AXIS${t}`).style.display="none",document.getElementById(`XX_AXIS${t}`).style.display="none",document.getElementById(`XYYHOP_AXIS${t}`).style.display="none",document.getElementById(`CLfloatO_AXIS${t}`).style.display="none",document.getElementById(`XYfloatYComboOP_AXIS${t}`).style.display="none",document.getElementById(`MultipleLine_Combo_AXIS${t}`).style.display="none",$(`.filter_card_body${t}`).empty(),$("#collapseTwo").removeClass("show"),$(`.plotlyCategory${t}`).each(function(){$(this).css({backgroundColor:"#565a5e"}),$(this).css({borderColor:"#565a5e"})}),$(this).css({backgroundColor:"var(--primary-color)"}),$(this).css({borderColor:"var(--primary-color)"});let a=windowLocation,e=a.indexOf("/",a.indexOf("/")+1),o=a.indexOf("/",a.indexOf("/")+e+1),l=a.indexOf("/",a.indexOf("/")+o+1),d=(a.substring(e+1,o),a.substring(o+1,l));"Build"!=d&&"Edit"!=d&&(d="User");const i=$(this).val();$.ajax({url:`/users/${urlPath}/plotly/`,data:{selectedValue:i,operation:"PlotCategory"},type:"POST",dataType:"json",success:function(a){$(`#selectPlotly${t}`).empty(),$(`#selectPlotly${t}`).append(new Option("--------------------","",!0,!0));for(const e in a.chartType){const o=new Option(a.chartType[e],a.chartType[e],!1,!1);$(`#selectPlotly${t}`).append(o)}$(`#plotlyButton${t}`).attr("chartCategory",i)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}),$(`#global_bg${elementID}`).change(function(){let t=$(this).attr("id").replace("global_bg");"background_image"==$(this).val()?($(".global_bg_color").css("display","none"),$(".global_bg_image").css("display","block"),""===String($(`#bg_image_url${t}`).html())&&"undefined"===String($(`#bg_image_url${t}`).html())||$(".mainDiv").css("background-image","url(data:image/png;base64,"+$(`#bg_image_url${t}`).html())):($(".global_bg_color").css("display","block"),$(".global_bg_image").css("display","none"),$(".mainDiv").css("background-image","none"))}),$(`#bg_image_${elementID}`).change(function(){let t=$(this).attr("id").replace("bg_image_");const a=new FormData($(this).parent().parent().parent().find("form.uploadbgimage")[0]),e=windowLocationAttr.href.split("/"),o=e[e.length-2],l=(t+Math.random()).replace(".","").replace(/\s/g,"");a.append("upload_bg_image",$(this).parent().parent().parent().find("input[name='upload_bg_image']").val()),a.append("operation","uploadbgImage"),a.append("folder_name",o),a.append("elementid",l),$.ajax({url:`/users/${urlPath}/upload_bg_image/`,data:a,type:"POST",cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$(".mainDiv").css("background-image","url(data:image/png;base64,"+a.image_url),$(".mainDiv").css("background-size","56em 15em"),$(`#bg_image_url${t}`).html(""),$(`#bg_image_url${t}`).html(a.image_url),$(`#bg_image_name${t}`).html(""),$(`#bg_image_name${t}`).html(a.image_name)}})}),$(`.plotlyType${elementID}`).on("select2:select",a),$(`#selectPlotly${elementID}`).on("select2:select",function(){let t=$(this).attr("data-elementid");$(`#selectXaxis${t}`).val("").trigger("change"),$(`#selectYaxis${t}`).val("").trigger("change"),$(`#selectX_axis${t}`).val("").trigger("change"),$(`#selectY_axis${t}`).val("").trigger("change"),$(`#selectY1_axis${t}`).val("").trigger("change"),$(`#selectX${t}`).val("").trigger("change"),$(`#selectY${t}`).val("").trigger("change"),$(`#selectXH${t}`).val("").trigger("change"),$(`#select_table_columns${t}`).val("").trigger("change"),$(`#selectX_multiple${t}`).val("").trigger("change"),$(`#selectYH${t}`).val("").trigger("change"),$(`#select_X${t}`).val("").trigger("change"),$(`#select_Y${t}`).val("").trigger("change"),$(`#select_Y1${t}`).val("").trigger("change"),$(`#select_yn${t}`).val("").trigger("change"),$(`#select_Y11${t}`).val("").trigger("change"),$(`#select_X1${t}`).val("").trigger("change"),$(`#select_Z1${t}`).val("").trigger("change"),$(`#select_X1Multiple${t}`).val("").trigger("change"),$(`#select_Ym${t}`).val("").trigger("change"),$(`#select_xxaxis${t}`).val("").trigger("change"),$(`#select_xx1axis${t}`).val("").trigger("change"),$(`#selectXVBar${t}`).val("").trigger("change"),$(`#aggregation11${t}`).val("").trigger("change"),$(`#selectYfloat${t}`).val("").trigger("change"),$(`#selectY1_multiplefloat${t}`).val("").trigger("change"),$(`#selectXfloat${t}`).val("").trigger("change"),$(`#select_Xm${t}`).val("").trigger("change"),$(`#select_Y1Multiple${t}`).val("").trigger("change"),$(`#select_xf${t}`).val("").trigger("change"),$(`#select_xf1${t}`).val("").trigger("change"),$(`#select_value${t}`).val("").trigger("change"),$(`#selectval${t}`).val("").trigger("change"),$(`#selectval_n${t}`).val("").trigger("change"),$(`#select_allval${t}`).val("").trigger("change"),$(`#select_agg_val${t}`).val("").trigger("change"),$(`#select_val${t}`).val("").trigger("change"),$(`#select_histovalue${t}`).val("").trigger("change"),$(`#select_valueop${t}`).val("").trigger("change"),$(`#select_category${t}`).val("").trigger("change"),$(`#select_cat${t}`).val("").trigger("change"),$(`#select_subcat${t}`).val("").trigger("change"),$(`#selectYPie${t}`).val("").trigger("change"),$(`#selectXH_axis${t}`).val("").trigger("change"),$(`#select_table_columns${t}`).val("").trigger("change"),$(`#selectX1H_axis${t}`).val("").trigger("change"),$(`#selectYH_axis${t}`).val("").trigger("change"),$(`#select_categories_level1${t}`).val("").trigger("change"),$(`#select_categories_level2${t}`).val("").trigger("change"),$(`#select_categories_level3${t}`).val("").trigger("change"),$(`#select_categories_level4${t}`).val("").trigger("change"),$(`#select_categories_level5${t}`).val("").trigger("change"),$(`#select_columns${t}`).val("").trigger("change"),$(`.filter_condition${t}`).val("").trigger("change"),$(`#select_XmultipleCombo${t}`).val("").trigger("change"),$(`#select_Y1multipleCombo${t}`).val("").trigger("change"),$(`#select_LineCombo${t}`).val("").trigger("change"),$(`#select_XmultipleLineCombo${t}`).val("").trigger("change"),$(`#select_Y1multipleLineCombo${t}`).val("").trigger("change"),$(`#select_L1multipleCombo${t}`).val("").trigger("change"),$(`#selectBubble_X${t}`).val("").trigger("change"),$(`#selectBubble_Y${t}`).val("").trigger("change"),$(`#selectBubble_Z${t}`).val("").trigger("change")}),$(`#selectTable${elementID}`).on("select2:select",function(){let t=$(this).attr("id").replace("selectTable","");$("#mainSideNavBar").attr("data-app_id");$(`.filter_card_body${t}`).empty(),$("#collapseTwo").removeClass("show");let a=$(this).val();$(`.multiple_line_chart_yaxis${t}`).empty(),$(`.multiple_line_combo_chart_line${t}`).empty(),$(`.multiple_yaxis${t}`).empty(),$(`.multiple_xaxis${t}`).empty(),$(`.multiple_yaxis_combo${t}`).empty(),$(`.multiple_yaxis_line_combo${t}`).empty(),
$(`#select_multiple_y${t}`).val(1),$(`#select_multiple_combo_line${t}`).val(1),$(`#select_XMultiple_no${t}`).val(1),$(`#select_YMultiple_no${t}`).val(1),$(`#select_YmultipleCombo_no${t}`).val(1),$(".table_columns_re-order").empty(),$(".nestedtable_columns_re-order").empty(),$(`#select_YmultipleLineCombo_no${t}`).val(1);let e=windowLocation,o=e.indexOf("/",e.indexOf("/")+1),l=e.indexOf("/",e.indexOf("/")+o+1),d=e.indexOf("/",e.indexOf("/")+l+1),i=(e.substring(o+1,l),e.substring(l+1,d));"Build"!=i&&"Edit"!=i&&(i="User");let r="";r=`/users/${urlPath}/homePage/`,$.ajax({url:r,data:{operation:"chartTable",tableName:a},type:"POST",dataType:"json",success:function(a){$(".input_columns_value_dict").empty(),$(".nested_input_columns_value_dict").empty(),$(`#nested_conditional_column_name${t}`).find("option").slice(1).remove(),$(`#conditional_column_name${t}`).find("option").slice(1).remove(),$(`#selectXaxis${t}`).find("option").slice(1).remove(),$(`#selectYaxis${t}`).find("option").slice(1).remove(),$(`#selectX_axis${t}`).find("option").slice(1).remove(),$(`#selectY_axis${t}`).find("option").slice(1).remove(),$(`#selectY1_axis${t}`).find("option").slice(1).remove(),$(`#selectX${t}`).find("option").slice(1).remove(),$(`#selectY${t}`).find("option").slice(1).remove(),$(`#selectXH${t}`).find("option").slice(1).remove(),$(`#select_table_columns${t}`).find("option").remove(),$(`#selectX_multiple${t}`).find("option").slice(1).remove(),$(`#selectYH${t}`).find("option").slice(1).remove(),$(`#select_X${t}`).find("option").slice(1).remove(),$(`#select_Y${t}`).find("option").slice(1).remove(),$(`#select_Y1${t}`).find("option").slice(1).remove(),$(`#select_yn${t}`).find("option").slice(1).remove(),$(`#select_Y11${t}`).find("option").slice(1).remove(),$(`#select_X1${t}`).find("option").slice(1).remove(),$(`#select_Z1${t}`).find("option").slice(1).remove(),$(`#select_xxaxis${t}`).find("option").slice(1).remove(),$(`#select_xx1axis${t}`).find("option").slice(1).remove(),$(`#selectXVBar${t}`).find("option").slice(1).remove(),$(`#aggregation11${t}`).find("option").slice(1).remove(),$(`#selectYfloat${t}`).find("option").slice(1).remove(),$(`#selectY1_multiplefloat${t}`).find("option").slice(1).remove(),$(`#selectXfloat${t}`).find("option").slice(1).remove(),$(`#select_Xm${t}`).find("option").slice(1).remove(),$(`#select_Y1Multiple${t}`).find("option").slice(1).remove(),$(`#select_X1Multiple${t}`).find("option").slice(1).remove(),$(`#select_Ym${t}`).find("option").slice(1).remove(),$(`#select_xf${t}`).find("option").slice(1).remove(),$(`#select_xf1${t}`).find("option").slice(1).remove(),$(`#select_value${t}`).find("option").slice(1).remove(),$(`#selectval${t}`).find("option").slice(1).remove(),$(`#selectval_n${t}`).find("option").slice(1).remove(),$(`#select_allval${t}`).find("option").slice(1).remove(),$(`#select_agg_val${t}`).find("option").slice(1).remove(),$(`#select_val${t}`).find("option").slice(1).remove(),$(`#select_histovalue${t}`).find("option").slice(1).remove(),$(`#select_valueop${t}`).find("option").slice(1).remove(),$(`#select_category${t}`).find("option").slice(1).remove(),$(`#select_cat${t}`).find("option").slice(1).remove(),$(`#select_subcat${t}`).find("option").slice(1).remove(),$(`#selectYPie${t}`).find("option").slice(1).remove(),$(`#selectXH_axis${t}`).find("option").slice(1).remove(),$(`#select_table_columns${t}`).find("option").remove(),$(`#selectX1H_axis${t}`).find("option").slice(1).remove(),$(`#selectYH_axis${t}`).find("option").slice(1).remove(),$(`#select_categories_level1${t}`).find("option").slice(1).remove(),$(`#select_categories_level2${t}`).find("option").slice(1).remove(),$(`#select_categories_level3${t}`).find("option").slice(1).remove(),$(`#select_categories_level4${t}`).find("option").slice(1).remove(),$(`#select_categories_level5${t}`).find("option").slice(1).remove(),$(`#select_pivot_rows${t}`).find("option").slice(1).remove(),$(`#select_columns${t}`).find("option").remove(),$(`.filter_condition${t}`).find("option").remove(),$(`#select_XmultipleCombo${t}`).find("option").slice(1).remove(),$(`#select_Y1multipleCombo${t}`).find("option").slice(1).remove(),$(`#select_LineCombo${t}`).find("option").slice(1).remove(),$(`#select_XmultipleLineCombo${t}`).find("option").slice(1).remove(),$(`#select_Y1multipleLineCombo${t}`).find("option").slice(1).remove(),$(`#select_L1multipleCombo${t}`).find("option").slice(1).remove(),$(`#selectBubble_X${t}`).find("option").slice(1).remove(),$(`#selectBubble_Y${t}`).find("option").slice(1).remove(),$(`#selectBubble_Z${t}`).find("option").slice(1).remove();for(const e in a.labels)$(`#selectXaxis${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#selectYaxis${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#selectX_axis${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#selectY_axis${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#selectY1_axis${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#selectX${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#selectY${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#selectXH${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#select_table_columns${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#selectX_multiple${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#selectYH${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#select_X${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#select_Xm${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#select_Ym${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#select_XmultipleCombo${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#select_XmultipleLineCombo${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#select_yn${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#select_Y11${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#select_X1${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#select_Z1${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#select_xxaxis${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#select_xx1axis${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#selectYH_axis${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`#select_pivot_rows${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1)),$(`.filter_condition${t}`).append(new Option(a.labels[e],a.field_column[e],!1,!1));const e=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"],o=["Sum","Count","Count Distinct","Average","Skewness","Kurtosis","Median","Variance","Standard Deviation","Minimum","Maximum","Percentage of Total"],l=["Count","Count Unique Values","List Unique Values","Average","Sum","Interger Sum","Median","Sample Variance","Sample Standard Deviation","Minimum","Maximum","First","Last","Sum over Sum","80% Upper Bound","80% Lower Bound","Sum as Fraction of Total","Sum as Fraction of Rows","Sum as Fraction of Columns","Count as Fraction of Total"];$(`#selectopt${t}`).find("option").slice(1).remove(),$(`#selectoperations${t}`).find("option").slice(1).remove(),$(`#select_multiple_operations${t}`).find("option").slice(1).remove(),$(`#opt${t}`).find("option").slice(1).remove(),$(`#select_OP${t}`).find("option").slice(1).remove(),$(`#select_YMultipleOP${t}`).find("option").slice(1).remove(),$(`#select_XMultipleOP${t}`).find("option").slice(1).remove(),$(`#select_xxy${t}`).find("option").slice(1).remove(),$(`#select_options${t}`).find("option").slice(1).remove(),$(`#select_op${t}`).find("option").slice(1).remove(),$(`#selectoptaxis${t}`).find("option").slice(1).remove(),$(`#select_operation${t}`).find("option").slice(1).remove(),$(`#select_table_operation${t}`).find("option").slice(1).remove(),$(`#select_OPCombo${t}`).find("option").slice(1).remove(),$(`#select_OPCombo_2${t}`).find("option").slice(1).remove(),$(`#select_multipleCombo${t}`).find("option").slice(1).remove(),$(`#select_multipleCombo_line${t}`).find("option").slice(1).remove(),$(`#select_pivot_operations${t}`).find("option").slice(1).remove();for(let a=0;a<l.length;a++)$(`#select_pivot_operations${t}`).append('<option value="'+l[a]+'">'+l[a]+"</option>");for(let a=0;a<e.length;a++)$(`#selectopt${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#selectoperations${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#select_multiple_operations${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#opt${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#select_OP${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#select_YMultipleOP${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#select_XMultipleOP${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#select_xxy${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#select_options${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#select_op${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#selectoptaxis${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#select_operation${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#select_table_operation${t}`).append('<option value="'+o[a]+'">'+o[a]+"</option>"),$(`#select_OPCombo${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#select_OPCombo_2${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#select_multipleCombo${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>"),$(`#select_multipleCombo_line${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>");for(const e in a.aggregationLabels)$("<option>").val(a.aggregationLabels[e].field_name).text(a.aggregationLabels[e].name).attr("data-datatype",a.aggregationLabels[e].datatype).appendTo(`#select_agg_val${t}`);for(const e in a.xBarLabels)$("<option>").val(a.xBarLabels[e].field_name).text(a.xBarLabels[e].name).attr("data-datatype",a.xBarLabels[e].datatype).appendTo(`#select_allval${t}`),$("<option>").val(a.xBarLabels[e].field_name).text(a.xBarLabels[e].name).attr("data-datatype",a.xBarLabels[e].datatype).appendTo(`#selectXVBar${t}`);for(const e in a.aggLabels)$("<option>").val(a.aggLabels[e].field_name).text(a.aggLabels[e].name).attr("data-datatype",a.aggLabels[e].datatype).appendTo(`#aggregation11${t}`);for(const t in a.tableLabels)$("<option>").val(a.tableLabels[t].field_name).text(a.tableLabels[t].name).attr("data-datatype",a.tableLabels[t].datatype).appendTo(".input_columns_value_dict"),$("<option>").val(a.tableLabels[t].field_name).text(a.tableLabels[t].name).attr("data-datatype",a.tableLabels[t].datatype).appendTo(".conditional_column_name"),$("<option>").val(a.tableLabels[t].field_name).text(a.tableLabels[t].name).attr("data-datatype",a.tableLabels[t].datatype).appendTo(".selectColumnAlignment"),$("<option>").val(a.tableLabels[t].field_name).text(a.tableLabels[t].name).attr("data-datatype",a.tableLabels[t].datatype).appendTo(".nested_input_columns_value_dict"),$("<option>").val(a.tableLabels[t].field_name).text(a.tableLabels[t].name).attr("data-datatype",a.tableLabels[t].datatype).appendTo(".nested_conditional_column_name");for(const e in a.yAxisBarLabels)$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#selectYfloat${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#selectY1_multiplefloat${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#selectXfloat${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#select_Y${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#select_Y1${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#select_Y1Multiple${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#select_X1Multiple${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#select_xf${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#select_xf1${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#select_value${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#select_val${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#select_Y1multipleCombo${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#select_LineCombo${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#select_Y1multipleLineCombo${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#select_L1multipleCombo${t}`),$("<option>").val(a.yAxisBarLabels[e].field_name).text(a.yAxisBarLabels[e].name).attr("data-datatype",a.yAxisBarLabels[e].datatype).appendTo(`#select_columns${t}`);for(const e in a.yBarLabels)$("<option>").val(a.yBarLabels[e].field_name).text(a.yBarLabels[e].name).attr("data-datatype",a.yBarLabels[e].datatype).appendTo(`#selectval${t}`),$("<option>").val(a.yBarLabels[e].field_name).text(a.yBarLabels[e].name).attr("data-datatype",a.yBarLabels[e].datatype).appendTo(`#select_histovalue${t}`),$("<option>").val(a.yBarLabels[e].field_name).text(a.yBarLabels[e].name).attr("data-datatype",a.yBarLabels[e].datatype).appendTo(`#select_valueop${t}`),$("<option>").val(a.yBarLabels[e].field_name).text(a.yBarLabels[e].name).attr("data-datatype",a.yBarLabels[e].datatype).appendTo(`#selectXH_axis${t}`),$("<option>").val(a.yBarLabels[e].field_name).text(a.yBarLabels[e].name).attr("data-datatype",a.yBarLabels[e].datatype).appendTo(`#selectX1H_axis${t}`),$("<option>").val(a.yBarLabels[e].field_name).text(a.yBarLabels[e].name).attr("data-datatype",a.yBarLabels[e].datatype).appendTo(`#selectBubble_X${t}`),$("<option>").val(a.yBarLabels[e].field_name).text(a.yBarLabels[e].name).attr("data-datatype",a.yBarLabels[e].datatype).appendTo(`#selectBubble_Y${t}`),$("<option>").val(a.yBarLabels[e].field_name).text(a.yBarLabels[e].name).attr("data-datatype",a.yBarLabels[e].datatype).appendTo(`#selectBubble_Z${t}`),$("<option>").val(a.yBarLabels[e].field_name).text(a.yBarLabels[e].name).attr("data-datatype",a.yBarLabels[e].datatype).appendTo(`#selectval_n${t}`);for(const e in a.xPieLabels)$("<option>").val(a.xPieLabels[e].field_name).text(a.xPieLabels[e].name).attr("data-datatype",a.xPieLabels[e].datatype).appendTo(`#select_category${t}`),$("<option>").val(a.xPieLabels[e].field_name).text(a.xPieLabels[e].name).attr("data-datatype",a.xPieLabels[e].datatype).appendTo(`#select_cat${t}`),$("<option>").val(a.xPieLabels[e].field_name).text(a.xPieLabels[e].name).attr("data-datatype",a.xPieLabels[e].datatype).appendTo(`#select_subcat${t}`),$("<option>").val(a.xPieLabels[e].field_name).text(a.xPieLabels[e].name).attr("data-datatype",a.xPieLabels[e].datatype).appendTo(`#select_categories_level1${t}`),$("<option>").val(a.xPieLabels[e].field_name).text(a.xPieLabels[e].name).attr("data-datatype",a.xPieLabels[e].datatype).appendTo(`#select_categories_level2${t}`),$("<option>").val(a.xPieLabels[e].field_name).text(a.xPieLabels[e].name).attr("data-datatype",a.xPieLabels[e].datatype).appendTo(`#select_categories_level3${t}`),$("<option>").val(a.xPieLabels[e].field_name).text(a.xPieLabels[e].name).attr("data-datatype",a.xPieLabels[e].datatype).appendTo(`#select_categories_level4${t}`),$("<option>").val(a.xPieLabels[e].field_name).text(a.xPieLabels[e].name).attr("data-datatype",a.xPieLabels[e].datatype).appendTo(`#select_categories_level5${t}`);for(const e in a.yPieLabels)$("<option>").val(a.yPieLabels[e].name).text(a.yPieLabels[e].name).attr("data-datatype",a.yPieLabels[e].datatype).appendTo(`#selectYPie${t}`)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}),$(`#select_table_columns${elementID}`).on("select2:select",function(t){var a=t.params.data;$(".table_columns_re-order").append(`\n          <li class="btn btn-sm btn-light col" name="${a.id}"  style="height:auto;margin:5px auto;\n          overflow: auto;">\n            <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${a.text}\n          </li>`),$("#tableColumnReorder").find(".sortable-order").sortable()}),$(`#select_table_columns${elementID}`).on("select2:unselect",function(t){var a=t.params.data;$(`.table_columns_re-order li[name='${a.id}']`).remove()}),$("#tablecol_reorder").click(function(){$(this).is(":checked")?$("#tableColumnReorder").css("display","block"):$("#tableColumnReorder").css("display","none")}),$(".nested_conditional_column_name").change(function(){$(this).parent().parent().find(".nested_conditional_condition").empty(),$(this).parent().parent().find(".nested_conditional_condition").append('<option value="" disabled selected>------------</option>');const t=["Greater than","Smaller than","Equal to","Not equal to","In","Starts with","Ends with","Contains"];for(let a=0;a<t.length;a++)$(this).parent().parent().find(".nested_conditional_condition").append('<option value="'+t[a]+'">'+t[a]+"</option>")}),$(".selectColumnAlignment").off("select2:select").on("select2:select",function(t){let a=t.params.data,e=a.id,o=a.text,l=!1;$("#ColumnAlignmentContainer").find(".row strong").each(function(){if($(this).data("value")===e)return l=!0,!1}),l||($("#ColumnAlignmentContainer").append(`\n          <div class="row col-12 my-1">\n            <div class="col-4">\n              <span class="removeAlignment" style="color:var(--primary,var(--primary-color));cursor: pointer;">&times;</span> &nbsp; <strong data-value="${e}">${o}</strong>\n            </div>\n            <div class="col-4">\n              <select class="select2 form-control header">\n                <option value="left">Left</option>\n                <option value="center" selected>Center</option>\n                <option value="right">Right</option>\n              </select>\n            </div>\n            <div class="col-4">\n              <select class="select2 form-control content">\n                <option value="left">Left</option>\n                <option value="center" selected>Center</option>\n                <option value="right">Right</option>\n              </select>\n            </div>\n          </div>\n        `),$("#ColumnAlignmentContainer").find(".row").eq(-1).find(".select2").select2(),$("#ColumnAlignmentContainer").find(".row").eq(-1).find(".removeAlignment").on("click",function(){$(this).parent().parent().remove()}))}),$(".selectGlobalHeaderColumnAlignment").change(function(){globalHeaderColumnAlignment=$(this).val()}),$(".selectGlobalContentColumnAlignment").change(function(){globalContentColumnAlignment=$(this).val()}),$("#saveColumnAlignmentButton").off("click").on("click",function(){let t=[];$("#ColumnAlignmentContainer").find(".row").each(function(){let a=$(this).find("strong").text(),e=$(this).find(".header").val(),o=$(this).find(".content").val();t.push({columnName:a,header:e,content:o})}),selectedOptions=[{global_config:{globalHeaderColumnAlignment:globalHeaderColumnAlignment,globalContentColumnAlignment:globalContentColumnAlignment},columns_config:t}];let a=JSON.stringify(selectedOptions);$(".columnAlignmentButtonTable").attr("data-listdata",a),$(".columnAlignmentButtonModal").modal("hide")}),$(".conditional_column_name").change(function(){const t=$(this).find("option:selected").attr("data-datatype");let a=[];if($(this).parent().parent().find(".conditional_condition").empty(),$(this).parent().parent().find(".conditional_condition").append('<option value="" disabled selected>------------</option>'),"Nested_Table"!==String($(".table_type").html()))if("IntegerField"===String(t)||"BigIntegerField"===String(t)||"FloatField"===String(t)||"AutoField"===String(t)){a=["Greater than","Smaller than","Equal to","Not equal to"];for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition").append('<option value="'+a[t]+'">'+a[t]+"</option>")}else if("DateField"===String(t)||"DateTimeField"===String(t)){a=["Greater than","Smaller than","Equal to","Not equal to"];for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition").append('<option value="'+a[t]+'">'+a[t]+"</option>")}else if("CharField"===String(t)){a=["Equal to","Not equal to","In","Starts with","Ends with","Contains"];for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition").append('<option value="'+a[t]+'">'+a[t]+"</option>")}else{a=["Greater than","Smaller than","Equal to","Not equal to","In","Starts with","Ends with","Contains"];for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition").append('<option value="'+a[t]+'">'+a[t]+"</option>")}else{a=["Greater than","Smaller than","Equal to","Not equal to","In","Starts with","Ends with","Contains"];for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition").append('<option value="'+a[t]+'">'+a[t]+"</option>")}}),$(".nested_column").change(function(){$(".nested_conditional_condition").val("").trigger("change")}),$(".nested_conditional_condition").change(function(){const t=$(this).val();"Greater than"==t||"Smaller than"==t?"Category"==$(this).parent().parent().find(".nested_column").val()?"DateField"==$(this).parent().parent().find(".nested_conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<input type="date" style="width:7.5em;" class="nested_conditional_value"></input>')):"DateTimeField"==$(this).parent().parent().find(".nested_conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<input type="datetime-local" style="width:7.5em;" class="nested_conditional_value"></input>')):($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<input type="number" style="height:2em;width:7.5em;" class="nested_conditional_value"></input>')):($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<input type="number" style="height:2em;width:7.5em;" class="nested_conditional_value"></input>')):"Equal to"==t||"Not equal to"==t?"Category"==$(this).parent().parent().find(".nested_column").val()?"DateField"==$(this).parent().parent().find(".nested_conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<input type="date" style="width:7.5em;" class="nested_conditional_value"></input>')):"DateTimeField"==$(this).parent().parent().find(".nested_conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<input type="datetime-local" style="width:7.5em;" class="nested_conditional_value"></input>')):($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<select class="select2 select2_condition_class form-control condition_select2 nested_conditional_value" required></select>')):($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<select class="select2 select2_condition_class form-control condition_select2 nested_conditional_value" required></select>')):"In"==t?($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<select class="select2 select2_condition_class multiple form-control condition_multiple_select2 nested_conditional_value" multiple required></select>')):($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<select class="select2 form-control select2_condition_class condition_select2 nested_conditional_value" required></select>')),$(".select2_condition_class").select2({tags:!0})}),$(".conditional_condition").change(function(){const t=$(this).val();"Greater than"===String(t)||"Smaller than"===String(t)?"DateField"==$(this).parent().parent().find(".conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<input type="date" class="conditional_value"></input>')):"DateTimeField"==$(this).parent().parent().find(".conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<input type="datetime-local" style="width:11em;" class="conditional_value"></input>')):($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<input type="number" style="height:2em;" class="conditional_value"></input>')):"Equal to"===String(t)||"Not equal to"===String(t)?"DateField"==$(this).parent().parent().find(".conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<input type="date" class="conditional_value"></input>')):"DateTimeField"==$(this).parent().parent().find(".conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<input type="datetime-local" style="width:11em;" class="conditional_value"></input>')):($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<select class="select2 select2_condition_class form-control condition_select2 conditional_value" required></select>')):"In"===String(t)?($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<select class="select2 select2_condition_class multiple form-control condition_multiple_select2 conditional_value" multiple required></select>')):("Starts with"===String(t)||"Ends with"===String(t)||String(t),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<select class="select2 form-control select2_condition_class condition_select2 conditional_value" required></select>')),$(".select2_condition_class").select2({tags:!0})}),$(".nested_add_conditional_parameter").click(function(){const t=$(".nested_input_columns_value_dict")[0].innerHTML,a='<div class="nested_conditional_body" style="margin-top:1em;width: 100%; display:flex">\n          <div class="col-2">\n            <select class="select2 form-control nested_column">\n              <option value="Category">Category</option>\n              <option value="Value">Value</option>\n            </select>\n          </div>\n          <div class="col-3">\n            <select class="select2 form-control nested_conditional_column_name">\n              <option value="" selected disabled>------------</option>\n            '+t+'</select>\n          </div>\n          <div class="col-2">\n            <select class="select2 form-control nested_conditional_condition">\n              <option value="" disabled selected>-------------------</option>\n              <option value="Greater than">Greater than</option>\n              <option value="Smaller than">Smaller than</option>\n              <option value="Equal to">Equal to</option>\n              <option value="Not equal to">Not equal to</option>\n              <option value="In">In</option>\n              <option value="Starts with">Starts with</option>\n              <option value="Contains">Contains</option>\n              <option value="Ends with">Ends with</option>\n            </select>\n          </div>\n          <div class="col-2 nested_conditional_input_value">\n            <div class="nested_conditional_format_value_input">\n            <select class="select2 form-control select2_condition_class" required>\n            </select>\n            </div>\n          </div>\n          <div class="col-2">\n            <input type="color" class="form-control nested_conditional_color_input" data-css="background-color" value="#ffffff" >\n          </div>\n          <div class="col-1">\n            <i class="fa fa-times nested_remove_conditional_parameter" data-toggle="tooltip" title="Remove condition" style="cursor:pointer;margin-top:0.7em;"></i>\n          </div>\n         \n        </div>';$(".nested_conditional_data_body").append(a),$(".select2").select2(),
$(".select2_condition_class").select2({tags:!0}),$(".nested_remove_conditional_parameter").click(function(){$(this).closest(".nested_conditional_body").remove()}),$(".nested_conditional_column_name").change(function(){$(this).parent().parent().find(".nested_conditional_condition").empty(),$(this).parent().parent().find(".nested_conditional_condition").append('<option value="" disabled selected>------------</option>');const t=new Array("Greater than","Smaller than","Equal to","Not equal to","In","Starts with","Ends with","Contains");for(let a=0;a<t.length;a++)$(this).parent().parent().find(".nested_conditional_condition").append('<option value="'+t[a]+'">'+t[a]+"</option>")}),$(".nested_conditional_condition").change(function(){const t=$(this).val();"Greater than"===String(t)||"Smaller than"===String(t)?"Category"==$(this).parent().parent().find(".nested_column").val()?"DateField"==$(this).parent().parent().find(".nested_conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<input type="date" style="width:7.5em;" class="nested_conditional_value"></input>')):"DateTimeField"==$(this).parent().parent().find(".conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<input type="datetime-local" style="width:7.5em;" class="nested_conditional_value"></input>')):($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<input type="number" style="height:2em;width:7.5em;" class="nested_conditional_value"></input>')):($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<input type="number" style="height:2em;width:7.5em;" class="nested_conditional_value"></input>')):"Equal to"===String(t)||"Not equal to"===String(t)?"Category"==$(this).parent().parent().find(".nested_column").val()?"DateField"==$(this).parent().parent().find(".nested_conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<input type="date" style="width:7.5em;" class="nested_conditional_value"></input>')):"DateTimeField"==$(this).parent().parent().find(".nested_conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<input type="datetime-local" style="width:7.5em;" class="nested_conditional_value"></input>')):($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<select class="select2 select2_condition_class form-control condition_select2 nested_conditional_value" required></select>')):($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<select class="select2 select2_condition_class form-control condition_select2 nested_conditional_value" required></select>')):"In"===String(t)?($(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<select class="select2 select2_condition_class multiple form-control condition_multiple_select2 nested_conditional_value" multiple required></select>')):("Starts with"===String(t)||"Ends with"===String(t)||String(t),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").empty(),$(this).parent().parent().find(".nested_conditional_input_value").find(".nested_conditional_format_value_input").append('<select class="select2 form-control select2_condition_class condition_select2 nested_conditional_value" required></select>')),$(".select2_condition_class").select2({tags:!0})}),$(".nested_column").change(function(){$(".nested_conditional_condition").val("").trigger("change")})}),$(".add_conditional_parameter").click(function(){const t=$(".input_columns_value_dict")[0].innerHTML,a='<div class="conditional_body" style="margin-top:1em;width: 100%; display:flex">\n          <div class="col-3">\n            <select class="select2 form-control conditional_column_name">\n              <option value="" selected disabled>------------</option>\n            '+t+'</select>\n          </div>\n          <div class="col-3">\n            <select class="select2 form-control conditional_condition">\n              <option value="" disabled selected>-------------------</option>\n              <option value="Greater than">Greater than</option>\n              <option value="Smaller than">Smaller than</option>\n              <option value="Equal to">Equal to</option>\n              <option value="Not equal to">Not equal to</option>\n              <option value="In">In</option>\n              <option value="Starts with">Starts with</option>\n              <option value="Contains">Contains</option>\n              <option value="Ends with">Ends with</option>\n            </select>\n          </div>\n          <div class="col-3 conditional_input_value">\n            <div class="conditional_format_value_input">\n            <select class="select2 form-control select2_condition_class" required>\n            </select>\n            </div>\n          </div>\n          <div class="col-2">\n            <input type="color" class="form-control conditional_color_input" data-css="background-color" value="#ffffff" >\n          </div>\n          <div class="col-1">\n            <i class="fa fa-times remove_conditional_parameter" data-toggle="tooltip" title="Remove condition" style="cursor:pointer;margin-top:0.7em;"></i>\n          </div>\n         \n        </div>';$(".conditional_data_body").append(a),$(".select2").select2(),$(".select2_condition_class").select2({tags:!0}),$(".remove_conditional_parameter").click(function(){$(this).closest(".conditional_body").remove()}),$(".conditional_column_name").change(function(){const t=$(this).find("option:selected").attr("data-datatype");let a="";if($(this).parent().parent().find(".conditional_condition").empty(),$(this).parent().parent().find(".conditional_condition").append('<option value="" disabled selected>------------</option>'),"Nested_Table"!=$(".table_type").html())if("IntegerField"===String(t)||"BigIntegerField"===String(t)||"FloatField"===String(t)||"AutoField"===String(t)){a=["Greater than","Smaller than","Equal to","Not equal to"];for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition").append('<option value="'+a[t]+'">'+a[t]+"</option>")}else if("DateField"===String(t)||"DateTimeField"===String(t)){a=["Greater than","Smaller than","Equal to","Not equal to"];for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition").append('<option value="'+a[t]+'">'+a[t]+"</option>")}else{a=["Equal to","Not equal to","In","Starts with","Ends with","Contains"];for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition").append('<option value="'+a[t]+'">'+a[t]+"</option>")}else{a=["Greater than","Smaller than","Equal to","Not equal to","In","Starts with","Ends with","Contains"];for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition").append('<option value="'+a[t]+'">'+a[t]+"</option>")}}),$(".conditional_condition").change(function(){const t=$(this).val();"Greater than"===String(t)||"Smaller than"===String(t)?"DateField"==$(this).parent().parent().find(".conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<input type="date" class="conditional_value"></input>')):"DateTimeField"==$(this).parent().parent().find(".conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<input type="datetime-local" style="width:11em;" class="conditional_value"></input>')):($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<input type="number" style="height:2em;" class="conditional_value"></input>')):"Equal to"===String(t)||"Not equal to"===String(t)?"DateField"==$(this).parent().parent().find(".conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<input type="date" class="conditional_value"></input>')):"DateTimeField"==$(this).parent().parent().find(".conditional_column_name").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<input type="datetime-local" style="width:11em;" class="conditional_value"></input>')):($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<select class="select2 form-control select2_condition_class condition_select2 conditional_value" required></select>')):"In"===String(t)?($(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<select class="select2 select2_condition_class multiple form-control condition_multiple_select2 conditional_value" multiple required></select>')):("Starts with"===String(t)||"Ends with"===String(t)||String(t),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").empty(),$(this).parent().parent().find(".conditional_input_value").find(".conditional_format_value_input").append('<select class="select2 form-control select2_condition_class condition_select2 conditional_value" required></select>')),$(".select2_condition_class").select2({tags:!0})})}),$(`#agg_header${elementID}`).change(function(){let t=$(this).attr("id").replace("agg_header","");"true"===String($(`#agg_header${t}`).prop("checked"))?$(`#agg_header_value${t}`).css("display","block"):$(`#agg_header_value${t}`).css("display","none")}),$(`#agg_header_sum${elementID}`).change(function(){let t=$(this).attr("id").replace("agg_header_sum","");"true"===String($(`#agg_header_sum${t}`).prop("checked"))?$(`#agg_header_value_sum${t}`).css("display","block"):$(`#agg_header_value_sum${t}`).css("display","none")}),$(`#agg_header_count${elementID}`).change(function(){let t=$(this).attr("id").replace("agg_header_count","");"true"===String($(`#agg_header_count${t}`).prop("checked"))?$(`#agg_header_value_count${t}`).css("display","block"):$(`#agg_header_value_count${t}`).css("display","none")}),$(`#agg_header_max${elementID}`).change(function(){let t=$(this).attr("id").replace("agg_header_max","");"true"===String($(`#agg_header_max${t}`).prop("checked"))?$(`#agg_header_value_max${t}`).css("display","block"):$(`#agg_header_value_max${t}`).css("display","none")}),$(`#selectYfloat${elementID}`).change(function(){let t=$(this).attr("id").replace("selectYfloat","");const a=$(this).find("option:selected").attr("data-datatype");let e="";if("IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)){e=["Count","Count Distinct"],$(`#selectoperations${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#selectoperations${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>")}else{e=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"],$(`#selectoperations${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#selectoperations${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>")}}),$(`#select_columns${elementID}`).change(function(){let t=$(this).attr("id").replace("select_columns","");const a=[];let e=[],o=[];const l=$(this).val();$(`#OPerationlabel${t}`).find(".operation_delete").remove();for(let d=0;d<l.length;d++){$(`#OPerationlabel${t}`).append(`<div class="form-group operation_delete">\n                              <label class="acies_label col-md-12">Operation - ${l[d]}:</label>\n                              <select id="select_table_operation${l[d]}${t}" class="select2 plotAjax form-control" name="sel"\n                                required>\n                                <option value="" disabled selected>--------------------</option>\n                              </select>\n                              </div>`),$(`#select_table_operation${l[d]}${t}`).select2();let i=0;const r=$(`#select_columns${t} option[value = "${l[d]}"]`).attr("data-datatype");if(o.push(r),"IntegerField"!==r&&"BigIntegerField"!==r&&"FloatField"!==r&&"AutoField"!==r){a.push(r),"DateField"!=r&&"DateTimeField"!=r&&(i=1),e=0==i?["Count","Count Distinct","First","Last","Earliest","Latest"]:["Count","Count Distinct","First","Last"],$(`#select_table_operation${l[d]}${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#select_table_operation${l[d]}${t}`).append(`<option value="${e[a]}">${e[a]}</option>`)}else if("IntegerField"===r||"BigIntegerField"===r||"FloatField"===r||"AutoField"===r){e=["Sum","Count","Count Distinct","Average","Skewness","Kurtosis","Median","Variance","Standard Deviation","Minimum","Maximum","Percentage of Total"],$(`#select_table_operation${l[d]}${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#select_table_operation${l[d]}${t}`).append(`<option value="${e[a]}">${e[a]}</option>`)}}}),$(`#select_columns${elementID}`).on("select2:select",function(t){var a=t.params.data;$(".nestedtable_columns_re-order").append(`\n              <li class="btn btn-sm btn-light col" name="${a.id}"  style="height:auto;margin:5px auto;\n              overflow: auto;">\n                <span class="ui-icon ui-icon-arrowthick-2-n-s float-left mt-1"></span>${a.text}\n              </li>`),$("#nestedTableColumnReorder").find(".sortable-order").sortable()}),$(`#select_columns${elementID}`).on("select2:unselect",function(t){var a=t.params.data;$(`.nestedtable_columns_re-order li[name='${a.id}']`).remove()}),$("#nestedtablecol_reorder").click(function(){$(this).is(":checked")?$("#nestedTableColumnReorder").css("display","block"):$("#nestedTableColumnReorder").css("display","none")}),$(`#selectXfloat${elementID}`).change(function(){let t=$(this).attr("id").replace("selectXfloat","");const a=$(this).find("option:selected").attr("data-datatype");let e=[];if("IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)){e=["Count","Count Distinct"],$(`#opt${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#opt${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>")}else{e=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"],$(`#opt${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#opt${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>")}}),$(`#select_xf${elementID}`).change(function(){let t=$(this).attr("id").replace("select_xf","");const a=$(this).find("option:selected").attr("data-datatype"),e=$(`#select_xf1${t}`).find("option:selected").attr("data-datatype");let o=[];if("IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)){o=["Count","Count Distinct"],$(`#select_xxy${t}`).find("option").slice(1).remove();for(let a=0;a<o.length;a++)$(`#select_xxy${t}`).append('<option value="'+o[a]+'">'+o[a]+"</option>")}else if("IntegerField"!==String(e)&&"BigIntegerField"!==String(e)&&"FloatField"!==String(e)&&"AutoField"!==String(e)){o=["Count","Count Distinct"],$(`#select_xxy${t}`).find("option").slice(1).remove();for(let a=0;a<o.length;a++)$(`#select_xxy${t}`).append('<option value="'+o[a]+'">'+o[a]+"</option>")}else{o=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"],$(`#select_xxy${t}`).find("option").slice(1).remove();for(let a=0;a<o.length;a++)$(`#select_xxy${t}`).append('<option value="'+o[a]+'">'+o[a]+"</option>")}}),$(`#select_xf1${elementID}`).change(function(){let t=$(this).attr("id").replace("select_xf1","");const a=$(this).find("option:selected").attr("data-datatype"),e=$(`#select_xf${t}`).find("option:selected").attr("data-datatype");let o=[];if("IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)){o=new Array("Count","Count Distinct"),$(`#select_xxy${t}`).find("option").slice(1).remove();for(let a=0;a<o.length;a++)$(`#select_xxy${t}`).append('<option value="'+o[a]+'">'+o[a]+"</option>")}else if("IntegerField"!==String(e)&&"BigIntegerField"!==String(e)&&"FloatField"!==String(e)&&"AutoField"!==String(e)){o=["Count","Count Distinct"],$(`#select_xxy${t}`).find("option").slice(1).remove();for(let a=0;a<o.length;a++)$(`#select_xxy${t}`).append('<option value="'+o[a]+'">'+o[a]+"</option>")}else{o=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"],$(`#select_xxy${t}`).find("option").slice(1).remove();for(let a=0;a<o.length;a++)$(`#select_xxy${t}`).append('<option value="'+o[a]+'">'+o[a]+"</option>")}}),$(`#select_Y${elementID}`).change(function(){let t=$(this).attr("id").replace("select_Y","");const a=$(this).find("option:selected").attr("data-datatype"),e=$(`#select_Y1${t}`).find("option:selected").attr("data-datatype");let o="";if("IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)){o=new Array("Count","Count Distinct"),$(`#select_OP${t}`).find("option").slice(1).remove();for(let a=0;a<o.length;a++)$(`#select_OP${t}`).append('<option value="'+o[a]+'">'+o[a]+"</option>")}else if("IntegerField"!==String(e)&&"BigIntegerField"!==String(e)&&"FloatField"!==String(e)&&"AutoField"!==String(e)){o=new Array("Count","Count Distinct"),$(`#select_OP${t}`).find("option").slice(1).remove();for(let a=0;a<o.length;a++)$(`#select_OP${t}`).append('<option value="'+o[a]+'">'+o[a]+"</option>")}else{o=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"],$(`#select_OP${t}`).find("option").slice(1).remove();for(let a=0;a<o.length;a++)$(`#select_OP${t}`).append('<option value="'+o[a]+'">'+o[a]+"</option>")}}),$(`#select_Y1${elementID}`).change(function(){let t=$(this).attr("id").replace("select_Y1","");const a=$(this).find("option:selected").attr("data-datatype"),e=$(`#select_Y${t}`).find("option:selected").attr("data-datatype");let o="";if("IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)){o=["Count","Count Distinct"],$(`#select_OP${t}`).find("option").slice(1).remove();for(let a=0;a<o.length;a++)$(`#select_OP${t}`).append('<option value="'+o[a]+'">'+o[a]+"</option>")}else if("IntegerField"!==String(e)&&"BigIntegerField"!==String(e)&&"FloatField"!==String(e)&&"AutoField"!==String(e)){o=["Count","Count Distinct"],$(`#select_OP${t}`).find("option").slice(1).remove();for(let a=0;a<o.length;a++)$(`#select_OP${t}`).append('<option value="'+o[a]+'">'+o[a]+"</option>")}else{o=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"],$(`#select_OP${t}`).find("option").slice(1).remove();for(let a=0;a<o.length;a++)$(`#select_OP${t}`).append('<option value="'+o[a]+'">'+o[a]+"</option>")}}),$(`#select_value${elementID}`).change(function(){let t=$(this).attr("id").replace("select_value","");const a=$(this).find("option:selected").attr("data-datatype");let e="";if("IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)){e=["Count","Count Distinct"],$(`#select_options${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#select_options${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>")}else{e=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"],$(`#select_options${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#select_options${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>")}}),$(`#select_val${elementID}`).change(function(){let t=$(this).attr("id").replace("select_val","");const a=$(this).find("option:selected").attr("data-datatype");let e="";if("IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)){e=["Count","Count Distinct"],$(`#select_op${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#select_op${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>")}else{e="Sunburst"!==String(document.getElementById(`selectPlotly${t}`).value)?["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]:["Sum","Count","Count Distinct","First","Last","Percentage of Total"],$(`#select_op${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#select_op${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>")}}),$(`#select_XMultiple_no${elementID}`).change(function(){let t=$(this).attr("id").replace("select_XMultiple_no",""),a="";$(`.multiple_xaxis${t}`).empty();for(let e=2;e<=$(this).val();e++)a+=`<div class="col-12" id="XHbarMultiplelabel{element_id}">\n                  <div class="form-group">\n                      <label class="acies_label col-md-12">Select X${e}:</label>\n                      <select id="select_X${e}Multiple${t}" class="XMultiple_dropbox select2 plotAjax form-control" name="sel"\n                      required>`,a+='<option value="" disabled selected>--------------------</option>',$(`#select_X1Multiple${t} option`).each(function(){$(this).attr("data-datatype")&&(a+=`<option value="${$(this).val()}" data-datatype="${$(this).attr("data-datatype")}">${$(this).text()}</option>`)}),a+="</select>\n                  </div>\n              </div>";$(`.multiple_xaxis${t}`).append(a),$(".select2").select2(),$(".XMultiple_dropbox").change(function(){let a=[];$(".XMultiple_dropbox").each(function(){const t=$(this).find("option:selected").attr("data-datatype");t&&"IntegerField"!==String(t)&&"BigIntegerField"!==String(t)&&"FloatField"!==String(t)&&"AutoField"!==String(t)&&(a=["Count","Count Distinct"])}),0==a.length&&(a=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]),$(`#select_XMultipleOP${t}`).find("option").slice(1).remove();for(let e=0;e<a.length;e++)$(`#select_XMultipleOP${t}`).append('<option value="'+a[e]+'">'+a[e]+"</option>")})}),$(".XMultiple_dropbox").change(function(){let t=[];$(".XMultiple_dropbox").each(function(){const a=$(this).find("option:selected").attr("data-datatype");a&&"IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)&&(t=["Count","Count Distinct"])}),0==t.length&&(t=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]),$(`#select_XMultipleOP${elementID}`).find("option").slice(1).remove();for(let a=0;a<t.length;a++)$(`#select_XMultipleOP${elementID}`).append('<option value="'+t[a]+'">'+t[a]+"</option>")}),$(`#select_YmultipleCombo_no${elementID}`).change(function(){let t=$(this).attr("id").replace("select_YmultipleCombo_no",""),a="";$(`.multiple_yaxis_combo${t}`).empty();for(let e=2;e<=$(this).val();e++)a+=`<div class="col-12" id="YHbarComboMultiplelabel{element_id}">\n                  <div class="form-group">\n                      <label class="acies_label col-md-12">Select Y${e}:</label>\n                      <select id="select_Y${e}multipleCombo${t}" class="YmultipleCombo_dropbox select2 plotAjax form-control" name="sel"\n                      required>`,a+='<option value="" disabled selected>--------------------</option>',$(`#select_Y1multipleCombo${t} option`).each(function(){$(this).attr("data-datatype")&&(a+=`<option value="${$(this).val()}" data-datatype="${$(this).attr("data-datatype")}">${$(this).text()}</option>`)}),a+="</select>\n                  </div>\n              </div>";$(`.multiple_yaxis_combo${t}`).append(a),$(".select2").select2(),$(".YmultipleCombo_dropbox").change(function(){let a=[];$(".YmultipleCombo_dropbox").each(function(){const t=$(this).find("option:selected").attr("data-datatype");t&&"IntegerField"!==String(t)&&"BigIntegerField"!==String(t)&&"FloatField"!==String(t)&&"AutoField"!==String(t)&&(a=["Count","Count Distinct"])}),0==a.length&&(a=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]),$(`#select_OPCombo${t}`).find("option").slice(1).remove();for(let e=0;e<a.length;e++)$(`#select_OPCombo${t}`).append('<option value="'+a[e]+'">'+a[e]+"</option>")})}),$(".YmultipleCombo_dropbox").change(function(){let t=[];$(".YmultipleCombo_dropbox").each(function(){const a=$(this).find("option:selected").attr("data-datatype");a&&"IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)&&(t=["Count","Count Distinct"])}),0==t.length&&(t=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]),$(`#select_OPCombo${elementID}`).find("option").slice(1).remove();for(let a=0;a<t.length;a++)$(`#select_OPCombo${elementID}`).append('<option value="'+t[a]+'">'+t[a]+"</option>")}),$(`#select_LineCombo${elementID}`).change(function(){let t=$(this).attr("id").replace("select_LineCombo","");const a=$(this).find("option:selected").attr("data-datatype");let e=[];if("IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)){e=["Count","Count Distinct"],$(`#select_OPCombo_2${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#select_OPCombo_2${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>")}else{e=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"],$(`#select_OPCombo_2${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#select_OPCombo_2${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>")}}),$(`#select_YmultipleLineCombo_no${elementID}`).change(function(){let t=$(this).attr("id").replace("select_YmultipleLineCombo_no",""),a="";$(`.multiple_yaxis_line_combo${t}`).empty();for(let e=2;e<=$(this).val();e++)a+=`<div class="col-12" id="YHbarComboMultipleLinelabel{element_id}">\n                  <div class="form-group">\n                      <label class="acies_label col-md-12">Select Y${e}:</label>\n                      <select id="select_Y${e}multipleLineCombo${t}" class="YmultipleLineCombo_dropbox select2 plotAjax form-control" name="sel"\n                      required>`,a+='<option value="" disabled selected>--------------------</option>',$(`#select_Y1multipleLineCombo${t} option`).each(function(){$(this).attr("data-datatype")&&(a+=`<option value="${$(this).val()}" data-datatype="${$(this).attr("data-datatype")}">${$(this).text()}</option>`)}),a+="</select>\n                  </div>\n              </div>";$(`.multiple_yaxis_line_combo${t}`).append(a),$(".select2").select2(),$(".YmultipleLineCombo_dropbox").change(function(){let a=[];$(".YmultipleLineCombo_dropbox").each(function(){const t=$(this).find("option:selected").attr("data-datatype");t&&"IntegerField"!==String(t)&&"BigIntegerField"!==String(t)&&"FloatField"!==String(t)&&"AutoField"!==String(t)&&(a=["Count","Count Distinct"])}),0==a.length&&(a=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]),$(`#select_multipleCombo${t}`).find("option").slice(1).remove();for(let e=0;e<a.length;e++)$(`#select_multipleCombo${t}`).append('<option value="'+a[e]+'">'+a[e]+"</option>")})}),$(".YmultipleLineCombo_dropbox").change(function(){let t=[];$(".YmultipleLineCombo_dropbox").each(function(){const a=$(this).find("option:selected").attr("data-datatype");a&&"IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)&&(t=["Count","Count Distinct"])}),0==t.length&&(t=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]),$(`#select_multipleCombo${elementID}`).find("option").slice(1).remove();for(let a=0;a<t.length;a++)$(`#select_multipleCombo${elementID}`).append('<option value="'+t[a]+'">'+t[a]+"</option>")}),$(`#select_multiple_combo_line${elementID}`).change(function(){let t=$(this).attr("id").replace("select_multiple_combo_line",""),a="";$(`.multiple_line_combo_chart_line${t}`).empty();for(let e=2;e<=$(this).val();e++)a+=`<div class="col-12" id="YHbarComboMultiplelabel{element_id}">\n                  <div class="form-group">\n                      <label class="acies_label col-md-12">Select Line ${e}:</label>\n                      <select id="select_L${e}multipleCombo${t}" class="combo_multiple_line_dropbox select2 plotAjax form-control" name="sel"\n                      required>`,a+='<option value="" disabled selected>--------------------</option>',$(`#select_L1multipleCombo${t} option`).each(function(){
$(this).attr("data-datatype")&&(a+=`<option value="${$(this).val()}" data-datatype="${$(this).attr("data-datatype")}">${$(this).text()}</option>`)}),a+="</select>\n                  </div>\n              </div>";$(`.multiple_line_combo_chart_line${t}`).append(a),$(".select2").select2(),$(".combo_multiple_line_dropbox").change(function(){let a=[];$(".combo_multiple_line_dropbox").each(function(){const t=$(this).find("option:selected").attr("data-datatype");t&&"IntegerField"!==String(t)&&"BigIntegerField"!==String(t)&&"FloatField"!==String(t)&&"AutoField"!==String(t)&&(a=["Count","Count Distinct"])}),0==a.length&&(a=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]),$(`#select_multipleCombo_line${t}`).find("option").slice(1).remove();for(let e=0;e<a.length;e++)$(`#select_multipleCombo_line${t}`).append('<option value="'+a[e]+'">'+a[e]+"</option>")})}),$(".combo_multiple_line_dropbox").change(function(){let t=[];$(".combo_multiple_line_dropbox").each(function(){const a=$(this).find("option:selected").attr("data-datatype");a&&"IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)&&(t=["Count","Count Distinct"])}),0==t.length&&(t=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]),$(`#select_multipleCombo_line${elementID}`).find("option").slice(1).remove();for(let a=0;a<t.length;a++)$(`#select_multipleCombo_line${elementID}`).append('<option value="'+t[a]+'">'+t[a]+"</option>")}),$(`#select_YMultiple_no${elementID}`).change(function(){let t=$(this).attr("id").replace("select_YMultiple_no",""),a="";$(`.multiple_yaxis${t}`).empty();for(let e=2;e<=$(this).val();e++)a+=`<div class="col-12" id="YHbarMultiplelabel{element_id}">\n                  <div class="form-group">\n                      <label class="acies_label col-md-12">Select  Y${e}:</label>\n                      <select id="select_Y${e}Multiple${t}" class="YMultiple_dropbox select2 plotAjax form-control" name="sel"\n                      required>`,a+='<option value="" disabled selected>--------------------</option>',$(`#select_Y1Multiple${t} option`).each(function(){$(this).attr("data-datatype")&&(a+=`<option value="${$(this).val()}" data-datatype="${$(this).attr("data-datatype")}">${$(this).text()}</option>`)}),a+="</select>\n                  </div>\n              </div>";$(`.multiple_yaxis${t}`).append(a),$(".select2").select2(),$(".YMultiple_dropbox").change(function(){let a=[];$(".YMultiple_dropbox").each(function(){const t=$(this).find("option:selected").attr("data-datatype");t&&"IntegerField"!==String(t)&&"BigIntegerField"!==String(t)&&"FloatField"!==String(t)&&"AutoField"!==String(t)&&(a=["Count","Count Distinct"])}),0==a.length&&(a=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]),$(`#select_YMultipleOP${t}`).find("option").slice(1).remove();for(let e=0;e<a.length;e++)$(`#select_YMultipleOP${t}`).append('<option value="'+a[e]+'">'+a[e]+"</option>")})}),$(".YMultiple_dropbox").change(function(){let t=[];$(".YMultiple_dropbox").each(function(){const a=$(this).find("option:selected").attr("data-datatype");a&&"IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)&&(t=["Count","Count Distinct"])}),0==t.length&&(t=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]),$(`#select_YMultipleOP${elementID}`).find("option").slice(1).remove();for(let a=0;a<t.length;a++)$(`#select_YMultipleOP${elementID}`).append('<option value="'+t[a]+'">'+t[a]+"</option>")}),$(`#select_multiple_y${elementID}`).change(function(){let t=$(this).attr("id").replace("select_multiple_y",""),a="";$(`.multiple_line_chart_yaxis${t}`).empty();for(let e=2;e<=$(this).val();e++)a+=`<div class="col-12" id="YHbar_multiple_label{element_id}">\n                  <div class="form-group">\n                      <label class="acies_label col-md-12">Select Y${e} Axis:</label>\n                      <select id="selectY${e}_multiplefloat${t}" class="multiple_line_dropbox select2 plotAjax form-control" name="sel"\n                      required>`,$(`#selectY1_multiplefloat${t} option`).each(function(){a+=`<option value="${$(this).val()}" data-datatype="${$(this).attr("data-datatype")}">${$(this).text()}</option>`}),a+='<option value="" disabled selected>--------------------</option>',a+="</select>\n                  </div>\n              </div>";$(`.multiple_line_chart_yaxis${t}`).append(a),$(".select2").select2(),$(".multiple_line_dropbox").change(function(){const a=$(this).find("option:selected").attr("data-datatype");let e=[];if("IntegerField"!==String(a)&&"BigIntegerField"!==String(a)&&"FloatField"!==String(a)&&"AutoField"!==String(a)){e=["Count","Count Distinct"],$(`#select_multiple_operations${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#select_multiple_operations${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>")}else{e=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"],$(`#select_multiple_operations${t}`).find("option").slice(1).remove();for(let a=0;a<e.length;a++)$(`#select_multiple_operations${t}`).append('<option value="'+e[a]+'">'+e[a]+"</option>")}})}),$(".multiple_line_dropbox").change(function(){const t=$(this).find("option:selected").attr("data-datatype");let a=[];if("IntegerField"!==String(t)&&"BigIntegerField"!==String(t)&&"FloatField"!==String(t)&&"AutoField"!==String(t)){a=["Count","Count Distinct"],$(`#select_multiple_operations${elementID}`).find("option").slice(1).remove();for(let t=0;t<a.length;t++)$(`#select_multiple_operations${elementID}`).append('<option value="'+a[t]+'">'+a[t]+"</option>")}else{a=["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"],$(`#select_multiple_operations${elementID}`).find("option").slice(1).remove();for(let t=0;t<a.length;t++)$(`#select_multiple_operations${elementID}`).append('<option value="'+a[t]+'">'+a[t]+"</option>")}}),$(`#plotlyButton${elementID}`).off("click").on("click",e);async function o(){function t(t){return new Promise(a=>setTimeout(a,t))}var a=`.tab-pane#${element_id}_tab_content`,e=$(`#analysisPDF${element_id}`).html();if(null==$(".tab-content").find(a).find(".card-body").find("a")[0]){a=".cells",$(a).find(".card-body").find("a").removeClass("active"),$("body").css("pointer-events","none"),$("body").css("background-color","black"),$("body").css("opacity",.5),$("body").css("overflow-y","hidden"),$(`#analysisPDF${element_id}`).html('<i class="fa fa-circle-notch fa-spin"></i> Loading');var o=await $(a).find(".card-body").find(".tab-content").find(".tab-pane");$(a).find(".card-body").find(".tab-content").find(".tab-pane").find(".card-tools").css("opacity",0),$(a).find(".card-body").find(".tab-content").find(".tab-pane").find(".chartDivSection").find(".charts").find(".card-header").find(".row").find("i").css("display","none");var l=$(a).find(".card-body").find(".tab-content").find(".tab-pane").length}else{$(".tab-content").find(a).find(".card-body").find("a").removeClass("active"),$("body").css("pointer-events","none"),$("body").css("background-color","black"),$("body").css("opacity",.5),$("body").css("overflow-y","hidden"),$(`#analysisPDF${element_id}`).html('<i class="fa fa-circle-notch fa-spin"></i> Loading');o=await $(".tab-content").find(a).find(".card-body").find(".tab-content").find(".tab-pane");$(".tab-content").find(a).find(".card-body").find(".tab-content").find(".tab-pane").find(".card-tools").css("opacity",0),$(".tab-content").find(a).find(".card-body").find(".tab-content").find(".tab-pane").find(".chartDivSection").find(".charts").find(".card-header").find(".row").find("i").css("display","none");l=$(".tab-content").find(a).find(".card-body").find(".tab-content").find(".tab-pane").length}var d,i="Analysis.pdf",r=$(".chartDivSection").eq(0).attr("data-layout"),n=0;for(let e=0;e<l;e++){if(null==$(".tab-content").find(a).find(".card-body").find("a")[0]?($(a).find(".card-body").find(".tab-content").find(".tab-pane").eq(e).removeClass("active show"),$(a).find(".card-body").find(".tab-content").find(".tab-pane").eq(e).addClass("active show"),$(".chartDivSection").css("border","none")):($(".tab-content").find(a).find(".card-body").find(".tab-content").find(".tab-pane").eq(e).removeClass("active show"),$(".tab-content").find(a).find(".card-body").find(".tab-content").find(".tab-pane").eq(e).addClass("active show"),$(".chartDivSection").css("border","none")),0==n&&1==e&&(e=0,n=1),await 800,$(document).scrollTop(0),await t(1e3),0==e&&(d=await new jsPDF("l","pt",[o[e].offsetWidth,o[e].offsetHeight]),await new jsPDF("l","pt",[o[0].offsetWidth,o[0].offsetHeight])),e<l&&e>=0){var s=await o[e].offsetHeight,c=await o[e].offsetWidth;e<l&&e>=0&&await d.addPage([c,s])}await html2canvas(o[e],{useCors:!0,allowTaint:!0}).then(t=>{var a=t.toDataURL("image/png"),o=d.internal.pageSize.width+30,l=d.internal.pageSize.height;e>=0&&d.addImage(a,"PNG",0,0,o,l)})}for(let t=0;t<l;t++)$(".tab-content").find(".tab-pane").find(".card-body").find(".tab-pane").eq(t).removeClass("active show");$(`#analysisPDF${element_id}`).html(e),$(".tab-content").find(".tab-pane").find(".card-body").find(".tab-content").find(".tab-pane").find(".card-tools").css("opacity",1),d.deletePage(1),d.save(i),null==$(".tab-content").find(".tab-pane").find(".card-body").find("a")[0]&&window.location.reload(),$("body").css("overflow-y",""),$("body").css("background-color",""),$("body").css("opacity",""),$("body").css("pointer-events",""),$(".tab-content").find(".tab-pane").find(".card-body").find(".tab-content").find(".tab-pane").find(".chartDivSection").find(".charts").find(".card-header").find(".row").find("i").css("display","inline-block"),$(".tab-content").find(".tab-pane").find(".card-body").find("a").removeClass("active"),"No layout"!=r&&$(".chartDivSection").css("border","solid black 0.1px")}$(`#themeColor${elementID}`).change(function(){const t=$(this).val();var a=$(this).attr("id").replace("themeColor","");$(`#theme1${a}`).css("background-color",t)}),$(`#themeColor1${elementID}`).change(function(){const t=$(this).val();$(".globalConfigPreviewChart").css("color",t),$(".inner-div").css("background-color",t)}),$(`#myColor${elementID}`).change(function(){const t=$(this).val();$(".mainDiv").css("background-color",t)}),reloadAnalysisConfig(elementID),element_id.startsWith("ellipse")?$(`#saveChartConfigButton1${element_id}`).click(function(){saveChartConfigAnalysis($(this).attr("data-elementID"),"listview")}):$(`#saveChartConfigButton${element_id}`).click(function(){saveChartConfigAnalysis($(this).attr("data-elementID"))}),$(`#analysisPDF${element_id}`).click(o)}$(document).ready(function(){tabID=$(".navtab").length,$("#btn-add-tab").click(function(){tabID++,$("#tab-list").append($(`<li class="nav-item navtab"><a class="nav-link" id="analysistab${tabID}" href="#tab${tabID}" role="tab" data-toggle="tab" aria-controls="#tab${tabID}" aria-selected="false"><div class="row"><div class="col-md-10" style="padding-right: 0.1rem"><span class="contentEditable tabname" data-tab="analysisrow${tabID}" data-tab_ct="analysisrow${tabID}">Tab${tabID}</span></div><div class="col-md-2" style="padding-top: 0.3rem"><div class="dropdown"><i class="fa fa-cog fa-lg" style="font-size:1.2rem"></i><div class="dropdown-content" style="right: 0rem; top: 1.5rem"><div style="height:8px"></div><div class="row" id="saveChartConfigButton${tabID}" data-tab="analysisrow${tabID}" style="font-size:1rem;">\n                                  <button type="button"\n                                                  style="border-width:0px;padding: 1px 1px;background-color: white;">\n                                                  <i class="fa fa-save fa-lg"\n                                                      style="font-size:1.3rem;padding-top: 0.1rem;color:darkgoldenrod"></i>\n                                                  Save</button></div>\n                                                  <div class="row closetab" style="font-size:1rem; padding-left:0.1rem"><button type="button" style="border-width:0px;padding: 1px 1px;background-color: white;"> &nbsp;<i class="fa fa-times fa-lg"  style="font-size:1.4rem;color:darkgoldenrod"></i>&nbsp; Delete</button></div>\n                                                  <div class="row" id="${"AddComment"+tabID}" style="font-size:1rem;padding-left:0.1rem"><button type="button" style="border-width:0px;padding: 1px 1px;background-color: white;"> &nbsp;<i class="fa fa-font fa-lg"  style="font-size:1rem;color:darkgoldenrod"></i>Comment</button></div>\n    \n                                      </div>\n                                  </div>\n                              </div>\n                          </div></a></li>`)),$("#tab-content").append($(`<div class="tab-pane fade" id="tab${tabID}" role="tabpanel" aria-labelledby="analysistab${tabID}"><div class="row" style="margin-left: 1rem;"><button id="analysisPDF${tabID}" type="button" class="btn btn-primary">Convert to PDF</button></div><div class="col-lg-12 m-3 row savealltab resizablediv" id="analysisrow${tabID}"></div></div>`)),$(".contentEditable").each(function(){$(this).on("click",function(){$(this).attr("contenteditable","true"),$(this).focus()}),$(this).focusout(function(){$(this).removeAttr("contenteditable")})}),$(".resizablediv").resizable({handles:"n, s"}),$(`#${"AddComment"+tabID}`).click(function(){const t=$(this).parent().parent().parent().parent().parent()[0].id.split("b")[1],a="analysisrow"+t,e=$(".commentboxcard").length,o="commentcard"+e,l="cancelcard"+e,d=$(`<div class="commentboxcard" style="height:6rem" data-tab="${o}"><div class="row"><i class="fa fa-times" id="${l}" style="font-size:1rem"></i></div><div><div class="row"><textarea id="${o}" class="commentbox" rows="4" cols="20" name="comment" form="usrform" style="resize:none;margin:0.5rem"></textarea></div></div></div>`);d.appendTo(`#${a}`),document.getElementById(l).onclick=function(){$(this).parent().parent().remove()},$(".commentbox").resizable({start:function(t,a){$(this).parent()[0].style.height="",$(this).parent()[0].style.position="absolute"}}),$(".commentboxcard").draggable({cancel:""})}),$(`#analysisPDF${tabID}`).click(async function(){function t(t){return new Promise(a=>setTimeout(a,t))}tabno=$(this)[0].id.split("F")[1],$(this).html('<i class="fa fa-spinner fa-spin"></i> Loading'),$(".tab-content").find(".tab-pane").find(".card-body").find(".tab-content").find(".tab-pane").find(".chartDivSection").find(".charts").find(".card-header").find(".row").find("i").css("display","none"),$(this).parent().attr("data-html2canvas-ignore",!0),$(".nav-tabs").attr("data-html2canvas-ignore",!0),$(`#${$(this).parent().parent().next().attr("id")}`).css("border","none");const a=$(`#${$(this).parent().parent().next().attr("id")}`).attr("data-layout");$(document).scrollTop(0),await t(1e3);const e=$(`#analysisrow${tabno}`).parent().parent().parent();e.width(),e.height();let o="",l="";pdfName="PDF";const d=$(`#analysisrow${tabno}`).parent().parent().parent()[0].offsetWidth,i=$(`#analysisrow${tabno}`).parent().parent().parent()[0].offsetHeight;await html2canvas($(`#analysisrow${tabno}`).parent().parent().parent()[0],{useCORS:!0,allowTaint:!0}).then(function(t){o=$(`#analysisrow${tabno}`).height(),l=$(`#analysisrow${tabno}`).width();const a=t.toDataURL("image/svg"),e=new jsPDF("l","px",[d,i]);e.addImage(a,"SVG",0,0,e.internal.pageSize.width,e.internal.pageSize.height),e.save(pdfName),$(".tab-content").find(".tab-pane").find(".card-body").find(".tab-content").find(".tab-pane").find(".chartDivSection").find(".charts").find(".card-header").find(".row").find("i").css("display","block"),$(`#${tabDict.pdfButtonID}`).html('<i class="fa fa-file-pdf-o"></i>&nbsp;PDF')}),$(this).empty(),$(this).html('<i class="fa fa-file-pdf-o"></i>&nbsp;PDF'),"No layout"!==String(a)&&$(`#${$(this).parent().parent().next().attr("id")}`).css("border","solid black 0.1px"),$(".nav-tabs").removeAttr("data-html2canvas-ignore"),$(this).parent().removeAttr("data-html2canvas-ignore")}),$(`#saveChartConfigButton${tabID}`).click(function(){const t=$(this).attr("data-tab"),a="analysistab"+t.split("w")[1],e=$(`#${a}`).children()[0].children[0].innerText,o=document.querySelector(`#${t}`).offsetHeight,l=$(".chartDivSection").eq(0).attr("data-layout");$(".charts").each(function(){const a=$(this).parent().attr("id");if(String(a)===String(t)){const a=$(this).find("h5")[0].innerText,l=$(this).attr("data-layout"),d=JSON.parse($(this).attr("data-data")),i=($(this).attr("data-id"),$(this).attr("data-subtype"));$(this).attr("data-changed_text");"Pie_Chart"!==String(i)&&"Treemap"!==String(i)&&"Donut_Chart"!==String(i)||(d[0].labels=[],d[0].values=[]),"Sunburst"===String(i)&&(d[0].labels=[],d[0].values=[],d[0].ids=[],d[0].parents=[]),"Vertical_Bar"!==String(i)&&"Funnel"!==String(i)&&"Horizontal_Bar"!==String(i)&&"Line"!==String(i)&&"Stepped_Line"!==String(i)&&"Area"!==String(i)&&"Horizontal_Area"!==String(i)&&"Scatter"!==String(i)&&"2D_Histogram_Contour"!==String(i)&&"Vertical_Box"!==String(i)&&"Horizontal_Box"!==String(i)&&"Horizontal_Dot_Plot"!==String(i)&&"Scatter_with_Straight_Lines_and_Markers"!==String(i)&&"Vertical_Violin"!==String(i)&&"Horizontal_Violin"!==String(i)&&"3D_Scatter_Plot"!==String(i)&&"3D_Mesh_Plot"!==String(i)||(d[0].x=[],d[0].y=[]),"3D_Scatter_Plot"!==String(i)&&"3D_Mesh_Plot"!==String(i)||(d[0].z=[]),"Vertical_Waterfall"!==String(i)&&"Horizontal_Waterfall"!==String(i)||(d[0].x=[],d[0].y=[],d[0].measure=[]),"Funnel_Area"===String(i)&&(d[0].text=[],d[0].values=[]),"Vertical_Histogram"!==String(i)&&"Cumulative_Histogram"!==String(i)||(d[0].x=[]),"Horizontal_Histogram"===String(i)&&(d[0].y=[]),"Angular_Gauge"===String(i)&&(d[0].value=[],d[0].title=[],d[0].gauge.axis.range=[]),"Bullet_Gauge"===String(i)&&(d[0].value=[],d[0].gauge.axis.range=[]),"Vertical_Grouped_Violin"!==String(i)&&"Horizontal_Grouped_Violin"!==String(i)&&"Vertical_Grouped_Box"!==String(i)&&"Vertical_Line_Stacked"!==String(i)&&"Vertical_Area_Stacked"!==String(i)&&"Horizontal_Area_Stacked"!==String(i)&&"Horizontal_Grouped_Box"!==String(i)&&"Horizontal_Waterfall_Grouped"!==String(i)&&"Funnel_Stacked"!==String(i)||(d[0].x=[],d[0].y=[],d[1].y=[],d[1].x=[]),"Vertical_Waterfall_Grouped"===String(i)&&(d[0].measure=[],d[1].measure=[]);const r=$(this).attr("data-xaxis"),n=$(this).attr("data-yaxis"),s=$(this).attr("data-secondcolumn"),c=$(this).attr("data-operation"),_=$(this).attr("data-entity"),g=$(this).attr("data-date"),p=$(this).attr("data-model");chartsavedata.push({entity:_,date:g,model:p,operation:c,tabheight:o,tab_name:e,chartheader:a,x_axis:r,y_axis:n,second_column:s,tab_id:t,height:$(this).height(),width:$(this).width(),position:$(this).position(),layout:JSON.parse(l),data:d,id:uniqueid,graph_subtype:i,changed_text:JSON.parse(changedtext)})}}),$(".draggable_charts").each(function(){const a=$(this).parent().attr("id");if(String(a)===String(t)){const a=$(this).attr("data-xaxis"),l=$(this).attr("data-yaxis"),d=$(this).attr("data-secondcolumn"),i=$(this).attr("data-entity"),r=$(this).attr("data-date"),n=$(this).attr("data-model"),s=$(this).attr("data-operation"),c=$(this).attr("data-layout"),_=$(this).attr("data-data"),g=$(this).attr("data-id"),p=$(this).attr("data-subtype"),h=$(this).css("background-color"),b=$(this).find("h5").css("font-size"),y=$(this).find("p").css("font-size");chartsavedata.push({entity:i,date:r,model:n,operation:s,tabheight:o,tab_name:e,x_axis:a,y_axis:l,second_column:d,tab_id:t,height:$(this).height(),width:$(this).width(),position:$(this).position(),layout:c,data:_,id:g,graph_subtype:p,backgroundcolor:h,titlefontsize:y,valuefontsize:b})}}),$(".commentboxcard").each(function(){const a=$(this).parent().attr("id");if(String(a)===String(t)){const a=$(this).attr("data-tab"),l=document.getElementById(a).value,d=$(`#${a}`).height(),i=$(`#${a}`).width();chartsavedata.push({graph_subtype:"Textbox",tabheight:o,tab_name:e,tab_id:t,height:d,width:i,position:$(this).position(),textboxvalue:l,textboxid:a})}}),chartsavedata.push(l);let d=window.location.pathname,i=d.indexOf("/",d.indexOf("/")+1),r=d.indexOf("/",d.indexOf("/")+i+1),n=d.indexOf("/",d.indexOf("/")+r+1),s=(d.substring(i+1,r),d.substring(r+1,n));"Build"!=s&&"Edit"!=s&&(s="User")})}),$("#tab-list").on("click",".closetab",function(){tabID=$(this).parents("a").attr("href"),$(this).parents("li").remove(),$(tabID).remove(),$.ajax({url:"/dashboard/delete_plot",data:{tab_id:tabID},type:"POST",dataType:"json",success:function(t){},error:function(){}})});document.getElementById("tab-list")});let l="",d="";$(".myDiv").click(function(){l=$(this).css("background-color"),d=$(".inner-div").css("background-color"),$(prevDiv).css("border","0px"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this)}),window.onclick=function(t){if(!t.target.matches(".dropbtn")){const t=document.getElementsByClassName("dropdown-content");for(let a=0;a<t.length;a++){const e=t[a];e.classList.contains("show")&&e.classList.remove("show")}}},$("#applyButton").on("click",function(){let t=$(this).closest(".modal").find(".global_bg_color").find("input").val();$(".tabLinksclass").css("background-color",t),$("#tabLinks .index-rows").css("background-color",t)}),$(document).ready(function(){let t=$('#select_global_settings input[type="number"], #select_global_settings input[type="color"], #select_global_settings select.select2, #select_global_settings input[type="checkbox"]');t.each(function(){let t,a=$(this).attr("id"),e=$(this).prop("nodeName");"INPUT"===e?t="checkbox"===$(this).attr("type")?$(this).prop("checked"):($(this).attr("type"),$(this).val()):"SELECT"===e&&(t=$(this).find(":selected").val()),globalConfigJsonData[a]=t}),t.on("change",function(){color_changed=1}),$(".global_applyButton").on("click",function(){ele_id=$(this).attr("data_elementid");var t=$(".indextabBG").val(),a=$(".indextabFC").val();$(".defaultTabTheme").css("background-color",t),$(".index-no-column").css("background-color",t),$(".dropIndex").css("background",`${t} linear-gradient(to bottom right, ${t} 25%, #fff)`),$(".boxIndex").css("background",`${t} linear-gradient(to bottom right, ${t} 25%, #fff)`),$(".dropIndex").find("p").css("color",a),$(".boxIndex").find("p").css("color",a),$(".tab-header-name").css("color",a),$(".colored-text").css("color",a),$(".index-rows").css("border-color",t),$(".index-no-column").css("border-color",t),$(".tab-icons ").find("i").css("color",a),$(".colored-icons").find("i").css("color",t),$(".index-no-column").find("p").css("color",a),$(".arrow-tab").css("border-left-color",t),apply_clicked=1}),$("#select_global_settings").find(".close").off("click").on("click",function(){el_id=$("#select_global_settings").find(".themeColor1").attr("id").replace("themeColor1",""),close_clicked=1,0==apply_clicked&&1==close_clicked&&1==color_changed&&(Swal.fire({icon:"question",title:"There are some unsaved changes, if you close, these changes will be lost. Do you want to apply the unsaved changes?\n\n Click 'Yes' to confirm or click 'No' if you do not wish to apply it.",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then(a=>{a.isConfirmed?$(".global_applyButton").trigger("click"):a.isDenied&&(t.each(function(){let t=$(this).attr("id"),a=$(this).prop("nodeName"),e=globalConfigJsonData[t];"INPUT"===a?"checkbox"===$(this).attr("type")?$(this).prop("checked",e):"color"===$(this).attr("type")?$(this).val(e).trigger("change"):$(this).val(e):"SELECT"===a&&$(this).val(e).trigger("change.select2")}),"background_image"==$(".global_bg_selection ")?($(".global_bg_color").css("display","none"),$(".global_bg_image").css("display","block")):($(".global_bg_color").css("display","block"),$(".global_bg_image").css("display","none"),$(".mainDiv").css("background-image","none")))}),apply_clicked=0)}),$("#select_global_settings").on("hide.bs.modal",function(){close_clicked=1,0==apply_clicked&&1==close_clicked&&1==color_changed&&(Swal.fire({icon:"question",title:"There are some unsaved changes, if you close, these changes will be lost. Do you want to apply the unsaved changes?\n\n Click 'Yes' to confirm or click 'No' if you do not wish to apply it.",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then(a=>{a.isConfirmed?$(".global_applyButton").trigger("click"):a.isDenied&&(t.each(function(){let t=$(this).attr("id"),a=$(this).prop("nodeName"),e=globalConfigJsonData[t];"INPUT"===a?"checkbox"===$(this).attr("type")?$(this).prop("checked",e):"color"===$(this).attr("type")?$(this).val(e).trigger("change"):$(this).val(e):"SELECT"===a&&$(this).val(e).trigger("change.select2")}),"background_image"==$(".global_bg_selection ")?($(".global_bg_color").css("display","none"),$(".global_bg_image").css("display","block")):($(".global_bg_color").css("display","block"),$(".global_bg_image").css("display","none"),$(".mainDiv").css("background-image","none")))}),apply_clicked=0)}),$("#select_global_settings").on("shown.bs.modal",function(){s_id=$("#select_global_settings").find(".themeColor1").attr("id").replace("themeColor1",""),plt_bk_color=$("#themeColor1"+s_id).val(),apply_clicked=0,close_clicked=0,color_changed=0})})}function arrayEquals(t,a){return Array.isArray(t)&&Array.isArray(a)&&t.length===a.length&&t.every((t,e)=>t===a[e])}function ToggleSlicerConfigure(t,a,e,o){const l=t.attr("data-slicerColumn"),d=`\n    <div id="div_id_active" class="custom-control custom-checkbox">\n            <input type="checkbox" name="${l}" data-slicerClass="${o}" data-parentId6="${a}" class="${e}slicerConnectConfig checkboxinput custom-control-input" data-slicerColumn="${l}" id="${e}${l}">\n            <label for="${e}${l}" class="custom-control-label">\n                ${l}\n            </label>\n        </div>\n    `;if($(`#${e}`).append(d),Object.keys(slicerTabConnectDict).includes(a)){const t=slicerTabConnectDict[a];t.includes(l)?($(`.${e}slicerConnectConfig[name="${l}"]`).prop("checked",!1),$(`.${e}slicerConnectConfig[name="${l}"]`).prop("checked",!1)):$(`.${e}slicerConnectConfig[name="${l}"]`).prop("checked",!0)}$(`.${e}slicerConnectConfig[name="${l}"]`).off("change").on("change",function(){const t=$(this).attr("data-parentId6"),a=$(this).prop("checked");if("false"===String(a))0==slicerTabConnectDict[t].includes($(this).attr("name"))&&slicerTabConnectDict[t].push($(this).attr("name"));else if(slicerTabConnectDict[t].includes($(this).attr("name"))){const a=slicerTabConnectDict[t].indexOf($(this).attr("name"));slicerTabConnectDict[t].splice(a,1)}slicerChangeUpdatePlots();const e=$(this).attr("data-slicerClass"),o=$(this).attr("name");$(`.${e}[data-slicerColumn="${o}"]`).val($(`.${e}[data-slicerColumn="${o}"]`).val()).trigger("select2:select")})}function deleteUpdatePlotID5(t,a){for(const[e,o]of Object.entries(crossFilterDict1))if(String(e)===String($("#"+a).parent().attr("id")))for(let a=0;a<o.length;a++){const l=o[a].id+"cancel";if(String(l)===String(t)){plotType=o[a].plot_type,crossFilterDict1[e].splice(a,1);break}}document.getElementById(a).remove()}function deletePlotId6FromSlicerDict(t){for(const a in slicerTabConfigDict)for(const e of slicerTabConfigDict[a])if(String(e)===String(t)){const e=slicerTabConfigDict[a].indexOf(t);slicerTabConfigDict[a].splice(e,1)}}function fieldToVerbose(t,a){let e;if("string"==$.type(t))e="",e=a[t];else if("array"==$.type(t)){e=[];for(let o=0;o<t.length;o++)e[o]=a[t[o]]}return e}function changeChartOperation(t=""){if(""==$(this).val()||null==$(this).val())return;let a=$(this).attr("data-chart-id"),e=$(this).attr("tabSlicerId");$("#"+a).attr(t,$(this).val());const o=$(`#${a}`).attr("data-subtype"),l=$(`#${a}`).attr("data-xaxis"),d=$(`#${a}`).attr("data-yaxis"),i=$(`#${a}`).attr("data-operation"),r=$(`#${a}`).attr("data-operation_line"),n=$(`#${a}`).attr("data-conditional_table");let s=$(`#${a}`).attr("data-filter_input_final");"undefined"===String(s)&&(s=JSON.stringify([]));let c=$(`#${a}`).attr("data-filter_dtrange");const _=$(`#${a}`).attr("data-line_column"),g=$(`#${a}`).attr("data-secondcolumn"),p=$(`#${a}`).attr("data-total_y"),h=$(`#${a}`).attr("data-total_L");let b=$(`#${a}`).attr("data-computed_number");const y=$(`#${a}`).attr("data-is_title"),u=$(`#${a}`).attr("data-title_value");let m=$(`#${a}`).attr("data-operation_n");const f=$(`#${a}`).attr("data-agg_distinct");if("Aggregation"==o){var v=a.split("card")[0]+"optionvaluesoperation_n";if("Top N"==i||"Bottom N"==i){if($("#"+v).css("display","block"),null==m||""==m){let t=$("#"+v+"dropdown").val();$(`#${a}`).attr("data-operation_n",t)}if(null==b||""==b){let t=$("#"+v+"computed_number").val();$(`#${a}`).attr("data-computed_number",t)}}else $("#"+v).css("display","none"),$(`#${a}`).removeAttr("data-operation_n"),$(`#${a}`).removeAttr("data-computed_number")}m=$(`#${a}`).attr("data-operation_n"),b=$(`#${a}`).attr("data-computed_number");const x=a.split("card")[0],w=x+"resetlabels";let k=[],I=[];for(let t=0;t<$(`.${e}`).length;t++)k.push($(`.${e}`).eq(t).val()),I.push($(`.${e}`).eq(t).attr("data-slicerColumn"));const B=$(`#${a}`).attr("data-table_name"),E={operation:"filter",conditional_table:n,filter_input_final:s,tableName:B,graph_subtype:o,chart_id:x,x_axis:l,y_axis:d,second_column:g,line_column:_,total_y:p,total_L:h,operation_n:m,agg_distinct:f,computed_number:b,is_title:y,title_value:u,aggregation:i,operation_line:r,colValue:k,slicerColumn:I,slicerColumnValue:k,id18:w,drange:c,app_code:""};updateChartOperation(E)}function fetchOptionsForOperation(t,a=""){let e=[],o=t.graph_subtype,l=t.x_axis,d=t.y_axis,i=t.second_column,r={};for(const a in t.datatype_list)r[t.datatype_list[a].field_name]=t.datatype_list[a].data_type;if(""==a){if(no_operation_graph=["Vertical_Histogram","Horizontal_Histogram","Cumulative_Histogram","Table","Stacked_Histogram","Image","Scatter","2D_Histogram_Contour","Scatter_with_Straight_Lines_and_Markers","Vertical_Box","Horizontal_Box","Horizontal_Dot_Plot","Vertical_Violin","Horizontal_Violin","Vertical_Grouped_Violin","Vertical_Grouped_Box","Horizontal_Grouped_Violin","Horizontal_Grouped_Box","Bubble_Map","Chloropeth_Map","3D_Scatter","3D_Mesh","Bubble_Chart"],o in no_operation_graph)return e;if("Aggregation"==o){const t=r[l];e="IntegerField"!==String(t)&&"BigIntegerField"!==String(t)&&"FloatField"!==String(t)&&"AutoField"!==String(t)?["Count","Count Distinct"]:["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Top N","Bottom N"]}else if("Vertical_Bar"==o||"Vertical_Waterfall"==o||"Line"==o||"Stepped_Line"==o||"Vertical_Area"==o||"Pie_Chart"==o||"Donut_Chart"==o||"Treemap"==o){const t=r[d];e="IntegerField"!==String(t)&&"BigIntegerField"!==String(t)&&"FloatField"!==String(t)&&"AutoField"!==String(t)?["Count","Count Distinct"]:["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]}else if("Funnel"==o||"Funnel_Area"==o||"Horizontal_Bar"==o||"Horizontal_Area"==o||"Horizontal_Waterfall"==o){const t=r[l];e="IntegerField"!==String(t)&&"BigIntegerField"!==String(t)&&"FloatField"!==String(t)&&"AutoField"!==String(t)?["Count","Count Distinct"]:["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]
}else if("Sunburst"==o||"Angular_Gauge"==o||"Bullet_Gauge"==o){const t=r[i];e="IntegerField"!==String(t)&&"BigIntegerField"!==String(t)&&"FloatField"!==String(t)&&"AutoField"!==String(t)?["Count","Count Distinct"]:["Sum","Count","Count Distinct","First","Last","Percentage of Total"]}else if("Vertical_Line_Stacked"==o||"Vertical_Area_Stacked"==o||"Vertical_Waterfall_Grouped"==o){const t=[d,i],a=[];for(let e=0;e<t.length;e++){const o=r[t[e]];"IntegerField"!==o&&"BigIntegerField"!==o&&"FloatField"!==o&&"AutoField"!==o&&a.push(o)}e=a.length>0?["Count","Count Distinct"]:["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]}else if("Horizontal_Area_Stacked"==o||"Horizontal_Waterfall_Grouped"==o||"Funnel_Stacked"==o){const t=[l,i],a=[];for(let e=0;e<t.length;e++){const o=r[t[e]];"IntegerField"!==o&&"BigIntegerField"!==o&&"FloatField"!==o&&"AutoField"!==o&&a.push(o)}e=a.length>0?["Count","Count Distinct"]:["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]}else if("Horizontal_Bar_Stacked"==o||"Horizontal_Bar_Grouped"==o){const t=[];for(let a=0;a<l.length;a++){const e=r[l[a]];"IntegerField"!==e&&"BigIntegerField"!==e&&"FloatField"!==e&&"AutoField"!==e&&t.push(e)}e=t.length>0?["Count","Count Distinct"]:["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]}else if("Nested_Table"==o){const t=[];let a=[];for(let e=0;e<d.length;e++){const o=r[d[e]];a.push(o),"IntegerField"!==o&&"BigIntegerField"!==o&&"FloatField"!==o&&"AutoField"!==o&&t.push(o)}if(t.length>0){let t=0;for(let e=0;e<a.length;e++)"DateField"!=a[e]&&"DateTimeField"!=a[e]&&(t=1);optionvalues=0==t?["Count","Count Distinct","First","Last","Earliest","Latest"]:["Count","Count Distinct","First","Last"]}else e=["Sum","Count","Count Distinct","Average","Skewness","Kurtosis","Median","Variance","Standard Deviation","Minimum","Maximum","Percentage of Total"]}else if("Vertical_Bar_Stacked"==o||"Vertical_Bar_Grouped"==o||"Multiple_Line_Chart"==o||"Bar_Grouped_and_Line"==o||"Bar_Stacked_and_Line"==o||"Bar_Stacked_and_Multiple_Line"==o){const t=[];for(let a=0;a<d.length;a++){const e=r[d[a]];"IntegerField"!==e&&"BigIntegerField"!==e&&"FloatField"!==e&&"AutoField"!==e&&t.push(e)}e=t.length>0?["Count","Count Distinct"]:["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]}}else if("Bar_Grouped_and_Line"==o||"Bar_Stacked_and_Line"==o){const t=r[a];e="IntegerField"!==String(t)&&"BigIntegerField"!==String(t)&&"FloatField"!==String(t)&&"AutoField"!==String(t)?["Count","Count Distinct"]:["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]}else if("Bar_Stacked_and_Multiple_Line"==o){const t=[];for(let e=0;e<a.length;e++){const a=r[d[e]];"IntegerField"!==a&&"BigIntegerField"!==a&&"FloatField"!==a&&"AutoField"!==a&&t.push(a)}e=t.length>0?["Count","Count Distinct"]:["Sum","Count","Average","Skewness","Kurtosis","Count Distinct","Median","Variance","Standard Deviation","Minimum","Maximum","First","Last","Percentage of Total"]}return e}function updateChartOperation(updateDict,app_code=""){let url_string=windowLocation,f_occ=url_string.indexOf("/",url_string.indexOf("/")+1),s_occ=url_string.indexOf("/",url_string.indexOf("/")+f_occ+1),t_occ=url_string.indexOf("/",url_string.indexOf("/")+s_occ+1),app_code2=url_string.substring(f_occ+1,s_occ),current_dev_mode2=url_string.substring(s_occ+1,t_occ),formatters_config=updateDict.formatters_config;"Build"!=current_dev_mode2&&"Edit"!=current_dev_mode2&&(current_dev_mode2="User"),""==app_code&&(null!=$("body").find("div").eq(0).attr("app_code")?app_code=$("body").find("div").eq(0).attr("app_code"):null!=$("#"+updateDict.chart_id).closest(".chartDivSection").attr("app_code")&&(app_code=$("#"+updateDict.chart_id).closest(".chartDivSection").attr("app_code"))),$.ajax({url:`/users/${urlPath}/filter_plot/`,data:{operation:"filter",conditional_table:updateDict.conditional_table,filter_input_final:updateDict.filter_input_final,tableName:updateDict.tableName,graph_subtype:updateDict.graph_subtype,chart_id:updateDict.chart_id,x_axis:updateDict.x_axis,y_axis:updateDict.y_axis,second_column:updateDict.second_column,line_column:updateDict.line_column,total_y:updateDict.total_y,total_L:updateDict.total_L,operation_n:updateDict.operation_n,agg_distinct:updateDict.agg_distinct,computed_number:updateDict.computed_number,is_title:updateDict.is_title,title_value:updateDict.title_value,aggregation:updateDict.aggregation,operation_line:updateDict.operation_line,colValue:updateDict.colValue,slicerColumn:JSON.stringify(updateDict.slicerColumn),slicerColumnValue:JSON.stringify(updateDict.slicerColumnValue),drange:updateDict.drange,app_code:app_code},type:"POST",dataType:"json",success:function(data){let tester=document.getElementById(data.chart_id_for_slicer);const id1=data.chart_id_for_slicer+"color",id24=data.chart_id_for_slicer+"gradient_color",id6=data.chart_id_for_slicer+"card",id_table=data.chart_id_for_slicer+"table",idOrderModal=data.chart_id_for_slicer+"orderModal",id18=updateDict.id18;let colorvalue=$(`#${id1}`).val(),filtergradientcolor="",update="",update1="",update2="",colordata=[],xaxisdata="",yaxisdata="",xaxisdata2="",y_axisdata2="",colorlength="",tabledata=[],tableheaders=[],measure="",colordatasecond="";filtergradientcolor="true"===String($(`#${id24}`).prop("checked"))?"yes":"no";let sorted_array=[],new_sorted_array=[];if($(`#${idOrderModal}Button`).length&&($(`#${idOrderModal}`).attr("data-x_axis",data.x_axisdata),$(`#${idOrderModal}`).attr("data-y_axis",data.y_axisdata),sorted_array=$(`#${idOrderModal}Button`).attr("data-sorted-values").trim().split(","),new_sorted_array=JSON.parse(JSON.stringify(sorted_array)),sorted_array.sort()),"3D_Mesh"===String(data.graph_subtype)||"3D_Scatter"===String(data.graph_subtype)){colordata=[],colorlength=data.x_axisdata.length;for(let t=0;t<colorlength;t++)colordata.push(colorvalue);var marker1=JSON.parse($(`#${id6}`).attr("data-data"))[0].marker;update={x:[data.x_axisdata],y:[data.y_axisdata],z:[data.second_columndata],marker:marker1},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata)}else if("Vertical_Waterfall"===String(data.graph_subtype)){const t=data.x_axisdata.length;tester=document.getElementById(data.chart_id_for_slicer),xaxisdata=data.x_axisdata,yaxisdata=data.y_axisdata,xaxisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),xaxisdata2.push("Total"),xaxisdata.push("Total"),"undefined"!==String(yaxisdata)&&(Number.isInteger(yaxisdata.reduce((t,a)=>t+a,0))?yaxisdata.push(yaxisdata.reduce((t,a)=>t+a,0)):yaxisdata.push(yaxisdata.reduce((t,a)=>t+a,0).toFixed(2)));const a=[];for(let e=0;e<t;e++)a.push("relative");a.push("total"),update={x:[xaxisdata],y:[yaxisdata],measure:[a],text:[yaxisdata]},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Vertical_Waterfall_Grouped"===String(data.graph_subtype)){colorlength=data.x_axisdata.length,colordata=[],tester=document.getElementById(data.chart_id_for_slicer),myPlot=document.getElementById(data.chart_id_for_slicer),colordatasecond=[],measure=[],xaxisdata=data.x_axisdata,yaxisdata=data.y_axisdata,yaxisdata2=data.second_columndata,xaxisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),xaxisdata2.push("Total"),xaxisdata.push("Total"),"undefined"!==String(yaxisdata)&&(Number.isInteger(yaxisdata.reduce((t,a)=>t+a,0))?yaxisdata.push(yaxisdata.reduce((t,a)=>t+a,0)):yaxisdata.push(yaxisdata.reduce((t,a)=>t+a,0).toFixed(2))),"undefined"!==String(y_axisdata2)&&(Number.isInteger(y_axisdata2.reduce((t,a)=>t+a,0))?y_axisdata2.push(y_axisdata2.reduce((t,a)=>t+a,0)):y_axisdata2.push(y_axisdata2.reduce((t,a)=>t+a,0).toFixed(2)));for(let t=0;t<colorlength;t++)measure.push("relative");measure.push("total"),update={x:[xaxisdata],y:[yaxisdata],measure:[measure],text:[yaxisdata]},Plotly.restyle(tester,update,[0]),update1={x:[xaxisdata],y:[y_axisdata2],measure:[measure],text:[y_axisdata2]},Plotly.restyle(tester,update1,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata)}else if("Horizontal_Waterfall"===String(data.graph_subtype)){colorlength=data.y_axisdata.length,colordata=[],measure=[],xaxisdata=data.x_axisdata,yaxisdata=data.y_axisdata,yaxisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),yaxisdata2.push("Total"),tester=document.getElementById(data.chart_id_for_slicer),yaxisdata.push("Total"),"undefined"!==String(xaxisdata)&&(Number.isInteger(xaxisdata.reduce((t,a)=>t+a,0))?xaxisdata.push(xaxisdata.reduce((t,a)=>t+a,0)):xaxisdata.push(xaxisdata.reduce((t,a)=>t+a,0).toFixed(2)));for(let t=0;t<colorlength;t++)measure.push("relative");measure.push("total"),update={x:[xaxisdata],y:[yaxisdata],measure:[measure],text:[xaxisdata]},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Horizontal_Waterfall_Grouped"===String(data.graph_subtype)){colorlength=data.x_axisdata.length,colordata=[],colordatasecond=[],tester=document.getElementById(data.chart_id_for_slicer),myPlot=document.getElementById(data.chart_id_for_slicer),measure=[],xaxisdata=data.x_axisdata,yaxisdata=data.y_axisdata,xaxisdata2=data.second_columndata,yaxisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),yaxisdata2.push("Total"),yaxisdata.push("Total"),"undefined"!==String(xaxisdata)&&(Number.isInteger(xaxisdata.reduce((t,a)=>t+a,0))?xaxisdata.push(xaxisdata.reduce((t,a)=>t+a,0)):xaxisdata.push(xaxisdata.reduce((t,a)=>t+a,0).toFixed(2))),"undefined"!==String(xaxisdata2)&&(Number.isInteger(xaxisdata2.reduce((t,a)=>t+a,0))?xaxisdata2.push(xaxisdata2.reduce((t,a)=>t+a,0)):xaxisdata2.push(xaxisdata2.reduce((t,a)=>t+a,0).toFixed(2)));for(let t=0;t<colorlength;t++)colordata.push("#b8860b");for(let t=0;t<colorlength;t++)colordatasecond.push("goldenrod");for(let t=0;t<colorlength;t++)measure.push("relative");measure.push("total"),update={x:[xaxisdata],y:[yaxisdata],measure:[measure],text:[xaxisdata]},Plotly.restyle(tester,update,[0]),update1={x:[xaxisdata2],y:[yaxisdata],measure:[measure],text:[xaxisdata2]},Plotly.restyle(tester,update1,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.second_columndata),tabledata.push(data.y_axisdata)}else if("Bubble_Chart"===String(data.graph_subtype)){colorlength=data.x_axisdata.length,colordata=[];for(let t=0;t<colorlength;t++)colordata.push(colorvalue);update={x:[data.x_axisdata],y:[data.y_axisdata],z:[data.second_columndata]},Plotly.restyle(tester,update);var marker1=JSON.parse($(`#${id6}`).attr("data-data"))[0].marker.color;const t={marker:{color:marker1,size:data.second_columndata}};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata)}else if("Bar_Grouped_and_Line"===String(data.graph_subtype)||"Bar_Stacked_and_Line"===String(data.graph_subtype)){var x_array=JSON.parse(JSON.stringify(data.x_axisdata));x_array.sort(),arrayEquals(x_array,sorted_array)||(new_sorted_array=x_array),colorlength=data.x_axisdata.length;for(var backRGB=colorvalue,color_update=[],i=0;i<data.y_axisdata.length;i++){color_update=[];for(let t=0;t<colorlength;t++)color_update.push(colorvalue);update={x:[data.x_axisdata],y:[data.y_axisdata[i]],text:[data.y_axisdata[i]],marker:{color:color_update}};var colorList1=[];colorList1.push(colorvalue);var backRGB=colorvalue;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);colorvalue=newcolor,Plotly.restyle(tester,update,[i])}update={x:[data.x_axisdata],y:[data.line_columndata],name:[fieldToVerbose(data.line_column,data.mappingDict)],text:[data.line_columndata]},Plotly.restyle(tester,update,[data.y_axisdata.length]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`];for(var new_y_axis=eval(data.new_y_axis),i=0;i<new_y_axis.length;i++)tableheaders.push(`<b>${fieldToVerbose(data.new_y_axis[i],data.mappingDict)}</b>`);tableheaders.push(`<b>${fieldToVerbose(data.line_column,data.mappingDict)}</b>`),tabledata.push(data.x_axisdata);for(var i=0;i<data.y_axisdata.length;i++)tabledata.push(data.y_axisdata[i]);tabledata.push(data.line_columndata)}else if("Bar_Stacked_and_Multiple_Line"===String(data.graph_subtype)){var x_array=JSON.parse(JSON.stringify(data.x_axisdata));x_array.sort(),arrayEquals(x_array,sorted_array)||(new_sorted_array=x_array),colorlength=data.x_axisdata.length;var backRGB=colorvalue,color_update=[],i=0;for(i=0;i<data.y_axisdata.length;i++){color_update=[];for(let t=0;t<colorlength;t++)color_update.push(colorvalue);update={x:[data.x_axisdata],y:[data.y_axisdata[i]],text:[data.y_axisdata[i]],marker:{color:color_update}};var colorList1=[];colorList1.push(colorvalue);var backRGB=colorvalue;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);colorvalue=newcolor,Plotly.restyle(tester,update,[i])}backRGB=colorvalue;const hexToRgb=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.9*hexToRgb(backRGB)[0],g=.9*hexToRgb(backRGB)[1],b=.9*hexToRgb(backRGB)[2],newcolor=rgb2hex(r,g,b);backRGB=newcolor;for(var j=0;j<data.line_columndata.length;j++){const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);colorvalue=newcolor,update={x:[data.x_axisdata],y:[data.line_columndata[j]],text:[data.line_columndata[j]],marker:{color:colorvalue}},colorList1.push(colorvalue),backRGB=colorvalue,Plotly.restyle(tester,update,[i+j])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`];for(var new_y_axis=eval(data.new_y_axis),i=0;i<new_y_axis.length;i++)tableheaders.push(`<b>${fieldToVerbose(data.new_y_axis[i],data.mappingDict)}</b>`);for(let t=0;t<data.line_column.length;t++)tableheaders.push(`<b>${fieldToVerbose(data.line_column[t],data.mappingDict)}</b>`);tabledata.push(data.x_axisdata);for(var i=0;i<data.y_axisdata.length;i++)tabledata.push(data.y_axisdata[i]);for(let t=0;t<data.line_columndata.length;t++)tabledata.push(data.line_columndata[t])}else if("Vertical_Histogram"===String(data.graph_subtype)||"Cumulative_Histogram"==data.graph_subtye)colorlength=data.x_axisdata.length,colordata="yes"===String(filtergradientcolor)?gradient_filter(colorvalue,colorlength):colorvalue,update={x:[data.x_axisdata],marker:{color:colordata}},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata);else if("Aggregation"===String(data.graph_subtype)){const t=$(`#${id6}`).attr("data-config_data_value");let a=data.value,e=data.title;$.isNumeric(data.value)&&("Units"===String(t)&&(a=data.value/1),"Hundreds"===String(t)&&(a=(data.value/100).toFixed(2)+"H"),"Thousands"===String(t)&&(a=(data.value/1e3).toFixed(2)+"K"),"Millions"===String(t)&&(a=(data.value/1e6).toFixed(2)+"M"),"Billions"===String(t)&&(a=(data.value/1e9).toFixed(2)+"B")),$(`#${id6}`).children().find("h5")[1].innerText=a,$(`#${id6}`).find("p").eq(0).html(`<span class="contentEditable">${e}</span>`),$(`#${id6}`).find("p").eq(0).on("click",function(){$(`#${id6}`).find("p").eq(0).find(".contentEditable").eq(0).attr("contenteditable","true"),$(`#${id6}`).find("p").eq(0).find(".contentEditable").eq(0).focus()}),$(`#${id6}`).find("p").eq(0).find(".contentEditable").eq(0).focusout(function(){$(`#${id6}`).find("p").eq(0).find(".contentEditable").eq(0).removeAttr("contenteditable")}),$(`#${id18}`).attr("datavalue",data.value),$(`#${id6}`).attr("data-layout",data.title)}else if("Funnel"===String(data.graph_subtype)){if(colorlength=data.x_axisdata.length,colordata=[],yaxisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),"yes"===String(filtergradientcolor))colordata=gradient_filter(colorvalue,colorlength);else for(let t=0;t<colorlength;t++)colordata.push(colorvalue);var marker1=JSON.parse($(`#${id6}`).attr("data-data"))[0].marker;update={x:[data.x_axisdata],y:[data.y_axisdata],marker:marker1},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Funnel_Area"===String(data.graph_subtype)){yaxisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),color=colorvalue,colordata=[],colorlength=data.x_axisdata.length,backRGB=color,colordata.push(backRGB);for(let t=0;t<colorlength-1;t++){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colordata[colordata.length-1]),a=.8*parseInt(t[1],16),e=.8*parseInt(t[2],16),o=.8*parseInt(t[3],16),l="#"+componentToHex(Math.round(a))+componentToHex(Math.round(e))+componentToHex(Math.round(o));colordata.push(l)}var marker1=JSON.parse($(`#${id6}`).attr("data-data"))[0].marker;update={text:[data.x_axisdata],values:[data.y_axisdata],marker:marker1},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}else if("Bubble_Map"===String(data.graph_subtype))update={labels:[data.x_axisdata],values:[data.y_axisdata]},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));else if("Pie_Chart"===String(data.graph_subtype)||"Donut_Chart"===String(data.graph_subtype)){colorlength=data.x_axisdata.length;let t=[],a=colorvalue;t.push(a);for(let a=0;a<colorlength-1;a++){let a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t[t.length-1]),e=.8*parseInt(a[1],16),o=.8*parseInt(a[2],16),l=.8*parseInt(a[3],16),d="#"+componentToHex(Math.round(e))+componentToHex(Math.round(o))+componentToHex(Math.round(l));t.push(d)}var marker1=JSON.parse($(`#${id6}`).attr("data-data"))[0].marker;update={values:[data.y_axisdata],labels:[data.x_axisdata],marker:marker1},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-config_element_color",JSON.stringify(tester.data[0].marker.colors)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Nested_Table"===String(data.graph_subtype)){const t=[];for(let a=0;a<data.final_cols.length;a++)t.push({title:data.final_cols[a],field:data.final_cols[a]});const a=data.conditional_table;let e=!1;data.conditional_table.length>0&&null!=data.conditional_table[0].column_name&&(e=!0);var mappingDict=data.mappingDict;let o=new Tabulator(`#${data.chart_id_for_slicer}`,{data:data.table_data,layout:"fitDataFill",height:400,columnMinWidth:130,dataTree:!0,dataTreeStartExpanded:e,dataTreeCollapseElement:"<i class='fas fa-minus' style='font-size:0.8rem;color:darkgoldenrod'></i>&nbsp;&nbsp;",dataTreeExpandElement:"<i class='fas fa-plus' style='font-size:0.8rem;color:darkgoldenrod'></i>&nbsp;&nbsp;",movableColumns:!0,resizableRows:!0,rowFormatter:function(t){const e=t.getData();let o="";for(let l=0;l<a.length;l++){if("Greater than"===String(a[l].column_condition)){let o=fieldToVerbose(a[l].column_name,mappingDict);if("DateField"===String(a[l].column_datatype)){if("Category"===String(a[l].nested_type)){if(new Date(e.Category)>new Date(a[l].condition_value))for(let d=0;d<t.getCells().length;d++)"Category"===String(t.getCells()[d]._cell.column.field)&&e.tabulator_table_column_name==o&&(t.getCells()[d]._cell.element.style.backgroundColor=a[l].condition_color)}else if(o in e&&e[o]>parseInt(a[l].condition_value))for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===o&&String(t.getCells()[e]._cell.column.field)===o&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}else if("DateTimeField"===String(a[l].column_datatype)){if("Category"===String(a[l].nested_type)){if(new Date(e.Category)>new Date(a[l].condition_value))for(let d=0;d<t.getCells().length;d++)"Category"===String(t.getCells()[d]._cell.column.field)&&e.tabulator_table_column_name==o&&(t.getCells()[d]._cell.element.style.backgroundColor=a[l].condition_color)}else if(o in e&&e[o]>parseInt(a[l].condition_value))for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===o&&String(t.getCells()[e]._cell.column.field)===o&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}else if("FloatField"===String(a[l].column_datatype)){if("Category"===String(a[l].column_condition)){if(e.Category>parseFloat(a[l].condition_value))for(let d=0;d<t.getCells().length;d++)"Category"===String(t.getCells()[d]._cell.column.field)&&e.tabulator_table_column_name==o&&(t.getCells()[d]._cell.element.style.backgroundColor=a[l].condition_color)}else if(o in e&&e[o]>parseFloat(a[l].condition_value))for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===o&&String(t.getCells()[e]._cell.column.field)===o&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}else if("Category"===String(a[l].column_condition)){if(e.Category>parseInt(a[l].condition_value))for(let d=0;d<t.getCells().length;d++)"Category"===String(t.getCells()[d]._cell.column.field)&&e.tabulator_table_column_name==o&&(t.getCells()[d]._cell.element.style.backgroundColor=a[l].condition_color)}else if(o in e&&e[o]>parseInt(a[l].condition_value))for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===o&&String(t.getCells()[e]._cell.column.field)===o&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}if("Smaller than"===String(a[l].column_condition)){let o=fieldToVerbose(a[l].column_name,mappingDict);if("DateField"===String(a[l].column_datatype)){if("Category"===String(a[l].nested_type)){if(new Date(e.Category)<new Date(a[l].condition_value))for(let d=0;d<t.getCells().length;d++)"Category"===String(t.getCells()[d]._cell.column.field)&&e.tabulator_table_column_name==o&&(t.getCells()[d]._cell.element.style.backgroundColor=a[l].condition_color)}else if(o in e&&e[o]<parseInt(a[l].condition_value))for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===o&&String(t.getCells()[e]._cell.column.field)===o&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}else if("DateTimeField"===String(a[l].column_datatype)){if("Category"===String(a[l].nested_type)){if(new Date(e.Category)<new Date(a[l].condition_value))for(let d=0;d<t.getCells().length;d++)"Category"===String(t.getCells()[d]._cell.column.field)&&e.tabulator_table_column_name==o&&(t.getCells()[d]._cell.element.style.backgroundColor=a[l].condition_color)}else if(o in e&&e[o]<parseInt(a[l].condition_value))for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===o&&String(t.getCells()[e]._cell.column.field)===o&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}else if("FloatField"===String(a[l].column_datatype)){if("Category"===String(a[l].column_condition)){if(e.Category<parseFloat(a[l].condition_value))for(let d=0;d<t.getCells().length;d++)"Category"===String(t.getCells()[d]._cell.column.field)&&e.tabulator_table_column_name==o&&(t.getCells()[d]._cell.element.style.backgroundColor=a[l].condition_color)}else if(o in e&&e[o]>parseFloat(a[l].condition_value))for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===o&&String(t.getCells()[e]._cell.column.field)===o&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}else if("Category"===String(a[l].column_condition)){if(e.Category>parseInt(a[l].condition_value))for(let d=0;d<t.getCells().length;d++)"Category"===String(t.getCells()[d]._cell.column.field)&&e.tabulator_table_column_name==o&&(t.getCells()[d]._cell.element.style.backgroundColor=a[l].condition_color)}else if(o in e&&e[o]>parseInt(a[l].condition_value))for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===o&&String(t.getCells()[e]._cell.column.field)===o&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}if("Equal to"===String(a[l].column_condition)){o="Category"===String(a[l].nested_type)?"DateField"===String(a[l].column_datatype)?a[l].condition_value:"DateTimeField"===String(a[l].column_datatype)?a[l].condition_value.replace("T"," "):a[l].condition_value.toString():a[l].condition_value.toString();let d=fieldToVerbose(a[l].column_name,mappingDict);if("Category"===String(a[l].nested_type)){if(e.Category.toString()==o)for(let o=0;o<t.getCells().length;o++)"Category"===String(t.getCells()[o]._cell.column.field)&&e.tabulator_table_column_name==d&&(t.getCells()[o]._cell.element.style.backgroundColor=a[l].condition_color)}else if(d in e&&e[d]==o)for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===d&&String(t.getCells()[e]._cell.column.field)===d&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}if("Not equal to"===String(a[l].column_condition)){o="Category"===String(a[l].nested_type)?"DateField"===String(a[l].column_datatype)?a[l].condition_value:"DateTimeField"===String(a[l].column_datatype)?a[l].condition_value.replace("T"," "):a[l].condition_value.toString():a[l].condition_value.toString();let d=fieldToVerbose(a[l].column_name,mappingDict);if("Category"===String(a[l].nested_type)){if(e.Category.toString()!=o)for(let o=0;o<t.getCells().length;o++)"Category"===String(t.getCells()[o]._cell.column.field)&&e.tabulator_table_column_name==d&&(t.getCells()[o]._cell.element.style.backgroundColor=a[l].condition_color)}else if(d in e&&e[d]!=o)for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===d&&String(t.getCells()[e]._cell.column.field)===d&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}if("In"===String(a[l].column_condition)){let o=fieldToVerbose(a[l].column_name,mappingDict);if("Value"===String(a[l].nested_type)){if(o in e&&a[l].condition_value.includes(e[o].toString()))for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===o&&String(t.getCells()[e]._cell.column.field)===o&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}else if(a[l].condition_value.includes(e.Category.toString()))for(let d=0;d<t.getCells().length;d++)"Category"===String(t.getCells()[d]._cell.column.field)&&e.tabulator_table_column_name==o&&(t.getCells()[d]._cell.element.style.backgroundColor=a[l].condition_color)}if("Starts with"===String(a[l].column_condition)){let o=fieldToVerbose(a[l].column_name,mappingDict);if("Category"===String(a[l].nested_type)){if(e.Category.toString().startsWith(a[l].condition_value))for(let d=0;d<t.getCells().length;d++)"Category"===String(t.getCells()[d]._cell.column.field)&&e.tabulator_table_column_name==o&&(t.getCells()[d]._cell.element.style.backgroundColor=a[l].condition_color)}else if(o in e&&e[o].toString().startsWith(a[l].condition_value))for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===o&&String(t.getCells()[e]._cell.column.field)===o&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}if("Ends with"===String(a[l].column_condition)){let o=fieldToVerbose(a[l].column_name,mappingDict);if("Category"===String(a[l].nested_type)){if(e.Category.toString().endsWith(a[l].condition_value))for(let d=0;d<t.getCells().length;d++)"Category"===String(t.getCells()[d]._cell.column.field)&&e.tabulator_table_column_name==o&&(t.getCells()[d]._cell.element.style.backgroundColor=a[l].condition_color)}else if(o in e&&e[o].toString().endsWith(a[l].condition_value))for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===o&&String(t.getCells()[e]._cell.column.field)===o&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}if("Contains"===String(a[l].column_condition)){let o=fieldToVerbose(a[l].column_name,mappingDict);if("Category"===String(a[l].nested_type)){if(e.Category.toString().includes(a[l].condition_value))for(let d=0;d<t.getCells().length;d++)"Category"===String(t.getCells()[d]._cell.column.field)&&e.tabulator_table_column_name==o&&(t.getCells()[d]._cell.element.style.backgroundColor=a[l].condition_color)}else if(o in e&&e[o].toString().includes(a[l].condition_value))for(let e=0;e<t.getCells().length;e++)String(t.getCells()[e]._cell.column.field)===o&&String(t.getCells()[e]._cell.column.field)===o&&(t.getCells()[e]._cell.element.style.backgroundColor=a[l].condition_color)}}"undefined"!==String(e._children)&&e._children.length>0&&(t.getElement().style.fontWeight="bold",t.getElement().getElementsByClassName("fas fa-plus").length>0&&t.getElement().getElementsByClassName("fas fa-plus")[0].insertAdjacentHTML("afterend","    "),t.getElement().getElementsByClassName("fas fa-minus").length>0&&t.getElement().getElementsByClassName("fas fa-minus")[0].insertAdjacentHTML("afterend","    "));t.getElementsByClassName},columns:t}),l=document.getElementById(id_table);$(`#${id_table}`).empty(),$(`#${id_table}`).append(`\n      <table id="${id_table}-table" class="display compact" style="width:100%;border: 1.5px solid black;">\n          <thead>\n              <tr>\n              </tr>\n          </thead>\n          <tbody>\n          </tbody>\n      </table>\n      `);for(var i=0;i<data.table_view.length;i++){string='<tr style="1px solid black;">';for(let[t,a]of Object.entries(data.table_view[i]))string+=`<td>${a}</td>`;string+="</tr>",$(`#${id_table}-table`).find("tbody").append(string)}var tableheaders2=[]
;for(let[t,a]of Object.entries(data.table_view[0]))tableheaders2.push(t),$(`#${id_table}-table`).find("thead tr").eq(0).append(`<th style="background-color: darkgoldenrod; color:white;">${t}</th>`);$(`#${id_table}-table`).DataTable();var table_data=data.table_view;let d=[],r=[];for(let t=0;t<table_data2.length;t++){let a=[];for(let e=0;e<tableheaders2.length;e++)a.push(table_data2[t][tableheaders2[e]]);r.push(a)}}else if("Table"===String(data.graph_subtype)){$(`#table_example${data.chart_id_for_slicer}`).DataTable().clear().destroy();const t=[];for(let a=0;a<data.x_axis.length;a++)t.push({data:fieldToVerbose(data.x_axis[a],data.mappingDict)});var mappingDict=data.mappingDict;for(let a=0;a<data.conditional_table;a++)for(const[e,o]of Object.entries(t))o.data==fieldToVerbose(data.conditional_table[a].column_name,mappingDict)&&(data.conditional_table[a].td_val=parseInt(e));const a=data.conditional_table;let e=data.content,o="";"undefined"===String(e)&&(e={}),xaxisdata=data.x_axis;let l=$(`#table_example${data.chart_id_for_slicer}`).DataTable({data:e,columns:t,autoWidth:!1,scrollY:"50vh",scrollCollapse:!0,scrollX:"110%",orderCellsTop:!0,responsive:!0,stateSave:!0,deferRender:!0,paging:!0,lengthMenu:[[1,5,50,-1],[1,5,50,"All"]],pageLength:10,dom:"lfBrtip",sScrollX:"100%",scrollX:!0,buttons:[{extend:"collection",text:"Export",buttons:[{extend:"copy",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"excel",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"csv",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"pdf",title:"",exportOptions:{columns:":visible:not(.noVis)"}}]}],columnDefs:[{targets:"_all",className:"dt-center allColumnClass all buttons_export_class"}],rowCallback:function(t,e,l){for(let e=0;e<a.length;e++)"null"!==String(a[e].column_name)&&xaxisdata.includes(a[e].column_name)&&("Equal to"===String(a[e].column_condition)?(o="DateField"===String(a[e].column_datatype)?a[e].condition_value:(String(a[e].column_datatype),a[e].condition_value),$(t).find("td").eq(a[e].td_val)[0].innerHTML==o&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color)):"Not equal to"===String(a[e].column_condition)?(o="DateField"===String(a[e].column_datatype)?a[e].condition_value:(String(a[e].column_datatype),a[e].condition_value),$(t).find("td").eq(a[e].td_val)[0].innerHTML!=o&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color)):"Greater than"===String(a[e].column_condition)?"DateField"===String(a[e].column_datatype)?new Date($(t).find("td").eq(a[e].td_val)[0].innerHTML)>new Date(a[e].condition_value)&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color):"DateTimeField"===String(a[e].column_datatype)?new Date($(t).find("td").eq(a[e].td_val)[0].innerHTML)>new Date(a[e].condition_value)&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color):"FloatField"===String(a[e].column_datatype)?parseFloat($(t).find("td").eq(a[e].td_val)[0].innerHTML)>parseFloat(a[e].condition_value)&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color):parseInt($(t).find("td").eq(a[e].td_val)[0].innerHTML)>parseInt(a[e].condition_value)&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color):"Smaller than"===String(a[e].column_condition)?"DateField"===String(a[e].column_datatype)?new Date($(t).find("td").eq(a[e].td_val)[0].innerHTML)<new Date(a[e].condition_value)&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color):"DateTimeField"===String(a[e].column_datatype)?new Date($(t).find("td").eq(a[e].td_val)[0].innerHTML)<new Date(a[e].condition_value)&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color):"FloatField"===String(a[e].column_datatype)?parseFloat($(t).find("td").eq(a[e].td_val)[0].innerHTML)<parseFloat(a[e].condition_value)&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color):parseInt($(t).find("td").eq(a[e].td_val)[0].innerHTML)<parseInt(a[e].condition_value)&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color):"In"===String(a[e].column_condition)?a[e].condition_value.includes($(t).find("td").eq(a[e].td_val)[0].innerHTML)&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color):"Starts with"===String(a[e].column_condition)?$(t).find("td").eq(a[e].td_val)[0].innerHTML.startsWith(a[e].condition_value)&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color):"Contains"===String(a[e].column_condition)?$(t).find("td").eq(a[e].td_val)[0].innerHTML.includes(a[e].condition_value)&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color):"Ends with"===String(a[e].column_condition)?$(t).find("td").eq(a[e].td_val)[0].innerHTML.endsWith(a[e].condition_value)&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color):$(t).find("td").eq(a[e].td_val)[0].innerHTML==a[e].condition_value&&$(t).find("td").eq(a[e].td_val).css("background-color",a[e].condition_color))},initComplete:function(){try{$(`#table_example${data.chart_id_for_slicer}`).off("click").on("click","td",function(){const t=$(this).closest("table").attr("id"),a=$(`#${t}`).DataTable(),e=a.settings().init().columns;cellcollen2=e.length,cellindex3=a.cell(this).index().column+1,$(this).toggleClass("cell_highlighted"),$(this).toggleClass("cell_selected")})}catch(t){}}}).columns.adjust();if(data.chart_id_for_slicer in finalfdict2){const t=$(`#table_example${data.chart_id_for_slicer}`).DataTable();new $.fn.dataTable.FixedColumns(t,finalfdict2[`${data.chart_id_for_slicer}`]),setTimeout(()=>{$.fn.DataTable.isDataTable(`#table_example${data.chart_id_for_slicer}`)&&$(`#table_example${data.chart_id_for_slicer}`).DataTable().draw()},200)}if(formatters_config){let t="table_example"+data.chart_id_for_slicer,a=JSON.parse(formatters_config);function applyColumnFormatters(t,a){function e(){$.fn.DataTable.isDataTable("#"+a)&&i.destroy();var t=i.settings().init().columns;t.forEach(function(t,a){t.render=null})}function o(t,a){var e=new Date(t);if(isNaN(e.getTime()))return t;var o=e.getDate(),l=e.getMonth()+1,d=e.getFullYear(),i=a.replace(/%d/g,("0"+o).slice(-2)).replace(/%m/g,("0"+l).slice(-2)).replace(/%Y/g,d).replace(/%y/g,d.toString().slice(-2)).replace(/%B/g,new Intl.DateTimeFormat("en-US",{month:"long"}).format(e));return i}var l="",d="",i=$("#"+a).DataTable();e();var r=$("#"+a+" thead tr"),n=[];r.find("th").each(function(){n.push($(this).text())});var s=n.map(function(a){var e=t.find(function(t){return t.column===a});if(e){var i;switch(e.formatter){case"number":i=function(t,a,e){return"display"===a?parseFloat(t.replace(/[^0-9.-]/g,"")).toLocaleString():t};break;case"currency":i=function(t,a,o){if("display"===a){var i=e.operation,r=l.indexOf(i),n=d[r];return n+" "+t.replace(/[^0-9.-]/g,"").toLocaleString()}return t};break;case"date":i=function(t,a,l){if("display"===a||"filter"===a){var d=e.operation,i=o(t,d);return i}return t};break;default:i=null}return{data:a,render:i}}return{data:a}});$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{operation:"get_currency_list"},type:"POST",dataType:"json",success:function(t){l=t.country_list,d=t.curr_list,$.fn.DataTable.isDataTable("#"+a)&&$("#"+a).DataTable().destroy(),i=$("#"+a).DataTable({columns:s,language:{decimal:".",thousands:","},fixedColumns:!0}),i.draw()},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}applyColumnFormatters(a,t)}$(`#${id6}`).find(".dt-buttons").css("padding-left","1em"),$(`#table_example${data.chart_id_for_slicer}_info`).css("padding-left","1em"),$(`#table_example${data.chart_id_for_slicer}_paginate`).css("padding-right","1em"),$(`#${id6}`).find(".dt-buttons").css("padding-top","1em"),$(`#table_example${data.chart_id_for_slicer}_length`).css("float","none"),$(`#table_example${data.chart_id_for_slicer}_length`).css("padding-right","1em"),$(`#table_example${data.chart_id_for_slicer}_length`).css("padding-top","1em"),$(`#table_example${data.chart_id_for_slicer}_length`).css("padding-top","1em"),$(`#table_example${data.chart_id_for_slicer}_length`).css("display","inline-block"),$(`#table_example${data.chart_id_for_slicer}_filter`).css("padding-top","1em")}else if("Sunburst"===String(data.graph_subtype)){let t=[],a=data.x_axisdata.length,e=colorvalue;t=[],t.push(e);for(let e=0;e<a-1;e++){let a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t[t.length-1]),e=.8*parseInt(a[1],16),o=.8*parseInt(a[2],16),l=.8*parseInt(a[3],16),d="#"+componentToHex(Math.round(e))+componentToHex(Math.round(o))+componentToHex(Math.round(l));t.push(d)}var marker1=JSON.parse($(`#${id6}`).attr("data-data"))[0].marker;update={values:[data.second_columndata],labels:[data.y_axisdata],parents:[data.x_axisdata],ids:[data.sunburst_id],branchvalues:"total",marker:marker1},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`],tabledata.push(data.y_axisdata),tabledata.push(data.x_axisdata),tabledata.push(data.second_columndata)}else if("Angular_Gauge"===String(data.graph_subtype)){let t=id6.replace("card",""),a=JSON.parse($("#"+id6).attr("data-data"));a[0].value=data.value;let e="",o="";$("#"+t+"gaugeModalSaveButton").each(function(){let{dataValue:t,gaugeBarColor:l}=returnGaugeColor($(this),a);e=t,o=l}),color_value=""!=o?o:"darkgoldenrod";let l=[];$("#"+t+"gaugeModalRangeSaveButton").each(function(){let{dataValue:t}=returnGaugeColorRange($(this),a);l=t}),update=NaN!=parseInt($("#"+t+"deltaGauge").val())?{mode:"gauge+number+delta",delta:{reference:parseInt($("#"+t+"deltaGauge").val())},value:[data.value],gauge:{axis:{range:[null,1.1*[data.value]]},bar:{color:color_value},steps:l,threshold:{line:{color:$("#"+t+"thresholdColor").val(),width:4},thickness:.75,value:$("#"+t+"threshold").val()}},x:[data.x_axisdata],y:[data.y_axisdata],second_columndata:[data.second_columndata]}:{value:[data.value],gauge:{axis:{range:[null,1.1*[data.value]]},bar:{color:color_value},steps:l,threshold:{line:{color:$("#"+t+"thresholdColor").val(),width:4},thickness:.75,value:$("#"+t+"threshold").val()}},x:[data.x_axisdata],y:[data.y_axisdata],second_columndata:[data.second_columndata]},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata)}else if("Bullet_Gauge"===String(data.graph_subtype))update={value:[data.value],gauge:{axis:{range:[null,1.1*[data.value]]},bar:{color:colorvalue},shape:"bullet"},x:[data.x_axisdata],y:[data.y_axisdata],second_columndata:[data.second_columndata]},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);else if("Treemap"===String(data.graph_subtype)){colorlength=data.x_axisdata.length,colordata=data.colordata;const t=[];for(let a=0;a<colorlength;a++)t.push("");let a=colorvalue,e=[];e.push(a);for(let t=0;t<colorlength-1;t++){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e[e.length-1]),a=.8*parseInt(t[1],16),o=.8*parseInt(t[2],16),l=.8*parseInt(t[3],16),d="#"+componentToHex(Math.round(a))+componentToHex(Math.round(o))+componentToHex(Math.round(l));e.push(d)}var marker1=JSON.parse($(`#${id6}`).attr("data-data"))[0].marker;update={parents:[t],values:[data.y_axisdata],labels:[data.x_axisdata],marker:marker1},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Vertical_Line_Stacked"===String(data.graph_subtype)){update={x:[data.x_axisdata],y:[data.y_axisdata],text:[data.second_columndata]},update2={x:[data.x_axisdata],y:[data.second_columndata],text:[data.second_columndata]},Plotly.restyle(tester,update,[0]),Plotly.restyle(tester,update2,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);var x_array=JSON.parse(JSON.stringify(data.x_axisdata));x_array.sort(),arrayEquals(x_array,sorted_array)||(new_sorted_array=x_array)}else if("Vertical_Grouped_Box"===String(data.graph_subtype)||"Vertical_Grouped_Violin"===String(data.graph_subtype)||"Vertical_Area_Stacked"===String(data.graph_subtype))update={x:[data.x_axisdata],y:[data.y_axisdata],text:[data.y_axisdata]},update2={x:[data.x_axisdata],y:[data.second_columndata],text:[data.second_columndata]},Plotly.restyle(tester,update,[0]),Plotly.restyle(tester,update2,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);else if("Horizontal_Histogram"===String(data.graph_subtype))colorlength=data.x_axisdata.length,colordata="yes"==filtergradientcolor?gradient_filter(colorvalue,colorlength):colorvalue,update={y:[data.x_axisdata],marker:{color:colordata}},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`],tabledata.push(data.y_axisdata);else if(["Pivot_Table","Table_Barchart","Heatmap","Row_Heatmap","Col_Heatmap","Line_Chart","Bar_Chart","Stacked_Bar_Chart","Area_Chart","Scatter_Chart"].includes(String(data.graph_subtype))){var pivot_config=$(`#${data.chart_id_for_slicer}card`).find(".graphcontainerdiv").data("pivotUIOptions"),pivot_config_copy=JSON.parse(JSON.stringify(pivot_config));Object.keys(pivot_config_copy).includes("aggregators")&&delete pivot_config_copy.aggregators,Object.keys(pivot_config_copy).includes("renderers")&&delete pivot_config_copy.renderers;var latestconfig={};"Pivot_Table"==data.graph_subtype?rendererName="Table":rendererName=data.graph_subtype.split("_").join(" "),google.load("visualization","1",{packages:["corechart"]}),graphHeight=.85*$(`#${id6}`).height(),graphWidth=.825*$(`#${id6}`).width(),$(`#${id6}`).find(".graphcontainerdiv").pivotUI(data.content,{...pivot_config_copy,renderers:$.extend($.pivotUtilities.renderers,$.pivotUtilities.plotly_renderers,$.pivotUtilities.d3_renderers,$.pivotUtilities.c3_renderers,$.pivotUtilities.gchart_renderers,$.pivotUtilities.subtotal_renderers),rendererOptions:{plotly:{width:graphWidth,height:graphHeight},c3:{width:graphWidth,height:graphHeight},d3:{width:graphWidth,height:graphHeight},gchart:{width:graphWidth,height:graphHeight,colors:["var(--primary-color)"]}},onRefresh:function(t){var a=JSON.parse(JSON.stringify(t));Object.keys(a).includes("aggregators")&&delete a.aggregators,Object.keys(a).includes("renderers")&&delete a.renderers,latestconfig=a}}),$(`#${id6} .graphcontainerdiv .pvtAggregator`).css("display","none"),$(`#${id6} .graphcontainerdiv .pvtRenderer`).css("display","none");var pivot_charttype=["Table","Table Barchart","Heatmap","Row Heatmap","Col Heatmap","Line Chart","Bar Chart","Stacked Bar Chart","Area Chart","Scatter Chart"],id=data.chart_id_for_slicer;$(`#${id}_configure_pivot_charttype`).find("option").slice(1).remove();for(const t in pivot_charttype)$(`#${id}_configure_pivot_charttype`).append(new Option(pivot_charttype[t],pivot_charttype[t],!1,!1));$(`#${id}_configure_pivot_charttype`).val(rendererName).trigger("change"),$(`#${id}_configure_pivot_charttype`).on("change",function(){$(`#${id6} .graphcontainerdiv .pvtRenderer`).val(this.value).trigger("change")});var pivot_operations=["Count","Count Unique Values","List Unique Values","Average","Sum","Interger Sum","Median","Sample Variance","Sample Standard Deviation","Minimum","Maximum","First","Last","Sum over Sum","80% Upper Bound","80% Lower Bound","Sum as Fraction of Total","Sum as Fraction of Rows","Sum as Fraction of Columns","Count as Fraction of Total"];$(`#${id}_configure_pivot_operation`).find("option").slice(1).remove();for(let t=0;t<pivot_operations.length;t++)$(`#${id}_configure_pivot_operation`).append('<option value="'+pivot_operations[t]+'">'+pivot_operations[t]+"</option>");$(`#${id}_configure_pivot_operation`).val(data.operation).trigger("change"),$(`#${id}_configure_pivot_operation`).on("change",function(){$(`#${id6} .graphcontainerdiv .pvtAggregator`).val(this.value).trigger("change")}),pivotResize(id6,data.content,pivot_config_copy,id,rendererName,data.operation)}else if("2D_Histogram_Contour"===String(data.graph_subtype))update={x:[data.x_axisdata],y:[data.y_axisdata],colorscale:[data.colordata]},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);else if("Stacked_Histogram"===String(data.graph_subtype))update={x:[data.x_axisdata]},Plotly.restyle(tester,update,[0]),update2={x:[data.y_axisdata]},Plotly.restyle(tester,update2,[1]),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);else if("Cumulative_Histogram"===String(data.graph_subtype)){colorlength=data.x_axisdata.length,colordata="yes"==filtergradientcolor?gradient_filter(colorvalue,colorlength):colorvalue;var marker1=JSON.parse($(`#${id6}`).attr("data-data"))[0].marker;update={x:[data.x_axisdata],marker:marker1},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata)}else if("Horizontal_Bar_Stacked"===String(data.graph_subtype)||"Horizontal_Bar_Grouped"===String(data.graph_subtype)){colorlength=data.y_axisdata.length;for(var color_update=[],i=0;i<data.x_axisdata.length;i++){color_update=[];for(let t=0;t<colorlength;t++)color_update.push(colorvalue);update={x:[data.x_axisdata[i]],y:[data.y_axisdata],text:[data.x_axisdata[i]],marker:{color:color_update}};var colorList1=[];colorList1.push(colorvalue);var backRGB=colorvalue;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);colorvalue=newcolor,Plotly.restyle(tester,update,[i])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tableheaders=[];for(var new_x_axis=eval(data.new_x_axis),i=0;i<new_x_axis.length;i++)tableheaders.push(fieldToVerbose(data.new_x_axis[i],data.mappingDict));tableheaders.push(`${fieldToVerbose(data.y_axis,data.mappingDict)}`),tabledata=[];for(var i=0;i<data.x_axisdata.length;i++)tabledata.push(data.x_axisdata[i]);tabledata.push(data.y_axisdata);var y_array=JSON.parse(JSON.stringify(data.y_axisdata));y_array.sort(),arrayEquals(y_array,sorted_array)||(new_sorted_array=y_array)}else if("Horizontal_Grouped_Box"===String(data.graph_subtype)||"Horizontal_Grouped_Violin"===String(data.graph_subtype)||"Horizontal_Area_Stacked"===String(data.graph_subtype))update={x:[data.x_axisdata],y:[data.y_axisdata],text:[data.x_axisdata]},update2={x:[data.second_columndata],y:[data.y_axisdata],text:[data.second_columndata]},Plotly.restyle(tester,update,[0]),Plotly.restyle(tester,update2,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.second_columndata),tabledata.push(data.y_axisdata);else if("Funnel_Stacked"===String(data.graph_subtype)){colordata=[];let t=[];colorlength=data.x_axisdata.length;let a=colorvalue;const e=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));let o=.9*e(a)[0],l=.9*e(a)[1],d=.9*e(a)[2],i=rgb2hex(o,l,d);for(let t=0;t<colorlength;t++)colordata.push(a);for(let a=0;a<colorlength;a++)t.push(i);update={x:[data.x_axisdata],y:[data.y_axisdata],marker:{color:colordata}},update2={x:[data.second_columndata],y:[data.y_axisdata],marker:{color:t}},Plotly.restyle(tester,update,[0]),Plotly.restyle(tester,update2,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`],tabledata.push(data.x_axisdata),tabledata.push(data.second_columndata),tabledata.push(data.y_axisdata)}else if("Horizontal_Bar"===String(data.graph_subtype)){colorlength=data.x_axisdata.length,colordata="yes"===String(filtergradientcolor)?gradient_filter(colorvalue,colorlength):colorvalue;var marker1=JSON.parse($(`#${id6}`).attr("data-data"))[0].marker;update={x:[data.x_axisdata],y:[data.y_axisdata],marker:marker1,text:[data.x_axisdata]},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata=[],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var y_array=JSON.parse(JSON.stringify(data.y_axisdata));y_array.sort(),arrayEquals(y_array,sorted_array)||(new_sorted_array=y_array)}else if("Horizontal_Area"===String(data.graph_subtype)){var marker1=JSON.parse($(`#${id6}`).attr("data-data"))[0].marker;update={x:[data.x_axisdata],y:[data.y_axisdata],marker:marker1,text:[data.x_axisdata]},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata=[],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var y_array=JSON.parse(JSON.stringify(data.y_axisdata));y_array.sort(),arrayEquals(y_array,sorted_array)||(new_sorted_array=y_array)}else if("Vertical_Bar_Stacked"===String(data.graph_subtype)||"Vertical_Bar_Grouped"===String(data.graph_subtype)||"Multiple_Line_Chart"===String(data.graph_subtype)){colorlength=data.x_axisdata.length,colordata=[];for(let t=0;t<data.y_axisdata.length;t++){colordata=[];for(let t=0;t<colorlength;t++)colordata.push(colorvalue);update={x:[data.x_axisdata],y:[data.y_axisdata[t]],text:[data.y_axisdata[t]],marker:{color:colordata}};const a=[];a.push(colorvalue);let e=colorvalue;const o=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));let l=.6*o(e)[0],d=.6*o(e)[1],i=.6*o(e)[2],r=rgb2hex(l,d,i);colorvalue=r,Plotly.restyle(tester,update,[t])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tableheaders=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`];const new_y_axis=eval(data.new_y_axis);for(let t=0;t<new_y_axis.length;t++)tableheaders.push(fieldToVerbose(data.new_y_axis[t],data.mappingDict));tabledata=[],tabledata.push(data.x_axisdata);for(let t=0;t<data.y_axisdata.length;t++)tabledata.push(data.y_axisdata[t]);var x_array=JSON.parse(JSON.stringify(data.x_axisdata));x_array.sort(),arrayEquals(x_array,sorted_array)||(new_sorted_array=x_array)}else if("Scatter_with_Straight_Lines_and_Markers"===String(data.graph_subtype)){colordata=[];for(let t=0;t<data.x_axisdata.length;t++)colordata.push(colorvalue);update={x:[data.x_axisdata],y:[data.y_axisdata],text:[data.y_axisdata],marker:{color:colordata},line:{color:colorvalue,width:2}},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata=[],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var x_array=JSON.parse(JSON.stringify(data.x_axisdata));x_array.sort(),arrayEquals(x_array,sorted_array)||(new_sorted_array=x_array)}else if("Horizontal_Dot_Plot"===String(data.graph_subtype)||"Scatter"===String(data.graph_subtype)){colordata=[];const t=[],a=[];let e="";if("yes"==filtergradientcolor){for(let t=0;t<data.x_axisdata.length;t++)e=colorvalue,0==a.includes(data.x_axisdata[t])&&a.push(data.x_axisdata[t]);e=colorvalue,t.push(e);for(let e=0;e<a.length-1;e++){let a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t[t.length-1]),e=.8*parseInt(a[1],16),o=.8*parseInt(a[2],16),l=.8*parseInt(a[3],16),d="#"+componentToHex(Math.round(e))+componentToHex(Math.round(o))+componentToHex(Math.round(l));t.push(d)}for(let e=0;e<data.x_axisdata.length;e++)colordata.push(t[a.indexOf(data.x_axisdata[e])])}else for(let t=0;t<data.x_axisdata.length;t++)colordata.push(colorvalue);update={x:[data.x_axisdata],y:[data.y_axisdata],text:[data.y_axisdata],marker:{color:colordata}},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata=[],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var x_array=JSON.parse(JSON.stringify(data.x_axisdata));x_array.sort(),arrayEquals(x_array,sorted_array)||(new_sorted_array=x_array)}else{colorlength=data.x_axisdata.length,colordata="yes"==filtergradientcolor?gradient_filter(colorvalue,colorlength):colorvalue;var marker1=JSON.parse($(`#${id6}`).attr("data-data"))[0].marker;if(update={x:[data.x_axisdata],y:[data.y_axisdata],marker:marker1,text:[data.y_axisdata]},Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata=[],tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),$(`#${idOrderModal}Button`).length){var x_array=JSON.parse(JSON.stringify(data.x_axisdata));x_array.sort(),arrayEquals(x_array,sorted_array)||(new_sorted_array=x_array)}}$(`#${idOrderModal}Button`).length&&updateChart(id6,$(`#${idOrderModal}Button`).attr("data-sorted-values"));const trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"};let layout2={margin:{l:10,r:10,b:10,t:10,pad:1}};const datatable=[trace2],datatablediv=document.getElementById(id_table),config={responsive:!0,displaylogo:!1};datatablediv&&Plotly.newPlot(datatablediv,datatable,layout2,config),$("#"+$("#"+id6).parent().attr("id")).find(".charts").each(function(){"Bubble_Chart"===String($(this).attr("data-subtype"))?$(this).find("path").css("opacity",.7):$(this).find("path").css("opacity",1)});const id_axis_order=data.chart_id_for_slicer+"axis_order";var val=$(`#${id_axis_order}`).val();if(val||""==val){var order_type=$(`#${id_axis_order}`).attr("order_type");let t=JSON.parse($(`#${id_axis_order}`).attr("datatype_dict"));var old_layout=$("#"+id6).attr("data-layout");old_layout=JSON.parse(old_layout);var layout=JSON.parse(JSON.stringify(old_layout));"Vertical"==order_type?"DateField"!=t[data.x_axis]&&"DateTimeField"!=t[data.x_axis]||changeAxisType(val,order_type,tester,old_layout,layout,id6):"Horizontal"==order_type&&("DateField"!=t[data.y_axis]&&"DateTimeField"!=t[data.y_axis]||changeAxisType(val,order_type,tester,old_layout,layout,id6))}},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}function resetCrossFilter(){for(const[t,a]of Object.entries(crossFilterDict1))if(String(t)===String($(this).attr("id")))try{for(let t=0;t<a.length;t++)"Bubble_Chart"===String($("#"+a[t].id+"card").attr("data-subtype"))?$("#"+a[t].id+"card").find("path").each(function(){$(this).css("opacity",.7)}):$("#"+a[t].id+"card").find("path").each(function(){$(this).css("opacity",1)})}finally{console.log()}}function saveChartConfigAnalysis(t,a="analysis"){$(".editTabIcon").css("display","none");const e={},o=[],l=[];e.ElementID=t,null==$("#tableTab"+t).find(".select2").val()&&null==$("#tableTab"+t).find(".select2").val()||(e.dropdown=$("#tableTab"+t).find(".select2").val()),"undefined"!==String($(`#${t+"-tab"}`).children()[0])?e.ParentL3Name=$(`#${t+"-tab"}`).children()[0].innerText:e.ParentL3Name=$(`#${t+"_tab_content"}`).attr("data-header_name"),e.ParentULID="analysisTab"+t,e.ParentTabContainerID="analysisTabContent"+t,$(`#analysisTab${t}`).find(".nav-link").each(function(){const a=$(this).closest(".nav-tabs").attr("id").split("analysisTab")[1],e=$(this).attr("id").replace("analysistab"+a,""),d=$(`#analysisDashboard${t} .tab-content`).attr("config_background-color"),i=$(".themeColor").val(),r=$(".themeColor1").val(),n=$(".indextabBG").val(),s=$(".indextabFC").val(),c=$(".global_header_color").val(),_=$(".global_header_bgcolor").val(),g=$(".global_header_fontsize").val(),p=$(".global_header_color").val(),h=$(".global_header_fontsize").val(),b=$(".global_header_fontweight").val(),y=$(".global_header_fontstyle").val(),u=$(".global_shadow").prop("checked"),m=$(".global_border").prop("checked"),f=$(".global_shadow_color").val(),v=$(".global_shadow_x").val(),x=$(".global_shadow_y").val(),w=$(".global_shadow_blur").val(),k=$(".global_shadow_thickness").val(),I=$(".global_border_color").val(),B=$(".global_border_thickness").val(),E=$(".global_border_style").val(),D=windowLocationAttr.href.split("/"),S=D[D.length-2],C=$(`#bg_image_name${t}`).html(),T=$(".global_header_alignment").val(),N=$(`#global_bg${t}`).val();let O="no";"true"===String($(".global_gradient_color").prop("checked"))&&(O="yes");let P=$(`#analysisrow${t}${e}`).css("background-image");P="none"===String(P)?"no":"yes";let A="Index";null!=$(this).find(".tabname")[0]&&(A=$(this).find(".tabname")[0].innerText);var J="";if(null!=$(this).find(".tabname")[0]){const t=document.getElementsByClassName("tab-desc");var H=$(this).attr("id").replace("analysis","");Array.from(t).forEach(t=>{element_id=$(t).attr("data-name").replace("index",""),element_id==H&&t.innerText&&(J=t.innerText)})}if(subIcon="",null!=$(this).find(".tabname")[0]){const t=document.getElementsByClassName("TabIcons");H=$(this).attr("id").replace("analysis","");Array.from(t).forEach(t=>{element_id=$(t).children().attr("data-name").replace("index",""),element_id==H&&$(t).children().attr("class")&&(subIcon=$(t).children().attr("class"))})}const z={aID:$(this).attr("id"),grid:P,aHref:$(this).attr("href"),chartDivContainer:$(this).find(".tabname").attr("data-tab_ct"),subTabName:A,subDesc:J,subIcon:subIcon,commentButtonID:`AddComment${t}`+e,pdfButtonID:`analysisPDF${t}`+e,deleteButtonID:"removeTab"+t+e,tabHeaderID:`tabHeader${t}`+e,
slicerConfigButtonId:`slicerConfig${t}`+e,"tab_background-color":d,outer_color:i,inner_color:r,indexCard_BGColor:n,indexCard_FontColor:s,g_color:O,header_color:c,header_bg_color:_,header_fontsize:g,label_color:p,label_fontsize:h,header_fontweight:b,header_fontstyle:y,global_header_alignment:T,global_header_alignment:T,global_checkBox:u,global_checkBox_border:m,global_shadowColor:f,global_shadowXOffset:v,global_shadowYOffset:x,global_shadowBlur:w,global_shadowThickness:k,global_borderColor:I,global_borderThickness:B,global_borderStyle:E,global_bg_name:C,global_bg_value:N,global_bg_folder:S,freeze_dict:finalfdict2},M={slicerTable:[],slicerParameter:[],slicerBoolean:[],slicerReload:[],multipleSlicer:[]};$(`.selectSlicerConfig_${t}${e}`).each(function(){const t=$(this).attr("data-slicertable"),a=$(this).attr("data-slicercolumn"),e=$(this).val();$(this).find("option[value='']").length>0?M.slicerBoolean.push("True"):M.slicerBoolean.push("False"),M.slicerTable.push(t),M.slicerParameter.push(a),M.slicerReload.push(e),$(this).attr("multiple")?M.multipleSlicer.push(!0):M.multipleSlicer.push(!1)}),z.tabSlicerConfig=M,$("#analysisrow"+t+e).find(".charts").each(function(){const t=$(this).attr("id").split("card")[0];l.push($("#"+t+"interaction").prop("checked"))});let F={};$("#analysisrow"+t+e).find(".charts").each(function(){var t=$(this).attr("id").split("card")[0];F[t]={threshold:$("#"+t+"threshold").val(),color:$("#"+t+"thresholdColor").val(),delta:$("#"+t+"deltaGauge").val(),barColor:$("#"+t+"gaugeModalButton").attr("data-color"),barColorConfig:$("#"+t+"gaugeModalButton").attr("data-value"),barRangeConfig:$("#"+t+"gaugeModalRangeButton").attr("data-value")}}),z.crossFilter=l,z.thresholdProp=F,$(`${$(this).attr("href")}`).css("display","block");const L=$(`#${$(this).find(".tabname").attr("data-tab_ct")}`).height();z.chartDivContainerHeight=L;let V=$(this).attr("id").replace("tab","row");null!=$("#"+V).attr("app_code")&&""!=$("#"+V).attr("app_code")||o.push(z),$(`${$(this).attr("href")}`).css("display","")}),e.subTabContent=o,e.slicerTabConnectDict=slicerTabConnectDict;const d=[];$(`#analysisTabContent${t}`).find(".chartDivSection").each(function(){const t={};t.ParentTabID=$(this).parent().attr("id");const a=$(this).parent().attr("aria-labelledby");if($(`#${$(this).parent().attr("id")}`).css("display","block"),t.ParentContainerID=$(this).attr("id"),"false"===$(`#${a}`).attr("data-tabLoaded")){const e=JSON.parse($(`#${a}`).attr("data-data"));t.chartJson=e}else{const a=[];$(this).find(".charts").each(function(t){let e=$(this).attr("highlightcolumnheaderscolorlist");const o=$(this).closest(".chartDivSection").attr("id"),l=$(this).find("h5").css("font-size");let d=$(this).find("h5")[0].innerText;const i=$(this).attr("data-conditional_table"),r=parseInt($(this).attr("data-header_fontsize")),n=$(this).attr("data-header_fontweight"),s=$(this).attr("data-header_fontstyle"),c=$(this).attr("data-header_color"),_=$(this).attr("data-header_bgcolor"),g=$(this).attr("data-header_alignment"),p=$(this).attr("data-id"),h=$(this).attr("data-subtype"),b=$(this).attr("data-column_alignment_table"),y=$(this).attr("data-formatters_config_table");if(["Pivot_Table","Table_Barchart","Heatmap","Row_Heatmap","Col_Heatmap","Line_Chart","Bar_Chart","Stacked_Bar_Chart","Area_Chart","Scatter_Chart"].includes(String(h))){var u=$(this).find(".graphcontainerdiv").data("pivotUIOptions"),m=JSON.parse(JSON.stringify(u));Object.keys(m).includes("aggregators")&&delete m.aggregators,Object.keys(m).includes("renderers")&&delete m.renderers,latestconfig=m}document.querySelector(`#${o}`).offsetHeight;const f=$(this).attr("data-table_name");let v,x="",w="",k="";$(this).css("background-color");const I=$(this).attr("data-globalbg");let B=$(this).attr("data-color");const E=$(this).attr("data-bgcolor"),D=$(this).attr("data-grad_color"),S=$(this).attr("data-global_bg_color"),C=$(this).attr("data-global_ind_color"),T=$(this).attr("data-config_data_value"),N=$(this).attr("data-config_valuesize"),O=$(this).attr("data-config_titlesize"),P=$(this).attr("data-config_color"),A=$(this).attr("data-config_gridlines"),J=$(this).attr("data-config_labels");let H=$(this).attr("data-config_xrange");const z=$(this).attr("data-config_x_axis_title"),M=$(this).attr("data-config_y_axis_title"),F=$(this).attr("data-legend_x"),L=$(this).attr("data-config_label_placement"),V=$(this).attr("data-legend_y"),G=$(this).attr("data-config_element_color"),R=$(this).attr("data-element_label");$(this).attr("data-label_color"),$(this).attr("data-label_fontsize");"undefined"===String(H)&&(H="");let X=$(this).attr("data-config_yrange");"undefined"===String(X)&&(X=""),B=$(this).css("background-color");const Y=$(this).attr("data-shadecolor"),q=$(this).attr("data-shadowX"),j=$(this).attr("data-shadowY"),U=$(this).attr("data-shadowblurry"),W=$(this).attr("data-shadowThick"),K=$(this).attr("data-shadowon"),Z=$(this).attr("data-borderColor"),Q=$(this).attr("data-borderStyle"),tt=$(this).attr("data-borderThickness"),at=$(this).attr("data-borderon");let et=$(this).height(),ot=$(this).width(),lt="",dt="",it="",rt="",nt="",st="",ct={};"true"===String($(this).attr("data-borderon"))&&(et=$(this).height()+2*tt,ot=$(this).width()+2*tt),"undefined"!==String($(this).attr("data-filter_columns"))&&(lt=JSON.parse($(this).attr("data-filter_columns"))),"undefined"!==String($(this).attr("data-filter_input_final"))&&(dt=JSON.parse($(this).attr("data-filter_input_final"))),"undefined"!==String($(this).attr("data-filter_dtrange"))&&"{}"!==String($(this).attr("data-filter_dtrange"))&&(ct=JSON.parse($(this).attr("data-filter_dtrange"))),"Nested_Table"===String(h)||"Aggregation"===String(h)||"Image"===String(h)||"Table"==h||["Pivot_Table","Table_Barchart","Heatmap","Row_Heatmap","Col_Heatmap","Line_Chart","Bar_Chart","Stacked_Bar_Chart","Area_Chart","Scatter_Chart"].includes(String(h))||(it=$(this).attr("data-layout"),rt=JSON.parse($(this).attr("data-data")),nt=$(this).attr("data-changed_text"),"undefined"!==String($(this).attr("data-line_column"))&&(v=$(this).attr("data-line_column"))),"Aggregation"===String(h)&&(x=$(this).find("p").css("font-size"),d=$(this).find("h5")[0].innerText,w=$(this).find("p")[0].innerText,k=$(this).find("h5").attr("data_value"),st=$(this).find("img").attr("src")),"Pie_Chart"!==String(h)&&"Treemap"!==String(h)&&"Donut_Chart"!==String(h)||(rt[0].labels=[],rt[0].values=[]),"Sunburst"===String(h)&&(rt[0].labels=[],rt[0].values=[],rt[0].ids=[],rt[0].parents=[]),"Vertical_Bar"!==String(h)&&"Funnel"!==String(h)&&"Horizontal_Bar"!==String(h)&&"Line"!==String(h)&&"Stepped_Line"!==String(h)&&"Area"!==String(h)&&"Horizontal_Area"!==String(h)&&"Scatter"!==String(h)&&"2D_Histogram_Contour"!==String(h)&&"Vertical_Box"!==String(h)&&"Horizontal_Box"!==String(h)&&"Horizontal_Dot_Plot"!==String(h)&&"Scatter_with_Straight_Lines_and_Markers"!==String(h)&&"Vertical_Violin"!==String(h)&&"Horizontal_Violin"!==String(h)&&"3D_Scatter_Plot"!==String(h)||(rt[0].x=[],rt[0].y=[]),"3D_Scatter_Plot"===String(h)&&(rt[0].z=[]),"Vertical_Waterfall"!==String(h)&&"Horizontal_Waterfall"!==String(h)||(rt[0].x=[],rt[0].y=[],rt[0].measure=[]),"Funnel_Area"===String(h)&&(rt[0].text=[],rt[0].values=[]),"Vertical_Histogram"!==String(h)&&"Cumulative_Histogram"!==String(h)||(rt[0].x=[]),"Horizontal_Histogram"===String(h)&&(rt[0].y=[]),"Angular_Gauge"===String(h)&&(rt[0].value=[],rt[0].title=[],rt[0].gauge.axis.range=[]),"Bullet_Gauge"===String(h)&&(rt[0].value=[],rt[0].gauge.axis.range=[]),"Vertical_Grouped_Box"!==String(h)&&"Vertical_Line_Stacked"!==String(h)&&"Vertical_Area_Stacked"!==String(h)&&"Horizontal_Area_Stacked"!==String(h)&&"Vertical_Waterfall_Grouped"!==String(h)&&"Horizontal_Grouped_Box"!==String(h)&&"Horizontal_Waterfall_Grouped"!==String(h)||(rt[0].x=[],rt[1].x=[],rt[0].y=[],rt[1].y=[]),"Vertical_Waterfall_Grouped"===String(h)&&(rt[0].measure=[],rt[1].measure=[]);const _t=$(this).attr("data-xaxis"),gt=$(this).attr("data-yaxis"),$t=$(this).attr("data-secondcolumn"),pt=$(this).attr("data-total_y"),ht=$(this).attr("data-total_L"),bt=$(this).attr("data-computed_number"),yt=$(this).attr("data-is_title"),ut=$(this).attr("data-title_value"),mt=$(this).attr("data-operation_n"),ft=$(this).attr("data-agg_distinct"),vt=$(this).attr("data-operation"),xt=$(this).attr("data-operation_line");""!=$(this).attr("app_code")&&null!=$(this).attr("app_code")||("Nested_Table"===String(h)||"Aggregation"===String(h)||"Image"===String(h)||"Table"===String(h)||["Pivot_Table","Table_Barchart","Heatmap","Row_Heatmap","Col_Heatmap","Line_Chart","Bar_Chart","Stacked_Bar_Chart","Area_Chart","Scatter_Chart"].includes(String(h))?a.push({is_title:yt,title_value:ut,conditional_table:i,header_alignment:g,header_fontstyle:s,header_fontsize:r,header_fontweight:n,header_color:c,header_bgcolor:_,data_shadowon:K,data_shadecolor:Y,data_shadowX:q,data_shadowY:j,data_shadowblurry:U,data_shadowThick:W,data_borderColor:Z,data_borderStyle:Q,data_borderon:at,data_borderThickness:tt,total_y:pt,total_L:ht,color:B,plot_bg_color:E,global_bg:I,grad_color:D,global_bgcolor:S,global_ind_color:C,element_label:R,config_element_color:G,config_data_value:T,config_valuesize:N,config_titlesize:O,config_label_placement:L,legend_x:F,legend_y:V,computed_number:bt,operation_n:mt,agg_distinct:ft,operation:vt,operation_line:xt,tableName:f,chartheader:d,config_x_axis_title:z,config_y_axis_title:M,chart_title:w,config_yrange:X,config_xrange:H,config_gridlines:A,config_labels:J,data_value:k,x_axis:_t,y_axis:gt,second_column:$t,height:et,filters:lt,filter_input_final:dt,width:ot,position:$(this).position(),id:p,graph_subtype:h,backgroundcolor:B,config_color:P,font_size:l,titlefontsize:x,img_icon:st,drange:ct,columnAlignmentSelectedOptions:b,FormattersConfiguration:y,highlightcolumnheaderscolorlist:e}):a.push({is_title:yt,title_value:ut,conditional_table:i,header_alignment:g,header_fontstyle:s,header_fontsize:r,header_fontweight:n,header_color:c,header_bgcolor:_,data_shadowon:K,data_shadecolor:Y,data_shadowX:q,data_shadowY:j,data_shadowblurry:U,data_shadowThick:W,data_borderColor:Z,data_borderStyle:Q,data_borderon:at,data_borderThickness:tt,total_y:pt,total_L:ht,color:B,plot_bg_color:E,global_bg:I,grad_color:D,global_bgcolor:S,global_ind_color:C,element_label:R,config_element_color:G,config_data_value:T,config_valuesize:N,config_titlesize:O,config_label_placement:L,legend_x:F,legend_y:V,computed_number:bt,operation_n:mt,agg_distinct:ft,operation:vt,operation_line:xt,tableName:f,chartheader:d,config_x_axis_title:z,config_y_axis_title:M,config_yrange:X,config_xrange:H,config_gridlines:A,config_labels:J,x_axis:_t,y_axis:gt,second_column:$t,filters:lt,filter_input_final:dt,line_column:v,height:et,width:ot,position:$(this).position(),layout:JSON.parse(it),data:rt,id:p,graph_subtype:h,changed_text:JSON.parse(nt),config_color:P,backgroundcolor:B,drange:ct,columnAlignmentSelectedOptions:b,FormattersConfiguration:y,highlightcolumnheaderscolorlist:e})),["Pivot_Table","Table_Barchart","Heatmap","Row_Heatmap","Col_Heatmap","Line_Chart","Bar_Chart","Stacked_Bar_Chart","Area_Chart","Scatter_Chart"].includes(String(h))&&(a[t].pivot_report_data=latestconfig)}),$(this).find(".commentboxcard").each(function(){const t=$(this).find(".commentbox").html(),e=$(this).height(),o=$(this).width();if("undefined"===String($(this).attr("data-id")))a.push({chartType:"Textbox",height:e,width:o,position:$(this).position(),textboxvalue:t});else{const l=$(this).attr("data-id");a.push({chartType:"Textbox",height:e,width:o,position:$(this).position(),textboxvalue:t,id_text_editor:l})}}),t.chartJson=a}d.push(t),$(`#${$(this).parent().attr("id")}`).css("display","")}),e.subTabChartDetails=d;let i=windowLocation,r=i.indexOf("/",i.indexOf("/")+1),n=i.indexOf("/",i.indexOf("/")+r+1),s=i.indexOf("/",i.indexOf("/")+n+1),c=i.substring(r+1,n),_=i.substring(n+1,s);"Build"!=_&&"Edit"!=_&&(_="User"),null==sharedConfig.config&&(sharedConfig.config=[]);for(let a=0;a<sharedConfig.config.length;a++){var g=!1;$(`#analysisTabContent${t}`).find(".chartDivSection").each(function(){$(this).find(".charts").each(function(){$(this).attr("id")==sharedConfig.config[a].plot_id&&(g=!0)})}),"Plots"==sharedConfig.config[a].dashboard_type&&(g||(sharedConfig.config.splice(a,1),a--))}for(let a=0;a<sharedConfig.config.length;a++){g=!1;$(`#analysisTabContent${t}`).find(".chartDivSection").each(function(){$(this).attr("app_code")==sharedConfig.config[a].app_code&&(g=!0)}),"Tabs"==sharedConfig.config[a].dashboard_type&&(g||(sharedConfig.config.splice(a,1),a--))}"analysis"==a?dashboardSave_?$.ajax({url:`/users/${urlPath}/userConfigSave/`,data:{operation:"saveAnalysisTab",analysisDataDict:JSON.stringify(e),shared_config:JSON.stringify(sharedConfig),screenURL:c,element_id:t},type:"POST",dataType:"json",success:function(t){$(".standard_button_click").prop("disabled",!1)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."}),$(".standard_button_click").prop("disabled",!1)}}):$.ajax({url:`/users/${urlPath}/userConfigSave/`,data:{operation:"saveAnalysisTabImport",shared_config:JSON.stringify(sharedConfig),screenURL:c,element_id:t},type:"POST",dataType:"json",success:function(t){$(".standard_button_click").prop("disabled",!1)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."}),$(".standard_button_click").prop("disabled",!1)}}):$.ajax({url:`/users/${urlPath}/userConfigSave/`,data:{operation:"saveAnalysisTabList",analysisDataDict:JSON.stringify(e),shared_config:JSON.stringify(sharedConfig),screenURL:c,element_id:t},type:"POST",dataType:"json",success:function(t){$(".standard_button_click").prop("disabled",!1)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."}),$(".standard_button_click").prop("disabled",!1)}})}function plotFunction(plotDict,slicerColumn="",slicerColumnValue="",slicerColumnId="",existingDivId="",app_code_="",disable=!1){let ajaxdata={tableName:plotDict.tableName,conditional_table:plotDict.conditional_table,x_axis:plotDict.x_axis,y_axis:plotDict.y_axis,second_column:plotDict.second_column,operation:plotDict.operation,operation_line:plotDict.operation_line,graph_type:plotDict.graph_type,graph_subtype:plotDict.graph_subtype,color:plotDict.color,filters:plotDict.filters,line_column:plotDict.line_column,filter_inputs:plotDict.filter_input_final,slicerColumn:JSON.stringify(slicerColumn),slicerColumnValue:JSON.stringify(slicerColumnValue),computed_number:plotDict.computed_number,is_title:plotDict.is_title,title_value:plotDict.title_value,operation_n:plotDict.operation_n,agg_distinct:plotDict.agg_distinct,total_y:plotDict.total_y,total_L:plotDict.total_L,drange:plotDict.drange,app_code:app_code_,columnAlignmentSelectedOptions:plotDict.columnAlignmentSelectedOptions,highlightcolumnheaderscolorlist:plotDict.highlightcolumnheaderscolorlist,FormattersConfiguration:plotDict.FormattersConfiguration};"undefined"===String(plotDict.graph_type)&&(ajaxdata.plotDict=JSON.stringify(plotDict)),(plotDict.tableName||"Image"===plotDict.graph_subtype)&&$.ajax({url:`/users/${urlPath}/plotlyPlots/`,data:ajaxdata,type:"POST",dataType:"json",success:function(data){function filter_function(){let tableName=$(`#${id_filter}`).attr("data-table_name"),slicer_data=$(`#${id_filter}`).attr("data-slicer_value"),graph_subtype=$(`#${id_filter}`).attr("data-graph_subtype"),x_axis=$(`#${id_filter}`).attr("data-x_axis"),y_axis=$(`#${id_filter}`).attr("data-y_axis"),operation=$(`#${id_filter}`).attr("data-operation"),operation_line=$(`#${id6}`).attr("data-operation_line"),line_column=$(`#${id6}`).attr("data-line_column"),second_column=$(`#${id6}`).attr("data-second_column"),total_y=$(`#${id6}`).attr("data-total_y"),total_L=$(`#${id6}`).attr("data-total_L"),computed_number=$(`#${id6}`).attr("data-computed_number"),is_title=$(`#${id6}`).attr("data-is_title"),title_value=$(`#${id6}`).attr("data-title_value"),operation_n=$(`#${id6}`).attr("data-operation_n"),agg_distinct=$(`#${id6}`).attr("data-agg_distinct"),conditional_table=$(`#${id6}`).attr("data-conditional_table"),filter_input_final=[],drange={};$(`#${id_filter_container}`).find(".categorical_filter_inputs").each(function(){filter_input_dict={};let t=$(this).attr("name").split("__")[1],a=$(this).val();filter_input_dict.column_name=t,filter_input_dict.filter_value=a,filter_input_dict.data_type=$(this).attr("data-data_type"),filter_input_dict.data_category="Categorical",filter_input_final.push(filter_input_dict)}),$(`#${id_filter_container}`).find(".numerical_column_condition").each(function(){filter_input_dict={};let t=$(this).attr("name").split("__")[1],a=$(this).val(),e=$(this).parent().next().find(".numerical_column_value").val();filter_input_dict.column_name=t,filter_input_dict.condition_name=a,filter_input_dict.filter_value=e,filter_input_dict.data_type=$(this).attr("data-data_type"),filter_input_dict.data_category="Numerical",filter_input_final.push(filter_input_dict)}),$(`#${chartDivId+"__"}filter_dtrange`).is(":checked")&&(drange.col_name=$(`.${chartDivId+"__"}seldatecol`).val(),drange.start_date=$(`#${chartDivId+"__"}startdate`).val(),drange.end_date=$(`#${chartDivId+"__"}enddate`).val()),$(`#${id6}`).attr("data-filter_input_final",JSON.stringify(filter_input_final)),$(`#${id6}`).attr("data-filter_dtrange",JSON.stringify(drange)),second_column=$(`#${id6}`).attr("data-secondcolumn");let slicerColumnValue=[],slicerColumn=[];for(let t=0;t<$(`.${tabSlicerId}`).length;t++)slicerColumnValue.push($(`.${tabSlicerId}`).eq(t).val()),slicerColumn.push($(`.${tabSlicerId}`).eq(t).attr("data-slicerColumn"));"No"==slicer_data&&(slicerColumnValue=[],slicerColumn=[]);let id18=id+"resetlabels",app_code="";""==app_code&&(null!=$("body").find("div").eq(0).attr("app_code")?app_code=$("body").find("div").eq(0).attr("app_code"):null!=$("#"+id6).closest(".chartDivSection").attr("app_code")&&(app_code=$("#"+id6).closest(".chartDivSection").attr("app_code"))),$.ajax({url:`/users/${urlPath}/filter_plot/`,data:{operation:"filter",conditional_table:conditional_table,filter_input_final:JSON.stringify(filter_input_final),tableName:tableName,graph_subtype:graph_subtype,chart_id:id,x_axis:x_axis,y_axis:y_axis,second_column:second_column,aggregation:operation,operation_line:operation_line,total_y:total_y,total_L:total_L,operation_n:operation_n,agg_distinct:agg_distinct,computed_number:computed_number,is_title:is_title,title_value:title_value,line_column:line_column,slicerColumn:JSON.stringify(slicerColumn),slicerColumnValue:JSON.stringify(slicerColumnValue),drange:JSON.stringify(drange),app_code:app_code},type:"POST",dataType:"json",success:function(data){const idOrderModal=id+"orderModal";let sorted_array=[],new_sorted_array=[];$(`#${idOrderModal}Button`).length&&($(`#${idOrderModal}`).attr("data-x_axis",data.x_axisdata),$(`#${idOrderModal}`).attr("data-y_axis",data.y_axisdata),sorted_array=$(`#${idOrderModal}Button`).attr("data-sorted-values").trim().split(","),new_sorted_array=JSON.parse(JSON.stringify(sorted_array)),sorted_array.sort());var color_value=$(`#${id1}`).val();if($(`#${id24}`).prop("checked"))var filter_gradient_color="yes";else var filter_gradient_color="no";var tester=document.getElementById(id);if("Nested_Table"==data.graph_subtype){var columns=[];for(let t=0;t<data.final_cols.length;t++)columns.push({title:data.final_cols[t],field:data.final_cols[t]});var nested_conditional_table=data.conditional_table,open_close=!1;if(data.conditional_table.length>0&&null!=data.conditional_table[0].column_name)var open_close=!0;else var open_close=!1;var mappingDict=data.mappingDict,table=new Tabulator(`#${id}`,{data:data.table_data,layout:"fitDataFill",height:400,columnMinWidth:130,dataTree:!0,dataTreeStartExpanded:open_close,dataTreeCollapseElement:"<i class='fas fa-minus' style='font-size:0.8rem;color:darkgoldenrod'></i>&nbsp;&nbsp;",dataTreeExpandElement:"<i class='fas fa-plus' style='font-size:0.8rem;color:darkgoldenrod'></i>&nbsp;&nbsp;",movableColumns:!0,resizableRows:!0,rowFormatter:function(t){var a=t.getData();for(let d=0;d<nested_conditional_table.length;d++){if("Greater than"==nested_conditional_table[d].column_condition){var e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("DateField"==nested_conditional_table[d].column_datatype){if("Category"==nested_conditional_table[d].nested_type){if(new Date(a.Category)>new Date(nested_conditional_table[d].condition_value))for(var o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]>parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if("DateTimeField"==nested_conditional_table[d].column_datatype){if("Category"==nested_conditional_table[d].nested_type){if(new Date(a.Category)>new Date(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]>parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if("FloatField"==nested_conditional_table[d].column_datatype){if("Category"==nested_conditional_table[d].column_condition){if(a.Category>parseFloat(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]>parseFloat(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if("Category"==nested_conditional_table[d].column_condition){if(a.Category>parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]>parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("Smaller than"==nested_conditional_table[d].column_condition){e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("DateField"==nested_conditional_table[d].column_datatype){if("Category"==nested_conditional_table[d].nested_type){if(new Date(a.Category)<new Date(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]<parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if("DateTimeField"==nested_conditional_table[d].column_datatype){if("Category"==nested_conditional_table[d].nested_type){if(new Date(a.Category)<new Date(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]<parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if("FloatField"==nested_conditional_table[d].column_datatype){if("Category"==nested_conditional_table[d].column_condition){if(a.Category<parseFloat(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]<parseFloat(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if("Category"==nested_conditional_table[d].column_condition){if(a.Category<parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]<parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("Equal to"==nested_conditional_table[d].column_condition){if("Category"==nested_conditional_table[d].nested_type)if("DateField"==nested_conditional_table[d].column_datatype)var l=nested_conditional_table[d].condition_value;else if("DateTimeField"==nested_conditional_table[d].column_datatype)l=nested_conditional_table[d].condition_value.replace("T"," ");else l=nested_conditional_table[d].condition_value.toString();else l=nested_conditional_table[d].condition_value.toString();e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("Category"==nested_conditional_table[d].nested_type){if(a.Category.toString()==l)for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]==l)for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("Not equal to"==nested_conditional_table[d].column_condition){if("Category"==nested_conditional_table[d].nested_type)if("DateField"==nested_conditional_table[d].column_datatype)l=nested_conditional_table[d].condition_value;else if("DateTimeField"==nested_conditional_table[d].column_datatype)l=nested_conditional_table[d].condition_value.replace("T"," ");else l=nested_conditional_table[d].condition_value.toString();else l=nested_conditional_table[d].condition_value.toString();e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("Category"==nested_conditional_table[d].nested_type){if(a.Category.toString()!=l)for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]!=l)for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("In"==nested_conditional_table[d].column_condition){e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("Value"==nested_conditional_table[d].nested_type){if(e in a&&nested_conditional_table[d].condition_value.includes(a[e].toString()))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(nested_conditional_table[d].condition_value.includes(a.Category.toString()))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("Starts with"==nested_conditional_table[d].column_condition){e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("Category"==nested_conditional_table[d].nested_type){if(a.Category.toString().startsWith(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e].toString().startsWith(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("Ends with"==nested_conditional_table[d].column_condition){e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("Category"==nested_conditional_table[d].nested_type){if(a.Category.toString().endsWith(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e].toString().endsWith(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("Contains"==nested_conditional_table[d].column_condition){e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("Category"==nested_conditional_table[d].nested_type){if(a.Category.toString().includes(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e].toString().includes(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}}null!=a._children&&a._children.length>0&&(t.getElement().style.fontWeight="bold",t.getElement().getElementsByClassName("fas fa-plus").length>0&&t.getElement().getElementsByClassName("fas fa-plus")[0].insertAdjacentHTML("afterend","    "),t.getElement().getElementsByClassName("fas fa-minus").length>0&&t.getElement().getElementsByClassName("fas fa-minus")[0].insertAdjacentHTML("afterend","    "));t.getElementsByClassName},columns:columns})}else if("Table"==data.graph_subtype){$(`#table_example${id}`).DataTable().clear().destroy();for(var column_names=[],i=0;i<data.x_axis.length;i++)column_names.push({data:fieldToVerbose(data.x_axis[i],data.mappingDict)});for(var mappingDict=data.mappingDict,i=0;i<data.conditional_table;i++)for(const[t,a]of Object.entries(column_names))a.data==fieldToVerbose(data.conditional_table[i].column_name,mappingDict)&&(data.conditional_table[i].td_val=parseInt(t))
;var conditional_data=data.conditional_table,content=data.content;null==content&&(content={});var x_axisdata=data.x_axis,table=$(`#table_example${id}`).DataTable({data:content,columns:column_names,autoWidth:!1,scrollY:"50vh",scrollCollapse:!0,scrollX:"110%",orderCellsTop:!0,responsive:!0,stateSave:!0,deferRender:!0,paging:!0,lengthMenu:[[1,5,10,25,50,75,100,-1],[1,5,10,25,50,75,100,"All"]],pageLength:10,dom:"lfBrtip",sScrollX:"100%",scrollX:!0,buttons:[{extend:"collection",text:"Export",buttons:[{extend:"copy",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"excel",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"csv",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"pdf",title:"",exportOptions:{columns:":visible:not(.noVis)"}}]}],headerCallback:function(t,a,e,o,l){$(t).find("th").each(function(){let a=$(this).index();if(selectedOptions)if(Array.isArray(selectedOptions[0].columns_config)){let t=selectedOptions[0].columns_config.find(t=>t.columnName===column_names[a].data),e=selectedOptions[0].global_config.globalHeaderColumnAlignment;$(this).addClass(`dt-${t?t.header:e}`)}else $(this).addClass(`dt-${globalHeaderColumnAlignment}`);else $(t).find("th").addClass("dt-center")})},columnDefs:[selectedOptions?selectedOptions&&Array.isArray(selectedOptions[0].columns_config)?{targets:"_all",createdCell:function(t,a,e,o,l){let d=selectedOptions[0].columns_config.find(t=>t.columnName===column_names[l].data),i=selectedOptions[0].global_config.globalContentColumnAlignment;$(t).addClass(`dt-${d?d.content:i}`)}}:selectedOptions&&!Array.isArray(selectedOptions[0].columns_config)?{targets:"_all",createdCell:function(t,a,e,o,l){let d=selectedOptions[0].global_config.globalContentColumnAlignment;$(t).addClass(`dt-${d}`)}}:{targets:"_all",className:"allColumnClass all buttons_export_class"}:{targets:"_all",className:"dt-center"}],rowCallback:function(t,a,e){for(var o=0;o<conditional_data.length;o++)if(null!=conditional_data[o].column_name&&x_axisdata.includes(conditional_data[o].column_name))if("Equal to"==conditional_data[o].column_condition){if("DateField"==conditional_data[o].column_datatype)var l=conditional_data[o].condition_value;else if("DateTimeField"==conditional_data[o].column_datatype)l=conditional_data[o].condition_value;else l=conditional_data[o].condition_value;$(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML==l&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color)}else if("Not equal to"==conditional_data[o].column_condition){if("DateField"==conditional_data[o].column_datatype)l=conditional_data[o].condition_value;else if("DateTimeField"==conditional_data[o].column_datatype)l=conditional_data[o].condition_value;else l=conditional_data[o].condition_value;$(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML!=l&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color)}else"Greater than"==conditional_data[o].column_condition?"DateField"==conditional_data[o].column_datatype?new Date($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)>new Date(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"DateTimeField"==conditional_data[o].column_datatype?new Date($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)>new Date(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"FloatField"==conditional_data[o].column_datatype?parseFloat($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)>parseFloat(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):parseInt($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)>parseInt(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"Smaller than"==conditional_data[o].column_condition?"DateField"==conditional_data[o].column_datatype?new Date($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)<new Date(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"DateTimeField"==conditional_data[o].column_datatype?new Date($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)<new Date(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"FloatField"==conditional_data[o].column_datatype?parseFloat($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)<parseFloat(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):parseInt($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)<parseInt(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"In"==conditional_data[o].column_condition?conditional_data[o].condition_value.includes($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"Starts with"==conditional_data[o].column_condition?$(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML.startsWith(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"Ends with"==conditional_data[o].column_condition?$(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML.endsWith(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"Contains"==conditional_data[o].column_condition?$(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML.includes(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):$(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML==conditional_data[o].condition_value&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color)},initComplete:function(){try{$(`#table_example${id}`).off("click").off("click").on("click","td",function(){var t=$(this).closest("table").attr("id"),a=$(`#${t}`).DataTable(),e=a.settings().init().columns;cellcollen2=e.length,cellindex3=a.cell(this).index().column+1,$(this).toggleClass("cell_highlighted"),$(this).toggleClass("cell_selected")})}catch(t){}}}).columns.adjust();if(id in finalfdict2){var table_freeze=$(`#table_example${id}`).DataTable();new $.fn.dataTable.FixedColumns(table_freeze,finalfdict2[`${id}`]),setTimeout(()=>{$.fn.DataTable.isDataTable(`#table_example${id}`)&&$(`#table_example${id}`).DataTable().draw()},200)}$(`#${id6}`).find(".dt-buttons").css("padding-left","1em"),$(`#table_example${id}_info`).css("padding-left","1em"),$(`#table_example${id}_paginate`).css("padding-right","1em"),$(`#${id6}`).find(".dt-buttons").css("padding-top","1em"),$(`#table_example${id}_length`).css("float","none"),$(`#table_example${id}_length`).css("padding-right","1em"),$(`#table_example${id}_length`).css("padding-top","1em"),$(`#table_example${id}_length`).css("padding-top","1em"),$(`#table_example${id}_length`).css("display","inline-block"),$(`#table_example${id}_filter`).css("padding-top","1em")}else if("Vertical_Histogram"==data.graph_subtype||"Cumulative_Histogram"==data.graph_subtye){var colorlength=data.x_axisdata.length;if("yes"==filter_gradient_color)var colordata=gradient_filter(color_value,colorlength);else var colordata=color_value;var update={x:[data.x_axisdata],marker:{color:colordata}};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata)}else if(["Pivot_Table","Table_Barchart","Heatmap","Row_Heatmap","Col_Heatmap","Line_Chart","Bar_Chart","Stacked_Bar_Chart","Area_Chart","Scatter_Chart"].includes(String(data.graph_subtype))){var pivot_config=$(`#${data.chart_id_for_slicer}card`).find(".graphcontainerdiv").data("pivotUIOptions"),pivot_config_copy=JSON.parse(JSON.stringify(pivot_config));Object.keys(pivot_config_copy).includes("aggregators")&&delete pivot_config_copy.aggregators,Object.keys(pivot_config_copy).includes("renderers")&&delete pivot_config_copy.renderers,"Pivot_Table"==data.graph_subtype?rendererName="Table":rendererName=data.graph_subtype.split("_").join(" "),google.load("visualization","1",{packages:["corechart"]}),graphHeight=.85*$(`#${id6}`).height(),graphWidth=.825*$(`#${id6}`).width(),$(`#${id6}`).find(".graphcontainerdiv").pivotUI(data.content,{...pivot_config_copy,renderers:$.extend($.pivotUtilities.renderers,$.pivotUtilities.plotly_renderers,$.pivotUtilities.d3_renderers,$.pivotUtilities.c3_renderers,$.pivotUtilities.gchart_renderers,$.pivotUtilities.subtotal_renderers),rendererOptions:{plotly:{width:graphWidth,height:graphHeight},c3:{width:graphWidth,height:graphHeight},d3:{width:graphWidth,height:graphHeight},gchart:{width:graphWidth,height:graphHeight,colors:["var(--primary-color)"]}},onRefresh:function(t){var a=JSON.parse(JSON.stringify(t));Object.keys(a).includes("aggregators")&&delete a.aggregators,Object.keys(a).includes("renderers")&&delete a.renderers,latestconfig=a}}),latestconfig&&(pivot_config_copy=latestconfig),$(`#${id6} .graphcontainerdiv .pvtAggregator`).css("display","none"),$(`#${id6} .graphcontainerdiv .pvtRenderer`).css("display","none");var pivot_charttype=["Table","Table Barchart","Heatmap","Row Heatmap","Col Heatmap","Line Chart","Bar Chart","Stacked Bar Chart","Area Chart","Scatter Chart"];$(`#${id}_configure_pivot_charttype`).find("option").slice(1).remove();for(const t in pivot_charttype)$(`#${id}_configure_pivot_charttype`).append(new Option(pivot_charttype[t],pivot_charttype[t],!1,!1));$(`#${id}_configure_pivot_charttype`).val(rendererName).trigger("change"),$(`#${id}_configure_pivot_charttype`).on("change",function(){$(`#${id6} .graphcontainerdiv .pvtRenderer`).val(this.value).trigger("change")});var pivot_operations=["Count","Count Unique Values","List Unique Values","Average","Sum","Interger Sum","Median","Sample Variance","Sample Standard Deviation","Minimum","Maximum","First","Last","Sum over Sum","80% Upper Bound","80% Lower Bound","Sum as Fraction of Total","Sum as Fraction of Rows","Sum as Fraction of Columns","Count as Fraction of Total"];$(`#${id}_configure_pivot_operation`).find("option").slice(1).remove();for(let t=0;t<pivot_operations.length;t++)$(`#${id}_configure_pivot_operation`).append('<option value="'+pivot_operations[t]+'">'+pivot_operations[t]+"</option>");$(`#${id}_configure_pivot_operation`).val(data.operation).trigger("change"),$(`#${id}_configure_pivot_operation`).on("change",function(){$(`#${id6} .graphcontainerdiv .pvtAggregator`).val(this.value).trigger("change")}),pivotResize(id6,data.content,pivot_config_copy,id,rendererName,data.operation)}else if("Vertical_Waterfall"==data.graph_subtype){var colorlength1=data.x_axisdata.length,tester=document.getElementById(id);x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata=data.x_axisdata,y_axisdata=data.y_axisdata,x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));x_axisdata2.push("Total"),x_axisdata.push("Total"),null!=y_axisdata&&(Number.isInteger(y_axisdata.reduce((t,a)=>t+a,0))?y_axisdata.push(y_axisdata.reduce((t,a)=>t+a,0)):y_axisdata.push(y_axisdata.reduce((t,a)=>t+a,0).toFixed(2)));var measure1=[];for(let t=0;t<colorlength1;t++)measure1.push("relative");measure1.push("total");var update={x:[x_axisdata],y:[y_axisdata],measure:[measure1],text:[y_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Vertical_Waterfall_Grouped"==data.graph_subtype){var colorlength=data.x_axisdata.length,colordata=[],tester=document.getElementById(id),myPlot=document.getElementById(id),colordatasecond=[],measure=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata=data.x_axisdata,y_axisdata=data.y_axisdata,y_axisdata2=data.second_columndata,x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));x_axisdata2.push("Total"),x_axisdata.push("Total"),null!=y_axisdata&&(Number.isInteger(y_axisdata.reduce((t,a)=>t+a,0))?y_axisdata.push(y_axisdata.reduce((t,a)=>t+a,0)):y_axisdata.push(y_axisdata.reduce((t,a)=>t+a,0).toFixed(2))),null!=y_axisdata2&&(Number.isInteger(y_axisdata2.reduce((t,a)=>t+a,0))?y_axisdata2.push(y_axisdata2.reduce((t,a)=>t+a,0)):y_axisdata2.push(y_axisdata2.reduce((t,a)=>t+a,0).toFixed(2)));for(let t=0;t<colorlength;t++)measure.push("relative");measure.push("total");var update={x:[x_axisdata],y:[y_axisdata],measure:[measure],text:[y_axisdata]};Plotly.restyle(tester,update,[0]);var update1={x:[x_axisdata],y:[y_axisdata2],measure:[measure],text:[y_axisdata2]};Plotly.restyle(tester,update1,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata)}else if("Horizontal_Waterfall"==data.graph_subtype){var colorlength=data.y_axisdata.length,colordata=[],measure=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata=data.x_axisdata,y_axisdata=data.y_axisdata,y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata));y_axisdata2.push("Total");var tester=document.getElementById(id);y_axisdata.push("Total"),null!=x_axisdata&&(Number.isInteger(x_axisdata.reduce((t,a)=>t+a,0))?x_axisdata.push(x_axisdata.reduce((t,a)=>t+a,0)):x_axisdata.push(x_axisdata.reduce((t,a)=>t+a,0).toFixed(2)));for(let t=0;t<colorlength;t++)measure.push("relative");measure.push("total");var update={x:[x_axisdata],y:[y_axisdata],measure:[measure],text:[x_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Horizontal_Waterfall_Grouped"==data.graph_subtype){var colorlength=data.x_axisdata.length,colordata=[],colordatasecond=[],tester=document.getElementById(id),myPlot=document.getElementById(id),measure=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata=data.x_axisdata,y_axisdata=data.y_axisdata,x_axisdata2=data.second_columndata,y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata));y_axisdata2.push("Total"),y_axisdata.push("Total"),null!=x_axisdata&&(Number.isInteger(x_axisdata.reduce((t,a)=>t+a,0))?x_axisdata.push(x_axisdata.reduce((t,a)=>t+a,0)):x_axisdata.push(x_axisdata.reduce((t,a)=>t+a,0).toFixed(2))),null!=x_axisdata2&&(Number.isInteger(x_axisdata2.reduce((t,a)=>t+a,0))?x_axisdata2.push(x_axisdata2.reduce((t,a)=>t+a,0)):x_axisdata2.push(x_axisdata2.reduce((t,a)=>t+a,0).toFixed(2)));for(let t=0;t<colorlength;t++)colordata.push("#b8860b");for(let t=0;t<colorlength;t++)colordatasecond.push("goldenrod");for(let t=0;t<colorlength;t++)measure.push("relative");measure.push("total");var update={x:[x_axisdata],y:[y_axisdata],measure:[measure],text:[x_axisdata]};Plotly.restyle(tester,update,[0]);var update1={x:[x_axisdata2],y:[y_axisdata],measure:[measure],text:[x_axisdata2]};Plotly.restyle(tester,update1,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.second_columndata),tabledata.push(data.y_axisdata)}else if("3D_Mesh"==data.graph_subtype||"3D_Scatter"==data.graph_subtype){var colordata=[],colorlength=data.x_axisdata.length;for(let t=0;t<colorlength;t++)colordata.push(color_value);var update={x:[data.x_axisdata],y:[data.y_axisdata],z:[data.second_columndata],marker:{color:colordata}};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata)}else if("Bubble_Chart"==data.graph_subtype){var colorlength=data.x_axisdata.length,colordata=[];for(let t=0;t<colorlength;t++)colordata.push(color_value);var update={x:[data.x_axisdata],y:[data.y_axisdata],z:[data.second_columndata],text:[data.x_axisdata]};Plotly.restyle(tester,update);var data_update={marker:{color:colordata,size:data.second_columndata}};Plotly.restyle(tester,data_update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata)}else if("Bar_Grouped_and_Line"==data.graph_subtype||"Bar_Stacked_and_Line"==data.graph_subtype){var x_array=JSON.parse(JSON.stringify(data.x_axisdata));x_array.sort(),arrayEquals(x_array,sorted_array)||(new_sorted_array=x_array);for(var colorlength=data.x_axisdata.length,backRGB=color_value,color_update=[],i=0;i<data.y_axisdata.length;i++){color_update=[];for(let t=0;t<colorlength;t++)color_update.push(color_value);var update={x:[data.x_axisdata],y:[data.y_axisdata[i]],text:[data.y_axisdata[i]],marker:{color:color_update}},colorList1=[];colorList1.push(color_value);var backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);color_value=newcolor,Plotly.restyle(tester,update,[i])}var update={x:[data.x_axisdata],y:[data.line_columndata],name:[fieldToVerbose(data.line_column,data.mappingDict)],text:[data.line_columndata]};Plotly.restyle(tester,update,[data.y_axisdata.length]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));for(var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`],new_y_axis=eval(data.new_y_axis),i=0;i<new_y_axis.length;i++)tableheaders.push(`<b>${fieldToVerbose(data.new_y_axis[i],data.mappingDict)}</b>`);tableheaders.push(`<b>${fieldToVerbose(data.line_column,data.mappingDict)}</b>`),tabledata.push(data.x_axisdata);for(var i=0;i<data.y_axisdata.length;i++)tabledata.push(data.y_axisdata[i]);tabledata.push(data.line_columndata)}else if("Bar_Stacked_and_Multiple_Line"==data.graph_subtype){var x_array=JSON.parse(JSON.stringify(data.x_axisdata));x_array.sort(),arrayEquals(x_array,sorted_array)||(new_sorted_array=x_array);var colorlength=data.x_axisdata.length,backRGB=color_value,color_update=[],i=0;for(i=0;i<data.y_axisdata.length;i++){color_update=[];for(let t=0;t<colorlength;t++)color_update.push(color_value);var update={x:[data.x_axisdata],y:[data.y_axisdata[i]],text:[data.y_axisdata[i]],marker:{color:color_update}},colorList1=[];colorList1.push(color_value);var backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);color_value=newcolor,Plotly.restyle(tester,update,[i])}backRGB=color_value;const hexToRgb=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.9*hexToRgb(backRGB)[0],g=.9*hexToRgb(backRGB)[1],b=.9*hexToRgb(backRGB)[2],newcolor=rgb2hex(r,g,b);backRGB=newcolor;for(var j=0;j<data.line_columndata.length;j++){const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);color_value=newcolor;var update={x:[data.x_axisdata],y:[data.line_columndata[j]],text:[data.line_columndata[j]],marker:{color:color_value}};colorList1.push(color_value),backRGB=color_value,Plotly.restyle(tester,update,[i+j])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));for(var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`],new_y_axis=eval(data.new_y_axis),i=0;i<new_y_axis.length;i++)tableheaders.push(`<b>${fieldToVerbose(data.new_y_axis[i],data.mappingDict)}</b>`);for(var i=0;i<data.line_column.length;i++)tableheaders.push(`<b>${fieldToVerbose(data.line_column[i],data.mappingDict)}</b>`);tabledata.push(data.x_axisdata);for(var i=0;i<data.y_axisdata.length;i++)tabledata.push(data.y_axisdata[i]);for(var i=0;i<data.line_columndata.length;i++)tabledata.push(data.line_columndata[i])}else if("Aggregation"==data.graph_subtype){var data_value=$(`#${id6}`).attr("data-config_data_value"),changedOuputValue=data.value;if($.isNumeric(data.value)){if("Units"==data_value)var changedOuputValue=data.value/1;if("Hundreds"==data_value)var changedOuputValue=(data.value/100).toFixed(2)+"H";if("Thousands"==data_value)var changedOuputValue=(data.value/1e3).toFixed(2)+"K";if("Millions"==data_value)var changedOuputValue=(data.value/1e6).toFixed(2)+"M";if("Billions"==data_value)var changedOuputValue=(data.value/1e9).toFixed(2)+"B"}$(`#${id6}`).children().find("h5")[1].innerText=changedOuputValue,$(`#${id18}`).attr("datavalue",data.value)}else if("Funnel"==data.graph_subtype){var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata));if("yes"==filter_gradient_color)var colordata=gradient_filter(color_value,colorlength);else for(let t=0;t<colorlength;t++)colordata.push(color_value);var update={x:[data.x_axisdata],y:[data.y_axisdata],marker:{color:colordata}};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Funnel_Area"==data.graph_subtype){x_axis=data.x_axis,y_axis=data.y_axis;var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata));color=color_value;var colordata=[],colorlength=data.x_axisdata.length,backRGB=color;colordata.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colordata[colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colordata.push(newHex)}var update={text:[data.x_axisdata],values:[data.y_axisdata],marker:{colors:colordata}};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Bubble_Map"==data.graph_subtype){var update={labels:[data.x_axisdata],values:[data.y_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}else if("Pie_Chart"==data.graph_subtype||"Donut_Chart"==data.graph_subtype){var colorlength=data.x_axisdata.length,colorList=[],backRGB=color_value;colorList.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colorList[colorList.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colorList.push(newHex)}var update={values:[data.y_axisdata],labels:[data.x_axisdata],marker:{colors:colorList}};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Sunburst"==data.graph_subtype){var colorList=[],colorlength=data.x_axisdata.length,backRGB=color_value,colorList=[];colorList.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colorList[colorList.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colorList.push(newHex)}var update={values:[data.second_columndata],labels:[data.y_axisdata],parents:[data.x_axisdata],ids:[data.sunburst_id],branchvalues:"total",marker:{colors:colorList}};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.y_axisdata),tabledata.push(data.x_axisdata),tabledata.push(data.second_columndata)}else if("Angular_Gauge"==data.graph_subtype){let t=id6.replace("card",""),a=JSON.parse($("#"+id6).attr("data-data"));a[0].value=data.value;let e="",o="";$("#"+t+"gaugeModalSaveButton").each(function(){let{dataValue:t,gaugeBarColor:l}=returnGaugeColor($(this),a);e=t,o=l}),color_value=""!=o?o:"darkgoldenrod";let l=[];if($("#"+t+"gaugeModalRangeSaveButton").each(function(){let{dataValue:t}=returnGaugeColorRange($(this),a);l=t}),NaN!=parseInt($("#"+t+"deltaGauge").val()))var update={mode:"gauge+number+delta",delta:{reference:parseInt($("#"+t+"deltaGauge").val())},value:[data.value],gauge:{axis:{range:[null,1.1*[data.value]]},bar:{color:color_value},steps:l,threshold:{line:{color:$("#"+t+"thresholdColor").val(),width:4},thickness:.75,value:$("#"+t+"threshold").val()}},x:[data.x_axisdata],y:[data.y_axisdata],second_columndata:[data.second_columndata]};else var update={value:[data.value],gauge:{axis:{range:[null,1.1*[data.value]]},bar:{color:color_value},steps:l,threshold:{line:{color:$("#"+t+"thresholdColor").val(),width:4},thickness:.75,value:$("#"+t+"threshold").val()}},x:[data.x_axisdata],y:[data.y_axisdata],second_columndata:[data.second_columndata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata)}else if("Bullet_Gauge"==data.graph_subtype){let t=id6.replace("card",""),a=JSON.parse($("#"+id6).attr("data-data"));a[0].value=data.value;let e="",o="";$("#"+t+"gaugeModalSaveButton").each(function(){let{dataValue:t,gaugeBarColor:l}=returnGaugeColor($(this),a);e=t,o=l}),color_value=""!=o?o:"darkgoldenrod";let l=[];if($("#"+t+"gaugeModalRangeSaveButton").each(function(){let{dataValue:t}=returnGaugeColorRange($(this),a);l=t}),NaN!=parseInt($("#"+t+"deltaGauge").val()))var update={mode:"gauge+number+delta",delta:{reference:parseInt($("#"+t+"deltaGauge").val())},value:[data.value],gauge:{axis:{range:[null,1.1*[data.value]]},bar:{color:color_value},shape:"bullet",steps:l,threshold:{line:{color:$("#"+t+"thresholdColor").val(),width:4},thickness:.75,value:$("#"+t+"threshold").val()}},x:[data.x_axisdata],y:[data.y_axisdata],second_columndata:[data.second_columndata]};else var update={value:[data.value],gauge:{axis:{range:[null,1.1*[data.value]]},bar:{color:color_value},shape:"bullet",steps:l,threshold:{line:{color:$("#"+t+"thresholdColor").val(),width:4},thickness:.75,value:$("#"+t+"threshold").val()}},x:[data.x_axisdata],y:[data.y_axisdata],second_columndata:[data.second_columndata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata)}else if("Treemap"==data.graph_subtype){var colorlength=data.x_axisdata.length,colordata=data.colordata,parentsList=[];for(let t=0;t<colorlength;t++)parentsList.push("");var backRGB=color_value,colorList=[];colorList.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colorList[colorList.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colorList.push(newHex)}var update={parents:[parentsList],values:[data.y_axisdata],labels:[data.x_axisdata],marker:{colors:colorList}};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Vertical_Line_Stacked"==data.graph_subtype){var x_array=JSON.parse(JSON.stringify(data.x_axisdata));x_array.sort(),arrayEquals(x_array,sorted_array)||(new_sorted_array=x_array);var update={x:[data.x_axisdata],y:[data.y_axisdata],text:[data.second_columndata]},update2={x:[data.x_axisdata],y:[data.second_columndata],text:[data.second_columndata]};Plotly.restyle(tester,update,[0]),Plotly.restyle(tester,update2,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata)}else if("Vertical_Grouped_Box"==data.graph_subtype||"Vertical_Grouped_Violin"==data.graph_subtype||"Vertical_Area_Stacked"==data.graph_subtype){var update={x:[data.x_axisdata],y:[data.y_axisdata],text:[data.y_axisdata]},update2={x:[data.x_axisdata],y:[data.second_columndata],text:[data.second_columndata]};Plotly.restyle(tester,update,[0]),Plotly.restyle(tester,update2,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata)}else if("Horizontal_Histogram"==data.graph_subtype){var colorlength=data.x_axisdata.length
;if("yes"==filter_gradient_color)var colordata=gradient_filter(color_value,colorlength);else var colordata=color_value;var update={y:[data.x_axisdata],marker:{color:colordata}};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`];tabledata.push(data.y_axisdata)}else if("2D_Histogram_Contour"==data.graph_subtype){var update={x:[data.x_axisdata],y:[data.y_axisdata],colorscale:[data.colordata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Stacked_Histogram"==data.graph_subtype){var newcolor=rgb2hex(r,g,b),update={x:[data.x_axisdata]};Plotly.restyle(tester,update,[0]);var update2={x:[data.y_axisdata]};Plotly.restyle(tester,update2,[1]);var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Cumulative_Histogram"==data.graph_subtype){var colorlength=data.x_axisdata.length;if("yes"==filter_gradient_color)var colordata=gradient_filter(color_value,colorlength);else var colordata=color_value;var update={x:[data.x_axisdata],marker:{color:colordata}};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata)}else if("Horizontal_Bar_Stacked"==data.graph_subtype||"Horizontal_Bar_Grouped"==data.graph_subtype){var y_array=JSON.parse(JSON.stringify(data.y_axisdata));y_array.sort(),arrayEquals(y_array,sorted_array)||(new_sorted_array=y_array);for(var colorlength=data.y_axisdata.length,color_update=[],i=0;i<data.x_axisdata.length;i++){color_update=[];for(let t=0;t<colorlength;t++)color_update.push(color_value);var update={x:[data.x_axisdata[i]],y:[data.y_axisdata],text:[data.x_axisdata[i]],marker:{color:color_update}},colorList1=[];colorList1.push(color_value);var backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);color_value=newcolor,Plotly.restyle(tester,update,[i])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));for(var tableheaders=[],new_x_axis=eval(data.new_x_axis),i=0;i<new_x_axis.length;i++)tableheaders.push(fieldToVerbose(data.new_x_axis[i],data.mappingDict));tableheaders.push(`${fieldToVerbose(data.y_axis,data.mappingDict)}`);for(var tabledata=[],i=0;i<data.x_axisdata.length;i++)tabledata.push(data.x_axisdata[i]);tabledata.push(data.y_axisdata)}else if("Horizontal_Grouped_Box"==data.graph_subtype||"Horizontal_Grouped_Violin"==data.graph_subtype||"Horizontal_Area_Stacked"==data.graph_subtype){var update={x:[data.x_axisdata],y:[data.y_axisdata],text:[data.x_axisdata]},update2={x:[data.second_columndata],y:[data.y_axisdata],text:[data.second_columndata]};Plotly.restyle(tester,update,[0]),Plotly.restyle(tester,update2,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.second_columndata),tabledata.push(data.y_axisdata)}else if("Funnel_Stacked"==data.graph_subtype){var colordata=[],colordatasecond=[],colorlength=data.x_axisdata.length,backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.9*t(backRGB)[0],g=.9*t(backRGB)[1],b=.9*t(backRGB)[2],newcolor=rgb2hex(r,g,b);for(let t=0;t<colorlength;t++)colordata.push(backRGB);for(let t=0;t<colorlength;t++)colordatasecond.push(newcolor);var update={x:[data.x_axisdata],y:[data.y_axisdata],marker:{color:colordata}},update2={x:[data.second_columndata],y:[data.y_axisdata],marker:{color:colordatasecond}};Plotly.restyle(tester,update,[0]),Plotly.restyle(tester,update2,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.second_columndata),tabledata.push(data.y_axisdata)}else if("Horizontal_Bar"==data.graph_subtype){var y_array=JSON.parse(JSON.stringify(data.y_axisdata));y_array.sort(),arrayEquals(y_array,sorted_array)||(new_sorted_array=y_array);var colorlength=data.x_axisdata.length;if("yes"==filter_gradient_color)var colordata=gradient_filter(color_value,colorlength);else var colordata=color_value;var update={x:[data.x_axisdata],y:[data.y_axisdata],marker:{color:colordata},text:[data.x_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata=[];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Horizontal_Area"==data.graph_subtype){var y_array=JSON.parse(JSON.stringify(data.y_axisdata));y_array.sort(),arrayEquals(y_array,sorted_array)||(new_sorted_array=y_array);var update={x:[data.x_axisdata],y:[data.y_axisdata],marker:{color:color_value},text:[data.x_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata=[];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Vertical_Bar_Stacked"==data.graph_subtype||"Vertical_Bar_Grouped"==data.graph_subtype||"Multiple_Line_Chart"==data.graph_subtype){var x_array=JSON.parse(JSON.stringify(data.x_axisdata));x_array.sort(),arrayEquals(x_array,sorted_array)||(new_sorted_array=x_array);for(var colorlength=data.x_axisdata.length,color_update=[],i=0;i<data.y_axisdata.length;i++){color_update=[];for(let t=0;t<colorlength;t++)color_update.push(color_value);var update={x:[data.x_axisdata],y:[data.y_axisdata[i]],text:[data.y_axisdata[i]],marker:{color:color_update}},colorList1=[];colorList1.push(color_value);var backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);color_value=newcolor,Plotly.restyle(tester,update,[i])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));for(var tableheaders=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`],new_y_axis=eval(data.new_y_axis),i=0;i<new_y_axis.length;i++)tableheaders.push(fieldToVerbose(data.new_y_axis[i],data.mappingDict));var tabledata=[];tabledata.push(data.x_axisdata);for(var i=0;i<data.y_axisdata.length;i++)tabledata.push(data.y_axisdata[i])}else if("Scatter_with_Straight_Lines_and_Markers"==data.graph_subtype){var x_array=JSON.parse(JSON.stringify(data.x_axisdata));x_array.sort(),arrayEquals(x_array,sorted_array)||(new_sorted_array=x_array);var colordata=[];for(let t=0;t<data.x_axisdata.length;t++)colordata.push(color_value);var update={x:[data.x_axisdata],y:[data.y_axisdata],text:[data.y_axisdata],marker:{color:colordata},line:{color:color_value,width:2}};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata=[];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else if("Horizontal_Dot_Plot"==data.graph_subtype||"Scatter"==data.graph_subtype){var y_array=JSON.parse(JSON.stringify(data.y_axisdata));y_array.sort(),arrayEquals(y_array,sorted_array)||(new_sorted_array=y_array);var colordata=[],new_colordata=[],new_x_axislist=[];if("yes"==filter_gradient_color){for(let t=0;t<data.x_axisdata.length;t++){var backRGB=color_value;0==new_x_axislist.includes(data.x_axisdata[t])&&new_x_axislist.push(data.x_axisdata[t])}var backRGB=color_value;new_colordata.push(backRGB);for(let t=0;t<new_x_axislist.length-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(new_colordata[new_colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));new_colordata.push(newHex)}for(let t=0;t<data.x_axisdata.length;t++)colordata.push(new_colordata[new_x_axislist.indexOf(data.x_axisdata[t])])}else for(let t=0;t<data.x_axisdata.length;t++)colordata.push(color_value);var update={x:[data.x_axisdata],y:[data.y_axisdata],text:[data.y_axisdata],marker:{color:colordata}};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata=[];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata)}else{var colorlength=data.x_axisdata.length;if("yes"==filter_gradient_color)var colordata=gradient_filter(color_value,colorlength);else var colordata=color_value;var update={x:[data.x_axisdata],y:[data.y_axisdata],marker:{color:colordata},text:[data.y_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata=[];if(tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),$(`#${idOrderModal}Button`).length){var x_array=JSON.parse(JSON.stringify(data.x_axisdata));x_array.sort(),arrayEquals(x_array,sorted_array)||(new_sorted_array=x_array)}}$(`#${idOrderModal}Button`).length&&($(`#${idOrderModal}Button`).attr("data-sorted-values",new_sorted_array),updateChart(id6,$(`#${idOrderModal}Button`).attr("data-sorted-values"))),$("#"+$("#"+id6).parent().attr("id")).find(".charts").each(function(){"Bubble_Chart"==$(this).attr("data-subtype")?$(this).attr("data-table_name")==tableName&&$(this).find("path").css("opacity",.7):$(this).attr("data-table_name")==tableName&&$(this).find("path").css("opacity",1)});var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2],datatablediv=document.getElementById(id_table),config={responsive:!0,displaylogo:!1};Plotly.newPlot(datatablediv,datatable,layout2,config);const id_axis_order=data.chart_id_for_slicer+"axis_order";var val=$(`#${id_axis_order}`).val();if(val||""==val){var order_type=$(`#${id_axis_order}`).attr("order_type");let t=JSON.parse($(`#${id_axis_order}`).attr("datatype_dict"));var old_layout=$("#"+id6).attr("data-layout");old_layout=JSON.parse(old_layout);var layout=JSON.parse(JSON.stringify(old_layout));"Vertical"==order_type?"DateField"!=t[data.x_axis]&&"DateTimeField"!=t[data.x_axis]||changeAxisType(val,order_type,tester,old_layout,layout,id6):"Horizontal"==order_type&&("DateField"!=t[data.y_axis]&&"DateTimeField"!=t[data.y_axis]||changeAxisType(val,order_type,tester,old_layout,layout,id6))}},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}try{$(".modalgraphs").each(function(){$(this)[0].style.display="none"})}finally{}let chartDivId=existingDivId;""===String(existingDivId)&&(chartDivId=(data.chartDivId+Math.random()).replace(".","").replace(/\s/g,""));let graph_subtype=data.graph_subtype,pivot_report_data=data.pivot_report_data,x_axis=data.x_axis,operation=data.operation,operation_line=plotDict.operation_line,e_id=data.e_id,y_axis=data.y_axis,second_column=data.second_column,tableName=plotDict.tableName,operation_n=plotDict.operation_n,computed_number=plotDict.computed_number,is_title=plotDict.is_title,title_value=plotDict.title_value,total_y=plotDict.total_y,total_L=plotDict.total_L,agg_distinct=plotDict.agg_distinct,id_axis_order=chartDivId+"axis_order",img_icon=plotDict.img_icon,id=chartDivId,id1=chartDivId+"color",id2=chartDivId+"x_range",id3=chartDivId+"y_range",id4=chartDivId+"color2",id5=chartDivId+"cancel",id6=chartDivId+"card";$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);let id7=chartDivId+"modal",id8=chartDivId+"edit",id9=chartDivId+"gridlines",id10=chartDivId+"modalclose",id11=chartDivId+"xtitle",id12=chartDivId+"ytitle",id13=chartDivId+"labeledit",id14=chartDivId+"legend1",id15=chartDivId+"legend2",id16=chartDivId+"tabbutton",id17=chartDivId+"tabdropdown",id18=chartDivId+"resetlabels",id19=chartDivId+"hiddendiv",id20=chartDivId+"slicerConfig",id21=chartDivId+"interaction",id23=chartDivId+"visualtization",id24=chartDivId+"gradient_color",id22=chartDivId+"main_bgcolor",id25=chartDivId+"threshold",id26=chartDivId+"thresholdColor",id27=chartDivId+"deltaGauge",idOrderModal=chartDivId+"orderModal",idGaugeModal=chartDivId+"gaugeModal",id_agg_title=chartDivId+"id_agg_title",id_labels=chartDivId+"labels",id_table=chartDivId+"table",id_tableshow=chartDivId+"id_tableshow",id_tabledownload=chartDivId+"id_tabledownload",id_table_export=chartDivId+"id_table_export",id_tableicon=chartDivId+"id_tableicon",id_filter=chartDivId+"filter",id_filter_button=chartDivId+"filter_button",id_filter_close=chartDivId+"filter_close",id_filter_container=chartDivId+"filter_container",tabSlicerId=slicerColumnId,id_showlabel=chartDivId+"show_label",id_position_legends=chartDivId+"position_legends",id_label_placement=chartDivId+"label_placement",id_shadow=chartDivId+"id_shadow",id_shadow_color=chartDivId+"id_shadow_color",id_xshadow=chartDivId+"id_xshadow",id_yshadow=chartDivId+"id_yshadow",id_blurshadow=chartDivId+"id_blurshadow",id_shadow_thickness=chartDivId+"id_shadow_thickness",id_border=chartDivId+"id_border",id_border_color=chartDivId+"id_border_color",id_border_thickness=chartDivId+"id_border_thickness",id_border_style=chartDivId+"id_border_style",id_header=chartDivId+"chart_header",id_body=chartDivId+"chart_body",id_header_bgcolor=chartDivId+"header_bgcolor",id_header_color=chartDivId+"header_color",id_header_fontsize=chartDivId+"header_font_size",id_header_fontweight=chartDivId+"header_font_weight",id_header_fontstyle=chartDivId+"header_font_style",id_label_fontsize=chartDivId+"label_font_size",id_label_color=chartDivId+"label_color",id_header_alignment=chartDivId+"header_alignment",id_condition_modal_edit=chartDivId+"conditional_modal_edit",id_columnAlignmentModal_edit=chartDivId+"columnAlignmentModal_edit",id_freeze_pane=chartDivId+"freeze_pane",id_condition=chartDivId+"conditional_modal",id_condition_container=chartDivId+"conditional_modal_body",id_condition_close=chartDivId+"conditional_modal_close",id_change_conditional_config=chartDivId+"change_conditional_config",id_change_freeze_config=chartDivId+"freeze_pane_config",id_img_icon=chartDivId+"img_icon",id_optionvalues=chartDivId+"optionvalues",id_optionvalues_line=chartDivId+"optionvalues_line",id_configure_pivot_charttype=chartDivId+"_configure_pivot_charttype",id_configure_pivot_operation=chartDivId+"_configure_pivot_operation",id_tableColunm_Rearrange=chartDivId+"colunm_Rearrange",id_tableColunm_Rearrange_ul=chartDivId+"colunm_Rearrange_ul",id_tableColunm_Rearrange_checkbox=chartDivId+"colunm_Rearrange_checkbox",id_tableColunm_Rearrange_div=chartDivId+"colunm_Rearrange_div",id_nestedtableColunm_Rearrange=chartDivId+"nestedTable_colunm_Rearrange",id_nestedtableColunm_Rearrange_ul=chartDivId+"nestedcolunm_Rearrange_ul",id_nestedtableColunm_Rearrange_checkbox=chartDivId+"nestedcolunm_Rearrange_checkbox",id_nestedtableColunm_Rearrange_div=chartDivId+"nestedcolunm_Rearrange_div",id_HighlightColHeaders=chartDivId+"HighlightColHeaders",id_saveBtn_HighlightColHeaders=chartDivId+"saveBtn_HighlightColHeaders",id_HighlightColHeaders_checkbox=chartDivId+"HighlightColHeaders_checkbox",id_HighlightColHeaders_div=chartDivId+"HighlightColHeaders_div",id_HighlightColHeaders_ul=chartDivId+"HighlightColHeaders_ul",plotList=[],filterModal="",header_bgcolor=$(".global_header_bgcolor").val(),width="",height="",styletop="",left="",chartheader="",header_color="",header_fontsize="",header_fontweight="",header_fontstyle="",header_alignment="",label_color="",label_fontsize="",highlightcolumnheaderscolorlist,chart_height=508.48,chart_width=402.68492699999996,chart_bg_color=$(".themeColor").val(),chart_color=$(".themeColor1").val(),global_gradient="no",id_columnAlignmentModal=chartDivId+"columnAlignmentModalID",id_selectGlobalHeaderColumnAlignment=chartDivId+"selectGlobalHeaderColumnAlignment",id_selectGlobalContentColumnAlignment=chartDivId+"selectGlobalContentColumnAlignment",id_selectColumnAlignment=chartDivId+"selectColumnAlignment",id_ColumnAlignmentContainer=chartDivId+"ColumnAlignmentContainer",id_applyColumnAlignmentButton=chartDivId+"applyColumnAlignmentButton",id_FormattersModal_container=chartDivId+"formatters_modal_body",id_Formatters_edit=chartDivId+"Formatters_edit",id_FormattersModal_close=chartDivId+"formatters_modal_close",id_addFormatter=chartDivId+"addFormatter",id_FormattersModal=chartDivId+"id_FormattersModalID",id_FormattersModal_config=chartDivId+"applyFormattersButton",id_closeColumnAlignmentButton=chartDivId+"closeColumnAlignmentButton";Object.keys(slicerTabConfigDict).includes(slicerColumnId)?(plotList=slicerTabConfigDict[slicerColumnId],plotList.push(id6)):plotList.push(id6),slicerTabConfigDict[slicerColumnId]=plotList,slicerChangeUpdatePlots(app_code_),plotList=[],void 0===data.plotDict?(Object.keys(crossFilterDict1).includes(plotDict.tabNameID)?(plotList=crossFilterDict1[plotDict.tabNameID],plotList.push({id:chartDivId,plot_type:graph_subtype})):plotList.push({id:chartDivId,plot_type:graph_subtype}),crossFilterDict1[plotDict.tabNameID]=plotList):(Object.keys(crossFilterDict1).includes(data.plotDict.tab_id)?(plotList=crossFilterDict1[data.plotDict.tab_id],plotList.push({id:chartDivId,plot_type:graph_subtype})):plotList.push({id:chartDivId,plot_type:graph_subtype}),crossFilterDict1[data.plotDict.tab_id]=plotList),0==Object.keys(slicerTabConnectDict).includes(id6)&&(slicerTabConnectDict[id6]=[]),filterModal=$(` \n          <div class="modal-dialog modalgraphs modal-full-height modal-right" id="${id_filter}" data-chart_id="${id}" data-graph_subtype="${graph_subtype}" data-x_axis="${data.x_axis}" data-y_axis="${data.y_axis}" data-second_column="" data-operation="${plotDict.operation}" data-containerID="${id}" data-table_name="${plotDict.tableName}" role="document" style="display:none;float:right;  position: absolute;\n          right: 0 ;top : 10px;z-index: 1050">               \n          <div class="modal-content" style="width:23rem">\n          <div class="modal-header" style="background:#565a5e; color:white; text-align:center;padding-bottom:2%;padding-top:3%;">\n          <span class="modal-title w-100" id="myModalLabel" style="font-size:1.2rem">Filter</span>\n          <button type="button" class="close" data-dismiss="modal" id="${id_filter_close}" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n          </button>\n          </div>\n          <div class="modal-body" id="${id_filter_container}" style="max-height:26rem;overflow:auto">\n          </div>\n          </div>\n          </div>\n          `)
;let conditionalModal=$(`\n          <div class="modal-dialog modal-lg modalgraphs modal-full-height modal-right" id="${id_condition}" data-chart_id="${id}" data-graph_subtype="${graph_subtype}" data-x_axis="${data.x_axis}" data-y_axis="${data.y_axis}" data-second_column="" data-operation="${plotDict.operation}" data-containerID="${id}" data-table_name="${plotDict.tableName}" role="document" style="display:none;float:right;  position: absolute;\n          right: 0 ;top : 10px;z-index: 1050">\n          <div class="modal-content" style="width:42rem">\n          <div class="modal-header" style="background:#565a5e; color:white; text-align:center;padding-bottom:2%;padding-top:3%;">\n          <span class="modal-title w-100" id="myModalLabel" style="font-size:1.2rem">Conditional Formatting</span>\n          <button type="button" class="close" data-dismiss="modal" id="${id_condition_close}" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n          </div>\n          <div class="modal-body conditional_data_body_edit" id="${id_condition_container}" style="max-height:26rem;overflow:auto"> \n          </div>\n          <div class="modal-footer"><button type="button" id="${id_change_conditional_config}" class="btn btn-primary btn-xs rounded px-2">Apply</button></div>\n          </div>\n          </div>\n          `),columnAlignmentModal=$(`\n          <div class="modal-dialog modal-lg modalgraphs modal-full-height modal-right" \n          id="${id_columnAlignmentModal}" data-chart_id="${id}" data-graph_subtype="${graph_subtype}" data-x_axis="${data.x_axis}" data-y_axis="${data.y_axis}" data-second_column="" data-operation="${plotDict.operation}" data-containerID="${id}" data-table_name="${plotDict.tableName}" role="document" style="display:none;float:right;  position: absolute;right: 0 ;top : 10px;z-index: 1050;width:100%">\n          <div class="modal-content">\n                      <div class="modal-header" style="background:#565a5e; color:white; text-align:center;padding-bottom:2%;padding-top:3%;">\n                        <h6 class="modal-title" style="margin-left:auto;">Configure Column Alignment</h6>\n                        <button type="button" class="close" id="${id_closeColumnAlignmentButton}">&times;</button>\n                      </div>\n                      <div class="modal-body" style="overflow: scroll;">\n                        <div class="accordion" id="accordionColumnAlignmentCreateView">\n                          <div class="card">\n                            <div class="card-body">\n                              <div class="row">\n                                <div class="col-6">\n                                  <label>Global Header Alignment:</label>\n                                  <select class="select2 form-control selectGlobalHeaderColumnAlignment" id="${id_selectGlobalHeaderColumnAlignment}">\n                                    <option value="left">Left</option>\n                                    <option value="center" selected>Center</option>\n                                    <option value="right">Right</option>\n                                  </select>\n                                </div>\n                                <div class="col-6">\n                                  <label>Global Content Alignment:</label>\n                                  <select class="select2 form-control selectGlobalContentColumnAlignment" id="${id_selectGlobalContentColumnAlignment}">\n                                    <option value="left">Left</option>\n                                    <option value="center" selected>Center</option>\n                                    <option value="right">Right</option>\n                                  </select>\n                                </div>\n                              </div>\n                              <hr>\n                              <br>\n                              <div class="row">\n                                <div class="col-6">\n                                  <label>Select Column:</label>\n                                  <select class="select2 form-control selectColumnAlignment" \n                                  id="${id_selectColumnAlignment}">\n                                    <option value="">Select Column</option>\n                                  </select>\n                                </div>\n                              </div>\n                              <hr>\n                              <br>\n                              <div class="row">\n                                <div class="col-4"><strong>Field</strong></div>\n                                <div class="col-4"><strong>Header Alignment</strong></div>\n                                <div class="col-4"><strong>Content Alignment</strong></div>\n                              </div>\n                              <br>\n                              <div class="row" id="${id_ColumnAlignmentContainer}" style="max-height: 7rem;\n                              overflow: auto;">\n\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="modal-footer">\n                        <button class="btn btn-primary" type="button" id="${id_applyColumnAlignmentButton}">Apply</button>\n                      </div>\n                    </div>\n          </div>\n          `),FormattersModal=$(`\n          <div class="modal-dialog modal-lg modalgraphs modal-full-height modal-right" id="${id_FormattersModal}" data-chart_id="${id}" data-graph_subtype="${graph_subtype}" data-x_axis="${data.x_axis}" data-y_axis="${data.y_axis}" data-second_column="" data-operation="${plotDict.operation}" data-containerID="${id}" data-table_name="${plotDict.tableName}" role="document" style="display:none;float:right;  position: absolute;\n          right: 0 ;top : 10px;z-index: 1050">\n            <div class="modal-content" style="width:42rem">\n              <div class="modal-header" style="background:#565a5e; color:white; text-align:center;padding-bottom:2%;padding-top:3%;">\n                <span class="modal-title w-100" id="myModalLabel" style="font-size:1.2rem">Formatters</span>\n                <button type="button" class="close" data-dismiss="modal" id="${id_FormattersModal_close}" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n              </div>\n              <div class="modal-body formatters_data_body_edit" id="${id_FormattersModal_container}" style="max-height:26rem;overflow:auto"> \n                <div>\n                  <i class="fa-solid fa-plus fa-2x" id="${id_addFormatter}" data-toggle="tooltip" title="Add Formatter"></i>\n                </div>\n              </div>\n              <div class="modal-footer"><button type="button" id="${id_FormattersModal_config}" class="btn btn-primary btn-xs rounded px-2">Apply</button></div>\n            </div>\n          </div>\n          `),freezeModal=$(`\n          <div class="modal-dialog modal-lg modalgraphs modal-full-height modal-right" id="freeze_pane_modal_${chartDivId}" data-chart_id="${id}" data-graph_subtype="${graph_subtype}" data-x_axis="${data.x_axis}" data-y_axis="${data.y_axis}" data-second_column="" data-operation="${plotDict.operation}" data-containerID="${id}" data-table_name="${plotDict.tableName}" role="document" style="display:none;float:right;  position: absolute;\n          right: 0 ;top : 10px;z-index: 1050">\n          <div class="modal-content" style="width:20rem">\n          <div class="modal-header" style="background:#565a5e; color:white; text-align:center;padding-bottom:2%;padding-top:3%;">\n          <span class="modal-title w-100" id="myModalLabel" style="font-size:1.2rem">Freeze Panes</span>\n          <button type="button" class="close" data-dismiss="modal" id="freeze_pane_close_${chartDivId}" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n          </div>\n          <div class="modal-body conditional_data_body_edit" id="freeze_pane_body_${chartDivId}" style="max-height:26rem;overflow:auto">\n          <label style="text-align: center;">Choose from which side :</label>\n          <div style="display: flex;flex-direction: row;align-content: space-between;justify-content: space-around;align-items: center;margin-top: 33px;">\n          <div class="custom-control custom-checkbox"><input type="checkbox" id="freezeprev_left_${chartDivId}" data-elementID="${chartDivId}" name="leftchart_${element_id}"  class="freezerunCheckbox checkboxinput custom-control-input" value="left"><label for="freezeprev_left_${chartDivId}" class="custom-control-label"> Left </label><br>\n          </div>\n          <div class="custom-control custom-checkbox">\n          <input type="checkbox" id="freezeprev_right_${chartDivId}" data-elementID="${chartDivId}" name="rightchart_${element_id}" class="freezerunCheckbox checkboxinput custom-control-input" value="right">\n          <label for="freezeprev_right_${chartDivId}" class="custom-control-label"> Right </label><br></div></div></div>\n          <div class="modal-footer">\n          <button type="button" id="apply_unfreezepane_${chartDivId}" class="btn btn-primary btn-xs rounded px-2">Unfreeze</button>\n          <button type="button" id="apply_freezepane_${chartDivId}" class="btn btn-primary btn-xs rounded px-2">Freeze</button></div>\n          </div>\n          </div>\n          `),gaugeModal=$(`\n          <div class="modal-dialog modal-lg modalgraphs modal-full-height modal-right" id="${idGaugeModal}" data-chart_id="${id}" data-graph_subtype="${graph_subtype}" data-x_axis="${data.value}" data-second_column="" data-operation="${plotDict.operation}" data-containerID="${id}" data-table_name="${plotDict.tableName}" role="document" style="display:none;float:right;  position: absolute;\n          right: 0 ;top : 10px;z-index: 1050">\n\n\n          <div class="modal-content" style="width:42rem">\n          <div class="modal-header" style="background:#565a5e; color:white; text-align:center;padding-bottom:2%;padding-top:3%;">\n          <span class="modal-title w-100" id="myModalLabel" style="font-size:1.2rem">Conditional Formatting</span>\n          <button type="button" class="close" data-modal_id="${idGaugeModal}" data-dismiss="modal" onclick="closeGaugeModal.call(this)" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n          </button>\n          </div>\n          <div class="modal-body conditional_data_body_edit"  style="max-height:26rem;">\n              <i class="fa fa-plus-square fa-2x" data-toggle="tooltip" data-modal_id="${idGaugeModal}" title="" onclick="addIndCondition.call(this)" style="margin-left:97%;width:100%;color:darkgoldenrod;cursor: pointer;" data-tooltip="Add condition"></i>\n          </div>\n          <div class="modal-footer">\n              <button type="button" id="${idGaugeModal}SaveButton" class="btn btn-primary btn-xs rounded px-2">Apply</button>\n          </div>\n          </div>\n          </div>\n          `),gaugeModalRange=$(`\n\n          <div class="modal-dialog modal-lg modalgraphs modal-full-height modal-right" id="${idGaugeModal}Range" data-chart_id="${id}" data-graph_subtype="${graph_subtype}" data-x_axis="${data.value}" data-second_column="" data-operation="${plotDict.operation}" data-containerID="${id}" data-table_name="${plotDict.tableName}" role="document" style="display:none;float:right;  position: absolute;\n          right: 0 ;top : 10px;z-index: 1050">\n\n\n          <div class="modal-content" style="width:42rem">\n          <div class="modal-header" style="background:#565a5e; color:white; text-align:center;padding-bottom:2%;padding-top:3%;">\n          <span class="modal-title w-100" id="myModalLabel" style="font-size:1.2rem">Range Based Formatting</span>\n          <button type="button" class="close" data-modal_id="${idGaugeModal}Range" data-dismiss="modal" onclick="closeGaugeModal.call(this)" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n          </button>\n          </div>\n          <div class="modal-body conditional_data_body_edit"  style="max-height:26rem;">\n              <i class="fa fa-plus-square fa-2x" data-toggle="tooltip" data-modal_id="${idGaugeModal}Range" title="" onclick="addIndConditionRange.call(this)" style="margin-left:97%;width:100%;color:darkgoldenrod;cursor: pointer;" data-tooltip="Add condition"></i>\n          </div>\n          <div class="modal-footer">\n              <button type="button" id="${idGaugeModal}RangeSaveButton" class="btn btn-primary btn-xs rounded px-2">Apply</button>\n          </div>\n          </div>\n          </div>\n          `),displaySetting="inline-block";disable&&(displaySetting="none");let orderModal=$(`\n          <div class="modal-dialog modal-lg modalgraphs modal-full-height modal-right" id="${idOrderModal}" data-chart_id="${id}" data-graph_subtype="${graph_subtype}" data-x_axis="${data.x_axisdata}" data-y_axis="${data.y_axisdata}" data-second_column="" data-operation="${plotDict.operation}" data-containerID="${id}" data-table_name="${plotDict.tableName}" role="document" style="display:none;float:right;  position: absolute;\n          left: 0 ;top : 10px;z-index: 1100">\n\n\n          <div class="modal-content" style="width:42rem">\n          <div class="modal-header" style="background:#565a5e; color:white; text-align:center;padding-bottom:2%;padding-top:3%;">\n          <span class="modal-title w-100" id="myModalLabel" style="font-size:1.2rem">Set preferred order</span>\n          <button type="button" class="close" data-modal_id="${idOrderModal}" data-dismiss="modal" onclick="closeOrderModal.call(this)" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n          </button>\n          </div>\n          <div class="modal-body conditional_data_body_edit"  style="max-height:26rem;">\n          <div class="card">\n            <div class="card-body " style="max-height:26rem; overflow-y:scroll; overflow-x: scroll; max-width:100%;">\n              <table id="${idOrderModal}Table" class="display" style="width:100%;overflow-x: scroll;overflow-y:scroll;">\n                <thead style="border-bottom:1px solid var(--primary-color)">\n                  <tr style="text-align:center">\n                    <th>Column value</th>\n                    <th>Column order</th>\n                  </tr>\n                </thead>\n                <tbody style="height: 80px;border-bottom:1px solid var(--primary-color);">\n                </tbody>\n              </table>\n            </div>\n          </div>\n              </div>\n          <div class="modal-footer">\n              <button type="button" id="${idOrderModal}SaveButton" data-modal_id="${idOrderModal}" class="btn btn-primary btn-xs rounded px-2" onclick="saveOrderModal.call(this)" mappingDict = '${JSON.stringify(data.mappingDict)}'>Save</button>\n          </div>\n          </div>\n          </div>\n          `),outerCard="";void 0===data.plotDict?(header_bgcolor=null==$(".global_header_bgcolor").val()?"#ffffff":$(".global_header_bgcolor").val(),header_color=null==$(".global_header_color").val()?"#000000":$(".global_header_color").val(),header_fontsize=$(".global_header_fontsize").val()+"px !important",null==$(".global_header_fontsize").val()&&(header_fontsize="16px"),header_fontweight=$(".global_header_fontweight").val()+" !important",null==$(".global_header_fontweight").val()&&(header_fontweight=700),header_fontstyle=$(".global_header_fontstyle").val(),null==header_fontstyle&&(header_fontstyle="Arial"),header_alignment=$(".global_header_alignment").val(),null==header_alignment&&(header_alignment="left"),label_color="#000000",label_fontsize="16",outerCard=$(`<div class="card col-5 m-4 charts" app_code="${app_code_}" id="${id6}" style="position:absolute;height:560px;padding:0px;overflow:hidden;">\n              <div class="card-header" id="${id_header}" style="padding:0.2rem 0.2rem; margin : 0.2 rem;background-color:${header_bgcolor};color:${header_color};">\n              <div class="row">\n              <div class = "col-md-10"  style = "padding-right: 0.1rem">\n              <h5 class"card-title" style="margin-top: 0.5rem; line-height: 1.2;font-size:${header_fontsize};font-weight:${header_fontweight};font-family:${header_fontstyle};text-align:${header_alignment}">&nbsp;<span class="contentEditable">${data.chartHeader}</span></h5>  </div>\n              <div class="col-md-1 handle_for_draggable_charts" style="padding-top: 0.5rem;"><i class="fa fa-arrows fa-lg"></i></div>\n              <div class = "col-md-1" style = "padding-left:0px; padding-right: 1rem;padding-top: 0.5rem">\n                  <div class="dropdown">\n                      <i class="fa fa-cog" style="font-size:20px; display:${displaySetting};" data-event="hover" data-id_parent="${id6}" onmouseover="overflowContainer.call(this)"></i>\n              <div class="dropdown-content" style="top: 1.5rem; right:0.0rem">\n              <div class="row" style="font-size:1rem; padding-left:0.65rem" id="${id8}"> <button data-id="${id7}" data-id_parent="${id6}" onclick="overflowContainer.call(this)" type="button" style="border-width:0px;padding: 1px 1px;background-color: white;"> &nbsp; <i class="fa fa-edit fa-lg"  id="${id8}" style="font-size:1.3rem;padding-top: 0.1rem;color:var(--primary-color,var(--primary,darkgoldenrod))"></i> Configure</button></div>\n              <div class="row" style="font-size:1rem; padding-left:0.65rem" id="${id_tableshow}"> <button data-id="${id7}" data-id_parent="${id6}" onclick="overflowContainer.call(this)" type="button" style="border-width:0px;padding: 1px 1px;background-color: white;"> &nbsp; <i class="fa fa-table fa-lg" style="font-size:1.3rem;padding-top: 0.5rem;color:var(--primary-color,var(--primary,darkgoldenrod))"></i> <span id="${id_tableicon}" style="padding-left:0.2em;"> Table</span></button></div>\n              <div class="row" id="${id5}" style="font-size:1rem; padding-left:1rem"><button data-id="${id7}" data-id_parent="${id6}" onclick="overflowContainer.call(this)" type="button" style="border-width:0px;padding: 1px 1px;background-color: white;"> &nbsp;<i class="fa fa-times fa-lg"  style="font-size:1.4rem;color:var(--primary-color,var(--primary,darkgoldenrod))"></i>&nbsp; Delete</button></div>\n              <div class="row" id="${id16}" style="font-size:1rem; padding-left:1.3rem"><div class="dropdown2-tab"><button data-id="${id17}" data-id_parent="${id6}" type="button" style="border-width:0px;padding: 1px 1px;background-color: white;"> <i class="fas fa-arrow-alt-circle-right" style="font-size:1.2rem;color:var(--primary-color,var(--primary,darkgoldenrod))"></i>&nbsp; Move </button>  <div class="dropdown2-content-tab" id = "${id17}" style="right: 8rem; top: 0rem; display:none; z-index:1100; min-width: 80px;">\n              </div>\n              </div>\n              </div>\n              <div class="row" style="font-size:1rem; padding-left:0.95rem" id="${id_filter_button}"> <button data-id="${id_filter_container}" data-id_parent="${id6}" onclick="overflowContainer.call(this)" type="button" style="border-width:0px;padding: 1px 1px;background-color: white;"> &nbsp; <i class="fas fa-filter"  id="${id_filter_button}" style="padding-top: 0.1rem;color:var(--primary-color,var(--primary,darkgoldenrod))"></i>&nbsp;&nbsp;Filter</button></div>\n              </div>\n              </div>\n              </div>\n              </div><div style="height:10px"></div></div>\n              <div class="graphcontainerdiv"><div class="card-body-graph" id="${id}"></div>\n              </div>\n              <div class="tablecontainerdiv">\n              <div style="width:100%;">\n              <div class="row" style="margin-left:0.5em;"> \n              <div style="display: inline-block;">\n              <button id="${id_tabledownload}" type="button" class="btn btn-primary btn-xs mx-2 mt-2 rounded px-2" style="display:none"><i class="fa fa-download mt-1" style="padding-right:0.5em;"></i>Export</button>\n              </div>\n              <div style="display: inline-block;">\n              <button type="button" data-chart_id="${id}" data-slicer_id="${slicerColumnId}" data-chart_header="${data.chartHeader}" id="${id_table_export}" class="btn btn-primary export_data btn-xs mx-2 mt-2 rounded px-2" style="display:none"><i class="fa fa-download mt-1" style="padding-right:0.5em;"></i>Export underlying data</button>\n              </div>\n              </div>\n              </div>\n                  <div class="card-body-table" id="${id_table}" style="display:none"></div>\n              </div>\n              </div>`),filterModal=$(`\n              <div class="modal-dialog modalgraphs modal-full-height modal-right" id="${id_filter}" data-chart_id="${id}" data-graph_subtype="${graph_subtype}" data-x_axis="${data.x_axis}" data-y_axis="${data.y_axis}" data-second_column="" data-operation="${plotDict.operation}" data-containerID="${id}" data-table_name="${plotDict.tableName}" role="document" style="display:none;float:right;  position: absolute;\n              right: 0 ;top : 10px;z-index: 1050">\n              <div class="modal-content" style="width:23rem">\n              <div class="modal-header" style="background:#565a5e; color:white; text-align:center;padding-bottom:2%;padding-top:3%;">\n              <span class="modal-title w-100" id="myModalLabel" style="font-size:1.2rem">Filter</span>\n              <button type="button" class="close" data-dismiss="modal" id="${id_filter_close}" aria-label="Close">\n              <span aria-hidden="true">&times;</span>\n              </button>\n              </div>\n              <div class="modal-body" id="${id_filter_container}" style="max-height:26rem;overflow:auto">\n              </div>\n              </div>\n              </div>\n              `)):(width=data.plotDict.width+"px",height=data.plotDict.height+"px",styletop=data.plotDict.position.top+"px",left=data.plotDict.position.left+"px",chartheader=data.plotDict.chartheader,header_bgcolor=data.plotDict.header_bgcolor,header_color=data.plotDict.header_color,label_color=data.plotDict.label_color,label_fontsize=data.plotDict.label_fontsize+"px !important",header_fontsize=data.plotDict.header_fontsize+"px !important",header_fontweight=data.plotDict.header_fontweight+" !important",header_fontstyle=data.plotDict.header_fontstyle,header_alignment=data.plotDict.header_alignment,columnAlignmentSelectedOptions=data.plotDict.columnAlignmentSelectedOptions,highlightcolumnheaderscolorlist=data.plotDict.highlightcolumnheaderscolorlist,FormattersConfiguration=data.plotDict.FormattersConfiguration,null==header_alignment&&(header_alignment="left"),null==header_bgcolor&&(header_bgcolor="#ffffff"),null==header_color&&(header_color="#000000"),null==data.plotDict.header_fontsize&&(header_fontsize="16px"),null==label_color&&(label_color="#000000"),null==data.plotDict.header_fontsize&&(label_fontsize="16px"),null==data.plotDict.header_fontweight&&(header_fontweight=700),null==header_fontstyle&&(header_fontstyle="Arial"),outerCard=$(`<div class="card charts" app_code="${app_code_}" id="${id6}" style="position:absolute;width:${width};height:${height};top:${styletop};left:${left};overflow:hidden;" highlightcolumnheaderscolorlist='${highlightcolumnheaderscolorlist}' data-column_alignment_table='${columnAlignmentSelectedOptions}' data-formatters_config_table='${FormattersConfiguration}'>\n              <div class="card-header" id="${id_header}" style="padding: 0.2rem 0.2rem; margin : 0.2 rem;background-color:${header_bgcolor};color:${header_color};">\n              <div class="row">\n              <div class = "col-md-10"  style = "padding-right: 0.1rem">\n              <h5 class"card-title" style="margin-top: 0.5rem; line-height: 1.2;font-size:${header_fontsize};font-weight:${header_fontweight};font-family:${header_fontstyle};text-align:${header_alignment}"><span class="contentEditable">${chartheader}</span></h5>  </div>\n              <div class="col-md-1 handle_for_draggable_charts" style="padding-top: 0.5rem;"><i class="fa fa-arrows fa-lg"></i></div>\n              <div class = "col-md-1" style = "padding-left:0px;padding-right: 1rem;padding-top: 0.5rem""><div class="dropdown"><i class="fa fa-cog" style="font-size:20px;display:${displaySetting};" data-event="hover" data-id_parent="${id6}" onmouseover="overflowContainer.call(this)"></i>\n              <div class="dropdown-content" style="top: 1.5rem; right:0.0rem">\n              <div class="row" style="font-size:1rem; padding-left:0.65rem" id="${id8}"> <button data-id="${id7}" data-id_parent="${id6}" onclick="overflowContainer.call(this)" type="button" style="border-width:0px;padding: 1px 1px;background-color: white;"> &nbsp; <i class="fa fa-edit fa-lg"  id="${id8}" style="font-size:1.3rem;padding-top: 0.1rem;color:var(--primary-color,var(--primary,darkgoldenrod))"></i> Configure</button></div>\n              <div class="row" style="font-size:1rem; padding-left:0.65rem" id="${id_tableshow}"> <button data-id="${id7}" data-id_parent="${id6}" onclick="overflowContainer.call(this)" type="button" style="border-width:0px;padding: 1px 1px;background-color: white;"> &nbsp; <i class="fa fa-table fa-lg" style="font-size:1.3rem;padding-top: 0.5rem;color:var(--primary-color,var(--primary,darkgoldenrod))"></i> <span id="${id_tableicon}" style="padding-left:0.2em;"> Table</span></button></div>\n              <div class="row" id="${id5}" style="font-size:1rem; padding-left:1rem"><button data-id="${id7}" data-id_parent="${id6}" onclick="overflowContainer.call(this)" type="button" style="border-width:0px;padding: 1px 1px;background-color: white;"> &nbsp;<i class="fa fa-times fa-lg"  style="font-size:1.4rem;color:var(--primary-color,var(--primary,darkgoldenrod))"></i>&nbsp; Delete</button></div>\n              <div class="row" id="${id16}" style="font-size:1rem; padding-left:1.3rem"><div class="dropdown2-tab"><button data-id="${id17}" data-id_parent="${id6}" type="button" style="border-width:0px;padding: 1px 1px;background-color: white;"> <i class="fas fa-arrow-alt-circle-right" style="font-size:1.2rem;color:var(--primary-color,var(--primary,darkgoldenrod))"></i>&nbsp; Move </button>  <div class="dropdown2-content-tab" id = "${id17}" style="right: 8rem; top: 0rem; display:none; z-index:1100; min-width: 80px;">\n              </div>\n              </div>\n              </div>\n              <div class="row" style="font-size:1rem; padding-left:0.95rem" id="${id_filter_button}"> <button data-id="${id_filter_container}" data-id_parent="${id6}" onclick="overflowContainer.call(this)" type="button" style="border-width:0px;padding: 1px 1px;background-color: white;"> &nbsp; <i class="fas fa-filter"  id="${id_filter_button}" style="padding-top: 0.1rem;color:var(--primary-color,var(--primary,darkgoldenrod))"></i>&nbsp;&nbsp;Filter</button></div>\n              </div>\n              </div>\n              </div>\n              </div><div style="height:10px"></div></div>\n              <div class="graphcontainerdiv"><div class="card-body-graph" id="${id}"></div>\n              </div>\n              <div class="tablecontainerdiv">\n              <div style="width:100%;">\n              <div style="display: inline-block;">\n              <button id="${id_tabledownload}" type="button" class="btn btn-primary btn-xs mx-2 mt-2 rounded px-2" style="display:none"><i class="fa fa-download mt-1" style="padding-right:0.5em;"></i>Export</button>\n              </div>\n              <div style="display: inline-block;">\n              <button type="button" id="${id_table_export}" data-chart_id="${id}" data-slicer_id="${slicerColumnId}" data-chart_header="${data.chartHeader}" class="btn btn-primary export_data btn-xs mx-2 mt-2 rounded px-2" style="display:none"><i class="fa fa-download mt-1" style="padding-right:0.5em;"></i>Export underlying data</button>\n              </div>\n              </div>\n              <div class="card-body-table" id="${id_table}" style="display:none"></div>\n              </div>\n              </div>`)),["Landscape","Portrait"].includes($(".chartDivSection").attr("data-layout"))&&(chart_height=502,chart_width=462),null==chart_color&&(chart_color="#b8860b"),"true"===String($(".global_gradient_color").prop("checked"))&&(global_gradient="yes");let setheaderFontHTML=`<label style="font-size:1.1rem">Set header font style:</label>\n<select class="select2" name="border_style" id="${id_header_fontstyle}" style="font-size:1.1rem" >\n<option value="">----------</option>\n<option value="Arial">Arial</option>\n<option value="Times New Roman">Times New Roman</option>\n<option value="Helvetica">Helvetica</option>\n<option value="Lucida Console">Lucida Console</option>\n<option value="Courier New">Courier New</option>\n<option value="Verdana">Verdana</option>\n<option value="Trebuchet MS">Trebuchet MS</option>\n<option value="auto">auto</option>\n<option value="emoji">emoji</option>\n<option value="cursive">cursive</option>\n<option value="inherit">inherit</option>\n<option value="initial">initial</option>\n<option value="none">none</option>\n<option value="math">math</option>\n<option value="monospace">monospace</option>\n<option value="serif">serif</option>\n<option value="fangsong">fangsong</option>\n<option value="fantasy">fantasy</option>\n<option value="revert">revert</option>\n<option value="FontAwesome">FontAwesome</option>\n<option value="system-ui">system-ui</option>\n<option value="ui-monospace">ui-monospace</option>\n<option value="-webkit-pictograph">-webkit-pictograph</option>\n<option value="-webkit-body">-webkit-body</option>\n<option value="Trebuchet MS">Trebuchet MS</option>\n<option value="Courier New">Courier New</option>\n<option value="Andale Mono">Andale Mono</option>\n<option value="Trebuchet MS">Trebuchet MS</option>\n<option value="Comic Sans MS">Comic Sans MS</option>\n</select>`,borderStylehtml=`<select class="select2" name="border_style" id="${id_header_fontweight}" style="font-size:1.1rem" >\n<option value="100">100</option>\n<option value="200">200</option>\n<option value="300">300</option>\n<option value="400">400</option>\n<option value="500">500</option>\n<option value="600">600</option>\n<option value="700">700</option>\n<option value="800">800</option>\n<option value="900">900</option>\n<option value="bold">Bold</option>\n<option value="bolder">Bolder</option>\n<option value="inherit">Inherit</option>\n<option value="lighter">Lighter</option>\n<option value="Normal">Normal</option>\n</select>`,optionvaluesHTML="",optionvalues_lineHTML="";if(optionvalues=fetchOptionsForOperation(data),optionvalues.length>0)if("Aggregation"==data.graph_subtype){optionvaluesHTML+=` <br>\n  <label style="font-size:1.1rem">Change operation for Aggregation:</label>\n  <select class="select2" name="change_agg_operation" id="${id_optionvalues}" data-chart-id = "${id6}" tabSlicerId = "${tabSlicerId}" onchange="changeChartOperation.call(this, 'data-operation')" style="font-size:1.1rem" >`;for(const t in optionvalues)data.operation==optionvalues[t]?optionvaluesHTML+=` <option value= '${optionvalues[t]}' selected>${optionvalues[t]}</option>`:optionvaluesHTML+=` <option value= '${optionvalues[t]}' >${optionvalues[t]}</option>`;optionvaluesHTML+="  </select>"}else{optionvaluesHTML+=` <br>\n  <label style="font-size:1.1rem">Change operation for Y Axis:</label>\n  <select class="select2" name="change_operation" id="${id_optionvalues}" data-chart-id = "${id6}" tabSlicerId = "${tabSlicerId}" onchange="changeChartOperation.call(this, 'data-operation')" style="font-size:1.1rem" >`;for(const t in optionvalues)data.operation==optionvalues[t].toLowerCase()?optionvaluesHTML+=` <option value= '${optionvalues[t]}' selected>${optionvalues[t]}</option>`:optionvaluesHTML+=` <option value= '${optionvalues[t]}' >${optionvalues[t]}</option>`
;optionvaluesHTML+="  </select>"}if(optionvalues_line=fetchOptionsForOperation(data,plotDict.line_column),optionvalues_line.length>0){optionvalues_lineHTML+=` <br>\n<label style="font-size:1.1rem">Change operation for Line:</label>\n<select class="select2" name="change_operation_line" id="${id_optionvalues_line}" data-chart-id = "${id6}" tabSlicerId = "${tabSlicerId}" onchange="changeChartOperation.call(this, 'data-operation_line')" style="font-size:1.1rem" >`;for(const t in optionvalues_line)operation_line==optionvalues_line[t]?optionvalues_lineHTML+=` <option value= '${optionvalues_line[t]}' selected>${optionvalues_line[t]}</option>`:optionvalues_lineHTML+=` <option value= '${optionvalues_line[t]}' >${optionvalues_line[t]}</option>`;optionvalues_lineHTML+="  </select>"}let global_bg="",shadowColor="",shadowXOffset="",shadowYOffset="",shadowBlur="",shadowThickness="",shadowon="",borderon="",borderColor="",borderStyle="",borderThickness="",x_axis_title="",y_axis_title="",y_axis_start="",y_axis_end="",element_label="",color="",label="",data_labels="",show_gridlines="",plot_bg_color="",grad_color="",legend_x="",legend_y="",legend_position="",grid_id="show_gridlines",value="Show Gridlines",label_value="show_labels",label_text="Show Labes",element_color="";"undefined"!==String(data.plotDict)?(shadowColor=data.plotDict.data_shadecolor,global_bg=data.plotDict.global_bg,"undefined"===shadowColor&&(shadowColor="#7A7575"),shadowXOffset=data.plotDict.data_shadowX,"undefined"===shadowXOffset&&(shadowXOffset=2),shadowYOffset=data.plotDict.data_shadowY,"undefined"===shadowYOffset&&(shadowYOffset=1),shadowBlur=data.plotDict.data_shadowblurry,"undefined"===shadowBlur&&(shadowBlur=10),shadowThickness=data.plotDict.data_shadowThick,"undefined"===shadowThickness&&(shadowThickness=6),shadowon=data.plotDict.data_shadowon,"undefined"===shadowon&&(shadowon="false"),borderStyle=data.plotDict.data_borderStyle,"undefined"===borderStyle&&(borderStyle="solid"),borderColor=data.plotDict.data_borderColor,"undefined"===borderColor&&(borderColor="#000000"),borderThickness=data.plotDict.data_borderThickness,"undefined"===borderThickness&&(borderThickness=2),borderon=data.plotDict.data_borderon,"undefined"===borderon&&(borderon="false"),null==img_icon&&(img_icon="/static/images/Base_theme/barchart.png"),Object.prototype.hasOwnProperty.call(data.plotDict,"label_fontsize")&&(label_fontsize=data.plotDict.label_fontsize,"undefined"===label_fontsize&&(label_fontsize=16)),Object.prototype.hasOwnProperty.call(data.plotDict,"label_color")&&(label_color=data.plotDict.label_color,"undefined"===label_color&&(label_color="#000000")),Object.prototype.hasOwnProperty.call(data.plotDict,"header_fontsize")&&(header_fontsize=data.plotDict.header_fontsize,"undefined"===header_fontsize&&(header_fontsize=16)),Object.prototype.hasOwnProperty.call(data.plotDict,"header_fontweight")&&(header_fontweight=data.plotDict.config_x_axis_title,"undefined"===header_fontweight&&(header_fontweight=700)),Object.prototype.hasOwnProperty.call(data.plotDict,"header_color")&&(header_color=data.plotDict.header_color,"undefined"===header_color&&(header_color="#000000")),Object.prototype.hasOwnProperty.call(data.plotDict,"header_bgcolor")&&(header_bgcolor=data.plotDict.header_bgcolor,"undefined"===header_bgcolor&&(header_bgcolor="#ffffff")),Object.prototype.hasOwnProperty.call(data.plotDict,"header_fontstyle")&&(header_fontstyle=data.plotDict.header_fontstyle,"undefined"===header_fontstyle&&(header_fontstyle="Arial")),Object.prototype.hasOwnProperty.call(data.plotDict,"header_alignment")&&(header_alignment=data.plotDict.header_alignment,"undefined"===header_alignment&&(header_alignment="left")),Object.prototype.hasOwnProperty.call(data.plotDict,"header_alignment")&&(header_alignment=data.plotDict.header_alignment,"undefined"===header_alignment&&(header_alignment="left")),Object.prototype.hasOwnProperty.call(data.plotDict,"config_x_axis_title")&&(x_axis_title=data.plotDict.config_x_axis_title,"undefined"===x_axis_title&&(x_axis_title="")),Object.prototype.hasOwnProperty.call(data.plotDict,"config_y_axis_title")&&(y_axis_title=data.plotDict.config_y_axis_title,"undefined"===y_axis_title&&(y_axis_title="")),Object.prototype.hasOwnProperty.call(data.plotDict,"config_xrange")&&(y_axis_start=data.plotDict.config_xrange,"undefined"===String(y_axis_start)&&(y_axis_start="")),Object.prototype.hasOwnProperty.call(data.plotDict,"config_yrange")&&(y_axis_end=data.plotDict.config_yrange,"undefined"===y_axis_end&&(y_axis_end="")),Object.prototype.hasOwnProperty.call(data.plotDict,"element_label")&&(element_label=data.plotDict.element_label,"undefined"===String(element_label)&&(element_label="")),Object.prototype.hasOwnProperty.call(data.plotDict,"config_color")&&(color=data.plotDict.config_color,"undefined"===String(color)&&(color="#b8860b")),Object.prototype.hasOwnProperty.call(data.plotDict,"config_element_color")&&(element_color=data.plotDict.config_element_color,"undefined"===String(element_color)&&(element_color="#b8860b")),Object.prototype.hasOwnProperty.call(data.plotDict,"config_label_placement")&&(label=data.plotDict.config_label_placement),Object.prototype.hasOwnProperty.call(data.plotDict,"config_labels")&&(data_labels=data.plotDict.config_labels),Object.prototype.hasOwnProperty.call(data.plotDict,"config_gridlines")&&(show_gridlines=data.plotDict.config_gridlines),Object.prototype.hasOwnProperty.call(data.plotDict,"plot_bg_color")&&(plot_bg_color=data.plotDict.plot_bg_color),Object.prototype.hasOwnProperty.call(data.plotDict,"grad_color")&&(grad_color=data.plotDict.grad_color),Object.prototype.hasOwnProperty.call(data.plotDict,"data_shadecolor")&&(shadowColor=data.plotDict.data_shadecolor),Object.prototype.hasOwnProperty.call(data.plotDict,"legend_x")&&(legend_x=data.plotDict.legend_x,"undefined"!==String(legend_x)&&" "!==String(legend_x)||(legend_x="")),Object.prototype.hasOwnProperty.call(data.plotDict,"legend_y")&&(legend_y=data.plotDict.legend_y,"undefined"!==String(legend_y)&&" "!==String(legend_y)||(legend_y="")),["Pie chart","Sunburst","Donut_Chart"].includes(graph_subtype)&&(labels=data.plotDict.data[0].textposition),["Donut_Chart"].includes(graph_subtype)&&(labels=data.plotDict.data[0].textposition,legend_position=data.plotDict.layout.legend.position)):(global_bg="yes",shadowColor=$(".global_shadow_color").val(),shadowXOffset=$(".global_shadow_x").val(),shadowYOffset=$(".global_shadow_y").val(),shadowBlur=$(".global_shadow_blur").val(),shadowThickness=$(".global_shadow_thickness").val(),shadowon=String($(".global_shadow").prop("checked")),borderon=String($(".global_border").prop("checked")),borderColor=$(".global_border_color").val(),borderStyle=$(".global_border_style").val(),borderThickness=$(".global_border_thickness").val(),header_bgcolor=$(".global_header_bgcolor").val(),header_color=$(".global_header_color").val(),header_fontsize=$(".global_header_fontsize").val()+"px !important",header_fontweight=$(".global_header_fontweight").val()+" !important",header_fontstyle=$(".global_header_fontstyle").val(),header_alignment=$(".global_header_alignment").val(),"undefined"===header_alignment&&(header_alignment="left"),"undefined"===header_bgcolor&&(header_bgcolor="#ffffff"),"undefined"===header_color&&(header_color="#000000"),"undefined"===header_fontstyle&&(header_fontstyle="Arial"),"undefined"===header_fontsize&&(header_bgcolor=16),"undefined"===header_fontweight&&(header_fontweight=700),"undefined"===label_color&&(label_color="#000000"),"undefined"===label_fontsize&&(label_fontsize=16),x_axis_title="",y_axis_title="",y_axis_start="",y_axis_end="",element_color="#b8860b",element_label="",color=chart_color,plot_bg_color=chart_bg_color,grad_color=global_gradient),"hide_gridlines"===String(show_gridlines)?(value="Hide Gridlines",grid_id="hide_gridlines"):(grid_id="show_gridlines",value="Show Gridlines"),"hide_labels"===String(data_labels)&&(label_text="Hide Labels",label_value="hide_labels"),$(`#${id23}`).prop("checked",!1);let datatype_dict={};for(const t in data.datatype_list)datatype_dict[data.datatype_list[t].field_name]=data.datatype_list[t].data_type;let modalDataConfig={graph_subtype:graph_subtype,x_axis:x_axis,pivot_report_data:pivot_report_data,operation:operation,operation_line:operation_line,e_id:e_id,y_axis:y_axis,second_column:second_column,tableName:tableName,operation_n:operation_n,computed_number:computed_number,is_title:is_title,title_value:title_value,total_y:total_y,total_L:total_L,agg_distinct:agg_distinct,id_axis_order:id_axis_order,id:id,id1:id1,id2:id2,id3:id3,id4:id4,id5:id5,id6:id6,id7:id7,id8:id8,id9:id9,id10:id10,id11:id11,id12:id12,id13:id13,id14:id14,id15:id15,id16:id16,id17:id17,id18:id18,id19:id19,id20:id20,id21:id21,id22:id22,id23:id23,id24:id24,id25:id25,id26:id26,id27:id27,id_configure_pivot_charttype:id_configure_pivot_charttype,id_configure_pivot_operation:id_configure_pivot_operation,idOrderModal:idOrderModal,idGaugeModal:idGaugeModal,id_agg_title:id_agg_title,id_labels:id_labels,id_table:id_table,id_tableshow:id_tableshow,id_tabledownload:id_tabledownload,id_table_export:id_table_export,id_tableicon:id_tableicon,id_filter:id_filter,id_filter_button:id_filter_button,id_filter_close:id_filter_close,id_filter_container:id_filter_container,id_showlabel:id_showlabel,id_position_legends:id_position_legends,id_label_placement:id_label_placement,id_shadow:id_shadow,id_shadow_color:id_shadow_color,id_xshadow:id_xshadow,id_yshadow:id_yshadow,id_blurshadow:id_blurshadow,id_shadow_thickness:id_shadow_thickness,id_border:id_border,id_border_color:id_border_color,id_border_thickness:id_border_thickness,id_border_style:id_border_style,id_header:id_header,id_body:id_body,id_header_bgcolor:id_header_bgcolor,id_header_color:id_header_color,id_header_fontsize:id_header_fontsize,id_label_color:id_label_color,id_label_fontsize:id_label_fontsize,id_header_fontweight:id_header_fontweight,id_header_fontstyle:id_header_fontstyle,id_header_alignment:id_header_alignment,id_condition_modal_edit:id_condition_modal_edit,id_freeze_pane:id_freeze_pane,id_condition:id_condition,id_condition_container:id_condition_container,id_FormattersModal_container:id_FormattersModal_container,id_FormattersModal_close:id_FormattersModal_close,id_addFormatter:id_addFormatter,id_FormattersModal:id_FormattersModal,id_Formatters_edit:id_Formatters_edit,id_FormattersModal_config:id_FormattersModal_config,id_condition_close:id_condition_close,id_change_conditional_config:id_change_conditional_config,id_change_freeze_config:id_change_freeze_config,id_img_icon:id_img_icon,id_optionvalues:id_optionvalues,header_bgcolor:header_bgcolor,header_color:header_color,header_fontsize:header_fontsize,label_color:label_color,label_fontsize:label_fontsize,header_fontweight:header_fontweight,header_fontstyle:header_fontstyle,header_alignment:header_alignment,chart_height:chart_height,chart_width:chart_width,chart_bg_color:chart_bg_color,chart_color:chart_color,global_gradient:global_gradient,borderStylehtml:borderStylehtml,setheaderFontHTML:setheaderFontHTML,x_axis_title:x_axis_title,y_axis_title:y_axis_title,y_axis_start:y_axis_start,y_axis_end:y_axis_end,element_color:element_color,element_label:element_label,color:color,plot_bg_color:plot_bg_color,grad_color:grad_color,label_text:label_text,label_value:label_value,global_bg:global_bg,shadowColor:shadowColor,shadowXOffset:shadowXOffset,shadowYOffset:shadowYOffset,shadowBlur:shadowBlur,shadowThickness:shadowThickness,shadowon:shadowon,borderon:borderon,borderColor:borderColor,borderStyle:borderStyle,borderThickness:borderThickness,label:label,data_labels:data_labels,show_gridlines:show_gridlines,legend_x:legend_x,legend_y:legend_y,legend_position:legend_position,grid_id:grid_id,value:value,mappingDict:data.mappingDict,datatype_dict:datatype_dict,optionvaluesHTML:optionvaluesHTML,optionvalues_lineHTML:optionvalues_lineHTML,tabSlicerId:tabSlicerId,x_axisdata:data.x_axisdata,y_axisdata:data.y_axisdata,id_tableColunm_Rearrange:id_tableColunm_Rearrange,id_tableColunm_Rearrange_ul:id_tableColunm_Rearrange_ul,id_tableColunm_Rearrange_checkbox:id_tableColunm_Rearrange_checkbox,id_tableColunm_Rearrange_div:id_tableColunm_Rearrange_div,id_nestedtableColunm_Rearrange:id_nestedtableColunm_Rearrange,id_nestedtableColunm_Rearrange_ul:id_nestedtableColunm_Rearrange_ul,id_nestedtableColunm_Rearrange_checkbox:id_nestedtableColunm_Rearrange_checkbox,id_nestedtableColunm_Rearrange_div:id_nestedtableColunm_Rearrange_div,id_columnAlignmentModal:id_columnAlignmentModal,id_selectGlobalHeaderColumnAlignment:id_selectGlobalHeaderColumnAlignment,id_selectGlobalContentColumnAlignment:id_selectGlobalContentColumnAlignment,id_selectColumnAlignment:id_selectColumnAlignment,id_ColumnAlignmentContainer:id_ColumnAlignmentContainer,id_applyColumnAlignmentButton:id_applyColumnAlignmentButton,id_closeColumnAlignmentButton:id_closeColumnAlignmentButton,id_columnAlignmentModal_edit:id_columnAlignmentModal_edit,id_HighlightColHeaders:id_HighlightColHeaders,id_HighlightColHeaders_checkbox:id_HighlightColHeaders_checkbox,id_HighlightColHeaders_div:id_HighlightColHeaders_div,id_HighlightColHeaders_ul:id_HighlightColHeaders_ul,id_saveBtn_HighlightColHeaders:id_saveBtn_HighlightColHeaders};if("Image"===String(graph_subtype)){let t="",a="";var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);void 0===data.plotDict?(outerCard=$(` \n                  <div class="image_body charts" data-xaxis="${data.x_axis}" data-yaxis="${data.y_axis}" data-table_name="${tableName}" id="${id6}" style="box-shadow:none;margin:0em !important;cursor: move;position:absolute;width: 484px;height: 510px;padding:0px;overflow:hidden;">\n                      <div class="card-header" id="${id_header}" style="display:none;padding:0.2rem 0.2rem; margin : 0.2 rem;background-color:${header_bgcolor};color:${header_color};">\n                      <h5 class"card-title" style="margin-top: 0.5rem; line-height: 1.2;font-size:${header_fontsize};font-weight:${header_fontweight};font-family:${header_fontstyle};text-align:${header_alignment}"><span class="contentEditable">${chartheader}</span></h5>\n                      <div class="col-md-1 handle_for_draggable_charts" style="padding-top: 0.5rem;"><i class="fa fa-arrows fa-lg"></i>\n                      </div>\n                  </div>\n                  </div>\n      `),outerCard.appendTo(`#${plotDict.tabNameID}`),t=data.e_id+"_"+data.x_axis,a=data.line_column,$(`#${id6}`).append(`<img class=" handle_for_draggable_charts" style="width:100%;height:100%" src="data:image/png;base64,${data.line_column}" />`),outermodalCard.appendTo(`#${plotDict.tabNameID}`)):(outerCard=$(` \n              <div class="charts image_body handle_for_draggable_charts" data-xaxis="${data.x_axis}" data-yaxis="${data.y_axis}" data-table_name="${tableName}" id="${id6}" style="margin:0em !important;cursor:move;position:absolute;width:${width};height:${height};top:${styletop};left:${left};overflow:hidden;padding:0px;">\n              <div class="card-header" id="${id_header}" style="display:none;padding:0.2rem 0.2rem; margin : 0.2 rem;background-color:${header_bgcolor};color:${header_color};">\n                      <h5 class"card-title" style="margin-top: 0.5rem; line-height: 1.2;font-size:${header_fontsize};font-weight:${header_fontweight};font-family:${header_fontstyle};text-align:${header_alignment}"><span class="contentEditable">${chartheader}</span></h5>\n                      <div class="col-md-1 handle_for_draggable_charts" style="padding-top: 0.5rem;"><i class="fa fa-arrows fa-lg"></i>\n                      </div>\n                  </div>\n              </div>     \n      `),outerCard.appendTo(`#${data.plotDict.tab_id}`),t=data.plotDict.operation+"_"+data.x_axis,a="/static/media/uploaded_images_plotly/"+data.second_column+"/"+t,$(`#${id6}`).append(`<img class="handle_for_draggable_charts" style="width:100%;height:100%" src="data:image/png;base64,${data.line_column}" />`),outermodalCard.appendTo(`#${data.plotDict.tab_id}`)),$(`#${id6}`).resizable(),$(`#${id6}`).draggable(),"yes"===String(global_bg)&&$(`#${id23}`).prop("checked",!0),document.getElementById(id5).onclick=function(){t=$(this).attr("data-e_id")+"_"+$(this).attr("data-x_axis");var a=$(this).attr("data-second_column");$.ajax({url:`/users/${urlPath}/delete_image/`,data:{name:t,folder_name:a,operation:"remove_image"},type:"POST",dataType:"json",success:function(t){document.getElementById(id6).remove(),$(`#${id7}`).remove()},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}}),$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},$(`#${id6}`).on("dblclick",function(){document.getElementById(id7).style.display;var t=document.getElementById(id6),a=parseFloat(t.offsetTop-10)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a,document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")}),$(`#${id16}`).empty(),$(`#${id16}`).append(`<option class="analysisDashboardmove" data-plotClass="${id6}" data-modalClass="${id7}" data-filterClass="${id_filter}" data-conditionalClass="${id_condition}" data-tab="" data-tab_ct="" disabled selected>-----------------------</option>`),$(".tabname").each(function(){tabrowname=$(this).attr("data-tab_ct"),tablistname=$(this)[0].innerHTML,$(`#${id16}`).append(`<option class="analysisDashboardmove" data-plotClass="${id6}" data-modalClass="${id7}" data-filterClass="${id_filter}" data-conditionalClass="${id_condition}" data-gaugemodal="${idGaugeModal}" data-tab="${tabrowname}" data-tab_ct="${tabrowname}">${tablistname}</option>`)})}),$(`#${id16}`).change(function(){var t=$(`#${id16} :selected`).attr("data-tab_ct"),a=$(`#${id6}`),e=$(`#${id16} :selected`).attr("data-modalClass"),o=$(`#${e}`);$(`#${id6}`).draggable("destroy"),$(`#${id6}`).css("position","absolute"),$(`#${id6}`).draggable({containment:"parent"}),a.appendTo(`#${t}`),o.appendTo(`#${t}`);var l=document.getElementById(id10).parentElement.parentElement.parentElement.id;document.getElementById(l).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})}),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);if("true"==shadowon)div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0;else{let t=data.x_axis.split("."),a=t[t.length-1];div.style.boxShadow="ico"==a?"none":"0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1}"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id23}`).click(function(){if($(`#${id6}`).attr("data-globalbg","no"),$(this).prop("checked")){$(`#${id6}`).attr("data-globalbg","yes");let t=document.getElementById(id6),a=$(".global_shadow").prop("checked"),e=$(".global_border").prop("checked"),o=$(".global_shadow_color").val(),l=$(".global_shadow_x").val(),d=$(".global_shadow_y").val(),i=$(".global_shadow_blur").val(),r=$(".global_shadow_thickness").val();change_shadow_global(t,a,o,l,d,i,r);let n=$(".global_border_color").val(),s=$(".global_border_thickness").val(),c=$(".global_border_style").val();change_border_global(t,e,n,s,c),$(`#${id_shadow}`).prop("checked",a),$(`#${id_border}`).prop("checked",e),$(`#${id_shadow_color}`).val(o),$(`#${id_xshadow}`).val(l),$(`#${id_yshadow}`).val(d),$(`#${id_blurshadow}`).val(i),$(`#${id_shadow_thickness}`).val(r),$(`#${id_border_color}`).val(n),$(`#${id_border_thickness}`).val(s),$(`#${id_border_style}`).val(c).trigger("change"),$(`#${id_border}`).val(e),$(`#${id_shadow}`).val(a),$(`#${id6}`).attr("data-shadecolor",o),$(`#${id6}`).attr("data-borderStyle",c),$(`#${id6}`).attr("data-borderThickness",s),$(`#${id6}`).attr("data-borderColor",n),$(`#${id6}`).attr("data-borderon",e),$(`#${id6}`).attr("data-shadowon",a),$(`#${id6}`).attr("data-shadowThick",r),$(`#${id6}`).attr("data-shadowblurry",i),$(`#${id6}`).attr("data-shadowY",d),$(`#${id6}`).attr("data-shadowX",l)}}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),$(".global_applyButton").click(function(){if($(`#${id23}`).prop("checked")){let t=document.getElementById(id6),a=$(".global_shadow").prop("checked"),e=$(".global_border").prop("checked"),o=$(".global_shadow_color").val(),l=$(".global_shadow_x").val(),d=$(".global_shadow_y").val(),i=$(".global_shadow_blur").val(),r=$(".global_shadow_thickness").val();change_shadow_global(t,a,o,l,d,i,r);let n=$(".global_border_color").val(),s=$(".global_border_thickness").val(),c=$(".global_border_style").val();change_border_global(t,e,n,s,c),$(`#${id_shadow}`).prop("checked",a),$(`#${id_border}`).prop("checked",e),$(`#${id_shadow_color}`).val(o),$(`#${id_xshadow}`).val(l),$(`#${id_yshadow}`).val(d),$(`#${id_blurshadow}`).val(i),$(`#${id_shadow_thickness}`).val(r),$(`#${id_border_color}`).val(n),$(`#${id_border_thickness}`).val(s),$(`#${id_border_style}`).val(c).trigger("change"),$(`#${id_border}`).val(e),$(`#${id_shadow}`).val(a),$(`#${id6}`).attr("data-shadecolor",o),$(`#${id6}`).attr("data-borderStyle",c),$(`#${id6}`).attr("data-borderThickness",s),$(`#${id6}`).attr("data-borderColor",n),$(`#${id6}`).attr("data-borderon",e),$(`#${id6}`).attr("data-shadowon",a),$(`#${id6}`).attr("data-shadowThick",r),$(`#${id6}`).attr("data-shadowblurry",i),$(`#${id6}`).attr("data-shadowY",d),$(`#${id6}`).attr("data-shadowX",l)}})}if("Vertical_Bar"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if("undefined"===String(data.plotDict)){outerCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;let t=JSON.parse(JSON.stringify(data.x_axisdata));if("yes"===String(global_gradient)){color=chart_color;var colordata=[],colorlength=data.x_axisdata.length,backRGB=$(`#${id1}`).val();colordata.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colordata[colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colordata.push(newHex)}}else for(let t=0;t<colorlength;t++)colordata.push(chart_color);var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace1={x:data.x_axisdata,y:data.y_axisdata,type:"bar",marker:{color:colordata}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:10,t:20,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}},autosize:!0},trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2]}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data,tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`],tabledata=[];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,delete dataplot[0].selectedpoints;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),layout=data.plotDict.layout;"string"==dataplot&&(dataplot=JSON.parse(dataplot));var colorlength=data.x_axisdata.length;if("object"==typeof dataplot[0].marker.color)var color_old=dataplot[0].marker.color[0];else var color_old=dataplot[0].marker.color;if(null==color_old&&(color_old=color),dataplot[0].marker.color.length!=colorlength){var colordata=[];if("yes"==grad_color){color=color;var backRGB=$(`#${id1}`).val();colordata.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colordata[colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colordata.push(newHex)}}else for(let t=0;t<colorlength;t++)colordata.push(color);dataplot[0].marker={color:colordata}}}"yes"===String(global_bg)&&$(`#${id23}`).prop("checked",!0),"yes"===String(grad_color)?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_label_placement}`).val(label),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle);var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype,tab_id:tab_id});var update={text:[data.y_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0];var div_id=document.getElementById(id);$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_table_export}`).css("display","block"),document.getElementById(id).style.display="none",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id_table).style.display="block";var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},document.getElementById(id_tabledownload).onclick=function(){let t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){let e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}let e=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),o=new Blob([e],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),d=URL.createObjectURL(o);l.setAttribute("href",d),l.setAttribute("download",`${data.chartHeader}`+"_data.csv"),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},gradientColorApply(id1,id6,id24,tester,colorlength=dataplot[0].x.length),$(`#${id23}`).click(function(){let t,a="",e="",o="",l="",d="",i="",r="",n="",s="",c="",_="",g="",p="",h="",b="",y="",u="",m="",f="",v="",x=[],w="";"true"===String($(this).prop("checked"))?(a=$(".myDiv").css("background-color"),e=$(".inner-div").css("background-color"),
"true"===String($(".global_gradient_color").prop("checked"))?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id6}`).attr("data-globalbg","yes"),t=document.getElementById(id_header),l=document.getElementById(id6),d=$(".global_header_bgcolor").val(),change_header_bgcolor(l,t,d),i=$(".global_header_color").val(),change_header_color(l,t,i),r=$(".global_header_fontsize").val(),change_header_fontsize(l,t,r),n=$(".global_header_fontweight").val(),change_header_fontweight(l,t,n),$(`#${id_header_bgcolor}`).val(d),$(`#${id_header_color}`).val(i),$(`#${id_header_fontsize}`).val(r),$(`#${id_header_fontweight}`).val(n).trigger("change"),s=$(".global_header_fontstyle").val(),change_header_fontstyle(l,t,s),$(`#${id_header_fontstyle}`).val(s).trigger("change"),c=$(".global_header_alignment").val(),$(`#${id_header_alignment}`).val(c).trigger("change"),change_header_alignment(l,t,c),$(`#${id6}`).attr("data-header_alignment",c),_=$(".global_shadow").prop("checked"),g=$(".global_border").prop("checked"),p=$(".global_shadow_color").val(),h=$(".global_shadow_x").val(),b=$(".global_shadow_y").val(),y=$(".global_shadow_blur").val(),u=$(".global_shadow_thickness").val(),change_shadow_global(l,_,p,h,b,y,u),m=$(".global_border_color").val(),f=$(".global_border_thickness").val(),v=$(".global_border_style").val(),change_border_global(l,g,m,f,v),$(`#${id_shadow}`).prop("checked",_),$(`#${id_border}`).prop("checked",g),$(`#${id_shadow_color}`).val(p),$(`#${id_xshadow}`).val(h),$(`#${id_yshadow}`).val(b),$(`#${id_blurshadow}`).val(y),$(`#${id_shadow_thickness}`).val(u),$(`#${id_border_color}`).val(m),$(`#${id_border_thickness}`).val(f),$(`#${id_border_style}`).val(v).trigger("change"),$(`#${id_border}`).val(g),$(`#${id_shadow}`).val(_),$(`#${id6}`).attr("data-shadecolor",p),$(`#${id6}`).attr("data-borderStyle",v),$(`#${id6}`).attr("data-borderThickness",f),$(`#${id6}`).attr("data-borderColor",m),$(`#${id6}`).attr("data-borderon",g),$(`#${id6}`).attr("data-shadowon",_),$(`#${id6}`).attr("data-shadowThick",u),$(`#${id6}`).attr("data-shadowblurry",y),$(`#${id6}`).attr("data-shadowY",b),$(`#${id6}`).attr("data-shadowX",h),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical")):(a=$(`#${id22}`).val(),o=$(`#${id1}`).val(),$(`#${id6}`).attr("data-globalbg","no"),e=hex2rgb(o),a=hex2rgb(a)),$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=a,layout.paper_bgcolor=a,x=[],w=dataplot[0].x.length;let k=e.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),I=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),B=isNaN(k[1])?"00":I[(k[1]-k[1]%16)/16]+I[k[1]%16],E=isNaN(k[2])?"00":I[(k[2]-k[2]%16)/16]+I[k[2]%16],D=isNaN(k[3])?"00":I[(k[3]-k[3]%16)/16]+I[k[3]%16],S="#"+B+E+D,C=S;if(rgb_plot=a.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),I=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),B=isNaN(rgb_plot[1])?"00":I[(rgb_plot[1]-rgb_plot[1]%16)/16]+I[k[1]%16],E=isNaN(rgb_plot[2])?"00":I[(rgb_plot[2]-rgb_plot[2]%16)/16]+I[k[2]%16],D=isNaN(rgb_plot[3])?"00":I[(rgb_plot[3]-rgb_plot[3]%16)/16]+I[k[3]%16],plot_col="#"+B+E+D,$(`#${id1}`).val(S),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",S),$(`#${id6}`).attr("data-config_color",S),$(`#${id6}`).attr("data-bgcolor",plot_col),x.push(C),$(`#${id24}`).prop("checked")){for(let t=0;t<w-1;t++){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(x[x.length-1]),a=.8*parseInt(t[1],16),e=.8*parseInt(t[2],16),o=.8*parseInt(t[3],16),l="#"+componentToHex(Math.round(a))+componentToHex(Math.round(e))+componentToHex(Math.round(o));x.push(l)}$(`#${id6}`).attr("data-grad_color","yes")}else{$(`#${id6}`).attr("data-grad_color","no");for(let t=0;t<w-1;t++)x.push(C)}let T={marker:{color:x}};Plotly.restyle(tester,T),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");if($(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),$(".global_gradient_color").prop("checked")){$(`#${id24}`).prop("checked",!0),$(`#${id6}`).attr("data-grad_color","yes"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}var c={marker:{color:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}else{$(`#${id24}`).prop("checked",!1),$(`#${id6}`).attr("data-grad_color","no"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col);l=col,l=col;$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col),a.push(l);var _=[];for(let t=0;t<e;t++)_.push(l);c={marker:{color:_}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}var g=document.getElementById(id_header),p=document.getElementById(id6),h=$(".global_header_bgcolor").val();change_header_bgcolor(p,g,h);var b=$(".global_header_color").val();change_header_color(p,g,b);var y=$(".global_header_fontsize").val();change_header_fontsize(p,g,y);var u=$(".global_header_fontweight").val();change_header_fontweight(p,g,u),$(`#${id_header_bgcolor}`).val(h),$(`#${id_header_color}`).val(b),$(`#${id_header_fontsize}`).val(y),$(`#${id_header_fontweight}`).val(u).trigger("change");var m=$(".global_header_fontstyle").val();change_header_fontstyle(p,g,m),$(`#${id_header_fontstyle}`).val(m).trigger("change");var f=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(f).trigger("change"),change_header_alignment(p,g,f),$(`#${id6}`).attr("data-header_alignment",f);var v=$(".global_shadow").prop("checked"),x=$(".global_border").prop("checked"),w=$(".global_shadow_color").val(),k=$(".global_shadow_x").val(),I=$(".global_shadow_y").val(),B=$(".global_shadow_blur").val(),E=$(".global_shadow_thickness").val();change_shadow_global(p,v,w,k,I,B,E);var D=$(".global_border_color").val(),S=$(".global_border_thickness").val(),C=$(".global_border_style").val();change_border_global(p,x,D,S,C),$(`#${id_shadow}`).prop("checked",v),$(`#${id_border}`).prop("checked",x),$(`#${id_shadow_color}`).val(w),$(`#${id_xshadow}`).val(k),$(`#${id_yshadow}`).val(I),$(`#${id_blurshadow}`).val(B),$(`#${id_shadow_thickness}`).val(E),$(`#${id_border_color}`).val(D),$(`#${id_border_thickness}`).val(S),$(`#${id_border_style}`).val(C).trigger("change"),$(`#${id_border}`).val(x),$(`#${id_shadow}`).val(v),$(`#${id6}`).attr("data-shadecolor",w),$(`#${id6}`).attr("data-borderStyle",C),$(`#${id6}`).attr("data-borderThickness",S),$(`#${id6}`).attr("data-borderColor",D),$(`#${id6}`).attr("data-borderon",x),$(`#${id6}`).attr("data-shadowon",v),$(`#${id6}`).attr("data-shadowThick",E),$(`#${id6}`).attr("data-shadowblurry",B),$(`#${id6}`).attr("data-shadowY",I),$(`#${id6}`).attr("data-shadowX",k)}$(`#${id6}`).attr("data-header_color",b),$(`#${id6}`).attr("data-header_bgcolor",h),$(`#${id6}`).attr("data-header_fontsize",y),$(`#${id6}`).attr("data-header_fontweight",u)}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id_label_placement).onchange=function(){var t=document.getElementById(id_label_placement).value;if("inside"==t){var a={textinfo:"",textposition:"inside"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("outside"==t){a={textposition:"outside"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}var e=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",e)};var config_label_placement=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",config_label_placement),document.getElementById(id1).onchange=function(){if($(`#${id24}`).prop("checked")){color=$(this).val();var t=[],a=dataplot[0].x.length,e=$(`#${id1}`).val();t.push(e);for(let e=0;e<a-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t[t.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));t.push(r)}var n={marker:{color:t}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}else{a=dataplot[0].x.length,t=[],e=$(this).val();for(let o=0;o<a;o++)t.push(e);n={marker:{color:t}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var s=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",s)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;y_axis_title=tester.layout.yaxis.title.text;let l={};l=0==t?{yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}}:{yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}},Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title);var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;var l=document.getElementById(id4).value;o[a]=l;var d={marker:{color:o}};Plotly.restyle(tester,d,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var i=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",i)}else{var r=t.points[0].label,n=x_axis;$.ajax({url:`/users/${urlPath}/drilldown_plot/`,data:{filter:r,filtercolumn:n,aggregation:$(`#${id_filter}`).attr("data-operation"),tableName:$(`#${id_filter}`).attr("data-table_name"),chart_id:id,operation:"drilldown_table"},type:"POST",dataType:"json",success:function(t){$("#drilldowncontainer").empty(),$("#drilldowncontainer").append('\n                                        <table id="drilldowncontainer_table" class="display" style="width:100%;overflow-x: scroll;overflow-y:scroll;">\n                                          <thead style="border-bottom:1px solid var(--primary-color,var(--primary,darkgoldenrod))" >\n                                            <tr></tr>\n                                          </thead>\n                                          <tbody style="border-bottom:1px solid var(--primary-color,var(--primary,darkgoldenrod));">\n                                          </tbody>\n                                        </table>\n                                      '),$("#drilldownmodal").modal("show");var a=[];for(let e in t.tableheaders)a.push({data:t.tableheaders[e]}),$("#drilldowncontainer_table").find("thead tr").append(`<th>${t.tableheaders[e]}</th>`);$("#drilldowncontainer_table").DataTable({data:t.tablevalues,columns:a,autoWidth:!1,scrollY:"50vh",scrollCollapse:!0,scrollX:"110%",orderCellsTop:!0,responsive:!0,stateSave:!0,deferRender:!0,paging:!0,lengthMenu:[[1,5,50,-1],[1,5,50,"All"]],pageLength:10,dom:"lfBrtip",sScrollX:"100%",scrollX:!0,buttons:[{extend:"collection",text:"Export",buttons:[{extend:"excel",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"csv",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"pdf",title:"",exportOptions:{columns:":visible:not(.noVis)"}}]}],columnDefs:[{targets:"_all",className:"dt-center allColumnClass all buttons_export_class"}]}).columns.adjust();var e=$(`#${id_filter}`).attr("data-operation"),o=$(`#${id_filter}`).attr("data-table_name"),d=$(`#${id_filter}`).attr("data-chart_id");y_axis=$(`#${id_filter}`).attr("data-y_axis"),$("#drildown_select_category").empty(),$("#drildown_plot").empty();var i=`<div class="row"><div class="form-group col-4">\n                                          <label class="acies_label col-md-12">Select Categorical Column:</label>\n                                          <select id="select_category_drill_down" class="select2 form-control" name="sel"\n                                          required data-chart_id="${d}" data-table_name="${o}" data-aggregation="${e}" data-y_axis="${y_axis}">\n                                          <option val="" disabled selected>--------------------</option>`;for(j in t.categorical_columns)i+=`<option value="${t.categorical_columns[j]}">${fieldToVerbose(t.categorical_columns[j],t.mappingDict)}</option>`;i+="</select>\n                                          </div>\n                                          </div><br><br>",$("#drildown_select_category").append(i),$(".select2").select2(),$(".export_drilldown").off("click").on("click",function(){var a=[],e=t.tableheaders;a.push(e);for(let e=0;e<t.table_values.length;e++)a.push(t.table_values[e]);var o=a.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i);var r=document.getElementById(id).parentElement.parentElement.getElementsByTagName("h5")[0].innerText;d.setAttribute("download",`${r}`+"_drill-down_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)}),$("#select_category_drill_down").on("select2:select",function(){$("#drildown_plot").empty();var t=$(this).val();$.ajax({url:`/users/${urlPath}/drilldown_plot/`,data:{filter:r,filtercolumn:n,categorydrilldown:t,y_axis:$(this).attr("data-y_axis"),aggregation:$(this).attr("data-aggregation"),tableName:$(this).attr("data-table_name"),chart_id:$(this).attr("data-chart_id"),operation:"drilldown_plot"},type:"POST",dataType:"json",success:function(t){l=document.getElementById(id1).value;var a={x:t.x_axisdata,y:t.y_axisdata,type:"bar",marker:{color:l}},e=[a],o=document.getElementById("drildown_plot"),d=(document.getElementById("drildown_plot"),{margin:{l:80,r:10,b:330,t:35,pad:10},height:800,yaxis:{title:{standoff:20,text:fieldToVerbose(t.y_axis,t.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(t.x_axis,t.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial"}},autosize:!0}),i={responsive:!0,displaylogo:!1};Plotly.newPlot(o,e,d,i)}})})},error:function(){alert("Error")}})}}),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t),$(`#${id_filter}`).remove(),$(`#${id7}`).remove()},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},closeFilterModal(id_filter_close);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray;y_axis_title=tester.layout.yaxis.title.text;var l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)};var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value;if("show_labels"==t){var a=tester.data[0].y;a=a.map(function(t){return Number(t.toFixed(2))});var e=tester.data;e[0].text=a.map(String),e[0].mode="markers+text",e[0].textposition="outside",document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e=tester.data;delete e[0].text,delete e[0].textposition,document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}Plotly.redraw(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var o=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",o)},document.getElementById(id8).onclick=function(){document.getElementById(id_filter).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){let t=$(this).attr("data-slicerColumn"),a=`\n                                      <div id="div_id_active" class="custom-control custom-checkbox">\n                                              <input type="checkbox" name="${t}" data-slicerClass="${o}" data-parentId6="${id6}" class="${id20}slicerConnectConfig checkboxinput custom-control-input" data-slicerColumn="${t}" id="${id20}${t}">\n                                              <label for="${id20}${t}" class="custom-control-label">\n                                                  ${t}\n                                              </label>\n                                          </div>\n                                      `;if($(`#${id20}`).append(a),Object.keys(slicerTabConnectDict).includes(id6)){let a=slicerTabConnectDict[id6];a.includes(t)?($(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!1),$(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!1)):$(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!0)}$(`.${id20}slicerConnectConfig[name="${t}"]`).off("change").on("change",function(){var t=$(this).attr("data-parentId6");let a=$(this).prop("checked");if(!1===a)0==slicerTabConnectDict[t].includes($(this).attr("name"))&&slicerTabConnectDict[t].push($(this).attr("name"));else if(slicerTabConnectDict[t].includes($(this).attr("name"))){let a=slicerTabConnectDict[t].indexOf($(this).attr("name"));slicerTabConnectDict[t].splice(a,1)}slicerChangeUpdatePlots(app_code_);var e=$(this).attr("data-slicerClass"),o=$(this).attr("name");$(`.${e}[data-slicerColumn="${o}"]`).val($(`.${e}[data-slicerColumn="${o}"]`).val()).trigger("select2:select")})}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))};try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={x:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].label);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"x")}),myPlot.on("plotly_deselect",function(){var t={id:chartDivId};reset_function(t)})}if("Bubble_Chart"===String(graph_subtype)){let t=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tab_id=plotDict.tabNameID;t.appendTo(`#${plotDict.tabNameID}`);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;for(let t=0;t<colorlength;t++)colordata.push(color);var trace1={x:data.x_axisdata,y:data.y_axisdata,z:data.second_columndata,mode:"markers",marker:{color:colordata,size:data.second_columndata}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:70,r:10,b:30,t:15,pad:10},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}},autosize:!0}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;t.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data,x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),layout=data.plotDict.layout,colorlength=data.x_axisdata.length;if("object"==typeof dataplot[0].marker.color)var color_old=dataplot[0].marker.color[0];else var color_old=dataplot[0].marker.color;if(null==color_old&&(color_old=color),dataplot[0].marker.color.length!=colorlength){var colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;for(let t=0;t<colorlength;t++)colordata.push(color);var trace1={x:data.x_axisdata,y:data.y_axisdata,z:data.second_columndata,mode:"markers",marker:{color:colordata,size:data.second_columndata}},dataplot=[trace1]}}$(`#${id_label_placement}`).val(label);var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype,tab_id:tab_id}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0];var update={text:[data.x_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),
$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),e.push(dataplot[0].z[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,datatable[0].cells.values[2]=dataplot[0].z,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),$(`#${id6}`).attr("data-config_color",col),v.push(w);var k={marker:{color:w,size:data.second_columndata}};Plotly.restyle(tester,k),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var o=col;o=col;a.push(o);var l={marker:{color:o,size:data.second_columndata}};Plotly.restyle(tester,l),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=document.getElementById(id_header),i=document.getElementById(id6),r=$(".global_header_bgcolor").val();change_header_bgcolor(i,d,r);var n=$(".global_header_color").val();change_header_color(i,d,n);var s=$(".global_header_fontsize").val();change_header_fontsize(i,d,s);var c=$(".global_header_fontweight").val();change_header_fontweight(i,d,c),$(`#${id_header_bgcolor}`).val(r),$(`#${id_header_color}`).val(n),$(`#${id_header_fontsize}`).val(s),$(`#${id_header_fontweight}`).val(c).trigger("change");var _=$(".global_header_fontstyle").val();change_header_fontstyle(i,d,_),$(`#${id_header_fontstyle}`).val(_).trigger("change");var g=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(g).trigger("change"),change_header_alignment(i,d,g),$(`#${id6}`).attr("data-header_alignment",g),$(`#${id6}`).attr("data-header_color",n),$(`#${id6}`).attr("data-header_bgcolor",r),$(`#${id6}`).attr("data-header_fontsize",s),$(`#${id6}`).attr("data-header_fontweight",c);var p=$(".global_shadow").prop("checked"),h=$(".global_border").prop("checked"),b=$(".global_shadow_color").val(),y=$(".global_shadow_x").val(),u=$(".global_shadow_y").val(),m=$(".global_shadow_blur").val(),f=$(".global_shadow_thickness").val();change_shadow_global(i,p,b,y,u,m,f);var v=$(".global_border_color").val(),x=$(".global_border_thickness").val(),w=$(".global_border_style").val();change_border_global(i,h,v,x,w),$(`#${id_shadow}`).prop("checked",p),$(`#${id_border}`).prop("checked",h),$(`#${id_shadow_color}`).val(b),$(`#${id_xshadow}`).val(y),$(`#${id_yshadow}`).val(u),$(`#${id_blurshadow}`).val(m),$(`#${id_shadow_thickness}`).val(f),$(`#${id_border_color}`).val(v),$(`#${id_border_thickness}`).val(x),$(`#${id_border_style}`).val(w).trigger("change"),$(`#${id_border}`).val(h),$(`#${id_shadow}`).val(p),$(`#${id6}`).attr("data-shadecolor",b),$(`#${id6}`).attr("data-borderStyle",w),$(`#${id6}`).attr("data-borderThickness",x),$(`#${id6}`).attr("data-borderColor",v),$(`#${id6}`).attr("data-borderon",h),$(`#${id6}`).attr("data-shadowon",p),$(`#${id6}`).attr("data-shadowThick",f),$(`#${id6}`).attr("data-shadowblurry",m),$(`#${id6}`).attr("data-shadowY",u),$(`#${id6}`).attr("data-shadowX",y)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_label_placement).onchange=function(){var t=document.getElementById(id_label_placement).value;if("top"==t){var a={textposition:"top center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("bottom"==t){a={textposition:"bottom center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("center"==t){a={textposition:"center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}},document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data[0].x;if("show_labels"==t){var e={mode:"markers+text",text:[a],textposition:"center"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e={mode:"markers",text:"",textposition:"bottom center"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var o=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",o)},document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);var o={marker:{color:a,size:data.second_columndata}};Plotly.restyle(tester,o),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-color",e);var l=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",l)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t),$(`#${id_filter}`).remove(),$(`#${id7}`).remove()};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value;y_axis_title=tester.layout.yaxis.title.text;var a=tester.layout.xaxis.title.text;if("show_gridlines"==t){var e={yaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),closeFilterModal(id_filter_close),document.getElementById(id8).onclick=function(){document.getElementById(id_filter).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){let t=$(this).attr("data-slicerColumn"),a=`\n                                      <div id="div_id_active" class="custom-control custom-checkbox">\n                                              <input type="checkbox" name="${t}" data-slicerClass="${o}" data-parentId6="${id6}" class="${id20}slicerConnectConfig checkboxinput custom-control-input" data-slicerColumn="${t}" id="${id20}${t}">\n                                              <label for="${id20}${t}" class="custom-control-label">\n                                                  ${t}\n                                              </label>\n                                          </div>\n                                      `;if($(`#${id20}`).append(a),Object.keys(slicerTabConnectDict).includes(id6)){let a=slicerTabConnectDict[id6];a.includes(t)?($(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!1),$(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!1)):$(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!0)}$(`.${id20}slicerConnectConfig[name="${t}"]`).off("change").on("change",function(){var t=$(this).attr("data-parentId6");let a=$(this).prop("checked");if(!1===a)0==slicerTabConnectDict[t].includes($(this).attr("name"))&&slicerTabConnectDict[t].push($(this).attr("name"));else if(slicerTabConnectDict[t].includes($(this).attr("name"))){let a=slicerTabConnectDict[t].indexOf($(this).attr("name"));slicerTabConnectDict[t].splice(a,1)}slicerChangeUpdatePlots(app_code_);var e=$(this).attr("data-slicerClass"),o=$(this).attr("name");$(`.${e}[data-slicerColumn="${o}"]`).val($(`.${e}[data-slicerColumn="${o}"]`).val()).trigger("select2:select")})}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))};try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}individual_color_data=data,myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e=[];for(let o=0;o<t.points.length;o++)a=t.points[o].pointNumber,t.points[o].curveNumber,e=t.points[o].data.marker.color;var o=document.getElementById(id4).value;e[a]=o;var l={marker:{color:e,size:individual_color_data.second_columndata}};Plotly.restyle(tester,l),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}}),chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].x);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"x")})}if("Vertical_Histogram"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));if("yes"==global_gradient){color=color;var colordata=[],colorlength=data.x_axisdata.length,backRGB=color;colordata.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colordata[colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colordata.push(newHex)}}else var colordata=chart_color;var trace1={x:data.x_axisdata,type:"histogram",marker:{color:colordata}},dataplot=[trace1],tester=document.getElementById(chartDivId),myPlot=document.getElementById(chartDivId),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}},autosize:!0}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1},tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},Plotly.newPlot(tester,dataplot,layout,config),crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],gradientColorApply(id1,id6,id24,tester,colorlength=dataplot[0].x.length),$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(".global_gradient_color").prop("checked")?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");if(r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k),$(`#${id24}`).prop("checked")){$(`#${id6}`).attr("data-grad_color","yes");for(let t=0;t<x-1;t++){var I=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v[v.length-1]),B=.8*parseInt(I[1],16),E=.8*parseInt(I[2],16),D=.8*parseInt(I[3],16),S="#"+componentToHex(Math.round(B))+componentToHex(Math.round(E))+componentToHex(Math.round(D));v.push(S)}}else{$(`#${id6}`).attr("data-grad_color","no");for(let t=0;t<x-1;t++)v.push(k)}var C={marker:{color:v}};Plotly.restyle(tester,C),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),
$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");if($(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),$(".global_gradient_color").prop("checked")){$(`#${id24}`).prop("checked",!0),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col),$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}var c={marker:{color:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}else{$(`#${id24}`).prop("checked",!1),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col);l=col,l=col;var _=[];a.push(l);for(let t=0;t<e;t++)_.push(l);c={marker:{color:_}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}var g=document.getElementById(id_header),p=document.getElementById(id6),h=$(".global_header_bgcolor").val();change_header_bgcolor(p,g,h);var b=$(".global_header_color").val();change_header_color(p,g,b);var y=$(".global_header_fontsize").val();change_header_fontsize(p,g,y);var u=$(".global_header_fontweight").val();change_header_fontweight(p,g,u),$(`#${id_header_bgcolor}`).val(h),$(`#${id_header_color}`).val(b),$(`#${id_header_fontsize}`).val(y),$(`#${id_header_fontweight}`).val(u).trigger("change");var m=$(".global_header_fontstyle").val();change_header_fontstyle(p,g,m),$(`#${id_header_fontstyle}`).val(m).trigger("change");var f=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(f).trigger("change"),change_header_alignment(p,g,f),$(`#${id6}`).attr("data-header_alignment",f),$(`#${id6}`).attr("data-header_color",b),$(`#${id6}`).attr("data-header_bgcolor",h),$(`#${id6}`).attr("data-header_fontsize",y),$(`#${id6}`).attr("data-header_fontweight",u);var v=$(".global_shadow").prop("checked"),x=$(".global_border").prop("checked"),w=$(".global_shadow_color").val(),k=$(".global_shadow_x").val(),I=$(".global_shadow_y").val(),B=$(".global_shadow_blur").val(),E=$(".global_shadow_thickness").val();change_shadow_global(p,v,w,k,I,B,E);var D=$(".global_border_color").val(),S=$(".global_border_thickness").val(),C=$(".global_border_style").val();change_border_global(p,x,D,S,C),$(`#${id_shadow}`).prop("checked",v),$(`#${id_border}`).prop("checked",x),$(`#${id_shadow_color}`).val(w),$(`#${id_xshadow}`).val(k),$(`#${id_yshadow}`).val(I),$(`#${id_blurshadow}`).val(B),$(`#${id_shadow_thickness}`).val(E),$(`#${id_border_color}`).val(D),$(`#${id_border_thickness}`).val(S),$(`#${id_border_style}`).val(C).trigger("change"),$(`#${id_border}`).val(x),$(`#${id_shadow}`).val(v),$(`#${id6}`).attr("data-shadecolor",w),$(`#${id6}`).attr("data-borderStyle",C),$(`#${id6}`).attr("data-borderThickness",S),$(`#${id6}`).attr("data-borderColor",D),$(`#${id6}`).attr("data-borderon",x),$(`#${id6}`).attr("data-shadowon",v),$(`#${id6}`).attr("data-shadowThick",E),$(`#${id6}`).attr("data-shadowblurry",B),$(`#${id6}`).attr("data-shadowY",I),$(`#${id6}`).attr("data-shadowX",k)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length;if($(`#${id24}`).prop("checked")){color=$(this).val();var a=[],e=(t=dataplot[0].x.length,$(this).val());a.push(e);for(let e=0;e<t-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));a.push(r)}var n={marker:{color:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}else{t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);n={marker:{color:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-color",e);var s=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",s)}},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t),$(`#${id_filter}`).remove(),$(`#${id7}`).remove()},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value;y_axis_title=tester.layout.yaxis.title.text;var a=tester.layout.xaxis.title.text;if("show_gridlines"==t){var e={yaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=(t.x,document.getElementById(id13).value);$.each(a,function(t,o){o==text&&(a[t]=e)});var o={x:[a]};Plotly.restyle(tester,o),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t)},chartResizeable(id6,tester)}if("Cumulative_Histogram"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));if("yes"==global_gradient){var colordata=[],colorlength=data.x_axisdata.length,backRGB=color;colordata.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colordata[colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colordata.push(newHex)}}else for(let t=0;t<colorlength;t++)colordata.push(color);var trace1={x:data.x_axisdata,type:"histogram",cumulative:{enabled:!0},marker:{color:colordata}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}},autosize:!0}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],gradientColorApply(id1,id6,id24,tester,colorlength=dataplot[0].x.length),$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(".global_gradient_color").prop("checked")?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");if(r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k),$(`#${id24}`).prop("checked")){$(`#${id6}`).attr("data-grad_color","yes");for(let t=0;t<x-1;t++){var I=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v[v.length-1]),B=.8*parseInt(I[1],16),E=.8*parseInt(I[2],16),D=.8*parseInt(I[3],16),S="#"+componentToHex(Math.round(B))+componentToHex(Math.round(E))+componentToHex(Math.round(D));v.push(S)}}else{$(`#${id6}`).attr("data-grad_color","no");for(let t=0;t<x-1;t++)v.push(k)}var C={marker:{color:v}};Plotly.restyle(tester,C),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");if($(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),$(".global_gradient_color").prop("checked")){$(`#${id24}`).prop("checked",!0),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}var c={marker:{color:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}else{$(`#${id24}`).prop("checked",!1),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col);l=col,l=col;a.push(l);var _=[];for(let t=0;t<e;t++)_.push(l);c={marker:{color:_}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}var g=document.getElementById(id_header),p=document.getElementById(id6),h=$(".global_header_bgcolor").val();change_header_bgcolor(p,g,h);var b=$(".global_header_color").val();change_header_color(p,g,b);var y=$(".global_header_fontsize").val();change_header_fontsize(p,g,y);var u=$(".global_header_fontweight").val();change_header_fontweight(p,g,u),$(`#${id_header_bgcolor}`).val(h),$(`#${id_header_color}`).val(b),$(`#${id_header_fontsize}`).val(y),$(`#${id_header_fontweight}`).val(u).trigger("change");var m=$(".global_header_fontstyle").val();change_header_fontstyle(p,g,m),$(`#${id_header_fontstyle}`).val(m).trigger("change");var f=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(f).trigger("change"),change_header_alignment(p,g,f),$(`#${id6}`).attr("data-header_alignment",f),$(`#${id6}`).attr("data-header_color",b),$(`#${id6}`).attr("data-header_bgcolor",h),$(`#${id6}`).attr("data-header_fontsize",y),$(`#${id6}`).attr("data-header_fontweight",u);var v=$(".global_shadow").prop("checked"),x=$(".global_border").prop("checked"),w=$(".global_shadow_color").val(),k=$(".global_shadow_x").val(),I=$(".global_shadow_y").val(),B=$(".global_shadow_blur").val(),E=$(".global_shadow_thickness").val();change_shadow_global(p,v,w,k,I,B,E);var D=$(".global_border_color").val(),S=$(".global_border_thickness").val(),C=$(".global_border_style").val();change_border_global(p,x,D,S,C),$(`#${id_shadow}`).prop("checked",v),$(`#${id_border}`).prop("checked",x),$(`#${id_shadow_color}`).val(w),$(`#${id_xshadow}`).val(k),$(`#${id_yshadow}`).val(I),$(`#${id_blurshadow}`).val(B),$(`#${id_shadow_thickness}`).val(E),$(`#${id_border_color}`).val(D),$(`#${id_border_thickness}`).val(S),$(`#${id_border_style}`).val(C).trigger("change"),$(`#${id_border}`).val(x),$(`#${id_shadow}`).val(v),$(`#${id6}`).attr("data-shadecolor",w),$(`#${id6}`).attr("data-borderStyle",C),$(`#${id6}`).attr("data-borderThickness",S),$(`#${id6}`).attr("data-borderColor",D),$(`#${id6}`).attr("data-borderon",x),$(`#${id6}`).attr("data-shadowon",v),$(`#${id6}`).attr("data-shadowThick",E),$(`#${id6}`).attr("data-shadowblurry",B),$(`#${id6}`).attr("data-shadowY",I),$(`#${id6}`).attr("data-shadowX",k)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length;if($(`#${id24}`).prop("checked")){color=$(this).val();var a=[],e=(t=dataplot[0].x.length,$(this).val());a.push(e);for(let e=0;e<t-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));a.push(r)}var n={marker:{color:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-grad_color","yes")}else{t=dataplot[0].x.length,a=[],e=$(this).val();for(let o=0;o<t;o++)a.push(e);n={marker:{color:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-grad_color","no")}$(`#${id6}`).attr("data-color",e),$(`#${id6}`).attr("data-config_color",e)};var backRGB=$(`#${id1}`).val();$(`#${id6}`).attr("data-color",backRGB),$(`#${id6}`).attr("data-config_color",backRGB),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid
;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value;y_axis_title=tester.layout.yaxis.title.text;var a=tester.layout.xaxis.title.text,e=$(`#${id9}`).val();if($(`#${id6}`).attr("data-config_gridlines",e),"show_gridlines"==t){var o={yaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){o={yaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,o),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));e=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",e)},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=(t.x,document.getElementById(id13).value);$.each(a,function(t,o){o==text&&(a[t]=e)});var o={x:[a]};Plotly.restyle(tester,o),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Vertical_Waterfall"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.y_axisdata.length,colordata=[],measure=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata=data.x_axisdata,y_axisdata=data.y_axisdata,x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));x_axisdata2.push("Total"),x_axisdata.push("Total"),null!=y_axisdata&&(Number.isInteger(y_axisdata.reduce((t,a)=>t+a,0))?y_axisdata.push(y_axisdata.reduce((t,a)=>t+a,0)):y_axisdata.push(y_axisdata.reduce((t,a)=>t+a,0).toFixed(2)));for(let t=0;t<colorlength;t++)colordata.push(color);for(let t=0;t<colorlength;t++)measure.push("relative");measure.push("total");var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(color),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b)),trace1={x:x_axisdata,y:y_axisdata,type:"waterfall",orientation:"v",measure:measure,mode:"markers",decreasing:{marker:{color:color}},increasing:{marker:{color:color}},totals:{marker:{color:newHex}}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data,colorlength=data.x_axisdata.length,measure=[];for(let t=0;t<colorlength;t++)measure.push("relative");var x_axisdata=data.x_axisdata,y_axisdata=data.y_axisdata,x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));x_axisdata2.push("Total"),x_axisdata.push("Total"),null!=y_axisdata&&(Number.isInteger(y_axisdata.reduce((t,a)=>t+a,0))?y_axisdata.push(y_axisdata.reduce((t,a)=>t+a,0)):y_axisdata.push(y_axisdata.reduce((t,a)=>t+a,0).toFixed(2))),measure.push("total"),dataplot[0].x=x_axisdata,dataplot[0].y=y_axisdata,dataplot[0].measure=measure;var layout=data.plotDict.layout}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.y_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id_border_style}`).val(borderStyle),document.getElementById(id1).onchange=function(){var t=this.value,a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),e=.8*parseInt(a[1],16),o=.8*parseInt(a[2],16),l=.8*parseInt(a[3],16),d="#"+componentToHex(Math.round(e))+componentToHex(Math.round(o))+componentToHex(Math.round(l)),i={decreasing:{marker:{color:t}},increasing:{marker:{color:t}},totals:{marker:{color:d}}};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-color",t),$(`#${id6}`).attr("data-config_color",t)},setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color"),a=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(plot_col);var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(plot_col),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i)),n={decreasing:{marker:{color:plot_col}},increasing:{marker:{color:plot_col}},totals:{marker:{color:r}}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-color",plot_col),$(`#${id6}`).attr("data-config_color",plot_col),$(`#${id6}`).attr("data-globalbg","yes");var s=document.getElementById(id_header),c=document.getElementById(id6),_=$(".global_header_bgcolor").val();change_header_bgcolor(c,s,_);var g=$(".global_header_color").val();change_header_color(c,s,g);var p=$(".global_header_fontsize").val();change_header_fontsize(c,s,p);var h=$(".global_header_fontweight").val();change_header_fontweight(c,s,h),$(`#${id_header_bgcolor}`).val(_),$(`#${id_header_color}`).val(g),$(`#${id_header_fontsize}`).val(p),$(`#${id_header_fontweight}`).val(h).trigger("change");var b=$(".global_header_fontstyle").val();change_header_fontstyle(c,s,b),$(`#${id_header_fontstyle}`).val(b).trigger("change");var y=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(y).trigger("change"),change_header_alignment(c,s,y),$(`#${id6}`).attr("data-header_alignment",y);var u=$(".global_shadow").prop("checked"),m=$(".global_border").prop("checked"),f=$(".global_shadow_color").val(),v=$(".global_shadow_x").val(),x=$(".global_shadow_y").val(),w=$(".global_shadow_blur").val(),k=$(".global_shadow_thickness").val();change_shadow_global(c,u,f,v,x,w,k);var I=$(".global_border_color").val(),B=$(".global_border_thickness").val(),E=$(".global_border_style").val();change_border_global(c,m,I,B,E),$(`#${id_shadow}`).prop("checked",u),$(`#${id_border}`).prop("checked",m),$(`#${id_shadow_color}`).val(f),$(`#${id_xshadow}`).val(v),$(`#${id_yshadow}`).val(x),$(`#${id_blurshadow}`).val(w),$(`#${id_shadow_thickness}`).val(k),$(`#${id_border_color}`).val(I),$(`#${id_border_thickness}`).val(B),$(`#${id_border_style}`).val(E).trigger("change"),$(`#${id_border}`).val(m),$(`#${id_shadow}`).val(u),$(`#${id6}`).attr("data-shadecolor",f),$(`#${id6}`).attr("data-borderStyle",E),$(`#${id6}`).attr("data-borderThickness",B),$(`#${id6}`).attr("data-borderColor",I),$(`#${id6}`).attr("data-borderon",m),$(`#${id6}`).attr("data-shadowon",u),$(`#${id6}`).attr("data-shadowThick",k),$(`#${id6}`).attr("data-shadowblurry",w),$(`#${id6}`).attr("data-shadowY",x),$(`#${id6}`).attr("data-shadowX",v)}else{plotbg=$(`#${id22}`).val();$(`#${id1}`).val(),$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=$(`#${id1}`).val()}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;a=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],plot_col="#"+r1+g1+b1,$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-bgcolor",plot_col),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");var a=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(plot_col);var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(plot_col),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i)),n={decreasing:{marker:{color:plot_col}},increasing:{marker:{color:plot_col}},totals:{marker:{color:r}}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-color",plot_col),$(`#${id6}`).attr("data-config_color",plot_col),$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var s=[],c=dataplot[0].x.length;a=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],col="#"+r1+g1+b1,a=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var _=col;_=col;s.push(_);for(let t=0;t<c-1;t++){o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s[s.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));s.push(r)}n={marker:{color:s}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var g=document.getElementById(id_header),p=document.getElementById(id6),h=$(".global_header_bgcolor").val();change_header_bgcolor(p,g,h);var b=$(".global_header_color").val();change_header_color(p,g,b);var y=$(".global_header_fontsize").val();change_header_fontsize(p,g,y);var u=$(".global_header_fontweight").val();change_header_fontweight(p,g,u),$(`#${id_header_bgcolor}`).val(h),$(`#${id_header_color}`).val(b),$(`#${id_header_fontsize}`).val(y),$(`#${id_header_fontweight}`).val(u).trigger("change");var m=$(".global_header_fontstyle").val();change_header_fontstyle(p,g,m),$(`#${id_header_fontstyle}`).val(m).trigger("change");var f=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(f).trigger("change"),change_header_alignment(p,g,f),$(`#${id6}`).attr("data-header_alignment",f),$(`#${id6}`).attr("data-header_color",b),$(`#${id6}`).attr("data-header_bgcolor",h),$(`#${id6}`).attr("data-header_fontsize",y),$(`#${id6}`).attr("data-header_fontweight",u);var v=$(".global_shadow").prop("checked"),x=$(".global_border").prop("checked"),w=$(".global_shadow_color").val(),k=$(".global_shadow_x").val(),I=$(".global_shadow_y").val(),B=$(".global_shadow_blur").val(),E=$(".global_shadow_thickness").val();change_shadow_global(p,v,w,k,I,B,E);var D=$(".global_border_color").val(),S=$(".global_border_thickness").val(),C=$(".global_border_style").val();change_border_global(p,x,D,S,C),$(`#${id_shadow}`).prop("checked",v),$(`#${id_border}`).prop("checked",x),$(`#${id_shadow_color}`).val(w),$(`#${id_xshadow}`).val(k),$(`#${id_yshadow}`).val(I),$(`#${id_blurshadow}`).val(B),$(`#${id_shadow_thickness}`).val(E),$(`#${id_border_color}`).val(D),$(`#${id_border_thickness}`).val(S),$(`#${id_border_style}`).val(C).trigger("change"),$(`#${id_border}`).val(x),$(`#${id_shadow}`).val(v),$(`#${id6}`).attr("data-shadecolor",w),$(`#${id6}`).attr("data-borderStyle",C),$(`#${id6}`).attr("data-borderThickness",S),$(`#${id6}`).attr("data-borderColor",D),$(`#${id6}`).attr("data-borderon",x),$(`#${id6}`).attr("data-shadowon",v),$(`#${id6}`).attr("data-shadowThick",E),$(`#${id6}`).attr("data-shadowblurry",B),$(`#${id6}`).attr("data-shadowY",I),$(`#${id6}`).attr("data-shadowX",k)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)};var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value;if("show_labels"==t){var a=tester.data[0].y;a=a.map(function(t){return Number(t)});var e=tester.data;e[0].mode="markers+text",e[0].text=a.map(String),e[0].textposition="outside",document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e=tester.data;delete e[0].mode,delete e[0].text,delete e[0].textposition,document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}Plotly.redraw(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var o=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",o)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value;y_axis_title=tester.layout.yaxis.title.text;var a=tester.layout.xaxis.title.text,e=$(`#${id9}`).val();if($(`#${id6}`).attr("data-config_gridlines",e),"show_gridlines"==t){var o={yaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){o={yaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,o),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));e=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",e)},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})};try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={x:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].x);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"x")})}if("Horizontal_Waterfall"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.y_axisdata.length,colordata=[],measure=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata=data.x_axisdata,y_axisdata=data.y_axisdata,y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata));y_axisdata2.push("Total"),y_axisdata.push("Total"),null!=x_axisdata&&(Number.isInteger(x_axisdata.reduce((t,a)=>t+a,0))?x_axisdata.push(x_axisdata.reduce((t,a)=>t+a,0)):x_axisdata.push(x_axisdata.reduce((t,a)=>t+a,0).toFixed(2)));for(let t=0;t<colorlength;t++)colordata.push("#b8860b");for(let t=0;t<colorlength;t++)measure.push("relative");measure.push("total");var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(color),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b)),trace1={x:x_axisdata,y:y_axisdata,type:"waterfall",orientation:"h",measure:measure,mode:"markers",decreasing:{marker:{color:color}},increasing:{marker:{color:color}},totals:{marker:{color:newHex}}
},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data,colorlength=data.x_axisdata.length,measure=[],x_axisdata=data.x_axisdata,y_axisdata=data.y_axisdata,y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata));y_axisdata2.push("Total"),y_axisdata.push("Total"),null!=x_axisdata&&(Number.isInteger(x_axisdata.reduce((t,a)=>t+a,0))?x_axisdata.push(x_axisdata.reduce((t,a)=>t+a,0)):x_axisdata.push(x_axisdata.reduce((t,a)=>t+a,0).toFixed(2)));for(let t=0;t<colorlength;t++)measure.push("relative");var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata));measure.push("total"),dataplot[0].x=x_axisdata,dataplot[0].y=data.y_axisdata,dataplot[0].measure=measure;var layout=data.plotDict.layout}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.x_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),document.getElementById(id1).onchange=function(){var t=this.value,a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),e=.8*parseInt(a[1],16),o=.8*parseInt(a[2],16),l=.8*parseInt(a[3],16),d="#"+componentToHex(Math.round(e))+componentToHex(Math.round(o))+componentToHex(Math.round(l)),i={decreasing:{marker:{color:t}},increasing:{marker:{color:t}},totals:{marker:{color:d}}};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-color",t),$(`#${id6}`).attr("data-config_color",t)},setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype});var x_axis_end=tester.layout.yaxis.range[1],x_axis_start=tester.layout.yaxis.range[0];$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color"),a=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(plot_col);var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(plot_col),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i)),n={decreasing:{marker:{color:plot_col}},increasing:{marker:{color:plot_col}},totals:{marker:{color:r}}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-color",plot_col),$(`#${id6}`).attr("data-config_color",plot_col),$(`#${id6}`).attr("data-globalbg","yes");var s=document.getElementById(id_header),c=document.getElementById(id6),_=$(".global_header_bgcolor").val();change_header_bgcolor(c,s,_);var g=$(".global_header_color").val();change_header_color(c,s,g);var p=$(".global_header_fontsize").val();change_header_fontsize(c,s,p);var h=$(".global_header_fontweight").val();change_header_fontweight(c,s,h),$(`#${id_header_bgcolor}`).val(_),$(`#${id_header_color}`).val(g),$(`#${id_header_fontsize}`).val(p),$(`#${id_header_fontweight}`).val(h).trigger("change");var b=$(".global_header_fontstyle").val();change_header_fontstyle(c,s,b),$(`#${id_header_fontstyle}`).val(b).trigger("change");var y=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(y).trigger("change"),change_header_alignment(c,s,y),$(`#${id6}`).attr("data-header_alignment",y);var u=$(".global_shadow").prop("checked"),m=$(".global_border").prop("checked"),f=$(".global_shadow_color").val(),v=$(".global_shadow_x").val(),x=$(".global_shadow_y").val(),w=$(".global_shadow_blur").val(),k=$(".global_shadow_thickness").val();change_shadow_global(c,u,f,v,x,w,k);var I=$(".global_border_color").val(),B=$(".global_border_thickness").val(),E=$(".global_border_style").val();change_border_global(c,m,I,B,E),$(`#${id_shadow}`).prop("checked",u),$(`#${id_border}`).prop("checked",m),$(`#${id_shadow_color}`).val(f),$(`#${id_xshadow}`).val(v),$(`#${id_yshadow}`).val(x),$(`#${id_blurshadow}`).val(w),$(`#${id_shadow_thickness}`).val(k),$(`#${id_border_color}`).val(I),$(`#${id_border_thickness}`).val(B),$(`#${id_border_style}`).val(E).trigger("change"),$(`#${id_border}`).val(m),$(`#${id_shadow}`).val(u),$(`#${id6}`).attr("data-shadecolor",f),$(`#${id6}`).attr("data-borderStyle",E),$(`#${id6}`).attr("data-borderThickness",B),$(`#${id6}`).attr("data-borderColor",I),$(`#${id6}`).attr("data-borderon",m),$(`#${id6}`).attr("data-shadowon",u),$(`#${id6}`).attr("data-shadowThick",k),$(`#${id6}`).attr("data-shadowblurry",w),$(`#${id6}`).attr("data-shadowY",x),$(`#${id6}`).attr("data-shadowX",v)}else{plotbg=$(`#${id22}`).val();$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=$(`#${id1}`).val()}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;dataplot[0].x.length;a=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],plot_col="#"+r1+g1+b1,$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-bgcolor",plot_col),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");var a=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(plot_col);var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(plot_col),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i)),n={decreasing:{marker:{color:plot_col}},increasing:{marker:{color:plot_col}},totals:{marker:{color:r}}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-color",plot_col),$(`#${id6}`).attr("data-config_color",plot_col),$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var s=[],c=dataplot[0].x.length;a=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],col="#"+r1+g1+b1,a=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var _=col;_=col;s.push(_);for(let t=0;t<c-1;t++){o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s[s.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));s.push(r)}n={marker:{color:s}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var g=document.getElementById(id_header),p=document.getElementById(id6),h=$(".global_header_bgcolor").val();change_header_bgcolor(p,g,h);var b=$(".global_header_color").val();change_header_color(p,g,b);var y=$(".global_header_fontsize").val();change_header_fontsize(p,g,y);var u=$(".global_header_fontweight").val();change_header_fontweight(p,g,u),$(`#${id_header_bgcolor}`).val(h),$(`#${id_header_color}`).val(b),$(`#${id_header_fontsize}`).val(y),$(`#${id_header_fontweight}`).val(u).trigger("change");var m=$(".global_header_fontstyle").val();change_header_fontstyle(p,g,m),$(`#${id_header_fontstyle}`).val(m).trigger("change");var f=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(f).trigger("change"),change_header_alignment(p,g,f),$(`#${id6}`).attr("data-header_alignment",f),$(`#${id6}`).attr("data-header_color",b),$(`#${id6}`).attr("data-header_bgcolor",h),$(`#${id6}`).attr("data-header_fontsize",y),$(`#${id6}`).attr("data-header_fontweight",u);var v=$(".global_shadow").prop("checked"),x=$(".global_border").prop("checked"),w=$(".global_shadow_color").val(),k=$(".global_shadow_x").val(),I=$(".global_shadow_y").val(),B=$(".global_shadow_blur").val(),E=$(".global_shadow_thickness").val();change_shadow_global(p,v,w,k,I,B,E);var D=$(".global_border_color").val(),S=$(".global_border_thickness").val(),C=$(".global_border_style").val();change_border_global(p,x,D,S,C),$(`#${id_shadow}`).prop("checked",v),$(`#${id_border}`).prop("checked",x),$(`#${id_shadow_color}`).val(w),$(`#${id_xshadow}`).val(k),$(`#${id_yshadow}`).val(I),$(`#${id_blurshadow}`).val(B),$(`#${id_shadow_thickness}`).val(E),$(`#${id_border_color}`).val(D),$(`#${id_border_thickness}`).val(S),$(`#${id_border_style}`).val(C).trigger("change"),$(`#${id_border}`).val(x),$(`#${id_shadow}`).val(v),$(`#${id6}`).attr("data-shadecolor",w),$(`#${id6}`).attr("data-borderStyle",C),$(`#${id6}`).attr("data-borderThickness",S),$(`#${id6}`).attr("data-borderColor",D),$(`#${id6}`).attr("data-borderon",x),$(`#${id6}`).attr("data-shadowon",v),$(`#${id6}`).attr("data-shadowThick",E),$(`#${id6}`).attr("data-shadowblurry",B),$(`#${id6}`).attr("data-shadowY",I),$(`#${id6}`).attr("data-shadowX",k)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[1],l=tester.layout.xaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[e,o],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",r)};var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value;if("show_labels"==t){var a=tester.data[0].x;a=a.map(function(t){return Number(t)});var e=tester.data;e[0].mode="markers+text",e[0].text=a.map(String),e[0].textposition="outside",e[0].textangle=90,document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e=tester.data;delete e[0].mode,delete e[0].text,delete e[0].textposition,document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}Plotly.redraw(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var o=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",o)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[0],l=tester.layout.xaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[o,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",r)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t),document.getElementById(t).remove()},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value;y_axis_title=tester.layout.yaxis.title.text;var a=tester.layout.xaxis.title.text;if("show_gridlines"==t){var e={yaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_afterplot",function(){d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].y,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={y:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].y);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"y")})}if("Scatter"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length;x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),colordata=[],new_colordata=[],new_x_axislist=[];if("yes"==global_gradient){for(let t=0;t<data.x_axisdata.length;t++){var backRGB=color;0==new_x_axislist.includes(data.x_axisdata[t])&&new_x_axislist.push(data.x_axisdata[t])}var backRGB=color;new_colordata.push(backRGB);for(let t=0;t<new_x_axislist.length-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(new_colordata[new_colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));new_colordata.push(newHex)}for(let t=0;t<data.x_axisdata.length;t++)colordata.push(new_colordata[new_x_axislist.indexOf(data.x_axisdata[t])])}else for(let t=0;t<colorlength;t++)colordata.push(color);var trace1={x:data.x_axisdata,y:data.y_axisdata,mode:"markers",marker:{color:colordata}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,hovermode:"closest",yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata;var colorlength=data.x_axisdata.length,colordata=[],x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),colorlength=data.x_axisdata.length,colordata=dataplot[0].marker.color;if(dataplot[0].marker.color.length!=colorlength){var colordata=[],new_colordata=[],new_x_axislist=[];if(x_axis=data.x_axis,y_axis=data.y_axis,"yes"==grad_color){for(let t=0;t<data.x_axisdata.length;t++){var backRGB=color;0==new_x_axislist.includes(data.x_axisdata[t])&&new_x_axislist.push(data.x_axisdata[t])}var backRGB=color;new_colordata.push(backRGB);for(let t=0;t<new_x_axislist.length-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(new_colordata[new_colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));new_colordata.push(newHex)}for(let t=0;t<data.x_axisdata.length;t++)colordata.push(new_colordata[new_x_axislist.indexOf(data.x_axisdata[t])])}else for(let t=0;t<colorlength;t++)colordata.push(color)}dataplot[0].marker.color=colordata;var layout=data.plotDict.layout}"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color),$(`#${id6}`).attr("data-config_color",color),$(`#${id_label_placement}`).val(label);var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id24}`).click(function(){if($(this).prop("checked")){color=$(`#${id1}`).val();var t=[],a=dataplot[0].x.length,e=$(`#${id1}`).val(),o=[],l=[];for(let t=0;t<dataplot[0].x.length;t++){e=color;0==o.includes(dataplot[0].x[t])&&o.push(dataplot[0].x[t])}e=color;l.push(e);for(let t=0;t<o.length-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l[l.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));l.push(s)}for(let a=0;a<dataplot[0].x.length;a++)t.push(l[o.indexOf(dataplot[0].x[a])]);var c={marker:{color:t}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-grad_color","yes")}else{a=dataplot[0].x.length,t=[],e=$(`#${id1}`).val();for(let o=0;o<a;o++)t.push(e);c={marker:{color:t}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-grad_color","no")}}),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),
$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(".global_gradient_color").prop("checked")?($(`#${id24}`).prop("checked",!0),$(`#${id6}`).attr("data-grad_color","yes")):($(`#${id24}`).prop("checked",!1),$(`#${id6}`).attr("data-grad_color","no")),$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");if(r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),$(`#${id24}`).prop("checked")){$(`#${id6}`).attr("data-grad_color","yes");var I=[],B=[];for(let t=0;t<dataplot[0].x.length;t++){var E=col;0==I.includes(dataplot[0].x[t])&&I.push(dataplot[0].x[t])}E=col;B.push(E);for(let t=0;t<I.length-1;t++){var D=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(B[B.length-1]),S=.8*parseInt(D[1],16),C=.8*parseInt(D[2],16),T=.8*parseInt(D[3],16),N="#"+componentToHex(Math.round(S))+componentToHex(Math.round(C))+componentToHex(Math.round(T));B.push(N)}for(let t=0;t<dataplot[0].x.length;t++)v.push(B[I.indexOf(dataplot[0].x[t])])}else{k=col;v.push(k),$(`#${id6}`).attr("data-grad_color","no");for(let t=0;t<x-1;t++)v.push(k)}var O={marker:{color:v}};Plotly.restyle(tester,O),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");if($(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),$(".global_gradient_color").prop("checked")){$(`#${id24}`).prop("checked",!0),$(`#${id6}`).attr("data-grad_color","yes"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=[],o=[],l=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var d=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":d[(rgb[1]-rgb[1]%16)/16]+d[rgb[1]%16],g1=isNaN(rgb[2])?"00":d[(rgb[2]-rgb[2]%16)/16]+d[rgb[2]%16],b1=isNaN(rgb[3])?"00":d[(rgb[3]-rgb[3]%16)/16]+d[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);d=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":d[(rgb[1]-rgb[1]%16)/16]+d[rgb[1]%16],g1=isNaN(rgb[2])?"00":d[(rgb[2]-rgb[2]%16)/16]+d[rgb[2]%16],b1=isNaN(rgb[3])?"00":d[(rgb[3]-rgb[3]%16)/16]+d[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var i=col;i=col;for(let t=0;t<dataplot[0].x.length;t++){var r=col;0==e.includes(dataplot[0].x[t])&&e.push(dataplot[0].x[t])}r=col;o.push(r);for(let t=0;t<e.length-1;t++){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o[o.length-1]),s=.8*parseInt(n[1],16),c=.8*parseInt(n[2],16),_=.8*parseInt(n[3],16),g="#"+componentToHex(Math.round(s))+componentToHex(Math.round(c))+componentToHex(Math.round(_));o.push(g)}for(let t=0;t<dataplot[0].x.length;t++)a.push(o[e.indexOf(dataplot[0].x[t])]);var p={marker:{color:a}};Plotly.restyle(tester,p),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}else{$(`#${id24}`).prop("checked",!1),$(`#${id6}`).attr("data-grad_color","no"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;a=[],l=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);d=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":d[(rgb[1]-rgb[1]%16)/16]+d[rgb[1]%16],g1=isNaN(rgb[2])?"00":d[(rgb[2]-rgb[2]%16)/16]+d[rgb[2]%16],b1=isNaN(rgb[3])?"00":d[(rgb[3]-rgb[3]%16)/16]+d[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);d=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":d[(rgb[1]-rgb[1]%16)/16]+d[rgb[1]%16],g1=isNaN(rgb[2])?"00":d[(rgb[2]-rgb[2]%16)/16]+d[rgb[2]%16],b1=isNaN(rgb[3])?"00":d[(rgb[3]-rgb[3]%16)/16]+d[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col);i=col,i=col;a.push(i);var h=[];for(let t=0;t<l;t++)h.push(i);p={marker:{color:h}};Plotly.restyle(tester,p),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}var b=document.getElementById(id_header),y=document.getElementById(id6),u=$(".global_header_bgcolor").val();change_header_bgcolor(y,b,u);var m=$(".global_header_color").val();change_header_color(y,b,m);var f=$(".global_header_fontsize").val();change_header_fontsize(y,b,f);var v=$(".global_header_fontweight").val();change_header_fontweight(y,b,v),$(`#${id_header_bgcolor}`).val(u),$(`#${id_header_color}`).val(m),$(`#${id_header_fontsize}`).val(f),$(`#${id_header_fontweight}`).val(v).trigger("change");var x=$(".global_header_fontstyle").val();change_header_fontstyle(y,b,x),$(`#${id_header_fontstyle}`).val(x).trigger("change");var w=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(w).trigger("change"),change_header_alignment(y,b,w),$(`#${id6}`).attr("data-header_alignment",w),$(`#${id6}`).attr("data-header_color",m),$(`#${id6}`).attr("data-header_bgcolor",u),$(`#${id6}`).attr("data-header_fontsize",f),$(`#${id6}`).attr("data-header_fontweight",v);var k=$(".global_shadow").prop("checked"),I=$(".global_border").prop("checked"),B=$(".global_shadow_color").val(),E=$(".global_shadow_x").val(),D=$(".global_shadow_y").val(),S=$(".global_shadow_blur").val(),C=$(".global_shadow_thickness").val();change_shadow_global(y,k,B,E,D,S,C);var T=$(".global_border_color").val(),N=$(".global_border_thickness").val(),O=$(".global_border_style").val();change_border_global(y,I,T,N,O),$(`#${id_shadow}`).prop("checked",k),$(`#${id_border}`).prop("checked",I),$(`#${id_shadow_color}`).val(B),$(`#${id_xshadow}`).val(E),$(`#${id_yshadow}`).val(D),$(`#${id_blurshadow}`).val(S),$(`#${id_shadow_thickness}`).val(C),$(`#${id_border_color}`).val(T),$(`#${id_border_thickness}`).val(N),$(`#${id_border_style}`).val(O).trigger("change"),$(`#${id_border}`).val(I),$(`#${id_shadow}`).val(k),$(`#${id6}`).attr("data-shadecolor",B),$(`#${id6}`).attr("data-borderStyle",O),$(`#${id6}`).attr("data-borderThickness",N),$(`#${id6}`).attr("data-borderColor",T),$(`#${id6}`).attr("data-borderon",I),$(`#${id6}`).attr("data-shadowon",k),$(`#${id6}`).attr("data-shadowThick",C),$(`#${id6}`).attr("data-shadowblurry",S),$(`#${id6}`).attr("data-shadowY",D),$(`#${id6}`).attr("data-shadowX",E)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id_label_placement).onchange=function(){var t=document.getElementById(id_label_placement).value;if("top"==t){var a={textposition:"top center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("bottom"==t){a={textposition:"bottom center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("center"==t){a={textposition:"center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}var e=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",e)};var config_label_placement=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",config_label_placement),crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0];var update={text:[data.y_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value;if("show_labels"==t){var a=tester.data[0].y,e={mode:"markers+text",text:[a],textposition:"bottom center"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e={mode:"markers",text:"",textposition:"bottom center"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var o=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",o)},document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length;if($(`#${id24}`).prop("checked")){$(`#${id6}`).attr("data-grad_color","yes"),color=$(`#${id1}`).val();var a=[],e=[],o=[],l=(t=dataplot[0].x.length,$(`#${id1}`).val());for(let t=0;t<dataplot[0].x.length;t++){l=color;0==e.includes(data.x_axisdata[t])&&e.push(data.x_axisdata[t])}l=color;o.push(l);for(let t=0;t<e.length-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o[o.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));o.push(s)}for(let t=0;t<dataplot[0].x.length;t++)a.push(o[e.indexOf(data.x_axisdata[t])]);var c={marker:{color:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}else{$(`#${id6}`).attr("data-grad_color","no");t=dataplot[0].x.length,a=[],l=$(`#${id1}`).val();for(let e=0;e<t;e++)a.push(l);c={marker:{color:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var _=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",_)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;var l=document.getElementById(id4).value;o[a]=l;var d={marker:{color:o}};Plotly.restyle(tester,d,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var i=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",i)}}),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray;y_axis_title=tester.layout.yaxis.title.text;var l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{automargin:!0,showgrid:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{automargin:!0,showgrid:!1,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=(t.x,t.text),o=document.getElementById(id13).value,l={};l[e]=o,changed_text.push(l),$.each(a,function(t,l){l==e&&(a[t]=o)});var d={x:[a]};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].x);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"x")}),myPlot.on("plotly_deselect",function(){var t={id:chartDivId};reset_function(t)})}if("3D_Scatter"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));for(let t=0;t<colorlength;t++)colordata.push(color);var trace1={x:data.x_axisdata,y:data.y_axisdata,z:data.second_columndata,type:"scatter3d",mode:"markers",marker:{color:colordata}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:60,b:60,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,hovermode:"closest",yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,dataplot[0].z=data.second_columndata;var colorlength=data.x_axisdata.length,colordata=dataplot[0].marker.color;if(dataplot[0].marker.color.length!=colorlength){var colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;for(let t=0;t<colorlength;t++)colordata.push(color)}dataplot[0].marker.color=colordata;var layout=data.plotDict.layout}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.y_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),e.push(dataplot[0].z[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,datatable[0].cells.values[2]=dataplot[0].z,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n)
;var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);for(let t=0;t<x-1;t++)v.push(k);var I={marker:{color:v}};Plotly.restyle(tester,I),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++)a.push(l);var d={marker:{color:a}};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=document.getElementById(id_header),r=document.getElementById(id6),n=$(".global_header_bgcolor").val();change_header_bgcolor(r,i,n);var s=$(".global_header_color").val();change_header_color(r,i,s);var c=$(".global_header_fontsize").val();change_header_fontsize(r,i,c);var _=$(".global_header_fontweight").val();change_header_fontweight(r,i,_),$(`#${id_header_bgcolor}`).val(n),$(`#${id_header_color}`).val(s),$(`#${id_header_fontsize}`).val(c),$(`#${id_header_fontweight}`).val(_).trigger("change");var g=$(".global_header_fontstyle").val();change_header_fontstyle(r,i,g),$(`#${id_header_fontstyle}`).val(g).trigger("change");var p=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(p).trigger("change"),change_header_alignment(r,i,p),$(`#${id6}`).attr("data-header_alignment",p),$(`#${id6}`).attr("data-header_color",s),$(`#${id6}`).attr("data-header_bgcolor",n),$(`#${id6}`).attr("data-header_fontsize",c),$(`#${id6}`).attr("data-header_fontweight",_);var h=$(".global_shadow").prop("checked"),b=$(".global_border").prop("checked"),y=$(".global_shadow_color").val(),u=$(".global_shadow_x").val(),m=$(".global_shadow_y").val(),f=$(".global_shadow_blur").val(),v=$(".global_shadow_thickness").val();change_shadow_global(r,h,y,u,m,f,v);var x=$(".global_border_color").val(),w=$(".global_border_thickness").val(),k=$(".global_border_style").val();change_border_global(r,b,x,w,k),$(`#${id_shadow}`).prop("checked",h),$(`#${id_border}`).prop("checked",b),$(`#${id_shadow_color}`).val(y),$(`#${id_xshadow}`).val(u),$(`#${id_yshadow}`).val(m),$(`#${id_blurshadow}`).val(f),$(`#${id_shadow_thickness}`).val(v),$(`#${id_border_color}`).val(x),$(`#${id_border_thickness}`).val(w),$(`#${id_border_style}`).val(k).trigger("change"),$(`#${id_border}`).val(b),$(`#${id_shadow}`).val(h),$(`#${id6}`).attr("data-shadecolor",y),$(`#${id6}`).attr("data-borderStyle",k),$(`#${id6}`).attr("data-borderThickness",w),$(`#${id6}`).attr("data-borderColor",x),$(`#${id6}`).attr("data-borderon",b),$(`#${id6}`).attr("data-shadowon",h),$(`#${id6}`).attr("data-shadowThick",v),$(`#${id6}`).attr("data-shadowblurry",f),$(`#${id6}`).attr("data-shadowY",m),$(`#${id6}`).attr("data-shadowX",u)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data[0].y;if("show_labels"==t){var e={mode:"markers+text",text:[a],textposition:"top"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e={mode:"markers",text:"",textposition:"bottom center"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var o=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",o)},document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);var o={marker:{color:a}};Plotly.restyle(tester,o),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var l=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",l)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray;y_axis_title=tester.layout.yaxis.title.text;var l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{automargin:!0,showgrid:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{automargin:!0,showgrid:!1,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=(t.x,t.text),o=document.getElementById(id13).value,l={};l[e]=o,changed_text.push(l),$.each(a,function(t,l){l==e&&(a[t]=o)});var d={x:[a]};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("3D_Mesh"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));for(let t=0;t<colorlength;t++)colordata.push(color);var trace1={x:data.x_axisdata,y:data.y_axisdata,z:data.second_columndata,type:"mesh3d",color:color},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:60,b:60,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,hovermode:"closest",yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,dataplot[0].z=data.second_columndata;var colorlength=data.x_axisdata.length,colordata=[];for(let t=0;t<colorlength;t++)colordata.push("#b8860b");var layout=data.plotDict.layout}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.y_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),e.push(dataplot[0].z[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,datatable[0].cells.values[2]=dataplot[0].z,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col);var k=col;k=col;v.push(k);for(let t=0;t<x-1;t++)v.push(k);var I={color:k};Plotly.restyle(tester,I),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++)a.push(l);var d={color:l};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=document.getElementById(id_header),r=document.getElementById(id6),n=$(".global_header_bgcolor").val();change_header_bgcolor(r,i,n);var s=$(".global_header_color").val();change_header_color(r,i,s);var c=$(".global_header_fontsize").val();change_header_fontsize(r,i,c);var _=$(".global_header_fontweight").val();change_header_fontweight(r,i,_),$(`#${id_header_bgcolor}`).val(n),$(`#${id_header_color}`).val(s),$(`#${id_header_fontsize}`).val(c),$(`#${id_header_fontweight}`).val(_).trigger("change");var g=$(".global_header_fontstyle").val();change_header_fontstyle(r,i,g),$(`#${id_header_fontstyle}`).val(g).trigger("change");var p=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(p).trigger("change"),change_header_alignment(r,i,p),$(`#${id6}`).attr("data-header_alignment",p),$(`#${id6}`).attr("data-header_color",s),$(`#${id6}`).attr("data-header_bgcolor",n),$(`#${id6}`).attr("data-header_fontsize",c),$(`#${id6}`).attr("data-header_fontweight",_);var h=$(".global_shadow").prop("checked"),b=$(".global_border").prop("checked"),y=$(".global_shadow_color").val(),u=$(".global_shadow_x").val(),m=$(".global_shadow_y").val(),f=$(".global_shadow_blur").val(),v=$(".global_shadow_thickness").val();change_shadow_global(r,h,y,u,m,f,v);var x=$(".global_border_color").val(),w=$(".global_border_thickness").val(),k=$(".global_border_style").val();change_border_global(r,b,x,w,k),$(`#${id_shadow}`).prop("checked",h),$(`#${id_border}`).prop("checked",b),$(`#${id_shadow_color}`).val(y),$(`#${id_xshadow}`).val(u),$(`#${id_yshadow}`).val(m),$(`#${id_blurshadow}`).val(f),$(`#${id_shadow_thickness}`).val(v),$(`#${id_border_color}`).val(x),$(`#${id_border_thickness}`).val(w),$(`#${id_border_style}`).val(k).trigger("change"),$(`#${id_border}`).val(b),$(`#${id_shadow}`).val(h),$(`#${id6}`).attr("data-shadecolor",y),$(`#${id6}`).attr("data-borderStyle",k),$(`#${id6}`).attr("data-borderThickness",w),$(`#${id6}`).attr("data-borderColor",x),$(`#${id6}`).attr("data-borderon",b),$(`#${id6}`).attr("data-shadowon",h),$(`#${id6}`).attr("data-shadowThick",v),$(`#${id6}`).attr("data-shadowblurry",f),$(`#${id6}`).attr("data-shadowY",m),$(`#${id6}`).attr("data-shadowX",u)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data[0].y;if("show_labels"==t){var e={mode:"markers+text",text:[a],textposition:"top"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e={mode:"markers",text:"",textposition:"bottom center"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var o=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",o)},document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);var o={color:e};Plotly.restyle(tester,o),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var l=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",l)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value;y_axis_title=tester.layout.yaxis.title.text;var a=tester.layout.xaxis.title.text;if("show_gridlines"==t){var e={yaxis:{automargin:!0,showgrid:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{automargin:!0,showgrid:!1,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],
plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=(t.x,t.text),o=document.getElementById(id13).value,l={};l[e]=o,changed_text.push(l),$.each(a,function(t,l){l==e&&(a[t]=o)});var d={x:[a]};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("2D_Histogram_Contour"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=data.colordata;x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),trace1={x:data.x_axisdata,y:data.y_axisdata,type:"histogram2d",colorscale:color},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,hovermode:"closest",yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length,colordata=data.colordata}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w);var k={colorscale:w};Plotly.restyle(tester,k),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var o=col;o=col;a.push(o);var l={colorscale:o};Plotly.restyle(tester,l),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=document.getElementById(id_header),i=document.getElementById(id6),r=$(".global_header_bgcolor").val();change_header_bgcolor(i,d,r);var n=$(".global_header_color").val();change_header_color(i,d,n);var s=$(".global_header_fontsize").val();change_header_fontsize(i,d,s);var c=$(".global_header_fontweight").val();change_header_fontweight(i,d,c),$(`#${id_header_bgcolor}`).val(r),$(`#${id_header_color}`).val(n),$(`#${id_header_fontsize}`).val(s),$(`#${id_header_fontweight}`).val(c).trigger("change");var _=$(".global_header_fontstyle").val();change_header_fontstyle(i,d,_),$(`#${id_header_fontstyle}`).val(_).trigger("change");var g=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(g).trigger("change"),change_header_alignment(i,d,g),$(`#${id6}`).attr("data-header_alignment",g),$(`#${id6}`).attr("data-header_color",n),$(`#${id6}`).attr("data-header_bgcolor",r),$(`#${id6}`).attr("data-header_fontsize",s),$(`#${id6}`).attr("data-header_fontweight",c);var p=$(".global_shadow").prop("checked"),h=$(".global_border").prop("checked"),b=$(".global_shadow_color").val(),y=$(".global_shadow_x").val(),u=$(".global_shadow_y").val(),m=$(".global_shadow_blur").val(),f=$(".global_shadow_thickness").val();change_shadow_global(i,p,b,y,u,m,f);var v=$(".global_border_color").val(),x=$(".global_border_thickness").val(),w=$(".global_border_style").val();change_border_global(i,h,v,x,w),$(`#${id_shadow}`).prop("checked",p),$(`#${id_border}`).prop("checked",h),$(`#${id_shadow_color}`).val(b),$(`#${id_xshadow}`).val(y),$(`#${id_yshadow}`).val(u),$(`#${id_blurshadow}`).val(m),$(`#${id_shadow_thickness}`).val(f),$(`#${id_border_color}`).val(v),$(`#${id_border_thickness}`).val(x),$(`#${id_border_style}`).val(w).trigger("change"),$(`#${id_border}`).val(h),$(`#${id_shadow}`).val(p),$(`#${id6}`).attr("data-shadecolor",b),$(`#${id6}`).attr("data-borderStyle",w),$(`#${id6}`).attr("data-borderThickness",x),$(`#${id6}`).attr("data-borderColor",v),$(`#${id6}`).attr("data-borderon",h),$(`#${id6}`).attr("data-shadowon",p),$(`#${id6}`).attr("data-shadowThick",f),$(`#${id6}`).attr("data-shadowblurry",m),$(`#${id6}`).attr("data-shadowY",u),$(`#${id6}`).attr("data-shadowX",y)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;e=this.value;a.push(e);for(let e=0;e<t-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));a.push(r)}var n={colorscale:e};Plotly.restyle(tester,n),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var s=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",s)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l);var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l);var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e);var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e);var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=(t.x,t.text),o=document.getElementById(id13).value,l={};l[e]=o,changed_text.push(l),$.each(a,function(t,l){l==e&&(a[t]=o)});var d={x:[a]};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t)},chartResizeable(id6,tester)}if("Vertical_Box"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),trace1={x:data.x_axisdata,y:data.y_axisdata,type:"box",boxpoints:!1,marker:{color:color}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,hovermode:"closest",yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),
$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);for(let t=0;t<x-1;t++)v.push(k);var I={marker:{color:k}};Plotly.restyle(tester,I),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++)a.push(l);var d={marker:{color:l}};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=document.getElementById(id_header),r=document.getElementById(id6),n=$(".global_header_bgcolor").val();change_header_bgcolor(r,i,n);var s=$(".global_header_color").val();change_header_color(r,i,s);var c=$(".global_header_fontsize").val();change_header_fontsize(r,i,c);var _=$(".global_header_fontweight").val();change_header_fontweight(r,i,_),$(`#${id_header_bgcolor}`).val(n),$(`#${id_header_color}`).val(s),$(`#${id_header_fontsize}`).val(c),$(`#${id_header_fontweight}`).val(_).trigger("change");var g=$(".global_header_fontstyle").val();change_header_fontstyle(r,i,g),$(`#${id_header_fontstyle}`).val(g).trigger("change");var p=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(p).trigger("change"),change_header_alignment(r,i,p),$(`#${id6}`).attr("data-header_alignment",p),$(`#${id6}`).attr("data-header_color",s),$(`#${id6}`).attr("data-header_bgcolor",n),$(`#${id6}`).attr("data-header_fontsize",c),$(`#${id6}`).attr("data-header_fontweight",_);var h=$(".global_shadow").prop("checked"),b=$(".global_border").prop("checked"),y=$(".global_shadow_color").val(),u=$(".global_shadow_x").val(),m=$(".global_shadow_y").val(),f=$(".global_shadow_blur").val(),v=$(".global_shadow_thickness").val();change_shadow_global(r,h,y,u,m,f,v);var x=$(".global_border_color").val(),w=$(".global_border_thickness").val(),k=$(".global_border_style").val();change_border_global(r,b,x,w,k),$(`#${id_shadow}`).prop("checked",h),$(`#${id_border}`).prop("checked",b),$(`#${id_shadow_color}`).val(y),$(`#${id_xshadow}`).val(u),$(`#${id_yshadow}`).val(m),$(`#${id_blurshadow}`).val(f),$(`#${id_shadow_thickness}`).val(v),$(`#${id_border_color}`).val(x),$(`#${id_border_thickness}`).val(w),$(`#${id_border_style}`).val(k).trigger("change"),$(`#${id_border}`).val(b),$(`#${id_shadow}`).val(h),$(`#${id6}`).attr("data-shadecolor",y),$(`#${id6}`).attr("data-borderStyle",k),$(`#${id6}`).attr("data-borderThickness",w),$(`#${id6}`).attr("data-borderColor",x),$(`#${id6}`).attr("data-borderon",b),$(`#${id6}`).attr("data-shadowon",h),$(`#${id6}`).attr("data-shadowThick",v),$(`#${id6}`).attr("data-shadowblurry",f),$(`#${id6}`).attr("data-shadowY",m),$(`#${id6}`).attr("data-shadowX",u)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);var o={marker:{color:e}};Plotly.restyle(tester,o),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var l=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",l)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value;y_axis_title=tester.layout.yaxis.title.text;var a=tester.layout.xaxis.title.text;if("show_gridlines"==t){var e={yaxis:{automargin:!0,showgrid:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{automargin:!0,showgrid:!1,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=(t.x,t.text),o=document.getElementById(id13).value,l={};l[e]=o,changed_text.push(l),$.each(a,function(t,l){l==e&&(a[t]=o)});var d={x:[a]};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Vertical_Violin"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),trace1={x:data.x_axisdata,y:data.y_axisdata,type:"violin",boxpoints:!1,marker:{color:color}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,hovermode:"closest",yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),layout=data.plotDict.layout,colorlength=data.x_axisdata.length,colordata=data.colordata}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);for(let t=0;t<x-1;t++)v.push(k);var I={marker:{color:k}};Plotly.restyle(tester,I),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++)a.push(l);var d={marker:{color:l}};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=document.getElementById(id_header),r=document.getElementById(id6),n=$(".global_header_bgcolor").val();change_header_bgcolor(r,i,n);var s=$(".global_header_color").val();change_header_color(r,i,s);var c=$(".global_header_fontsize").val();change_header_fontsize(r,i,c);var _=$(".global_header_fontweight").val();change_header_fontweight(r,i,_),$(`#${id_header_bgcolor}`).val(n),$(`#${id_header_color}`).val(s),$(`#${id_header_fontsize}`).val(c),$(`#${id_header_fontweight}`).val(_).trigger("change");var g=$(".global_header_fontstyle").val();change_header_fontstyle(r,i,g),$(`#${id_header_fontstyle}`).val(g).trigger("change");var p=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(p).trigger("change"),change_header_alignment(r,i,p),$(`#${id6}`).attr("data-header_alignment",p),$(`#${id6}`).attr("data-header_color",s),$(`#${id6}`).attr("data-header_bgcolor",n),$(`#${id6}`).attr("data-header_fontsize",c),$(`#${id6}`).attr("data-header_fontweight",_);var h=$(".global_shadow").prop("checked"),b=$(".global_border").prop("checked"),y=$(".global_shadow_color").val(),u=$(".global_shadow_x").val(),m=$(".global_shadow_y").val(),f=$(".global_shadow_blur").val(),v=$(".global_shadow_thickness").val();change_shadow_global(r,h,y,u,m,f,v);var x=$(".global_border_color").val(),w=$(".global_border_thickness").val(),k=$(".global_border_style").val();change_border_global(r,b,x,w,k),$(`#${id_shadow}`).prop("checked",h),$(`#${id_border}`).prop("checked",b),$(`#${id_shadow_color}`).val(y),$(`#${id_xshadow}`).val(u),$(`#${id_yshadow}`).val(m),$(`#${id_blurshadow}`).val(f),$(`#${id_shadow_thickness}`).val(v),$(`#${id_border_color}`).val(x),$(`#${id_border_thickness}`).val(w),$(`#${id_border_style}`).val(k).trigger("change"),$(`#${id_border}`).val(b),$(`#${id_shadow}`).val(h),$(`#${id6}`).attr("data-shadecolor",y),$(`#${id6}`).attr("data-borderStyle",k),$(`#${id6}`).attr("data-borderThickness",w),$(`#${id6}`).attr("data-borderColor",x),$(`#${id6}`).attr("data-borderon",b),$(`#${id6}`).attr("data-shadowon",h),$(`#${id6}`).attr("data-shadowThick",v),$(`#${id6}`).attr("data-shadowblurry",f),$(`#${id6}`).attr("data-shadowY",m),$(`#${id6}`).attr("data-shadowX",u)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);var o={marker:{color:e}};Plotly.restyle(tester,o),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var l=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",l)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;var l=document.getElementById(id4).value;o[a]=l;var d={marker:{color:o}};Plotly.restyle(tester,d,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}}),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value
;y_axis_title=tester.layout.yaxis.title.text;var a=tester.layout.xaxis.title.text;if("show_gridlines"==t){var e={yaxis:{automargin:!0,showgrid:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{automargin:!0,showgrid:!1,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=(t.x,t.text),o=document.getElementById(id13).value,l={};l[e]=o,changed_text.push(l),$.each(a,function(t,l){l==e&&(a[t]=o)});var d={x:[a]};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Horizontal_Dot_Plot"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),new_colordata=[],new_x_axislist=[];if("yes"==global_gradient){for(let t=0;t<data.x_axisdata.length;t++){var backRGB=color;0==new_x_axislist.includes(data.x_axisdata[t])&&new_x_axislist.push(data.x_axisdata[t])}var backRGB=color;new_colordata.push(backRGB);for(let t=0;t<new_x_axislist.length-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(new_colordata[new_colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));new_colordata.push(newHex)}for(let t=0;t<data.x_axisdata.length;t++)colordata.push(new_colordata[new_x_axislist.indexOf(data.x_axisdata[t])])}else for(let t=0;t<colorlength;t++)colordata.push(color);var trace1={x:data.x_axisdata,y:data.y_axisdata,mode:"markers",marker:{color:colordata,symbol:"circle"}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,hovermode:"closest",yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata;var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),colorlength=data.x_axisdata.length,colordata=dataplot[0].marker.color;if(dataplot[0].marker.color.length!=colorlength){var colordata=[],new_colordata=[],new_x_axislist=[];if(x_axis=data.x_axis,y_axis=data.y_axis,"yes"==grad_color){for(let t=0;t<data.x_axisdata.length;t++){var backRGB=color;0==new_x_axislist.includes(data.x_axisdata[t])&&new_x_axislist.push(data.x_axisdata[t])}var backRGB=color;new_colordata.push(backRGB);for(let t=0;t<new_x_axislist.length-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(new_colordata[new_colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));new_colordata.push(newHex)}for(let t=0;t<data.x_axisdata.length;t++)colordata.push(new_colordata[new_x_axislist.indexOf(data.x_axisdata[t])])}else for(let t=0;t<colorlength;t++)colordata.push(color)}dataplot[0].marker.color=colordata;var layout=data.plotDict.layout}"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(`#${id24}`).click(function(){if($(this).prop("checked")){color=$(`#${id1}`).val();var t=[],a=dataplot[0].x.length,e=$(`#${id1}`).val(),o=[],l=[];for(let t=0;t<dataplot[0].x.length;t++){e=color;0==o.includes(dataplot[0].x[t])&&o.push(dataplot[0].x[t])}e=color;l.push(e);for(let t=0;t<o.length-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l[l.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));l.push(s)}for(let a=0;a<dataplot[0].x.length;a++)t.push(l[o.indexOf(dataplot[0].x[a])]);var c={marker:{color:t}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-grad_color","yes")}else{a=dataplot[0].x.length,t=[],e=$(`#${id1}`).val();for(let o=0;o<a;o++)t.push(e);c={marker:{color:t}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-grad_color","no")}}),$(`#${id_label_placement}`).val(label);var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.y_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0);var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block");var t=document.getElementById(id_table);$(`#${id_table_export}`).css("display","block"),Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype});var x_axis_end=tester.layout.xaxis.range[1],x_axis_start=tester.layout.xaxis.range[0];$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(".global_gradient_color").prop("checked")?($(`#${id24}`).prop("checked",!0),$(`#${id6}`).attr("data-grad_color","yes")):($(`#${id24}`).prop("checked",!1),$(`#${id6}`).attr("data-grad_color","no")),$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");if(r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),$(`#${id24}`).prop("checked")){$(`#${id6}`).attr("data-grad_color","yes");var I=[],B=[];for(let t=0;t<dataplot[0].x.length;t++){var E=col;0==I.includes(dataplot[0].x[t])&&I.push(dataplot[0].x[t])}E=col;B.push(E);for(let t=0;t<I.length-1;t++){var D=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(B[B.length-1]),S=.8*parseInt(D[1],16),C=.8*parseInt(D[2],16),T=.8*parseInt(D[3],16),N="#"+componentToHex(Math.round(S))+componentToHex(Math.round(C))+componentToHex(Math.round(T));B.push(N)}for(let t=0;t<dataplot[0].x.length;t++)v.push(B[I.indexOf(dataplot[0].x[t])])}else{k=col;v.push(k),$(`#${id6}`).attr("data-grad_color","no");for(let t=0;t<x-1;t++)v.push(k)}var O={marker:{color:v}};Plotly.restyle(tester,O),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");if($(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),$(".global_gradient_color").prop("checked")){$(`#${id24}`).prop("checked",!0),$(`#${id6}`).attr("data-grad_color","yes"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=[],o=[],l=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var d=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":d[(rgb[1]-rgb[1]%16)/16]+d[rgb[1]%16],g1=isNaN(rgb[2])?"00":d[(rgb[2]-rgb[2]%16)/16]+d[rgb[2]%16],b1=isNaN(rgb[3])?"00":d[(rgb[3]-rgb[3]%16)/16]+d[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);d=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":d[(rgb[1]-rgb[1]%16)/16]+d[rgb[1]%16],g1=isNaN(rgb[2])?"00":d[(rgb[2]-rgb[2]%16)/16]+d[rgb[2]%16],b1=isNaN(rgb[3])?"00":d[(rgb[3]-rgb[3]%16)/16]+d[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var i=col;i=col;for(let t=0;t<dataplot[0].x.length;t++){var r=col;0==e.includes(dataplot[0].x[t])&&e.push(dataplot[0].x[t])}r=col;o.push(r);for(let t=0;t<e.length-1;t++){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o[o.length-1]),s=.8*parseInt(n[1],16),c=.8*parseInt(n[2],16),_=.8*parseInt(n[3],16),g="#"+componentToHex(Math.round(s))+componentToHex(Math.round(c))+componentToHex(Math.round(_));o.push(g)}for(let t=0;t<dataplot[0].x.length;t++)a.push(o[e.indexOf(dataplot[0].x[t])]);var p={marker:{color:a}};Plotly.restyle(tester,p),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}else{$(`#${id24}`).prop("checked",!1),$(`#${id6}`).attr("data-grad_color","no"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;a=[],l=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);d=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":d[(rgb[1]-rgb[1]%16)/16]+d[rgb[1]%16],g1=isNaN(rgb[2])?"00":d[(rgb[2]-rgb[2]%16)/16]+d[rgb[2]%16],b1=isNaN(rgb[3])?"00":d[(rgb[3]-rgb[3]%16)/16]+d[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);d=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":d[(rgb[1]-rgb[1]%16)/16]+d[rgb[1]%16],g1=isNaN(rgb[2])?"00":d[(rgb[2]-rgb[2]%16)/16]+d[rgb[2]%16],b1=isNaN(rgb[3])?"00":d[(rgb[3]-rgb[3]%16)/16]+d[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col);i=col,i=col;a.push(i);var h=[];for(let t=0;t<l;t++)h.push(i);p={marker:{color:h}};Plotly.restyle(tester,p),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}var b=document.getElementById(id_header),y=document.getElementById(id6),u=$(".global_header_bgcolor").val();change_header_bgcolor(y,b,u);var m=$(".global_header_color").val();change_header_color(y,b,m);var f=$(".global_header_fontsize").val();change_header_fontsize(y,b,f);var v=$(".global_header_fontweight").val();change_header_fontweight(y,b,v),$(`#${id_header_bgcolor}`).val(u),$(`#${id_header_color}`).val(m),$(`#${id_header_fontsize}`).val(f),$(`#${id_header_fontweight}`).val(v).trigger("change");var x=$(".global_header_fontstyle").val();change_header_fontstyle(y,b,x),$(`#${id_header_fontstyle}`).val(x).trigger("change");var w=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(w).trigger("change"),change_header_alignment(y,b,w),$(`#${id6}`).attr("data-header_alignment",w),$(`#${id6}`).attr("data-header_color",m),$(`#${id6}`).attr("data-header_bgcolor",u),$(`#${id6}`).attr("data-header_fontsize",f),$(`#${id6}`).attr("data-header_fontweight",v);var k=$(".global_shadow").prop("checked"),I=$(".global_border").prop("checked"),B=$(".global_shadow_color").val(),E=$(".global_shadow_x").val(),D=$(".global_shadow_y").val(),S=$(".global_shadow_blur").val(),C=$(".global_shadow_thickness").val();change_shadow_global(y,k,B,E,D,S,C);var T=$(".global_border_color").val(),N=$(".global_border_thickness").val(),O=$(".global_border_style").val();change_border_global(y,I,T,N,O),$(`#${id_shadow}`).prop("checked",k),$(`#${id_border}`).prop("checked",I),$(`#${id_shadow_color}`).val(B),$(`#${id_xshadow}`).val(E),$(`#${id_yshadow}`).val(D),$(`#${id_blurshadow}`).val(S),$(`#${id_shadow_thickness}`).val(C),$(`#${id_border_color}`).val(T),$(`#${id_border_thickness}`).val(N),$(`#${id_border_style}`).val(O).trigger("change"),$(`#${id_border}`).val(I),$(`#${id_shadow}`).val(k),$(`#${id6}`).attr("data-shadecolor",B),$(`#${id6}`).attr("data-borderStyle",O),$(`#${id6}`).attr("data-borderThickness",N),$(`#${id6}`).attr("data-borderColor",T),$(`#${id6}`).attr("data-borderon",I),$(`#${id6}`).attr("data-shadowon",k),$(`#${id6}`).attr("data-shadowThick",C),$(`#${id6}`).attr("data-shadowblurry",S),$(`#${id6}`).attr("data-shadowY",D),$(`#${id6}`).attr("data-shadowX",E)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length;if($(`#${id24}`).prop("checked")){$(`#${id6}`).attr("data-grad_color","yes"),color=$(`#${id1}`).val();var a=[],e=[],o=[],l=(t=dataplot[0].x.length,$(`#${id1}`).val());for(let t=0;t<dataplot[0].x.length;t++){l=color;0==e.includes(data.x_axisdata[t])&&e.push(data.x_axisdata[t])}l=color;o.push(l);for(let t=0;t<e.length-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o[o.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));o.push(s)}for(let t=0;t<dataplot[0].x.length;t++)a.push(o[e.indexOf(data.x_axisdata[t])]);var c={marker:{color:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}else{$(`#${id6}`).attr("data-grad_color","no");t=dataplot[0].x.length,a=[],l=$(`#${id1}`).val();for(let e=0;e<t;e++)a.push(l);c={marker:{color:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var _=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",_)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;var l=document.getElementById(id4).value;o[a]=l;var d={marker:{color:o}},i=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",i),Plotly.restyle(tester,d,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}}),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[1],l=tester.layout.yaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[e,o],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",r)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[0],l=tester.layout.xaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[o,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",r)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value;y_axis_title=tester.layout.yaxis.title.text;var a=tester.layout.xaxis.title.text;if("show_gridlines"==t){var e={yaxis:{automargin:!0,showgrid:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{automargin:!0,showgrid:!1,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.yaxis.categoryorder,o=a.yaxis.categoryarray;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var l=tester.layout.yaxis.showgrid,d={yaxis:{range:[y_axis_start,y_axis_end],showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",i)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title);var config_labels=$(`#${id_labels}`).val()
;$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_label_placement).onchange=function(){var t=document.getElementById(id_label_placement).value;if("top"==t){var a={textposition:"top center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("bottom"==t){a={textposition:"bottom center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("center"==t){a={textposition:"center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}var e=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",e)};var config_label_placement=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",config_label_placement),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value;if(y_axisdata=tester.data[0].y,"show_labels"==t){var a={mode:"markers+text",text:[y_axisdata],textposition:"bottom center"};Plotly.restyle(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){a={mode:"markers",text:"",textposition:"bottom center"};Plotly.restyle(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var e=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",e)},myPlot.on("plotly_afterplot",function(){d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].y,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={y:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].y);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"y")})}if("Horizontal_Box"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),trace1={x:data.x_axisdata,y:data.y_axisdata,type:"box",boxpoints:!1,marker:{color:color},orientation:"h"},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,hovermode:"closest",yaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata;var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata.push(dataplot[0].x),tabledata.push(dataplot[0].y);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype});var x_axis_end=tester.layout.xaxis.range[1],x_axis_start=tester.layout.xaxis.range[0];$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);for(let t=0;t<x-1;t++)v.push(k);var I={marker:{color:k}};Plotly.restyle(tester,I),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++)a.push(l);var d={marker:{color:l}};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=document.getElementById(id_header),r=document.getElementById(id6),n=$(".global_header_bgcolor").val();change_header_bgcolor(r,i,n);var s=$(".global_header_color").val();change_header_color(r,i,s);var c=$(".global_header_fontsize").val();change_header_fontsize(r,i,c);var _=$(".global_header_fontweight").val();change_header_fontweight(r,i,_),$(`#${id_header_bgcolor}`).val(n),$(`#${id_header_color}`).val(s),$(`#${id_header_fontsize}`).val(c),$(`#${id_header_fontweight}`).val(_).trigger("change");var g=$(".global_header_fontstyle").val();change_header_fontstyle(r,i,g),$(`#${id_header_fontstyle}`).val(g).trigger("change");var p=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(p).trigger("change"),change_header_alignment(r,i,p),$(`#${id6}`).attr("data-header_alignment",p),$(`#${id6}`).attr("data-header_color",s),$(`#${id6}`).attr("data-header_bgcolor",n),$(`#${id6}`).attr("data-header_fontsize",c),$(`#${id6}`).attr("data-header_fontweight",_);var h=$(".global_shadow").prop("checked"),b=$(".global_border").prop("checked"),y=$(".global_shadow_color").val(),u=$(".global_shadow_x").val(),m=$(".global_shadow_y").val(),f=$(".global_shadow_blur").val(),v=$(".global_shadow_thickness").val();change_shadow_global(r,h,y,u,m,f,v);var x=$(".global_border_color").val(),w=$(".global_border_thickness").val(),k=$(".global_border_style").val();change_border_global(r,b,x,w,k),$(`#${id_shadow}`).prop("checked",h),$(`#${id_border}`).prop("checked",b),$(`#${id_shadow_color}`).val(y),$(`#${id_xshadow}`).val(u),$(`#${id_yshadow}`).val(m),$(`#${id_blurshadow}`).val(f),$(`#${id_shadow_thickness}`).val(v),$(`#${id_border_color}`).val(x),$(`#${id_border_thickness}`).val(w),$(`#${id_border_style}`).val(k).trigger("change"),$(`#${id_border}`).val(b),$(`#${id_shadow}`).val(h),$(`#${id6}`).attr("data-shadecolor",y),$(`#${id6}`).attr("data-borderStyle",k),$(`#${id6}`).attr("data-borderThickness",w),$(`#${id6}`).attr("data-borderColor",x),$(`#${id6}`).attr("data-borderon",b),$(`#${id6}`).attr("data-shadowon",h),$(`#${id6}`).attr("data-shadowThick",v),$(`#${id6}`).attr("data-shadowblurry",f),$(`#${id6}`).attr("data-shadowY",m),$(`#${id6}`).attr("data-shadowX",u)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){dataplot[0].x.length;var t=this.value,a={marker:{color:t}};Plotly.restyle(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var e=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[1],l=tester.layout.yaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[e,o],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",r)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[0],l=tester.layout.xaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[o,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",r)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;var l=document.getElementById(id4).value;o[a]=l;var d={marker:{color:o}};Plotly.restyle(tester,d,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}}),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value;y_axis_title=tester.layout.yaxis.title.text;var a=tester.layout.xaxis.title.text;if("show_gridlines"==t){var e={yaxis:{automargin:!0,showgrid:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{automargin:!0,showgrid:!1,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),myPlot.on("plotly_afterplot",function(){d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].y,e=(t.x,t.text),o=document.getElementById(id13).value,l={};l[e]=o,changed_text.push(l),$.each(a,function(t,l){l==e&&(a[t]=o)});var d={y:[a]};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Horizontal_Violin"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),trace1={x:data.x_axisdata,y:data.y_axisdata,type:"violin",boxpoints:!1,marker:{color:color},orientation:"h"},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,hovermode:"closest",yaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata;var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype});var x_axis_end=tester.layout.xaxis.range[1],x_axis_start=tester.layout.xaxis.range[0];$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),
$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);for(let t=0;t<x-1;t++)v.push(k);var I={marker:{color:k}};Plotly.restyle(tester,I),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++)a.push(l);var d={marker:{color:l}};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=document.getElementById(id_header),r=document.getElementById(id6),n=$(".global_header_bgcolor").val();change_header_bgcolor(r,i,n);var s=$(".global_header_color").val();change_header_color(r,i,s);var c=$(".global_header_fontsize").val();change_header_fontsize(r,i,c);var _=$(".global_header_fontweight").val();change_header_fontweight(r,i,_),$(`#${id_header_bgcolor}`).val(n),$(`#${id_header_color}`).val(s),$(`#${id_header_fontsize}`).val(c),$(`#${id_header_fontweight}`).val(_).trigger("change");var g=$(".global_header_fontstyle").val();change_header_fontstyle(r,i,g),$(`#${id_header_fontstyle}`).val(g).trigger("change");var p=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(p).trigger("change"),change_header_alignment(r,i,p),$(`#${id6}`).attr("data-header_alignment",p),$(`#${id6}`).attr("data-header_color",s),$(`#${id6}`).attr("data-header_bgcolor",n),$(`#${id6}`).attr("data-header_fontsize",c),$(`#${id6}`).attr("data-header_fontweight",_);var h=$(".global_shadow").prop("checked"),b=$(".global_border").prop("checked"),y=$(".global_shadow_color").val(),u=$(".global_shadow_x").val(),m=$(".global_shadow_y").val(),f=$(".global_shadow_blur").val(),v=$(".global_shadow_thickness").val();change_shadow_global(r,h,y,u,m,f,v);var x=$(".global_border_color").val(),w=$(".global_border_thickness").val(),k=$(".global_border_style").val();change_border_global(r,b,x,w,k),$(`#${id_shadow}`).prop("checked",h),$(`#${id_border}`).prop("checked",b),$(`#${id_shadow_color}`).val(y),$(`#${id_xshadow}`).val(u),$(`#${id_yshadow}`).val(m),$(`#${id_blurshadow}`).val(f),$(`#${id_shadow_thickness}`).val(v),$(`#${id_border_color}`).val(x),$(`#${id_border_thickness}`).val(w),$(`#${id_border_style}`).val(k).trigger("change"),$(`#${id_border}`).val(b),$(`#${id_shadow}`).val(h),$(`#${id6}`).attr("data-shadecolor",y),$(`#${id6}`).attr("data-borderStyle",k),$(`#${id6}`).attr("data-borderThickness",w),$(`#${id6}`).attr("data-borderColor",x),$(`#${id6}`).attr("data-borderon",b),$(`#${id6}`).attr("data-shadowon",h),$(`#${id6}`).attr("data-shadowThick",v),$(`#${id6}`).attr("data-shadowblurry",f),$(`#${id6}`).attr("data-shadowY",m),$(`#${id6}`).attr("data-shadowX",u)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){dataplot[0].x.length;var t=this.value,a={marker:{color:t}};Plotly.restyle(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var e=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[1],l=tester.layout.yaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[e,o],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",r)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[0],l=tester.layout.xaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[o,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",r)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;var l=document.getElementById(id4).value;o[a]=l;var d={marker:{color:o}};Plotly.restyle(tester,d,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}}),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value;y_axis_title=tester.layout.yaxis.title.text;var a=tester.layout.xaxis.title.text;if("show_gridlines"==t){var e={yaxis:{automargin:!0,showgrid:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{automargin:!0,showgrid:!1,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),myPlot.on("plotly_afterplot",function(){d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].y,e=(t.x,t.text),o=document.getElementById(id13).value,l={};l[e]=o,changed_text.push(l),$.each(a,function(t,l){l==e&&(a[t]=o)});var d={y:[a]};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Scatter_with_Straight_Lines_and_Markers"==String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));for(let t=0;t<colorlength;t++)colordata.push(color);var trace1={x:data.x_axisdata,y:data.y_axisdata,mode:"lines+markers",marker:{color:colordata},line:{color:color,width:2}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,hovermode:"closest",yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata;var colorlength=data.x_axisdata.length,colordata=[],x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),colordata=dataplot[0].marker.color;if(dataplot[0].marker.color.length!=colorlength){var colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;for(let t=0;t<colorlength;t++)colordata.push(color)}dataplot[0].marker.color=colordata;var layout=data.plotDict.layout}$(`#${id_label_placement}`).val(label);var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.y_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block");var t=document.getElementById(id_table);$(`#${id_table_export}`).css("display","block"),Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);for(let t=0;t<x-1;t++)v.push(k);var I={marker:{color:v},line:{color:k,width:2}};Plotly.restyle(tester,I),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++)a.push(l);var d={marker:{color:a},line:{color:l,width:2}};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=document.getElementById(id_header),r=document.getElementById(id6),n=$(".global_header_bgcolor").val();change_header_bgcolor(r,i,n);var s=$(".global_header_color").val();change_header_color(r,i,s);var c=$(".global_header_fontsize").val();change_header_fontsize(r,i,c);var _=$(".global_header_fontweight").val();change_header_fontweight(r,i,_),$(`#${id_header_bgcolor}`).val(n),$(`#${id_header_color}`).val(s),$(`#${id_header_fontsize}`).val(c),$(`#${id_header_fontweight}`).val(_).trigger("change");var g=$(".global_header_fontstyle").val();change_header_fontstyle(r,i,g),$(`#${id_header_fontstyle}`).val(g).trigger("change");var p=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(p).trigger("change"),change_header_alignment(r,i,p),$(`#${id6}`).attr("data-header_alignment",p),$(`#${id6}`).attr("data-header_color",s),$(`#${id6}`).attr("data-header_bgcolor",n),$(`#${id6}`).attr("data-header_fontsize",c),$(`#${id6}`).attr("data-header_fontweight",_);var h=$(".global_shadow").prop("checked"),b=$(".global_border").prop("checked"),y=$(".global_shadow_color").val(),u=$(".global_shadow_x").val(),m=$(".global_shadow_y").val(),f=$(".global_shadow_blur").val(),v=$(".global_shadow_thickness").val();change_shadow_global(r,h,y,u,m,f,v);var x=$(".global_border_color").val(),w=$(".global_border_thickness").val(),k=$(".global_border_style").val();change_border_global(r,b,x,w,k),$(`#${id_shadow}`).prop("checked",h),$(`#${id_border}`).prop("checked",b),$(`#${id_shadow_color}`).val(y),$(`#${id_xshadow}`).val(u),$(`#${id_yshadow}`).val(m),$(`#${id_blurshadow}`).val(f),$(`#${id_shadow_thickness}`).val(v),$(`#${id_border_color}`).val(x),$(`#${id_border_thickness}`).val(w),$(`#${id_border_style}`).val(k).trigger("change"),$(`#${id_border}`).val(b),$(`#${id_shadow}`).val(h),$(`#${id6}`).attr("data-shadecolor",y),$(`#${id6}`).attr("data-borderStyle",k),$(`#${id6}`).attr("data-borderThickness",w),$(`#${id6}`).attr("data-borderColor",x),$(`#${id6}`).attr("data-borderon",b),$(`#${id6}`).attr("data-shadowon",h),$(`#${id6}`).attr("data-shadowThick",v),$(`#${id6}`).attr("data-shadowblurry",f),$(`#${id6}`).attr("data-shadowY",m),$(`#${id6}`).attr("data-shadowX",u)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id_label_placement).onchange=function(){var t=document.getElementById(id_label_placement).value;if("top"==t){var a={textposition:"top center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("bottom"==t){a={textposition:"bottom center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("center"==t){a={textposition:"center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}var e=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",e)},document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);var o={marker:{color:a},line:{color:e,width:2}};Plotly.restyle(tester,o),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var l=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",l)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value;if(y_axisdata=tester.data[0].y,"show_labels"==t){var a={mode:"lines+markers+text",text:[y_axisdata],textposition:"bottom center"};Plotly.restyle(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){a={mode:"lines+markers",text:"",textposition:"bottom center"};Plotly.restyle(tester,a),
$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var e=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",e)},document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),closeFilterModal(id_filter_close);var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)}}),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")};var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray;y_axis_title=tester.layout.yaxis.title.text;var l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{automargin:!0,showgrid:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{automargin:!0,showgrid:!1,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.text,o=document.getElementById(id13).value,l={};l[e]=o,changed_text.push(l),$.each(a,function(t,l){l==e&&(a[t]=o)});var d={x:[a]};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Pie_Chart"===String(graph_subtype)){var newcolor1;x_axis=data.x_axis,y_axis=data.y_axis,modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=data.colordata;x_axis=data.x_axis,y_axis=data.y_axis;var colorList=[],backRGB=color;colorList.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colorList[colorList.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colorList.push(newHex)}var trace1={values:data.y_axisdata,labels:data.x_axisdata,sort:!1,type:"pie",marker:{colors:colorList}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,legend:{orientation:"h"},margin:{l:40,r:40,b:40,t:10,pad:4},sort:!1}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].labels=data.x_axisdata,dataplot[0].values=data.y_axisdata,dataplot[0].sort=!1;var colorList=[],colorlength=data.x_axisdata.length,backRGB=color;colorList.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colorList[colorList.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colorList.push(newHex)}null!=plotDict.config_element_color&&plotDict.config_element_color.startsWith("[")?dataplot[0].marker.colors=JSON.parse(plotDict.config_element_color):dataplot[0].marker.colors=colorList;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length,colordata=data.colordata}var config={responsive:!0,displaylogo:!1};$(`#${id_label_placement}`).val(label).trigger("change"),$(`#${id_position_legends}`).val(legend_position).trigger("change"),Plotly.newPlot(tester,dataplot,layout,config),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),newcolor1=tester.data[0].marker.colors,$(`#${id6}`).attr("data-config_element_color",JSON.stringify(newcolor1));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].labels.length;a++){var e=[];e.push(dataplot[0].labels[a]),e.push(dataplot[0].values[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].labels,datatable[0].cells.values[1]=dataplot[0].values,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].labels.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);for(let t=0;t<x-1;t++){var I=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v[v.length-1]),B=.8*parseInt(I[1],16),E=.8*parseInt(I[2],16),D=.8*parseInt(I[3],16),S="#"+componentToHex(Math.round(B))+componentToHex(Math.round(E))+componentToHex(Math.round(D));v.push(S)}var C={marker:{colors:v}};Plotly.restyle(tester,C),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-config_element_color",JSON.stringify(tester.data[0].marker.colors)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-config_element_color",JSON.stringify(tester.data[0].marker.colors))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].labels.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}var c={marker:{colors:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-config_element_color",JSON.stringify(tester.data[0].marker.colors)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var _=document.getElementById(id_header),g=document.getElementById(id6),p=$(".global_header_bgcolor").val();change_header_bgcolor(g,_,p);var h=$(".global_header_color").val();change_header_color(g,_,h);var b=$(".global_header_fontsize").val();change_header_fontsize(g,_,b);var y=$(".global_header_fontweight").val();change_header_fontweight(g,_,y),$(`#${id_header_bgcolor}`).val(p),$(`#${id_header_color}`).val(h),$(`#${id_header_fontsize}`).val(b),$(`#${id_header_fontweight}`).val(y).trigger("change");var u=$(".global_header_fontstyle").val();change_header_fontstyle(g,_,u),$(`#${id_header_fontstyle}`).val(u).trigger("change");var m=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(m).trigger("change"),change_header_alignment(g,_,m),$(`#${id6}`).attr("data-header_alignment",m),$(`#${id6}`).attr("data-header_color",h),$(`#${id6}`).attr("data-header_bgcolor",p),$(`#${id6}`).attr("data-header_fontsize",b),$(`#${id6}`).attr("data-header_fontweight",y);var f=$(".global_shadow").prop("checked"),v=$(".global_border").prop("checked"),x=$(".global_shadow_color").val(),w=$(".global_shadow_x").val(),k=$(".global_shadow_y").val(),I=$(".global_shadow_blur").val(),B=$(".global_shadow_thickness").val();change_shadow_global(g,f,x,w,k,I,B);var E=$(".global_border_color").val(),D=$(".global_border_thickness").val(),S=$(".global_border_style").val();change_border_global(g,v,E,D,S),$(`#${id_shadow}`).prop("checked",f),$(`#${id_border}`).prop("checked",v),$(`#${id_shadow_color}`).val(x),$(`#${id_xshadow}`).val(w),$(`#${id_yshadow}`).val(k),$(`#${id_blurshadow}`).val(I),$(`#${id_shadow_thickness}`).val(B),$(`#${id_border_color}`).val(E),$(`#${id_border_thickness}`).val(D),$(`#${id_border_style}`).val(S).trigger("change"),$(`#${id_border}`).val(v),$(`#${id_shadow}`).val(f),$(`#${id6}`).attr("data-shadecolor",x),$(`#${id6}`).attr("data-borderStyle",S),$(`#${id6}`).attr("data-borderThickness",D),$(`#${id6}`).attr("data-borderColor",E),$(`#${id6}`).attr("data-borderon",v),$(`#${id6}`).attr("data-shadowon",f),$(`#${id6}`).attr("data-shadowThick",B),$(`#${id6}`).attr("data-shadowblurry",I),$(`#${id6}`).attr("data-shadowY",k),$(`#${id6}`).attr("data-shadowX",w)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].labels.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=dataplot[0].labels.length,a=[],e=this.value;e=this.value;a.push(e);for(let e=0;e<t-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));a.push(r)}var n={marker:{colors:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-config_element_color",JSON.stringify(tester.data[0].marker.colors)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var s=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",s)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id_showlabel).onclick=function(){var t=document.getElementById(id_showlabel).value;if("hide_labels"==t){var a={textinfo:"none"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_showlabel).value="show_labels",document.getElementById(id_showlabel).innerHTML="Show Labels"}else{a={textinfo:""};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_showlabel).value="hide_labels",document.getElementById(id_showlabel).innerHTML="Hide Labels"}var e=$(`#${id_showlabel}`).val();$(`#${id6}`).attr("data-config_labels",e)};var config_labels=$(`#${id_showlabel}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_label_placement).onchange=function(){var t=document.getElementById(id_label_placement).value;if("inside"==t){var a={textinfo:"",textposition:"inside"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("outside"==t){a={textposition:"outside"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}var e=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",e)};var config_label_placement=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",config_label_placement),document.getElementById(id_position_legends).onchange=function(){var t=document.getElementById(id_position_legends).value;if("bottom_centre"==t){var a={legend:{orientation:"h",position:"bottom_centre"}};Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}if("top_centre"==t){a={legend:{y:1.5,x:.3,position:"top_centre"}};Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var e={textinfo:""};Plotly.restyle(tester,e,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("top_left"==t){a={legend:{yanchor:"top",y:2,xanchor:"right",x:0,position:"top_left"}};Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}if("top_right"==t){a={legend:{yanchor:"top",y:2,xanchor:"left",x:2,position:"top_right"}};Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}if("bottom_left"==t){a={legend:{yanchor:"top",y:0,xanchor:"right",x:0,position:"bottom_left"}};Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}if("bottom_right"==t){a={legend:{yanchor:"top",y:0,xanchor:"right",x:2,position:"bottom_right"}};Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}},document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),newcolor1=JSON.parse($(`#${id6}`).attr("data-data")),$(`#${id6}`).attr("data-config_element_color",JSON.stringify(newcolor1[0].marker.colors)),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];a=t.points[0].pointNumber,e=t.points[0].curveNumber;for(let a=0;a<t.points.length;a++)o=t.points[0].data.marker.colors;color=document.getElementById(id4).value,o[a]=color;var l={marker:{colors:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-config_element_color",JSON.stringify(tester.data[0].marker.colors))}}),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){let t=$(this).attr("data-slicerColumn"),a=`\n                          <div id="div_id_active" class="custom-control custom-checkbox">\n                                  <input type="checkbox" name="${t}" data-slicerClass="${o}" data-parentId6="${id6}" class="${id20}slicerConnectConfig checkboxinput custom-control-input" data-slicerColumn="${t}" id="${id20}${t}">\n                                  <label for="${id20}${t}" class="custom-control-label">\n                                      ${t}\n                                  </label>\n                              </div>\n                          `;if($(`#${id20}`).append(a),Object.keys(slicerTabConnectDict).includes(id6)){let a=slicerTabConnectDict[id6];a.includes(t)?($(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!1),$(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!1)):$(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!0)}$(`.${id20}slicerConnectConfig[name="${t}"]`).off("change").on("change",function(){var t=$(this).attr("data-parentId6");let a=$(this).prop("checked");if(!1===a)0==slicerTabConnectDict[t].includes($(this).attr("name"))&&slicerTabConnectDict[t].push($(this).attr("name"));else if(slicerTabConnectDict[t].includes($(this).attr("name"))){let a=slicerTabConnectDict[t].indexOf($(this).attr("name"));slicerTabConnectDict[t].splice(a,1)}slicerChangeUpdatePlots(app_code_);var e=$(this).attr("data-slicerClass"),o=$(this).attr("name");$(`.${e}[data-slicerColumn="${o}"]`).val($(`.${e}[data-slicerColumn="${o}"]`).val()).trigger("select2:select")})}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},chartResizeable(id6,tester),myPlot.on("plotly_relayout",function(t){var a=tester.data[0].labels;if(null!=t.hiddenlabels){var e=a.filter(a=>!t.hiddenlabels.includes(a)),o={points:e,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(o,"x")}})}if("Bubble_Map"===String(graph_subtype)){
var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo("#card");var tab_id="main_page";outermodalCard.appendTo("#card"),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=data.colordata;x_axis=data.x_axis,y_axis=data.y_axis;var dataplot=[{type:"scattergeo",mode:"markers",locations:["KWT","ARE","EGY"],hoverinfo:"text",text:[20,30,15],marker:{size:[20,30,15],color:colordata,line:{color:"black"}}}],layout={height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,geo:{resolution:110,showcountries:!0,showocean:!0,oceancolor:"#D6F1FF",center:{lat:23,lon:45},projection:{scale:2.5}},margin:{l:0,r:10,b:5,t:5,pad:2}},tester=document.getElementById(id),myPlot=document.getElementById(id)}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].labels=data.x_axisdata,dataplot[0].values=data.y_axisdata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length,colordata=data.colordata}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;e=this.value;a.push(e);for(let e=0;e<t-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));a.push(r)}var n={marker:{colors:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var s=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",s)};var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;var l=document.getElementById(id4).value;o[a]=l;var d={marker:{color:o}};Plotly.restyle(tester,d,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}}),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){let t=$(this).attr("data-slicerColumn"),a=`\n                          <div id="div_id_active" class="custom-control custom-checkbox">\n                                  <input type="checkbox" name="${t}" data-slicerClass="${o}" data-parentId6="${id6}" class="${id20}slicerConnectConfig checkboxinput custom-control-input" data-slicerColumn="${t}" id="${id20}${t}">\n                                  <label for="${id20}${t}" class="custom-control-label">\n                                      ${t}\n                                  </label>\n                              </div>\n                          `;if($(`#${id20}`).append(a),Object.keys(slicerTabConnectDict).includes(id6)){let a=slicerTabConnectDict[id6];a.includes(t)?($(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!1),$(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!1)):$(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!0)}$(`.${id20}slicerConnectConfig[name="${t}"]`).off("change").on("change",function(){var t=$(this).attr("data-parentId6");let a=$(this).prop("checked");if(!1===a)0==slicerTabConnectDict[t].includes($(this).attr("name"))&&slicerTabConnectDict[t].push($(this).attr("name"));else if(slicerTabConnectDict[t].includes($(this).attr("name"))){let a=slicerTabConnectDict[t].indexOf($(this).attr("name"));slicerTabConnectDict[t].splice(a,1)}slicerChangeUpdatePlots(app_code_);var e=$(this).attr("data-slicerClass"),o=$(this).attr("name");$(`.${e}[data-slicerColumn="${o}"]`).val($(`.${e}[data-slicerColumn="${o}"]`).val()).trigger("select2:select")})}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},chartResizeable(id6,tester)}if("Chloropeth_Map"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo("#card");var tab_id="main_page";outermodalCard.appendTo("#card");var colordata=data.colordata;x_axis=data.x_axis,y_axis=data.y_axis;var dataplot=[{type:"choropleth",zmin:0,zmax:50,colorscale:[[0,colordata[0]],[.2,colordata[1]],[.4,colordata[2]],[.6,colordata[3]],[.8,colordata[4]],[1,colordata[5]]],locations:["KWT","ARE","EGY"],z:[20,30,15]}],layout={height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,geo:{resolution:110,showcountries:!0,showocean:!0,oceancolor:"#D6F1FF",center:{lat:23,lon:45},projection:{scale:2.5}},margin:{l:0,r:10,b:5,t:5,pad:2}},tester=document.getElementById(id),myPlot=document.getElementById(id)}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].labels=data.x_axisdata,dataplot[0].values=data.y_axisdata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length,colordata=data.colordata}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;e=this.value;a.push(e);for(let e=0;e<t-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));a.push(r)}var n={marker:{colors:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var s=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",s)};var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color);var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color),myPlot.on("plotly_click",function(t){var a="",e="",o=[];a=t.points[0].pointNumber,e=t.points[0].curveNumber;for(let a=0;a<t.points.length;a++)o=t.points[0].data.marker.colors;color=document.getElementById(id4).value,o[a]=color;var l={marker:{colors:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)}),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},chartResizeable(id6,tester)}if("Sunburst"===String(graph_subtype)){$(`#${id_label_placement}`).val(label),$(`#${id_position_legends}`).val(legend_position);var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=data.colordata;x_axis=data.x_axis,y_axis=data.y_axis,second_column=data.second_column;var colorList=[],backRGB=color,colorList=[];colorList.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colorList[colorList.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colorList.push(newHex)}var trace1={values:data.second_columndata,labels:data.y_axisdata,parents:data.x_axisdata,sort:!1,ids:data.sunburst_id,type:"sunburst",branchvalues:"total",marker:{colors:colorList}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,legend:{orientation:"h",sort:!1},margin:{l:40,r:0,b:20,t:10,pad:4},sort:!1}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].labels=data.y_axisdata,dataplot[0].values=data.second_columndata,dataplot[0].parents=data.x_axisdata,dataplot[0].sort=!1,dataplot[0].ids=data.sunburst_id;var colorlength=data.x_axisdata.length,colordata=data.colordata,colorList=[],backRGB=color,colorList=[];colorList.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colorList[colorList.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colorList.push(newHex)}null!=plotDict.config_element_color&&plotDict.config_element_color.startsWith("[")?dataplot[0].marker.colors=JSON.parse(plotDict.config_element_color):dataplot[0].marker.colors=colorList;var colordata=data.colordata,layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),newcolor1=tester.data[0].marker.colors,$(`#${id6}`).attr("data-config_element_color",JSON.stringify(newcolor1));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].labels.length;a++){var e=[];e.push(dataplot[0].labels[a]),e.push(dataplot[0].parents[a]),e.push(dataplot[0].values[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].labels,datatable[0].cells.values[1]=dataplot[0].parents,datatable[0].cells.values[2]=dataplot[0].values,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].values.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);for(let t=0;t<x-1;t++){var I=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v[v.length-1]),B=.8*parseInt(I[1],16),E=.8*parseInt(I[2],16),D=.8*parseInt(I[3],16),S="#"+componentToHex(Math.round(B))+componentToHex(Math.round(E))+componentToHex(Math.round(D));v.push(S)}var C={marker:{colors:v}};Plotly.restyle(tester,C),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].values.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}var c={marker:{colors:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var _=document.getElementById(id_header),g=document.getElementById(id6),p=$(".global_header_bgcolor").val();change_header_bgcolor(g,_,p);var h=$(".global_header_color").val();change_header_color(g,_,h);var b=$(".global_header_fontsize").val();change_header_fontsize(g,_,b);var y=$(".global_header_fontweight").val();change_header_fontweight(g,_,y),$(`#${id_header_bgcolor}`).val(p),$(`#${id_header_color}`).val(h),$(`#${id_header_fontsize}`).val(b),$(`#${id_header_fontweight}`).val(y).trigger("change");var u=$(".global_header_fontstyle").val();change_header_fontstyle(g,_,u),$(`#${id_header_fontstyle}`).val(u).trigger("change");var m=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(m).trigger("change"),change_header_alignment(g,_,m),$(`#${id6}`).attr("data-header_alignment",m),$(`#${id6}`).attr("data-header_color",h),$(`#${id6}`).attr("data-header_bgcolor",p),$(`#${id6}`).attr("data-header_fontsize",b),$(`#${id6}`).attr("data-header_fontweight",y);var f=$(".global_shadow").prop("checked"),v=$(".global_border").prop("checked"),x=$(".global_shadow_color").val(),w=$(".global_shadow_x").val(),k=$(".global_shadow_y").val(),I=$(".global_shadow_blur").val(),B=$(".global_shadow_thickness").val();change_shadow_global(g,f,x,w,k,I,B);var E=$(".global_border_color").val(),D=$(".global_border_thickness").val(),S=$(".global_border_style").val();change_border_global(g,v,E,D,S),$(`#${id_shadow}`).prop("checked",f),$(`#${id_border}`).prop("checked",v),$(`#${id_shadow_color}`).val(x),$(`#${id_xshadow}`).val(w),$(`#${id_yshadow}`).val(k),$(`#${id_blurshadow}`).val(I),$(`#${id_shadow_thickness}`).val(B),$(`#${id_border_color}`).val(E),$(`#${id_border_thickness}`).val(D),$(`#${id_border_style}`).val(S).trigger("change"),$(`#${id_border}`).val(v),$(`#${id_shadow}`).val(f),$(`#${id6}`).attr("data-shadecolor",x),$(`#${id6}`).attr("data-borderStyle",S),$(`#${id6}`).attr("data-borderThickness",D),$(`#${id6}`).attr("data-borderColor",E),$(`#${id6}`).attr("data-borderon",v),$(`#${id6}`).attr("data-shadowon",f),$(`#${id6}`).attr("data-shadowThick",B),$(`#${id6}`).attr("data-shadowblurry",I),$(`#${id6}`).attr("data-shadowY",k),$(`#${id6}`).attr("data-shadowX",w)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].values.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=dataplot[0].values.length,a=[],e=this.value;e=this.value;a.push(e);for(let e=0;e<t-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));a.push(r)}var n={marker:{colors:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var s=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",s)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id_showlabel).onclick=function(){var t=document.getElementById(id_showlabel).value;if("hide_labels"==t){var a={textinfo:"none"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_showlabel).value="show_labels",document.getElementById(id_showlabel).innerHTML="Show Labels"}else{a={textinfo:""};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_showlabel).value="hide_labels",document.getElementById(id_showlabel).innerHTML="Hide Labels"}var e=$(`#${id_showlabel}`).val();$(`#${id6}`).attr("data-config_labels",e)};var config_labels=$(`#${id_showlabel}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),newcolor1=JSON.parse($(`#${id6}`).attr("data-data")),$(`#${id6}`).attr("data-config_element_color",JSON.stringify(newcolor1[0].marker.colors)),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];a=t.points[0].pointNumber,e=t.points[0].curveNumber;for(let a=0;a<t.points.length;a++)o=t.points[0].data.marker.colors;color=document.getElementById(id4).value,o[a]=color;var l={marker:{colors:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-config_element_color",JSON.stringify(tester.data[0].marker.colors))}}),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},chartResizeable(id6,tester),myPlot.on("plotly_relayout",function(t){var a=tester.data[0].labels;if(null!=t.hiddenlabels){var e=a.filter(a=>!t.hiddenlabels.includes(a)),o={points:e,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(o,"x")}})}if("Donut_Chart"===String(graph_subtype)){var newcolor1;let t="";var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=data.colordata;x_axis=data.x_axis,y_axis=data.y_axis;var colorList=[],backRGB=color;colorList.push(backRGB);for(let t=0;t<colorlength-1;t++){
var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colorList[colorList.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colorList.push(newHex)}t=data.x_axisdata;var trace1={values:data.y_axisdata,labels:data.x_axisdata,type:"pie",sort:!1,hole:.5,marker:{colors:colorList}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,legend:{orientation:"h",sort:!1},margin:{l:40,r:40,b:20,t:10,pad:4},sort:!1}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;t=data.x_axisdata,dataplot[0].labels=data.x_axisdata,dataplot[0].values=data.y_axisdata,dataplot[0].sort=!1,colordata=data.colordata;var colorList=[],colorlength=data.x_axisdata.length,backRGB=color;colorList.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colorList[colorList.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colorList.push(newHex)}null!=plotDict.config_element_color&&plotDict.config_element_color.startsWith("[")?dataplot[0].marker.colors=JSON.parse(plotDict.config_element_color):dataplot[0].marker.colors=colorList;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};$(`#${id_label_placement}`).val(t).trigger("change"),$(`#${id_position_legends}`).val(legend_position).trigger("change"),Plotly.newPlot(tester,dataplot,layout,config),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),newcolor1=tester.data[0].marker.colors,$(`#${id6}`).attr("data-config_element_color",JSON.stringify(newcolor1));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].labels.length;a++){var e=[];e.push(dataplot[0].labels[a]),e.push(dataplot[0].values[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].labels,datatable[0].cells.values[1]=dataplot[0].values,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].labels.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);for(let t=0;t<x-1;t++){var I=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v[v.length-1]),B=.8*parseInt(I[1],16),E=.8*parseInt(I[2],16),D=.8*parseInt(I[3],16),S="#"+componentToHex(Math.round(B))+componentToHex(Math.round(E))+componentToHex(Math.round(D));v.push(S)}var C={marker:{colors:v}};Plotly.restyle(tester,C),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].labels.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}var c={marker:{colors:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var _=document.getElementById(id_header),g=document.getElementById(id6),p=$(".global_header_bgcolor").val();change_header_bgcolor(g,_,p);var h=$(".global_header_color").val();change_header_color(g,_,h);var b=$(".global_header_fontsize").val();change_header_fontsize(g,_,b);var y=$(".global_header_fontweight").val();change_header_fontweight(g,_,y),$(`#${id_header_bgcolor}`).val(p),$(`#${id_header_color}`).val(h),$(`#${id_header_fontsize}`).val(b),$(`#${id_header_fontweight}`).val(y).trigger("change");var u=$(".global_header_fontstyle").val();change_header_fontstyle(g,_,u),$(`#${id_header_fontstyle}`).val(u).trigger("change");var m=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(m).trigger("change"),change_header_alignment(g,_,m),$(`#${id6}`).attr("data-header_alignment",m),$(`#${id6}`).attr("data-header_color",h),$(`#${id6}`).attr("data-header_bgcolor",p),$(`#${id6}`).attr("data-header_fontsize",b),$(`#${id6}`).attr("data-header_fontweight",y);var f=$(".global_shadow").prop("checked"),v=$(".global_border").prop("checked"),x=$(".global_shadow_color").val(),w=$(".global_shadow_x").val(),k=$(".global_shadow_y").val(),I=$(".global_shadow_blur").val(),B=$(".global_shadow_thickness").val();change_shadow_global(g,f,x,w,k,I,B);var E=$(".global_border_color").val(),D=$(".global_border_thickness").val(),S=$(".global_border_style").val();change_border_global(g,v,E,D,S),$(`#${id_shadow}`).prop("checked",f),$(`#${id_border}`).prop("checked",v),$(`#${id_shadow_color}`).val(x),$(`#${id_xshadow}`).val(w),$(`#${id_yshadow}`).val(k),$(`#${id_blurshadow}`).val(I),$(`#${id_shadow_thickness}`).val(B),$(`#${id_border_color}`).val(E),$(`#${id_border_thickness}`).val(D),$(`#${id_border_style}`).val(S).trigger("change"),$(`#${id_border}`).val(v),$(`#${id_shadow}`).val(f),$(`#${id6}`).attr("data-shadecolor",x),$(`#${id6}`).attr("data-borderStyle",S),$(`#${id6}`).attr("data-borderThickness",D),$(`#${id6}`).attr("data-borderColor",E),$(`#${id6}`).attr("data-borderon",v),$(`#${id6}`).attr("data-shadowon",f),$(`#${id6}`).attr("data-shadowThick",B),$(`#${id6}`).attr("data-shadowblurry",I),$(`#${id6}`).attr("data-shadowY",k),$(`#${id6}`).attr("data-shadowX",w)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].labels.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=dataplot[0].labels.length,a=[],e=this.value;e=this.value;a.push(e);for(let e=0;e<t-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));a.push(r)}var n={marker:{colors:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var s=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",s)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id_showlabel).onclick=function(){var t=document.getElementById(id_showlabel).value;if("hide_labels"==t){var a={textinfo:"none"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_showlabel).value="show_labels",document.getElementById(id_showlabel).innerHTML="Show Labels"}else{a={textinfo:""};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_showlabel).value="hide_labels",document.getElementById(id_showlabel).innerHTML="Hide Labels"}var e=$(`#${id_showlabel}`).val();$(`#${id6}`).attr("data-config_labels",e)};var config_labels=$(`#${id_showlabel}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_label_placement).onchange=function(){var t=document.getElementById(id_label_placement).value;if("inside"==t){var a={textinfo:"",textposition:"inside"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("outside"==t){a={textposition:"outside"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}var e=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",e)};var config_label_placement=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",config_label_placement),document.getElementById(id_position_legends).onchange=function(){var t=document.getElementById(id_position_legends).value;if("bottom_centre"==t){var a={legend:{orientation:"h",position:"bottom_centre"}};Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}if("top_centre"==t){a={legend:{y:1.5,x:.3,position:"top_centre"},margin:{l:60,r:10,b:20,t:10,pad:4}};Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var e={textinfo:""};Plotly.restyle(tester,e,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("top_left"==t){a={legend:{yanchor:"top",y:2,xanchor:"right",x:0,position:"top_left"}};Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}if("top_right"==t){a={legend:{yanchor:"top",y:2,xanchor:"left",x:2,position:"top_right"}};Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}if("bottom_left"==t){a={legend:{yanchor:"top",y:0,xanchor:"right",x:0,position:"bottom_left"}};Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}if("bottom_right"==t){a={legend:{yanchor:"top",y:0,xanchor:"right",x:2,position:"bottom_right"}};Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}},document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),newcolor1=JSON.parse($(`#${id6}`).attr("data-data")),$(`#${id6}`).attr("data-config_element_color",JSON.stringify(newcolor1[0].marker.colors)),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];a=t.points[0].pointNumber,e=t.points[0].curveNumber;for(let a=0;a<t.points.length;a++)o=t.points[0].data.marker.colors;color=document.getElementById(id4).value,o[a]=color;var l={marker:{colors:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-config_element_color",JSON.stringify(tester.data[0].marker.colors))}}),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},chartResizeable(id6,tester),myPlot.on("plotly_relayout",function(t){var a=tester.data[0].labels;if(null!=t.hiddenlabels){var e=a.filter(a=>!t.hiddenlabels.includes(a)),o={points:e,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(o,"x")}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))})}if("Treemap"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=data.colordata,parents=[];x_axis=data.x_axis,y_axis=data.y_axis;for(let t=0;t<colorlength;t++)parents.push("");var colorList=[],backRGB=color,colorList=[];colorList.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colorList[colorList.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colorList.push(newHex)}var trace1={values:data.y_axisdata,labels:data.x_axisdata,parents:parents,type:"treemap",sort:!1,marker:{colors:colorList},textinfo:"label+value "},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,legend:{orientation:"h",sort:!1},margin:{l:40,r:0,b:20,t:10,pad:4},sort:!1}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].labels=data.x_axisdata,dataplot[0].values=data.y_axisdata,dataplot[0].sort=!1,colordata=data.colordata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].labels.length;a++){var e=[];e.push(dataplot[0].labels[a]),e.push(dataplot[0].values[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].labels,datatable[0].cells.values[1]=dataplot[0].values,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].labels.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);for(let t=0;t<x-1;t++){var I=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v[v.length-1]),B=.8*parseInt(I[1],16),E=.8*parseInt(I[2],16),D=.8*parseInt(I[3],16),S="#"+componentToHex(Math.round(B))+componentToHex(Math.round(E))+componentToHex(Math.round(D));v.push(S)}var C={
marker:{colors:v}};Plotly.restyle(tester,C),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].labels.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}var c={marker:{colors:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var _=document.getElementById(id_header),g=document.getElementById(id6),p=$(".global_header_bgcolor").val();change_header_bgcolor(g,_,p);var h=$(".global_header_color").val();change_header_color(g,_,h);var b=$(".global_header_fontsize").val();change_header_fontsize(g,_,b);var y=$(".global_header_fontweight").val();change_header_fontweight(g,_,y),$(`#${id_header_bgcolor}`).val(p),$(`#${id_header_color}`).val(h),$(`#${id_header_fontsize}`).val(b),$(`#${id_header_fontweight}`).val(y).trigger("change");var u=$(".global_header_fontstyle").val();change_header_fontstyle(g,_,u),$(`#${id_header_fontstyle}`).val(u).trigger("change");var m=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(m).trigger("change"),change_header_alignment(g,_,m),$(`#${id6}`).attr("data-header_alignment",m),$(`#${id6}`).attr("data-header_color",h),$(`#${id6}`).attr("data-header_bgcolor",p),$(`#${id6}`).attr("data-header_fontsize",b),$(`#${id6}`).attr("data-header_fontweight",y);var f=$(".global_shadow").prop("checked"),v=$(".global_border").prop("checked"),x=$(".global_shadow_color").val(),w=$(".global_shadow_x").val(),k=$(".global_shadow_y").val(),I=$(".global_shadow_blur").val(),B=$(".global_shadow_thickness").val();change_shadow_global(g,f,x,w,k,I,B);var E=$(".global_border_color").val(),D=$(".global_border_thickness").val(),S=$(".global_border_style").val();change_border_global(g,v,E,D,S),$(`#${id_shadow}`).prop("checked",f),$(`#${id_border}`).prop("checked",v),$(`#${id_shadow_color}`).val(x),$(`#${id_xshadow}`).val(w),$(`#${id_yshadow}`).val(k),$(`#${id_blurshadow}`).val(I),$(`#${id_shadow_thickness}`).val(B),$(`#${id_border_color}`).val(E),$(`#${id_border_thickness}`).val(D),$(`#${id_border_style}`).val(S).trigger("change"),$(`#${id_border}`).val(v),$(`#${id_shadow}`).val(f),$(`#${id6}`).attr("data-shadecolor",x),$(`#${id6}`).attr("data-borderStyle",S),$(`#${id6}`).attr("data-borderThickness",D),$(`#${id6}`).attr("data-borderColor",E),$(`#${id6}`).attr("data-borderon",v),$(`#${id6}`).attr("data-shadowon",f),$(`#${id6}`).attr("data-shadowThick",B),$(`#${id6}`).attr("data-shadowblurry",I),$(`#${id6}`).attr("data-shadowY",k),$(`#${id6}`).attr("data-shadowX",w)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].labels.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=dataplot[0].labels.length,a=[],e=this.value;e=this.value;a.push(e);for(let e=0;e<t-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));a.push(r)}var n={marker:{colors:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var s=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",s)};var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),newcolor1=JSON.parse($(`#${id6}`).attr("data-data")),$(`#${id6}`).attr("data-config_element_color",JSON.stringify(newcolor1[0].marker.colors)),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];a=t.points[0].pointNumber,e=t.points[0].curveNumber;for(let a=0;a<t.points.length;a++)o=t.points[0].data.marker.colors;color=document.getElementById(id4).value,o[a]=color;var l={marker:{colors:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d);d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)}});var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},chartResizeable(id6,tester),myPlot.on("plotly_relayout",function(t){var a=tester.data[0].labels;if(null!=t.hiddenlabels){var e=a.filter(a=>!t.hiddenlabels.includes(a)),o={points:e,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(o,"x")}})}if("Line"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`),outermodalCard.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));for(let t=0;t<colorlength;t++)colordata.push(color);var trace1={x:data.x_axisdata,y:data.y_axisdata,mode:"lines",marker:{color:color}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length,colordata=data.colordata}$(`#${id_label_placement}`).val(label);var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.y_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);for(let t=0;t<x-1;t++){var I=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v[v.length-1]),B=.8*parseInt(I[1],16),E=.8*parseInt(I[2],16),D=.8*parseInt(I[3],16),S="#"+componentToHex(Math.round(B))+componentToHex(Math.round(E))+componentToHex(Math.round(D));v.push(S)}var C={marker:{color:k}};Plotly.restyle(tester,C),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}var c={marker:{color:l}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var _=document.getElementById(id_header),g=document.getElementById(id6),p=$(".global_header_bgcolor").val();change_header_bgcolor(g,_,p);var h=$(".global_header_color").val();change_header_color(g,_,h);var b=$(".global_header_fontsize").val();change_header_fontsize(g,_,b);var y=$(".global_header_fontweight").val();change_header_fontweight(g,_,y),$(`#${id_header_bgcolor}`).val(p),$(`#${id_header_color}`).val(h),$(`#${id_header_fontsize}`).val(b),$(`#${id_header_fontweight}`).val(y).trigger("change");var u=$(".global_header_fontstyle").val();change_header_fontstyle(g,_,u),$(`#${id_header_fontstyle}`).val(u).trigger("change");var m=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(m).trigger("change"),change_header_alignment(g,_,m),$(`#${id6}`).attr("data-header_alignment",m),$(`#${id6}`).attr("data-header_color",h),$(`#${id6}`).attr("data-header_bgcolor",p),$(`#${id6}`).attr("data-header_fontsize",b),$(`#${id6}`).attr("data-header_fontweight",y);var f=$(".global_shadow").prop("checked"),v=$(".global_border").prop("checked"),x=$(".global_shadow_color").val(),w=$(".global_shadow_x").val(),k=$(".global_shadow_y").val(),I=$(".global_shadow_blur").val(),B=$(".global_shadow_thickness").val();change_shadow_global(g,f,x,w,k,I,B);var E=$(".global_border_color").val(),D=$(".global_border_thickness").val(),S=$(".global_border_style").val();change_border_global(g,v,E,D,S),$(`#${id_shadow}`).prop("checked",f),$(`#${id_border}`).prop("checked",v),$(`#${id_shadow_color}`).val(x),$(`#${id_xshadow}`).val(w),$(`#${id_yshadow}`).val(k),$(`#${id_blurshadow}`).val(I),$(`#${id_shadow_thickness}`).val(B),$(`#${id_border_color}`).val(E),$(`#${id_border_thickness}`).val(D),$(`#${id_border_style}`).val(S).trigger("change"),$(`#${id_border}`).val(v),$(`#${id_shadow}`).val(f),$(`#${id6}`).attr("data-shadecolor",x),$(`#${id6}`).attr("data-borderStyle",S),$(`#${id6}`).attr("data-borderThickness",D),$(`#${id6}`).attr("data-borderColor",E),$(`#${id6}`).attr("data-borderon",v),$(`#${id6}`).attr("data-shadowon",f),$(`#${id6}`).attr("data-shadowThick",B),$(`#${id6}`).attr("data-shadowblurry",I),$(`#${id6}`).attr("data-shadowY",k),$(`#${id6}`).attr("data-shadowX",w)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_label_placement).onchange=function(){var t=document.getElementById(id_label_placement).value;if("top"==t){var a={textposition:"top center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("bottom"==t){a={textposition:"bottom center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("center"==t){a={textposition:"center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}var e=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",e)};var config_label_placement=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",config_label_placement),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data[0].y;if("show_labels"==t){var e={mode:"lines+text",text:[a],textposition:"bottom center"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e={mode:"lines",text:"",textposition:"bottom center"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var o=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",o)},document.getElementById(id1).onchange=function(){var t=this.value,a={marker:{color:t}};Plotly.restyle(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var e=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray;y_axis_title=tester.layout.yaxis.title.text;var l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{automargin:!0,showgrid:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{automargin:!0,showgrid:!1,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{
family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={x:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Multiple_Line_Chart"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`),outermodalCard.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));for(let t=0;t<colorlength;t++)colordata.push(colordata);var dataplot=[],color_value=chart_color;for(var y in data.y_axisdata){var trace1={x:data.x_axisdata,y:data.y_axisdata[y],mode:"lines+markers",text:fieldToVerbose(data.y_axisdata[y],data.mappingDict),marker:{color:color_value},name:fieldToVerbose(data.y_axis[y],data.mappingDict)};dataplot.push(trace1);var colorList1=[];colorList1.push(color_value);var backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);color_value=newcolor}var tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;for(let t=0;t<dataplot.length;t++)dataplot[t].x=data.x_axisdata,dataplot[t].y=data.y_axisdata[t];var layout=data.plotDict.layout,colorlength=data.x_axisdata.length,colordata=data.colordata}$(`#${id_label_placement}`).val(label);var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);for(var i=0;i<data.y_axisdata.length;i++){var update={text:[data.y_axisdata[i]]};Plotly.restyle(tester,update,[i])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));for(var tabledata=[],tableheaders=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`],i=0;i<y_axis.length;i++)tableheaders.push(fieldToVerbose(data.y_axis[i],data.mappingDict));tabledata.push(data.x_axisdata);for(var i=0;i<y_axisdata;i++)tabledata.push(data.y_axisdata[i]);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){for(var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`],e=0;e<y_axis.length;e++)a.push(fieldToVerbose(data.y_axis[e],data.mappingDict));t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var o=[];o.push(dataplot[0].x[a]);for(let t=0;t<dataplot.length;t++)o.push(dataplot[t].y[a]);t.push(o)}var l=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),d=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),r=URL.createObjectURL(d);i.setAttribute("href",r),i.setAttribute("download",`${data.chartHeader}`+"_data.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},document.getElementById(id_tableshow).onclick=function(){datatable[0].cells.values[0]=dataplot[0].x;for(var t=1;t<=dataplot.length;t++)datatable[0].cells.values[t]=dataplot[t-1].y;if("Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var a=document.getElementById(id_table);Plotly.newPlot(a,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;for(var w=col,k=(w=col,w),I=0;I<data.y_axisdata.length;I++){k=k,backRGB=k;var B={marker:{color:k}};const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var E=.6*t(k)[0],D=.6*t(k)[1],S=.6*t(k)[2],C=rgb2hex(E,D,S);k=C,Plotly.restyle(tester,B,[I])}rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}for(var c=l,_=0;_<data.y_axisdata.length;_++){c=c;var g={marker:{color:c}};a=[];a.push(c);const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));i=.6*t(c)[0],r=.6*t(c)[1],n=.6*t(c)[2];var p=rgb2hex(i,r,n);c=p,Plotly.restyle(tester,g,[_]),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color)}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var h=document.getElementById(id_header),b=document.getElementById(id6),y=$(".global_header_bgcolor").val();change_header_bgcolor(b,h,y);var u=$(".global_header_color").val();change_header_color(b,h,u);var m=$(".global_header_fontsize").val();change_header_fontsize(b,h,m);var f=$(".global_header_fontweight").val();change_header_fontweight(b,h,f),$(`#${id_header_bgcolor}`).val(y),$(`#${id_header_color}`).val(u),$(`#${id_header_fontsize}`).val(m),$(`#${id_header_fontweight}`).val(f).trigger("change");var v=$(".global_header_fontstyle").val();change_header_fontstyle(b,h,v),$(`#${id_header_fontstyle}`).val(v).trigger("change");var x=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(x).trigger("change"),change_header_alignment(b,h,x),$(`#${id6}`).attr("data-header_alignment",x),$(`#${id6}`).attr("data-header_color",u),$(`#${id6}`).attr("data-header_bgcolor",y),$(`#${id6}`).attr("data-header_fontsize",m),$(`#${id6}`).attr("data-header_fontweight",f);var w=$(".global_shadow").prop("checked"),k=$(".global_border").prop("checked"),I=$(".global_shadow_color").val(),B=$(".global_shadow_x").val(),E=$(".global_shadow_y").val(),D=$(".global_shadow_blur").val(),S=$(".global_shadow_thickness").val();change_shadow_global(b,w,I,B,E,D,S);var C=$(".global_border_color").val(),T=$(".global_border_thickness").val(),N=$(".global_border_style").val();change_border_global(b,k,C,T,N),$(`#${id_shadow}`).prop("checked",w),$(`#${id_border}`).prop("checked",k),$(`#${id_shadow_color}`).val(I),$(`#${id_xshadow}`).val(B),$(`#${id_yshadow}`).val(E),$(`#${id_blurshadow}`).val(D),$(`#${id_shadow_thickness}`).val(S),$(`#${id_border_color}`).val(C),$(`#${id_border_thickness}`).val(T),$(`#${id_border_style}`).val(N).trigger("change"),$(`#${id_border}`).val(k),$(`#${id_shadow}`).val(w),$(`#${id6}`).attr("data-shadecolor",I),$(`#${id6}`).attr("data-borderStyle",N),$(`#${id6}`).attr("data-borderThickness",T),$(`#${id6}`).attr("data-borderColor",C),$(`#${id6}`).attr("data-borderon",k),$(`#${id6}`).attr("data-shadowon",w),$(`#${id6}`).attr("data-shadowThick",S),$(`#${id6}`).attr("data-shadowblurry",D),$(`#${id6}`).attr("data-shadowY",E),$(`#${id6}`).attr("data-shadowX",B)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_label_placement).onchange=function(){var t=document.getElementById(id_label_placement).value;if("top"==t){for(var a=0;a<data.y_axisdata.length;a++){var e={textposition:"top center"};Plotly.restyle(tester,e,[a])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("bottom"==t){for(a=0;a<data.y_axisdata.length;a++){e={textposition:"bottom center"};Plotly.restyle(tester,e,[a])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("center"==t){for(a=0;a<data.y_axisdata.length;a++){e={textposition:"center"};Plotly.restyle(tester,e,[a])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}var o=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",o)};var config_label_placement=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",config_label_placement),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value;tester.data[0].y;if("show_labels"==t){for(var a=0;a<tester.data.length;a++){var e={mode:"lines+text",text:[tester.data[a].y],textposition:"bottom center"};Plotly.restyle(tester,e,[a])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e={mode:"lines",text:"",textposition:"bottom center"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var o=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",o)},document.getElementById(id1).onchange=function(){for(var t=this.value,a=t,e=0;e<data.y_axisdata.length;e++){var o={marker:{color:a}},l=[];l.push(a);t=a;const s=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var d=.6*s(t)[0],i=.6*s(t)[1],r=.6*s(t)[2],n=rgb2hex(d,i,r);a=n,Plotly.restyle(tester,o,[e]),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color)}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var s=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",s)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={x:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Vertical_Area"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));for(let t=0;t<colorlength;t++)colordata.push(color);var trace1={x:data.x_axisdata,y:data.y_axisdata,mode:"lines",fill:"tozeroy",marker:{color:color}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial"}},showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}"yes"==global_bg&&$(`#${id23}`).prop("checked",!0);var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.y_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),
d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w);var k={marker:{color:w}};Plotly.restyle(tester,k),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var o=col;o=col;a.push(o);var l={marker:{color:o}};Plotly.restyle(tester,l),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=document.getElementById(id_header),i=document.getElementById(id6),r=$(".global_header_bgcolor").val();change_header_bgcolor(i,d,r);var n=$(".global_header_color").val();change_header_color(i,d,n);var s=$(".global_header_fontsize").val();change_header_fontsize(i,d,s);var c=$(".global_header_fontweight").val();change_header_fontweight(i,d,c),$(`#${id_header_bgcolor}`).val(r),$(`#${id_header_color}`).val(n),$(`#${id_header_fontsize}`).val(s),$(`#${id_header_fontweight}`).val(c).trigger("change");var _=$(".global_header_fontstyle").val();change_header_fontstyle(i,d,_),$(`#${id_header_fontstyle}`).val(_).trigger("change");var g=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(g).trigger("change"),change_header_alignment(i,d,g),$(`#${id6}`).attr("data-header_alignment",g),$(`#${id6}`).attr("data-header_color",n),$(`#${id6}`).attr("data-header_bgcolor",r),$(`#${id6}`).attr("data-header_fontsize",s),$(`#${id6}`).attr("data-header_fontweight",c);var p=$(".global_shadow").prop("checked"),h=$(".global_border").prop("checked"),b=$(".global_shadow_color").val(),y=$(".global_shadow_x").val(),u=$(".global_shadow_y").val(),m=$(".global_shadow_blur").val(),f=$(".global_shadow_thickness").val();change_shadow_global(i,p,b,y,u,m,f);var v=$(".global_border_color").val(),x=$(".global_border_thickness").val(),w=$(".global_border_style").val();change_border_global(i,h,v,x,w),$(`#${id_shadow}`).prop("checked",p),$(`#${id_border}`).prop("checked",h),$(`#${id_shadow_color}`).val(b),$(`#${id_xshadow}`).val(y),$(`#${id_yshadow}`).val(u),$(`#${id_blurshadow}`).val(m),$(`#${id_shadow_thickness}`).val(f),$(`#${id_border_color}`).val(v),$(`#${id_border_thickness}`).val(x),$(`#${id_border_style}`).val(w).trigger("change"),$(`#${id_border}`).val(h),$(`#${id_shadow}`).val(p),$(`#${id6}`).attr("data-shadecolor",b),$(`#${id6}`).attr("data-borderStyle",w),$(`#${id6}`).attr("data-borderThickness",x),$(`#${id6}`).attr("data-borderColor",v),$(`#${id6}`).attr("data-borderon",h),$(`#${id6}`).attr("data-shadowon",p),$(`#${id6}`).attr("data-shadowThick",f),$(`#${id6}`).attr("data-shadowblurry",m),$(`#${id6}`).attr("data-shadowY",u),$(`#${id6}`).attr("data-shadowX",y)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data[0].y;if("show_labels"==t){var e={mode:"lines+text",text:[a],textposition:"top"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e={mode:"lines",text:"",textposition:"top"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var o=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",o)},document.getElementById(id1).onchange=function(){var t=this.value,a={marker:{color:t}};Plotly.restyle(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var e=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray;y_axis_title=tester.layout.yaxis.title.text;var l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{automargin:!0,showgrid:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{automargin:!0,showgrid:!1,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={x:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Horizontal_Area"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`),outermodalCard.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata));for(let t=0;t<colorlength;t++)colordata.push(color);var trace1={x:data.x_axisdata,y:data.y_axisdata,mode:"lines",fill:"tozeroy",marker:{color:color}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,tickangle:45,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.x_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Horizontal"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Horizontal")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w);var k={marker:{color:w}};Plotly.restyle(tester,k),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var o=col;o=col;a.push(o);var l={marker:{color:o}};Plotly.restyle(tester,l),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=document.getElementById(id_header),i=document.getElementById(id6),r=$(".global_header_bgcolor").val();change_header_bgcolor(i,d,r);var n=$(".global_header_color").val();change_header_color(i,d,n);var s=$(".global_header_fontsize").val();change_header_fontsize(i,d,s);var c=$(".global_header_fontweight").val();change_header_fontweight(i,d,c),$(`#${id_header_bgcolor}`).val(r),$(`#${id_header_color}`).val(n),$(`#${id_header_fontsize}`).val(s),$(`#${id_header_fontweight}`).val(c).trigger("change");var _=$(".global_header_fontstyle").val();change_header_fontstyle(i,d,_),$(`#${id_header_fontstyle}`).val(_).trigger("change");var g=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(g).trigger("change"),change_header_alignment(i,d,g),$(`#${id6}`).attr("data-header_alignment",g),$(`#${id6}`).attr("data-header_color",n),$(`#${id6}`).attr("data-header_bgcolor",r),$(`#${id6}`).attr("data-header_fontsize",s),$(`#${id6}`).attr("data-header_fontweight",c);var p=$(".global_shadow").prop("checked"),h=$(".global_border").prop("checked"),b=$(".global_shadow_color").val(),y=$(".global_shadow_x").val(),u=$(".global_shadow_y").val(),m=$(".global_shadow_blur").val(),f=$(".global_shadow_thickness").val();change_shadow_global(i,p,b,y,u,m,f);var v=$(".global_border_color").val(),x=$(".global_border_thickness").val(),w=$(".global_border_style").val();change_border_global(i,h,v,x,w),$(`#${id_shadow}`).prop("checked",p),$(`#${id_border}`).prop("checked",h),$(`#${id_shadow_color}`).val(b),$(`#${id_xshadow}`).val(y),$(`#${id_yshadow}`).val(u),$(`#${id_blurshadow}`).val(m),$(`#${id_shadow_thickness}`).val(f),$(`#${id_border_color}`).val(v),$(`#${id_border_thickness}`).val(x),$(`#${id_border_style}`).val(w).trigger("change"),$(`#${id_border}`).val(h),$(`#${id_shadow}`).val(p),$(`#${id6}`).attr("data-shadecolor",b),$(`#${id6}`).attr("data-borderStyle",w),$(`#${id6}`).attr("data-borderThickness",x),$(`#${id6}`).attr("data-borderColor",v),$(`#${id6}`).attr("data-borderon",h),$(`#${id6}`).attr("data-shadowon",p),$(`#${id6}`).attr("data-shadowThick",f),$(`#${id6}`).attr("data-shadowblurry",m),
$(`#${id6}`).attr("data-shadowY",u),$(`#${id6}`).attr("data-shadowX",y)}});var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data[0].x;if("show_labels"==t){var e={mode:"lines+text",text:[a],textposition:"top"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e={mode:"lines",text:"",textposition:"top"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var o=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",o)},document.getElementById(id1).onchange=function(){var t=this.value,a={marker:{color:t}};Plotly.restyle(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var e=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[1],l=tester.layout.yaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[e,o],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",r)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[0],l=tester.layout.xaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[o,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",r)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.yaxis.categoryorder,o=a.yaxis.categoryarray;y_axis_title=tester.layout.yaxis.title.text;var l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{automargin:!0,showgrid:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}},categoryorder:e,categoryarray:o},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{automargin:!0,showgrid:!1,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}},categoryorder:e,categoryarray:o},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="card_charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){let t=$(this).attr("data-slicerColumn"),a=`\n                          <div id="div_id_active" class="custom-control custom-checkbox">\n                                  <input type="checkbox" name="${t}" data-slicerClass="${o}" data-parentId6="${id6}" class="${id20}slicerConnectConfig checkboxinput custom-control-input" data-slicerColumn="${t}" id="${id20}${t}">\n                                  <label for="${id20}${t}" class="custom-control-label">\n                                      ${t}\n                                  </label>\n                              </div>\n                          `;if($(`#${id20}`).append(a),Object.keys(slicerTabConnectDict).includes(id6)){let a=slicerTabConnectDict[id6];a.includes(t)?($(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!1),$(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!1)):$(`.${id20}slicerConnectConfig[name="${t}"]`).prop("checked",!0)}$(`.${id20}slicerConnectConfig[name="${t}"]`).off("change").on("change",function(){var t=$(this).attr("data-parentId6");let a=$(this).prop("checked");if(!1===a)0==slicerTabConnectDict[t].includes($(this).attr("name"))&&slicerTabConnectDict[t].push($(this).attr("name"));else if(slicerTabConnectDict[t].includes($(this).attr("name"))){let a=slicerTabConnectDict[t].indexOf($(this).attr("name"));slicerTabConnectDict[t].splice(a,1)}slicerChangeUpdatePlots(app_code_);var e=$(this).attr("data-slicerClass"),o=$(this).attr("name");$(`.${e}[data-slicerColumn="${o}"]`).val($(`.${e}[data-slicerColumn="${o}"]`).val()).trigger("select2:select")})}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".card charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.yaxis.categoryorder,o=a.yaxis.categoryarray;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var l=tester.layout.yaxis.showgrid,d={yaxis:{range:[y_axis_start,y_axis_end],showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",i)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={y:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Stepped_Line"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`),outermodalCard.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));for(let t=0;t<colorlength;t++)colordata.push(color);var trace1={x:data.x_axisdata,y:data.y_axisdata,mode:"lines",marker:{color:color},line:{shape:"hv"}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}$(`#${id_label_placement}`).val(label);var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.y_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w);var k={marker:{color:w}};Plotly.restyle(tester,k),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var o=col;o=col;a.push(o);var l={marker:{color:o}};Plotly.restyle(tester,l),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=document.getElementById(id_header),i=document.getElementById(id6),r=$(".global_header_bgcolor").val();change_header_bgcolor(i,d,r);var n=$(".global_header_color").val();change_header_color(i,d,n);var s=$(".global_header_fontsize").val();change_header_fontsize(i,d,s);var c=$(".global_header_fontweight").val();change_header_fontweight(i,d,c),$(`#${id_header_bgcolor}`).val(r),$(`#${id_header_color}`).val(n),$(`#${id_header_fontsize}`).val(s),$(`#${id_header_fontweight}`).val(c).trigger("change");var _=$(".global_header_fontstyle").val();change_header_fontstyle(i,d,_),$(`#${id_header_fontstyle}`).val(_).trigger("change");var g=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(g).trigger("change"),change_header_alignment(i,d,g),$(`#${id6}`).attr("data-header_alignment",g),$(`#${id6}`).attr("data-header_color",n),$(`#${id6}`).attr("data-header_bgcolor",r),$(`#${id6}`).attr("data-header_fontsize",s),$(`#${id6}`).attr("data-header_fontweight",c);var p=$(".global_shadow").prop("checked"),h=$(".global_border").prop("checked"),b=$(".global_shadow_color").val(),y=$(".global_shadow_x").val(),u=$(".global_shadow_y").val(),m=$(".global_shadow_blur").val(),f=$(".global_shadow_thickness").val();change_shadow_global(i,p,b,y,u,m,f);var v=$(".global_border_color").val(),x=$(".global_border_thickness").val(),w=$(".global_border_style").val();change_border_global(i,h,v,x,w),$(`#${id_shadow}`).prop("checked",p),$(`#${id_border}`).prop("checked",h),$(`#${id_shadow_color}`).val(b),$(`#${id_xshadow}`).val(y),$(`#${id_yshadow}`).val(u),$(`#${id_blurshadow}`).val(m),$(`#${id_shadow_thickness}`).val(f),$(`#${id_border_color}`).val(v),$(`#${id_border_thickness}`).val(x),$(`#${id_border_style}`).val(w).trigger("change"),$(`#${id_border}`).val(h),$(`#${id_shadow}`).val(p),$(`#${id6}`).attr("data-shadecolor",b),$(`#${id6}`).attr("data-borderStyle",w),$(`#${id6}`).attr("data-borderThickness",x),$(`#${id6}`).attr("data-borderColor",v),$(`#${id6}`).attr("data-borderon",h),$(`#${id6}`).attr("data-shadowon",p),$(`#${id6}`).attr("data-shadowThick",f),$(`#${id6}`).attr("data-shadowblurry",m),$(`#${id6}`).attr("data-shadowY",u),$(`#${id6}`).attr("data-shadowX",y)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=this.value,a={marker:{color:t}};Plotly.restyle(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var e=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(y_axis_title=tester.layout.yaxis.title.text,0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_label_placement).onchange=function(){var t=document.getElementById(id_label_placement).value;if("top"==t){var a={textposition:"top center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("bottom"==t){a={textposition:"bottom center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("center"==t){a={textposition:"center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}var e=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",e)},document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data[0].y;if("show_labels"==t){var e={mode:"lines+text",text:[a],textposition:"bottom center"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e={mode:"lines",text:"",textposition:"bottom center"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var o=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",o)},document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray;y_axis_title=tester.layout.yaxis.title.text;var l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{automargin:!0,showgrid:!0,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{automargin:!0,showgrid:!1,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{
family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={x:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Vertical_Line_Stacked"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=data.second_column,modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis,modalDataConfig.second_column=data.second_column;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`),outermodalCard.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),backRGB=color;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b),trace1={x:data.x_axisdata,y:data.y_axisdata,mode:"lines",marker:{color:color},name:fieldToVerbose(data.y_axis,data.mappingDict)},trace2={x:data.x_axisdata,y:data.second_columndata,mode:"lines",marker:{color:newcolor},name:fieldToVerbose(data.second_column,data.mappingDict)},dataplot=[trace1,trace2],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,dataplot[1].x=data.x_axisdata,dataplot[1].y=data.second_columndata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}$(`#${id_label_placement}`).val(label);var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.second_columndata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_label_placement}`).val(label),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),e.push(dataplot[1].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,datatable[0].cells.values[2]=dataplot[1].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else $(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none"),document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none"},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w);const k=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var I=.6*k(w)[0],B=.6*k(w)[1],E=.6*k(w)[2],D=rgb2hex(I,B,E),S={marker:{color:w}},C={marker:{color:D}};Plotly.restyle(tester,S,[0]),Plotly.restyle(tester,C,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var o=col;o=col;a.push(o);const S=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var l=.6*S(o)[0],d=.6*S(o)[1],i=.6*S(o)[2],r=rgb2hex(l,d,i),n={marker:{color:o}},s={marker:{color:r}};Plotly.restyle(tester,n,[0]),Plotly.restyle(tester,s,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var c=document.getElementById(id_header),_=document.getElementById(id6),g=$(".global_header_bgcolor").val();change_header_bgcolor(_,c,g);var p=$(".global_header_color").val();change_header_color(_,c,p);var h=$(".global_header_fontsize").val();change_header_fontsize(_,c,h);var b=$(".global_header_fontweight").val();change_header_fontweight(_,c,b),$(`#${id_header_bgcolor}`).val(g),$(`#${id_header_color}`).val(p),$(`#${id_header_fontsize}`).val(h),$(`#${id_header_fontweight}`).val(b).trigger("change");var y=$(".global_header_fontstyle").val();change_header_fontstyle(_,c,y),$(`#${id_header_fontstyle}`).val(y).trigger("change");var u=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(u).trigger("change"),change_header_alignment(_,c,u),$(`#${id6}`).attr("data-header_alignment",u),$(`#${id6}`).attr("data-header_color",p),$(`#${id6}`).attr("data-header_bgcolor",g),$(`#${id6}`).attr("data-header_fontsize",h),$(`#${id6}`).attr("data-header_fontweight",b);var m=$(".global_shadow").prop("checked"),f=$(".global_border").prop("checked"),v=$(".global_shadow_color").val(),x=$(".global_shadow_x").val(),w=$(".global_shadow_y").val(),k=$(".global_shadow_blur").val(),I=$(".global_shadow_thickness").val();change_shadow_global(_,m,v,x,w,k,I);var B=$(".global_border_color").val(),E=$(".global_border_thickness").val(),D=$(".global_border_style").val();change_border_global(_,f,B,E,D),$(`#${id_shadow}`).prop("checked",m),$(`#${id_border}`).prop("checked",f),$(`#${id_shadow_color}`).val(v),$(`#${id_xshadow}`).val(x),$(`#${id_yshadow}`).val(w),$(`#${id_blurshadow}`).val(k),$(`#${id_shadow_thickness}`).val(I),$(`#${id_border_color}`).val(B),$(`#${id_border_thickness}`).val(E),$(`#${id_border_style}`).val(D).trigger("change"),$(`#${id_border}`).val(f),$(`#${id_shadow}`).val(m),$(`#${id6}`).attr("data-shadecolor",v),$(`#${id6}`).attr("data-borderStyle",D),$(`#${id6}`).attr("data-borderThickness",E),$(`#${id6}`).attr("data-borderColor",B),$(`#${id6}`).attr("data-borderon",f),$(`#${id6}`).attr("data-shadowon",m),$(`#${id6}`).attr("data-shadowThick",I),$(`#${id6}`).attr("data-shadowblurry",k),$(`#${id6}`).attr("data-shadowY",w),$(`#${id6}`).attr("data-shadowX",x)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_label_placement).onchange=function(){var t=document.getElementById(id_label_placement).value;if("top"==t){var a={textposition:"top center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("bottom"==t){a={textposition:"bottom center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("center"==t){a={textposition:"center"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}var e=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",e)};var config_label_placement=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",config_label_placement),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data[0].y;if("show_labels"==t){var e={mode:"lines+text",text:[a],textposition:"top"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var o={mode:"lines+text",text:[data.second_columndata],textposition:"top"};Plotly.restyle(tester,o),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e={mode:"lines",text:"",textposition:"bottom center"};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var l=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",l)},document.getElementById(id1).onchange=function(){var t=this.value;const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var e=.6*a(t)[0],o=.6*a(t)[1],l=.6*a(t)[2],d=rgb2hex(e,o,l),i={marker:{color:t}},r={marker:{color:d}};Plotly.restyle(tester,i,[0]),Plotly.restyle(tester,r,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var n=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",n)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{automargin:!0,showgrid:!0},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{automargin:!0,showgrid:!1},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={x:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Vertical_Grouped_Box"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=data.second_column,modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis,modalDataConfig.second_column=data.second_column;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),backRGB=color;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b),trace1={x:data.x_axisdata,y:data.y_axisdata,type:"box",boxpoints:!1,marker:{color:color},name:fieldToVerbose(data.y_axis,data.mappingDict)},trace2={x:data.x_axisdata,y:data.second_columndata,type:"box",boxpoints:!1,marker:{color:newcolor},name:fieldToVerbose(data.second_column,data.mappingDict)},dataplot=[trace1,trace2],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={boxmode:"group",margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,dataplot[1].x=data.x_axisdata,dataplot[1].y=data.second_columndata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),
$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),e.push(dataplot[1].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,datatable[0].cells.values[2]=dataplot[1].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w);const k=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var I=.6*k(w)[0],B=.6*k(w)[1],E=.6*k(w)[2],D=rgb2hex(I,B,E),S={marker:{color:w}},C={marker:{color:D}};Plotly.restyle(tester,S,[0]),Plotly.restyle(tester,C,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}const N=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));i=.6*N(l)[0],r=.6*N(l)[1],n=.6*N(l)[2];var c=rgb2hex(i,r,n),_={marker:{color:l}},g={marker:{color:c}};Plotly.restyle(tester,_,[0]),Plotly.restyle(tester,g,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var p=document.getElementById(id_header),h=document.getElementById(id6),b=$(".global_header_bgcolor").val();change_header_bgcolor(h,p,b);var y=$(".global_header_color").val();change_header_color(h,p,y);var u=$(".global_header_fontsize").val();change_header_fontsize(h,p,u);var m=$(".global_header_fontweight").val();change_header_fontweight(h,p,m),$(`#${id_header_bgcolor}`).val(b),$(`#${id_header_color}`).val(y),$(`#${id_header_fontsize}`).val(u),$(`#${id_header_fontweight}`).val(m).trigger("change");var f=$(".global_header_fontstyle").val();change_header_fontstyle(h,p,f),$(`#${id_header_fontstyle}`).val(f).trigger("change");var v=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(v).trigger("change"),change_header_alignment(h,p,v),$(`#${id6}`).attr("data-header_alignment",v),$(`#${id6}`).attr("data-header_color",y),$(`#${id6}`).attr("data-header_bgcolor",b),$(`#${id6}`).attr("data-header_fontsize",u),$(`#${id6}`).attr("data-header_fontweight",m);var x=$(".global_shadow").prop("checked"),w=$(".global_border").prop("checked"),k=$(".global_shadow_color").val(),I=$(".global_shadow_x").val(),B=$(".global_shadow_y").val(),E=$(".global_shadow_blur").val(),D=$(".global_shadow_thickness").val();change_shadow_global(h,x,k,I,B,E,D);var S=$(".global_border_color").val(),C=$(".global_border_thickness").val(),T=$(".global_border_style").val();change_border_global(h,w,S,C,T),$(`#${id_shadow}`).prop("checked",x),$(`#${id_border}`).prop("checked",w),$(`#${id_shadow_color}`).val(k),$(`#${id_xshadow}`).val(I),$(`#${id_yshadow}`).val(B),$(`#${id_blurshadow}`).val(E),$(`#${id_shadow_thickness}`).val(D),$(`#${id_border_color}`).val(S),$(`#${id_border_thickness}`).val(C),$(`#${id_border_style}`).val(T).trigger("change"),$(`#${id_border}`).val(w),$(`#${id_shadow}`).val(x),$(`#${id6}`).attr("data-shadecolor",k),$(`#${id6}`).attr("data-borderStyle",T),$(`#${id6}`).attr("data-borderThickness",C),$(`#${id6}`).attr("data-borderColor",S),$(`#${id6}`).attr("data-borderon",w),$(`#${id6}`).attr("data-shadowon",x),$(`#${id6}`).attr("data-shadowThick",D),$(`#${id6}`).attr("data-shadowblurry",E),$(`#${id6}`).attr("data-shadowY",B),$(`#${id6}`).attr("data-shadowX",I)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=this.value;const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var e=.6*a(t)[0],o=.6*a(t)[1],l=.6*a(t)[2],d=rgb2hex(e,o,l),i={marker:{color:t}},r={marker:{color:d}};Plotly.restyle(tester,i,[0]),Plotly.restyle(tester,r,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var n=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",n)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=tester.layout.xaxis.title.text;if("show_gridlines"==t){var e={yaxis:{automargin:!0,showgrid:!0},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{automargin:!0,showgrid:!1},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=(t.x,t.text),o=document.getElementById(id13).value,l={};l[e]=o,changed_text.push(l),$.each(a,function(t,l){l==e&&(a[t]=o)});var d={x:[a]};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Vertical_Grouped_Violin"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=data.second_column,modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis,modalDataConfig.second_column=data.second_column;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),backRGB=color;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b),trace1={x:data.x_axisdata,y:data.y_axisdata,type:"violin",boxpoints:!1,marker:{color:color},name:fieldToVerbose(data.y_axis,data.mappingDict)},trace2={x:data.x_axisdata,y:data.second_columndata,type:"violin",boxpoints:!1,marker:{color:newcolor},name:fieldToVerbose(data.second_column,data.mappingDict)},dataplot=[trace1,trace2],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={violinmode:"group",margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,dataplot[1].x=data.x_axisdata,dataplot[1].y=data.second_columndata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),e.push(dataplot[1].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,datatable[0].cells.values[2]=dataplot[1].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w);const k=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var I=.6*k(w)[0],B=.6*k(w)[1],E=.6*k(w)[2],D=rgb2hex(I,B,E),S={marker:{color:w}},C={marker:{color:D}};Plotly.restyle(tester,S,[0]),Plotly.restyle(tester,C,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}const S=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));i=.6*S(l)[0],r=.6*S(l)[1],n=.6*S(l)[2],rgb2hex(i,r,n);$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var c=document.getElementById(id_header),_=document.getElementById(id6),g=$(".global_header_bgcolor").val();change_header_bgcolor(_,c,g);var p=$(".global_header_color").val();change_header_color(_,c,p);var h=$(".global_header_fontsize").val();change_header_fontsize(_,c,h);var b=$(".global_header_fontweight").val();change_header_fontweight(_,c,b),$(`#${id_header_bgcolor}`).val(g),$(`#${id_header_color}`).val(p),$(`#${id_header_fontsize}`).val(h),$(`#${id_header_fontweight}`).val(b).trigger("change");var y=$(".global_header_fontstyle").val();change_header_fontstyle(_,c,y),$(`#${id_header_fontstyle}`).val(y).trigger("change");var u=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(u).trigger("change"),change_header_alignment(_,c,u),
$(`#${id6}`).attr("data-header_alignment",u),$(`#${id6}`).attr("data-header_color",p),$(`#${id6}`).attr("data-header_bgcolor",g),$(`#${id6}`).attr("data-header_fontsize",h),$(`#${id6}`).attr("data-header_fontweight",b);var m=$(".global_shadow").prop("checked"),f=$(".global_border").prop("checked"),v=$(".global_shadow_color").val(),x=$(".global_shadow_x").val(),w=$(".global_shadow_y").val(),k=$(".global_shadow_blur").val(),I=$(".global_shadow_thickness").val();change_shadow_global(_,m,v,x,w,k,I);var B=$(".global_border_color").val(),E=$(".global_border_thickness").val(),D=$(".global_border_style").val();change_border_global(_,f,B,E,D),$(`#${id_shadow}`).prop("checked",m),$(`#${id_border}`).prop("checked",f),$(`#${id_shadow_color}`).val(v),$(`#${id_xshadow}`).val(x),$(`#${id_yshadow}`).val(w),$(`#${id_blurshadow}`).val(k),$(`#${id_shadow_thickness}`).val(I),$(`#${id_border_color}`).val(B),$(`#${id_border_thickness}`).val(E),$(`#${id_border_style}`).val(D).trigger("change"),$(`#${id_border}`).val(f),$(`#${id_shadow}`).val(m),$(`#${id6}`).attr("data-shadecolor",v),$(`#${id6}`).attr("data-borderStyle",D),$(`#${id6}`).attr("data-borderThickness",E),$(`#${id6}`).attr("data-borderColor",B),$(`#${id6}`).attr("data-borderon",f),$(`#${id6}`).attr("data-shadowon",m),$(`#${id6}`).attr("data-shadowThick",I),$(`#${id6}`).attr("data-shadowblurry",k),$(`#${id6}`).attr("data-shadowY",w),$(`#${id6}`).attr("data-shadowX",x)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=this.value;const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var e=.6*a(t)[0],o=.6*a(t)[1],l=.6*a(t)[2],d=rgb2hex(e,o,l),i={marker:{color:t}},r={marker:{color:d}};Plotly.restyle(tester,i,[0]),Plotly.restyle(tester,r,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var n=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",n)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=tester.layout.xaxis.title.text;if("show_gridlines"==t){var e={yaxis:{automargin:!0,showgrid:!0},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{automargin:!0,showgrid:!1},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=(t.x,t.text),o=document.getElementById(id13).value,l={};l[e]=o,changed_text.push(l),$.each(a,function(t,l){l==e&&(a[t]=o)});var d={x:[a]};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Vertical_Area_Stacked"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),backRGB=color;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b),trace1={x:data.x_axisdata,y:data.y_axisdata,mode:"lines",marker:{color:color},fill:"tozeroy",name:fieldToVerbose(data.y_axis,data.mappingDict)},trace2={x:data.x_axisdata,y:data.second_columndata,mode:"lines",marker:{color:newcolor},fill:"tonexty",name:fieldToVerbose(data.second_column,data.mappingDict)},dataplot=[trace1,trace2],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,dataplot[1].x=data.x_axisdata,dataplot[1].y=data.second_columndata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.y_axisdata]},update2={text:[data.second_columndata]};Plotly.restyle(tester,update,[0]),Plotly.restyle(tester,update2,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),e.push(dataplot[1].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,datatable[0].cells.values[2]=dataplot[1].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w);const k=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var I=.6*k(w)[0],B=.6*k(w)[1],E=.6*k(w)[2],D=rgb2hex(I,B,E),S={marker:{color:w}},C={marker:{color:D}};Plotly.restyle(tester,S,[0]),Plotly.restyle(tester,C,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var o=col;o=col;a.push(o);const S=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var l=.6*S(o)[0],d=.6*S(o)[1],i=.6*S(o)[2],r=rgb2hex(l,d,i),n={marker:{color:o}},s={marker:{color:r}};Plotly.restyle(tester,n,[0]),Plotly.restyle(tester,s,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var c=document.getElementById(id_header),_=document.getElementById(id6),g=$(".global_header_bgcolor").val();change_header_bgcolor(_,c,g);var p=$(".global_header_color").val();change_header_color(_,c,p);var h=$(".global_header_fontsize").val();change_header_fontsize(_,c,h);var b=$(".global_header_fontweight").val();change_header_fontweight(_,c,b),$(`#${id_header_bgcolor}`).val(g),$(`#${id_header_color}`).val(p),$(`#${id_header_fontsize}`).val(h),$(`#${id_header_fontweight}`).val(b).trigger("change");var y=$(".global_header_fontstyle").val();change_header_fontstyle(_,c,y),$(`#${id_header_fontstyle}`).val(y).trigger("change");var u=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(u).trigger("change"),change_header_alignment(_,c,u),$(`#${id6}`).attr("data-header_alignment",u),$(`#${id6}`).attr("data-header_color",p),$(`#${id6}`).attr("data-header_bgcolor",g),$(`#${id6}`).attr("data-header_fontsize",h),$(`#${id6}`).attr("data-header_fontweight",b);var m=$(".global_shadow").prop("checked"),f=$(".global_border").prop("checked"),v=$(".global_shadow_color").val(),x=$(".global_shadow_x").val(),w=$(".global_shadow_y").val(),k=$(".global_shadow_blur").val(),I=$(".global_shadow_thickness").val();change_shadow_global(_,m,v,x,w,k,I);var B=$(".global_border_color").val(),E=$(".global_border_thickness").val(),D=$(".global_border_style").val();change_border_global(_,f,B,E,D),$(`#${id_shadow}`).prop("checked",m),$(`#${id_border}`).prop("checked",f),$(`#${id_shadow_color}`).val(v),$(`#${id_xshadow}`).val(x),$(`#${id_yshadow}`).val(w),$(`#${id_blurshadow}`).val(k),$(`#${id_shadow_thickness}`).val(I),$(`#${id_border_color}`).val(B),$(`#${id_border_thickness}`).val(E),$(`#${id_border_style}`).val(D).trigger("change"),$(`#${id_border}`).val(f),$(`#${id_shadow}`).val(m),$(`#${id6}`).attr("data-shadecolor",v),$(`#${id6}`).attr("data-borderStyle",D),$(`#${id6}`).attr("data-borderThickness",E),$(`#${id6}`).attr("data-borderColor",B),$(`#${id6}`).attr("data-borderon",f),$(`#${id6}`).attr("data-shadowon",m),$(`#${id6}`).attr("data-shadowThick",I),$(`#${id6}`).attr("data-shadowblurry",k),$(`#${id6}`).attr("data-shadowY",w),$(`#${id6}`).attr("data-shadowX",x)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data[0].y,e=tester.data[1].y;if("show_labels"==t){var o={mode:"lines+text",text:[a],textposition:"top"},l={mode:"lines+text",text:[e],textposition:"top"};Plotly.restyle(tester,o,[0]),Plotly.restyle(tester,l,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){o={mode:"lines",text:"",textposition:"bottom center"};Plotly.restyle(tester,o),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var d=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",d)},document.getElementById(id1).onchange=function(){var t=this.value;const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var e=.6*a(t)[0],o=.6*a(t)[1],l=.6*a(t)[2],d=rgb2hex(e,o,l),i={marker:{color:t}},r={marker:{color:d}};Plotly.restyle(tester,i,[0]),Plotly.restyle(tester,r,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var n=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",n)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{automargin:!0,showgrid:!0},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{automargin:!0,showgrid:!1},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y);try{
var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={x:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Horizontal_Bar"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata));if("yes"==global_gradient){color=$(`#${id1}`).val();var colordata=[],colorlength=data.x_axisdata.length,backRGB=$(`#${id1}`).val();colordata.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colordata[colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colordata.push(newHex)}}else{color=$(`#${id1}`).val();for(let t=0;t<colorlength;t++)colordata.push(color)}var trace1={x:data.x_axisdata,y:data.y_axisdata,type:"bar",mode:"markers",marker:{color:colordata},orientation:"h"},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:0,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,font:{family:"Arial"},tickangle:45,automargin:!0},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,delete dataplot[0].selectedpoints;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length,colordata=data.colordata;if("object"==typeof dataplot[0].marker.color)var color_old=dataplot[0].marker.color[0];else var color_old=dataplot[0].marker.color;if(null==color_old&&(color_old=color),dataplot[0].marker.color.length!=colorlength){var colordata=[];if("yes"==grad_color){color=color;var backRGB=$(`#${id1}`).val();colordata.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colordata[colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colordata.push(newHex)}}else for(let t=0;t<colorlength;t++)colordata.push(color);dataplot[0].marker={color:colordata}}}$(`#${id_label_placement}`).val(label);var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.x_axisdata]};Plotly.restyle(tester,update),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Horizontal"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype});var x_axis_end=tester.layout.xaxis.range[1],x_axis_start=tester.layout.xaxis.range[0];gradientColorApply(id1,id6,id24,tester,colorlength=dataplot[0].x.length),$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(".global_gradient_color").prop("checked")?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Horizontal")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");if(r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k),$(`#${id24}`).prop("checked")){$(`#${id6}`).attr("data-grad_color","yes");for(let t=0;t<x-1;t++){var I=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v[v.length-1]),B=.8*parseInt(I[1],16),E=.8*parseInt(I[2],16),D=.8*parseInt(I[3],16),S="#"+componentToHex(Math.round(B))+componentToHex(Math.round(E))+componentToHex(Math.round(D));v.push(S)}}else{$(`#${id6}`).attr("data-grad_color","no");for(let t=0;t<x-1;t++)v.push(k)}var C={marker:{color:v}};Plotly.restyle(tester,C),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");if($(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),$(".global_gradient_color").prop("checked")){$(`#${id6}`).attr("data-grad_color","yes"),$(`#${id24}`).prop("checked",!0),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}var c={marker:{color:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}else{$(`#${id6}`).attr("data-grad_color","no"),$(`#${id24}`).prop("checked",!1),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col);l=col,l=col;a.push(l);var _=[];for(let t=0;t<e;t++)_.push(l);c={marker:{color:_}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}var g=document.getElementById(id_header),p=document.getElementById(id6),h=$(".global_header_bgcolor").val();change_header_bgcolor(p,g,h);var b=$(".global_header_color").val();change_header_color(p,g,b);var y=$(".global_header_fontsize").val();change_header_fontsize(p,g,y);var u=$(".global_header_fontweight").val();change_header_fontweight(p,g,u),$(`#${id_header_bgcolor}`).val(h),$(`#${id_header_color}`).val(b),$(`#${id_header_fontsize}`).val(y),$(`#${id_header_fontweight}`).val(u).trigger("change");var m=$(".global_header_fontstyle").val();change_header_fontstyle(p,g,m),$(`#${id_header_fontstyle}`).val(m).trigger("change");var f=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(f).trigger("change"),change_header_alignment(p,g,f),$(`#${id6}`).attr("data-header_alignment",f),$(`#${id6}`).attr("data-header_color",b),$(`#${id6}`).attr("data-header_bgcolor",h),$(`#${id6}`).attr("data-header_fontsize",y),$(`#${id6}`).attr("data-header_fontweight",u);var v=$(".global_shadow").prop("checked"),x=$(".global_border").prop("checked"),w=$(".global_shadow_color").val(),k=$(".global_shadow_x").val(),I=$(".global_shadow_y").val(),B=$(".global_shadow_blur").val(),E=$(".global_shadow_thickness").val();change_shadow_global(p,v,w,k,I,B,E);var D=$(".global_border_color").val(),S=$(".global_border_thickness").val(),C=$(".global_border_style").val();change_border_global(p,x,D,S,C),$(`#${id_shadow}`).prop("checked",v),$(`#${id_border}`).prop("checked",x),$(`#${id_shadow_color}`).val(w),$(`#${id_xshadow}`).val(k),$(`#${id_yshadow}`).val(I),$(`#${id_blurshadow}`).val(B),$(`#${id_shadow_thickness}`).val(E),$(`#${id_border_color}`).val(D),$(`#${id_border_thickness}`).val(S),$(`#${id_border_style}`).val(C).trigger("change"),$(`#${id_border}`).val(x),$(`#${id_shadow}`).val(v),$(`#${id6}`).attr("data-shadecolor",w),$(`#${id6}`).attr("data-borderStyle",C),$(`#${id6}`).attr("data-borderThickness",S),$(`#${id6}`).attr("data-borderColor",D),$(`#${id6}`).attr("data-borderon",x),$(`#${id6}`).attr("data-shadowon",v),$(`#${id6}`).attr("data-shadowThick",E),$(`#${id6}`).attr("data-shadowblurry",B),$(`#${id6}`).attr("data-shadowY",I),$(`#${id6}`).attr("data-shadowX",k)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id_label_placement).onchange=function(){var t=document.getElementById(id_label_placement).value;if("inside"==t){var a={textinfo:"",textposition:"inside"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("outside"==t){a={textposition:"outside"};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}var e=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",e)};var config_label_placement=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",config_label_placement),document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length;if($(`#${id24}`).prop("checked")){$(`#${id6}`).attr("data-grad_color","yes"),color=$(`#${id1}`).val();var a=[],e=(t=dataplot[0].x.length,$(`#${id1}`).val());a.push(e);for(let e=0;e<t-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));a.push(r)}var n={marker:{color:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}else{$(`#${id6}`).attr("data-grad_color","no");t=dataplot[0].x.length,a=[],e=$(`#${id1}`).val();for(let o=0;o<t;o++)a.push(e);n={marker:{color:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var s=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",s)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value;if("show_labels"==t){var a=tester.data[0].x;a=a.map(function(t){return Number(t.toFixed(2))});var e=tester.data;e[0].text=a.map(String),e[0].mode="markers+text",e[0].textposition="outside",e[0].textangle=90,document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){e=tester.data;delete e[0].text,delete e[0].mode,delete e[0].textposition,document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}Plotly.redraw(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var o=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",o)},document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[1],l=tester.layout.yaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[e,o],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",r)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[0],l=tester.layout.xaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[o,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",r)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)}});var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.yaxis.categoryorder,o=a.yaxis.categoryarray,l=tester.layout.xaxis.title.text;if(y_axis_title=tester.layout.yaxis.title.text,"show_gridlines"==t){var d={yaxis:{showgrid:!0,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}},categoryorder:e,categoryarray:o},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{showgrid:!1,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}},categoryorder:e,categoryarray:o},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.yaxis.categoryorder,o=a.yaxis.categoryarray;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var l=tester.layout.yaxis.showgrid,d={yaxis:{range:[y_axis_start,y_axis_end],showgrid:l,automargin:!0,title:{standoff:20,tickangle:45,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",i)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title);var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),myPlot.on("plotly_afterplot",function(){d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].y,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={y:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].label);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"y")}),myPlot.on("plotly_deselect",function(){var t={id:chartDivId};reset_function(t)})}if("Horizontal_Histogram"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];if(x_axis=data.x_axis,"yes"==global_gradient){color=$(`#${id1}`).val();var colordata2=[],colorlength=data.x_axisdata.length,backRGB=$(`#${id1}`).val();colordata2.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colordata2[colordata2.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colordata2.push(newHex)}}else colordata2=$(`#${id1}`).val();var trace1={y:data.x_axisdata,type:"histogram",marker:{color:colordata2}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:0,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,font:{family:"Arial"},tickangle:45,automargin:!0},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),
$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].y=data.x_axisdata;var layout=data.plotDict.layout}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].y.length;a++){var e=[];e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype});var x_axis_end=tester.layout.xaxis.range[1],x_axis_start=tester.layout.xaxis.range[0];gradientColorApply(id6,id24,tester,colorlength=dataplot[0].y.length),$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(".global_gradient_color").prop("checked")?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].y.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");if(r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k),$(`#${id24}`).prop("checked")){$(`#${id6}`).attr("data-grad_color","yes");for(let t=0;t<x-1;t++){var I=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v[v.length-1]),B=.8*parseInt(I[1],16),E=.8*parseInt(I[2],16),D=.8*parseInt(I[3],16),S="#"+componentToHex(Math.round(B))+componentToHex(Math.round(E))+componentToHex(Math.round(D));v.push(S)}}else{$(`#${id6}`).attr("data-grad_color","no");for(let t=0;t<x-1;t++)v.push(k)}var C={marker:{color:v}};Plotly.restyle(tester,C),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");if($(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),$(".global_gradient_color").prop("checked")){$(`#${id24}`).prop("checked",!0),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].y.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}var c={marker:{color:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}else{$(`#${id24}`).prop("checked",!1),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;a=[],e=dataplot[0].y.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col);l=col,l=col;a.push(l);var _=[];for(let t=0;t<e;t++)_.push(l);c={marker:{color:_}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}var g=document.getElementById(id_header),p=document.getElementById(id6),h=$(".global_header_bgcolor").val();change_header_bgcolor(p,g,h);var b=$(".global_header_color").val();change_header_color(p,g,b);var y=$(".global_header_fontsize").val();change_header_fontsize(p,g,y);var u=$(".global_header_fontweight").val();change_header_fontweight(p,g,u),$(`#${id_header_bgcolor}`).val(h),$(`#${id_header_color}`).val(b),$(`#${id_header_fontsize}`).val(y),$(`#${id_header_fontweight}`).val(u).trigger("change");var m=$(".global_header_fontstyle").val();change_header_fontstyle(p,g,m),$(`#${id_header_fontstyle}`).val(m).trigger("change");var f=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(f).trigger("change"),change_header_alignment(p,g,f),$(`#${id6}`).attr("data-header_alignment",f),$(`#${id6}`).attr("data-header_color",b),$(`#${id6}`).attr("data-header_bgcolor",h),$(`#${id6}`).attr("data-header_fontsize",y),$(`#${id6}`).attr("data-header_fontweight",u);var v=$(".global_shadow").prop("checked"),x=$(".global_border").prop("checked"),w=$(".global_shadow_color").val(),k=$(".global_shadow_x").val(),I=$(".global_shadow_y").val(),B=$(".global_shadow_blur").val(),E=$(".global_shadow_thickness").val();change_shadow_global(p,v,w,k,I,B,E);var D=$(".global_border_color").val(),S=$(".global_border_thickness").val(),C=$(".global_border_style").val();change_border_global(p,x,D,S,C),$(`#${id_shadow}`).prop("checked",v),$(`#${id_border}`).prop("checked",x),$(`#${id_shadow_color}`).val(w),$(`#${id_xshadow}`).val(k),$(`#${id_yshadow}`).val(I),$(`#${id_blurshadow}`).val(B),$(`#${id_shadow_thickness}`).val(E),$(`#${id_border_color}`).val(D),$(`#${id_border_thickness}`).val(S),$(`#${id_border_style}`).val(C).trigger("change"),$(`#${id_border}`).val(x),$(`#${id_shadow}`).val(v),$(`#${id6}`).attr("data-shadecolor",w),$(`#${id6}`).attr("data-borderStyle",C),$(`#${id6}`).attr("data-borderThickness",S),$(`#${id6}`).attr("data-borderColor",D),$(`#${id6}`).attr("data-borderon",x),$(`#${id6}`).attr("data-shadowon",v),$(`#${id6}`).attr("data-shadowThick",E),$(`#${id6}`).attr("data-shadowblurry",B),$(`#${id6}`).attr("data-shadowY",I),$(`#${id6}`).attr("data-shadowX",k)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].y.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=dataplot[0].y.length;if($(`#${id24}`).prop("checked")){$(`#${id6}`).attr("data-grad_color","yes"),color=$(`#${id1}`).val();var a=[],e=(t=dataplot[0].y.length,$(`#${id1}`).val());a.push(e);for(let e=0;e<t-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));a.push(r)}var n={marker:{color:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-grad_color","yes")}else{$(`#${id6}`).attr("data-grad_color","no");t=dataplot[0].y.length,a=[],e=$(`#${id1}`).val();for(let o=0;o<t;o++)a.push(e);n={marker:{color:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-grad_color","no")}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[1],l=tester.layout.yaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[e,o],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",r)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[0],l=tester.layout.xaxis.showgrid,d=tester.layout.xaxis.title.text;if(0==t)var i={xaxis:{range:[o,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};else i={xaxis:{range:[e,a],showgrid:l,automargin:!0,title:{standoff:20,text:d,font:{family:"Arial"}}}};Plotly.relayout(tester,i),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var r=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",r)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=tester.layout.xaxis.title.text;if(y_axis_title=tester.layout.yaxis.title.text,"show_gridlines"==t){var e={yaxis:{showgrid:!0,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{showgrid:!1,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),chartResizeable(id6,tester)}if("Funnel"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata));if("yes"==global_gradient){color=$(`#${id1}`).val();var colordata=[],colorlength=data.x_axisdata.length,backRGB=$(`#${id1}`).val();colordata.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colordata[colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colordata.push(newHex)}}else for(let t=0;t<colorlength;t++)colordata.push(chart_color);var trace1={x:data.x_axisdata,y:data.y_axisdata,type:"funnel",marker:{color:colordata}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:0,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,font:{family:"Arial"},tickangle:45,automargin:!0}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,delete dataplot[0].selectedpoints;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length;if("object"==typeof dataplot[0].marker.color)var color_old=dataplot[0].marker.color[0];else var color_old=dataplot[0].marker.color;if(null==color_old&&(color_old=color),dataplot[0].marker.color.length!=colorlength){var colordata=[];if("yes"==grad_color){color=color;var backRGB=$(`#${id1}`).val();colordata.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colordata[colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colordata.push(newHex)}}else for(let t=0;t<colorlength;t++)colordata.push(color);dataplot[0].marker={color:colordata}}}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),gradientColorApply(id1,id6,id24,tester,colorlength=dataplot[0].x.length),$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(".global_gradient_color").prop("checked")?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/)
;w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");if(r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k),$(`#${id24}`).prop("checked")){$(`#${id6}`).attr("data-grad_color","yes");for(let t=0;t<x-1;t++){var I=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v[v.length-1]),B=.8*parseInt(I[1],16),E=.8*parseInt(I[2],16),D=.8*parseInt(I[3],16),S="#"+componentToHex(Math.round(B))+componentToHex(Math.round(E))+componentToHex(Math.round(D));v.push(S)}}else{$(`#${id6}`).attr("data-grad_color","no");for(let t=0;t<x-1;t++)v.push(k)}var C={marker:{color:v}};Plotly.restyle(tester,C),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),$(`#${id24}`).prop("checked")?$(`#${id6}`).attr("data-grad_color","yes"):$(`#${id6}`).attr("data-grad_color","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");if($(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),$(".global_gradient_color").prop("checked")){$(`#${id24}`).prop("checked",!0),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}var c={marker:{color:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}else{$(`#${id24}`).prop("checked",!1),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col);l=col,l=col;a.push(l);var _=[];for(let t=0;t<e;t++)_.push(l);c={marker:{color:_}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}var g=document.getElementById(id_header),p=document.getElementById(id6),h=$(".global_header_bgcolor").val();change_header_bgcolor(p,g,h);var b=$(".global_header_color").val();change_header_color(p,g,b);var y=$(".global_header_fontsize").val();change_header_fontsize(p,g,y);var u=$(".global_header_fontweight").val();change_header_fontweight(p,g,u),$(`#${id_header_bgcolor}`).val(h),$(`#${id_header_color}`).val(b),$(`#${id_header_fontsize}`).val(y),$(`#${id_header_fontweight}`).val(u).trigger("change");var m=$(".global_header_fontstyle").val();change_header_fontstyle(p,g,m),$(`#${id_header_fontstyle}`).val(m).trigger("change");var f=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(f).trigger("change"),change_header_alignment(p,g,f),$(`#${id6}`).attr("data-header_alignment",f),$(`#${id6}`).attr("data-header_color",b),$(`#${id6}`).attr("data-header_bgcolor",h),$(`#${id6}`).attr("data-header_fontsize",y),$(`#${id6}`).attr("data-header_fontweight",u);var v=$(".global_shadow").prop("checked"),x=$(".global_border").prop("checked"),w=$(".global_shadow_color").val(),k=$(".global_shadow_x").val(),I=$(".global_shadow_y").val(),B=$(".global_shadow_blur").val(),E=$(".global_shadow_thickness").val();change_shadow_global(p,v,w,k,I,B,E);var D=$(".global_border_color").val(),S=$(".global_border_thickness").val(),C=$(".global_border_style").val();change_border_global(p,x,D,S,C),$(`#${id_shadow}`).prop("checked",v),$(`#${id_border}`).prop("checked",x),$(`#${id_shadow_color}`).val(w),$(`#${id_xshadow}`).val(k),$(`#${id_yshadow}`).val(I),$(`#${id_blurshadow}`).val(B),$(`#${id_shadow_thickness}`).val(E),$(`#${id_border_color}`).val(D),$(`#${id_border_thickness}`).val(S),$(`#${id_border_style}`).val(C).trigger("change"),$(`#${id_border}`).val(x),$(`#${id_shadow}`).val(v),$(`#${id6}`).attr("data-shadecolor",w),$(`#${id6}`).attr("data-borderStyle",C),$(`#${id6}`).attr("data-borderThickness",S),$(`#${id6}`).attr("data-borderColor",D),$(`#${id6}`).attr("data-borderon",x),$(`#${id6}`).attr("data-shadowon",v),$(`#${id6}`).attr("data-shadowThick",E),$(`#${id6}`).attr("data-shadowblurry",B),$(`#${id6}`).attr("data-shadowY",I),$(`#${id6}`).attr("data-shadowX",k)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length;if($(`#${id24}`).prop("checked")){$(`#${id6}`).attr("data-grad_color","yes"),color=$(`#${id1}`).val();var a=[],e=(t=dataplot[0].x.length,$(`#${id1}`).val());a.push(e);for(let e=0;e<t-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));a.push(r)}var n={marker:{color:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-grad_color","yes")}else{$(`#${id6}`).attr("data-grad_color","no");t=dataplot[0].x.length,a=[],e=$(`#${id1}`).val();for(let o=0;o<t;o++)a.push(e);n={marker:{color:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-grad_color","no")}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;var l=document.getElementById(id4).value;o[a]=l;var d={marker:{color:o}};Plotly.restyle(tester,d,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}}),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,tickangle:45,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),myPlot.on("plotly_afterplot",function(){d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].y,e=t.x,o=t.text,l=outermodalCard.find(`#${id13}`)[0].value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={y:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text))})}),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t)},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].y);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"y")}),myPlot.on("plotly_deselect",function(){var t={id:chartDivId};reset_function(t)})}if("Funnel_Stacked"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`),outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[],colordatasecond=[];x_axis=data.x_axis,y_axis=data.y_axis;var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),backRGB=color;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.9*t(backRGB)[0],g=.9*t(backRGB)[1],b=.9*t(backRGB)[2],newcolor=rgb2hex(r,g,b);for(let t=0;t<colorlength;t++)colordata.push(color);for(let t=0;t<colorlength;t++)colordatasecond.push(newcolor);var trace1={x:data.x_axisdata,y:data.y_axisdata,type:"funnel",marker:{color:colordata},name:fieldToVerbose(x_axis,data.mappingDict)},trace2={x:data.second_columndata,y:data.y_axisdata,type:"funnel",marker:{color:colordatasecond},name:fieldToVerbose(data.second_column,data.mappingDict)},data_plot=[trace1,trace2],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={hovermode:"closest",funnelmode:"stack",height:chart_height,width:chart_width,margin:{l:0,r:0,b:20,t:10,pad:4},plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,font:{family:"Arial"},tickangle:45,automargin:!0}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),data_plot=data.plotDict.data;data_plot[0].x=data.x_axisdata,data_plot[0].y=data.y_axisdata,data_plot[1].x=data.second_columndata,data_plot[1].y=data.y_axisdata;var colorlength=data.x_axisdata.length,y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),colordata=[],colordata2=[],colorlength=data.x_axisdata.length,colordata=data_plot[0].marker.color,colordata2=data_plot[1].marker.color;if(data_plot[0].marker.color.length!=colorlength){var colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;for(let t=0;t<colorlength;t++)colordata.push(color)}if(data_plot[1].marker.color.length!=colorlength){var colordata2=[];x_axis=data.x_axis,y_axis=data.y_axis;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.9*t(color)[0],g=.9*t(color)[1],b=.9*t(color)[2],newcolor=rgb2hex(r,g,b);for(let t=0;t<colorlength;t++)colordata2.push(newcolor)}data_plot[0].marker.color=colordata,data_plot[1].marker.color=colordata2;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,data_plot,layout,config),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.second_columndata),tabledata.push(data.y_axisdata);var trace3={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace3];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<data_plot[0].x.length;a++){var e=[];e.push(data_plot[0].x[a]),e.push(data_plot[1].x[a]),e.push(data_plot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=data_plot[0].x,datatable[0].cells.values[1]=data_plot[1].x,datatable[0].cells.values[2]=data_plot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=data_plot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);var I=[],B=[];const E=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var D=.9*E(k)[0],S=.9*E(k)[1],C=.9*E(k)[2],T=rgb2hex(D,S,C);for(let t=0;t<x;t++)I.push(k);for(let t=0;t<x;t++)B.push(T);var N={marker:{color:I}},O={marker:{color:B}};Plotly.restyle(tester,N,[0]),Plotly.restyle(tester,O,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=data_plot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);var d=[],i=[];const N=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.9*N(l)[0],n=.9*N(l)[1],s=.9*N(l)[2],c=rgb2hex(r,n,s);for(let t=0;t<e;t++)d.push(l);for(let t=0;t<e;t++)i.push(c);var _={marker:{color:d}},g={marker:{color:i}};Plotly.restyle(tester,_,[0]),Plotly.restyle(tester,g,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var p=document.getElementById(id_header),h=document.getElementById(id6),b=$(".global_header_bgcolor").val();change_header_bgcolor(h,p,b);var y=$(".global_header_color").val();change_header_color(h,p,y);var u=$(".global_header_fontsize").val();change_header_fontsize(h,p,u);var m=$(".global_header_fontweight").val();change_header_fontweight(h,p,m),$(`#${id_header_bgcolor}`).val(b),$(`#${id_header_color}`).val(y),$(`#${id_header_fontsize}`).val(u),$(`#${id_header_fontweight}`).val(m).trigger("change");var f=$(".global_header_fontstyle").val();change_header_fontstyle(h,p,f),$(`#${id_header_fontstyle}`).val(f).trigger("change");var v=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(v).trigger("change"),change_header_alignment(h,p,v),$(`#${id6}`).attr("data-header_alignment",v);var x=$(".global_shadow").prop("checked"),w=$(".global_border").prop("checked"),k=$(".global_shadow_color").val(),I=$(".global_shadow_x").val(),B=$(".global_shadow_y").val(),E=$(".global_shadow_blur").val(),D=$(".global_shadow_thickness").val();change_shadow_global(h,x,k,I,B,E,D);var S=$(".global_border_color").val(),C=$(".global_border_thickness").val(),T=$(".global_border_style").val();change_border_global(h,w,S,C,T),$(`#${id_shadow}`).prop("checked",x),$(`#${id_border}`).prop("checked",w),$(`#${id_shadow_color}`).val(k),$(`#${id_xshadow}`).val(I),$(`#${id_yshadow}`).val(B),$(`#${id_blurshadow}`).val(E),$(`#${id_shadow_thickness}`).val(D),$(`#${id_border_color}`).val(S),$(`#${id_border_thickness}`).val(C),$(`#${id_border_style}`).val(T).trigger("change"),$(`#${id_border}`).val(w),$(`#${id_shadow}`).val(x),$(`#${id6}`).attr("data-shadecolor",k),$(`#${id6}`).attr("data-borderStyle",T),$(`#${id6}`).attr("data-borderThickness",C),$(`#${id6}`).attr("data-borderColor",S),$(`#${id6}`).attr("data-borderon",w),$(`#${id6}`).attr("data-shadowon",x),$(`#${id6}`).attr("data-shadowThick",D),$(`#${id6}`).attr("data-shadowblurry",E),$(`#${id6}`).attr("data-shadowY",B),$(`#${id6}`).attr("data-shadowX",I)}}),document.getElementById(id22).onchange=function(){var t=data_plot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),document.getElementById(id1).onchange=function(){var t=data_plot[0].x.length,a=[],e=[],o=this.value;const l=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var d=.9*l(o)[0],i=.9*l(o)[1],r=.9*l(o)[2],n=rgb2hex(d,i,r);for(let e=0;e<t;e++)a.push(o);for(let a=0;a<t;a++)e.push(n);var s={marker:{color:a}},c={marker:{color:e}};Plotly.restyle(tester,s,[0]),Plotly.restyle(tester,c,[1]),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var _=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",_),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]);var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}});var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})
}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,tickangle:45,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),myPlot.on("plotly_afterplot",function(){d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].y,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={y:[a]};Plotly.restyle(tester,i,[0]),Plotly.restyle(tester,i,[1]),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].y);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"y")})}if("Funnel_Area"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[];x_axis=data.x_axis,y_axis=data.y_axis;var y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata));color=chart_color;var colordata=[],colorlength=data.x_axisdata.length,backRGB=$(`#${id1}`).val();colordata.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colordata[colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colordata.push(newHex)}var trace1={text:data.x_axisdata,values:data.y_axisdata,type:"funnelarea",marker:{colors:colordata}},dataplot=[trace1],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={margin:{l:0,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,font:{family:"Arial"},tickangle:45,automargin:!0}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].text=data.x_axisdata,dataplot[0].values=data.y_axisdata;var layout=data.plotDict.layout;color=color;var colordata=[],colorlength=data.x_axisdata.length,backRGB=$(`#${id1}`).val();colordata.push(backRGB);for(let t=0;t<colorlength-1;t++){var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(colordata[colordata.length-1]),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b));colordata.push(newHex)}dataplot[0].marker.colors=colordata;var colorlength=data.x_axisdata.length,colordata=data.colordata}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].text.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);for(let t=0;t<x-1;t++){var I=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v[v.length-1]),B=.8*parseInt(I[1],16),E=.8*parseInt(I[2],16),D=.8*parseInt(I[3],16),S="#"+componentToHex(Math.round(B))+componentToHex(Math.round(E))+componentToHex(Math.round(D));v.push(S)}var C={marker:{colors:v}};Plotly.restyle(tester,C),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].text.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}var c={marker:{colors:a}};Plotly.restyle(tester,c),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var _=document.getElementById(id_header),g=document.getElementById(id6),p=$(".global_header_bgcolor").val();change_header_bgcolor(g,_,p);var h=$(".global_header_color").val();change_header_color(g,_,h);var b=$(".global_header_fontsize").val();change_header_fontsize(g,_,b);var y=$(".global_header_fontweight").val();change_header_fontweight(g,_,y),$(`#${id_header_bgcolor}`).val(p),$(`#${id_header_color}`).val(h),$(`#${id_header_fontsize}`).val(b),$(`#${id_header_fontweight}`).val(y).trigger("change");var u=$(".global_header_fontstyle").val();change_header_fontstyle(g,_,u),$(`#${id_header_fontstyle}`).val(u).trigger("change");var m=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(m).trigger("change"),change_header_alignment(g,_,m),$(`#${id6}`).attr("data-header_alignment",m),$(`#${id6}`).attr("data-header_color",h),$(`#${id6}`).attr("data-header_bgcolor",p),$(`#${id6}`).attr("data-header_fontsize",b),$(`#${id6}`).attr("data-header_fontweight",y);var f=$(".global_shadow").prop("checked"),v=$(".global_border").prop("checked"),x=$(".global_shadow_color").val(),w=$(".global_shadow_x").val(),k=$(".global_shadow_y").val(),I=$(".global_shadow_blur").val(),B=$(".global_shadow_thickness").val();change_shadow_global(g,f,x,w,k,I,B);var E=$(".global_border_color").val(),D=$(".global_border_thickness").val(),S=$(".global_border_style").val();change_border_global(g,v,E,D,S),$(`#${id_shadow}`).prop("checked",f),$(`#${id_border}`).prop("checked",v),$(`#${id_shadow_color}`).val(x),$(`#${id_xshadow}`).val(w),$(`#${id_yshadow}`).val(k),$(`#${id_blurshadow}`).val(I),$(`#${id_shadow_thickness}`).val(B),$(`#${id_border_color}`).val(E),$(`#${id_border_thickness}`).val(D),$(`#${id_border_style}`).val(S).trigger("change"),$(`#${id_border}`).val(v),$(`#${id_shadow}`).val(f),$(`#${id6}`).attr("data-shadecolor",x),$(`#${id6}`).attr("data-borderStyle",S),$(`#${id6}`).attr("data-borderThickness",D),$(`#${id6}`).attr("data-borderColor",E),$(`#${id6}`).attr("data-borderon",v),$(`#${id6}`).attr("data-shadowon",f),$(`#${id6}`).attr("data-shadowThick",B),$(`#${id6}`).attr("data-shadowblurry",I),$(`#${id6}`).attr("data-shadowY",k),$(`#${id6}`).attr("data-shadowX",w)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].text.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),document.getElementById(id1).onchange=function(){var t=dataplot[0].text.length,a=[],e=this.value;e=this.value;a.push(e);for(let e=0;e<t-1;e++){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i));a.push(r)}var n={marker:{colors:a}};Plotly.restyle(tester,n),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var s=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",s)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),myPlot.on("plotly_click",function(t){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)});var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},chartResizeable(id6,tester)}if("Horizontal_Area_Stacked"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=data.second_column,modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis,modalDataConfig.second_column=data.second_column;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[],colordatasecond=[],y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),backRGB=color;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.9*t(backRGB)[0],g=.9*t(backRGB)[1],b=.9*t(backRGB)[2],newcolor=rgb2hex(r,g,b);for(let t=0;t<colorlength;t++)colordata.push(color);for(let t=0;t<colorlength;t++)colordatasecond.push(newcolor);var trace1={x:data.x_axisdata,y:data.y_axisdata,mode:"lines",marker:{color:color},fill:"tozeroy",name:fieldToVerbose(data.y_axis,data.mappingDict)},trace2={x:data.second_columndata,y:data.y_axisdata,mode:"lines",marker:{color:newcolor},fill:"tonexty",name:fieldToVerbose(data.second_column,data.mappingDict)},dataplot=[trace1,trace2],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,legend:{orientation:"h"},barmode:"stack",hovermode:"closest",margin:{l:0,r:0,b:20,t:10,pad:4},yaxis:{title:{standoff:20,text:fieldToVerbose(y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,font:{family:"Arial"},tickangle:45,automargin:!0},xaxis:{title:{showgrid:!1,automargin:!0,text:fieldToVerbose(x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,dataplot[1].x=data.second_columndata,dataplot[1].y=data.y_axisdata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.x_axisdata]},update2={text:[data.second_columndata]};Plotly.restyle(tester,update,[0]),Plotly.restyle(tester,update2,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.second_columndata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Horizontal"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[1].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[1].x,datatable[0].cells.values[2]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype});var x_axis_end=tester.layout.xaxis.range[1],x_axis_start=tester.layout.xaxis.range[0];$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Horizontal")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col
;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w);const k=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var I=.9*k(w)[0],B=.9*k(w)[1],E=.9*k(w)[2],D=rgb2hex(I,B,E),S={marker:{color:w}},C={marker:{color:D}};Plotly.restyle(tester,S,[0]),Plotly.restyle(tester,C,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var o=col;o=col;a.push(o);const S=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var l=.9*S(o)[0],d=.9*S(o)[1],i=.9*S(o)[2],r=rgb2hex(l,d,i),n={marker:{color:o}},s={marker:{color:r}};Plotly.restyle(tester,n,[0]),Plotly.restyle(tester,s,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var c=document.getElementById(id_header),_=document.getElementById(id6),g=$(".global_header_bgcolor").val();change_header_bgcolor(_,c,g);var p=$(".global_header_color").val();change_header_color(_,c,p);var h=$(".global_header_fontsize").val();change_header_fontsize(_,c,h);var b=$(".global_header_fontweight").val();change_header_fontweight(_,c,b),$(`#${id_header_bgcolor}`).val(g),$(`#${id_header_color}`).val(p),$(`#${id_header_fontsize}`).val(h),$(`#${id_header_fontweight}`).val(b).trigger("change");var y=$(".global_header_fontstyle").val();change_header_fontstyle(_,c,y),$(`#${id_header_fontstyle}`).val(y).trigger("change");var u=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(u).trigger("change"),change_header_alignment(_,c,u),$(`#${id6}`).attr("data-header_alignment",u),$(`#${id6}`).attr("data-header_color",p),$(`#${id6}`).attr("data-header_bgcolor",g),$(`#${id6}`).attr("data-header_fontsize",h),$(`#${id6}`).attr("data-header_fontweight",b);var m=$(".global_shadow").prop("checked"),f=$(".global_border").prop("checked"),v=$(".global_shadow_color").val(),x=$(".global_shadow_x").val(),w=$(".global_shadow_y").val(),k=$(".global_shadow_blur").val(),I=$(".global_shadow_thickness").val();change_shadow_global(_,m,v,x,w,k,I);var B=$(".global_border_color").val(),E=$(".global_border_thickness").val(),D=$(".global_border_style").val();change_border_global(_,f,B,E,D),$(`#${id_shadow}`).prop("checked",m),$(`#${id_border}`).prop("checked",f),$(`#${id_shadow_color}`).val(v),$(`#${id_xshadow}`).val(x),$(`#${id_yshadow}`).val(w),$(`#${id_blurshadow}`).val(k),$(`#${id_shadow_thickness}`).val(I),$(`#${id_border_color}`).val(B),$(`#${id_border_thickness}`).val(E),$(`#${id_border_style}`).val(D).trigger("change"),$(`#${id_border}`).val(f),$(`#${id_shadow}`).val(m),$(`#${id6}`).attr("data-shadecolor",v),$(`#${id6}`).attr("data-borderStyle",D),$(`#${id6}`).attr("data-borderThickness",E),$(`#${id6}`).attr("data-borderColor",B),$(`#${id6}`).attr("data-borderon",f),$(`#${id6}`).attr("data-shadowon",m),$(`#${id6}`).attr("data-shadowThick",I),$(`#${id6}`).attr("data-shadowblurry",k),$(`#${id6}`).attr("data-shadowY",w),$(`#${id6}`).attr("data-shadowX",x)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value;if("show_labels"==t){var a=tester.data[0].x,e=tester.data[1].x,o={mode:"lines+text",text:[a],textposition:"top"},l={mode:"lines+text",text:[e],textposition:"top"};Plotly.restyle(tester,o,[0]),Plotly.restyle(tester,l,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){o={mode:"lines",text:"",textposition:"bottom center"};Plotly.restyle(tester,o),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}var d=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",d)},document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length,a=[],e=[],o=this.value;const l=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var d=.9*l(o)[0],i=.9*l(o)[1],r=.9*l(o)[2],n=rgb2hex(d,i,r);for(let e=0;e<t;e++)a.push(o);for(let a=0;a<t;a++)e.push(n);var s={marker:{color:o}},c={marker:{color:n}};Plotly.restyle(tester,s,[0]),Plotly.restyle(tester,c,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var _=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",_)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[1],l=tester.layout.yaxis.showgrid;if(0==t)var d={xaxis:{range:[e,o],showgrid:l,automargin:!0}};else d={xaxis:{range:[e,a],showgrid:l,automargin:!0}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",i)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[0],l=tester.layout.xaxis.showgrid;if(0==t)var d={xaxis:{range:[o,a],showgrid:l,automargin:!0}};else d={xaxis:{range:[e,a],showgrid:l,automargin:!0}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",i)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)}});var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.yaxis.categoryorder,o=a.yaxis.categoryarray;if(y_axis_title=tester.layout.yaxis.title.text,"show_gridlines"==t){var l={yaxis:{showgrid:!0,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}},categoryorder:e,categoryarray:o},xaxis:{showgrid:!0,automargin:!0}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){l={yaxis:{showgrid:!1,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}},categoryorder:e,categoryarray:o},xaxis:{showgrid:!1,automargin:!0}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",d)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.yaxis.categoryorder,o=a.yaxis.categoryarray;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var l=tester.layout.yaxis.showgrid,d={yaxis:{range:[y_axis_start,y_axis_end],showgrid:l,automargin:!0,title:{standoff:20,tickangle:45,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",i)};var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y),myPlot.on("plotly_afterplot",function(){d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].y,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={y:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Horizontal_Bar_Stacked"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=void 0,modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.y_axisdata.length,colordata=[],y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),backRGB=color,dataplot=[],color_value=chart_color;for(var x in data.x_axisdata){colordata=[];for(let t=0;t<colorlength;t++)colordata.push(color_value);var trace1={x:data.x_axisdata[x],y:data.y_axisdata,type:"bar",mode:"markers",text:fieldToVerbose(data.x_axisdata[x],data.mappingDict),marker:{color:colordata},orientation:"h",name:fieldToVerbose(data.x_axis[x],data.mappingDict)};dataplot.push(trace1);var colorList1=[];colorList1.push(color_value);var backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);color_value=newcolor}var tester=document.getElementById(id),myPlot=document.getElementById(id),layout={legend:{orientation:"h"},barmode:"stack",hovermode:"closest",margin:{l:0,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,font:{family:"Arial"},tickangle:45,automargin:!0},xaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,ize:label_fontsize}}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;for(let t=0;t<dataplot.length;t++)dataplot[t].x=data.x_axisdata[t],dataplot[t].y=data.y_axisdata,delete dataplot[t].selectedpoints;var layout=data.plotDict.layout,color_old=[],colorlength=data.y_axisdata.length;if("object"==typeof dataplot[0].marker.color)for(let t=0;t<dataplot.length;t++)color_old.push(dataplot[t].marker.color[0]);else for(let t=0;t<dataplot.length;t++)color_old.push(dataplot[t].marker.color);if(-1!=color_old.indexOf(void 0)){color_old=[],color_old.push(color);for(let t=1;t<dataplot.length;t++){backRGB=color_old[t-1];const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*a(backRGB)[0],g=.6*a(backRGB)[1],b=.6*a(backRGB)[2],newcolor=rgb2hex(r,g,b);color_old.push(newcolor)}}if(dataplot[0].marker.color.length!=colorlength)for(let t=0;t<dataplot.length;t++){var colordata=[];for(let a=0;a<colorlength;a++)colordata.push(color_old[t]);dataplot[t].marker={color:colordata}}}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);for(var i=0;i<data.x_axisdata.length;i++){var update={text:[data.x_axisdata[i]]};Plotly.restyle(tester,update,[i])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));for(var tabledata=[],tableheaders=[],i=0;i<x_axis.length;i++)tableheaders.push(`<b>${fieldToVerbose(data.x_axis[i],data.mappingDict)}</b>`);tableheaders.push(`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`);for(var i=0;i<x_axisdata;i++)tabledata.push(data.x_axisdata[i]);tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Horizontal"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){for(var t=[],a=[],e=0;e<x_axis.length;e++)a.push(fieldToVerbose(data.x_axis[e],data.mappingDict));a.push(`${fieldToVerbose(data.y_axis,data.mappingDict)}`),t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var o=[];for(let t=0;t<dataplot.length;t++)o.push(dataplot[t].x[a]);o.push(dataplot[0].y[a]),t.push(o)}var l=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),d=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),r=URL.createObjectURL(d);i.setAttribute("href",r),i.setAttribute("download",`${data.chartHeader}`+"_data.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},document.getElementById(id_tableshow).onclick=function(){for(var t=0;t<dataplot.length;t++)datatable[0].cells.values[t]=dataplot[t].x;if(datatable[0].cells.values[dataplot.length]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var a=document.getElementById(id_table);Plotly.newPlot(a,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype});var x_axis_end=tester.layout.xaxis.range[1],x_axis_start=tester.layout.xaxis.range[0];$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Horizontal")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;for(var k=col,I=(k=col,k),B=[],E=0;E<data.x_axisdata.length;E++){I=I,backRGB=I,B=[];for(E=0;E<x;E++)B.push(I);var D={marker:{color:B}};const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var S=.6*t(I)[0],C=.6*t(I)[1],T=.6*t(I)[2],N=rgb2hex(S,C,T);I=N,Plotly.restyle(tester,D,[E])}rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(var d=l,i=(e=dataplot[0].x.length,[]),r=0;r<data.x_axisdata.length;r++){d=d;i=[];for(r=0;r<e;r++)i.push(d);var n={marker:{color:i}};a=[];a.push(d);const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var s=.6*t(d)[0],c=.6*t(d)[1],_=.6*t(d)[2],g=rgb2hex(s,c,_);d=g,Plotly.restyle(tester,n,[r])}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var p=document.getElementById(id_header),h=document.getElementById(id6),b=$(".global_header_bgcolor").val();change_header_bgcolor(h,p,b);var y=$(".global_header_color").val();change_header_color(h,p,y);var u=$(".global_header_fontsize").val();change_header_fontsize(h,p,u);var m=$(".global_header_fontweight").val();change_header_fontweight(h,p,m),$(`#${id_header_bgcolor}`).val(b),$(`#${id_header_color}`).val(y),$(`#${id_header_fontsize}`).val(u),$(`#${id_header_fontweight}`).val(m).trigger("change");var f=$(".global_header_fontstyle").val();change_header_fontstyle(h,p,f),$(`#${id_header_fontstyle}`).val(f).trigger("change");var v=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(v).trigger("change"),change_header_alignment(h,p,v),$(`#${id6}`).attr("data-header_alignment",v),$(`#${id6}`).attr("data-header_color",y),$(`#${id6}`).attr("data-header_bgcolor",b),$(`#${id6}`).attr("data-header_fontsize",u),$(`#${id6}`).attr("data-header_fontweight",m);var x=$(".global_shadow").prop("checked"),w=$(".global_border").prop("checked"),k=$(".global_shadow_color").val(),I=$(".global_shadow_x").val(),B=$(".global_shadow_y").val(),E=$(".global_shadow_blur").val(),D=$(".global_shadow_thickness").val();change_shadow_global(h,x,k,I,B,E,D);var S=$(".global_border_color").val(),C=$(".global_border_thickness").val(),T=$(".global_border_style").val();change_border_global(h,w,S,C,T),$(`#${id_shadow}`).prop("checked",x),$(`#${id_border}`).prop("checked",w),$(`#${id_shadow_color}`).val(k),$(`#${id_xshadow}`).val(I),$(`#${id_yshadow}`).val(B),$(`#${id_blurshadow}`).val(E),$(`#${id_shadow_thickness}`).val(D),$(`#${id_border_color}`).val(S),$(`#${id_border_thickness}`).val(C),$(`#${id_border_style}`).val(T).trigger("change"),$(`#${id_border}`).val(w),$(`#${id_shadow}`).val(x),$(`#${id6}`).attr("data-shadecolor",k),$(`#${id6}`).attr("data-borderStyle",T),$(`#${id6}`).attr("data-borderThickness",C),$(`#${id6}`).attr("data-borderColor",S),$(`#${id6}`).attr("data-borderon",w),$(`#${id6}`).attr("data-shadowon",x),$(`#${id6}`).attr("data-shadowThick",D),$(`#${id6}`).attr("data-shadowblurry",E),$(`#${id6}`).attr("data-shadowY",B),$(`#${id6}`).attr("data-shadowX",I)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),
$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){for(var t=this.value,a=t,e=dataplot[0].x.length,o=[],l=0;l<data.x_axisdata.length;l++){o=[];for(let t=0;t<e;t++)o.push(a);var d={marker:{color:a}},i=[];i.push(a);t=a;const _=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*_(t)[0],n=.6*_(t)[1],s=.6*_(t)[2],c=rgb2hex(r,n,s);a=c,Plotly.restyle(tester,d,[l])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var _=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",_)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data;if("show_labels"==t){for(var e=0;e<tester.data.length;e++){var o=tester.data[e].x;o=o.map(function(t){return Number(t.toFixed(2))}),0==e&&(a[e].mode="markers+text"),a[e].text=o.map(String),a[e].textposition="inside",a[e].textangle=90}document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){delete a[0].text,delete a[0].textposition,delete a[0].mode;for(e=1;e<tester.data.length;e++)delete a[e].text,delete a[e].textposition;document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}Plotly.redraw(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var l=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",l)},document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[1],l=tester.layout.yaxis.showgrid;if(0==t)var d={xaxis:{range:[e,o],showgrid:l,automargin:!0}};else d={xaxis:{range:[e,a],showgrid:l,automargin:!0}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",i)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[0],l=tester.layout.xaxis.showgrid;if(0==t)var d={xaxis:{range:[o,a],showgrid:l,automargin:!0}};else d={xaxis:{range:[e,a],showgrid:l,automargin:!0}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",i)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)}});var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.yaxis.categoryorder,o=a.yaxis.categoryarray;if(y_axis_title=tester.layout.yaxis.title.text,"show_gridlines"==t){var l={yaxis:{showgrid:!0,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}},categoryorder:e,categoryarray:o},xaxis:{showgrid:!0,automargin:!0}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){l={yaxis:{showgrid:!1,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}},categoryorder:e,categoryarray:o},xaxis:{showgrid:!1,automargin:!0}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",d)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.yaxis.categoryorder,o=a.yaxis.categoryarray;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var l=tester.layout.yaxis.showgrid,d={yaxis:{range:[y_axis_start,y_axis_end],showgrid:l,automargin:!0,title:{standoff:20,tickangle:45,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",i)};var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y),myPlot.on("plotly_afterplot",function(){d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].y,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={y:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].label);a.filter((t,a,e)=>e.indexOf(t)===a);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"y")}),myPlot.on("plotly_deselect",function(){var t={id:chartDivId};reset_function(t)})}if("Horizontal_Grouped_Box"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[],colordatasecond=[],y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),backRGB=color;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.8*t(backRGB)[0],g=.8*t(backRGB)[1],b=.8*t(backRGB)[2],newcolor=rgb2hex(r,g,b);for(let t=0;t<colorlength;t++)colordata.push(color);for(let t=0;t<colorlength;t++)colordatasecond.push(newcolor);var trace1={x:data.x_axisdata,y:data.y_axisdata,type:"box",boxpoints:!1,marker:{color:color},orientation:"h",name:fieldToVerbose(data.x_axis,data.mappingDict)},trace2={x:data.second_columndata,y:data.y_axisdata,type:"box",boxpoints:!1,marker:{color:newcolor},orientation:"h",name:fieldToVerbose(data.second_column,data.mappingDict)},dataplot=[trace1,trace2],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,legend:{orientation:"h"},boxmode:"group",hovermode:"closest",margin:{l:0,r:0,b:20,t:10,pad:4},yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,font:{family:"Arial"},tickangle:45,automargin:!0},xaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,dataplot[1].x=data.second_columndata,dataplot[1].y=data.y_axisdata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.second_columndata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[1].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[1].x,datatable[0].cells.values[2]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype});var x_axis_end=tester.layout.xaxis.range[1],x_axis_start=tester.layout.xaxis.range[0];$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w);const k=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var I=.8*k(w)[0],B=.8*k(w)[1],E=.8*k(w)[2],D=rgb2hex(I,B,E),S={marker:{color:w}},C={marker:{color:D}};Plotly.restyle(tester,S,[0]),Plotly.restyle(tester,C,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var o=col;o=col;a.push(o);const S=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var l=.8*S(o)[0],d=.8*S(o)[1],i=.8*S(o)[2],r=rgb2hex(l,d,i),n={marker:{color:o}},s={marker:{color:r}};Plotly.restyle(tester,n,[0]),Plotly.restyle(tester,s,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var c=document.getElementById(id_header),_=document.getElementById(id6),g=$(".global_header_bgcolor").val();change_header_bgcolor(_,c,g);var p=$(".global_header_color").val();change_header_color(_,c,p);var h=$(".global_header_fontsize").val();change_header_fontsize(_,c,h);var b=$(".global_header_fontweight").val();change_header_fontweight(_,c,b),$(`#${id_header_bgcolor}`).val(g),$(`#${id_header_color}`).val(p),$(`#${id_header_fontsize}`).val(h),$(`#${id_header_fontweight}`).val(b).trigger("change");var y=$(".global_header_fontstyle").val();change_header_fontstyle(_,c,y),$(`#${id_header_fontstyle}`).val(y).trigger("change");var u=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(u).trigger("change"),change_header_alignment(_,c,u),$(`#${id6}`).attr("data-header_alignment",u);var m=$(".global_shadow").prop("checked"),f=$(".global_border").prop("checked"),v=$(".global_shadow_color").val(),x=$(".global_shadow_x").val(),w=$(".global_shadow_y").val(),k=$(".global_shadow_blur").val(),I=$(".global_shadow_thickness").val();change_shadow_global(_,m,v,x,w,k,I);var B=$(".global_border_color").val(),E=$(".global_border_thickness").val(),D=$(".global_border_style").val();change_border_global(_,f,B,E,D),$(`#${id_shadow}`).prop("checked",m),$(`#${id_border}`).prop("checked",f),$(`#${id_shadow_color}`).val(v),$(`#${id_xshadow}`).val(x),$(`#${id_yshadow}`).val(w),$(`#${id_blurshadow}`).val(k),$(`#${id_shadow_thickness}`).val(I),$(`#${id_border_color}`).val(B),$(`#${id_border_thickness}`).val(E),$(`#${id_border_style}`).val(D).trigger("change"),$(`#${id_border}`).val(f),$(`#${id_shadow}`).val(m),$(`#${id6}`).attr("data-shadecolor",v),$(`#${id6}`).attr("data-borderStyle",D),$(`#${id6}`).attr("data-borderThickness",E),$(`#${id6}`).attr("data-borderColor",B),$(`#${id6}`).attr("data-borderon",f),$(`#${id6}`).attr("data-shadowon",m),$(`#${id6}`).attr("data-shadowThick",I),$(`#${id6}`).attr("data-shadowblurry",k),$(`#${id6}`).attr("data-shadowY",w),$(`#${id6}`).attr("data-shadowX",x)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){dataplot[0].x.length;var t=this.value;const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var e=.8*a(t)[0],o=.8*a(t)[1],l=.8*a(t)[2],d=rgb2hex(e,o,l),i={marker:{color:t}},r={marker:{color:d}};Plotly.restyle(tester,i,[0]),Plotly.restyle(tester,r,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var n=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",n)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[1],l=tester.layout.yaxis.showgrid;if(0==t)var d={xaxis:{range:[e,o],showgrid:l,automargin:!0}};else d={xaxis:{range:[e,a],showgrid:l,automargin:!0}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",i)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[0],l=tester.layout.xaxis.showgrid;if(0==t)var d={xaxis:{range:[o,a],showgrid:l,automargin:!0}};else d={xaxis:{range:[e,a],showgrid:l,automargin:!0}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",i)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)}});var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value;if(y_axis_title=tester.layout.yaxis.title.text,"show_gridlines"==t){var a={yaxis:{showgrid:!0,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){a={yaxis:{showgrid:!1,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var e=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",e)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,tickangle:45,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y),myPlot.on("plotly_afterplot",function(){
d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].y,e=(t.x,t.text),o=document.getElementById(id13).value,l={};l[e]=o,changed_text.push(l),$.each(a,function(t,l){l==e&&(a[t]=o)});var d={y:[a]};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Horizontal_Grouped_Violin"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=data.second_column,modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis,modalDataConfig.second_column=data.second_column;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[],colordatasecond=[],y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),backRGB=color;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.8*t(backRGB)[0],g=.8*t(backRGB)[1],b=.8*t(backRGB)[2],newcolor=rgb2hex(r,g,b);for(let t=0;t<colorlength;t++)colordata.push(color);for(let t=0;t<colorlength;t++)colordatasecond.push(newcolor);var trace1={x:data.x_axisdata,y:data.y_axisdata,type:"violin",boxpoints:!1,marker:{color:color},orientation:"h",name:fieldToVerbose(data.x_axis,data.mappingDict)},trace2={x:data.second_columndata,y:data.y_axisdata,type:"violin",boxpoints:!1,marker:{color:newcolor},orientation:"h",name:fieldToVerbose(data.second_column,data.mappingDict)},dataplot=[trace1,trace2],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={violinmode:"group",legend:{orientation:"h"},boxmode:"group",hovermode:"closest",margin:{l:0,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,font:{family:"Arial"},tickangle:45,automargin:!0},xaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,dataplot[1].x=data.second_columndata,dataplot[1].y=data.y_axisdata;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype});var x_axis_end=tester.layout.xaxis.range[1],x_axis_start=tester.layout.xaxis.range[0];$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),e.push(dataplot[1].x[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,datatable[0].cells.values[2]=dataplot[1].x,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w);const k=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var I=.8*k(w)[0],B=.8*k(w)[1],E=.8*k(w)[2],D=rgb2hex(I,B,E),S={marker:{color:w}},C={marker:{color:D}};Plotly.restyle(tester,S,[0]),Plotly.restyle(tester,C,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var o=col;o=col;a.push(o);const S=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var l=.8*S(o)[0],d=.8*S(o)[1],i=.8*S(o)[2],r=rgb2hex(l,d,i),n={marker:{color:o}},s={marker:{color:r}};Plotly.restyle(tester,n,[0]),Plotly.restyle(tester,s,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var c=document.getElementById(id_header),_=document.getElementById(id6),g=$(".global_header_bgcolor").val();change_header_bgcolor(_,c,g);var p=$(".global_header_color").val();change_header_color(_,c,p);var h=$(".global_header_fontsize").val();change_header_fontsize(_,c,h);var b=$(".global_header_fontweight").val();change_header_fontweight(_,c,b),$(`#${id_header_bgcolor}`).val(g),$(`#${id_header_color}`).val(p),$(`#${id_header_fontsize}`).val(h),$(`#${id_header_fontweight}`).val(b).trigger("change");var y=$(".global_header_fontstyle").val();change_header_fontstyle(_,c,y),$(`#${id_header_fontstyle}`).val(y).trigger("change");var u=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(u).trigger("change"),change_header_alignment(_,c,u),$(`#${id6}`).attr("data-header_alignment",u),$(`#${id6}`).attr("data-header_color",p),$(`#${id6}`).attr("data-header_bgcolor",g),$(`#${id6}`).attr("data-header_fontsize",h),$(`#${id6}`).attr("data-header_fontweight",b);var m=$(".global_shadow").prop("checked"),f=$(".global_border").prop("checked"),v=$(".global_shadow_color").val(),x=$(".global_shadow_x").val(),w=$(".global_shadow_y").val(),k=$(".global_shadow_blur").val(),I=$(".global_shadow_thickness").val();change_shadow_global(_,m,v,x,w,k,I);var B=$(".global_border_color").val(),E=$(".global_border_thickness").val(),D=$(".global_border_style").val();change_border_global(_,f,B,E,D),$(`#${id_shadow}`).prop("checked",m),$(`#${id_border}`).prop("checked",f),$(`#${id_shadow_color}`).val(v),$(`#${id_xshadow}`).val(x),$(`#${id_yshadow}`).val(w),$(`#${id_blurshadow}`).val(k),$(`#${id_shadow_thickness}`).val(I),$(`#${id_border_color}`).val(B),$(`#${id_border_thickness}`).val(E),$(`#${id_border_style}`).val(D).trigger("change"),$(`#${id_border}`).val(f),$(`#${id_shadow}`).val(m),$(`#${id6}`).attr("data-shadecolor",v),$(`#${id6}`).attr("data-borderStyle",D),$(`#${id6}`).attr("data-borderThickness",E),$(`#${id6}`).attr("data-borderColor",B),$(`#${id6}`).attr("data-borderon",f),$(`#${id6}`).attr("data-shadowon",m),$(`#${id6}`).attr("data-shadowThick",I),$(`#${id6}`).attr("data-shadowblurry",k),$(`#${id6}`).attr("data-shadowY",w),$(`#${id6}`).attr("data-shadowX",x)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){dataplot[0].x.length;var t=this.value;const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var e=.8*a(t)[0],o=.8*a(t)[1],l=.8*a(t)[2],d=rgb2hex(e,o,l),i={marker:{color:t}},r={marker:{color:d}};Plotly.restyle(tester,i,[0]),Plotly.restyle(tester,r,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var n=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",n)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[1],l=tester.layout.yaxis.showgrid;if(0==t)var d={xaxis:{range:[e,o],showgrid:l,automargin:!0}};else d={xaxis:{range:[e,a],showgrid:l,automargin:!0}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",i)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[0],l=tester.layout.xaxis.showgrid;if(0==t)var d={xaxis:{range:[o,a],showgrid:l,automargin:!0}};else d={xaxis:{range:[e,a],showgrid:l,automargin:!0}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",i)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)}});var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value;if(y_axis_title=tester.layout.yaxis.title.text,"show_gridlines"==t){var a={yaxis:{showgrid:!0,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){a={yaxis:{showgrid:!1,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var e=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",e)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,tickangle:45,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y),myPlot.on("plotly_afterplot",function(){d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].y,e=(t.x,t.text),o=document.getElementById(id13).value,l={};l[e]=o,changed_text.push(l),$.each(a,function(t,l){l==e&&(a[t]=o)});var d={y:[a]};Plotly.restyle(tester,d),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester)}if("Horizontal_Waterfall_Grouped"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=data.second_column,modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis,modalDataConfig.second_column=data.second_column;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[],colordatasecond=[],measure=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata=data.x_axisdata,y_axisdata=data.y_axisdata,x_axisdata2=data.second_columndata,y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata));y_axisdata2.push("Total"),y_axisdata.push("Total"),null!=x_axisdata&&(Number.isInteger(x_axisdata.reduce((t,a)=>t+a,0))?x_axisdata.push(x_axisdata.reduce((t,a)=>t+a,0)):x_axisdata.push(x_axisdata.reduce((t,a)=>t+a,0).toFixed(2))),null!=x_axisdata2&&(Number.isInteger(x_axisdata2.reduce((t,a)=>t+a,0))?x_axisdata2.push(x_axisdata2.reduce((t,a)=>t+a,0)):x_axisdata2.push(x_axisdata2.reduce((t,a)=>t+a,0).toFixed(2)));for(let t=0;t<colorlength;t++)colordata.push("#b8860b");for(let t=0;t<colorlength;t++)colordatasecond.push("goldenrod");for(let t=0;t<colorlength;t++)measure.push("relative");measure.push("total");var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(color),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b)),trace1={x:x_axisdata,y:y_axisdata,type:"waterfall",orientation:"h",measure:measure,mode:"markers",decreasing:{marker:{color:color}},increasing:{marker:{color:color}},totals:{marker:{color:newHex}},name:fieldToVerbose(data.x_axis,data.mappingDict)},trace2={x:x_axisdata2,y:y_axisdata,type:"waterfall",orientation:"h",measure:measure,decreasing:{marker:{color:color}},increasing:{marker:{color:color}},totals:{marker:{color:newHex}},name:fieldToVerbose(data.second_column,data.mappingDict)},dataplot=[trace1,trace2],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={legend:{orientation:"h"},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,barmode:"group",hovermode:"closest",margin:{l:0,r:0,b:20,t:10,pad:4},yaxis:{title:{standoff:20,text:fieldToVerbose(data.y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,font:{family:"Arial"},tickangle:45,automargin:!0},xaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordatasecond=[],tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data,x_axisdata=data.x_axisdata,measure=[],y_axisdata=data.y_axisdata,x_axisdata2=data.second_columndata,y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata));y_axisdata2.push("Total");var colordata=[];y_axisdata.push("Total"),null!=x_axisdata&&(Number.isInteger(x_axisdata.reduce((t,a)=>t+a,0))?x_axisdata.push(x_axisdata.reduce((t,a)=>t+a,0)):x_axisdata.push(x_axisdata.reduce((t,a)=>t+a,0).toFixed(2))),null!=x_axisdata2&&(Number.isInteger(x_axisdata2.reduce((t,a)=>t+a,0))?x_axisdata2.push(x_axisdata2.reduce((t,a)=>t+a,0)):x_axisdata2.push(x_axisdata2.reduce((t,a)=>t+a,0).toFixed(2)));for(let t=0;t<colorlength;t++)colordata.push("#b8860b");for(let t=0;t<colorlength;t++)colordatasecond.push("goldenrod");for(let t=0;t<colorlength;t++)measure.push("relative");measure.push("total"),dataplot[0].x=x_axisdata,dataplot[0].y=y_axisdata,dataplot[1].x=x_axisdata2,dataplot[1].y=y_axisdata,dataplot[0].measure=measure,dataplot[1].measure=measure;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.x_axisdata]},update2={text:[data.second_columndata]};Plotly.restyle(tester,update,[0]),Plotly.restyle(tester,update2,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.second_columndata),tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),document.getElementById(id1).onchange=function(){var t=this.value,a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),e=.8*parseInt(a[1],16),o=.8*parseInt(a[2],16),l=.8*parseInt(a[3],16),d="#"+componentToHex(Math.round(e))+componentToHex(Math.round(o))+componentToHex(Math.round(l)),i={decreasing:{marker:{color:t}},increasing:{marker:{color:t}},totals:{marker:{color:d}}};Plotly.restyle(tester,i,[0]);var r={decreasing:{marker:{color:t}},increasing:{marker:{color:t}},totals:{marker:{color:d}}};Plotly.restyle(tester,r,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),
$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[1].x[a]),e.push(dataplot[0].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[1].x,datatable[0].cells.values[2]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype});var x_axis_end=tester.layout.xaxis.range[1],x_axis_start=tester.layout.xaxis.range[0];$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color"),a=(t=$(".inner-div").css("background-color"),t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/)),e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(plot_col);var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(plot_col),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i)),n={decreasing:{marker:{color:plot_col}},increasing:{marker:{color:plot_col}},totals:{marker:{color:r}}};Plotly.restyle(tester,n,[0]);var s={decreasing:{marker:{color:plot_col}},increasing:{marker:{color:plot_col}},totals:{marker:{color:r}}};Plotly.restyle(tester,s,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-color",plot_col),$(`#${id6}`).attr("data-config_color",plot_col),$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var c=document.getElementById(id_header),_=document.getElementById(id6),g=$(".global_header_bgcolor").val();change_header_bgcolor(_,c,g);var p=$(".global_header_color").val();change_header_color(_,c,p);var h=$(".global_header_fontsize").val();change_header_fontsize(_,c,h);var b=$(".global_header_fontweight").val();change_header_fontweight(_,c,b),$(`#${id_header_bgcolor}`).val(g),$(`#${id_header_color}`).val(p),$(`#${id_header_fontsize}`).val(h),$(`#${id_header_fontweight}`).val(b).trigger("change");var y=$(".global_header_fontstyle").val();change_header_fontstyle(_,c,y),$(`#${id_header_fontstyle}`).val(y).trigger("change");var u=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(u).trigger("change"),change_header_alignment(_,c,u),$(`#${id6}`).attr("data-header_alignment",u);var m=$(".global_shadow").prop("checked"),f=$(".global_border").prop("checked"),v=$(".global_shadow_color").val(),x=$(".global_shadow_x").val(),w=$(".global_shadow_y").val(),k=$(".global_shadow_blur").val(),I=$(".global_shadow_thickness").val();change_shadow_global(_,m,v,x,w,k,I);var B=$(".global_border_color").val(),E=$(".global_border_thickness").val(),D=$(".global_border_style").val();change_border_global(_,f,B,E,D),$(`#${id_shadow}`).prop("checked",m),$(`#${id_border}`).prop("checked",f),$(`#${id_shadow_color}`).val(v),$(`#${id_xshadow}`).val(x),$(`#${id_yshadow}`).val(w),$(`#${id_blurshadow}`).val(k),$(`#${id_shadow_thickness}`).val(I),$(`#${id_border_color}`).val(B),$(`#${id_border_thickness}`).val(E),$(`#${id_border_style}`).val(D).trigger("change"),$(`#${id_border}`).val(f),$(`#${id_shadow}`).val(m),$(`#${id6}`).attr("data-shadecolor",v),$(`#${id6}`).attr("data-borderStyle",D),$(`#${id6}`).attr("data-borderThickness",E),$(`#${id6}`).attr("data-borderColor",B),$(`#${id6}`).attr("data-borderon",f),$(`#${id6}`).attr("data-shadowon",m),$(`#${id6}`).attr("data-shadowThick",I),$(`#${id6}`).attr("data-shadowblurry",k),$(`#${id6}`).attr("data-shadowY",w),$(`#${id6}`).attr("data-shadowX",x)}else{plotbg=$(`#${id22}`).val();var S=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(S);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var C=[],T=dataplot[0].x.length;a=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],col="#"+r1+g1+b1;var N=col;N=col;a=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),C.push(N);var O=[],P=[];const A=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));l=.9*A(N)[0],d=.9*A(N)[1],i=.9*A(N)[2];var J=rgb2hex(l,d,i);for(let t=0;t<T;t++)O.push(N);for(let t=0;t<T;t++)P.push(J);n={marker:{color:O}};var H={marker:{color:P}};Plotly.restyle(tester,n,[0]),Plotly.restyle(tester,H,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color"),a=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(plot_col);var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(plot_col),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i)),n={decreasing:{marker:{color:plot_col}},increasing:{marker:{color:plot_col}},totals:{marker:{color:r}}};Plotly.restyle(tester,n,[0]);var s={decreasing:{marker:{color:plot_col}},increasing:{marker:{color:plot_col}},totals:{marker:{color:r}}};if(Plotly.restyle(tester,s,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-color",plot_col),$(`#${id6}`).attr("data-config_color",plot_col),$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var c=[],_=dataplot[0].x.length;a=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],col="#"+r1+g1+b1,a=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var g=col;g=col;c.push(g);var p=[],h=[];const o=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));l=.9*o(g)[0],d=.9*o(g)[1],i=.9*o(g)[2];var b=rgb2hex(l,d,i);for(let t=0;t<_;t++)p.push(g);for(let t=0;t<_;t++)h.push(b);n={marker:{color:p}};var y={marker:{color:h}};Plotly.restyle(tester,n,[0]),Plotly.restyle(tester,y,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var u=document.getElementById(id_header),m=document.getElementById(id6),f=$(".global_header_bgcolor").val();change_header_bgcolor(m,u,f);var v=$(".global_header_color").val();change_header_color(m,u,v);var x=$(".global_header_fontsize").val();change_header_fontsize(m,u,x);var w=$(".global_header_fontweight").val();change_header_fontweight(m,u,w),$(`#${id_header_bgcolor}`).val(f),$(`#${id_header_color}`).val(v),$(`#${id_header_fontsize}`).val(x),$(`#${id_header_fontweight}`).val(w).trigger("change");var k=$(".global_header_fontstyle").val();change_header_fontstyle(m,u,k),$(`#${id_header_fontstyle}`).val(k).trigger("change");var I=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(I).trigger("change"),change_header_alignment(m,u,I),$(`#${id6}`).attr("data-header_alignment",I),$(`#${id6}`).attr("data-header_color",v),$(`#${id6}`).attr("data-header_bgcolor",f),$(`#${id6}`).attr("data-header_fontsize",x),$(`#${id6}`).attr("data-header_fontweight",w);var B=$(".global_shadow").prop("checked"),E=$(".global_border").prop("checked"),D=$(".global_shadow_color").val(),S=$(".global_shadow_x").val(),C=$(".global_shadow_y").val(),T=$(".global_shadow_blur").val(),N=$(".global_shadow_thickness").val();change_shadow_global(m,B,D,S,C,T,N);var O=$(".global_border_color").val(),P=$(".global_border_thickness").val(),A=$(".global_border_style").val();change_border_global(m,E,O,P,A),$(`#${id_shadow}`).prop("checked",B),$(`#${id_border}`).prop("checked",E),$(`#${id_shadow_color}`).val(D),$(`#${id_xshadow}`).val(S),$(`#${id_yshadow}`).val(C),$(`#${id_blurshadow}`).val(T),$(`#${id_shadow_thickness}`).val(N),$(`#${id_border_color}`).val(O),$(`#${id_border_thickness}`).val(P),$(`#${id_border_style}`).val(A).trigger("change"),$(`#${id_border}`).val(E),$(`#${id_shadow}`).val(B),$(`#${id6}`).attr("data-shadecolor",D),$(`#${id6}`).attr("data-borderStyle",A),$(`#${id6}`).attr("data-borderThickness",P),$(`#${id6}`).attr("data-borderColor",O),$(`#${id6}`).attr("data-borderon",E),$(`#${id6}`).attr("data-shadowon",B),$(`#${id6}`).attr("data-shadowThick",N),$(`#${id6}`).attr("data-shadowblurry",T),$(`#${id6}`).attr("data-shadowY",C),$(`#${id6}`).attr("data-shadowX",S)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},$(`#${id6}`).attr("data-bgcolor",$(`#${id22}`).val()),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[1],l=tester.layout.yaxis.showgrid;if(0==t)var d={xaxis:{range:[e,o],showgrid:l,automargin:!0}};else d={xaxis:{range:[e,a],showgrid:l,automargin:!0}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",i)},document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value;if("show_labels"==t){var a=tester.data[0].x,e=tester.data[1].x;a=a.map(function(t){return Number(t)}),e=e.map(function(t){return Number(t)});var o=tester.data;o[0].mode="markers+text",o[0].text=a.map(String),o[0].textposition="outside",o[0].textangle=90,o[1].text=e.map(String),o[1].textposition="outside",o[1].textangle=90,document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){o=tester.data;delete o[0].text,delete o[0].mode,delete o[0].textposition,delete o[1].text,delete o[1].textposition,document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}Plotly.redraw(tester,o),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var l=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",l)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[0],l=tester.layout.xaxis.showgrid;if(0==t)var d={xaxis:{range:[o,a],showgrid:l,automargin:!0}};else d={xaxis:{range:[e,a],showgrid:l,automargin:!0}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",i)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value;if(y_axis_title=tester.layout.yaxis.title.text,"show_gridlines"==t){var a={yaxis:{showgrid:!0,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!0,automargin:!0}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){a={yaxis:{showgrid:!1,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}}},xaxis:{showgrid:!1,automargin:!0}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,a),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var e=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",e)},document.getElementById(id5).onclick=function(){let t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var a=tester.layout.yaxis.showgrid,e={yaxis:{range:[y_axis_start,y_axis_end],showgrid:a,automargin:!0,title:{standoff:20,tickangle:45,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",o)};var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y),myPlot.on("plotly_afterplot",function(){d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].y,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={y:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].y);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"y")})}if("Horizontal_Bar_Grouped"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=void 0,modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.y_axisdata.length,colordata=[],y_axisdata2=JSON.parse(JSON.stringify(data.y_axisdata)),backRGB2=color,dataplot=[],color_value=chart_color;for(var x in data.x_axisdata){colordata=[];for(let t=0;t<colorlength;t++)colordata.push(color_value);var trace1={x:data.x_axisdata[x],y:data.y_axisdata,type:"bar",mode:"markers",text:fieldToVerbose(data.x_axisdata[x],data.mappingDict),marker:{color:colordata},orientation:"h",name:fieldToVerbose(data.x_axis[x],data.mappingDict)};dataplot.push(trace1);var colorList1=[];colorList1.push(color_value);var backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);color_value=newcolor}var tester=document.getElementById(id),myPlot=document.getElementById(id),layout={height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,legend:{orientation:"h"},barmode:"group",hovermode:"closest",margin:{l:0,r:0,b:20,t:10,pad:4},yaxis:{title:{standoff:20,text:fieldToVerbose(y_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,font:{family:"Arial"},tickangle:45,automargin:!0},xaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;for(let t=0;t<dataplot.length;t++)dataplot[t].x=data.x_axisdata[t],dataplot[t].y=data.y_axisdata,delete dataplot[t].selectedpoints;var layout=data.plotDict.layout,color_old=[],colorlength=data.y_axisdata.length;if("object"==typeof dataplot[0].marker.color)for(let t=0;t<dataplot.length;t++)color_old.push(dataplot[t].marker.color[0]);else for(let t=0;t<dataplot.length;t++)color_old.push(dataplot[t].marker.color);if(-1!=color_old.indexOf(void 0)){color_old=[],color_old.push(color);for(let t=1;t<dataplot.length;t++){backRGB=color_old[t-1];const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*a(backRGB)[0],g=.6*a(backRGB)[1],b=.6*a(backRGB)[2],newcolor=rgb2hex(r,g,b);color_old.push(newcolor)}}if(dataplot[0].marker.color.length!=colorlength)for(let t=0;t<dataplot.length;t++){var colordata=[];for(let a=0;a<colorlength;a++)colordata.push(color_old[t]);dataplot[t].marker={color:colordata}}}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);for(var i=0;i<data.x_axisdata.length;i++){var update={text:[data.x_axisdata[i]]};Plotly.restyle(tester,update,[i])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));for(var tabledata=[],tableheaders=[],i=0;i<x_axis.length;i++)tableheaders.push(`<b>${fieldToVerbose(data.x_axis[i],data.mappingDict)}</b>`);tableheaders.push(`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`);for(var i=0;i<x_axisdata;i++)tabledata.push(data.x_axisdata[i]);tabledata.push(data.y_axisdata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Horizontal"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){for(var t=[],a=[],e=0;e<x_axis.length;e++)a.push(fieldToVerbose(data.x_axis[e],data.mappingDict));a.push(`${fieldToVerbose(data.y_axis,data.mappingDict)}`),t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var o=[];for(let t=0;t<dataplot.length;t++)o.push(dataplot[t].x[a]);o.push(dataplot[0].y[a]),t.push(o)}var l=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),d=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),r=URL.createObjectURL(d);i.setAttribute("href",r),i.setAttribute("download",`${data.chartHeader}`+"_data.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},document.getElementById(id_tableshow).onclick=function(){for(var t=0;t<dataplot.length;t++)datatable[0].cells.values[t]=dataplot[t].x;if(datatable[0].cells.values[dataplot.length]=dataplot[0].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var a=document.getElementById(id_table);Plotly.newPlot(a,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype});var x_axis_end=tester.layout.xaxis.range[1],x_axis_start=tester.layout.xaxis.range[0];$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Horizontal")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length
;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1;for(var k=col,I=(k=col,k),B=[],E=0;E<data.x_axisdata.length;E++){I=I,backRGB=I,B=[];for(E=0;E<x;E++)B.push(I);var D={marker:{color:B}};const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var S=.6*t(I)[0],C=.6*t(I)[1],T=.6*t(I)[2],N=rgb2hex(S,C,T);I=N,Plotly.restyle(tester,D,[E])}rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(var d=l,i=(e=dataplot[0].x.length,[]),r=0;r<data.x_axisdata.length;r++){d=d;i=[];for(r=0;r<e;r++)i.push(d);var n={marker:{color:i}};a=[];a.push(d);const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var s=.6*t(d)[0],c=.6*t(d)[1],_=.6*t(d)[2],g=rgb2hex(s,c,_);d=g,Plotly.restyle(tester,n,[r])}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var p=document.getElementById(id_header),h=document.getElementById(id6),b=$(".global_header_bgcolor").val();change_header_bgcolor(h,p,b);var y=$(".global_header_color").val();change_header_color(h,p,y);var u=$(".global_header_fontsize").val();change_header_fontsize(h,p,u);var m=$(".global_header_fontweight").val();change_header_fontweight(h,p,m),$(`#${id_header_bgcolor}`).val(b),$(`#${id_header_color}`).val(y),$(`#${id_header_fontsize}`).val(u),$(`#${id_header_fontweight}`).val(m).trigger("change");var f=$(".global_header_fontstyle").val();change_header_fontstyle(h,p,f),$(`#${id_header_fontstyle}`).val(f).trigger("change");var v=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(v).trigger("change"),change_header_alignment(h,p,v),$(`#${id6}`).attr("data-header_alignment",v),$(`#${id6}`).attr("data-header_color",y),$(`#${id6}`).attr("data-header_bgcolor",b),$(`#${id6}`).attr("data-header_fontsize",u),$(`#${id6}`).attr("data-header_fontweight",m);var x=$(".global_shadow").prop("checked"),w=$(".global_border").prop("checked"),k=$(".global_shadow_color").val(),I=$(".global_shadow_x").val(),B=$(".global_shadow_y").val(),E=$(".global_shadow_blur").val(),D=$(".global_shadow_thickness").val();change_shadow_global(h,x,k,I,B,E,D);var S=$(".global_border_color").val(),C=$(".global_border_thickness").val(),T=$(".global_border_style").val();change_border_global(h,w,S,C,T),$(`#${id_shadow}`).prop("checked",x),$(`#${id_border}`).prop("checked",w),$(`#${id_shadow_color}`).val(k),$(`#${id_xshadow}`).val(I),$(`#${id_yshadow}`).val(B),$(`#${id_blurshadow}`).val(E),$(`#${id_shadow_thickness}`).val(D),$(`#${id_border_color}`).val(S),$(`#${id_border_thickness}`).val(C),$(`#${id_border_style}`).val(T).trigger("change"),$(`#${id_border}`).val(w),$(`#${id_shadow}`).val(x),$(`#${id6}`).attr("data-shadecolor",k),$(`#${id6}`).attr("data-borderStyle",T),$(`#${id6}`).attr("data-borderThickness",C),$(`#${id6}`).attr("data-borderColor",S),$(`#${id6}`).attr("data-borderon",w),$(`#${id6}`).attr("data-shadowon",x),$(`#${id6}`).attr("data-shadowThick",D),$(`#${id6}`).attr("data-shadowblurry",E),$(`#${id6}`).attr("data-shadowY",B),$(`#${id6}`).attr("data-shadowX",I)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){for(var t=this.value,a=t,e=dataplot[0].x.length,o=[],l=0;l<data.x_axisdata.length;l++){o=[];for(let t=0;t<e;t++)o.push(a);var d={marker:{color:a}},i=[];i.push(a);t=a;const _=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*_(t)[0],n=.6*_(t)[1],s=.6*_(t)[2],c=rgb2hex(r,n,s);a=c,Plotly.restyle(tester,d,[l])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var _=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",_)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data;if("show_labels"==t){for(var e=0;e<tester.data.length;e++){var o=tester.data[e].x;o=o.map(function(t){return Number(t.toFixed(2))}),0==e&&(a[e].mode="markers+text"),a[e].text=o.map(String),a[e].textposition="inside",a[e].textangle=90}document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){a=tester.data;delete a[0].text,delete a[0].textposition,delete a[0].mode;for(e=1;e<tester.data.length;e++)delete a[e].text,delete a[e].textposition;document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}Plotly.redraw(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var l=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",l)},document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[1],l=tester.layout.yaxis.showgrid;if(0==t)var d={xaxis:{range:[e,o],showgrid:l,automargin:!0}};else d={xaxis:{range:[e,a],showgrid:l,automargin:!0}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",i)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value,o=tester.layout.xaxis.range[0],l=tester.layout.xaxis.showgrid;if(0==t)var d={xaxis:{range:[o,a],showgrid:l,automargin:!0}};else d={xaxis:{range:[e,a],showgrid:l,automargin:!0}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",i)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)}});var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){let t=document.getElementById(id9).value;var a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.yaxis.categoryorder,o=a.yaxis.categoryarray;y_axis_title=tester.layout.yaxis.title.text;let l="";"show_gridlines"===String(t)&&(l={yaxis:{showgrid:!0,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}},categoryorder:e,categoryarray:o},xaxis:{showgrid:!0,automargin:!0}},document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"),"hide_gridlines"===String(t)&&(l={yaxis:{showgrid:!1,automargin:!0,tickangle:45,title:{standoff:20,text:y_axis_title,font:{family:"Arial"}},categoryorder:e,categoryarray:o},xaxis:{showgrid:!1,automargin:!0}},document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"),Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));let d=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",d)},document.getElementById(id5).onclick=function(){let t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"===String(e)){for(slicer in $(`#${id20}`).empty(),Slicer_ColumnId="",slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(Slicer_ColumnId=slicer);$(`.${Slicer_ColumnId}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,Slicer_ColumnId)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id12).onchange=function(){var t=document.getElementById(id12).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.yaxis.categoryorder,o=a.yaxis.categoryarray;y_axis_start=tester.layout.yaxis.range[0],y_axis_end=tester.layout.yaxis.range[1];var l=tester.layout.yaxis.showgrid,d={yaxis:{range:[y_axis_start,y_axis_end],showgrid:l,automargin:!0,title:{standoff:20,tickangle:45,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",i)};var config_y_axis_title=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",config_y_axis_title),null!=document.getElementById(id14)&&(document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)}),document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y),myPlot.on("plotly_afterplot",function(){d3.selectAll(".yaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].y,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={y:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={y:[JSON.parse(JSON.stringify(y_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].y);a.filter((t,a,e)=>e.indexOf(t)===a);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"y")}),myPlot.on("plotly_deselect",function(){var t={id:chartDivId};reset_function(t)})}if("Vertical_Bar_Grouped"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=void 0,modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[],x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),backRGB=color,dataplot=[],color_value=chart_color;for(var y in data.y_axisdata){colordata=[];for(let t=0;t<colorlength;t++)colordata.push(color_value);var trace1={x:data.x_axisdata,y:data.y_axisdata[y],type:"bar",text:fieldToVerbose(data.y_axisdata[y],data.mappingDict),marker:{color:colordata},name:fieldToVerbose(data.y_axis[y],data.mappingDict)};dataplot.push(trace1);var colorList1=[];colorList1.push(color_value);var backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);color_value=newcolor}var tester=document.getElementById(id),myPlot=document.getElementById(id),layout={height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,barmode:"group",hovermode:"closest",margin:{l:40,r:0,b:20,t:10,pad:4},yaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;for(let t=0;t<dataplot.length;t++)dataplot[t].x=data.x_axisdata,dataplot[t].y=data.y_axisdata[t],delete dataplot[t].selectedpoints;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length,color_old=[];if("object"==typeof dataplot[0].marker.color)for(let t=0;t<dataplot.length;t++)color_old.push(dataplot[t].marker.color[0]);else for(let t=0;t<dataplot.length;t++)color_old.push(dataplot[t].marker.color);if(-1!=color_old.indexOf(void 0)){color_old=[],color_old.push(color);for(let t=1;t<dataplot.length;t++){backRGB=color_old[t-1];const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*a(backRGB)[0],g=.6*a(backRGB)[1],b=.6*a(backRGB)[2],newcolor=rgb2hex(r,g,b);color_old.push(newcolor)}}if(dataplot[0].marker.color.length!=colorlength)for(let t=0;t<dataplot.length;t++){var colordata=[];for(let a=0;a<colorlength;a++)colordata.push(color_old[t]);dataplot[t].marker={color:colordata}}}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);for(var i=0;i<data.y_axisdata.length;i++){var update={text:[data.y_axisdata[i]]};Plotly.restyle(tester,update,[i])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));for(var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`],i=0;i<y_axis.length;i++)tableheaders.push(`<b>${fieldToVerbose(data.y_axis[i],data.mappingDict)}</b>`);tabledata.push(data.x_axisdata);for(var i=0;i<y_axisdata;i++)tabledata.push(data.y_axisdata[i]);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){for(var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`],e=0;e<y_axis.length;e++)a.push(fieldToVerbose(data.y_axis[e],data.mappingDict));t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var o=[];o.push(dataplot[0].x[a]);for(let t=0;t<dataplot.length;t++)o.push(dataplot[t].y[a]);t.push(o)}var l=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),d=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),r=URL.createObjectURL(d);i.setAttribute("href",r),i.setAttribute("download",`${data.chartHeader}`+"_data.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},document.getElementById(id_tableshow).onclick=function(){datatable[0].cells.values[0]=dataplot[0].x;for(var t=1;t<=dataplot.length;t++)datatable[0].cells.values[t]=dataplot[t-1].y;if("Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var a=document.getElementById(id_table);Plotly.newPlot(a,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;for(var k=col,I=(k=col,k),B=[],E=0;E<data.y_axisdata.length;E++){I=I,backRGB=I,B=[];for(E=0;E<x;E++)B.push(I);var D={marker:{color:B}};const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var S=.6*t(I)[0],C=.6*t(I)[1],T=.6*t(I)[2],N=rgb2hex(S,C,T);I=N,Plotly.restyle(tester,D,[E])}rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(var d=l,i=(e=dataplot[0].x.length,[]),r=0;r<data.y_axisdata.length;r++){d=d;i=[];for(r=0;r<e;r++)i.push(d);var n={marker:{color:i}};a=[];a.push(d);const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var s=.6*t(d)[0],c=.6*t(d)[1],_=.6*t(d)[2],g=rgb2hex(s,c,_);d=g,Plotly.restyle(tester,n,[r])}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var p=document.getElementById(id_header),h=document.getElementById(id6),b=$(".global_header_bgcolor").val();change_header_bgcolor(h,p,b);var y=$(".global_header_color").val();change_header_color(h,p,y);var u=$(".global_header_fontsize").val();change_header_fontsize(h,p,u);var m=$(".global_header_fontweight").val();change_header_fontweight(h,p,m),$(`#${id_header_bgcolor}`).val(b),$(`#${id_header_color}`).val(y),$(`#${id_header_fontsize}`).val(u),$(`#${id_header_fontweight}`).val(m).trigger("change");var f=$(".global_header_fontstyle").val();change_header_fontstyle(h,p,f),$(`#${id_header_fontstyle}`).val(f).trigger("change");var v=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(v).trigger("change"),change_header_alignment(h,p,v),$(`#${id6}`).attr("data-header_alignment",v),$(`#${id6}`).attr("data-header_color",y),
$(`#${id6}`).attr("data-header_bgcolor",b),$(`#${id6}`).attr("data-header_fontsize",u),$(`#${id6}`).attr("data-header_fontweight",m);var x=$(".global_shadow").prop("checked"),w=$(".global_border").prop("checked"),k=$(".global_shadow_color").val(),I=$(".global_shadow_x").val(),B=$(".global_shadow_y").val(),E=$(".global_shadow_blur").val(),D=$(".global_shadow_thickness").val();change_shadow_global(h,x,k,I,B,E,D);var S=$(".global_border_color").val(),C=$(".global_border_thickness").val(),T=$(".global_border_style").val();change_border_global(h,w,S,C,T),$(`#${id_shadow}`).prop("checked",x),$(`#${id_border}`).prop("checked",w),$(`#${id_shadow_color}`).val(k),$(`#${id_xshadow}`).val(I),$(`#${id_yshadow}`).val(B),$(`#${id_blurshadow}`).val(E),$(`#${id_shadow_thickness}`).val(D),$(`#${id_border_color}`).val(S),$(`#${id_border_thickness}`).val(C),$(`#${id_border_style}`).val(T).trigger("change"),$(`#${id_border}`).val(w),$(`#${id_shadow}`).val(x),$(`#${id6}`).attr("data-shadecolor",k),$(`#${id6}`).attr("data-borderStyle",T),$(`#${id6}`).attr("data-borderThickness",C),$(`#${id6}`).attr("data-borderColor",S),$(`#${id6}`).attr("data-borderon",w),$(`#${id6}`).attr("data-shadowon",x),$(`#${id6}`).attr("data-shadowThick",D),$(`#${id6}`).attr("data-shadowblurry",E),$(`#${id6}`).attr("data-shadowY",B),$(`#${id6}`).attr("data-shadowX",I)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){for(var t=this.value,a=t,e=dataplot[0].x.length,o=[],l=0;l<data.y_axisdata.length;l++){o=[];for(let t=0;t<e;t++)o.push(a);var d={marker:{color:a}},i=[];i.push(a);t=a;const _=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*_(t)[0],n=.6*_(t)[1],s=.6*_(t)[2],c=rgb2hex(r,n,s);a=c,Plotly.restyle(tester,d,[l])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var _=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",_)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data;if("show_labels"==t){for(var e=0;e<tester.data.length;e++){var o=tester.data[e].y;o=o.map(function(t){return Number(t.toFixed(2))}),0==e&&(a[e].mode="markers+text"),a[e].text=o.map(String),a[e].textposition="outside"}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){delete a[0].text,delete a[0].textposition,delete a[0].mode;for(e=1;e<tester.data.length;e++)delete a[e].text,delete a[e].textposition;$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}Plotly.redraw(tester,a);var l=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",l)},document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)}});var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{showgrid:!0,automargin:!0},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{showgrid:!1,automargin:!0},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={x:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].label);a.filter((t,a,e)=>e.indexOf(t)===a);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"x")}),myPlot.on("plotly_deselect",function(){var t={id:chartDivId};reset_function(t)})}if("Bar_Grouped_and_Line"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=void 0;var line_column=data.line_column;modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis,modalDataConfig[line_column]=line_column;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-line_column",line_column),$(`#${id6}`).attr("data-operation_line",operation_line),orderModal.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[],colordataline="black",x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),backRGB=color,dataplot=[],color_value=chart_color;for(var y in data.y_axisdata){colordata=[];for(let t=0;t<colorlength;t++)colordata.push(color_value);var trace1={x:data.x_axisdata,y:data.y_axisdata[y],type:"bar",text:fieldToVerbose(data.y_axisdata[y],data.mappingDict),marker:{color:colordata},name:fieldToVerbose(data.y_axis[y],data.mappingDict)};dataplot.push(trace1);var colorList1=[];colorList1.push(color_value);var backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);color_value=newcolor}var trace2={x:data.x_axisdata,y:data.line_columndata,type:"scatter",marker:{color:colordataline},text:data.line_columndata,textposition:"top",name:fieldToVerbose(data.line_column,data.mappingDict)};dataplot.push(trace2);var tester=document.getElementById(id),myPlot=document.getElementById(id),layout={barmode:"group",height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,hovermode:"closest",margin:{l:40,r:0,b:20,t:10,pad:4},yaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;total_y=data.total_y,outermodalCard.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-line_column",line_column),$(`#${id6}`).attr("data-operation_line",operation_line),filterModal.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;for(let t=0;t<dataplot.length-1;t++)dataplot[t].x=data.x_axisdata,dataplot[t].y=data.y_axisdata[t],delete dataplot[t].selectedpoints;dataplot[dataplot.length-1].x=data.x_axisdata,dataplot[dataplot.length-1].y=data.line_columndata,delete dataplot[dataplot.length-1].selectedpoints;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length,color_old=[];if("object"==typeof dataplot[0].marker.color)for(let t=0;t<dataplot.length-1;t++)color_old.push(dataplot[t].marker.color[0]);else for(let t=0;t<dataplot.length-1;t++)color_old.push(dataplot[t].marker.color);if(-1!=color_old.indexOf(void 0)){color_old=[],color_old.push(color);for(let t=1;t<dataplot.length-1;t++){backRGB=color_old[t-1];const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*a(backRGB)[0],g=.6*a(backRGB)[1],b=.6*a(backRGB)[2],newcolor=rgb2hex(r,g,b);color_old.push(newcolor)}}if(dataplot[0].marker.color.length!=colorlength)for(let t=0;t<dataplot.length-1;t++){var colordata=[];for(let a=0;a<colorlength;a++)colordata.push(color_old[t]);dataplot[t].marker={color:colordata}}}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);for(var i=0;i<data.y_axisdata.length;i++){var update={text:[data.y_axisdata[i]]};Plotly.restyle(tester,update,[i])}var update3={name:[fieldToVerbose(data.line_column,data.mappingDict)],text:[data.line_columndata]};Plotly.restyle(tester,update3,[dataplot.length-1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));for(var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`],i=0;i<y_axis.length;i++)tableheaders.push(`<b>${fieldToVerbose(data.y_axis[i],data.mappingDict)}</b>`);tableheaders.push(`<b>${fieldToVerbose(data.line_column,data.mappingDict)}</b>`),tabledata.push(data.x_axisdata);for(var i=0;i<y_axisdata;i++)tabledata.push(data.y_axisdata[i]);tabledata.push(data.line_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){for(var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`],e=0;e<y_axis.length;e++)a.push(fieldToVerbose(data.y_axis[e],data.mappingDict));a.push(`${fieldToVerbose(data.line_column,data.mappingDict)}`),t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var o=[];o.push(dataplot[0].x[a]);for(let t=0;t<dataplot.length;t++)o.push(dataplot[t].y[a]);t.push(o)}var l=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),d=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),r=URL.createObjectURL(d);i.setAttribute("href",r),i.setAttribute("download",`${data.chartHeader}`+"_data.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},document.getElementById(id_tableshow).onclick=function(){datatable[0].cells.values[0]=dataplot[0].x;for(var t=1;t<=dataplot.length;t++)datatable[0].cells.values[t]=dataplot[t-1].y;if("Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var a=document.getElementById(id_table);Plotly.newPlot(a,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(`#${id23}`).click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(var d=l,i=(e=dataplot[0].x.length,[]),r=0;r<data.y_axisdata.length;r++){d=d;i=[];for(var n=0;n<e;n++)i.push(d);var s={marker:{color:i}};a=[];a.push(d);const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var c=.6*t(d)[0],_=.6*t(d)[1],g=.6*t(d)[2],p=rgb2hex(c,_,g);d=p,Plotly.restyle(tester,s,[r])}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var h=document.getElementById(id_header),b=document.getElementById(id6),y=$(".global_header_bgcolor").val();change_header_bgcolor(b,h,y);var u=$(".global_header_color").val();change_header_color(b,h,u);var m=$(".global_header_fontsize").val();change_header_fontsize(b,h,m);var f=$(".global_header_fontweight").val();change_header_fontweight(b,h,f),$(`#${id_header_bgcolor}`).val(y),$(`#${id_header_color}`).val(u),$(`#${id_header_fontsize}`).val(m),$(`#${id_header_fontweight}`).val(f).trigger("change");var v=$(".global_header_fontstyle").val();change_header_fontstyle(b,h,v),$(`#${id_header_fontstyle}`).val(v).trigger("change");var x=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(x).trigger("change"),change_header_alignment(b,h,x),$(`#${id6}`).attr("data-header_alignment",x),$(`#${id6}`).attr("data-header_color",u),$(`#${id6}`).attr("data-header_bgcolor",y),$(`#${id6}`).attr("data-header_fontsize",m),$(`#${id6}`).attr("data-header_fontweight",f);var w=$(".global_shadow").prop("checked"),k=$(".global_border").prop("checked"),I=$(".global_shadow_color").val(),B=$(".global_shadow_x").val(),E=$(".global_shadow_y").val(),D=$(".global_shadow_blur").val(),S=$(".global_shadow_thickness").val();change_shadow_global(b,w,I,B,E,D,S);var C=$(".global_border_color").val(),T=$(".global_border_thickness").val(),N=$(".global_border_style").val();change_border_global(b,k,C,T,N),$(`#${id_shadow}`).prop("checked",w),$(`#${id_border}`).prop("checked",k),$(`#${id_shadow_color}`).val(I),$(`#${id_xshadow}`).val(B),$(`#${id_yshadow}`).val(E),$(`#${id_blurshadow}`).val(D),$(`#${id_shadow_thickness}`).val(S),$(`#${id_border_color}`).val(C),$(`#${id_border_thickness}`).val(T),$(`#${id_border_style}`).val(N).trigger("change"),$(`#${id_border}`).val(k),$(`#${id_shadow}`).val(w),$(`#${id6}`).attr("data-shadecolor",I),$(`#${id6}`).attr("data-borderStyle",N),$(`#${id6}`).attr("data-borderThickness",T),$(`#${id6}`).attr("data-borderColor",C),$(`#${id6}`).attr("data-borderon",k),$(`#${id6}`).attr("data-shadowon",w),$(`#${id6}`).attr("data-shadowThick",S),$(`#${id6}`).attr("data-shadowblurry",D),$(`#${id6}`).attr("data-shadowY",E),$(`#${id6}`).attr("data-shadowX",B)}}),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(var d=l,i=(e=dataplot[0].x.length,[]),r=0;r<data.y_axisdata.length;r++){d=d;i=[];for(var n=0;n<e;n++)i.push(d);var s={marker:{color:i}};a=[];a.push(d);const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var c=.6*t(d)[0],_=.6*t(d)[1],g=.6*t(d)[2],p=rgb2hex(c,_,g);d=p,Plotly.restyle(tester,s,[r])}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var h=document.getElementById(id_header),b=document.getElementById(id6),y=$(".global_header_bgcolor").val();change_header_bgcolor(b,h,y);var u=$(".global_header_color").val();change_header_color(b,h,u);var m=$(".global_header_fontsize").val();change_header_fontsize(b,h,m);var f=$(".global_header_fontweight").val();change_header_fontweight(b,h,f),$(`#${id_header_bgcolor}`).val(y),$(`#${id_header_color}`).val(u),$(`#${id_header_fontsize}`).val(m),$(`#${id_header_fontweight}`).val(f).trigger("change");var v=$(".global_header_fontstyle").val();change_header_fontstyle(b,h,v),$(`#${id_header_fontstyle}`).val(v).trigger("change");var x=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(x).trigger("change"),change_header_alignment(b,h,x),$(`#${id6}`).attr("data-header_alignment",x),$(`#${id6}`).attr("data-header_color",u),$(`#${id6}`).attr("data-header_bgcolor",y),$(`#${id6}`).attr("data-header_fontsize",m),$(`#${id6}`).attr("data-header_fontweight",f);var w=$(".global_shadow").prop("checked"),k=$(".global_border").prop("checked"),I=$(".global_shadow_color").val(),B=$(".global_shadow_x").val(),E=$(".global_shadow_y").val(),D=$(".global_shadow_blur").val(),S=$(".global_shadow_thickness").val();change_shadow_global(b,w,I,B,E,D,S);var C=$(".global_border_color").val(),T=$(".global_border_thickness").val(),N=$(".global_border_style").val();change_border_global(b,k,C,T,N),$(`#${id_shadow}`).prop("checked",w),$(`#${id_border}`).prop("checked",k),$(`#${id_shadow_color}`).val(I),$(`#${id_xshadow}`).val(B),$(`#${id_yshadow}`).val(E),$(`#${id_blurshadow}`).val(D),$(`#${id_shadow_thickness}`).val(S),$(`#${id_border_color}`).val(C),$(`#${id_border_thickness}`).val(T),$(`#${id_border_style}`).val(N).trigger("change"),$(`#${id_border}`).val(k),$(`#${id_shadow}`).val(w),$(`#${id6}`).attr("data-shadecolor",I),$(`#${id6}`).attr("data-borderStyle",N),$(`#${id6}`).attr("data-borderThickness",T),$(`#${id6}`).attr("data-borderColor",C),$(`#${id6}`).attr("data-borderon",k),$(`#${id6}`).attr("data-shadowon",w),$(`#${id6}`).attr("data-shadowThick",S),$(`#${id6}`).attr("data-shadowblurry",D),$(`#${id6}`).attr("data-shadowY",E),$(`#${id6}`).attr("data-shadowX",B)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){for(var t=dataplot[0].x.length,a=this.value,e=a,o=[],l=0;l<data.y_axisdata.length;l++){o=[];for(let a=0;a<t;a++)o.push(e);var d={marker:{color:o}},i=[];i.push(e);a=e;const _=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*_(a)[0],n=.6*_(a)[1],s=.6*_(a)[2],c=rgb2hex(r,n,s);e=c,Plotly.restyle(tester,d,[l])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var _=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",_)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data;if("show_labels"==t){
for(var e=0;e<tester.data.length-1;e++){var o=tester.data[e].y;o=o.map(function(t){return Number(t.toFixed(2))}),0==e&&(a[e].mode="scatter+text"),a[e].text=o.map(String),a[e].textposition="outside"}o=tester.data[tester.data.length-1].y;o=o.map(function(t){return Number(t.toFixed(2))}),a[e].mode="lines+text+markers",a[e].text=o.map(String),a[e].textposition="outside",document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){delete a[0].text,delete a[0].textposition,delete a[0].mode;for(e=1;e<tester.data.length-1;e++)delete a[e].text,delete a[e].textposition;delete a[tester.data.length-1].text,delete a[tester.data.length-1].textposition,delete a[tester.data.length-1].mode,document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}Plotly.redraw(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var l=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",l)},document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),myPlot.on("plotly_click",function(t){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)});var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{showgrid:!0,automargin:!0},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{showgrid:!1,automargin:!0},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i);var r=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",r)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={x:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].label);a.filter((t,a,e)=>e.indexOf(t)===a);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"x")}),myPlot.on("plotly_deselect",function(){var t={id:chartDivId};reset_function(t)})}if("Bar_Stacked_and_Line"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=void 0;var line_column=data.line_column;modalDataConfig.x_axis=data.x_axis,modalDataConfig[line_column]=line_column;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-operation_line",operation_line),$(`#${id6}`).attr("data-line_column",line_column),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[],colordataline="black",x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),backRGB=color,dataplot=[],color_value=chart_color;for(var y in data.y_axisdata){colordata=[];for(let t=0;t<colorlength;t++)colordata.push(color_value);var trace1={x:data.x_axisdata,y:data.y_axisdata[y],type:"bar",text:fieldToVerbose(data.y_axisdata[y],data.mappingDict),marker:{color:colordata},name:fieldToVerbose(data.y_axis[y],data.mappingDict)};dataplot.push(trace1);var colorList1=[];colorList1.push(color_value);var backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);color_value=newcolor}var trace2={x:data.x_axisdata,y:data.line_columndata,type:"scatter",marker:{color:colordataline},text:data.line_columndata,textposition:"top",name:fieldToVerbose(data.line_column,data.mappingDict)};dataplot.push(trace2);var tester=document.getElementById(id),myPlot=document.getElementById(id),layout={barmode:"stack",height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,hovermode:"closest",margin:{l:40,r:0,b:20,t:10,pad:4},yaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-line_column",line_column),$(`#${id6}`).attr("data-operation_line",operation_line),filterModal.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;for(let t=0;t<dataplot.length-1;t++)dataplot[t].x=data.x_axisdata,dataplot[t].y=data.y_axisdata[t],delete dataplot[t].selectedpoints;dataplot[dataplot.length-1].x=data.x_axisdata,dataplot[dataplot.length-1].y=data.line_columndata,delete dataplot[dataplot.length-1].selectedpoints;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length,color_old=[];if("object"==typeof dataplot[0].marker.color)for(let t=0;t<dataplot.length-1;t++)color_old.push(dataplot[t].marker.color[0]);else for(let t=0;t<dataplot.length-1;t++)color_old.push(dataplot[t].marker.color);if(-1!=color_old.indexOf(void 0)){color_old=[],color_old.push(color);for(let t=1;t<dataplot.length-1;t++){backRGB=color_old[t-1];const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*a(backRGB)[0],g=.6*a(backRGB)[1],b=.6*a(backRGB)[2],newcolor=rgb2hex(r,g,b);color_old.push(newcolor)}}if(dataplot[0].marker.color.length!=colorlength)for(let t=0;t<dataplot.length-1;t++){var colordata=[];for(let a=0;a<colorlength;a++)colordata.push(color_old[t]);dataplot[t].marker={color:colordata}}}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);for(var i=0;i<data.y_axisdata.length;i++){var update={text:[data.y_axisdata[i]]};Plotly.restyle(tester,update,[i])}var update3={name:[fieldToVerbose(data.line_column,data.mappingDict)],text:[data.line_columndata]};Plotly.restyle(tester,update3,[2]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));for(var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`],i=0;i<y_axis.length;i++)tableheaders.push(`<b>${fieldToVerbose(data.y_axis[i],data.mappingDict)}</b>`);tableheaders.push(`<b>${fieldToVerbose(data.line_column,data.mappingDict)}</b>`),tabledata.push(data.x_axisdata);for(var i=0;i<y_axisdata;i++)tabledata.push(data.y_axisdata[i]);tabledata.push(data.line_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){for(var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`],e=0;e<y_axis.length;e++)a.push(fieldToVerbose(data.y_axis[e],data.mappingDict));a.push(`${fieldToVerbose(data.line_column,data.mappingDict)}`),t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var o=[];o.push(dataplot[0].x[a]);for(let t=0;t<dataplot.length;t++)o.push(dataplot[t].y[a]);t.push(o)}var l=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),d=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),r=URL.createObjectURL(d);i.setAttribute("href",r),i.setAttribute("download",`${data.chartHeader}`+"_data.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},document.getElementById(id_tableshow).onclick=function(){datatable[0].cells.values[0]=dataplot[0].x;for(var t=1;t<=dataplot.length;t++)datatable[0].cells.values[t]=dataplot[t-1].y;if("Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var a=document.getElementById(id_table);Plotly.newPlot(a,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;for(var w=col,k=(w=col,w),I=[],B=0;B<data.y_axisdata.length;B++){backRGB=k,I=[];for(B=0;B<v;B++)I.push(k);var E={marker:{color:I}};const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var D=.6*t(k)[0],S=.6*t(k)[1],C=.6*t(k)[2],T=rgb2hex(D,S,C);k=T,Plotly.restyle(tester,E,[B])}rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(var d=l,i=(e=dataplot[0].x.length,[]),r=0;r<data.y_axisdata.length;r++){d=d;i=[];for(r=0;r<e;r++)i.push(d);var n={marker:{color:i}};a=[];a.push(d);const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var s=.6*t(d)[0],c=.6*t(d)[1],_=.6*t(d)[2],g=rgb2hex(s,c,_);d=g,Plotly.restyle(tester,n,[r])}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var p=document.getElementById(id_header),h=document.getElementById(id6),b=$(".global_header_bgcolor").val();change_header_bgcolor(h,p,b);var y=$(".global_header_color").val();change_header_color(h,p,y);var u=$(".global_header_fontsize").val();change_header_fontsize(h,p,u);var m=$(".global_header_fontweight").val();change_header_fontweight(h,p,m),$(`#${id_header_bgcolor}`).val(b),$(`#${id_header_color}`).val(y),$(`#${id_header_fontsize}`).val(u),$(`#${id_header_fontweight}`).val(m).trigger("change");var f=$(".global_header_fontstyle").val();change_header_fontstyle(h,p,f),$(`#${id_header_fontstyle}`).val(f).trigger("change");var v=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(v).trigger("change"),change_header_alignment(h,p,v),$(`#${id6}`).attr("data-header_alignment",v),$(`#${id6}`).attr("data-header_color",y),$(`#${id6}`).attr("data-header_bgcolor",b),$(`#${id6}`).attr("data-header_fontsize",u),$(`#${id6}`).attr("data-header_fontweight",m);var x=$(".global_shadow").prop("checked"),w=$(".global_border").prop("checked"),k=$(".global_shadow_color").val(),I=$(".global_shadow_x").val(),B=$(".global_shadow_y").val(),E=$(".global_shadow_blur").val(),D=$(".global_shadow_thickness").val();change_shadow_global(h,x,k,I,B,E,D);var S=$(".global_border_color").val(),C=$(".global_border_thickness").val(),T=$(".global_border_style").val();change_border_global(h,w,S,C,T),$(`#${id_shadow}`).prop("checked",x),$(`#${id_border}`).prop("checked",w),$(`#${id_shadow_color}`).val(k),$(`#${id_xshadow}`).val(I),$(`#${id_yshadow}`).val(B),$(`#${id_blurshadow}`).val(E),$(`#${id_shadow_thickness}`).val(D),$(`#${id_border_color}`).val(S),$(`#${id_border_thickness}`).val(C),$(`#${id_border_style}`).val(T).trigger("change"),$(`#${id_border}`).val(w),$(`#${id_shadow}`).val(x),$(`#${id6}`).attr("data-shadecolor",k),$(`#${id6}`).attr("data-borderStyle",T),$(`#${id6}`).attr("data-borderThickness",C),$(`#${id6}`).attr("data-borderColor",S),$(`#${id6}`).attr("data-borderon",w),$(`#${id6}`).attr("data-shadowon",x),$(`#${id6}`).attr("data-shadowThick",D),$(`#${id6}`).attr("data-shadowblurry",E),$(`#${id6}`).attr("data-shadowY",B),$(`#${id6}`).attr("data-shadowX",I)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){for(var t=dataplot[0].x.length,a=this.value,e=a,o=[],l=0;l<data.y_axisdata.length;l++){o=[];for(let a=0;a<t;a++)o.push(e);var d={marker:{color:o}},i=[];i.push(e);a=e;const _=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*_(a)[0],n=.6*_(a)[1],s=.6*_(a)[2],c=rgb2hex(r,n,s);e=c,Plotly.restyle(tester,d,[l])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var _=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",_)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value;if("show_labels"==t){for(var a=tester.data,e=0;e<tester.data.length-1;e++){var o=tester.data[e].y;o=o.map(function(t){return Number(t.toFixed(2))}),0==e&&(a[e].mode="scatter+text"),a[e].text=o.map(String),a[e].textposition="outside"}a[tester.data.length-1].text=[tester.data[tester.data.length-1].y],a[tester.data.length-1].textposition="bottom center",a[tester.data.length-1].mode="lines+text+markers",document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){a=tester.data;delete a[0].text,delete a[0].textposition,delete a[0].mode;for(e=1;e<tester.data.length-1;e++)delete a[e].text,delete a[e].textposition;delete a[tester.data.length-1].text,delete a[tester.data.length-1].textposition,delete a[tester.data.length-1].mode,$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}Plotly.redraw(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var l=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",l)},document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),myPlot.on("plotly_click",function(t){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)});var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{showgrid:!0,automargin:!0},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{showgrid:!1,automargin:!0},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id5).onclick=function(){
var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i);var r=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",r)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={x:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].label);a.filter((t,a,e)=>e.indexOf(t)===a);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"x")}),myPlot.on("plotly_deselect",function(){var t={id:chartDivId};reset_function(t)})}if("Bar_Stacked_and_Multiple_Line"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=void 0;var line_column=data.line_column;modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis,modalDataConfig[line_column]=line_column;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`),outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-line_column",line_column),$(`#${id6}`).attr("data-operation_line",operation_line),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[],tab_id=plotDict.tabNameID,x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),backRGB=color,colordataline=[],dataplot=[],color_value=chart_color;for(var y in data.y_axisdata){colordata=[];for(let t=0;t<colorlength;t++)colordata.push(color_value);var trace1={x:data.x_axisdata,y:data.y_axisdata[y],type:"bar",text:fieldToVerbose(data.y_axisdata[y],data.mappingDict),marker:{color:colordata},name:fieldToVerbose(data.y_axis[y],data.mappingDict)};dataplot.push(trace1);var colorList1=[];colorList1.push(color_value);var backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);color_value=newcolor}backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.9*t(backRGB)[0],g=.9*t(backRGB)[1],b=.9*t(backRGB)[2];for(var line in newcolor=rgb2hex(r,g,b),backRGB=newcolor,data.line_columndata){const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b),color_value=newcolor,trace1={x:data.x_axisdata,y:data.line_columndata[line],mode:"scatter",text:data.line_columndata[line],marker:{color:color_value},textposition:"top",name:fieldToVerbose(data.line_column[line],data.mappingDict)};dataplot.push(trace1),colordataline.push(color_value);var backRGB=color_value}var tester=document.getElementById(id),myPlot=document.getElementById(id),layout={barmode:"stack",height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,hovermode:"closest",margin:{l:40,r:0,b:20,t:10,pad:4},yaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-line_column",line_column),$(`#${id6}`).attr("data-operation_line",operation_line),filterModal.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;let t=0;for(t=0;t<data.y_axisdata.length;t++)dataplot[t].x=data.x_axisdata,dataplot[t].y=data.y_axisdata[t],delete dataplot[t].selectedpoints;for(let a=0;a<data.line_columndata.length;a++)dataplot[a+t].x=data.x_axisdata,dataplot[a+t].y=data.line_columndata[a],delete dataplot[a+t].selectedpoints;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length,colordata=data.colordata,color_old=[],color_old_line=[];if("object"==typeof dataplot[0].marker.color){let t=0;for(t=0;t<data.y_axisdata.length;t++)color_old.push(dataplot[t].marker.color[0]);for(let a=0;a<data.line_columndata.length;a++)color_old_line.push(dataplot[a+t].marker.color[0])}else{let t=0;for(t=0;t<dataplot.length-1;t++)color_old.push(dataplot[t].marker.color);for(let a=0;a<data.line_columndata.length;a++)color_old_line.push(dataplot[a+t].marker.color)}if(-1!=color_old.indexOf(void 0)){color_old=[],color_old.push(color);for(let t=0;t<data.y_axisdata.length;t++){backRGB=color_old[t-1];const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*a(backRGB)[0],g=.6*a(backRGB)[1],b=.6*a(backRGB)[2],newcolor=rgb2hex(r,g,b);color_old.push(newcolor)}}if(-1!=color_old_line.indexOf(void 0)){var backRGB=color;for(let t=0;t<data.y_axisdata.length;t++){const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);backRGB=newcolor}const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.9*t(backRGB)[0],g=.9*t(backRGB)[1],b=.9*t(backRGB)[2];newcolor=rgb2hex(r,g,b),backRGB=newcolor,color_old_line=[],color_old_line.push(backRGB);for(let t=1;t<data.line_columndata.length;t++){backRGB=color_old_line[t-1];const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*a(backRGB)[0],g=.6*a(backRGB)[1],b=.6*a(backRGB)[2],newcolor=rgb2hex(r,g,b);color_old_line.push(newcolor)}}if(dataplot[0].marker.color.length!=colorlength)for(let t=0;t<data.y_axisdata.length;t++){var colordata=[];for(let a=0;a<colorlength;a++)colordata.push(color_old[t]);dataplot[t].marker={color:colordata}}$(`#${id_label_placement}`).val(label)}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var j=0;for(j=0;j<data.y_axisdata.length;j++){var update={text:[data.y_axisdata[j]]};Plotly.restyle(tester,update,[j])}for(var i=0;i<data.line_columndata.length;i++){var update={text:[data.line_columndata[i]]};Plotly.restyle(tester,update,[i+j])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));for(var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`],i=0;i<y_axis.length;i++)tableheaders.push(`<b>${fieldToVerbose(data.y_axis[i],data.mappingDict)}</b>`);for(var i=0;i<line_column.length;i++)tableheaders.push(`<b>${fieldToVerbose(data.line_column[i],data.mappingDict)}</b>`);tabledata.push(data.x_axisdata);for(var i=0;i<y_axisdata;i++)tabledata.push(data.y_axisdata[i]);for(var i=0;i<data.line_columndata;i++)tabledata.push(data.line_columndata[i]);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){for(var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`],e=0;e<y_axis.length;e++)a.push(fieldToVerbose(data.y_axis[e],data.mappingDict));for(e=0;e<line_column.length;e++)a.push(fieldToVerbose(data.line_column[e],data.mappingDict));t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var o=[];o.push(dataplot[0].x[a]);for(var l=0;l<dataplot.length;l++)o.push(dataplot[l].y[a]);t.push(o)}var d=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),i=new Blob([d],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),n=URL.createObjectURL(i);r.setAttribute("href",n),r.setAttribute("download",`${data.chartHeader}`+"_data.csv"),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)},document.getElementById(id_tableshow).onclick=function(){datatable[0].cells.values[0]=dataplot[0].x;for(var t=1;t<=dataplot.length;t++)datatable[0].cells.values[t]=dataplot[t-1].y;if("Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var a=document.getElementById(id_table);Plotly.newPlot(a,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[],x=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],col="#"+r1+g1+b1;var k=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);w=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":w[(rgb[1]-rgb[1]%16)/16]+w[rgb[1]%16],g1=isNaN(rgb[2])?"00":w[(rgb[2]-rgb[2]%16)/16]+w[rgb[2]%16],b1=isNaN(rgb[3])?"00":w[(rgb[3]-rgb[3]%16)/16]+w[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(k);var I=k,B=[],E=0;for(E=0;E<data.y_axisdata.length;E++){backRGB=I,B=[];for(E=0;E<x;E++)B.push(I);var D={marker:{color:B}};const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var S=.6*t(I)[0],C=.6*t(I)[1],T=.6*t(I)[2],N=rgb2hex(S,C,T);I=N,Plotly.restyle(tester,D,[E])}backRGB=N;let O=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));S=.9*O(backRGB)[0],C=.9*O(backRGB)[1],T=.9*O(backRGB)[2];N=rgb2hex(S,C,T),backRGB=N;for(var P=0;P<data.line_columndata.length;P++){const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));S=.6*t(backRGB)[0],C=.6*t(backRGB)[1],T=.6*t(backRGB)[2],N=rgb2hex(S,C,T);I=N;D={marker:{color:I}};Plotly.restyle(tester,D,[E+P]),backRGB=I}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[],e=dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":o[(rgb[1]-rgb[1]%16)/16]+o[rgb[1]%16],g1=isNaN(rgb[2])?"00":o[(rgb[2]-rgb[2]%16)/16]+o[rgb[2]%16],b1=isNaN(rgb[3])?"00":o[(rgb[3]-rgb[3]%16)/16]+o[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var l=col;l=col;a.push(l);for(let t=0;t<e-1;t++){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a[a.length-1]),i=.8*parseInt(d[1],16),r=.8*parseInt(d[2],16),n=.8*parseInt(d[3],16),s="#"+componentToHex(Math.round(i))+componentToHex(Math.round(r))+componentToHex(Math.round(n));a.push(s)}J=(t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16)));i=.9*J(l)[0],r=.9*J(l)[1],n=.9*J(l)[2];var c=l,_=(e=dataplot[0].x.length,[]),g=0;for(g=0;g<data.y_axisdata.length;g++){c=c;var p=c;_=[];for(var h=0;h<e;h++)_.push(c);var b={marker:{color:_}};a=[];a.push(c);const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));i=.6*t(c)[0],r=.6*t(c)[1],n=.6*t(c)[2];var y=rgb2hex(i,r,n);c=y,Plotly.restyle(tester,b,[g])}p=c;const J=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));i=.9*J(p)[0],r=.9*J(p)[1],n=.9*J(p)[2],y=rgb2hex(i,r,n);p=y;for(h=0;h<data.line_columndata.length;h++){const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));i=.6*t(p)[0],r=.6*t(p)[1],n=.6*t(p)[2],y=rgb2hex(i,r,n);c=y;b={marker:{color:c}},a=[];a.push(c),p=c,Plotly.restyle(tester,b,[g+h]),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color)}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var u=document.getElementById(id_header),m=document.getElementById(id6),f=$(".global_header_bgcolor").val();change_header_bgcolor(m,u,f);var v=$(".global_header_color").val();change_header_color(m,u,v);var x=$(".global_header_fontsize").val();change_header_fontsize(m,u,x);var w=$(".global_header_fontweight").val();change_header_fontweight(m,u,w),$(`#${id_header_bgcolor}`).val(f),$(`#${id_header_color}`).val(v),$(`#${id_header_fontsize}`).val(x),$(`#${id_header_fontweight}`).val(w).trigger("change");var k=$(".global_header_fontstyle").val();change_header_fontstyle(m,u,k),$(`#${id_header_fontstyle}`).val(k).trigger("change");var I=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(I).trigger("change"),change_header_alignment(m,u,I),$(`#${id6}`).attr("data-header_alignment",I),$(`#${id6}`).attr("data-header_color",v),$(`#${id6}`).attr("data-header_bgcolor",f),$(`#${id6}`).attr("data-header_fontsize",x),$(`#${id6}`).attr("data-header_fontweight",w);var B=$(".global_shadow").prop("checked"),E=$(".global_border").prop("checked"),D=$(".global_shadow_color").val(),S=$(".global_shadow_x").val(),C=$(".global_shadow_y").val(),T=$(".global_shadow_blur").val(),N=$(".global_shadow_thickness").val();change_shadow_global(m,B,D,S,C,T,N);var O=$(".global_border_color").val(),P=$(".global_border_thickness").val(),A=$(".global_border_style").val();change_border_global(m,E,O,P,A),$(`#${id_shadow}`).prop("checked",B),$(`#${id_border}`).prop("checked",E),$(`#${id_shadow_color}`).val(D),$(`#${id_xshadow}`).val(S),$(`#${id_yshadow}`).val(C),$(`#${id_blurshadow}`).val(T),$(`#${id_shadow_thickness}`).val(N),$(`#${id_border_color}`).val(O),$(`#${id_border_thickness}`).val(P),$(`#${id_border_style}`).val(A).trigger("change"),$(`#${id_border}`).val(E),$(`#${id_shadow}`).val(B),$(`#${id6}`).attr("data-shadecolor",D),$(`#${id6}`).attr("data-borderStyle",A),$(`#${id6}`).attr("data-borderThickness",P),$(`#${id6}`).attr("data-borderColor",O),$(`#${id6}`).attr("data-borderon",E),$(`#${id6}`).attr("data-shadowon",B),$(`#${id6}`).attr("data-shadowThick",N),$(`#${id6}`).attr("data-shadowblurry",T),$(`#${id6}`).attr("data-shadowY",C),$(`#${id6}`).attr("data-shadowX",S)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_label_placement).onchange=function(){var t=document.getElementById(id_label_placement).value;if("top"==t){for(var a=0;a<data.line_columndata.length;a++){var e={textposition:"top center"};Plotly.restyle(tester,e,[a+2])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("bottom"==t){for(a=0;a<data.line_columndata.length;a++){e={textposition:"bottom center"};Plotly.restyle(tester,e,[a+2])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}if("center"==t){for(a=0;a<data.line_columndata.length;a++){e={textposition:"center"};Plotly.restyle(tester,e,[a+2])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}var o=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",o)};var config_label_placement=$(`#${id_label_placement}`).val();$(`#${id6}`).attr("data-config_label_placement",config_label_placement),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data;if("show_labels"==t){for(var e=0;e<tester.data.length;e++){var o=tester.data[e].y;o=o.map(function(t){return Number(t.toFixed(2))}),"bar"==tester.data[e].type?(0==e&&(a[e].mode="scatter+text"),a[e].text=o.map(String),a[e].textposition="outside"):(a[e].text=[tester.data[e].y],a[e].textposition="bottom center",a[e].mode="lines+text+markers")}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){delete a[0].text,delete a[0].textposition,delete a[0].mode;for(e=1;e<tester.data.length;e++)delete a[e].text,delete a[e].textposition;document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}Plotly.redraw(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var l=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",l)},document.getElementById(id1).onchange=function(){var t=dataplot[0].x.length,a=this.value,e=a,o=[],l=0;for(l=0;l<data.y_axisdata.length;l++){o=[];for(let a=0;a<t;a++)o.push(e);var d={marker:{color:o}},i=[];i.push(e);a=e;const _=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*_(a)[0],n=.6*_(a)[1],s=.6*_(a)[2],c=rgb2hex(r,n,s);e=c,Plotly.restyle(tester,d,[l])}a=e;const _=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));r=.9*_(a)[0],n=.9*_(a)[1],s=.9*_(a)[2],c=rgb2hex(r,n,s);a=c;for(var g=0;g<data.line_columndata.length;g++){const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));r=.6*t(a)[0],n=.6*t(a)[1],s=.6*t(a)[2],c=rgb2hex(r,n,s);e=c;d={marker:{color:e}},i=[];i.push(e),a=e,Plotly.restyle(tester,d,[l+g]),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color)}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var p=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",p)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0,title:{standoff:20}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0,title:{standoff:20}}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0,title:{standoff:20}}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),myPlot.on("plotly_click",function(t){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)});var config_element_color=$(`#${id4}`).val()
;$(`#${id6}`).attr("data-config_element_color",config_element_color);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{showgrid:!0,automargin:!0},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{showgrid:!1,automargin:!0},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i);var r=$(`#${id12}`).val();$(`#${id6}`).attr("data-config_y_axis_title",r)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={x:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].label);a.filter((t,a,e)=>e.indexOf(t)===a);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"x")}),myPlot.on("plotly_deselect",function(){var t={id:chartDivId};reset_function(t)})}if("Stacked_Histogram"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=data.second_column,modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis,modalDataConfig.second_column=data.second_column;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`),outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[],colordatasecond=[],x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(color),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b)),trace1={x:data.x_axisdata,type:"histogram",marker:{color:color},name:fieldToVerbose(data.x_axis,data.mappingDict)},trace2={x:data.y_axisdata,type:"histogram",marker:{color:newHex},name:fieldToVerbose(data.y_axis,data.mappingDict)},data_plot=[trace1,trace2],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={barmode:"stack",hovermode:"closest",height:chart_height,width:chart_width,margin:{l:40,r:0,b:20,t:10,pad:4},plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),data_plot=data.plotDict.data;data_plot[0].x=data.x_axisdata,data_plot[1].x=data.y_axisdata;var colorlength=data.x_axisdata.length,colordata=[],x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),colorlength=data.x_axisdata.length,layout=data.plotDict.layout}var config={responsive:!0,displaylogo:!1};crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),Plotly.newPlot(tester,data_plot,layout,config);var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`];t.push(a);for(let a=0;a<data_plot[0].x.length;a++){var e=[];e.push(data_plot[0].x[a]),e.push(data_plot[1].x[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=data_plot[0].x,datatable[0].cells.values[1]=data_plot[1].x,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();t=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no")}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;data_plot[0].x.length;rgb_bg=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var f=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb_bg[1])?"00":f[(rgb_bg[1]-rgb_bg[1]%16)/16]+f[rgb_bg[1]%16],g1=isNaN(rgb_bg[2])?"00":f[(rgb_bg[2]-rgb_bg[2]%16)/16]+f[rgb_bg[2]%16],b1=isNaN(rgb_bg[3])?"00":f[(rgb_bg[3]-rgb_bg[3]%16)/16]+f[rgb_bg[3]%16],bg_col="#"+r1+g1+b1,$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-bgcolor",bg_col),rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);f=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":f[(rgb[1]-rgb[1]%16)/16]+f[rgb[1]%16],g1=isNaN(rgb[2])?"00":f[(rgb[2]-rgb[2]%16)/16]+f[rgb[2]%16],b1=isNaN(rgb[3])?"00":f[(rgb[3]-rgb[3]%16)/16]+f[rgb[3]%16],col="#"+r1+g1+b1;var v=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(col),x=.8*parseInt(v[1],16),w=.8*parseInt(v[2],16),k=.8*parseInt(v[3],16),I="#"+componentToHex(Math.round(x))+componentToHex(Math.round(w))+componentToHex(Math.round(k)),B={marker:{color:col}},E={marker:{color:I}};Plotly.restyle(tester,B,[0]),Plotly.restyle(tester,E,[1]),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id1}`).val(col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;data_plot[0].x.length;Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n),$(`#${id6}`).attr("data-header_color",l),$(`#${id6}`).attr("data-header_bgcolor",o),$(`#${id6}`).attr("data-header_fontsize",d),$(`#${id6}`).attr("data-header_fontweight",i);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),rgb_bg=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var f=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb_bg[1])?"00":f[(rgb_bg[1]-rgb_bg[1]%16)/16]+f[rgb_bg[1]%16],g1=isNaN(rgb_bg[2])?"00":f[(rgb_bg[2]-rgb_bg[2]%16)/16]+f[rgb_bg[2]%16],b1=isNaN(rgb_bg[3])?"00":f[(rgb_bg[3]-rgb_bg[3]%16)/16]+f[rgb_bg[3]%16],bg_col="#"+r1+g1+b1,$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-bgcolor",bg_col),rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);f=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":f[(rgb[1]-rgb[1]%16)/16]+f[rgb[1]%16],g1=isNaN(rgb[2])?"00":f[(rgb[2]-rgb[2]%16)/16]+f[rgb[2]%16],b1=isNaN(rgb[3])?"00":f[(rgb[3]-rgb[3]%16)/16]+f[rgb[3]%16],col="#"+r1+g1+b1;var v=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(col),x=.8*parseInt(v[1],16),w=.8*parseInt(v[2],16),k=.8*parseInt(v[3],16),I="#"+componentToHex(Math.round(x))+componentToHex(Math.round(w))+componentToHex(Math.round(k)),B={marker:{color:col}},E={marker:{color:I}};Plotly.restyle(tester,B,[0]),Plotly.restyle(tester,E,[1]),$(`#${id1}`).val(col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))}}),document.getElementById(id22).onchange=function(){var t=data_plot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){data_plot[0].x.length;var t=this.value;const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var e=.8*a(t)[0],o=.9*a(t)[1],l=.8*a(t)[2],d=rgb2hex(e,o,l),i={marker:{color:t}},r={marker:{color:d}};Plotly.restyle(tester,i,[0]),Plotly.restyle(tester,r,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var n=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",n)};var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=tester.layout.xaxis.title.text;if("show_gridlines"==t){var e={yaxis:{showgrid:!0,automargin:!0},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{showgrid:!1,automargin:!0},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),chartResizeable(id6,tester)}if("Vertical_Waterfall_Grouped"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=data.second_column,modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis,modalDataConfig.second_column=data.second_column;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[],colordatasecond=[],measure=[];x_axis=data.x_axis,y_axis=data.y_axis;var x_axisdata=data.x_axisdata,y_axisdata=data.y_axisdata,y_axisdata2=data.second_columndata,x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));x_axisdata2.push("Total"),x_axisdata.push("Total"),null!=y_axisdata&&(Number.isInteger(y_axisdata.reduce((t,a)=>t+a,0))?y_axisdata.push(y_axisdata.reduce((t,a)=>t+a,0)):y_axisdata.push(y_axisdata.reduce((t,a)=>t+a,0).toFixed(2))),null!=y_axisdata2&&(Number.isInteger(y_axisdata2.reduce((t,a)=>t+a,0))?y_axisdata2.push(y_axisdata2.reduce((t,a)=>t+a,0)):y_axisdata2.push(y_axisdata2.reduce((t,a)=>t+a,0).toFixed(2)));for(let t=0;t<colorlength;t++)colordata.push("#b8860b");for(let t=0;t<colorlength;t++)colordatasecond.push("goldenrod");for(let t=0;t<colorlength;t++)measure.push("relative");measure.push("total");var previousHex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(color),r=.8*parseInt(previousHex[1],16),g=.8*parseInt(previousHex[2],16),b=.8*parseInt(previousHex[3],16),newHex="#"+componentToHex(Math.round(r))+componentToHex(Math.round(g))+componentToHex(Math.round(b)),trace1={x:x_axisdata,y:y_axisdata,type:"waterfall",measure:measure,mode:"markers",decreasing:{marker:{color:color}},increasing:{marker:{color:color}},totals:{marker:{color:newHex}},name:fieldToVerbose(data.y_axis,data.mappingDict)},trace2={x:x_axisdata,y:y_axisdata2,type:"waterfall",measure:measure,decreasing:{marker:{color:color}},increasing:{marker:{color:color}},totals:{marker:{color:newHex}},name:fieldToVerbose(data.second_column,data.mappingDict)},dataplot=[trace1,trace2],tester=document.getElementById(id),myPlot=document.getElementById(id),layout={barmode:"group",hovermode:"closest",plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,height:chart_height,width:chart_width,margin:{l:40,r:0,b:20,t:10,pad:4},yaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data,colorlength=data.x_axisdata.length,measure=[];for(let t=0;t<colorlength;t++)measure.push("relative");var x_axisdata=data.x_axisdata,y_axisdata=data.y_axisdata,second_columndata=data.second_columndata,x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata));x_axisdata2.push("Total"),x_axisdata.push("Total"),null!=y_axisdata&&(Number.isInteger(y_axisdata.reduce((t,a)=>t+a,0))?y_axisdata.push(y_axisdata.reduce((t,a)=>t+a,0)):y_axisdata.push(y_axisdata.reduce((t,a)=>t+a,0).toFixed(2))),null!=second_columndata&&(Number.isInteger(second_columndata.reduce((t,a)=>t+a,0))?second_columndata.push(second_columndata.reduce((t,a)=>t+a,0)):second_columndata.push(second_columndata.reduce((t,a)=>t+a,0).toFixed(2))),measure.push("total"),dataplot[0].x=x_axisdata,dataplot[0].y=y_axisdata,dataplot[0].measure=measure,dataplot[1].x=x_axisdata,dataplot[1].y=second_columndata,dataplot[1].measure=measure;var layout=data.plotDict.layout}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);var update={text:[data.y_axisdata]},update2={text:[data.second_columndata]};Plotly.restyle(tester,update,[0]),Plotly.restyle(tester,update2,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),document.getElementById(id1).onchange=function(){
var t=this.value,a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),e=.8*parseInt(a[1],16),o=.8*parseInt(a[2],16),l=.8*parseInt(a[3],16),d="#"+componentToHex(Math.round(e))+componentToHex(Math.round(o))+componentToHex(Math.round(l)),i={decreasing:{marker:{color:t}},increasing:{marker:{color:t}},totals:{marker:{color:d}}};Plotly.restyle(tester,i,[0]);var r={decreasing:{marker:{color:t}},increasing:{marker:{color:t}},totals:{marker:{color:d}}};Plotly.restyle(tester,r,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),e.push(dataplot[1].y[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,datatable[0].cells.values[2]=dataplot[1].y,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color"),a=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(plot_col);var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(plot_col),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i)),n={decreasing:{marker:{color:plot_col}},increasing:{marker:{color:plot_col}},totals:{marker:{color:r}}};Plotly.restyle(tester,n,[0]);var s={decreasing:{marker:{color:plot_col}},increasing:{marker:{color:plot_col}},totals:{marker:{color:r}}};Plotly.restyle(tester,s,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-color",plot_col),$(`#${id6}`).attr("data-config_color",plot_col),$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var c=document.getElementById(id_header),_=document.getElementById(id6),g=$(".global_header_bgcolor").val();change_header_bgcolor(_,c,g);var p=$(".global_header_color").val();change_header_color(_,c,p);var h=$(".global_header_fontsize").val();change_header_fontsize(_,c,h);var b=$(".global_header_fontweight").val();change_header_fontweight(_,c,b),$(`#${id_header_bgcolor}`).val(g),$(`#${id_header_color}`).val(p),$(`#${id_header_fontsize}`).val(h),$(`#${id_header_fontweight}`).val(b).trigger("change");var y=$(".global_header_fontstyle").val();change_header_fontstyle(_,c,y),$(`#${id_header_fontstyle}`).val(y).trigger("change");var u=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(u).trigger("change"),change_header_alignment(_,c,u),$(`#${id6}`).attr("data-header_alignment",u);var m=$(".global_shadow").prop("checked"),f=$(".global_border").prop("checked"),v=$(".global_shadow_color").val(),x=$(".global_shadow_x").val(),w=$(".global_shadow_y").val(),k=$(".global_shadow_blur").val(),I=$(".global_shadow_thickness").val();change_shadow_global(_,m,v,x,w,k,I);var B=$(".global_border_color").val(),E=$(".global_border_thickness").val(),D=$(".global_border_style").val();change_border_global(_,f,B,E,D),$(`#${id_shadow}`).prop("checked",m),$(`#${id_border}`).prop("checked",f),$(`#${id_shadow_color}`).val(v),$(`#${id_xshadow}`).val(x),$(`#${id_yshadow}`).val(w),$(`#${id_blurshadow}`).val(k),$(`#${id_shadow_thickness}`).val(I),$(`#${id_border_color}`).val(B),$(`#${id_border_thickness}`).val(E),$(`#${id_border_style}`).val(D).trigger("change"),$(`#${id_border}`).val(f),$(`#${id_shadow}`).val(m),$(`#${id6}`).attr("data-shadecolor",v),$(`#${id6}`).attr("data-borderStyle",D),$(`#${id6}`).attr("data-borderThickness",E),$(`#${id6}`).attr("data-borderColor",B),$(`#${id6}`).attr("data-borderon",f),$(`#${id6}`).attr("data-shadowon",m),$(`#${id6}`).attr("data-shadowThick",I),$(`#${id6}`).attr("data-shadowblurry",k),$(`#${id6}`).attr("data-shadowY",w),$(`#${id6}`).attr("data-shadowX",x)}else{plotbg=$(`#${id22}`).val();t=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),a=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],plot_col="#"+r1+g1+b1,$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-bgcolor",plot_col)}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");var a=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(plot_col);var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(plot_col),l=.8*parseInt(o[1],16),d=.8*parseInt(o[2],16),i=.8*parseInt(o[3],16),r="#"+componentToHex(Math.round(l))+componentToHex(Math.round(d))+componentToHex(Math.round(i)),n={decreasing:{marker:{color:plot_col}},increasing:{marker:{color:plot_col}},totals:{marker:{color:r}}};Plotly.restyle(tester,n,[0]);var s={decreasing:{marker:{color:plot_col}},increasing:{marker:{color:plot_col}},totals:{marker:{color:r}}};Plotly.restyle(tester,s,[1]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-color",plot_col),$(`#${id6}`).attr("data-config_color",plot_col),a=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(a[1])?"00":e[(a[1]-a[1]%16)/16]+e[a[1]%16],g1=isNaN(a[2])?"00":e[(a[2]-a[2]%16)/16]+e[a[2]%16],b1=isNaN(a[3])?"00":e[(a[3]-a[3]%16)/16]+e[a[3]%16],plot_column="#"+r1+g1+b1,$(`#${id22}`).val(plot_column),$(`#${id6}`).attr("data-bgcolor",plot_column),$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;dataplot[0].x.length;Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var c=document.getElementById(id_header),_=document.getElementById(id6),g=$(".global_header_bgcolor").val();change_header_bgcolor(_,c,g);var p=$(".global_header_color").val();change_header_color(_,c,p);var h=$(".global_header_fontsize").val();change_header_fontsize(_,c,h);var b=$(".global_header_fontweight").val();change_header_fontweight(_,c,b),$(`#${id_header_bgcolor}`).val(g),$(`#${id_header_color}`).val(p),$(`#${id_header_fontsize}`).val(h),$(`#${id_header_fontweight}`).val(b).trigger("change");var y=$(".global_header_fontstyle").val();change_header_fontstyle(_,c,y),$(`#${id_header_fontstyle}`).val(y).trigger("change");var u=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(u).trigger("change"),change_header_alignment(_,c,u),$(`#${id6}`).attr("data-header_alignment",u),$(`#${id6}`).attr("data-header_color",p),$(`#${id6}`).attr("data-header_bgcolor",g),$(`#${id6}`).attr("data-header_fontsize",h),$(`#${id6}`).attr("data-header_fontweight",b);var m=$(".global_shadow").prop("checked"),f=$(".global_border").prop("checked"),v=$(".global_shadow_color").val(),x=$(".global_shadow_x").val(),w=$(".global_shadow_y").val(),k=$(".global_shadow_blur").val(),I=$(".global_shadow_thickness").val();change_shadow_global(_,m,v,x,w,k,I);var B=$(".global_border_color").val(),E=$(".global_border_thickness").val(),D=$(".global_border_style").val();change_border_global(_,f,B,E,D),$(`#${id_shadow}`).prop("checked",m),$(`#${id_border}`).prop("checked",f),$(`#${id_shadow_color}`).val(v),$(`#${id_xshadow}`).val(x),$(`#${id_yshadow}`).val(w),$(`#${id_blurshadow}`).val(k),$(`#${id_shadow_thickness}`).val(I),$(`#${id_border_color}`).val(B),$(`#${id_border_thickness}`).val(E),$(`#${id_border_style}`).val(D).trigger("change"),$(`#${id_border}`).val(f),$(`#${id_shadow}`).val(m),$(`#${id6}`).attr("data-shadecolor",v),$(`#${id6}`).attr("data-borderStyle",D),$(`#${id6}`).attr("data-borderThickness",E),$(`#${id6}`).attr("data-borderColor",B),$(`#${id6}`).attr("data-borderon",f),$(`#${id6}`).attr("data-shadowon",m),$(`#${id6}`).attr("data-shadowThick",I),$(`#${id6}`).attr("data-shadowblurry",k),$(`#${id6}`).attr("data-shadowY",w),$(`#${id6}`).attr("data-shadowX",x)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)};var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value;if("show_labels"==t){var a=tester.data[0].y,e=tester.data[1].y;a=a.map(function(t){return Number(t)}),e=e.map(function(t){return Number(t)});var o=tester.data;o[0].mode="markers+text",o[0].text=a.map(String),o[0].textposition="outside",o[1].text=e.map(String),o[1].textposition="outside",document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){o=tester.data;delete o[0].mode,delete o[0].text,delete o[0].textposition,delete o[1].text,delete o[1].textposition,document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}Plotly.redraw(tester,o),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var l=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",l)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=tester.layout.xaxis.title.text;if("show_gridlines"==t){var e={yaxis:{showgrid:!0,automargin:!0},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){e={yaxis:{showgrid:!1,automargin:!0},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:a,font:{family:"Arial"}}}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",o)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=tester.layout.yaxis.showgrid,e={xaxis:{showgrid:a,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}}}};Plotly.relayout(tester,e),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var o=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",o)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=tester.data[0].x,e=t.x,o=t.text,l=document.getElementById(id13).value,d={};d[o]=l,changed_text.push(d),a[e]=l;var i={x:[a]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].x);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"x")})}if("Vertical_Bar_Stacked"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=void 0,modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),orderModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var colorlength=data.x_axisdata.length,colordata=[],x_axisdata2=JSON.parse(JSON.stringify(data.x_axisdata)),backRGB=color,dataplot=[],color_value=chart_color;for(var y in data.y_axisdata){colordata=[];for(let t=0;t<colorlength;t++)colordata.push(color_value);var trace1={x:data.x_axisdata,y:data.y_axisdata[y],type:"bar",text:fieldToVerbose(data.y_axisdata[y],data.mappingDict),marker:{color:colordata},name:fieldToVerbose(data.y_axis[y],data.mappingDict)};dataplot.push(trace1);var colorList1=[];colorList1.push(color_value);var backRGB=color_value;const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(backRGB)[0],g=.6*t(backRGB)[1],b=.6*t(backRGB)[2],newcolor=rgb2hex(r,g,b);color_value=newcolor}var tester=document.getElementById(id),myPlot=document.getElementById(id),layout={barmode:"stack",hovermode:"closest",margin:{l:40,r:0,b:20,t:10,pad:4},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color,yaxis:{title:{showgrid:!1,automargin:!0,font:{family:"Arial",color:label_color,size:label_fontsize}}},xaxis:{title:{standoff:20,text:fieldToVerbose(data.x_axis,data.mappingDict),font:{family:"Arial",color:label_color,size:label_fontsize}},categoryorder:"category ascending",showgrid:!1,automargin:!0,font:{family:"Arial"}}}}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),orderModal.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;for(let t=0;t<dataplot.length;t++)dataplot[t].x=data.x_axisdata,dataplot[t].y=data.y_axisdata[t],delete dataplot[t].selectedpoints;var layout=data.plotDict.layout,colorlength=data.x_axisdata.length,color_old=[];if("object"==typeof dataplot[0].marker.color)for(let t=0;t<dataplot.length;t++)color_old.push(dataplot[t].marker.color[0]);else for(let t=0;t<dataplot.length;t++)color_old.push(dataplot[t].marker.color);if(-1!=color_old.indexOf(void 0)){color_old=[],color_old.push(color);for(let t=1;t<dataplot.length;t++){backRGB=color_old[t-1];const a=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*a(backRGB)[0],g=.6*a(backRGB)[1],b=.6*a(backRGB)[2],newcolor=rgb2hex(r,g,b);color_old.push(newcolor)}}if(dataplot[0].marker.color.length!=colorlength)for(let t=0;t<dataplot.length;t++){var colordata=[];for(let a=0;a<colorlength;a++)colordata.push(color_old[t]);dataplot[t].marker={color:colordata}}}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config);for(var i=0;i<data.y_axisdata.length;i++){var update={text:[data.y_axisdata[i]]};Plotly.restyle(tester,update,[i])}$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));for(var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`],i=0;i<y_axis.length;i++)tableheaders.push(fieldToVerbose(data.y_axis[i],data.mappingDict));tabledata.push(data.x_axisdata);for(var i=0;i<y_axisdata;i++)tabledata.push(data.y_axisdata[i]);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),null!=data.plotDict&&setAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical"),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){for(var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`],e=0;e<y_axis.length;e++)a.push(fieldToVerbose(data.y_axis[e],data.mappingDict));t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var o=[];o.push(dataplot[0].x[a]);for(let t=0;t<dataplot.length;t++)o.push(dataplot[t].y[a]);t.push(o)}var l=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),d=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),r=URL.createObjectURL(d);i.setAttribute("href",r),i.setAttribute("download",`${data.chartHeader}`+"_data.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},document.getElementById(id_tableshow).onclick=function(){datatable[0].cells.values[0]=dataplot[0].x;for(var t=1;t<=dataplot.length;t++)datatable[0].cells.values[t]=dataplot[t-1].y;if("Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_table_export}`).css("display","block");var a=document.getElementById(id_table);Plotly.newPlot(a,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),y_axis_end=tester.layout.yaxis.range[1],y_axis_start=tester.layout.yaxis.range[0],$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g),null!=data.plotDict&&triggerAxisOrderValues(data.plotDict,id_axis_order,idOrderModal,order_type="Vertical")}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,
layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;for(var w=col,k=(w=col,w),I=0;I<data.y_axisdata.length;I++){k=k,backRGB=k;var B={marker:{color:k}};const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var E=.6*t(k)[0],D=.6*t(k)[1],S=.6*t(k)[2],C=rgb2hex(E,D,S);k=C,Plotly.restyle(tester,B,[I])}rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-color",t),$(`#${id6}`).attr("data-config_color",t),$(`#${id6}`).attr("data-bgcolor",plotbg),$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col);var o=col;o=col;a.push(o);for(var l=o,d=0;d<data.y_axisdata.length;d++){l=l;var i={marker:{color:l}};a=[];a.push(l);const t=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var r=.6*t(l)[0],n=.6*t(l)[1],s=.6*t(l)[2],c=rgb2hex(r,n,s);l=c,Plotly.restyle(tester,i,[d])}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var _=document.getElementById(id_header),g=document.getElementById(id6),p=$(".global_header_bgcolor").val();change_header_bgcolor(g,_,p);var h=$(".global_header_color").val();change_header_color(g,_,h);var b=$(".global_header_fontsize").val();change_header_fontsize(g,_,b);var y=$(".global_header_fontweight").val();change_header_fontweight(g,_,y),$(`#${id_header_bgcolor}`).val(p),$(`#${id_header_color}`).val(h),$(`#${id_header_fontsize}`).val(b),$(`#${id_header_fontweight}`).val(y).trigger("change");var u=$(".global_header_fontstyle").val();change_header_fontstyle(g,_,u),$(`#${id_header_fontstyle}`).val(u).trigger("change");var m=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(m).trigger("change"),change_header_alignment(g,_,m),$(`#${id6}`).attr("data-header_alignment",m),$(`#${id6}`).attr("data-header_color",h),$(`#${id6}`).attr("data-header_bgcolor",p),$(`#${id6}`).attr("data-header_fontsize",b),$(`#${id6}`).attr("data-header_fontweight",y);var f=$(".global_shadow").prop("checked"),v=$(".global_border").prop("checked"),x=$(".global_shadow_color").val(),w=$(".global_shadow_x").val(),k=$(".global_shadow_y").val(),I=$(".global_shadow_blur").val(),B=$(".global_shadow_thickness").val();change_shadow_global(g,f,x,w,k,I,B);var E=$(".global_border_color").val(),D=$(".global_border_thickness").val(),S=$(".global_border_style").val();change_border_global(g,v,E,D,S),$(`#${id_shadow}`).prop("checked",f),$(`#${id_border}`).prop("checked",v),$(`#${id_shadow_color}`).val(x),$(`#${id_xshadow}`).val(w),$(`#${id_yshadow}`).val(k),$(`#${id_blurshadow}`).val(I),$(`#${id_shadow_thickness}`).val(B),$(`#${id_border_color}`).val(E),$(`#${id_border_thickness}`).val(D),$(`#${id_border_style}`).val(S).trigger("change"),$(`#${id_border}`).val(v),$(`#${id_shadow}`).val(f),$(`#${id6}`).attr("data-shadecolor",x),$(`#${id6}`).attr("data-borderStyle",S),$(`#${id6}`).attr("data-borderThickness",D),$(`#${id6}`).attr("data-borderColor",E),$(`#${id6}`).attr("data-borderon",v),$(`#${id6}`).attr("data-shadowon",f),$(`#${id6}`).attr("data-shadowThick",B),$(`#${id6}`).attr("data-shadowblurry",I),$(`#${id6}`).attr("data-shadowY",k),$(`#${id6}`).attr("data-shadowX",w)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id1).onchange=function(){for(var t=this.value,a=t,e=0;e<data.y_axisdata.length;e++){var o={marker:{color:a}},l=[];l.push(a);t=a;const s=t=>t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,a,e,o)=>"#"+a+a+e+e+o+o).substring(1).match(/.{2}/g).map(t=>parseInt(t,16));var d=.6*s(t)[0],i=.6*s(t)[1],r=.6*s(t)[2],n=rgb2hex(d,i,r);a=n,Plotly.restyle(tester,o,[e])}color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var s=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",s)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color);var config_labels=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",config_labels),document.getElementById(id_labels).onclick=function(){var t=document.getElementById(id_labels).value,a=tester.data;if("show_labels"==t){for(var e=0;e<tester.data.length;e++){var o=tester.data[e].y;o=o.map(function(t){return Number(t.toFixed(2))}),0==e&&(a[e].mode="markers+text"),a[e].text=o.map(String),a[e].textposition="outside"}document.getElementById(id_labels).value="hide_labels",document.getElementById(id_labels).innerHTML="Hide Labels"}if("hide_labels"==t){delete a[0].text,delete a[0].textposition,delete a[0].mode;for(e=1;e<tester.data.length;e++)delete a[e].text,delete a[e].textposition;$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),document.getElementById(id_labels).value="show_labels",document.getElementById(id_labels).innerHTML="Show Labels"}Plotly.redraw(tester,a);var l=$(`#${id_labels}`).val();$(`#${id6}`).attr("data-config_labels",l)},document.getElementById(id2).onchange=function(){var t=document.getElementById(id3).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_end=tester.layout.yaxis.range[1];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[e,y_axis_end],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",d)},document.getElementById(id3).onchange=function(){var t=document.getElementById(id2).value.length,a=document.getElementById(id3).value,e=document.getElementById(id2).value;y_axis_start=tester.layout.yaxis.range[0];var o=tester.layout.yaxis.showgrid;if(0==t)var l={yaxis:{range:[y_axis_start,a],showgrid:o,automargin:!0}};else l={yaxis:{range:[e,a],showgrid:o,automargin:!0}};Plotly.relayout(tester,l),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",d)};var config_xrange=$(`#${id2}`).val();$(`#${id6}`).attr("data-config_xrange",config_xrange);var config_yrange=$(`#${id3}`).val();$(`#${id6}`).attr("data-config_yrange",config_yrange),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),myPlot.on("plotly_click",function(t){if("block"==document.getElementById(id7).style.display){var a="",e="",o=[];for(let l=0;l<t.points.length;l++)a=t.points[l].pointNumber,e=t.points[l].curveNumber,o=t.points[l].data.marker.color;color=document.getElementById(id4).value,o[a]=color;var l={marker:{color:o}};Plotly.restyle(tester,l,[e]),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var d=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",d)}});var config_element_color=$(`#${id4}`).val();$(`#${id6}`).attr("data-config_element_color",config_element_color);var config_gridlines=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",config_gridlines),document.getElementById(id9).onclick=function(){var t=document.getElementById(id9).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.xaxis.title.text;if("show_gridlines"==t){var d={yaxis:{showgrid:!0,automargin:!0},xaxis:{showgrid:!0,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="hide_gridlines",document.getElementById(id9).innerHTML="Hide Gridlines"}if("hide_gridlines"==t){d={yaxis:{showgrid:!1,automargin:!0},xaxis:{showgrid:!1,automargin:!0,title:{standoff:20,text:l,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};document.getElementById(id9).value="show_gridlines",document.getElementById(id9).innerHTML="Show Gridlines"}Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id9}`).val();$(`#${id6}`).attr("data-config_gridlines",i)},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id11).onchange=function(){var t=document.getElementById(id11).value,a=JSON.parse($(`#${id6}`).attr("data-layout")),e=a.xaxis.categoryorder,o=a.xaxis.categoryarray,l=tester.layout.yaxis.showgrid,d={xaxis:{showgrid:l,automargin:!0,title:{standoff:20,text:t,font:{family:"Arial"}},categoryorder:e,categoryarray:o}};Plotly.relayout(tester,d),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var i=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",i)};var config_x_axis_title=$(`#${id11}`).val();$(`#${id6}`).attr("data-config_x_axis_title",config_x_axis_title),document.getElementById(id14).onchange=function(){var t=document.getElementById(id14).value,a={name:t};Plotly.restyle(tester,a,0),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x)},document.getElementById(id15).onchange=function(){var t=document.getElementById(id15).value,a={name:t};Plotly.restyle(tester,a,1),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y)},legend_x=$(`#${id14}`).val(),$(`#${id6}`).attr("data-legend_x",legend_x),legend_y=$(`#${id15}`).val(),$(`#${id6}`).attr("data-legend_y",legend_y);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}myPlot.on("plotly_afterplot",function(){d3.selectAll(".xaxislayer-above").selectAll("text").on("click",function(t){var a=t.x,e=t.text,o=tester.data[0].x,l=document.getElementById(id13).value,d={};d[e]=l,changed_text.push(d),o[a]=l;var i={x:[o]};Plotly.restyle(tester,i),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label)})}),element_label=$(`#${id13}`).val(),$(`#${id6}`).attr("data-element_label",element_label),document.getElementById(id18).onclick=function(){var t={x:[JSON.parse(JSON.stringify(x_axisdata2))]};Plotly.restyle(tester,t),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data))},chartResizeable(id6,tester),myPlot.on("plotly_selected",function(t){points_array=t.points;var a=[];for(let t=0;t<points_array.length;t++)a.push(points_array[t].label);a.filter((t,a,e)=>e.indexOf(t)===a);var e={points:a,id:chartDivId,"tab-id":$("#"+chartDivId).parent().parent().parent().attr("id")};reset_function(e,"x")}),myPlot.on("plotly_deselect",function(){var t={id:chartDivId};reset_function(t)})}if("Angular_Gauge"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),gaugeModal.appendTo(`#${plotDict.tabNameID}`),gaugeModalRange.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);let t=$(`#${id6}`).closest(".tab-content").attr("id").replace("analysisTabContent",""),a=[];if(a.unshift({range:[1,100],color:"#ffffff"}),$("#conditionModalRange"+t+"SaveButton").each(function(){let{dataValue:t}=returnGaugeColorRange($(this),[{value:data.value}]);t.length>0?(a=t,populateGaugeModalRange(idGaugeModal+"Range",t)):t=a,$("#"+idGaugeModal+"RangeButton").attr("data-value",JSON.stringify(t))}),$("#conditionModal"+t+"SaveButton").each(function(){let{dataValue:t,gaugeBarColor:a}=returnGaugeColor($(this),[{value:data.value}]);""!=a&&(color=a),$("#"+idGaugeModal+"Button").attr("data-value",JSON.stringify(t)),$("#"+idGaugeModal+"Button").attr("data-color",color),populateGaugeModal(idGaugeModal,t)}),NaN!=parseInt($("#delta"+t).val())){$("#"+id27).val(parseInt($("#delta"+t).val())).trigger("change"),$("#"+id26).val($("#thresholdColor"+t).val()).trigger("change"),$("#"+id25).val($("#threshold"+t).val()).trigger("change");var trace1={x:data.x_axisdata,y:data.y_axisdata,delta:{reference:parseInt($("#delta"+t).val())},second_columndata:data.second_columndata,value:data.value,title:{text:fieldToVerbose(y_axis,data.mappingDict)+"-"+fieldToVerbose(data.second_column,data.mappingDict)},type:"indicator",mode:"gauge+number+delta",gauge:{axis:{range:[null,1.1*data.value],tickwidth:1,tickcolor:"darkblue"},bar:{color:color},steps:a,threshold:{line:{color:$("#thresholdColor"+t).val(),width:4},thickness:.75,value:$("#threshold"+t).val()}}}}else var trace1={x:data.x_axisdata,y:data.y_axisdata,second_columndata:data.second_columndata,value:data.value,title:{text:fieldToVerbose(y_axis,data.mappingDict)+"-"+fieldToVerbose(data.second_column,data.mappingDict)},type:"indicator",mode:"gauge+number",gauge:{axis:{range:[null,1.1*data.value],tickwidth:1,tickcolor:"darkblue"},bar:{color:color},steps:a,threshold:{line:{color:$("#thresholdColor"+t).val(),width:4},thickness:.75,value:$("#threshold"+t).val()}}};var dataplot=[trace1],layout={margin:{l:0,r:0,b:0,t:20,pad:1},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color},tester=document.getElementById(id)}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),gaugeModal.appendTo(`#${data.plotDict.tab_id}`),gaugeModalRange.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;if(data.plotDict.hasOwnProperty("thresholdConfig")){var threshold1=data.plotDict.thresholdConfig;for(let t=0;t<threshold1.length;t++)if(threshold1[t].hasOwnProperty(data.plotDict.chartDivId)){if(threshold1[t][data.plotDict.chartDivId].hasOwnProperty("delta")&&(NaN!=parseInt(threshold1[t][data.plotDict.chartDivId].delta)&&(dataplot[0].mode="gauge+number+delta",dataplot[0].delta={reference:parseInt(threshold1[t][data.plotDict.chartDivId].delta)}),$("#"+data.plotDict.chartDivId+"threshold").val(threshold1[t][data.plotDict.chartDivId].threshold),$("#"+data.plotDict.chartDivId+"thresholdColor").val(threshold1[t][data.plotDict.chartDivId].color),$("#"+data.plotDict.chartDivId+"deltaGauge").val(threshold1[t][data.plotDict.chartDivId].delta)),threshold1[t][data.plotDict.chartDivId].hasOwnProperty("barColorConfig")){let a=JSON.parse(threshold1[t][data.plotDict.chartDivId].barColorConfig),e=data.plotDict.chartDivId+"gaugeModal";populateGaugeModal(e,a),$("#"+data.plotDict.chartDivId+"gaugeModalButton").attr("data-value",threshold1[t][data.plotDict.chartDivId].barColorConfig)}if(threshold1[t][data.plotDict.chartDivId].hasOwnProperty("barRangeConfig")){let a=JSON.parse(threshold1[t][data.plotDict.chartDivId].barRangeConfig),e=data.plotDict.chartDivId+"gaugeModalRange";populateGaugeModalRange(e,a),$("#"+data.plotDict.chartDivId+"gaugeModalRangeButton").attr("data-value",threshold1[t][data.plotDict.chartDivId].barRangeConfig)}threshold1[t][data.plotDict.chartDivId].hasOwnProperty("barColor")&&$("#"+data.plotDict.chartDivId+"gaugeModalButton").attr("data-color",threshold1[t][data.plotDict.chartDivId].barColor)}}dataplot[0].value=data.value,dataplot[0].gauge.axis.range=[null,1.1*data.value],dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,dataplot[0].second_columndata=data.second_columndata;var layout=data.plotDict.layout}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype});var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),"yes"==grad_color?$(`#${id24}`).prop("checked",!0):$(`#${id24}`).prop("checked",!1),$("#"+id6).find(".bg-arc").css("opacity",.3),$("#"+idGaugeModal+"SaveButton").on("click",function(){var t=document.getElementById(id),a="gauge+number";let e,o=id25.replace("threshold","card"),l=JSON.parse($("#"+o).attr("data-data"));null==$("#"+id27).val()||null==$("#"+id27).val()?e={}:(a="gauge+number+delta",e={reference:parseInt($("#"+id27).val())}),null==$("#"+id25).val()||null==$("#"+id25).val()?l[0].gauge.threshold={}:l[0].gauge.threshold={line:{color:$("#"+id26).val(),width:4},thickness:.75,value:parseInt($("#"+id25).val())};let{dataValue:d,gaugeBarColor:i}=returnGaugeColor($(this),l);l[0].gauge.bar={color:i},$("#"+o.replace("card","")+"gaugeModalButton").attr("data-value",JSON.stringify(d)),$("#"+o.replace("card","")+"gaugeModalButton").attr("data-color",i);var r={mode:a,delta:e,gauge:l[0].gauge};Plotly.restyle(t,r),$("#"+o).attr("data-data",JSON.stringify(l))}),$("#"+idGaugeModal+"RangeSaveButton").on("click",function(){var t=document.getElementById(id),a="gauge+number";let e,o=id25.replace("threshold","card"),l=JSON.parse($("#"+o).attr("data-data"));null==$("#"+id27).val()||null==$("#"+id27).val()?e={}:(a="gauge+number+delta",e={reference:parseInt($("#"+id27).val())}),null==$("#"+id25).val()||null==$("#"+id25).val()?l[0].gauge.threshold={}:l[0].gauge.threshold={line:{color:$("#"+id26).val(),width:4},thickness:.75,value:parseInt($("#"+id25).val())};let{dataValue:d}=returnGaugeColorRange($(this),l);l[0].gauge.steps=d,$("#"+o.replace("card","")+"gaugeModalRangeButton").attr("data-value",JSON.stringify(d));var i={mode:a,delta:e,gauge:l[0].gauge};Plotly.restyle(t,i),$("#"+o).find(".bg-arc").css("opacity",.3),$("#"+o).attr("data-data",JSON.stringify(l))}),$("#"+id25).blur(function(){var t=document.getElementById(id),a="gauge+number";let e,o=id25.replace("threshold","card"),l=JSON.parse($("#"+o).attr("data-data"));null==$("#"+id27).val()||null==$("#"+id27).val()?e={}:(a="gauge+number+delta",e={reference:parseInt($("#"+id27).val())}),null==$(this).val()||null==$(this).val()?l[0].gauge.threshold={}:l[0].gauge.threshold={line:{color:$("#"+id26).val(),width:4},thickness:.75,value:parseInt($(this).val())};var d={mode:a,delta:e,gauge:l[0].gauge};Plotly.restyle(t,d),$("#"+o).attr("data-data",JSON.stringify(l))}),$("#"+id26).change(function(){var t=document.getElementById(id),a="gauge+number";let e,o,l=id26.replace("thresholdColor","card"),d=JSON.parse($("#"+l).attr("data-data"));null==$("#"+id27).val()||null==$("#"+id27).val()?e={}:(a="gauge+number+delta",e={reference:parseInt($("#"+id27).val())}),o=null==$("#"+id25).val()||null==$("#"+id25).val()?void 0:parseInt($("#"+id25).val()),d[0].gauge.threshold={line:{color:$(this).val(),width:4},thickness:.75,value:o};var i={mode:a,delta:e,gauge:d[0].gauge};Plotly.restyle(t,i),$("#"+l).attr("data-data",JSON.stringify(d))}),$("#"+id27).blur(function(){var t,a=document.getElementById(id),e="gauge+number";let o=id27.replace("deltaGauge","card"),l=JSON.parse($("#"+o).attr("data-data"));null==$(this).val()||null==$(this).val()?(t={mode:e,delta:{},gauge:l[0].gauge},l[0].delta={}):(e="gauge+number+delta",t={mode:e,delta:{reference:parseInt($(this).val())},gauge:l[0].gauge},l[0].delta={reference:parseInt($(this).val())}),Plotly.update(a,t),$("#"+o).attr("data-data",JSON.stringify(l))}),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),e.push(dataplot[0].second_columndata[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,datatable[0].cells.values[2]=dataplot[0].second_columndata,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes");var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no");t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w);let k=id6.replace("card","");var I={}
;let B=[],E={};if($("#"+k+"gaugeModalRangeSaveButton").each(function(){let{dataValue:t}=returnGaugeColorRange($(this),E);B=t}),NaN!=parseInt($("#"+k+"deltaGauge").val()))I={mode:"gauge+number+delta",delta:{reference:parseInt($("#"+k+"deltaGauge").val())},value:[data.value],gauge:{axis:{range:[null,1.1*[data.value]]},bar:{color:w},steps:B,threshold:{line:{color:$("#"+k+"thresholdColor").val(),width:4},thickness:.75,value:$("#"+k+"threshold").val()}},x:[data.x_axisdata],y:[data.y_axisdata],second_columndata:[data.second_columndata]};else I={value:[data.value],gauge:{axis:{range:[null,1.1*[data.value]]},bar:{color:w},steps:B,threshold:{line:{color:$("#"+k+"thresholdColor").val(),width:4},thickness:.75,value:$("#"+k+"threshold").val()}},x:[data.x_axisdata],y:[data.y_axisdata],second_columndata:[data.second_columndata]};Plotly.restyle(tester,I),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),setTimeout(()=>{$("#"+id6.replace("card","")+"threshold").trigger("blur"),$("#"+id6.replace("card","")+"gaugeModalSaveButton").trigger("click"),$("#"+id6).find("bg-arc").css("opacity",.3)},1e3)}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-color",t),$(`#${id6}`).attr("data-config_color",t),$(`#${id6}`).attr("data-bgcolor",plotbg),$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(".myDiv"),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col);var o=col;o=col;a.push(o);let k=id6.replace("card","");var l={};let I={},B=[];if($("#"+k+"gaugeModalRangeSaveButton").each(function(){let{dataValue:t}=returnGaugeColorRange($(this),I);B=t}),NaN!=parseInt($("#"+k+"deltaGauge").val()))l={mode:"gauge+number+delta",delta:{reference:parseInt($("#"+k+"deltaGauge").val())},value:[data.value],gauge:{axis:{range:[null,1.1*[data.value]]},bar:{color:o},steps:B,threshold:{line:{color:$("#"+k+"thresholdColor").val(),width:4},thickness:.75,value:$("#"+k+"threshold").val()}},x:[data.x_axisdata],y:[data.y_axisdata],second_columndata:[data.second_columndata]};else l={value:[data.value],gauge:{axis:{range:[null,1.1*[data.value]]},bar:{color:o},steps:B,threshold:{line:{color:$("#"+k+"thresholdColor").val(),width:4},thickness:.75,value:$("#"+k+"threshold").val()}},x:[data.x_axisdata],y:[data.y_axisdata],second_columndata:[data.second_columndata]};Plotly.restyle(tester,l),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),setTimeout(()=>{$("#"+id6.replace("card","")+"threshold").trigger("blur"),$("#"+id6.replace("card","")+"gaugeModalSaveButton").trigger("click"),$("#"+id6).find("bg-arc").css("opacity",.3)},1e3);var d=document.getElementById(id_header),i=document.getElementById(id6),r=$(".global_header_bgcolor").val();change_header_bgcolor(i,d,r);var n=$(".global_header_color").val();change_header_color(i,d,n);var s=$(".global_header_fontsize").val();change_header_fontsize(i,d,s);var c=$(".global_header_fontweight").val();change_header_fontweight(i,d,c),$(`#${id_header_bgcolor}`).val(r),$(`#${id_header_color}`).val(n),$(`#${id_header_fontsize}`).val(s),$(`#${id_header_fontweight}`).val(c).trigger("change");var _=$(".global_header_fontstyle").val();change_header_fontstyle(i,d,_),$(`#${id_header_fontstyle}`).val(_).trigger("change");var g=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(g).trigger("change"),change_header_alignment(i,d,g),$(`#${id6}`).attr("data-header_alignment",g),$(`#${id6}`).attr("data-header_color",n),$(`#${id6}`).attr("data-header_bgcolor",r),$(`#${id6}`).attr("data-header_fontsize",s),$(`#${id6}`).attr("data-header_fontweight",c);var p=$(".global_shadow").prop("checked"),h=$(".global_border").prop("checked"),b=$(".global_shadow_color").val(),y=$(".global_shadow_x").val(),u=$(".global_shadow_y").val(),m=$(".global_shadow_blur").val(),f=$(".global_shadow_thickness").val();change_shadow_global(i,p,b,y,u,m,f);var v=$(".global_border_color").val(),x=$(".global_border_thickness").val(),w=$(".global_border_style").val();change_border_global(i,h,v,x,w),$(`#${id_shadow}`).prop("checked",p),$(`#${id_border}`).prop("checked",h),$(`#${id_shadow_color}`).val(b),$(`#${id_xshadow}`).val(y),$(`#${id_yshadow}`).val(u),$(`#${id_blurshadow}`).val(m),$(`#${id_shadow_thickness}`).val(f),$(`#${id_border_color}`).val(v),$(`#${id_border_thickness}`).val(x),$(`#${id_border_style}`).val(w).trigger("change"),$(`#${id_border}`).val(h),$(`#${id_shadow}`).val(p),$(`#${id6}`).attr("data-shadecolor",b),$(`#${id6}`).attr("data-borderStyle",w),$(`#${id6}`).attr("data-borderThickness",x),$(`#${id6}`).attr("data-borderColor",v),$(`#${id6}`).attr("data-borderon",h),$(`#${id6}`).attr("data-shadowon",p),$(`#${id6}`).attr("data-shadowThick",f),$(`#${id6}`).attr("data-shadowblurry",m),$(`#${id6}`).attr("data-shadowY",u),$(`#${id6}`).attr("data-shadowX",y)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id1).onchange=function(){var t=this.value;let a=id6.replace("card","");var e={};let o={},l=[];if($("#"+a+"gaugeModalRangeSaveButton").each(function(){let{dataValue:t}=returnGaugeColorRange($(this),o);l=t}),NaN!=parseInt($("#"+a+"deltaGauge").val()))e={mode:"gauge+number+delta",delta:{reference:parseInt($("#"+a+"deltaGauge").val())},value:[data.value],gauge:{axis:{range:[null,1.1*[data.value]]},bar:{color:t},steps:l,threshold:{line:{color:$("#"+a+"thresholdColor").val(),width:4},thickness:.75,value:$("#"+a+"threshold").val()}},x:[data.x_axisdata],y:[data.y_axisdata],second_columndata:[data.second_columndata]};else e={value:[data.value],gauge:{axis:{range:[null,1.1*[data.value]]},bar:{color:t},steps:l,threshold:{line:{color:$("#"+a+"thresholdColor").val(),width:4},thickness:.75,value:$("#"+a+"threshold").val()}},x:[data.x_axisdata],y:[data.y_axisdata],second_columndata:[data.second_columndata]};Plotly.restyle(tester,e),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var d=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",d)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),chartResizeable(id6,tester),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close)}if("Bullet_Gauge"===String(graph_subtype)){x_axis=data.x_axis,y_axis=data.y_axis,second_column=data.second_column;var title=y_axis+"-"+data.second_column;modalDataConfig.x_axis=data.x_axis,modalDataConfig.y_axis=data.y_axis,modalDataConfig.second_column=data.second_column,modalDataConfig[title]=title;var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){outerCard.appendTo(`#${plotDict.tabNameID}`);var tab_id=plotDict.tabNameID;outermodalCard.appendTo(`#${plotDict.tabNameID}`),gaugeModal.appendTo(`#${plotDict.tabNameID}`),gaugeModalRange.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);let t=$(`#${id6}`).closest(".tab-content").attr("id").replace("analysisTabContent",""),a=[];if($("#conditionModalRange"+t+"SaveButton").each(function(){let{dataValue:t}=returnGaugeColorRange($(this),[{value:data.value}]);a=t,$("#"+idGaugeModal+"RangeButton").attr("data-value",JSON.stringify(t)),populateGaugeModalRange(idGaugeModal+"Range",t)}),$("#conditionModal"+t+"SaveButton").each(function(){let{dataValue:t,gaugeBarColor:a}=returnGaugeColor($(this),[{value:data.value}]);""!=a&&(color=a),$("#"+idGaugeModal+"Button").attr("data-value",JSON.stringify(t)),$("#"+idGaugeModal+"Button").attr("data-color",color),populateGaugeModal(idGaugeModal,t)}),NaN!=parseInt($("#delta"+t).val())){$("#"+id27).val(parseInt($("#delta"+t).val())).trigger("change"),$("#"+id26).val($("#thresholdColor"+t).val()).trigger("change"),$("#"+id25).val($("#threshold"+t).val()).trigger("change");var trace1={x:data.x_axisdata,y:data.y_axisdata,delta:{reference:parseInt($("#delta"+t).val())},second_columndata:data.second_columndata,value:data.value,title:{text:fieldToVerbose(y_axis,data.mappingDict)+"-"+fieldToVerbose(data.second_column,data.mappingDict)},type:"indicator",mode:"gauge+number+delta",gauge:{axis:{range:[null,1.1*data.value],tickwidth:1,tickcolor:"darkblue"},bar:{color:color},shape:"bullet",steps:a,threshold:{line:{color:$("#thresholdColor"+t).val(),width:4},thickness:.75,value:$("#threshold"+t).val()}}}}else var trace1={x:data.x_axisdata,y:data.y_axisdata,second_columndata:data.second_columndata,value:data.value,title:{text:fieldToVerbose(y_axis,data.mappingDict)+"-"+fieldToVerbose(data.second_column,data.mappingDict)},type:"indicator",mode:"gauge+number",gauge:{axis:{range:[null,1.1*data.value],tickwidth:1,tickcolor:"darkblue"},bar:{color:color},shape:"bullet",steps:a,threshold:{line:{color:$("#thresholdColor"+t).val(),width:4},thickness:.75,value:$("#threshold"+t).val()}}};var dataplot=[trace1],layout={margin:{l:60,r:0,b:0,t:20,pad:1},height:chart_height,width:chart_width,plot_bgcolor:chart_bg_color,paper_bgcolor:chart_bg_color},tester=document.getElementById(id)}else{outerCard.appendTo(`#${data.plotDict.tab_id}`);var tab_id=data.plotDict.tab_id;outermodalCard.appendTo(`#${data.plotDict.tab_id}`),gaugeModal.appendTo(`#${data.plotDict.tab_id}`),gaugeModalRange.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange);var tester=document.getElementById(id),myPlot=document.getElementById(id),dataplot=data.plotDict.data;if(data.plotDict.hasOwnProperty("thresholdConfig")){var threshold1=data.plotDict.thresholdConfig;for(let t=0;t<threshold1.length;t++)if(threshold1[t].hasOwnProperty(data.plotDict.chartDivId)){if(threshold1[t][data.plotDict.chartDivId].hasOwnProperty("delta")&&(NaN!=parseInt(threshold1[t][data.plotDict.chartDivId].delta)&&(dataplot[0].mode="gauge+number+delta",dataplot[0].delta={reference:parseInt(threshold1[t][data.plotDict.chartDivId].delta)}),$("#"+data.plotDict.chartDivId+"threshold").val(threshold1[t][data.plotDict.chartDivId].threshold),$("#"+data.plotDict.chartDivId+"thresholdColor").val(threshold1[t][data.plotDict.chartDivId].color),$("#"+data.plotDict.chartDivId+"deltaGauge").val(threshold1[t][data.plotDict.chartDivId].delta)),threshold1[t][data.plotDict.chartDivId].hasOwnProperty("barColorConfig")){let a=JSON.parse(threshold1[t][data.plotDict.chartDivId].barColorConfig),e=data.plotDict.chartDivId+"gaugeModal";populateGaugeModal(e,a),$("#"+data.plotDict.chartDivId+"gaugeModalButton").attr("data-value",threshold1[t][data.plotDict.chartDivId].barColorConfig)}if(threshold1[t][data.plotDict.chartDivId].hasOwnProperty("barRangeConfig")){let a=JSON.parse(threshold1[t][data.plotDict.chartDivId].barRangeConfig),e=data.plotDict.chartDivId+"gaugeModalRange";populateGaugeModalRange(e,a),$("#"+data.plotDict.chartDivId+"gaugeModalRangeButton").attr("data-value",threshold1[t][data.plotDict.chartDivId].barRangeConfig)}threshold1[t][data.plotDict.chartDivId].hasOwnProperty("barColor")&&$("#"+data.plotDict.chartDivId+"gaugeModalButton").attr("data-color",threshold1[t][data.plotDict.chartDivId].barColor)}}dataplot[0].value=data.value,dataplot[0].gauge.axis.range=[null,1.1*data.value],dataplot[0].x=data.x_axisdata,dataplot[0].y=data.y_axisdata,dataplot[0].second_columndata=data.second_columndata;var layout=data.plotDict.layout}var config={responsive:!0,displaylogo:!1};Plotly.newPlot(tester,dataplot,layout,config),crossFilterlist.push({id:chartDivId,tester:tester,graph_subtype:graph_subtype}),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data));var tabledata=[],tableheaders=[`<b>${fieldToVerbose(data.x_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.y_axis,data.mappingDict)}</b>`,`<b>${fieldToVerbose(data.second_column,data.mappingDict)}</b>`];tabledata.push(data.x_axisdata),tabledata.push(data.y_axisdata),tabledata.push(data.second_columndata);var trace2={domain:{x:[0,1],y:[0,1]},header:{align:"center",values:tableheaders,font:{family:"Arial",size:13,color:["white"]},fill:{color:"darkgoldenrod"}},cells:{align:"center",values:tabledata,font:{family:"Arial",size:13,color:["black"]}},type:"table"},layout2={margin:{l:10,r:10,b:10,t:10,pad:1}},datatable=[trace2];$("#"+id6).find(".bg-arc").css("opacity",.3),$("#"+idGaugeModal+"SaveButton").on("click",function(){var t=document.getElementById(id),a="gauge+number";let e,o=id25.replace("threshold","card"),l=JSON.parse($("#"+o).attr("data-data"));null==$("#"+id27).val()||null==$("#"+id27).val()?e={}:(a="gauge+number+delta",e={reference:parseInt($("#"+id27).val())}),null==$("#"+id25).val()||null==$("#"+id25).val()?l[0].gauge.threshold={}:l[0].gauge.threshold={line:{color:$("#"+id26).val(),width:4},thickness:.75,value:parseInt($("#"+id25).val())};let{dataValue:d,gaugeBarColor:i}=returnGaugeColor($(this),l);l[0].gauge.bar={color:i},$("#"+o.replace("card","")+"gaugeModalButton").attr("data-value",JSON.stringify(d)),$("#"+o.replace("card","")+"gaugeModalButton").attr("data-color",i);var r={mode:a,delta:e,gauge:l[0].gauge};Plotly.restyle(t,r),$("#"+o).attr("data-data",JSON.stringify(l))}),$("#"+idGaugeModal+"RangeSaveButton").on("click",function(){var t=document.getElementById(id),a="gauge+number";let e,o=id25.replace("threshold","card"),l=JSON.parse($("#"+o).attr("data-data"));null==$("#"+id27).val()||null==$("#"+id27).val()?e={}:(a="gauge+number+delta",e={reference:parseInt($("#"+id27).val())}),null==$("#"+id25).val()||null==$("#"+id25).val()?l[0].gauge.threshold={}:l[0].gauge.threshold={line:{color:$("#"+id26).val(),width:4},thickness:.75,value:parseInt($("#"+id25).val())};let{dataValue:d}=returnGaugeColorRange($(this),l);l[0].gauge.steps=d,$("#"+o.replace("card","")+"gaugeModalRangeButton").attr("data-value",JSON.stringify(d));var i={mode:a,delta:e,gauge:l[0].gauge};Plotly.restyle(t,i),$("#"+o).find(".bg-arc").css("opacity",.3),$("#"+o).attr("data-data",JSON.stringify(l))}),$("#"+id25).blur(function(){var t=document.getElementById(id),a="gauge+number";let e,o=id25.replace("threshold","card"),l=JSON.parse($("#"+o).attr("data-data"));null==$("#"+id27).val()||null==$("#"+id27).val()?e={}:(a="gauge+number+delta",e={reference:parseInt($("#"+id27).val())}),null==$(this).val()||null==$(this).val()?l[0].gauge.threshold={}:l[0].gauge.threshold={line:{color:$("#"+id26).val(),width:4},thickness:.75,value:parseInt($(this).val())};var d={mode:a,delta:e,gauge:l[0].gauge};Plotly.restyle(t,d),$("#"+o).attr("data-data",JSON.stringify(l))}),$("#"+id26).change(function(){var t=document.getElementById(id),a="gauge+number";let e,o,l=id26.replace("thresholdColor","card"),d=JSON.parse($("#"+l).attr("data-data"));null==$("#"+id27).val()||null==$("#"+id27).val()?e={}:(a="gauge+number+delta",e={reference:parseInt($("#"+id27).val())}),o=null==$("#"+id25).val()||null==$("#"+id25).val()?void 0:parseInt($("#"+id25).val()),d[0].gauge.threshold={line:{color:$(this).val(),width:4},thickness:.75,value:o};var i={mode:a,delta:e,gauge:d[0].gauge};Plotly.restyle(t,i),$("#"+l).attr("data-data",JSON.stringify(d))}),$("#"+id27).blur(function(){var t,a=document.getElementById(id),e="gauge+number";let o=id27.replace("deltaGauge","card"),l=JSON.parse($("#"+o).attr("data-data"));null==$(this).val()||null==$(this).val()?(t={mode:e,delta:{},gauge:l[0].gauge},l[0].delta={}):(e="gauge+number+delta",t={mode:e,delta:{reference:parseInt($(this).val())},gauge:l[0].gauge},l[0].delta={reference:parseInt($(this).val())}),Plotly.update(a,t),$("#"+o).attr("data-data",JSON.stringify(l))}),"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),document.getElementById(id_tabledownload).onclick=function(){var t=[],a=[`${fieldToVerbose(data.x_axis,data.mappingDict)}`,`${fieldToVerbose(data.y_axis,data.mappingDict)}`,`${fieldToVerbose(data.second_column,data.mappingDict)}`];t.push(a);for(let a=0;a<dataplot[0].x.length;a++){var e=[];e.push(dataplot[0].x[a]),e.push(dataplot[0].y[a]),e.push(dataplot[0].second_columndata[a]),t.push(e)}var o=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),i=URL.createObjectURL(l);d.setAttribute("href",i),d.setAttribute("download",`${data.chartHeader}`+"_data.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},document.getElementById(id_tableshow).onclick=function(){if(datatable[0].cells.values[0]=dataplot[0].x,datatable[0].cells.values[1]=dataplot[0].y,datatable[0].cells.values[2]=dataplot[0].second_columndata,"Table"==document.getElementById(id_tableicon).innerText){document.getElementById(id_tableicon).innerText="Graph",document.getElementById(id).style.display="none",document.getElementById(id_table).style.display="block",$(`#${id_tabledownload}`).css("display","block"),$(`#${id_table_export}`).css("display","block");var t=document.getElementById(id_table);Plotly.newPlot(t,datatable,layout2,config)}else document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none")},$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-globalbg","yes"),$(`#${id6}`).attr("data-bgcolor",plotbg);var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{plotbg=$(`#${id22}`).val();var f=$(`#${id1}`).val();$(`#${id6}`).attr("data-globalbg","no"),$(`#${id6}`).attr("data-bgcolor",plotbg);t=hex2rgb(f);plotbg=hex2rgb(plotbg)}$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var v=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],col="#"+r1+g1+b1;var w=col;w=col;rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);x=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":x[(rgb[1]-rgb[1]%16)/16]+x[rgb[1]%16],g1=isNaN(rgb[2])?"00":x[(rgb[2]-rgb[2]%16)/16]+x[rgb[2]%16],b1=isNaN(rgb[3])?"00":x[(rgb[3]-rgb[3]%16)/16]+x[rgb[3]%16],plot_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(plot_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",plot_col),v.push(w);var k={gauge:{axis:{range:[null,1.1*data.value]},shape:"bullet",bar:{color:w}}};Plotly.restyle(tester,k),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout))}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no"),plotbg=$(".myDiv").css("background-color");var GradientColor=$(".inner-div").css("background-color");$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",GradientColor),$(".global_applyButton").click(function(){plotbg=$(".myDiv").css("background-color");var t=$(".inner-div").css("background-color");if($(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).attr("data-global_ind_color",t),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color");t=$(".inner-div").css("background-color");$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),prevDiv=$(this),layout.plot_bgcolor=plotbg,layout.paper_bgcolor=plotbg;var a=[];dataplot[0].x.length;rgb=t.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],col="#"+r1+g1+b1,rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":e[(rgb[1]-rgb[1]%16)/16]+e[rgb[1]%16],g1=isNaN(rgb[2])?"00":e[(rgb[2]-rgb[2]%16)/16]+e[rgb[2]%16],b1=isNaN(rgb[3])?"00":e[(rgb[3]-rgb[3]%16)/16]+e[rgb[3]%16],bg_col="#"+r1+g1+b1,$(`#${id1}`).val(col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-color",col),$(`#${id6}`).attr("data-config_color",col),$(`#${id6}`).attr("data-bgcolor",bg_col);var o=col;o=col;a.push(o);var l={gauge:{axis:{range:[null,1.1*data.value]},shape:"bullet",bar:{color:o}}};Plotly.restyle(tester,l),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout));var d=document.getElementById(id_header),i=document.getElementById(id6),r=$(".global_header_bgcolor").val();change_header_bgcolor(i,d,r);var n=$(".global_header_color").val();change_header_color(i,d,n);var s=$(".global_header_fontsize").val();change_header_fontsize(i,d,s);var c=$(".global_header_fontweight").val();change_header_fontweight(i,d,c),$(`#${id_header_bgcolor}`).val(r),$(`#${id_header_color}`).val(n),$(`#${id_header_fontsize}`).val(s),$(`#${id_header_fontweight}`).val(c).trigger("change");var _=$(".global_header_fontstyle").val();change_header_fontstyle(i,d,_),$(`#${id_header_fontstyle}`).val(_).trigger("change");var g=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(g).trigger("change"),change_header_alignment(i,d,g),$(`#${id6}`).attr("data-header_alignment",g),$(`#${id6}`).attr("data-header_color",n),$(`#${id6}`).attr("data-header_bgcolor",r),$(`#${id6}`).attr("data-header_fontsize",s),$(`#${id6}`).attr("data-header_fontweight",c);var p=$(".global_shadow").prop("checked"),h=$(".global_border").prop("checked"),b=$(".global_shadow_color").val(),y=$(".global_shadow_x").val(),u=$(".global_shadow_y").val(),m=$(".global_shadow_blur").val(),f=$(".global_shadow_thickness").val();change_shadow_global(i,p,b,y,u,m,f);var v=$(".global_border_color").val(),x=$(".global_border_thickness").val(),w=$(".global_border_style").val();change_border_global(i,h,v,x,w),$(`#${id_shadow}`).prop("checked",p),$(`#${id_border}`).prop("checked",h),$(`#${id_shadow_color}`).val(b),$(`#${id_xshadow}`).val(y),$(`#${id_yshadow}`).val(u),$(`#${id_blurshadow}`).val(m),$(`#${id_shadow_thickness}`).val(f),$(`#${id_border_color}`).val(v),$(`#${id_border_thickness}`).val(x),$(`#${id_border_style}`).val(w).trigger("change"),$(`#${id_border}`).val(h),$(`#${id_shadow}`).val(p),$(`#${id6}`).attr("data-shadecolor",b),$(`#${id6}`).attr("data-borderStyle",w),$(`#${id6}`).attr("data-borderThickness",x),$(`#${id6}`).attr("data-borderColor",v),$(`#${id6}`).attr("data-borderon",h),$(`#${id6}`).attr("data-shadowon",p),$(`#${id6}`).attr("data-shadowThick",f),$(`#${id6}`).attr("data-shadowblurry",m),$(`#${id6}`).attr("data-shadowY",u),$(`#${id6}`).attr("data-shadowX",y)}}),document.getElementById(id22).onchange=function(){var t=dataplot[0].x.length,a=[],e=this.value;for(let o=0;o<t;o++)a.push(e);layout.plot_bgcolor=e,layout.paper_bgcolor=e,Plotly.relayout(tester,layout),$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-bgcolor",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color),$(`#${id6}`).attr("data-config_color",color);var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){
ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id1).onchange=function(){var t=this.value,a={gauge:{axis:{range:[null,1.1*data.value]},shape:"bullet",bar:{color:t}}};Plotly.restyle(tester,a),$(`#${id6}`).attr("data-data",JSON.stringify(tester.data)),color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var e=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",e)},color=$(`#${id1}`).val(),$(`#${id6}`).attr("data-color",color);var config_color=$(`#${id1}`).val();$(`#${id6}`).attr("data-config_color",config_color),document.getElementById(id_filter_button).onclick=function(){document.getElementById(id7).style.display="none";var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),chartResizeable(id6,tester)}if("Table"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict)outerCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),conditionalModal.appendTo(`#${plotDict.tabNameID}`),columnAlignmentModal.appendTo(`#${plotDict.tabNameID}`),FormattersModal.appendTo(`#${plotDict.tabNameID}`),freezeModal.appendTo(`#${plotDict.tabNameID}`),outermodalCard.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange),$(`#${id6}`).attr("data-second_column",data.second_column);else{var tab_height=data.plotDict.height-55+"px";outerCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),conditionalModal.appendTo(`#${data.plotDict.tab_id}`),columnAlignmentModal.appendTo(`#${data.plotDict.tab_id}`),FormattersModal.appendTo(`#${data.plotDict.tab_id}`),freezeModal.appendTo(`#${data.plotDict.tab_id}`),outermodalCard.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange),$(`#${id6}`).attr("data-filter_columns",plotDict.filters)}function setColumnAlignmentOptions(t){var a=t[0].global_config;$(document.getElementById(id_selectGlobalHeaderColumnAlignment)).val(a.globalHeaderColumnAlignment).trigger("change"),$(document.getElementById(id_selectGlobalContentColumnAlignment)).val(a.globalContentColumnAlignment).trigger("change");for(var e=t[0].columns_config,o=0;o<e.length;o++){var l=e[o],d=l.columnName,i=l.header,r=l.content;$(`strong[data-value="${d}"]`).length||$(document.getElementById(id_ColumnAlignmentContainer)).append(`\n                      <div class="row col-12 my-1">\n                        <div class="col-4">\n                          <span class="removeAlignment" style="color:var(--primary,var(--primary-color));cursor: pointer;">&times;</span> &nbsp; <strong data-value="${d}">${d}</strong>\n                        </div>\n                        <div class="col-4">\n                          <select class="select2 form-control header" data-value="${d}">\n                            <option value="left">Left</option>\n                            <option value="center">Center</option>\n                            <option value="right">Right</option>\n                          </select>\n                        </div>\n                        <div class="col-4">\n                          <select class="select2 form-control content" data-value="${d}">\n                            <option value="left">Left</option>\n                            <option value="center">Center</option>\n                            <option value="right">Right</option>\n                          </select>\n                        </div>\n                      </div>\n                    `),$(`.header[data-value="${d}"]`).val(i).trigger("change"),$(`.content[data-value="${d}"]`).val(r).trigger("change"),$(".select2").select2(),$(document.getElementById(id_ColumnAlignmentContainer)).find(".row").eq(-1).find(".removeAlignment").on("click",function(){$(this).parent().parent().remove()})}}function loadFormatters(t){for(var a=0;a<t.length;a++){var e=t[a],o=e.formatter,l="";"number"===o?l=`${numberOptions}`:"currency"===o?l=`${currencyOptions1}`:"date"===o&&(l=`${dateOptions}`);var d=`\n                    <div class="d-flex justify-content-between align-items-center formatterBody my-2">\n                      <div class="row" style="width: 90%;">\n                        <div class="col">\n                          <label for="columnsSelect">Select Columns:</label>\n                          <select name="columns" class="select2 form-control formattersSelect columnsSelect">\n                            ${columnOptions}\n                          </select>\n                        </div>\n                        <div class="col">\n                          <label for="formatterSelect">Select Formatter:</label>\n                          <select name="formatter" class="select2 form-control formattersSelect formatterSelect">\n                            ${formatterOptions}\n                          </select>\n                        </div>\n                        <div class="col">\n                          <label for="operationSelect">Select Operation:</label>\n                          <select name="operation" class="select2 form-control formattersSelect operationSelect">\n                            ${l}\n                          </select>\n                        </div>\n                      </div>\n                      <div class="row" style="width: 10%;">\n                        <div class="col">\n                          <i class="fa-solid fa-xmark fa-2x removeFormatter" data-toggle="tooltip" title="Remove Formatter"></i>\n                        </div>\n                      </div>\n                    </div>\n                  `,i=document.getElementById(id_FormattersModal_container);i.insertAdjacentHTML("beforeend",d),$(".formatterBody").find("select.formattersSelect").select2();var r=$(".formatterBody").last().find(".columnsSelect"),n=$(".formatterBody").last().find(".formatterSelect"),s=$(".formatterBody").last().find(".operationSelect");r.val(e.column).trigger("change.select2"),n.val(e.formatter).trigger("change.select2"),s.val(e.operation).trigger("change.select2")}}function applyColumnFormatters(t,a){function e(){$.fn.DataTable.isDataTable("#"+a)&&i.destroy();var t=i.settings().init().columns;t.forEach(function(t,a){t.render=null})}function o(t,a){var e=new Date(t);if(isNaN(e.getTime()))return t;var o=e.getDate(),l=e.getMonth()+1,d=e.getFullYear(),i=a.replace(/%d/g,("0"+o).slice(-2)).replace(/%m/g,("0"+l).slice(-2)).replace(/%Y/g,d).replace(/%y/g,d.toString().slice(-2)).replace(/%B/g,new Intl.DateTimeFormat("en-US",{month:"long"}).format(e));return i}var l="",d="",i=$("#"+a).DataTable();e();var r=$("#"+a+" thead tr"),n=[];r.find("th").each(function(){n.push($(this).text())});var s=n.map(function(a){var e=t.find(function(t){return t.column===a});if(e){var i;switch(e.formatter){case"number":i=function(t,a,e){return"display"===a?parseFloat(t.replace(/[^0-9.-]/g,"")).toLocaleString():t};break;case"currency":i=function(t,a,o){if("display"===a){var i=e.operation,r=l.indexOf(i),n=d[r];return n+" "+t.replace(/[^0-9.-]/g,"").toLocaleString()}return t};break;case"date":i=function(t,a,l){if("display"===a||"filter"===a){var d=e.operation,i=o(t,d);return i}return t};break;default:i=null}return{data:a,render:i}}return{data:a}});$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{operation:"get_currency_list"},type:"POST",dataType:"json",success:function(t){l=t.country_list,d=t.curr_list,$.fn.DataTable.isDataTable("#"+a)&&$("#"+a).DataTable().destroy(),i=$("#"+a).DataTable({columns:s,language:{decimal:".",thousands:","},fixedColumns:!0}),i.draw()},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}closeConditionModal(id_condition_close),document.getElementById(`freeze_pane_close_${chartDivId}`).onclick=function(){var t=document.getElementById(`freeze_pane_close_${chartDivId}`).parentElement.parentElement.parentElement.id;document.getElementById(t).style.display="none",$(".freezerunCheckbox").prop("checked",!1),$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id_HighlightColHeaders_checkbox).onclick=function(){var t=document.getElementById(id_HighlightColHeaders_div);this.checked?t.style.display="block":t.style.display="none";let a=data.x_axis.map(t=>({data:fieldToVerbose(t,data.mappingDict)})),e={};data.plotDict&&data.plotDict.highlightcolumnheaderscolorlist&&"undefined"!==data.plotDict.highlightcolumnheaderscolorlist?(e=JSON.parse(data.plotDict&&data.plotDict.highlightcolumnheaderscolorlist),e.allColumns?(allColumnHeadersBG_color=e.allColumns.bgColor,allColumnHeadersFont_color=e.allColumns.fontColor):(allColumnHeadersBG_color="#ffffff",allColumnHeadersFont_color="#000000")):(allColumnHeadersBG_color="#ffffff",allColumnHeadersFont_color="000000");let o=`<li value="allColumnHeadersBG" class="my-2 btn btn-sm btn-light col d-flex justify-content-center align-items-center"><span style="width: 50%; text-align: center;">All Columns Headers</span> <span style="width: 25%;display: flex;flex-direction: column;justify-content: center;align-items: center;"><label for="allColumnHeadersBG_color" style="    font-weight: unset !important;">Background</label><input type="color" id="allColumnHeadersBG_color" value="${allColumnHeadersBG_color}"></span><span style="width: 25%;display: flex;flex-direction: column;justify-content: center;align-items: center;"><label for="allColumnHeadersFont_color" style="font-weight: unset !important;">Font</label><input type="color" id="allColumnHeadersFont_color" value="${allColumnHeadersFont_color}"></span></li>`;a.forEach(t=>{let a,l;e[t.data]&&(a=e[t.data].bgColor,l=e[t.data].fontColor),o+=a&&l?`<li value="${t.data}ColumnHeaderBG" class="my-2 btn btn-sm btn-light col d-flex justify-content-center align-items-center">\n                      <span style="width: 50%; text-align: center;">${t.data}</span>\n                      <span style="width: 25%;display: flex;flex-direction: column;justify-content: center;align-items: center;">\n                        <label for="${t.data}ColumnHeaderBG_color" style="font-weight: unset !important;">Background</label>\n                        <input type="color" id="${t.data}ColumnHeaderBG_color" class="ColumnHeaderBG_color" value="${a}">\n                      </span>\n                      <span style="width: 25%;display: flex;flex-direction: column;justify-content: center;align-items: center;">\n                        <label for="${t.data}ColumnHeaderFont_color" style="font-weight: unset !important;">Font</label>\n                        <input type="color" id="${t.data}ColumnHeaderFont_color" class="ColumnHeaderFont_color" value="${l}">\n                      </span>\n                    </li>`:`<li value="${t.data}ColumnHeaderBG"  class="my-2 btn btn-sm btn-light col d-flex justify-content-center align-items-center">\n                      <span style="width: 50%; text-align: center;">${t.data}</span>\n                      <span style="width: 50%; text-align: center;">\n                        <label for="${t.data}ColumnHeaderBG_color" style="font-weight: unset !important;">Background</label>\n                        <input type="color" id="${t.data}ColumnHeaderBG_color" class="ColumnHeaderBG_color" value="#ffffff"></span>\n                      <span style="width: 25%; text-align: center;">\n                        <label for="${t.data}ColumnHeaderFont_color" style="font-weight: unset !important;" >Font</label>\n                        <input type="color" id="${t.data}ColumnHeaderFont_color" class="ColumnHeaderFont_color" value="#000000"></span>\n                    </li>`}),document.getElementById(id_HighlightColHeaders_ul).innerHTML=o;let l=document.getElementById(id_HighlightColHeaders_ul);document.getElementById("allColumnHeadersBG_color").addEventListener("change",function(){let t=l.querySelectorAll(".ColumnHeaderBG_color"),a=this.value;t.forEach(function(t){t.value=a})}),document.getElementById("allColumnHeadersFont_color").addEventListener("change",function(){let t=l.querySelectorAll(".ColumnHeaderFont_color"),a=this.value;t.forEach(function(t){t.value=a})})},document.getElementById(id_saveBtn_HighlightColHeaders).onclick=function(){let a=document.getElementById(id_HighlightColHeaders_ul).getElementsByTagName("li"),e={};e.allColumns={bgColor:document.getElementById("allColumnHeadersBG_color").value,fontColor:document.getElementById("allColumnHeadersFont_color").value};for(let t=0;t<a.length;t++){let o=a[t].querySelector(".ColumnHeaderBG_color"),l=a[t].querySelector(".ColumnHeaderFont_color");if(o&&l){let d=a[t].getAttribute("value").replace("ColumnHeaderBG",""),i=o.value,r=l.value;e[d]={bgColor:i,fontColor:r}}}$(`#${id6}`).attr("highlightcolumnheaderscolorlist",JSON.stringify(e)),t=e,$(`#table_example${id}`).DataTable().draw()},document.getElementById(id_columnAlignmentModal_edit).onclick=function(){var t=document.getElementById(id_columnAlignmentModal).style.display;if("none"==t){document.getElementById(id7).style.display="none",document.getElementById(id_columnAlignmentModal).style.display="block";let t=data.x_axis.map(t=>({data:fieldToVerbose(t,data.mappingDict)}));if(document.getElementById(id_selectColumnAlignment).innerHTML='<option value="">Select Column</option>'+t.map(t=>`<option value="${t.data}">${t.data}</option>`).join(""),data.plotDict&&data.plotDict.columnAlignmentSelectedOptions&&"undefined"!==data.plotDict.columnAlignmentSelectedOptions){let t=JSON.parse(data.plotDict.columnAlignmentSelectedOptions);setColumnAlignmentOptions(t)}selectedOptions&&setColumnAlignmentOptions(selectedOptions)}},$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{operation:"get_currency_list"},type:"POST",dataType:"json",success:function(t){var a=t.country_list,e=t.curr_list;currencyOptions1=a.map((t,a)=>'<option value="'+t+'" currencySymbol="'+e[a]+'">'+t+" ("+e[a]+")</option>").join(""),$(".formattersSelect").select2()},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}}),document.getElementById(id_Formatters_edit).onclick=function(){var t=$("#"+id_FormattersModal).css("display");if("none"===t){$("#"+id7).hide(),$("#"+id_FormattersModal).show();var a=data.x_axis.map(t=>fieldToVerbose(t,data.mappingDict)).map(t=>{var a=data.datatype_list.find(a=>a.column_name===t);return a?a.field_name:null}),e=data.datatype_list.filter(t=>a.includes(t.field_name)),o=e.map(t=>({columnName:t.column_name,columnDataType:t.data_type,columnFieldName:t.field_name}));columnOptions=o.map(t=>'<option value="'+t.columnName+'" data_type="'+t.columnDataType+'" field_name="'+t.columnFieldName+'">'+t.columnName+"</option>").join(""),formatterOptions='<option value="number">Number</option><option value="currency">Currency</option><option value="date">Date</option>',numberOptions='<option value="1000">1000</option>';var l=`${(new Date).getDate()} ${(new Date).toLocaleString("default",{month:"long"})} ${(new Date).getFullYear()}`;if(dateOptions='<option value=" " disabled selected> None </option><option value="%Y-%m-%d" id="dformat1">YYYY-MM-DD</option><option value="%d-%m-%Y" id="dformat2">DD-MM-YYYY</option><option value="%m-%d-%Y" id="dformat3">MM-DD-YYYY</option>'+`<option value="%d %B %Y" id="dformat4">${l}</option>`,$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{operation:"get_currency_list"},type:"POST",dataType:"json",success:function(t){var a=t.country_list,e=t.curr_list;currencyOptions=a.map((t,a)=>'<option value="'+t+'" currencySymbol="'+e[a]+'">'+t+" ("+e[a]+")</option>").join(""),$(".formattersSelect").select2()},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}}),data.plotDict&&data.plotDict.FormattersConfiguration&&"undefined"!==data.plotDict.FormattersConfiguration){var d=data.plotDict.FormattersConfiguration;$(".formatterBody").length||loadFormatters(JSON.parse(d))}}},document.getElementById(id_addFormatter).onclick=function(){var t=`\n                  <div class="d-flex justify-content-between align-items-center formatterBody my-2">\n                    <div class="row" style="width: 90%;">\n                      <div class="col">\n                        <label for="columnsSelect">Select Columns:</label>\n                        <select name="columns" class="select2 form-control formattersSelect columnsSelect">\n                          <option disabled selected></option>\n                          ${columnOptions}\n                        </select>\n                      </div>\n                      <div class="col">\n                        <label for="formatterSelect">Select Formatter:</label>\n                        <select name="formatter" class="select2 form-control formattersSelect formatterSelect">\n                          <option disabled selected></option>\n                          ${formatterOptions}\n                        </select>\n                      </div>\n                      <div class="col">\n                        <label for="operationSelect">Select Operation:</label>\n                        <select name="operation" class="select2 form-control formattersSelect operationSelect">\n                          <option disabled selected></option>\n                        </select>\n                      </div>\n                    </div>\n                    <div class="row" style="width: 10%;">\n                      <div class="col">\n                        <i class="fa-solid fa-xmark fa-2x removeFormatter" data-toggle="tooltip" title="Remove Formatter"></i>\n                      </div>\n                    </div>\n                  </div>\n                `,a=document.getElementById(id_FormattersModal_container);a.insertAdjacentHTML("beforeend",t);var e=$(a).find(".formatterBody").slice(-1),o=a.querySelectorAll(".columnsSelect");o.forEach(function(t){""!=t.value&&$(e).find(".columnsSelect").find(`[value='${t.value}']`).attr("disabled","")}),$(".formatterBody").find("select.formattersSelect").select2()},$(document).off("change",".formatterBody .formatterSelect").on("change",".formatterBody .formatterSelect",function(){var t=$(this),a=t.val(),e=t.closest(".formatterBody").find(".columnsSelect option:selected").attr("data_type");const o=["IntegerField","FloatField","DoubleField","DecimalField","BigIntegerField","BigDecimalField","NumericField"];var l="<option disabled selected></option>";if("DateField"===e&&("number"===a||"currency"===a))return Swal.fire({icon:"error",text:"Error! Cannot be applied for this column. Please try again."}),void t.val(null).trigger("change.select2");if("DateField"===e)l+=dateOptions;else if(o.includes(e)){if("number"===a)l+=numberOptions;else if("currency"===a)l+=currencyOptions;else if("date"===a)return Swal.fire({icon:"error",text:"Error! Cannot be applied for this column. Please try again."}),void t.val(null).trigger("change.select2")}else Swal.fire({icon:"error",text:"Error! Cannot be applied for this column. Please try again."}),t.val(null).trigger("change.select2");t.closest(".formatterBody").find(".operationSelect").html(l)}),$(document).off("change",".formatterBody .columnsSelect").on("change",".formatterBody .columnsSelect",function(){$(this).closest(".formatterBody").find(".formatterSelect").val(null).trigger("change.select2"),$(this).closest(".formatterBody").find(".operationSelect").val(null).trigger("change.select2")}),$(document).on("click","#"+id_FormattersModal+" .removeFormatter",function(){$(this).closest(".formatterBody").remove()}),document.getElementById(id_FormattersModal_config).onclick=function(){var t=document.getElementsByClassName("formatterBody");formatterObjs=[];for(var a=0;a<t.length;a++){var e=t[a],o=e.querySelector(".columnsSelect").value,l=e.querySelector(".formatterSelect").value,d=e.querySelector(".operationSelect").value;if(""!==o&&""!==l&&""!==d){var i={column:o,formatter:l,operation:d};formatterObjs.push(i)}}$("#"+id6).attr("data-formatters_config_table",JSON.stringify(formatterObjs));var r="table_example"+id;applyColumnFormatters(formatterObjs,r),document.getElementById(id_FormattersModal).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id_FormattersModal_close).onclick=function(){document.getElementById(id_FormattersModal).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id_closeColumnAlignmentButton).onclick=function(){document.getElementById(id_columnAlignmentModal).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},$(document.getElementById(id_selectColumnAlignment)).off("select2:select").on("select2:select",function(t){let a=t.params.data,e=a.id,o=a.text,l=!1;$(document.getElementById(id_ColumnAlignmentContainer)).find(".row strong").each(function(){if($(this).data("value")===e)return l=!0,!1}),l||($(document.getElementById(id_ColumnAlignmentContainer)).append(`\n                    <div class="row col-12 my-1">\n                      <div class="col-4">\n                        <span class="removeAlignment" style="color:var(--primary,var(--primary-color));cursor: pointer;">&times;</span> &nbsp; <strong data-value="${e}">${o}</strong>\n                      </div>\n                      <div class="col-4">\n                        <select class="select2 form-control header" style="width: 100%;">\n                          <option value="left">Left</option>\n                          <option value="center" selected>Center</option>\n                          <option value="right">Right</option>\n                        </select>\n                      </div>\n                      <div class="col-4">\n                        <select class="select2 form-control content" style="width: 100%;">\n                          <option value="left">Left</option>\n                          <option value="center" selected>Center</option>\n                          <option value="right">Right</option>\n                        </select>\n                      </div>\n                    </div>\n                  `),$(document.getElementById(id_ColumnAlignmentContainer)).find(".row").eq(-1).find(".select2").select2(),$(document.getElementById(id_ColumnAlignmentContainer)).find(".row").eq(-1).find(".removeAlignment").on("click",function(){$(this).parent().parent().remove()}))}),document.getElementById(id_applyColumnAlignmentButton).onclick=function(){let t=[];$(document.getElementById(id_ColumnAlignmentContainer)).find(".row").each(function(){let a=$(this).find("strong").text(),e=$(this).find(".header").val(),o=$(this).find(".content").val();t.push({columnName:a,header:e,content:o})}),selectedOptions=[{global_config:{globalHeaderColumnAlignment:$(document.getElementById(id_selectGlobalHeaderColumnAlignment)).val(),globalContentColumnAlignment:$(document.getElementById(id_selectGlobalContentColumnAlignment)).val()},columns_config:t}],$(`#${id6}`).attr("data-column_alignment_table",JSON.stringify(selectedOptions));let a=$(`#table_example${id}`).DataTable();a.columns().header().each(function(t){let e=a.column(t).index(),o=selectedOptions[0].columns_config.find(t=>t.columnName===a.column(e).header().textContent),l=selectedOptions[0].global_config.globalHeaderColumnAlignment;$(t).removeClass("dt-left dt-center dt-right"),$(t).addClass(`dt-${o?o.header:l}`)}),a.columns().nodes().each(function(t){let e=a.cell(t).index().column,o=selectedOptions[0].columns_config.find(t=>t.columnName===a.column(e).header().textContent),l=selectedOptions[0].global_config.globalContentColumnAlignment;$(t).removeClass("dt-left dt-center dt-right"),$(t).addClass(`dt-${o?o.content:l}`)}),a.draw(),document.getElementById(id_columnAlignmentModal).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},document.getElementById(id_freeze_pane).onclick=function(){var t=document.getElementById(`freeze_pane_modal_${chartDivId}`).style.display;"none"==t?(document.getElementById(id7).style.display="none",document.getElementById(`freeze_pane_modal_${chartDivId}`).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):document.getElementById(`freeze_pane_modal_${chartDivId}`).style.display="none"},$(`#${id6}`).attr("data-operation",data.operation),$(`#${id_tableshow}`).css("display","none"),$(`#${id6}`).find(".graphcontainerdiv").append(`<table id="table_example${id}" class="display compact analysisWraptext" style="width:100%;height:100%;">\n                  <thead>\n                    <tr>  \n                    </tr>\n                  </thead>\n                  <tbody>\n                  </tbody>\n                </table>`);for(var column_names=[],i=0;i<data.x_axis.length;i++)column_names.push({data:fieldToVerbose(data.x_axis[i],data.mappingDict)});var thead=$(`#table_example${id}`).find("thead tr");for(let t=0;t<column_names.length;t++)$(`<th>${column_names[t].data}</th>`).appendTo(thead);for(var mappingDict=data.mappingDict,i=0;i<data.conditional_table.length;i++)for(const[t,a]of Object.entries(column_names))a.data==fieldToVerbose(data.conditional_table[i].column_name,mappingDict)&&(data.conditional_table[i].td_val=parseInt(t));var conditional_data=data.conditional_table,conditional_string='<div class="input_columns_value_dict_edit" style="display:none">';for(const t in data.datatype_list)conditional_string+=` <option value= ${data.datatype_list[t].field_name} data-datatype=${data.datatype_list[t].data_type}>${data.datatype_list[t].column_name}</option>`;conditional_string+="</div>",conditional_string+='<div class="conditional_body_edit" style="margin-top:1em;width: 100%; display:flex">\n                          <div class="col-3">\n                          <p style="font-weight: bold;">Select column:</p>\n                          <select class="select2 form-control conditional_column_name_edit">\n                              <option value="" selected disabled>------------</option>\n                          ';for(const t in data.datatype_list)conditional_string+=` <option value= ${data.datatype_list[t].field_name} data-datatype=${data.datatype_list[t].data_type}>${data.datatype_list[t].column_name}</option>`;if(conditional_string+='</select>\n                          </div>\n                          <div class="col-3">\n                          <p style="font-weight: bold;">Select condition:</p>\n                          <select class="select2 form-control conditional_condition_edit">',data.conditional_table.length>0?"CharField"==data.conditional_table[0].column_datatype?conditional_string+='<option value="Equal to">Equal to</option><option value="Not equal to">Not equal to</option><option value="In">In</option><option value="Starts with">Starts with</option><option value="Ends with">Ends with</option><option value="Contains">Contains</option>':"IntegerField"==data.conditional_table[0].column_datatype||"BigIntegerField"==data.conditional_table[0].column_datatype||"FloatField"==data.conditional_table[0].column_datatype||"AutoField"==data.conditional_table[0].column_datatype?conditional_string+='<option value="Greater than">Greater than</option><option value="Smaller than">Smaller than</option><option value="Equal to">Equal to</option><option value="Not equal to">Not equal to</option>':"DateField"==data.conditional_table[0].column_datatype||"DateTimeField"==data.conditional_table[0].column_datatype?conditional_string+='<option value="Greater than">Greater than</option><option value="Smaller than">Smaller than</option><option value="Equal to">Equal to</option><option value="Not equal to">Not equal to</option>':conditional_string+='<option value="Greater than">Greater than</option><option value="Smaller than">Smaller than</option><option value="Equal to">Equal to</option><option value="Not equal to">Not equal to</option><option value="In">In</option><option value="Starts with">Starts with</option><option value="Ends with">Ends with</option><option value="Contains">Contains</option>':conditional_string+='\n                            <option value="" disabled selected>-------------------</option>\n                              <option value="Greater than">Greater than</option>\n                              <option value="Smaller than">Smaller than</option>\n                              <option value="Equal to">Equal to</option>\n                              <option value="Not equal to">Not equal to</option>\n                              <option value="In">In</option>\n                              <option value="Starts with">Starts with</option>\n                              <option value="Contains">Contains</option>\n                              <option value="Ends with">Ends with</option>',conditional_string+=' </select>\n                          </div>\n                          <div class="col-3 conditional_input_value_edit">\n                          <p style="font-weight: bold;">Select value:</p>\n                          <div class="conditional_format_value_input_edit">',
data.conditional_table.length>0)if("Equal to"==data.conditional_table[0].column_condition)"DateField"==data.conditional_table[0].column_datatype?conditional_string+=`<input type="date" value="${data.conditional_table[0].condition_value}" class="conditional_value_edit" ></input>`:"DateTimeField"==data.conditional_table[0].column_datatype?conditional_string+=`<input type="datetime-local" value="${data.conditional_table[0].condition_value}" style="width:11em;" class="conditional_value_edit"></input>`:conditional_string+=`<select class="select2 form-control select2_condition_class conditional_value_edit" required>\n                                                  <option selected value="${data.conditional_table[0].condition_value}">${data.conditional_table[0].condition_value}</option>\n                                              </select>`;else if("Not equal to"==data.conditional_table[0].column_condition)"DateField"==data.conditional_table[0].column_datatype?conditional_string+=`<input type="date" value="${data.conditional_table[0].condition_value}" class="conditional_value_edit" ></input>`:"DateTimeField"==data.conditional_table[0].column_datatype?conditional_string+=`<input type="datetime-local" value="${data.conditional_table[0].condition_value}" style="width:11em;" class="conditional_value_edit"></input>`:conditional_string+=`<select class="select2 form-control select2_condition_class conditional_value_edit" required>\n                                          <option selected value="${data.conditional_table[0].condition_value}">${data.conditional_table[0].condition_value}</option>\n                                      </select>`;else if("Starts with"==data.conditional_table[0].column_condition||"Ends with"==data.conditional_table[0].column_condition||"Contains"==data.conditional_table[0].column_condition)conditional_string+=`<select class="select2 form-control select2_condition_class conditional_value_edit" required>\n                                          <option selected value="${data.conditional_table[0].condition_value}">${data.conditional_table[0].condition_value}</option>\n                                      </select>`;else if("In"==data.conditional_table[0].column_condition){conditional_string+='<select class="select2 select2_condition_class conditional_value_edit form-control" multiple required>';for(var j=0;j<data.conditional_table[0].condition_value.length;j++)conditional_string+=`<option value="${data.conditional_table[0].condition_value[j]}" selected>${data.conditional_table[0].condition_value[j]}</option>`;conditional_string+="</select>"}else"Greater than"==data.conditional_table[0].column_condition||"Smaller than"==data.conditional_table[0].column_condition?"DateField"==data.conditional_table[0].column_datatype?conditional_string+=`<input type="date" value="${data.conditional_table[0].condition_value}" class="conditional_value_edit"></input>`:"DateTimeField"==data.conditional_table[0].column_datatype?conditional_string+=`<input type="datetime-local" value="${data.conditional_table[0].condition_value}" style="width:11em;" class="conditional_value_edit"></input>`:conditional_string+=`<input type = "number" style="width:11em;height:2em;" class="conditional_value_edit" value="${data.conditional_table[0].condition_value}"></input>`:conditional_string+=`<select class="select2 form-control select2_condition_class conditional_value_edit" required>\n                                      <option selected value="${data.conditional_table[0].condition_value}">${data.conditional_table[0].condition_value}</option>\n                                  </select>`;else conditional_string+='<select class="select2 form-control select2_condition_class" required>\n                          </select>';conditional_string+='</div>\n                          </div>\n                          <div class="col-2">\n                          <p style="font-weight: bold;">Select color:</p>',data.conditional_table.length>0?conditional_string+=`<input type="color" class="form-control conditional_color_input_edit" data-css="background-color" value="${data.conditional_table[0].condition_color}" >`:conditional_string+='<input type="color" class="form-control conditional_color_input_edit" data-css="background-color" value="#ffffff" >',conditional_string+='</div>\n                          <div class="col-1">\n                            <i class="fas fa-plus add_conditional_parameter_edit" data-toggle="tooltip" title="Add condition" style="cursor:pointer;padding-top:3.4em;"></i> </i>\n                          </div> \n                      \n                      </div>';for(var i=1;i<data.conditional_table.length;i++){null==data.conditional_table[i].condition_value&&(data.conditional_table[i].condition_value=""),conditional_string+='\n                          <div class="conditional_body_edit" style="margin-top:1em;width: 100%; display:flex">\n                                  <div class="col-3">\n                                  <select class="select2 form-control conditional_column_name_edit">';for(const t in data.datatype_list)conditional_string+=`<option value= ${data.datatype_list[t].field_name} data-datatype=${data.datatype_list[t].data_type}>${data.datatype_list[t].column_name}</option>`;if(conditional_string+='</select>\n                                  </div>\n                                  <div class="col-3">',conditional_string+=' <select class="select2 form-control conditional_condition_edit">',"CharField"==data.conditional_table[i].column_datatype?conditional_string+='<option value="Equal to">Equal to</option><option value="Not equal to">Not equal to</option><option value="In">In</option><option value="Starts with">Starts with</option><option value="Ends with">Ends with</option><option value="Contains">Contains</option>':"IntegerField"==data.conditional_table[i].column_datatype||"BigIntegerField"==data.conditional_table[i].column_datatype||"FloatField"==data.conditional_table[i].column_datatype||"AutoField"==data.conditional_table[i].column_datatype?conditional_string+='<option value="Greater than">Greater than</option><option value="Smaller than">Smaller than</option><option value="Equal to">Equal to</option><option value="Not equal to">Not equal to</option>':"DateField"==data.conditional_table[i].column_datatype||"DateTimeField"==data.conditional_table[i].column_datatype?conditional_string+='<option value="Greater than">Greater than</option><option value="Smaller than">Smaller than</option><option value="Equal to">Equal to</option><option value="Not equal to">Not equal to</option>':conditional_string+='<option value="Greater than">Greater than</option><option value="Smaller than">Smaller than</option><option value="Equal to">Equal to</option><option value="Not equal to">Not equal to</option><option value="In">In</option><option value="Starts with">Starts with</option><option value="Ends with">Ends with</option><option value="Contains">Contains</option>',conditional_string+=' </select>\n                                  </div>\n                                  <div class="col-3 conditional_input_value_edit">\n                                  <div class="conditional_format_value_input_edit">',"Equal to"==data.conditional_table[i].column_condition)"DateField"==data.conditional_table[i].column_datatype?conditional_string+=`<input type="date" value="${data.conditional_table[i].condition_value}" class="conditional_value_edit" ></input>`:"DateTimeField"==data.conditional_table[i].column_datatype?conditional_string+=`<<input type="datetime-local" value="${data.conditional_table[i].condition_value}" style="width:11em;" class="conditional_value_edit"></input>`:conditional_string+=`<select class="select2 form-control select2_condition_class conditional_value_edit" required>\n                                            <option selected value="${data.conditional_table[i].condition_value}">${data.conditional_table[i].condition_value}</option>\n                                          </select>`;else if("Not equal to"==data.conditional_table[i].column_condition)"DateField"==data.conditional_table[i].column_datatype?conditional_string+=`<input type="date" value="${data.conditional_table[i].condition_value}" class="conditional_value_edit" ></input>`:"DateTimeField"==data.conditional_table[i].column_datatype?conditional_string+=`<input type="datetime-local" value="${data.conditional_table[i].condition_value}" style="width:11em;" class="conditional_value_edit"></input>`:conditional_string+=`<select class="select2 form-control select2_condition_class conditional_value_edit" required>\n                                            <option selected value="${data.conditional_table[i].condition_value}">${data.conditional_table[i].condition_value}</option>\n                                          </select>`;else if("Starts with"==data.conditional_table[i].column_condition||"Ends with"==data.conditional_table[i].column_condition||"Contains"==data.conditional_table[i].column_condition)conditional_string+=`<select class="select2 form-control select2_condition_class conditional_value_edit" required>\n                                          <option selected value="${data.conditional_table[i].condition_value}">${data.conditional_table[i].condition_value}</option>\n                                        </select>`;else if("In"==data.conditional_table[i].column_condition){conditional_string+='<select class="select2 select2_condition_class conditional_value_edit form-control" multiple required>';for(var j=0;j<data.conditional_table[i].condition_value.length;j++)conditional_string+=`<option value="${data.conditional_table[i].condition_value[j]}" selected>${data.conditional_table[i].condition_value[j]}</option>`;conditional_string+="</select>"}else"Greater than"==data.conditional_table[i].column_condition||"Smaller than"==data.conditional_table[i].column_condition?"DateField"==data.conditional_table[i].column_datatype?conditional_string+=`<input type="date" value="${data.conditional_table[i].condition_value}" class="conditional_value_edit"></input>`:"DateTimeField"==data.conditional_table[i].column_datatype?conditional_string+=`<input type="datetime-local" value="${data.conditional_table[i].condition_value}" style="width:11em;" class="conditional_value_edit"></input>`:conditional_string+=`<input type = "number" style="width:11em;height:2em;" class="conditional_value_edit" value="${data.conditional_table[i].condition_value}"></input>`:conditional_string+=`<select class="select2 form-control select2_condition_class conditional_value_edit" required>\n                                      <option selected value="${data.conditional_table[i].condition_value}">${data.conditional_table[i].condition_value}</option>\n                                    </select>`;conditional_string+=`\n                                  </div>\n                                  </div>\n                                  <div class="col-2">\n                                  <input type="color" class="form-control conditional_color_input_edit" data-css="background-color" value="${data.conditional_table[i].condition_color}" >\n                                  </div>\n                                  <div class="col-1">\n                                      <i class="fa fa-times remove_conditional_parameter_edit" data-toggle="tooltip" title="Remove condition" style="cursor:pointer;margin-top:0.7em;"></i> </i>\n                                  </div> \n                                  </div>\n                      `}$(`#${id_condition_container}`).append(conditional_string),$(document).ready(function(){$(".select2").select2(),$(".select2_condition_class").select2({tags:!0})}),data.conditional_table.length>0&&($(`#${id_condition_container}`).find(".conditional_body_edit").find(".conditional_condition_edit").each(function(t){$(this).val(conditional_data[t].column_condition).trigger("change")}),$(`#${id_condition_container}`).find(".conditional_body_edit").find(".conditional_column_name_edit").each(function(t){$(this).val(conditional_data[t].column_name).trigger("change")})),$(".select2").select2(),$(".select2_condition_class").select2({tags:!0}),$(".remove_conditional_parameter_edit").click(function(){$(this).closest(".conditional_body_edit").remove()}),$(`#${id_condition_container}`).find(".conditional_body_edit").find(".conditional_column_name_edit").change(function(){var t=$(this).find("option:selected").attr("data-datatype");if($(this).parent().parent().find(".conditional_condition_edit").empty(),$(this).parent().parent().find(".conditional_condition_edit").append('<option value="" disabled selected>------------</option>'),"IntegerField"==t||"BigIntegerField"==t||"FloatField"==t||"AutoField"==t){var a=new Array("Greater than","Smaller than","Equal to","Not equal to");for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition_edit").append('<option value="'+a[t]+'">'+a[t]+"</option>")}else if("DateField"==t||"DateTimeField"==t){a=new Array("Greater than","Smaller than","Equal to","Not equal to");for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition_edit").append('<option value="'+a[t]+'">'+a[t]+"</option>")}else{a=new Array("Equal to","Not equal to","In","Starts with","Ends with","Contains");for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition_edit").append('<option value="'+a[t]+'">'+a[t]+"</option>")}}),$(`#${id_condition_container}`).find(".conditional_body_edit").find(".conditional_condition_edit").change(function(){var t=$(this).val();"Greater than"==t||"Smaller than"==t?"DateField"==$(this).parent().parent().find(".conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<input type="date" class="conditional_value_edit"></input>')):"DateTimeField"==$(this).parent().parent().find(".conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<input type="datetime-local" style="width:11em;" class="conditional_value_edit"></input>')):($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<input type="number" style="width:11em;height:2em;" class="conditional_value_edit"></input>')):"Equal to"==t||"Not equal to"==t?"DateField"==$(this).parent().parent().find(".conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<input type="date" class="conditional_value_edit"></input>')):"DateTimeField"==$(this).parent().parent().find(".conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<input type="datetime-local" style="width:11em;" class="conditional_value_edit"></input>')):($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<select class="select2 form-control select2_condition_class condition_select2 conditional_value_edit" required></select>')):"Starts with"==t||"Ends with"==t||"Contains"==t?($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<select class="select2 form-control select2_condition_class condition_select2 conditional_value_edit" required></select>')):"In"==t?($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<select class="select2 multiple select2_condition_class form-control condition_multiple_select2 conditional_value_edit" multiple required></select>')):($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<select class="select2 form-control select2_condition_class condition_select2 conditional_value_edit" required></select>')),$(".select2_condition_class").select2({tags:!0})}),$(`#${id_condition_container}`).find(".conditional_body_edit").find(".add_conditional_parameter_edit").click(function(){var t='<div class="conditional_body_edit" style="margin-top:1em;width: 100%; display:flex">\n                          <div class="col-3">\n                          <select class="select2 form-control conditional_column_name_edit">\n                              <option value="" selected disabled>------------</option>\n                          ';for(const a in data.datatype_list)t+=` <option value= ${data.datatype_list[a].field_name} data-datatype=${data.datatype_list[a].data_type}>${data.datatype_list[a].column_name}</option>`;t+='</select>\n                          </div>\n                          <div class="col-3">\n                          <select class="select2 form-control conditional_condition_edit">\n                              <option value="" disabled selected>-------------------</option>\n                              <option value="Greater than">Greater than</option>\n                              <option value="Smaller than">Smaller than</option>\n                              <option value="Equal to">Equal to</option>\n                              <option value="Not equal to">Not equal to</option>\n                              <option value="In">In</option>\n                              <option value="Starts with">Starts with</option>\n                              <option value="Contains">Contains</option>\n                              <option value="Ends with">Ends with</option>\n                          </select>\n                          </div>\n                          <div class="col-3 conditional_input_value_edit">\n                          <div class="conditional_format_value_input_edit">\n                          <select class="select2 form-control select2_condition_class" required>\n                          </select>\n                          </div>\n                          </div>\n                          <div class="col-2">\n                          <input type="color" class="form-control conditional_color_input_edit" data-css="background-color" value="#ffffff" >\n                          </div>\n                          <div class="col-1">\n                          <i class="fa fa-times remove_conditional_parameter_edit" data-toggle="tooltip" title="Remove condition" style="cursor:pointer;margin-top:0.7em;"></i> </i>\n                          </div>\n                      \n                      </div>',$(`#${id_condition_container}`).append(t),$(".select2").select2(),$(".select2_condition_class").select2({tags:!0}),$(`#${id_condition_container}`).find(".conditional_body_edit").find(".remove_conditional_parameter_edit").click(function(){$(this).closest(".conditional_body_edit").remove()}),$(`#${id_condition_container}`).find(".conditional_body_edit").find(".conditional_column_name_edit").change(function(){var t=$(this).find("option:selected").attr("data-datatype");if($(this).parent().parent().find(".conditional_condition_edit").empty(),$(this).parent().parent().find(".conditional_condition_edit").append('<option value="" disabled selected>------------</option>'),"IntegerField"==t||"BigIntegerField"==t||"FloatField"==t||"AutoField"==t){var a=new Array("Greater than","Smaller than","Equal to","Not equal to");for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition_edit").append('<option value="'+a[t]+'">'+a[t]+"</option>")}else if("DateField"==t||"DateTimeField"==t){a=new Array("Greater than","Smaller than","Equal to","Not equal to");for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition_edit").append('<option value="'+a[t]+'">'+a[t]+"</option>")}else{a=new Array("Equal to","Not equal to","In","Starts with","Ends with","Contains");for(let t=0;t<a.length;t++)$(this).parent().parent().find(".conditional_condition_edit").append('<option value="'+a[t]+'">'+a[t]+"</option>")}}),$(`#${id_condition_container}`).find(".conditional_body_edit").find(".conditional_condition_edit").change(function(){var t=$(this).val();"Greater than"==t||"Smaller than"==t?"DateField"==$(this).parent().parent().find(".conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<input type="date" class="conditional_value_edit"></input>')):"DateTimeField"==$(this).parent().parent().find(".conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<input type="datetime-local" style="width:11em;" class="conditional_value_edit"></input>')):($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<input type="number" style="width:11em;height:2em;" class="conditional_value_edit"></input>')):"Equal to"==t||"Not equal to"==t?"DateField"==$(this).parent().parent().find(".conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<input type="date" class="conditional_value_edit"></input>')):"DateTimeField"==$(this).parent().parent().find(".conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<input type="datetime-local" style="width:11em;" class="conditional_value_edit"></input>')):($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<select class="select2 form-control select2_condition_class condition_select2 conditional_value_edit" required></select>')):"Starts with"==t||"Ends with"==t||"Contains"==t?($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<select class="select2 form-control select2_condition_class condition_select2 conditional_value_edit" required></select>')):"In"==t?($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<select class="select2 multiple form-control select2_condition_class condition_multiple_select2 conditional_value_edit" multiple required></select>')):($(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".conditional_input_value_edit").find(".conditional_format_value_input_edit").append('<select class="select2 form-control select2_condition_class condition_select2 conditional_value_edit" required></select>')),$(".select2_condition_class").select2({tags:!0})})});var x_axisdata=data.x_axis;let t;t=void 0!==data.plotDict&&"highlightcolumnheaderscolorlist"in data.plotDict&&"undefined"!==data.plotDict.highlightcolumnheaderscolorlist?JSON.parse(data.plotDict.highlightcolumnheaderscolorlist):"",$(`#${id6}`).attr("data-conditional_table",JSON.stringify(data.conditional_table)),selectedOptions&&$(`#${id6}`).attr("data-column_alignment_table",JSON.stringify(selectedOptions));var table=$(`#table_example${id}`).DataTable({data:data.content,columns:column_names,autoWidth:!0,scrollY:"50vh",scrollCollapse:!0,scrollX:"110%",orderCellsTop:!0,stateSave:!0,deferRender:!0,paging:!0,lengthMenu:[[1,5,10,25,50,75,100,-1],[1,5,10,25,50,75,100,"All"]],pageLength:10,dom:"lfBrtip",sScrollX:"100%",scrollX:!0,buttons:[{extend:"collection",text:"Export",buttons:[{extend:"copy",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"excel",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"csv",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"pdf",title:"",exportOptions:{columns:":visible:not(.noVis)"}}]}],headerCallback:function(a,e,o,l,d){$(a).find("th").each(function(){let t=$(this).index();if(selectedOptions)if(Array.isArray(selectedOptions[0].columns_config)){let a=selectedOptions[0].columns_config.find(a=>a.columnName===column_names[t].data),e=selectedOptions[0].global_config.globalHeaderColumnAlignment;$(this).addClass(`dt-${a?a.header:e}`)}else $(this).addClass(`dt-${globalHeaderColumnAlignment}`)}),t&&""!==t&&$(a).find("th").each(function(a){let e=t;var o=$(this).text(),l=e[o]||e.allColumns||{bgColor:"",fontColor:""};$(this).css({"background-color":l.bgColor,color:l.fontColor})})},columnDefs:[selectedOptions?selectedOptions&&Array.isArray(selectedOptions[0].columns_config)?{targets:"_all",createdCell:function(t,a,e,o,l){let d=selectedOptions[0].columns_config.find(t=>t.columnName===column_names[l].data),i=selectedOptions[0].global_config.globalContentColumnAlignment;$(t).addClass(`dt-${d?d.content:i}`)}}:selectedOptions&&!Array.isArray(selectedOptions[0].columns_config)?{targets:"_all",createdCell:function(t,a,e,o,l){let d=selectedOptions[0].global_config.globalContentColumnAlignment;$(t).addClass(`dt-${d}`)}}:{targets:"_all",className:"allColumnClass all buttons_export_class"}:{targets:"_all",className:"dt-center"}],rowCallback:function(t,a,e){for(var o=0;o<conditional_data.length;o++)if(null!=conditional_data[o].column_name&&x_axisdata.includes(conditional_data[o].column_name))if("Equal to"==conditional_data[o].column_condition){if("DateField"==conditional_data[o].column_datatype)var l=conditional_data[o].condition_value;else if("DateTimeField"==conditional_data[o].column_datatype)l=conditional_data[o].condition_value;else l=conditional_data[o].condition_value;$(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML==l&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color)}else if("Not equal to"==conditional_data[o].column_condition){if("DateField"==conditional_data[o].column_datatype)l=conditional_data[o].condition_value;else if("DateTimeField"==conditional_data[o].column_datatype)l=conditional_data[o].condition_value;else l=conditional_data[o].condition_value;$(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML!=l&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color)
}else"Greater than"==conditional_data[o].column_condition?"DateField"==conditional_data[o].column_datatype?new Date($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)>new Date(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"DateTimeField"==conditional_data[o].column_datatype?new Date($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)>new Date(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"FloatField"==conditional_data[o].column_datatype?parseFloat($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)>parseFloat(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):parseInt($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)>parseInt(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"Smaller than"==conditional_data[o].column_condition?"DateField"==conditional_data[o].column_datatype?new Date($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)<new Date(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"DateTimeField"==conditional_data[o].column_datatype?new Date($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)<new Date(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"FloatField"==conditional_data[o].column_datatype?parseFloat($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)<parseFloat(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):parseInt($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)<parseInt(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"In"==conditional_data[o].column_condition?conditional_data[o].condition_value.includes($(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"Starts with"==conditional_data[o].column_condition?$(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML.startsWith(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"Ends with"==conditional_data[o].column_condition?$(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML.endsWith(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):"Contains"==conditional_data[o].column_condition?$(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML.includes(conditional_data[o].condition_value)&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color):$(t).find("td").eq(conditional_data[o].td_val)[0].innerHTML==conditional_data[o].condition_value&&$(t).find("td").eq(conditional_data[o].td_val).css("background-color",conditional_data[o].condition_color)},initComplete:function(){try{$(`#table_example${id}`).off("click").on("click","td",function(){var t=$(this).closest("table").attr("id"),a=$(`#${t}`).DataTable(),e=a.settings().init().columns;cellcollen2=e.length,cellindex3=a.cell(this).index().column+1,$(this).toggleClass("cell_highlighted"),$(this).toggleClass("cell_selected")})}catch(t){}}}).columns.adjust();if(data.plotDict&&data.plotDict.columnAlignmentSelectedOptions&&"undefined"!==data.plotDict.columnAlignmentSelectedOptions){let t=JSON.parse(data.plotDict.columnAlignmentSelectedOptions);table.columns().header().each(function(a){$(a).removeClass("dt-center dt-left dt-right");let e=table.column(a).index(),o=t[0].columns_config.find(t=>t.columnName===column_names[e].data),l=t[0].global_config.globalHeaderColumnAlignment,d=o&&o.header?`dt-${o.header}`:`dt-${l}`;$(a).addClass(d)}),table.columns().every(function(){let a=this.index(),e=t[0].columns_config.find(t=>t.columnName===column_names[a].data),o=t[0].global_config.globalContentColumnAlignment;this.nodes().to$().removeClass().addClass(`dt-${e?e.content:o}`)}),table.draw()}if(id in finalfdict2){var table_freeze=$(`#table_example${id}`).DataTable();new $.fn.dataTable.FixedColumns(table_freeze,finalfdict2[`${id}`]),setTimeout(()=>{$.fn.DataTable.isDataTable(`#table_example${id}`)&&$(`#table_example${id}`).DataTable().draw()},200)}$('a[data-toggle="tab"]').on("shown.bs.tab",function(t){$($.fn.dataTable.tables(!0)).DataTable().columns.adjust().draw()}),$(`#${id6}`).find(".dt-buttons").css("padding-left","1em"),$(`#table_example${id}_info`).css("padding-left","1em"),$(`#table_example${id}_paginate`).css("padding-right","1em"),$(`#${id6}`).find(".dt-buttons").css("padding-top","1em"),$(`#table_example${id}_length`).css("float","none"),$(`#table_example${id}_length`).css("padding-right","1em"),$(`#table_example${id}_length`).css("padding-top","1em"),$(`#table_example${id}_length`).css("display","inline-block"),$(`#table_example${id}_filter`).css("padding-top","1em"),$(`#${id6}`).find(".graphcontainerdiv").css("overflow-y","scroll");var style=document.createElement("style");style.innerHTML=`#${id6}>.graphcontainerdiv::-webkit-scrollbar {display: none;}`,document.head.appendChild(style),$(`#${id6}`).resizable({start:function(t,a){document.getElementById(id6).className;document.getElementById(id6).className="card charts ui-resizable ui-draggable ui-resizable-resizing",$($.fn.dataTable.tables(!0)).DataTable().columns.adjust()},stop:function(t,a){$($.fn.dataTable.tables(!0)).DataTable().columns.adjust()}}),$(`#apply_freezepane_${chartDivId}`).click(function(t){var a=chartDivId;if($(`#freezeprev_left_${a}`).is(":checked")&&$(`#freezeprev_right_${a}`).is(":checked"))Swal.fire({icon:"warning",text:"Kindly select only one checkbox to freeze panes."});else{if($(`#freezeprev_left_${a}`).is(":not(:checked)")&&$(`#freezeprev_right_${a}`).is(":not(:checked)")&&Swal.fire({icon:"warning",text:"Kindly select atleast one checkbox to freeze panes."}),$(`#freezeprev_left_${a}`).is(":checked"))try{finalfdict2[a].left=parseInt(cellindex3)}catch(t){finalfdict2[a]={left:0,right:0},finalfdict2[a].left=parseInt(cellindex3)}if($(`#freezeprev_right_${a}`).is(":checked"))try{finalfdict2[a].right=parseInt(cellcollen2-cellindex3+1)}catch(t){finalfdict2[a]={left:0,right:0},finalfdict2[a].right=parseInt(cellcollen2-cellindex3+1)}$(".cell_highlighted").removeClass("cell_selected"),$(".cell_highlighted").removeClass("cell_highlighted");var e=$(`#table_example${id}`).DataTable();new $.fn.dataTable.FixedColumns(e,finalfdict2[a])}}),$(`#apply_unfreezepane_${chartDivId}`).click(function(t){var a=chartDivId;$(`#freezeprev_left_${a}`).is(":checked")&&(finalfdict2[a].left=0),$(`#freezeprev_right_${a}`).is(":checked")&&(finalfdict2[a].right=0);var e=$(`#table_example${id}`).DataTable();e.addClass("colReorder"),new $.fn.dataTable.FixedColumns(e,finalfdict2[a])}),$(`#${id_change_conditional_config}`).click(function(){var t=[];$(`#${id_condition_container}`).find(".conditional_body_edit").each(function(){var a={};a.column_name=$(this).find(".conditional_column_name_edit").val(),a.column_datatype=$(this).find(".conditional_column_name_edit").find("option:selected").attr("data-datatype"),a.column_condition=$(this).find(".conditional_condition_edit").val(),a.condition_value=$(this).find(".conditional_value_edit").val(),a.condition_color=$(this).find(".conditional_color_input_edit").val(),t.push(a)});for(var a=data.mappingDict,e=0;e<t.length;e++)for(const[o,l]of Object.entries(column_names))l.data==fieldToVerbose(t[e].column_name,a)&&(t[e].td_val=parseInt(o));var o=t,l=data.x_axis;$(`#table_example${id}`).DataTable().clear().destroy();$(`#table_example${id}`).DataTable({data:data.content,columns:column_names,autoWidth:!1,scrollY:"50vh",scrollCollapse:!0,scrollX:"110%",orderCellsTop:!0,responsive:!0,stateSave:!0,deferRender:!0,paging:!0,lengthMenu:[[1,5,10,25,50,75,100,-1],[1,5,10,25,50,75,100,"All"]],pageLength:10,dom:"lfBrtip",sScrollX:"100%",scrollX:!0,buttons:[{extend:"collection",text:"Export",buttons:[{extend:"copy",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"excel",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"csv",title:"",exportOptions:{columns:":visible:not(.noVis)"}},{extend:"pdf",title:"",exportOptions:{columns:":visible:not(.noVis)"}}]}],headerCallback:function(t,a,e,o,l){$(t).find("th").each(function(){let a=$(this).index();if(selectedOptions)if(Array.isArray(selectedOptions[0].columns_config)){let t=selectedOptions[0].columns_config.find(t=>t.columnName===column_names[a].data),e=selectedOptions[0].global_config.globalHeaderColumnAlignment;$(this).addClass(`dt-${t?t.header:e}`)}else $(this).addClass(`dt-${globalHeaderColumnAlignment}`);else $(t).find("th").addClass("dt-center")})},columnDefs:[selectedOptions?selectedOptions&&Array.isArray(selectedOptions[0].columns_config)?{targets:"_all",createdCell:function(t,a,e,o,l){let d=selectedOptions[0].columns_config.find(t=>t.columnName===column_names[l].data),i=selectedOptions[0].global_config.globalContentColumnAlignment;$(t).addClass(`dt-${d?d.content:i}`)}}:selectedOptions&&!Array.isArray(selectedOptions[0].columns_config)?{targets:"_all",createdCell:function(t,a,e,o,l){let d=selectedOptions[0].global_config.globalContentColumnAlignment;$(t).addClass(`dt-${d}`)}}:{targets:"_all",className:"allColumnClass all buttons_export_class"}:{targets:"_all",className:"dt-center"}],rowCallback:function(t,a,e){for(var d=0;d<o.length;d++)if(null!=o[d].column_name&&l.includes(o[d].column_name))if("Equal to"==o[d].column_condition){if("DateField"==o[d].column_datatype)var i=o[d].condition_value;else if("DateTimeField"==o[d].column_datatype)i=o[d].condition_value;else i=o[d].condition_value;$(t).find("td").eq(o[d].td_val)[0].innerHTML==i&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color)}else if("Not equal to"==o[d].column_condition){if("DateField"==o[d].column_datatype)i=o[d].condition_value;else if("DateTimeField"==o[d].column_datatype)i=o[d].condition_value;else i=o[d].condition_value;$(t).find("td").eq(o[d].td_val)[0].innerHTML!=i&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color)}else"Greater than"==o[d].column_condition?"DateField"==o[d].column_datatype?new Date($(t).find("td").eq(o[d].td_val)[0].innerHTML)>new Date(o[d].condition_value)&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color):"DateTimeField"==o[d].column_datatype?new Date($(t).find("td").eq(o[d].td_val)[0].innerHTML)>new Date(o[d].condition_value)&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color):"FloatField"==o[d].column_datatype?parseFloat($(t).find("td").eq(o[d].td_val)[0].innerHTML)>parseFloat(o[d].condition_value)&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color):parseInt($(t).find("td").eq(o[d].td_val)[0].innerHTML)>parseInt(o[d].condition_value)&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color):"Smaller than"==o[d].column_condition?"DateField"==o[d].column_datatype?new Date($(t).find("td").eq(o[d].td_val)[0].innerHTML)<new Date(o[d].condition_value)&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color):"DateTimeField"==o[d].column_datatype?new Date($(t).find("td").eq(o[d].td_val)[0].innerHTML)<new Date(o[d].condition_value)&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color):"FloatField"==o[d].column_datatype?parseFloat($(t).find("td").eq(o[d].td_val)[0].innerHTML)<parseFloat(o[d].condition_value)&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color):parseInt($(t).find("td").eq(o[d].td_val)[0].innerHTML)<parseInt(o[d].condition_value)&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color):"In"==o[d].column_condition?o[d].condition_value.includes($(t).find("td").eq(o[d].td_val)[0].innerHTML)&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color):"Starts with"==o[d].column_condition?$(t).find("td").eq(o[d].td_val)[0].innerHTML.startsWith(o[d].condition_value)&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color):"Ends with"==o[d].column_condition?$(t).find("td").eq(o[d].td_val)[0].innerHTML.endsWith(o[d].condition_value)&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color):"Contains"==o[d].column_condition?$(t).find("td").eq(o[d].td_val)[0].innerHTML.includes(o[d].condition_value)&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color):$(t).find("td").eq(o[d].td_val)[0].innerHTML==o[d].condition_value&&$(t).find("td").eq(o[d].td_val).css("background-color",o[d].condition_color)},initComplete:function(){try{$(`#table_example${id}`).off("click").on("click","td",function(){var t=$(this).closest("table").attr("id"),a=$(`#${t}`).DataTable(),e=a.settings().init().columns;cellcollen2=e.length,cellindex3=a.cell(this).index().column+1,$(this).toggleClass("cell_highlighted"),$(this).toggleClass("cell_selected")})}catch(t){}}}).columns.adjust();if($(`#${id6}`).attr("data-conditional_table",JSON.stringify(t)),id in finalfdict2){var d=$(`#table_example${id}`).DataTable();new $.fn.dataTable.FixedColumns(d,finalfdict2[`${id}`]),setTimeout(()=>{$.fn.DataTable.isDataTable(`#table_example${id}`)&&$(`#table_example${id}`).DataTable().draw()},200)}$('a[data-toggle="tab"]').on("shown.bs.tab",function(t){$($.fn.dataTable.tables(!0)).DataTable().columns.adjust().draw()}),$(`#${id6}`).find(".dt-buttons").css("padding-left","1em"),$(`#table_example${id}_info`).css("padding-left","1em"),$(`#table_example${id}_paginate`).css("padding-right","1em"),$(`#${id6}`).find(".dt-buttons").css("padding-top","1em"),$(`#table_example${id}_length`).css("float","none"),$(`#table_example${id}_length`).css("padding-right","1em"),$(`#table_example${id}_length`).css("padding-top","1em"),$(`#table_example${id}_length`).css("display","inline-block"),$(`#table_example${id}_filter`).css("padding-top","1em"),$(`#${id6}`).find(".graphcontainerdiv").css("overflow-y","scroll");var i=document.createElement("style");i.innerHTML=`#${id6}>.graphcontainerdiv::-webkit-scrollbar {display: none;}`,document.head.appendChild(i)}),"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(".global_applyButton").click(function(){if(plotbg=$(".myDiv").css("background-color"),$(`#${id23}`).prop("checked")){var t=document.getElementById(id_header),a=document.getElementById(id6),e=$(".global_header_bgcolor").val();change_header_bgcolor(a,t,e);var o=$(".global_header_color").val();change_header_color(a,t,o);var l=$(".global_header_fontsize").val();change_header_fontsize(a,t,l);var d=$(".global_header_fontweight").val();change_header_fontweight(a,t,d),$(`#${id_header_bgcolor}`).val(e),$(`#${id_header_color}`).val(o),$(`#${id_header_fontsize}`).val(l),$(`#${id_header_fontweight}`).val(d).trigger("change");var i=$(".global_header_fontstyle").val();change_header_fontstyle(a,t,i),$(`#${id_header_fontstyle}`).val(i).trigger("change");var r=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(r).trigger("change"),change_header_alignment(a,t,r),$(`#${id6}`).attr("data-header_alignment",r);var n=$(".global_shadow").prop("checked"),s=$(".global_border").prop("checked"),c=$(".global_shadow_color").val(),_=$(".global_shadow_x").val(),g=$(".global_shadow_y").val(),p=$(".global_shadow_blur").val(),h=$(".global_shadow_thickness").val();change_shadow_global(a,n,c,_,g,p,h);var b=$(".global_border_color").val(),y=$(".global_border_thickness").val(),u=$(".global_border_style").val();change_border_global(a,s,b,y,u),$(`#${id_shadow}`).prop("checked",n),$(`#${id_border}`).prop("checked",s),$(`#${id_shadow_color}`).val(c),$(`#${id_xshadow}`).val(_),$(`#${id_yshadow}`).val(g),$(`#${id_blurshadow}`).val(p),$(`#${id_shadow_thickness}`).val(h),$(`#${id_border_color}`).val(b),$(`#${id_border_thickness}`).val(y),$(`#${id_border_style}`).val(u).trigger("change"),$(`#${id_border}`).val(s),$(`#${id_shadow}`).val(n),$(`#${id6}`).attr("data-shadecolor",c),$(`#${id6}`).attr("data-borderStyle",u),$(`#${id6}`).attr("data-borderThickness",y),$(`#${id6}`).attr("data-borderColor",b),$(`#${id6}`).attr("data-borderon",s),$(`#${id6}`).attr("data-shadowon",n),$(`#${id6}`).attr("data-shadowThick",h),$(`#${id6}`).attr("data-shadowblurry",p),$(`#${id6}`).attr("data-shadowY",g),$(`#${id6}`).attr("data-shadowX",_)}}),$(`#${id23}`).click(function(){if($(this).prop("checked")){var t=document.getElementById(id_header),a=document.getElementById(id6),e=$(".global_header_bgcolor").val();change_header_bgcolor(a,t,e);var o=$(".global_header_color").val();change_header_color(a,t,o);var l=$(".global_header_fontsize").val();change_header_fontsize(a,t,l);var d=$(".global_header_fontweight").val();change_header_fontweight(a,t,d),$(`#${id_header_bgcolor}`).val(e),$(`#${id_header_color}`).val(o),$(`#${id_header_fontsize}`).val(l),$(`#${id_header_fontweight}`).val(d).trigger("change");var i=$(".global_header_fontstyle").val();change_header_fontstyle(a,t,i),$(`#${id_header_fontstyle}`).val(i).trigger("change");var r=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(r).trigger("change"),change_header_alignment(a,t,r),$(`#${id6}`).attr("data-header_alignment",r);var n=$(".global_shadow").prop("checked"),s=$(".global_border").prop("checked"),c=$(".global_shadow_color").val(),_=$(".global_shadow_x").val(),g=$(".global_shadow_y").val(),p=$(".global_shadow_blur").val(),h=$(".global_shadow_thickness").val();change_shadow_global(a,n,c,_,g,p,h);var b=$(".global_border_color").val(),y=$(".global_border_thickness").val(),u=$(".global_border_style").val();change_border_global(a,s,b,y,u),$(`#${id_shadow}`).prop("checked",n),$(`#${id_border}`).prop("checked",s),$(`#${id_shadow_color}`).val(c),$(`#${id_xshadow}`).val(_),$(`#${id_yshadow}`).val(g),$(`#${id_blurshadow}`).val(p),$(`#${id_shadow_thickness}`).val(h),$(`#${id_border_color}`).val(b),$(`#${id_border_thickness}`).val(y),$(`#${id_border_style}`).val(u).trigger("change"),$(`#${id_border}`).val(s),$(`#${id_shadow}`).val(n),$(`#${id6}`).attr("data-shadecolor",c),$(`#${id6}`).attr("data-borderStyle",u),$(`#${id6}`).attr("data-borderThickness",y),$(`#${id6}`).attr("data-borderColor",b),$(`#${id6}`).attr("data-borderon",s),$(`#${id6}`).attr("data-shadowon",n),$(`#${id6}`).attr("data-shadowThick",h),$(`#${id6}`).attr("data-shadowblurry",p),$(`#${id6}`).attr("data-shadowY",g),$(`#${id6}`).attr("data-shadowX",_)}else $(`#${id6}`).attr("data-globalbg","no");$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px")}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no");var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),$(`#${id22}`).change(function(){plotbg=$(this).val(),$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).find(".tabulator").css("background-color",plotbg),$(`#${id6}`).attr("data-bgcolor",plotbg)}),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),$(`#${id6}`).attr("data-label_color",label_color),$(`#${id6}`).attr("data-label_fontsize",label_fontsize),$(`#table_example${id}_wrapper`).find("thead tr th").css({"font-size":label_fontsize+"px",color:label_color}),$(`#${id_label_color}`).val(label_color),$(`#${id_label_fontsize}`).val(label_fontsize),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,graph_subtype,dataplot,layout);var x_axisdata3=data.x_axis;TableColunmReorder(id6,id_tableColunm_Rearrange,x_axisdata3,id,data,id_tableColunm_Rearrange_ul,id_tableColunm_Rearrange_checkbox,id_tableColunm_Rearrange_div);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);if("true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),document.getElementById(id_filter_button).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})},data.plotDict&&data.plotDict.FormattersConfiguration&&"undefined"!==data.plotDict.FormattersConfiguration){let t=JSON.parse(data.plotDict.FormattersConfiguration),a="table_example"+id;applyColumnFormatters(t,a)}}if("Nested_Table"===String(graph_subtype)){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig);if(void 0===data.plotDict){var tab_height=400;outerCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),conditionalModal.appendTo(`#${plotDict.tabNameID}`),outermodalCard.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange),$(`#${id6}`).attr("data-filter_columns",plotDict.filters)}else{var tab_height=data.plotDict.height-55+"px";outerCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),conditionalModal.appendTo(`#${data.plotDict.tab_id}`),outermodalCard.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange),$(`#${id6}`).attr("data-filter_columns",plotDict.filters)}closeConditionModal(id_condition_close),document.getElementById(id_condition_modal_edit).onclick=function(){var t=document.getElementById(id_condition).style.display;"none"==t?(document.getElementById(id7).style.display="none",document.getElementById(id_condition).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_condition).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))};var conditional_data=data.conditional_table,conditional_string='<div class="nested_input_columns_value_dict_edit" style="display:none">';for(const t in data.datatype_list)conditional_string+=` <option value= ${data.datatype_list[t].field_name} data-datatype=${data.datatype_list[t].data_type}>${data.datatype_list[t].column_name}</option>`;conditional_string+='</div>\n              <div class="nested_conditional_body_edit" style="margin-top:1em;width: 100%; display:flex">\n              <div class="col-2">\n              <p style="font-weight: bold;">Select Type:</p>\n              <select class="select2 form-control nested_column_edit">',data.conditional_table.length>0?"Value"==data.conditional_table[0].nested_type?conditional_string+='\n                  <option value="Category">Category</option>\n                  <option value="Value" selected>Value</option>':conditional_string+='\n                  <option value="Category" selected>Category</option>\n                  <option value="Value">Value</option>':conditional_string+='\n                <option value="Category">Category</option>\n                <option value="Value">Value</option>',conditional_string+='</select>\n              </div>\n              <div class="col-3">\n              <p style="font-weight: bold;">Select column:</p>\n              <select class="select2 form-control nested_conditional_column_name_edit">\n                  <option value="" selected disabled>------------</option>\n              ';for(const t in data.datatype_list)conditional_string+=` <option value= ${data.datatype_list[t].field_name} data-datatype=${data.datatype_list[t].data_type}>${data.datatype_list[t].column_name}</option>`;if(conditional_string+='</select>\n              </div>\n              <div class="col-2">\n              <p style="font-weight: bold;">Condition:</p>\n              <select class="select2 form-control nested_conditional_condition_edit">\n                  <option value="" disabled selected>-------------------</option>\n                  <option value="Greater than">Greater than</option>\n                  <option value="Smaller than">Smaller than</option>\n                  <option value="Equal to">Equal to</option>\n                  <option value="Not equal to">Not equal to</option>\n                  <option value="In">In</option>\n                  <option value="Starts with">Starts with</option>\n                  <option value="Contains">Contains</option>\n                  <option value="Ends with">Ends with</option>\n              </select>\n              </div>\n              <div class="col-2 nested_conditional_input_value_edit">\n              <p style="font-weight: bold;">Select value:</p>\n              <div class="nested_conditional_format_value_input_edit">',data.conditional_table.length>0)if("Equal to"==data.conditional_table[0].column_condition)"Category"==data.conditional_table[0].nested_type?"DateField"==data.conditional_table[0].column_datatype?conditional_string+=`<input type="date" value="${data.conditional_table[0].condition_value}" style="width:7.5em;" class="nested_conditional_value_edit" ></input>`:"DateTimeField"==data.conditional_table[0].column_datatype?conditional_string+=`<input type="datetime-local" value="${data.conditional_table[0].condition_value}" style="width:7.5em;" class="nested_conditional_value_edit"></input>`:conditional_string+=`<select class="select2 form-control select2_condition_class nested_conditional_value_edit" required>\n                           <option selected value="${data.conditional_table[0].condition_value}">${data.conditional_table[0].condition_value}</option>\n                        </select>`:conditional_string+=`<select class="select2 form-control select2_condition_class nested_conditional_value_edit" required>\n                              <option selected value="${data.conditional_table[0].condition_value}">${data.conditional_table[0].condition_value}</option>\n                          </select>`;else if("Not equal to"==data.conditional_table[0].column_condition)"Category"==data.conditional_table[0].nested_type?"DateField"==data.conditional_table[0].column_datatype?conditional_string+=`<input type="date" value="${data.conditional_table[0].condition_value}" style="width:7.5em;" class="nested_conditional_value_edit" ></input>`:"DateTimeField"==data.conditional_table[0].column_datatype?conditional_string+=`<input type="datetime-local" value="${data.conditional_table[0].condition_value}" style="width:7.5em;" class="nested_conditional_value_edit"></input>`:conditional_string+=`<select class="select2 form-control select2_condition_class nested_conditional_value_edit" required>\n                          <option selected value="${data.conditional_table[0].condition_value}">${data.conditional_table[0].condition_value}</option>\n                        </select>`:conditional_string+=`<select class="select2 form-control select2_condition_class nested_conditional_value_edit" required>\n                          <option selected value="${data.conditional_table[0].condition_value}">${data.conditional_table[0].condition_value}</option>\n                        </select>`;else if("Starts with"==data.conditional_table[0].column_condition||"Ends with"==data.conditional_table[0].column_condition||"Contains"==data.conditional_table[0].column_condition)conditional_string+=`<select class="select2 form-control select2_condition_class nested_conditional_value_edit" required>\n                    <option selected value="${data.conditional_table[0].condition_value}">${data.conditional_table[0].condition_value}</option>\n                  </select>`;else if("In"==data.conditional_table[0].column_condition){conditional_string+='<select class="select2 select2_condition_class nested_conditional_value_edit form-control" multiple required>';for(var j=0;j<data.conditional_table[0].condition_value.length;j++)conditional_string+=`<option value="${data.conditional_table[0].condition_value[j]}" selected>${data.conditional_table[0].condition_value[j]}</option>`;conditional_string+="</select>"
}else"Greater than"==data.conditional_table[0].column_condition||"Smaller than"==data.conditional_table[0].column_condition?"Category"==data.conditional_table[0].nested_type?"DateField"==data.conditional_table[0].column_datatype?conditional_string+=`<input type="date" value="${data.conditional_table[0].condition_value}" style="width:7.5em;" class="nested_conditional_value_edit"></input>`:"DateTimeField"==data.conditional_table[0].column_datatype?conditional_string+=`<input type="datetime-local" value="${data.conditional_table[0].condition_value}" style="width:7.5em;" class="nested_conditional_value_edit"></input>`:conditional_string+=`<input type = "number" style="width:11em;height:2em;width:7.5em;" class="nested_conditional_value_edit" value="${data.conditional_table[0].condition_value}"></input>`:conditional_string+=`<input type = "number" style="height:2em;width:7.5em;" class="nested_conditional_value_edit" value="${data.conditional_table[0].condition_value}"></input>`:conditional_string+=`<select class="select2 form-control select2_condition_class nested_conditional_value_edit" required>\n                    <option selected value="${data.conditional_table[0].condition_value}">${data.conditional_table[0].condition_value}</option>\n                  </select>`;else conditional_string+='<select class="select2 form-control select2_condition_class" required>\n                </select>';conditional_string+='</div>\n              </div>\n              <div class="col-2">\n              <p style="font-weight: bold;">Select color:</p>',data.conditional_table.length>0?conditional_string+=`<input type="color" class="form-control nested_conditional_color_input_edit" data-css="background-color" value="${data.conditional_table[0].condition_color}" >`:conditional_string+='<input type="color" class="form-control nested_conditional_color_input_edit" data-css="background-color" value="#ffffff" >',conditional_string+='</div>\n              <div class="col-1">\n              <i class="fas fa-plus nested_add_conditional_parameter_edit" data-toggle="tooltip" title="Add condition" style="cursor:pointer;padding-top:3.2em;"></i> </i>\n              </div> \n          \n          </div>';for(var i=1;i<data.conditional_table.length;i++){null==data.conditional_table[i].condition_value&&(data.conditional_table[i].condition_value=""),conditional_string+='\n                      <div class="nested_conditional_body_edit" style="margin-top:1em;width: 100%; display:flex"><div class="col-2">',conditional_string+='<select class="select2 form-control nested_column_edit">',"Value"==data.conditional_table[i].nested_type?conditional_string+='<option value="Category">Category</option>\n                            <option value="Value" selected>Value</option>':conditional_string+='<option value="Category" selected>Category</option>\n                            <option value="Value">Value</option>',conditional_string+='</select>\n                          </div><div class="col-3">',conditional_string+=' <select class="select2 form-control nested_conditional_column_name_edit">';for(const t in data.datatype_list)conditional_string+=` <option value= ${data.datatype_list[t].field_name} data-datatype=${data.datatype_list[t].data_type}>${data.datatype_list[t].column_name}</option>`;if(conditional_string+='</select>\n                              </div>\n                              <div class="col-2">',conditional_string+=' <select class="select2 form-control nested_conditional_condition_edit"><option value="Equal to">Equal to</option><option value="Not equal to">Not equal to</option><option value="In">In</option><option value="Starts with">Starts with</option><option value="Ends with">Ends with</option><option value="Contains">Contains</option><option value="Greater than">Greater than</option><option value="Smaller than">Smaller than</option></select></div>\n                              <div class="col-2 nested_conditional_input_value_edit">\n                              <div class="nested_conditional_format_value_input_edit">',"Equal to"==data.conditional_table[i].column_condition)"Category"==data.conditional_table[i].nested_type?"DateField"==data.conditional_table[i].column_datatype?conditional_string+=`<input type="date" value="${data.conditional_table[i].condition_value}" style="width:7.5em;" class="nested_conditional_value_edit" ></input>`:"DateTimeField"==data.conditional_table[i].column_datatype?conditional_string+=`<input type="datetime-local" value="${data.conditional_table[i].condition_value}" style="width:7.5em;" class="nested_conditional_value_edit"></input>`:conditional_string+=`<select class="select2 form-control select2_condition_class nested_conditional_value_edit" required>\n                                        <option selected value="${data.conditional_table[i].condition_value}">${data.conditional_table[i].condition_value}</option>\n                                      </select>`:conditional_string+=` <select class="select2 form-control select2_condition_class nested_conditional_value_edit" required>\n                                            <option selected value="${data.conditional_table[i].condition_value}">${data.conditional_table[i].condition_value}</option>\n                                        </select>`;else if("Not equal to"==data.conditional_table[i].column_condition)"Category"==data.conditional_table[i].nested_type?"DateField"==data.conditional_table[i].column_datatype?conditional_string+=`<input type="date" value="${data.conditional_table[i].condition_value}" style="width:7.5em;" class="nested_conditional_value_edit" ></input>`:"DateTimeField"==data.conditional_table[i].column_datatype?conditional_string+=`<input type="datetime-local" value="${data.conditional_table[i].condition_value}" style="width:7.5em;" class="nested_conditional_value_edit"></input>`:conditional_string+=` <select class="select2 form-control select2_condition_class nested_conditional_value_edit" required>\n                                        <option selected value="${data.conditional_table[i].condition_value}">${data.conditional_table[i].condition_value}</option>\n                                    </select>`:conditional_string+=`<select class="select2 form-control select2_condition_class nested_conditional_value_edit" required>\n                                    <option selected value="${data.conditional_table[i].condition_value}">${data.conditional_table[i].condition_value}</option>\n                                  </select>`;else if("Starts with"==data.conditional_table[i].column_condition||"Ends with"==data.conditional_table[i].column_condition||"Contains"==data.conditional_table[i].column_condition)conditional_string+=`<select class="select2 form-control select2_condition_class nested_conditional_value_edit" required>\n                                  <option selected value="${data.conditional_table[i].condition_value}">${data.conditional_table[i].condition_value}</option>\n                                </select>`;else if("In"==data.conditional_table[i].column_condition){conditional_string+='<select class="select2 select2_condition_class nested_conditional_value_edit form-control" multiple required>';for(var j=0;j<data.conditional_table[i].condition_value.length;j++)conditional_string+=`<option value="${data.conditional_table[i].condition_value[j]}" selected>${data.conditional_table[i].condition_value[j]}</option>`;conditional_string+="</select>"}else"Greater than"==data.conditional_table[i].column_condition||"Smaller than"==data.conditional_table[i].column_condition?"Category"==data.conditional_table[i].nested_type?"DateField"==data.conditional_table[i].column_datatype?conditional_string+=`<input type="date" value="${data.conditional_table[i].condition_value}" style="width:7.5em;" class="nested_conditional_value_edit"></input>`:"DateTimeField"==data.conditional_table[i].column_datatype?conditional_string+=`<input type="datetime-local" value="${data.conditional_table[i].condition_value}" style="width:7.5em;" class="nested_conditional_value_edit"></input>`:conditional_string+=`<input type = "number" style="width:11em;height:2em;width:7.5em;" class="nested_conditional_value_edit" value="${data.conditional_table[i].condition_value}"></input>`:conditional_string+=`<input type = "number" style="height:2em;width:7.5em;" class="nested_conditional_value_edit" value="${data.conditional_table[i].condition_value}"></input>`:conditional_string+=`<select class="select2 form-control select2_condition_class nested_conditional_value_edit" required>\n                                  <option selected value="${data.conditional_table[i].condition_value}">${data.conditional_table[i].condition_value}</option>\n                                </select>`;conditional_string+=`\n                              </div>\n                              </div>\n                              <div class="col-2">\n                              <input type="color" class="form-control nested_conditional_color_input_edit" data-css="background-color" value="${data.conditional_table[i].condition_color}" >\n                              </div>\n                              <div class="col-1">\n                                  <i class="fa fa-times nested_remove_conditional_parameter_edit" data-toggle="tooltip" title="Remove condition" style="cursor:pointer"></i> </i>\n                              </div> \n                              </div>\n                  `}$(`#${id_condition_container}`).append(conditional_string),$(document).ready(function(){$(".select2").select2(),$(".select2_condition_class").select2({tags:!0})}),data.conditional_table.length>0&&($(`#${id_condition_container}`).find(".nested_conditional_body_edit").find(".nested_conditional_condition_edit").each(function(t){$(this).val(conditional_data[t].column_condition).trigger("change")}),$(`#${id_condition_container}`).find(".nested_conditional_body_edit").find(".nested_conditional_column_name_edit").each(function(t){$(this).val(conditional_data[t].column_name).trigger("change")})),$(".select2").select2(),$(".select2_condition_class").select2({tags:!0}),$(".nested_column_edit").change(function(){$(this).parent().parent().find(".nested_conditional_condition_edit").val("").trigger("change")}),$(".nested_remove_conditional_parameter_edit").click(function(){$(this).closest(".nested_conditional_body_edit").remove()}),$(`#${id_condition_container}`).find(".nested_conditional_body_edit").find(".nested_conditional_column_name_edit").change(function(){$(this).find("option:selected").attr("data-datatype");$(this).parent().parent().find(".nested_conditional_condition_edit").empty(),$(this).parent().parent().find(".nested_conditional_condition_edit").append('<option value="" disabled selected>------------</option>');var t=new Array("Greater than","Smaller than","Equal to","Not equal to","In","Starts with","Ends with","Contains");for(let a=0;a<t.length;a++)$(this).parent().parent().find(".nested_conditional_condition_edit").append('<option value="'+t[a]+'">'+t[a]+"</option>")}),$(`#${id_condition_container}`).find(".nested_conditional_body_edit").find(".nested_conditional_condition_edit").change(function(){var t=$(this).val();"Greater than"==t||"Smaller than"==t?"Category"==$(this).parent().parent().find(".nested_column_edit").val()?"DateField"==$(this).parent().parent().find(".nested_conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<input type="date" style="width:7.5em;" class="nested_conditional_value_edit"></input>')):"DateTimeField"==$(this).parent().parent().find(".nested_conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<input type="datetime-local" style="width:7.5em;" class="nested_conditional_value_edit"></input>')):($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<input type="number" style="height:2em;width:7.5em;" class="nested_conditional_value_edit"></input>')):($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<input type="number" style="height:2em;width:7.5em;" class="nested_conditional_value_edit"></input>')):"Equal to"==t||"Not equal to"==t?"Category"==$(this).parent().parent().find(".nested_column_edit").val()?"DateField"==$(this).parent().parent().find(".nested_conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<input type="date" style="width:7.5em;" class="nested_conditional_value_edit"></input>')):"DateTimeField"==$(this).parent().parent().find(".nested_conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<input type="datetime-local" style="width:7.5em;" class="nested_conditional_value_edit"></input>')):($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<select class="select2 select2_condition_class form-control condition_select2 nested_conditional_value_edit" required></select>')):($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<select class="select2 select2_condition_class form-control condition_select2 nested_conditional_value_edit" required></select>')):"In"==t?($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<select class="select2 select2_condition_class multiple form-control condition_multiple_select2 nested_conditional_value_edit" multiple required></select>')):($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<select class="select2 form-control select2_condition_class condition_select2 nested_conditional_value_edit" required></select>')),$(".select2_condition_class").select2({tags:!0})}),$(`#${id_condition_container}`).find(".nested_conditional_body_edit").find(".nested_add_conditional_parameter_edit").click(function(){var t='<div class="nested_conditional_body_edit" style="margin-top:1em;width: 100%; display:flex">\n                              <div class="col-2">\n                              <select class="select2 form-control nested_column_edit">\n                                  <option value="Category">Category</option>\n                                  <option value="Value">Value</option>\n                              </select>\n                              </div>\n                              <div class="col-3">\n                              <select class="select2 form-control nested_conditional_column_name_edit">\n                                  <option value="" selected disabled>------------</option>\n                              ';for(const a in data.datatype_list)t+=` <option value= ${data.datatype_list[a].field_name} data-datatype=${data.datatype_list[a].data_type}>${data.datatype_list[a].column_name}</option>`;t+='</select>\n                              </div>\n                              <div class="col-2">\n                              <select class="select2 form-control nested_conditional_condition_edit">\n                                  <option value="" disabled selected>-------------------</option>\n                                  <option value="Greater than">Greater than</option>\n                                  <option value="Smaller than">Smaller than</option>\n                                  <option value="Equal to">Equal to</option>\n                                  <option value="Not equal to">Not equal to</option>\n                                  <option value="In">In</option>\n                                  <option value="Starts with">Starts with</option>\n                                  <option value="Contains">Contains</option>\n                                  <option value="Ends with">Ends with</option>\n                              </select>\n                              </div>\n                              <div class="col-2 nested_conditional_input_value_edit">\n                              <div class="nested_conditional_format_value_input_edit">\n                              <select class="select2 form-control select2_condition_class" required>\n                              </select>\n                              </div>\n                              </div>\n                              <div class="col-2">\n                              <input type="color" class="form-control nested_conditional_color_input_edit" data-css="background-color" value="#ffffff" >\n                              </div>\n                              <div class="col-1">\n                              <i class="fa fa-times nested_remove_conditional_parameter_edit" data-toggle="tooltip" title="Remove condition" style="cursor:pointer;margin-top:0.7em;"></i>\n                              </div>\n                          \n                          </div>',$(`#${id_condition_container}`).append(t),$(".select2").select2(),$(".select2_condition_class").select2({tags:!0}),$(`#${id_condition_container}`).find(".nested_conditional_body_edit").find(".nested_remove_conditional_parameter_edit").click(function(){$(this).closest(".nested_conditional_body_edit").remove()}),$(`#${id_condition_container}`).find(".nested_conditional_body_edit").find(".nested_conditional_column_name_edit").change(function(){$(this).find("option:selected").attr("data-datatype");$(this).parent().parent().find(".nested_conditional_condition_edit").empty(),$(this).parent().parent().find(".nested_conditional_condition_edit").append('<option value="" disabled selected>------------</option>');var t=new Array("Greater than","Smaller than","Equal to","Not equal to","In","Starts with","Ends with","Contains");for(let a=0;a<t.length;a++)$(this).parent().parent().find(".nested_conditional_condition_edit").append('<option value="'+t[a]+'">'+t[a]+"</option>")}),$(".nested_column_edit").change(function(){$(this).parent().parent().find(".nested_conditional_condition_edit").val("").trigger("change")}),$(`#${id_condition_container}`).find(".nested_conditional_body_edit").find(".nested_conditional_condition_edit").change(function(){var t=$(this).val();"Greater than"==t||"Smaller than"==t?"Category"==$(this).parent().parent().find(".nested_column_edit").val()?"DateField"==$(this).parent().parent().find(".nested_conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<input type="date" style="width:7.5em;" class="nested_conditional_value_edit"></input>')):"DateTimeField"==$(this).parent().parent().find(".nested_conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<input type="datetime-local" style="width:7.5em;" class="nested_conditional_value_edit"></input>')):($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<input type="number" style="height:2em;width:7.5em;" class="nested_conditional_value_edit"></input>')):($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<input type="number" style="height:2em;width:7.5em;" class="nested_conditional_value_edit"></input>')):"Equal to"==t||"Not equal to"==t?"Category"==$(this).parent().parent().find(".nested_column_edit").val()?"DateField"==$(this).parent().parent().find(".nested_conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<input type="date" style="width:7.5em;" class="nested_conditional_value_edit"></input>')):"DateTimeField"==$(this).parent().parent().find(".nested_conditional_column_name_edit").find("option:selected").attr("data-datatype")?($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<input type="datetime-local" style="width:7.5em;" class="nested_conditional_value_edit"></input>')):($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<select class="select2 select2_condition_class form-control condition_select2 nested_conditional_value_edit" required></select>')):($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<select class="select2 select2_condition_class form-control condition_select2 nested_conditional_value_edit" required></select>')):"In"==t?($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<select class="select2 select2_condition_class multiple form-control condition_multiple_select2 nested_conditional_value_edit" multiple required></select>')):($(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").empty(),$(this).parent().parent().find(".nested_conditional_input_value_edit").find(".nested_conditional_format_value_input_edit").append('<select class="select2 form-control select2_condition_class condition_select2 nested_conditional_value_edit" required></select>')),$(".select2_condition_class").select2({tags:!0})})}),$(`#${id6}`).attr("data-conditional_table",JSON.stringify(data.conditional_table));var datatablediv=document.getElementById(id_table);$(`#${id_table}`).empty(),$(`#${id_table}`).append(`\n                    <table id="${id_table}-table" class="display compact" style="width:100%;border: 1.5px solid black;">\n                        <thead>\n                            <tr>\n                            </tr>\n                        </thead>\n                        <tbody>\n                        </tbody>\n                    </table>\n                    `);for(var i=0;i<data.table_view.length;i++){string='<tr style="1px solid black;">';for(let[t,a]of Object.entries(data.table_view[i]))string+=`<td>${a}</td>`;string+="</tr>",$(`#${id_table}-table`).find("tbody").append(string)}var tableheaders=[];for(let[t,a]of Object.entries(data.table_view[0]))tableheaders.push(t),$(`#${id_table}-table`).find("thead tr").eq(0).append(`<th style="background-color: darkgoldenrod; color:white;">${t}</th>`);$(`#${id_table}-table`).DataTable();var table_data=data.table_view,tabledata=[],data2=[];for(let t=0;t<table_data.length;t++){let a=[];for(let e=0;e<tableheaders.length;e++)a.push(table_data[t][tableheaders[e]]);data2.push(a)}document.getElementById(id_table_export).onclick=function(){document.getElementById(id_tabledownload).click()},document.getElementById(id_tabledownload).onclick=function(){var t=[[...tableheaders],...data2],a=t.map(t=>t.map(t=>'"'+(t||"").toString().replace(/"/gi,'""')+'"').join(",")).join("\r\n"),e=new Blob([a],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),l=URL.createObjectURL(e);o.setAttribute("href",l),o.setAttribute("download",`${data.chartHeader}`+"_data.csv"),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},document.getElementById(id_tableshow).onclick=function(){"Table"==document.getElementById(id_tableicon).innerText?(document.getElementById(id_tableicon).innerText="N Table",$(`#${id_table_export}`).css("display","block"),document.getElementById(id).style.display="none",$(`#${id_tabledownload}`).css("display","block"),document.getElementById(id_table).style.display="block"):(document.getElementById(id_tableicon).innerText="Table",document.getElementById(id).style.display="block",document.getElementById(id_table).style.display="none",$(`#${id_tabledownload}`).css("display","none"),$(`#${id_table_export}`).css("display","none"))},columns=[];for(let t=0;t<data.final_cols.length;t++)columns.push({title:data.final_cols[t],field:data.final_cols[t]});var nested_conditional_table=data.conditional_table,open_close=!1;if(data.conditional_table.length>0&&null!=data.conditional_table[0].column_name)var open_close=!0;else var open_close=!1;var mappingDict=data.mappingDict,table=new Tabulator(`#${id}`,{data:data.table_data,layout:"fitDataFill",height:tab_height,dataTree:!0,dataTreeStartExpanded:open_close,dataTreeCollapseElement:"<i class='fas fa-minus tab_minus' style='font-size:0.8rem;color:darkgoldenrod'></i>&nbsp;&nbsp;",dataTreeExpandElement:"<i class='fas fa-plus tab_minus' style='font-size:0.8rem;color:darkgoldenrod'></i>&nbsp;&nbsp;",movableColumns:!0,resizableRows:!0,rowFormatter:function(t){var a=t.getData();for(let d=0;d<nested_conditional_table.length;d++){if("Greater than"==nested_conditional_table[d].column_condition){var e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("DateField"==nested_conditional_table[d].column_datatype){if("Category"==nested_conditional_table[d].nested_type){if(new Date(a.Category)>new Date(nested_conditional_table[d].condition_value))for(var o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]>parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if("DateTimeField"==nested_conditional_table[d].column_datatype){if("Category"==nested_conditional_table[d].nested_type){if(new Date(a.Category)>new Date(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]>parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if("FloatField"==nested_conditional_table[d].column_datatype){if("Category"==nested_conditional_table[d].column_condition){if(a.Category>parseFloat(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]>parseFloat(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if("Category"==nested_conditional_table[d].column_condition){if(a.Category>parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]>parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("Smaller than"==nested_conditional_table[d].column_condition){e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("DateField"==nested_conditional_table[d].column_datatype){if("Category"==nested_conditional_table[d].nested_type){if(new Date(a.Category)<new Date(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]<parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if("DateTimeField"==nested_conditional_table[d].column_datatype){if("Category"==nested_conditional_table[d].nested_type){
if(new Date(a.Category)<new Date(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]<parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if("FloatField"==nested_conditional_table[d].column_datatype){if("Category"==nested_conditional_table[d].column_condition){if(a.Category<parseFloat(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]<parseFloat(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if("Category"==nested_conditional_table[d].column_condition){if(a.Category<parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]<parseInt(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("Equal to"==nested_conditional_table[d].column_condition){if("Category"==nested_conditional_table[d].nested_type)if("DateField"==nested_conditional_table[d].column_datatype)var l=nested_conditional_table[d].condition_value;else if("DateTimeField"==nested_conditional_table[d].column_datatype)l=nested_conditional_table[d].condition_value.replace("T"," ");else l=nested_conditional_table[d].condition_value.toString();else l=nested_conditional_table[d].condition_value.toString();e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("Category"==nested_conditional_table[d].nested_type){if(a.Category.toString()==l)for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]==l)for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("Not equal to"==nested_conditional_table[d].column_condition){if("Category"==nested_conditional_table[d].nested_type)if("DateField"==nested_conditional_table[d].column_datatype)l=nested_conditional_table[d].condition_value;else if("DateTimeField"==nested_conditional_table[d].column_datatype)l=nested_conditional_table[d].condition_value.replace("T"," ");else l=nested_conditional_table[d].condition_value.toString();else l=nested_conditional_table[d].condition_value.toString();e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("Category"==nested_conditional_table[d].nested_type){if(a.Category.toString()!=l)for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e]!=l)for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("In"==nested_conditional_table[d].column_condition){e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("Value"==nested_conditional_table[d].nested_type){if(e in a&&nested_conditional_table[d].condition_value.includes(a[e].toString()))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(nested_conditional_table[d].condition_value.includes(a.Category.toString()))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("Starts with"==nested_conditional_table[d].column_condition){e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("Category"==nested_conditional_table[d].nested_type){if(a.Category.toString().startsWith(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e].toString().startsWith(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("Ends with"==nested_conditional_table[d].column_condition){e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("Category"==nested_conditional_table[d].nested_type){if(a.Category.toString().endsWith(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e].toString().endsWith(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}if("Contains"==nested_conditional_table[d].column_condition){e=fieldToVerbose(nested_conditional_table[d].column_name,mappingDict);if("Category"==nested_conditional_table[d].nested_type){if(a.Category.toString().includes(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)"Category"==t.getCells()[o]._cell.column.field&&a.tabulator_table_column_name==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}else if(e in a&&a[e].toString().includes(nested_conditional_table[d].condition_value))for(o=0;o<t.getCells().length;o++)t.getCells()[o]._cell.column.field==e&&t.getCells()[o]._cell.column.field==e&&(t.getCells()[o]._cell.element.style.backgroundColor=nested_conditional_table[d].condition_color)}}null!=a._children&&a._children.length>0&&(t.getElement().style.fontWeight="bold",t.getElement().getElementsByClassName("fas fa-plus").length>0&&t.getElement().getElementsByClassName("fas fa-plus")[0].insertAdjacentHTML("afterend","    "),t.getElement().getElementsByClassName("fas fa-minus").length>0&&t.getElement().getElementsByClassName("fas fa-minus")[0].insertAdjacentHTML("afterend","    "));t.getElementsByClassName},columns:columns});$(`#${id6}`).resizable({start:function(t,a){document.getElementById(id6).className;document.getElementById(id6).className="card charts ui-resizable ui-draggable ui-resizable-resizing"},stop:function(t,a){var e=$(`#${id6}`).height()-55+"px";$(`#${id}`).css("height",e),table.redraw()}}),$(`#${id_change_conditional_config}`).click(function(){var t=[];$(`#${id_condition_container}`).find(".nested_conditional_body_edit").each(function(){var a={};a.nested_type=$(this).find(".nested_column_edit").val(),a.column_name=$(this).find(".nested_conditional_column_name_edit").val(),a.column_datatype=$(this).find(".nested_conditional_column_name_edit").find("option:selected").attr("data-datatype"),a.column_condition=$(this).find(".nested_conditional_condition_edit").val(),a.condition_value=$(this).find(".nested_conditional_value_edit").val(),a.condition_color=$(this).find(".nested_conditional_color_input_edit").val(),t.push(a)});var a=[];for(let t=0;t<data.final_cols.length;t++)a.push({title:data.final_cols[t],field:data.final_cols[t]});$(`#${id6}`).attr("data-conditional_table",JSON.stringify(t)),filter_function()}),"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).find(".tabulator").css("background-color",plot_bg_color),$(".global_applyButton").click(function(){if(plotbg=$(".myDiv").css("background-color"),$(`#${id23}`).prop("checked")){plotbg=$(".myDiv").css("background-color"),$(prevDiv).css("border","0px"),$(".myDiv").css("border-spacing"," 15px 15px 15px 15px"),rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var t=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":t[(rgb[1]-rgb[1]%16)/16]+t[rgb[1]%16],g1=isNaN(rgb[2])?"00":t[(rgb[2]-rgb[2]%16)/16]+t[rgb[2]%16],b1=isNaN(rgb[3])?"00":t[(rgb[3]-rgb[3]%16)/16]+t[rgb[3]%16],bg_col="#"+r1+g1+b1;var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n),$(`#${id6}`).find(".tabulator").css("background-color",bg_col),$(`#${id22}`).val(bg_col),$(`#${id6}`).attr("data-bgcolor",bg_col),$(`#${id6}`).attr("data-global_bg_color",plotbg);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}}),$(`#${id23}`).click(function(){if($(this).prop("checked")){plotbg=$(".myDiv").css("background-color"),$(`#${id6}`).attr("data-globalbg","yes"),rgb=plotbg.match(/^\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var t=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");r1=isNaN(rgb[1])?"00":t[(rgb[1]-rgb[1]%16)/16]+t[rgb[1]%16],g1=isNaN(rgb[2])?"00":t[(rgb[2]-rgb[2]%16)/16]+t[rgb[2]%16],b1=isNaN(rgb[3])?"00":t[(rgb[3]-rgb[3]%16)/16]+t[rgb[3]%16],f="#"+r1+g1+b1;var a=document.getElementById(id_header),e=document.getElementById(id6),o=$(".global_header_bgcolor").val();change_header_bgcolor(e,a,o);var l=$(".global_header_color").val();change_header_color(e,a,l);var d=$(".global_header_fontsize").val();change_header_fontsize(e,a,d);var i=$(".global_header_fontweight").val();change_header_fontweight(e,a,i),$(`#${id_header_bgcolor}`).val(o),$(`#${id_header_color}`).val(l),$(`#${id_header_fontsize}`).val(d),$(`#${id_header_fontweight}`).val(i).trigger("change");var r=$(".global_header_fontstyle").val();change_header_fontstyle(e,a,r),$(`#${id_header_fontstyle}`).val(r).trigger("change");var n=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(n).trigger("change"),change_header_alignment(e,a,n),$(`#${id6}`).attr("data-header_alignment",n);var s=$(".global_shadow").prop("checked"),c=$(".global_border").prop("checked"),_=$(".global_shadow_color").val(),g=$(".global_shadow_x").val(),p=$(".global_shadow_y").val(),h=$(".global_shadow_blur").val(),b=$(".global_shadow_thickness").val();change_shadow_global(e,s,_,g,p,h,b);var y=$(".global_border_color").val(),u=$(".global_border_thickness").val(),m=$(".global_border_style").val();change_border_global(e,c,y,u,m),$(`#${id_shadow}`).prop("checked",s),$(`#${id_border}`).prop("checked",c),$(`#${id_shadow_color}`).val(_),$(`#${id_xshadow}`).val(g),$(`#${id_yshadow}`).val(p),$(`#${id_blurshadow}`).val(h),$(`#${id_shadow_thickness}`).val(b),$(`#${id_border_color}`).val(y),$(`#${id_border_thickness}`).val(u),$(`#${id_border_style}`).val(m).trigger("change"),$(`#${id_border}`).val(c),$(`#${id_shadow}`).val(s),$(`#${id6}`).attr("data-shadecolor",_),$(`#${id6}`).attr("data-borderStyle",m),$(`#${id6}`).attr("data-borderThickness",u),$(`#${id6}`).attr("data-borderColor",y),$(`#${id6}`).attr("data-borderon",c),$(`#${id6}`).attr("data-shadowon",s),$(`#${id6}`).attr("data-shadowThick",b),$(`#${id6}`).attr("data-shadowblurry",h),$(`#${id6}`).attr("data-shadowY",p),$(`#${id6}`).attr("data-shadowX",g)}else{var f=$(`#${id22}`).val();$(`#${id6}`).attr("data-globalbg","no")}$(`#${id22}`).val(f),$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px"),$(`#${id6}`).find(".tabulator").css("background-color",f),$(`#${id6}`).attr("data-bgcolor",f)}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no");var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),$(`#${id22}`).change(function(){plotbg=$(this).val(),$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).find(".tabulator").css("background-color",plotbg),$(`#${id6}`).attr("data-bgcolor",plotbg)}),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style),setPlotConfigLabelProperties(id6,id,id_label_color,id_label_fontsize,modalDataConfig.graph_subtype,dataplot,layout);var y_axisdata3=modalDataConfig.y_axis;nestedTableColunmReorder(id6,id_nestedtableColunm_Rearrange,y_axisdata3,id,data,id_nestedtableColunm_Rearrange_ul,id_nestedtableColunm_Rearrange_checkbox,id_nestedtableColunm_Rearrange_div),$(`#${id6}`).attr("data-label_color",label_color),$(`#${id6}`).attr("data-label_fontsize",label_fontsize),setTimeout(()=>{$(`#${id}`).find(".tabulator-sortable").css("color",label_color),$(`#${id}`).find(".tabulator-headers").css("font-size",label_fontsize+"px")},0),$(`#${id_label_color}`).val(label_color),$(`#${id_label_fontsize}`).val(label_fontsize);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),document.getElementById(id_filter_button).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})}}if(["Pivot_Table","Table_Barchart","Heatmap","Row_Heatmap","Col_Heatmap","Line_Chart","Bar_Chart","Stacked_Bar_Chart","Area_Chart","Scatter_Chart"].includes(String(graph_subtype))){var outermodalCard=plotlyGraphmodalSelection(modalDataConfig),current_pivot_config={};if("Pivot_Table"==data.graph_subtype?rendererName="Table":rendererName=data.graph_subtype.split("_").join(" "),void 0===data.plotDict)outerCard.appendTo(`#${plotDict.tabNameID}`),filterModal.appendTo(`#${plotDict.tabNameID}`),conditionalModal.appendTo(`#${plotDict.tabNameID}`),freezeModal.appendTo(`#${plotDict.tabNameID}`),outermodalCard.appendTo(`#${plotDict.tabNameID}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange),$(`#${id6}`).attr("data-second_column",data.second_column),current_pivot_config={rows:data.x_axis,rendererName:rendererName,aggregatorName:data.operation};else{var tab_height=data.plotDict.height-55+"px";outerCard.appendTo(`#${data.plotDict.tab_id}`),filterModal.appendTo(`#${data.plotDict.tab_id}`),conditionalModal.appendTo(`#${data.plotDict.tab_id}`),freezeModal.appendTo(`#${data.plotDict.tab_id}`),outermodalCard.appendTo(`#${data.plotDict.tab_id}`),$(`#${id6}`).attr("data-filter_input_final",plotDict.filter_input_final),$(`#${id6}`).attr("data-filter_dtrange",plotDict.drange),$(`#${id6}`).attr("data-filter_columns",plotDict.filters),current_pivot_config=JSON.parse(JSON.stringify(plotDict.pivot_report_data))}$(`#${id6}`).attr("data-operation",data.operation),$(`#${id_tableshow}`).css("display","none"),$(`#${id6}`).find(".graphcontainerdiv").append(`<table id="table_example${id}" class="display compact analysisWraptext" style="width:100%;height:100%;display:none;">\n                  <thead>\n                    <tr>\n                      \n                    </tr>\n                  </thead>\n                  <tbody>\n                  </tbody>\n                </table>`),google.load("visualization","1",{packages:["corechart"]});var latestconfig="";google.setOnLoadCallback(()=>{graphHeight=.85*$(`#${id6}`).height(),graphWidth=.825*$(`#${id6}`).width(),$(`#${id6}`).find(".graphcontainerdiv").pivotUI(data.content,{...current_pivot_config,renderers:$.extend($.pivotUtilities.renderers,$.pivotUtilities.plotly_renderers,$.pivotUtilities.d3_renderers,$.pivotUtilities.c3_renderers,$.pivotUtilities.gchart_renderers,$.pivotUtilities.subtotal_renderers),rendererOptions:{plotly:{width:graphWidth,height:graphHeight},c3:{width:graphWidth,height:graphHeight},d3:{width:graphWidth,height:graphHeight},gchart:{width:graphWidth,height:graphHeight,colors:["var(--primary-color)"]}},onRefresh:function(t){var a=JSON.parse(JSON.stringify(t));Object.keys(a).includes("aggregators")&&delete a.aggregators,Object.keys(a).includes("renderers")&&delete a.renderers,latestconfig=a}}),latestconfig&&(current_pivot_config=latestconfig),$(`#${id6} .graphcontainerdiv .pvtAggregator`).css("display","none"),$(`#${id6} .graphcontainerdiv .pvtRenderer`).css("display","none");var t=["Table","Table Barchart","Heatmap","Row Heatmap","Col Heatmap","Line Chart","Bar Chart","Stacked Bar Chart","Area Chart","Scatter Chart"];$(`#${id}_configure_pivot_charttype`).find("option").slice(1).remove();for(const a in t)$(`#${id}_configure_pivot_charttype`).append(new Option(t[a],t[a],!1,!1));$(`#${id}_configure_pivot_charttype`).val(rendererName).trigger("change"),$(`#${id}_configure_pivot_charttype`).on("change",function(){$(`#${id6} .graphcontainerdiv .pvtRenderer`).val(this.value).trigger("change")});var a=["Count","Count Unique Values","List Unique Values","Average","Sum","Interger Sum","Median","Sample Variance","Sample Standard Deviation","Minimum","Maximum","First","Last","Sum over Sum","80% Upper Bound","80% Lower Bound","Sum as Fraction of Total","Sum as Fraction of Rows","Sum as Fraction of Columns","Count as Fraction of Total"];$(`#${id}_configure_pivot_operation`).find("option").slice(1).remove();for(let t=0;t<a.length;t++)$(`#${id}_configure_pivot_operation`).append('<option value="'+a[t]+'">'+a[t]+"</option>");$(`#${id}_configure_pivot_operation`).val(data.operation).trigger("change"),$(`#${id}_configure_pivot_operation`).on("change",function(){$(`#${id6} .graphcontainerdiv .pvtAggregator`).val(this.value).trigger("change")}),pivotResize(id6,data.content,current_pivot_config,id,rendererName,data.operation)});var x_axisdata=data.x_axis;$(`#${id6}`).find(".graphcontainerdiv").css("overflow-y","scroll");var style=document.createElement("style");style.innerHTML=`#${id6}>.graphcontainerdiv::-webkit-scrollbar {display: none;}`,document.head.appendChild(style),"yes"==global_bg&&$(`#${id23}`).prop("checked",!0),$(`#${id_header_fontweight}`).val(header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(".global_applyButton").click(function(){if(plotbg=$(".myDiv").css("background-color"),$(`#${id23}`).prop("checked")){var t=document.getElementById(id_header),a=document.getElementById(id6),e=$(".global_header_bgcolor").val();change_header_bgcolor(a,t,e);var o=$(".global_header_color").val();change_header_color(a,t,o);var l=$(".global_header_fontsize").val();change_header_fontsize(a,t,l);var d=$(".global_header_fontweight").val();change_header_fontweight(a,t,d),$(`#${id_header_bgcolor}`).val(e),$(`#${id_header_color}`).val(o),$(`#${id_header_fontsize}`).val(l),$(`#${id_header_fontweight}`).val(d).trigger("change");var i=$(".global_header_fontstyle").val();change_header_fontstyle(a,t,i),$(`#${id_header_fontstyle}`).val(i).trigger("change");var r=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(r).trigger("change"),change_header_alignment(a,t,r),$(`#${id6}`).attr("data-header_alignment",r);var n=$(".global_shadow").prop("checked"),s=$(".global_border").prop("checked"),c=$(".global_shadow_color").val(),_=$(".global_shadow_x").val(),g=$(".global_shadow_y").val(),p=$(".global_shadow_blur").val(),h=$(".global_shadow_thickness").val();change_shadow_global(a,n,c,_,g,p,h);var b=$(".global_border_color").val(),y=$(".global_border_thickness").val(),u=$(".global_border_style").val();change_border_global(a,s,b,y,u),$(`#${id_shadow}`).prop("checked",n),$(`#${id_border}`).prop("checked",s),$(`#${id_shadow_color}`).val(c),$(`#${id_xshadow}`).val(_),$(`#${id_yshadow}`).val(g),$(`#${id_blurshadow}`).val(p),$(`#${id_shadow_thickness}`).val(h),$(`#${id_border_color}`).val(b),$(`#${id_border_thickness}`).val(y),$(`#${id_border_style}`).val(u).trigger("change"),$(`#${id_border}`).val(s),$(`#${id_shadow}`).val(n),$(`#${id6}`).attr("data-shadecolor",c),$(`#${id6}`).attr("data-borderStyle",u),$(`#${id6}`).attr("data-borderThickness",y),$(`#${id6}`).attr("data-borderColor",b),$(`#${id6}`).attr("data-borderon",s),$(`#${id6}`).attr("data-shadowon",n),$(`#${id6}`).attr("data-shadowThick",h),$(`#${id6}`).attr("data-shadowblurry",p),$(`#${id6}`).attr("data-shadowY",g),$(`#${id6}`).attr("data-shadowX",_)}}),$(`#${id23}`).click(function(){if($(this).prop("checked")){var t=document.getElementById(id_header),a=document.getElementById(id6),e=$(".global_header_bgcolor").val();change_header_bgcolor(a,t,e);var o=$(".global_header_color").val();change_header_color(a,t,o);var l=$(".global_header_fontsize").val();change_header_fontsize(a,t,l);var d=$(".global_header_fontweight").val();change_header_fontweight(a,t,d),$(`#${id_header_bgcolor}`).val(e),$(`#${id_header_color}`).val(o),$(`#${id_header_fontsize}`).val(l),$(`#${id_header_fontweight}`).val(d).trigger("change");var i=$(".global_header_fontstyle").val();change_header_fontstyle(a,t,i),$(`#${id_header_fontstyle}`).val(i).trigger("change");var r=$(".global_header_alignment").val();$(`#${id_header_alignment}`).val(r).trigger("change"),change_header_alignment(a,t,r),$(`#${id6}`).attr("data-header_alignment",r);var n=$(".global_shadow").prop("checked"),s=$(".global_border").prop("checked"),c=$(".global_shadow_color").val(),_=$(".global_shadow_x").val(),g=$(".global_shadow_y").val(),p=$(".global_shadow_blur").val(),h=$(".global_shadow_thickness").val();change_shadow_global(a,n,c,_,g,p,h);var b=$(".global_border_color").val(),y=$(".global_border_thickness").val(),u=$(".global_border_style").val();change_border_global(a,s,b,y,u),$(`#${id_shadow}`).prop("checked",n),$(`#${id_border}`).prop("checked",s),$(`#${id_shadow_color}`).val(c),$(`#${id_xshadow}`).val(_),$(`#${id_yshadow}`).val(g),$(`#${id_blurshadow}`).val(p),$(`#${id_shadow_thickness}`).val(h),$(`#${id_border_color}`).val(b),$(`#${id_border_thickness}`).val(y),$(`#${id_border_style}`).val(u).trigger("change"),$(`#${id_border}`).val(s),$(`#${id_shadow}`).val(n),$(`#${id6}`).attr("data-shadecolor",c),$(`#${id6}`).attr("data-borderStyle",u),$(`#${id6}`).attr("data-borderThickness",y),$(`#${id6}`).attr("data-borderColor",b),$(`#${id6}`).attr("data-borderon",s),$(`#${id6}`).attr("data-shadowon",n),$(`#${id6}`).attr("data-shadowThick",h),$(`#${id6}`).attr("data-shadowblurry",p),$(`#${id6}`).attr("data-shadowY",g),$(`#${id6}`).attr("data-shadowX",_),$(`#${id6}`).attr("data-globalbg","yes")}else $(`#${id6}`).attr("data-globalbg","no");$(prevDiv).css("border","0px"),$(this).css("border","1px solid rgb(47, 47, 141)"),$(this).css("border-spacing"," 15px 15px 15px 15px")}),$(`#${id23}`).prop("checked")?$(`#${id6}`).attr("data-globalbg","yes"):$(`#${id6}`).attr("data-globalbg","no");var bgcolor=$(`#${id22}`).val();$(`#${id6}`).attr("data-bgcolor",bgcolor),$(`#${id22}`).change(function(){plotbg=$(this).val(),$(`#${id6}`).attr("data-global_bg_color",plotbg),$(`#${id6}`).find(".tabulator").css("background-color",plotbg),$(`#${id6}`).attr("data-bgcolor",plotbg)}),$(`#${id6}`).attr("data-header_color",header_color),$(`#${id6}`).attr("data-header_bgcolor",header_bgcolor),$(`#${id6}`).attr("data-header_fontsize",header_fontsize),$(`#${id6}`).attr("data-header_fontweight",header_fontweight),$(`#${id_header_fontstyle}`).val(header_fontstyle),$(`#${id6}`).attr("data-header_fontstyle",header_fontstyle),$(`#${id_header_alignment}`).val(header_alignment),$(`#${id6}`).attr("data-header_alignment",header_alignment),setPlotConfigHeaderProperties(id_header,id6,id_header_alignment,id_header_fontstyle,id_header_bgcolor,id_header_color,id_header_fontsize,id_header_fontweight),$(`#${id_border_style}`).val(borderStyle),setShadowProperties(id6,id_shadow,id_shadow_color,id_xshadow,id_yshadow,id_blurshadow,id_shadow_thickness),setBorderProperties(id6,id_border,id_border_color,id_border_thickness,id_border_style);var div=document.getElementById(id6),shadowCheckBox=document.getElementById(id_shadow),borderCheckBox=document.getElementById(id_border);"true"==shadowon?(div.style.boxShadow=shadowXOffset+"px "+shadowYOffset+"px "+shadowBlur+"px "+shadowThickness+"px "+shadowColor,shadowCheckBox.checked=!0):(div.style.boxShadow="0 0 1px rgb(0 0 0 / 13%), 0 1px 3px rgb(0 0 0 / 20%)",shadowCheckBox.checked=!1),"true"==borderon?(div.style.border=borderThickness+"px "+borderStyle+" "+borderColor,borderCheckBox.checked=!0):(div.style.border="none",borderCheckBox.checked=!1),$(`#${id6}`).attr("data-shadecolor",shadowColor),$(`#${id6}`).attr("data-borderStyle",borderStyle),$(`#${id6}`).attr("data-borderThickness",borderThickness),$(`#${id6}`).attr("data-borderColor",borderColor),$(`#${id6}`).attr("data-borderon",borderCheckBox.checked),$(`#${id6}`).attr("data-shadowon",shadowCheckBox.checked),$(`#${id6}`).attr("data-shadowThick",shadowThickness),$(`#${id6}`).attr("data-shadowblurry",shadowBlur),$(`#${id6}`).attr("data-shadowY",shadowYOffset),$(`#${id6}`).attr("data-shadowX",shadowXOffset),document.getElementById(id_filter_button).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id_filter).style.top;document.getElementById(id_filter).style.top=a;var e=document.getElementById(id_filter).style.display;"none"==e?(document.getElementById(id_filter).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})):(document.getElementById(id_filter).style.display="none",$(".charts").each(function(){$(this).css("opacity","")}))},closeFilterModal(id_filter_close),document.getElementById(id5).onclick=function(){var t=document.getElementById(id5).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.id;deletePlotId6FromSlicerDict(t),deleteUpdatePlotID5(id5,t)},document.getElementById(id10).onclick=function(){
let t=document.getElementById(id10).parentElement.parentElement.parentElement.id;resetOpacity(t,typeClass="charts")},document.getElementById(id8).onclick=function(){var t=document.getElementById(id6),a=parseFloat(t.offsetTop-30)+"px";document.getElementById(id7).style.top;document.getElementById(id7).style.top=a;var e=document.getElementById(id7).style.display;if("none"==e){$(`#${id20}`).empty();var o="";for(slicer in slicerTabConfigDict)plotlist=slicerTabConfigDict[slicer],plotlist.includes(id6)&&(o=slicer);$(`.${o}`).each(function(){ToggleSlicerConfigure($(this),id6,id20,o)}),document.getElementById(id7).style.display="block",$(".charts").each(function(){$(this).attr("id")!=`${id6}`&&$(this).parent()[0].id==$(`#${id6}`).parent()[0].id&&$(this).css("opacity","0.5")})}else document.getElementById(id7).style.display="none",$(".charts").each(function(){$(this).css("opacity","")})}}if("Aggregation"===String(graph_subtype))$(`#${id6}`).attr("data-id",id),$(`#${id6}`).attr("data-subtype",graph_subtype),$(`#${id6}`).attr("data-data",data.value),$(`#${id6}`).attr("data-layout",data.title),$(`#${id6}`).attr("data-xaxis",x_axis),$(`#${id6}`).attr("data-yaxis",y_axis),$(`#${id6}`).attr("data-secondcolumn",second_column),$(`#${id6}`).attr("data-operation",operation),$(`#${id6}`).attr("data-operation_n",operation_n),$(`#${id6}`).attr("data-computed_number",computed_number),$(`#${id6}`).attr("data-is_title",is_title),$(`#${id6}`).attr("data-title_value",title_value),$(`#${id6}`).attr("data-agg_distinct",agg_distinct),"Top N"==operation||"Bottom N"==operation?($("#"+id_optionvalues+"operation_n").css("display","block"),null!=operation_n&&$("#"+id_optionvalues+"operation_ndropdown").val(operation_n).trigger("change"),null!=computed_number&&$("#"+id_optionvalues+"operation_ncomputed_number").val(computed_number).trigger("change")):$("#"+id_optionvalues+"operation_n").css("display","none");else if("Nested_Table"===String(graph_subtype)||"Table"===String(graph_subtype))$(`#${id6}`).attr("data-id",id),$(`#${id6}`).attr("data-operation",JSON.stringify(operation)),$(`#${id6}`).attr("data-subtype",graph_subtype),$(`#${id6}`).attr("data-table_name",tableName),$(`#${id6}`).attr("data-xaxis",JSON.stringify(x_axis)),$(`#${id6}`).attr("data-yaxis",JSON.stringify(y_axis));else if(["Pivot_Table","Table_Barchart","Heatmap","Row_Heatmap","Col_Heatmap","Line_Chart","Bar_Chart","Stacked_Bar_Chart","Area_Chart","Scatter_Chart"].includes(String(graph_subtype)))$(`#${id6}`).attr("data-id",id),$(`#${id6}`).attr("data-operation",operation),$(`#${id6}`).attr("data-subtype",graph_subtype),$(`#${id6}`).attr("data-table_name",tableName),$(`#${id6}`).attr("data-operation",operation),$(`#${id6}`).attr("data-xaxis",JSON.stringify(x_axis)),$(`#${id6}`).attr("data-yaxis",JSON.stringify(y_axis));else if("Image"===String(graph_subtype))$(`#${id6}`).attr("data-id",id),$(`#${id6}`).attr("data-subtype",graph_subtype),$(`#${id6}`).attr("data-table_name",tableName),$(`#${id6}`).attr("data-secondcolumn",second_column),$(`#${id6}`).attr("data-operation",e_id),$(`#${id6}`).attr("data-xaxis",x_axis),$(`#${id6}`).attr("data-yaxis",y_axis);else{$(`#${id6}`).attr("data-layout",JSON.stringify(tester.layout)),$(`#${id6}`).attr("data-id",id),$(`#${id6}`).attr("data-subtype",graph_subtype),$(`#${id6}`).attr("data-table_name",tableName),$(`#${id6}`).attr("data-total_y",total_y),$(`#${id6}`).attr("data-xaxis",x_axis),$(`#${id6}`).attr("data-yaxis",y_axis),$(`#${id6}`).attr("data-total_L",total_L);try{var changed_text=data.plotDict.changed_text}catch(t){var changed_text=[]}$(`#${id6}`).attr("data-changed_text",JSON.stringify(changed_text)),null==second_column?$(`#${id6}`).attr("data-secondcolumn","None"):$(`#${id6}`).attr("data-secondcolumn",second_column),null==operation?$(`#${id6}`).attr("data-operation","None"):$(`#${id6}`).attr("data-operation",operation),null!=operation_line&&$(`#${id6}`).attr("data-operation_line",operation_line);var val=$(`#${id_axis_order}`).val();if(val||""==val){var order_type=$(`#${id_axis_order}`).attr("order_type");let t=JSON.parse($(`#${id_axis_order}`).attr("datatype_dict"));var old_layout=$("#"+id6).attr("data-layout");old_layout=JSON.parse(old_layout);var layout=JSON.parse(JSON.stringify(old_layout));"Vertical"==order_type?"DateField"!=t[data.x_axis]&&"DateTimeField"!=t[data.x_axis]||changeAxisType(val,order_type,tester,old_layout,layout,id6):"Horizontal"==order_type&&("DateField"!=t[data.y_axis]&&"DateTimeField"!=t[data.y_axis]||changeAxisType(val,order_type,tester,old_layout,layout,id6))}var sorted_array=$(`#${idOrderModal}Button`).attr("data-sorted-values");""!=sorted_array&&"undefined"!=String(sorted_array)&&updateChart(id6,$(`#${idOrderModal}Button`).attr("data-sorted-values"))}if("Image"!==String(graph_subtype)){if("undefined"!==String(data.filter_input_final)){var STRING=`<div class="row"><div class="col-12 card-header" style="font-size: medium; color:var(--primary-color); font-weight: bold;"><input type="checkbox" id="${chartDivId+"__"}filter_dtrange" onclick="showDaterange_1.call(this)" class="float-right mt-2 checkboxinput custom-checkbox" style="margin: 0px; margin-left:-11px">\n                <p style="margin:0px;margin-left:-11px">Date Range</p>\n                </div><div class="col-12 ${chartDivId+"__"}showrange" style="display:none;">\n                <select class="select2 form-control ${chartDivId+"__"}seldatecol"><option value="" disabled selected>------</option></select><div>\n                <div style="margin-left:-0.7em;">\n                   <div class="col-6"> <div class="input-group date">\n        <b style="margin-right:1em;font-weight:600;color:var(--primary-color);margin-top: 1rem;">Start Date:</b>\n                                <div style="display:flex;">\n                                <input type="text" style="width:11rem;" id="${chartDivId+"__"}startdate" class="datepickerinput p-2 " data-dp-config="{&quot;id&quot;: &quot;dp_2&quot;, &quot;picker_type&quot;: &quot;DATE&quot;, &quot;linked_to&quot;: null, &quot;options&quot;: {&quot;showClose&quot;: true, &quot;showClear&quot;: true, &quot;showTodayButton&quot;: true, &quot;format&quot;: &quot;YYYY-MM-DD&quot;}}">\n                                <div class="input-group-addon input-group-append input-group-text" style="padding: 0.40rem .30rem"> <i class="glyphicon glyphicon-calendar"></i></div></div></div></div>\n        \n  \n                    <div class="col-6"> <div class="input-group date">\n                                <b style="margin-right:1em;font-weight:600;color:var(--primary-color);margin-top: 1rem;">End Date:</b>\n                                <div style="display:flex;">\n                                                        <input style="width:11rem;" type="text" id="${chartDivId+"__"}enddate" class="datepickerinput p-2 " data-dp-config="{&quot;id&quot;: &quot;dp_2&quot;, &quot;picker_type&quot;: &quot;DATE&quot;, &quot;linked_to&quot;: null, &quot;options&quot;: {&quot;showClose&quot;: true, &quot;showClear&quot;: true, &quot;showTodayButton&quot;: true, &quot;format&quot;: &quot;YYYY-MM-DD&quot;}}">\n                                                        <div class="input-group-addon input-group-append input-group-text" style="padding: 0.40rem .30rem"> <i class="glyphicon glyphicon-calendar"></i></div></div></div></div>\n  \n                 </div>\n             </div></div>`;cols=[],cols_ver=[];for(let t in data.filter_input_final){let a=data.filter_input_final[t].field_name,e=data.filter_input_final[t].column_name,o=data.filter_input_final[t].data_type,l=data.filter_input_final[t].filter_value;if(["CharField","TextField","DateField","DateTimeField","TimeField","BooleanField"].includes(o)){STRING+=`<div class="col-12 form-group">\n                        <label class="acies_label col-md-12" style="color:darkgoldenrod;font-size:larger;margin-left:-0.2rem">${e}:</label>\n                        <select  class="select2 categorical_filter_inputs form-control" name="${chartDivId+"__"}${a}" data-data_type="${o}"\n                          required multiple>`;let l=[];for(datafilter in data.filter_input_final[t].unique_data)l.push(data.filter_input_final[t].unique_data[datafilter]),STRING+=`<option value="${data.filter_input_final[t].unique_data[datafilter]}">${data.filter_input_final[t].unique_data[datafilter]}</option>`;STRING+="</select></div>"}["AutoField","IntegerField","BigIntegerField","FloatField"].includes(o)&&(STRING+=`<div class="col-12 form-group">\n                        <div class=""><b style="font-weight:bold;font-size:larger;color:darkgoldenrod" class="numerical_column_name">${e}:</b></div>\n                        <br>\n                        <div class="row">\n                        <div class="col-5">\n                        <select class="select2 numerical_column_condition" name="${chartDivId+"__"}${a}" data-data_type="${o}" required>\n  \n                            <option value="Equal to" selected>Equal to</option>\n                            <option value="Not Equal to">Not Equal to</option>\n                            <option value="Greater than">Greater than</option>\n                            <option value="Smaller than">Smaller than</option>\n                            <option value="Top N">Top N</option>\n                        </select>\n                        </div>\n                        <div class="col-7">\n                        <input type="number" placeholder="${a}" name="${chartDivId+"__"}${a}_input" style="padding-left:0.5rem" step="any" class="numberinput numerical_column_value form-control" value= "">\n                        </div>\n                        </div>\n                        </div>`),["DateField","DateTimeField"].includes(o)&&(cols.push(a),cols_ver.push(e))}STRING+=`<br><br><button id="${id_filter+"data"}" type="button" class="btn btn-primary btn-sm" style="height: 27px;width: 70px;border-radius: 5px;border-color: none;color: white;padding-top: 2px;margin-left:0.5rem;">\n               <i class="fas fa-filter"></i>&nbsp;Filter\n                 </button></div>`,$(`#${id_filter_container}`).empty(),$(`#${id_filter_container}`).append(STRING);for(let t=0;t<cols.length;t++)$(`.${chartDivId+"__"}seldatecol`).append(`<option value="${cols[t]}">${cols_ver[t]}</option>`);var config="";$(`#${chartDivId+"__"}startdate`).attr("data-dp-config")&&(config=JSON.parse($(`#${chartDivId+"__"}startdate`).attr("data-dp-config"))),$(`#${chartDivId+"__"}startdate`).datetimepicker({showClose:!0,showClear:!0,showTodayButton:!0,format:config.options.format,locale:"en"}),$(`#${chartDivId+"__"}enddate`).datetimepicker({showClose:!0,showClear:!0,showTodayButton:!0,format:config.options.format,locale:"en"}),$(".select2").select2()}if(null!=data.filter_data)for(i in data.filter_data){var column_name=data.filter_data[i].column_name,data_type=data.filter_data[i].data_category;if("Numerical"==data_type){var value_options=data.filter_data[i].condition_name;$(`select[name="${chartDivId+"__"}${column_name}"]`).val(data.filter_data[i].condition_name).trigger("change"),$(`input[name="${chartDivId+"__"}${column_name}_input"]`).val(data.filter_data[i].filter_value)}else $(`select[name="${chartDivId+"__"}${column_name}"]`).val(data.filter_data[i].filter_value).trigger("change")}}var max_width,max_height;(Object.keys(data.drange).length>0&&($(`.${chartDivId+"__"}showrange`).css("display","block"),$(`#${chartDivId+"__"}filter_dtrange`).prop("checked",!0),$(`.${chartDivId+"__"}seldatecol`).val(data.drange.col_name).trigger("change"),$(`#${chartDivId+"__"}startdate`).val(data.drange.start_date).trigger("change"),$(`#${chartDivId+"__"}enddate`).val(data.drange.end_date).trigger("change")),$(`#${id_filter+"data"}`).click(filter_function),$(".datacards").draggable({containment:"parent",handle:".handle_for_draggable_charts",opacity:.5,scrollSpeed:200,scrollSensitivity:100}),$(".charts").draggable({containment:"parent",handle:".handle_for_draggable_charts",opacity:.5,scrollSpeed:200,scrollSensitivity:100,zIndex:100,drag:function(t,a){var e=1/.94;a.position.left,a.position.right,a.position.top,a.position.bottom;__dx=(a.position.left-a.originalPosition.left)*e,__dx1=(a.position.right-a.originalPosition.right)*e,__dy=(a.position.top-a.originalPosition.top)*e,__dy1=(a.position.bottom-a.originalPosition.bottom)*e,a.position.left=a.originalPosition.left+__dx,a.position.right=a.originalPosition.right+__dx1,a.position.top=a.originalPosition.top+__dy,a.position.bottom=a.originalPosition.bottom+__dy1}}),$(".draggable_div").draggable({containment:"parent",opacity:.5,scrollSpeed:200,scrollSensitivity:100}),$(".modal-dialog").draggable({handle:".modal-header"}),$(".contentEditable").each(function(){$(this).on("click",function(){$(this).attr("contenteditable","true"),$(this).focus()}),$(this).focusout(function(){$(this).removeAttr("contenteditable")})}),document.getElementById(id16).onclick=function(){$(`#${id17}`).empty(),$(`#${id17}`).css("height",""),$(`#${id17}`).css("max-height","");document.getElementById(id16).style.display;$(".tabname").each(function(){tabrowname=$(this).attr("data-tab_ct"),tablistname=$(this)[0].innerHTML,$(`#${id17}`).append($(`<div class="row"><button type="button" class="btn btn-default analysisDashboardmove" data-plotClass="${id6}" data-gaugemodal="${idGaugeModal}" data-modalClass="${id7}" data-filterClass="${id_filter}" data-conditionalClass="${id_condition}" data-tab="${tabrowname}" data-tab_ct="${tabrowname}" style="font-size:0.85rem;">${tablistname}</button></div>`))});var t=parseInt($(`#${id6}`).height())-120+"px",a=parseInt($(`#${id17}`).height())+5+"px";$(`#${id17}`).css("height",t),$(`#${id17}`).css("max-height",a),$(`#${id17}`).css("overflow-y","scroll"),$(`#${id17}`).css("overflow-x","hidden"),$(".analysisDashboardmove").off("click").on("click",function(){var t=$(this).attr("data-plotclass"),a=t.replace("card","orderModalButton"),e=$("#"+a).attr("data-sorted-values");deletePlotId6FromSlicerDict(t),$(`#${id_filter}`).attr("data-slicer_value","No"),filter_function(),outerCard.find(`#${id17}`)[0].style.display="none",plotClassName=$(this).attr("data-plotClass"),modalClassName=$(this).attr("data-modalClass"),$("#"+t).find("path").each(function(){$(this).css("opacity",1)}),plotType="";for(let[a,e]of Object.entries(crossFilterDict1))for(let o=0;o<e.length;o++)if(e[o].id+"card"==t){plotType=e[o].plot_type,crossFilterDict1[a].splice(o,1);break}for(let[a,e]of Object.entries(crossFilterDict1))if(a==$(this).attr("data-tab_ct")){crossFilterDict1[a].push({id:t.split("card")[0],plot_type:plotType});break}new_tab_slicer="selectSlicerConfig_"+$(this).attr("data-tab_ct").replace("analysisrow",""),null==slicerTabConfigDict[new_tab_slicer]?(slicerTabConfigDict[new_tab_slicer]=[$(`#${modalClassName}`).attr("id").replace("modal","card")],slicerChangeUpdatePlots(app_code_)):slicerTabConfigDict[new_tab_slicer].push($(`#${modalClassName}`).attr("id").replace("modal","card")),filterClassName=$(this).attr("data-filterClass"),conditionalClassName=$(this).attr("data-conditionalClass"),freezeClassName="freeze_pane_modal_"+$(this).attr("data-conditionalClass").replace("conditional_modal","");var o=$(this).attr("data-tab_ct"),l=$(this).parent().parent().parent().parent().parent().parent().parent().parent().parent().parent(),d=$(`#${modalClassName}`),i=$(`#${filterClassName}`),r=$(`#${conditionalClassName}`),n=$(`#${freezeClassName}`);"Aggregation"==$(this).parent().parent().parent().parent().parent().parent().parent().parent().parent().parent().attr("data-subtype")?($(this).parent().parent().parent().parent().parent().parent().parent().parent().parent().parent().draggable("destroy"),$(this).parent().parent().parent().parent().parent().parent().parent().parent().parent().parent().draggable({containment:"parent"})):($(this).parent().parent().parent().parent().parent().parent().parent().parent().parent().parent().draggable("destroy"),$(this).parent().parent().parent().parent().parent().parent().parent().parent().parent().parent().css("position","absolute"),$(this).parent().parent().parent().parent().parent().parent().parent().parent().parent().parent().draggable({containment:"parent"})),l.appendTo(`#${o}`),d.appendTo(`#${o}`),i.appendTo(`#${o}`),r.appendTo(`#${o}`),n.appendTo(`#${o}`),$("#"+t.replace("card","")+"gaugeModal").appendTo(`#${o}`),$("#"+t.replace("card","")+"gaugeModalRange").appendTo(`#${o}`),$("#"+t.replace("card","")+"orderModal").appendTo(`#${o}`),setTimeout(()=>{$("#"+t.replace("card","")+"threshold").trigger("blur"),$("#"+t.replace("card","")+"gaugeModalSaveButton").trigger("click"),$("#"+t.replace("card","")+"gaugeModalRangeSaveButton").trigger("click"),$("#"+t.replace("card","")+"orderModalSaveButton").trigger("click"),$("#"+t).find("bg-arc").css("opacity",.3),$("#"+o).find("#"+t.replace("card","")+"orderModalButton").attr("data-sorted-values",e),e&&updateChart(t,e,colordata)},1e3)}),document.getElementById(id17).style.display="block",layout=$(".chartDivSection").attr("data-layout"),fixedHeight="Portrait"==layout?1105:715,id_id=$(this).find("button").eq(0).attr("data-id"),id_parent=$(this).find("button").eq(0).attr("data-id_parent"),"Aggregation"==$("#"+id_parent).attr("data-subtype")&&(topH=parseInt($("#"+id_parent).css("top")),fullHeight=parseInt($(this).parent().css("height")),totalHeight=topH+fullHeight+parseInt($("#"+id_id).css("height")),totalHeight>fixedHeight?setTimeout(()=>{$("#"+id_id).css("top",`-${totalHeight-fixedHeight+parseInt($(this).parent().css("top"))-20}px`)},100):$("#"+id_id).css("top","0rem"))},$(".nav-item").click(function(){$(`#${id17}`).css("display","none")}),document.getElementById(id16).onmouseleave=function(){$(`#${id17}`).css("display","none")},$(".export_data").off("click").on("click",function(){let t=$(this).attr("data-chart_id"),a=$(this).attr("data-slicer_id"),e=(document.getElementById(t).parentElement.parentElement.getAttribute("data-filter_columns"),document.getElementById(t).parentElement.parentElement.getAttribute("data-filter_input_final")),o=document.getElementById(t).parentElement.parentElement.getAttribute("data-filter_dtrange"),l=document.getElementById(t).parentElement.parentElement.getAttribute("data-table_name"),d=document.getElementById(t).parentElement.parentElement.getAttribute("data-subtype"),i=document.getElementById(t).parentElement.parentElement.getAttribute("data-xaxis"),r=document.getElementById(t).parentElement.parentElement.getAttribute("data-yaxis"),n=document.getElementById(t).parentElement.parentElement.getAttribute("data-secondcolumn"),s=document.getElementById(t).parentElement.parentElement.getAttribute("data-line_column"),c=($(this).attr("data-chart_header"),[]),_=[],g=analysisDataRaw.slicerTabConnectDict;for(let t=0;t<$(`.${a}`).length;t++)c.push($(`.${a}`).eq(t).val()),g[chartDivId+"card"].includes($(`.${slicerColumnId}`).eq(t).attr("data-slicerColumn"))||_.push($(`.${a}`).eq(t).attr("data-slicerColumn"));$.ajax({url:`/users/${urlPath}/export_data/`,data:{filter_input_final:e,tableName:l,graph_subtype:d,x_axis:i,y_axis:r,second_column:n,line_column:s,slicerColumn:JSON.stringify(_),slicerColumnValue:JSON.stringify(c),drange:o},type:"POST",success:function(t){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(new Blob([t],{type:"text/csv"})),a.download=`${d}_underlying_data.csv`,window.document.body.appendChild(a),a.click(),window.document.body.removeChild(a)}})}),"Landscape"==$(`#${id6}`).parent().attr("data-layout")||"Portrait"==$(`#${id6}`).parent().attr("data-layout"))?(void 0===data.plotDict&&($(".charts").eq(-2).parent().attr("id"),$(".charts").eq(-1).parent().attr("id")),"Landscape"!=$(`#${id6}`).parent().attr("data-layout")?(max_width=910,max_height=1106):(max_width=1200,max_height=720),width=parseInt($(".charts").eq(-1).css("width"))+parseInt($(".charts").eq(-1).css("left")),height=parseInt($(".charts").eq(-1).css("height"))+parseInt($(".charts").eq(-1).css("top")),max_height<height&&$(".charts").eq(-1).css("top","35px"),max_width<width&&$(".charts").eq(-1).css("left","15px")):void 0===data.plotDict&&($(".charts").eq(-1).css("height","560px"),"Aggregation"==$(".charts").eq(-1).attr("data-subtype")&&$(".charts").eq(-1).css("height","140px"));if(null!=data.plotDict)if(null!=$("#"+data.plotDict.tab_id).attr("data-count")){let t=parseInt($("#"+data.plotDict.tab_id).attr("data-count"));1==t&&$("#"+data.plotDict.tab_id).find(".loadingSymbol").remove(),t>0?(t-=1,$("#"+data.plotDict.tab_id).attr("data-count",t)):$("#"+data.plotDict.tab_id).find(".loadingSymbol").remove()}else $("#"+data.plotDict.tab_id).find(".loadingSymbol").remove();else $(".loadingSymbol").remove()},error:function(){$(".loadingSymbol").remove(),Swal.fire({icon:"error",text:"Error! Please try again."})}})}function showDaterange_1(){chartDivId=$(this).attr("id").replace("__filter_dtrange",""),$(this).is(":checked")?$(this).parent().parent().find(`.${chartDivId+"__showrange"}`).css("display","block"):$(this).parent().parent().find(`.${chartDivId+"__showrange"}`).css("display","none")}function publishDashboardShare(t){"Groups"==$(this).val()?($("#publishDashboardGroup"+t).parent().css("display","block"),$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"importGroup"},type:"POST",dataType:"json",success:function(a){for(i in $("#publishDashboardGroup"+t).empty(),a.data)$("#publishDashboardGroup"+t).append(`<option value="${a.data[i].id}">${a.data[i].name}</option>`)},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})):$("#publishDashboardGroup"+t).parent().css("display","none")}function publishDashboardSelect(t){"Tabs"==$("#publishDashboardSelect"+t).val()?($("#publishDashboardTabs"+t).parent().css("display","block"),$("#publishDashboardPlots"+t).parent().css("display","none"),$("#publishDashboardIndex"+t).parent().css("display","none"),$("#publishDashboardTabs"+t).empty(),$("#analysisTab"+t).find(".nav-link").each(function(){let a=$(this).attr("id"),e=$(this).text().trim();$("#publishDashboardTabs"+t).append(`<option value="${a}">${e}</option>`)})):($("#publishDashboardIndex"+t).parent().css("display","block"),$("#publishDashboardTabs"+t).parent().css("display","none"),$("#publishDashboardPlots"+t).parent().css("display","none")),"Plots"==$("#publishDashboardSelect"+t).val()&&($("#publishDashboardIndex"+t).parent().css("display","none"),$("#publishDashboardTabs"+t).parent().css("display","block"),$("#publishDashboardPlots"+t).parent().css("display","block"),$("#publishDashboardTabs"+t).empty(),$("#analysisTab"+t).find(".nav-link").each(function(){let a=$(this).attr("id"),e=$(this).text().trim();$("#publishDashboardTabs"+t).append(`<option value="${a}">${e}</option>`)}))}function publishDashboardTabs(t){"Plots"==$("#publishDashboardSelect"+t).val()&&($("#publishDashboardTabs"+t).parent().css("display","block"),$("#publishDashboardPlots"+t).parent().css("display","block"));let a=$(this).val().replace("tab","row");$("#publishDashboardPlots"+t).empty(),$("#"+a).find(".charts").each(function(){let a=$(this).attr("id");$("#publishDashboardPlots"+t).append(`<option value="${a}">${$(this).attr("data-subtype")} (${$(this).attr("data-table_name")})</option>`)})}function importDashboardTab(t){let a,e=$(this).val(),o=$("#importDashboardSubprocess"+t).val().split("_")[0];a=$("#importDashboardSubprocess"+t).val().split("_")[1];let l=JSON.parse($("#importDashboardApp"+t).attr("data-data"));$("#importDashboardPlot"+t).empty(),$("#importDashboardPlot"+t).append('<option value="">---</option>');for(let d in l)if(l[d].subprocess_code==o&&l[d].dashboard_config_id==a&&l[d].dashboard_type==$("#importDashboardType"+t).val()&&l[d].tab_id==e){let a=JSON.parse(l[d].plots_id),o=JSON.parse(l[d].plots_name),i=a[e],r=o[e];for(let a in i)$("#importDashboardPlot"+t).append(`<option value="${i[a]}">${r[a]}</option>`)}}function importDashboardType(t){"Tabs"==$(this).val()?($("#importDashboardTab"+t).val("").trigger("change"),$("#importDashboardPlot"+t).parent().css("display","none"),$("#importDashboardTab"+t).parent().css("display","block"),$("#importDashboardPlotTab"+t).parent().css("display","none"),$("#importDashboardDashboard"+t).parent().css("display","none")):"Plots"==$(this).val()?($("#importDashboardTab"+t).val("").trigger("change"),$("#importDashboardPlot"+t).parent().css("display","block"),$("#importDashboardTab"+t).parent().css("display","block"),$("#importDashboardPlotTab"+t).parent().css("display","block"),$("#importDashboardDashboard"+t).parent().css("display","none"),$("#importDashboardPlotTab"+t).empty(),$("#importDashboardPlotTab"+t).append('<option value="">---</option>'),$("#analysisTab"+t).find(".nav-link").each(function(){let a=$(this).attr("id"),e=$(this).text().trim();$("#importDashboardPlotTab"+t).append(`<option value="${a}">${e}</option>`)})):($("#importDashboardPlot"+t).parent().css("display","none"),$("#importDashboardPlotTab"+t).parent().css("display","none"),$("#importDashboardDashboard"+t).parent().css("display","none"),$("#importDashboardTab"+t).parent().css("display","none"))}function importDashboardSubprocess(t){let a,e=$(this).val().split("_")[0];a=$(this).val().split("_")[1];let o=JSON.parse($("#importDashboardApp"+t).attr("data-data"));$("#importDashboardTab"+t).empty(),$("#importDashboardTab"+t).append('<option value="">---</option>');for(let l in o)o[l].subprocess_code!=e||o[l].dashboard_config_id!=a||"Plots"!=o[l].dashboard_type&&"Tabs"!=o[l].dashboard_type||$("#importDashboardTab"+t).append(`<option value="${o[l].tab_id}">${o[l].tab_name}</option>`)}function importDashboardApp(t){let a=$(this).val(),e=JSON.parse($("#importDashboardApp"+t).attr("data-data"));$("#importDashboardSubprocess"+t).empty(),$("#importDashboardSubprocess"+t).append('<option value="">---</option>');let o=[];for(let l in e)e[l].app_code==a&&(o.includes(e[l].dashboard_config_id)||($("#importDashboardSubprocess"+t).append(`<option data-id="${e[l].dashboard_config_id}" value="${e[l].subprocess_code}_${e[l].dashboard_config_id}">${e[l].subprocess_name}</option>`),$("#importDashboardSubprocess"+t).find("option").each(function(){o.push($(this).attr("data-id"))})))}function importDashboardSelect(t){$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"importDasboard",shared:$("#importDashboardSelect"+t).val()},type:"POST",dataType:"json",success:function(a){$("#importDashboardApp"+t).attr("data-data",JSON.stringify(a.data)),$("#importDashboardApp"+t).empty(),$("#importDashboardApp"+t).append('<option value="">---</option>');let e=[];for(let o in a.data)e.includes(a.data[o].app_code)||($("#importDashboardApp"+t).append(`<option value="${a.data[o].app_code}">${a.data[o].application_name}</option>`),$("#importDashboardApp"+t).find("option").each(function(){e.push($(this).attr("value"))}))},error:function(){Swal.fire({icon:"error",text:"Error! Please try again."})}})}function importDashboard(t,a=!1,e={}){let o="",l="";if(0==a){let a=$("#importDashboardSubprocess"+t).val().split("_")[0],d=JSON.parse($("#importDashboardApp"+t).attr("data-data"));o=$("#importDashboardApp"+t).val(),l=$("#importDashboardPlotTab"+t).val();for(let e in d)d[e].app_code==o&&d[e].subprocess_code==a&&"Entire dashboard"==d[e].dashboard_type&&(editDashboard=d[e].edit_type,editType=d[e].edit_type),d[e].app_code==o&&d[e].subprocess_code==a&&"Tabs"==d[e].dashboard_type&&d[e].tab_id==$("#importDashboardTab"+t).val()&&(editTab=d[e].edit_type,editType=d[e].edit_type),d[e].app_code==o&&d[e].subprocess_code==a&&"Plots"==d[e].dashboard_type&&d[e].tab_id==$("#importDashboardTab"+t).val()&&d[e].plots_id.includes($("#importDashboardPlot"+t).val())&&(editChart=d[e].edit_type,editType=d[e].edit_type);let i=$("#importDashboardSubprocess"+t).val().split("_")[1];e={app_code:$("#importDashboardApp"+t).val(),pr_code:a,tab_id:$("#importDashboardTab"+t).val(),plot_id:$("#importDashboardPlot"+t).val(),shared_type:$("#importDashboardSelect"+t).val(),element_id:t,cont_id:$("#importDashboardPlotTab"+t).val(),dashboard_type:$("#importDashboardType"+t).val(),dashboard_id:$("#importDashboardDashboard"+t).val(),dashboard_config_id:i}}else o=e.app_code,l=e.cont_id,editType=e.edit_type;$("#publishDashboard1"+t).html('<i class="fa fa-spinner fa-pulse loadingSymbol"></i>'),$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"importDasboardSave",config:JSON.stringify(e)},type:"POST",dataType:"json",success:function(d){if(editType=d.editType,sharedConfig.element_id=t,0==a&&(e.edit_type=editType,null==sharedConfig.config&&(sharedConfig.config=[]),sharedConfig.config.push(e)),$("body").find("div").eq(0).removeAttr("app_code"),$(".chartDivSection").removeAttr("app_code"),"Entire dashboard"==d.dashboard_type){let a={save:d.data,analysis_table_list:d.analysis_table_list,dashboard_index:d.dashboard_index};$("body").find("div").eq(0).attr("app_code",o),savedChartConfigFunc(a,o,t),$("#publishDashboard1"+t).html("Save"),$("#publishDashboard1"+t).attr("disabled",!1),dashboardSave_=!1}else if("Plots"==d.dashboard_type){let a=l;if($("#"+a).hasClass("active"))d.chartJson[0].app_code=o,plotChartsAnalysis(!0,d,l.replace("tab","row"),o);else{let t=[];null!=$("#"+a).attr("data-data")&&(t=JSON.parse($("#"+a).attr("data-data"))),d.chartJson[0].app_code=o,t.push(d.chartJson[0]),$("#"+a).attr("data-data",JSON.stringify(t))}$("#publishDashboard1"+t).html("Save"),$("#publishDashboard1"+t).attr("disabled",!1)}else{$("#analysisAddTab"+t).trigger("click");let e=$("#analysisTab"+t).find(".nav-link").eq(-1).attr("id");$("#"+e.replace("tab","row")).attr("app_code",o);let l=e.replace("analysistab"+t,"");function i(l,i,r){var n=$("form").find("input[name='csrfmiddlewaretoken']").attr("value");$.ajaxSetup({beforeSend:function(t,a){t.setRequestHeader("X-CSRFToken",n)}}),$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{tab_slicer_config:JSON.stringify(l),element_id:i,tab_id:r,app_code:o,operation:"saveAnalysisSlicerConfigL3"},type:"POST",dataType:"json",success:function(l){var i=l.elementID,r=l.slicer_tab_id;$(`#tab${i}${r}`).find(".card-tools.tabCardTools").empty(),$(`#tab${i}${r}`).find(".card-tools.tabCardTools").append(`<button type="button" value="AddComment" class="btn btn-primary commentButton btn-md" id="AddComment${i}${r}"  data-toggle="tooltip" title="Add comment" style="height: 25px;border-radius:5px;border-color:none;color:white;margin-top:10px; margin-bottom:10px"><i class='far fa-comment-dots' style="font-size:1rem;"></i></button>&nbsp;        <button type="button" value="PDF" class=" btn btn-primary" data-tabHeaderID="tabHeader${i}${r}" id='analysisPDF${i}${r}' style="height: 25px;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;  margin-right:5px;margin-top:10px; margin-bottom:10px"><i class="fa fa-file-pdf-o"></i>&nbsp;PDF</button>          <button type="button" value="slicerConfig" class="btn btn-primary" data-tabHeaderID="tabHeader${i}${r}" id='slicerConfig${i}${r}' data-toggle="modal" data-target="#slicerConfigModal${i}${r}" style="height: 25px;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px; margin-right:10px; margin-top:10px; margin-bottom:10px"><i class="fas fa-filter"></i>&nbsp;Slicer</button><button type="button" value="gridLines" class="btn btn-primary" data-tabHeaderID="tabHeader${i}${r}" id='gridLines${i}${r}' style="height: 25px;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px; margin-right:10px; margin-top:10px; margin-bottom:10px" onclick="gridLine.call(this)"><i class="fa fa-table"></i>&nbsp;Grid lines</button>`);let n=l[r],s=n.analysis_additional_config;if("slicer_config"==s){let t=n.slicerTable,a=n.slicerParameter,e=n.mappingDict,o=n.slicer_parameter_values,l=n.slicerBoolean,d=n.slicerReload,s=n.multipleSlicer;var c="";for(let n=0;n<o.length;n++){let _='data-value = ""',g="";null!=d&&0!=d.length&&(_="data-value"+`= '${JSON.stringify(d[n])}'`),null!=s&&s.length>0&&s[n]&&(g="multiple"),
c+=`\n                      <div class="form-inline">\n                      <span style="color:var(--primary-color); margin-right:10px; margin-left:10px;">${e[n][a[n]]}:</span>\n                      <select class="selectSlicerConfig_${i}${r} select2 form-control slicerParamValue${i}" data-tab="${r}" data-slicertable="${t[n]}" data-slicerColumn= "${a[n]}" ${_} data-id="selectSlicerConfig_${i}${r}" style="width:150px;display:inline-block;" ${g}>`,null!=l&&0!=l.length&&"True"==l[n]&&(c+='<option value="" selected>All</option>');for(let t=0;t<o[n].length;t++)""!=o[n][t]&&(c+=`<option value="${o[n][t]}">${o[n][t]}</option>`);c+="</select>\n                      </div>\n                      "}$(`#tab${i}${r}`).find(".card-tools.tabCardTools").append(c),$(`#tab${i}${r}`).find(".card-tools.tabCardTools").find(".select2").select2(),$(`#tab${i}${r}`).find(".card-tools.tabCardTools").find(".select2").parent().find(".select2-container").css("max-height","55px"),$(`#tab${i}${r}`).find(".card-tools.tabCardTools").find(".select2").parent().find(".select2-container").css("overflow-y","scroll")}slicerChangeUpdatePlots(o),$("#"+e).find(".tabname").text(d.config.subTabName),$("#"+e.replace("analysis","index")).find("a").text(d.config.subTabName),plotChartsAnalysis(!0,d,e.replace("tab","row"),o,tab=!0),$("#publishDashboard1"+t).html("Save"),$("#publishDashboard1"+t).attr("disabled",!1),0==a&&Swal.fire({icon:"success",text:"Imported successfully."})},error:function(){$("#publishDashboard1"+t).attr("disabled",!1),Swal.fire({icon:"error",text:"Error! Failure in fetching the columns. Please try again."})}})}fetchSlicerParams(o),i(d.config.tabSlicerConfig,t,l)}},error:function(){$("#publishDashboard1"+t).prop("disabled",!1),Swal.fire({icon:"error",text:"Error! Please try again."})}})}function saveDashboard(t){let a=$("#publishDashboardTabs"+t).val(),e={};e[a]=$("#publishDashboardPlots"+t).val();let o="";$("#publishDashboardTabs"+t).find("option").each(function(){$(this).attr("value")==$("#publishDashboardTabs"+t).val()&&(o=$(this).text())});let l={};l[a]=[],$("#publishDashboardPlots"+t).find("option").each(function(){$("#publishDashboardPlots"+t).val().includes($(this).attr("value"))&&l[a].push($(this).text())}),dic={dashboard_type:$("#publishDashboardSelect"+t).val(),dashboard_id:t,tab_id:$("#publishDashboardTabs"+t).val(),tab_name:o,plots_id:JSON.stringify(e),plots_name:JSON.stringify(l),shared_type:$("#publishDashboardShare"+t).val(),edit_type:$("#publishDashboardEdit"+t).val(),subprocess_group:JSON.stringify($("#publishDashboardGroup"+t).val())},$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"publishDasboard",element_id:t,config:JSON.stringify(dic)},type:"POST",dataType:"json",success:function(a){if($("#publishDashboard0"+t).prop("disabled",!1),""!=$(`#publishDashboard${t}`).attr("data-custom-message")){var e=JSON.parse($(`#publishDashboard${t}`).attr("data-custom-message"));Swal.fire({icon:"success",iconHtml:`<i class = "${e.icon}"></i>`,text:e.message})}else Swal.fire({icon:"success",text:"Dashboard Published successfully"})},error:function(){$("#publishDashboard0"+t).prop("disabled",!1),Swal.fire({icon:"error",text:"Error! Please try again."})}})}function slicerChangeUpdatePlots(t=""){for(slicer in slicerTabConfigDict)$(`.${slicer}`).attr("app_code",t),$(`.${slicer}`).off("select2:select select2:unselect").on("select2:select select2:unselect",function(){let t=$(this).attr("app_code");const a=$(this).attr("data-id");$(this).trigger("change");const e=[],o=[];let l=[],d=[];for(let t=0;t<$(`.${a}`).length;t++)e.push($(`.${a}`).eq(t).val()),o.push($(`.${a}`).eq(t).attr("data-slicerColumn"));for(id6 of slicerTabConfigDict[a]){if(l=[],d=[],Object.keys(slicerTabConnectDict).includes(id6)){const t=slicerTabConnectDict[id6];if(t.length>0)for(let a=0;a<o.length;a++)!1===t.includes(o[a])&&(l.push(e[a]),d.push(o[a]));else l=e,d=o}const a=$(`#${id6}`).attr("data-subtype");if("Image"!=a){const e=$(`#${id6}`).attr("data-xaxis"),o=$(`#${id6}`).attr("data-yaxis"),i=$(`#${id6}`).attr("data-operation"),r=$(`#${id6}`).attr("data-operation_line"),n=$(`#${id6}`).attr("data-conditional_table");let s=$(`#${id6}`).attr("data-filter_input_final");"undefined"===String(s)&&(s=JSON.stringify([]));let c=$(`#${id6}`).attr("data-filter_dtrange");const _=$(`#${id6}`).attr("data-line_column"),g=$(`#${id6}`).attr("data-secondcolumn"),p=$(`#${id6}`).attr("data-total_y"),h=$(`#${id6}`).attr("data-total_L"),b=$(`#${id6}`).attr("data-computed_number"),y=$(`#${id6}`).attr("data-is_title"),u=$(`#${id6}`).attr("data-title_value"),m=$(`#${id6}`).attr("data-operation_n"),f=$(`#${id6}`).attr("data-agg_distinct"),v=$(`#${id6}`).attr("data-id"),x=v+"resetlabels",w=$(`#${id6}`).attr("data-formatters_config_table"),k=$(`#${id6}`).attr("data-table_name");if(k){const $={operation:"filter",conditional_table:n,filter_input_final:s,tableName:k,graph_subtype:a,chart_id:v,x_axis:e,y_axis:o,second_column:g,line_column:_,total_y:p,total_L:h,operation_n:m,agg_distinct:f,computed_number:b,is_title:y,title_value:u,aggregation:i,operation_line:r,colValue:l,slicerColumn:d,slicerColumnValue:l,id18:x,drange:c,app_code:t,formatters_config:w};updateChartOperation($,t)}}}})}function resetTab(){const t=$("#tab-list li:not(:first)");let a=1;$(t).each(function(t,e){a++,$(this).find("a").html("Tab "+a+button)}),tabID--}function global_apply_button_click(){var t=null!=document.getElementById(`myColor${elementID}`)?document.getElementById(`myColor${elementID}`).value:"";$(`#analysisTabContent${elementID}`).find(".chartDivSection").css("background-color",t),$(`#analysisTabContent${elementID}`).find(".chartDivSection").attr("config_background-color",t),$(`#analysisDashboard${elementID} .tab-content`).attr("config_background-color",t),$(`#analysisTab${elementID}`).find(".nav-link").attr("config_background-color",t),"background_image"==$(`#global_bg${elementID}`).val()?""==$(`#bg_image_url${elementID}`).html()&&null==$(`#bg_image_url${elementID}`).html()||("Landscape"==$(`#analysisTabContent${elementID}`).find(".chartDivSection").attr("data-layout")?$(`#analysisTabContent${elementID}`).find(".chartDivSection").css("background-size","1920px calc(100vw * 9/16)"):"Portrait"==$(`#analysisTabContent${elementID}`).find(".chartDivSection").attr("data-layout")?$(`#analysisTabContent${elementID}`).find(".chartDivSection").css("background-size","1080px calc(100vw * 16/9)"):$(`#analysisTabContent${elementID}`).find(".chartDivSection").css("background-size","100%"),$(`#analysisTabContent${elementID}`).find(".chartDivSection").css("background-image","url(data:image/png;base64,"+$(`#bg_image_url${elementID}`).html())):($(`#analysisTabContent${elementID}`).find(".chartDivSection").css("background-size","5% 5%"),$(`#analysisTabContent${elementID}`).find(".chartDivSection").css({"background-image":"linear-gradient(rgba(0, 0, 0, 0.2) 0.05rem, transparent 0.36%), linear-gradient(90deg, rgba(0, 0, 0, 0.2) 0.05rem, transparent 0.36%)"}))}function htmlGaugeCondition(){return'\n      <div class="row indCondition" style="margin-top:20px;">\n        <div class="col-4">\n          <select class="select2 form-control indCond" onchange="changeSelectTag.call(this)">\n            <option value="Equal to">Equal to</option>\n            <option value="Not Equal to">Not Equal to</option>\n            <option value="Greater than">Greater than</option>\n            <option value="Smaller than">Smaller than</option>\n          </select>\n        </div>\n        <div class="col-4">\n          <select class="select2 form-control indValue">\n          </select>\n        </div>\n        <div class="col-3">\n          <input type="color" class="form-control indColor">\n        </div>\n        <div class="col-1">\n          <i class="fas fa-remove" onclick="removeIndCondition.call(this)" style="font-size: initial;"></i>\n        </div>\n      </div>\n    '}function gaugeModal(){let t=$(this).attr("data-modal_id"),a=$(this).attr("data-value");[void 0,null].includes(a)||($("#"+t).find(".modal-body").find(".indCondition").each(function(){$(this).remove()}),a=JSON.parse(a),populateGaugeModal(t,a)),$("#"+t).css("display","block")}function populateGaugeModal(t,a){for(let e=0;e<a.length;e++)$("#"+t).find(".modal-body").append(htmlGaugeCondition()),$("#"+t).find(".modal-body").find(".indCondition").find("select").select2({tags:!0}),$("#"+t).find(".modal-body").find(".indCondition").eq(-1).find(".indValue").append(`<option value="${a[e].value}">${a[e].value}</option>`),$("#"+t).find(".modal-body").find(".indCondition").eq(-1).find(".indValue").val(a[e].value).trigger("change"),$("#"+t).find(".modal-body").find(".indCondition").eq(-1).find(".indCond").val(a[e].condition).trigger("change"),$("#"+t).find(".modal-body").find(".indCondition").eq(-1).find(".indColor").val(a[e].color).trigger("change")}function addIndCondition(){let t=$(this).attr("data-modal_id");$("#"+t).find(".modal-body").append(htmlGaugeCondition()),$("#"+t).find(".modal-body").find(".indCondition").find("select").select2({tags:!0})}function removeIndCondition(){$(this).closest(".indCondition").remove()}function changeSelectTag(){"In"!=$(this).val()&&"Not In"!=$(this).val()||($(this).closest(".indCondition").find(".indVal").select2("destroy"),$(this).closest(".indCondition").find(".indVal").attr("multiple","multiple"),$(this).closest(".indCondition").find(".indVal").select2({tags:!0}))}function closeGaugeModal(){let t=$(this).attr("data-modal_id");$("#"+t).css("display","none")}function returnGaugeColor(t,a,e){let o=[],l="darkgoldenrod",d=$(".bodyAnalysis").attr("id"),i=d.replace("analysisDashboard","");return i="themeColor1"+i,l=$("#"+i).val(),t.closest(".modal-content").find(".indCondition").each(function(){o.push({value:$(this).find(".indValue").val(),condition:$(this).find(".indCond").val(),color:$(this).find(".indColor").val()}),"Greater than"==$(this).find(".indCond").val()?parseInt(a[0].value)<parseInt($(this).find(".indValue").val())&&(l=$(this).find(".indColor").val()):"Smaller than"==$(this).find(".indCond").val()?parseInt(a[0].value)>parseInt($(this).find(".indValue").val())&&(l=$(this).find(".indColor").val()):"Equal to"==$(this).find(".indCond").val()?parseInt(a[0].value)==parseInt($(this).find(".indValue").val())&&(l=$(this).find(".indColor").val()):"Not Equal to"==$(this).find(".indCond").val()&&parseInt(a[0].value)!=parseInt($(this).find(".indValue").val())&&(l=$(this).find(".indColor").val())}),{dataValue:o,gaugeBarColor:l}}function htmlGaugeConditionRange(){return'\n      <div class="row indCondition" style="margin-top:20px;">\n        <div class="col-4">\n          <input type="number" class="form-control indValueStart">\n        </div>\n        <div class="col-4">\n          <input type="number" class="form-control indValueEnd">\n        </div>\n        <div class="col-3">\n          <input type="color" class="form-control indColor">\n        </div>\n        <div class="col-1">\n          <i class="fas fa-remove" onclick="removeIndCondition.call(this)" style="font-size: initial;"></i>\n        </div>\n      </div>\n    '}function gaugeModalRange(){let t=$(this).attr("data-modal_id"),a=$(this).attr("data-value");[void 0,null].includes(a)||($("#"+t).find(".modal-body").find(".indCondition").each(function(){$(this).remove()}),a=JSON.parse(a),populateGaugeModalRange(t,a)),$("#"+t).css("display","block")}function populateGaugeModalRange(t,a){for(let e=0;e<a.length;e++)$("#"+t).find(".modal-body").append(htmlGaugeConditionRange()),$("#"+t).find(".modal-body").find(".indCondition").find("select").select2({tags:!0}),$("#"+t).find(".modal-body").find(".indCondition").eq(-1).find(".indValueStart").val(a[e].range[0]).trigger("change"),$("#"+t).find(".modal-body").find(".indCondition").eq(-1).find(".indValueEnd").val(a[e].range[1]).trigger("change"),$("#"+t).find(".modal-body").find(".indCondition").eq(-1).find(".indColor").val(a[e].color).trigger("change")}function addIndConditionRange(){let t=$(this).attr("data-modal_id");$("#"+t).find(".modal-body").append(htmlGaugeConditionRange()),$("#"+t).find(".modal-body").find(".indCondition").find("select").select2({tags:!0})}function returnGaugeColorRange(t,a){let e=[];return t.closest(".modal-content").find(".indCondition").each(function(){e.unshift({range:[parseInt($(this).find(".indValueStart").val()),parseInt($(this).find(".indValueEnd").val())],color:$(this).find(".indColor").val()})}),{dataValue:e}}function changeOrder(){var t=$(this).val();let a=$(this).attr("data-chart-id"),e=$(`#${a}`).attr("data-config_x_axis_title"),o=$(`#${a}`).attr("data-config_y_axis_title"),l=JSON.parse($(this).attr("mappingDict")),d=JSON.parse($(this).attr("datatype_dict"));var i=a.split("card")[0],r=i+"orderModalButton",n=$("#"+a).attr("data-subtype"),s=$("#"+a).attr("data-xaxis"),c=$("#"+a).attr("data-yaxis"),_=document.getElementById(i);let g=$(this).attr("order_type");null!=g&&""!=g||(g="Vertical");var p,h="category ascending",b=$("#"+a).attr("data-layout");b=JSON.parse(b);var y=$("#"+a).attr("data-data");if(y=JSON.parse(y),"cust"==t)$("#"+r).css("display","block");else{if($("#"+r).css("display","none"),"asc"==t?h="category ascending":"desc"==t&&(h="category descending"),"Vertical"==g?(p={xaxis:{title:{standoff:20,text:e||fieldToVerbose(s,l),font:{family:"Arial"}},categoryorder:h,showgrid:!1,automargin:!0,font:{family:"Arial"}}},b.xaxis=p.xaxis):"Horizontal"==g&&(p={yaxis:{title:{standoff:20,text:o||fieldToVerbose(c,l),font:{family:"Arial"}},categoryorder:h,showgrid:!1,font:{family:"Arial"},tickangle:45,automargin:!0}},b.yaxis=p.yaxis),"Bar_Grouped_and_Line"==n||"Bar_Stacked_and_Line"==n){var u=y[0].x,m=JSON.parse(JSON.stringify(y[0].x));m.sort(),"desc"==t&&m.reverse();for(let t=0;t<y.length;t++){var f=y[t].y,v=createOrderedArray(u,m,f);if(v==[])return;var x={x:[m],y:[v],text:[v]};Plotly.restyle(_,x,[t]),y[t].x=m,y[t].y=v,y[t].text=v}$(`#${a}`).attr("data-data",JSON.stringify(y)),$("#"+r).attr("data-sorted-values",m)}else if("Vertical_Line_Stacked"==n||"Vertical_Area_Stacked"==n){u=y[0].x,m=JSON.parse(JSON.stringify(y[0].x)),f=y[0].y;m.sort(),"desc"==t&&m.reverse();v=createOrderedArray(u,m,f);if(v==[])return;var w={x:[m],y:[v],text:[v]};Plotly.restyle(_,w,[0]),y[0].x=m,y[0].y=v,y[0].text=v;var k=y[1].y,I=createOrderedArray(u,m,k);if(I==[])return;var B={x:[m],y:[I],text:[I]};Plotly.restyle(_,B,[1]),y[1].x=m,y[1].y=I,y[1].text=I,$(`#${a}`).attr("data-data",JSON.stringify(y)),$("#"+r).attr("data-sorted-values",m)}else if("Horizontal_Bar"==n||"Horizontal_Area"==n){u=y[0].x,f=y[0].y,v=JSON.parse(JSON.stringify(y[0].y));v.sort(),"desc"==t&&v.reverse();m=createOrderedArray(f,v,u);if(m==[])return;x={x:[m],y:[v],text:[m]};Plotly.restyle(_,x),y[0].x=m,y[0].y=v,y[0].text=m,$(`#${a}`).attr("data-data",JSON.stringify(y)),$("#"+r).attr("data-sorted-values",v)}else if("Horizontal_Bar_Stacked"==n||"Horizontal_Bar_Grouped"==n){f=y[0].y,v=JSON.parse(JSON.stringify(y[0].y));v.sort(),"desc"==t&&v.reverse();for(let t=0;t<y.length;t++){u=y[t].x,m=createOrderedArray(f,v,u);if(m==[])return;x={x:[m],y:[v],text:[m]};Plotly.restyle(_,x,[t]),y[t].x=m,y[t].y=v,y[t].text=m}$(`#${a}`).attr("data-data",JSON.stringify(y)),$("#"+r).attr("data-sorted-values",v)}else if("Horizontal_Area_Stacked"==n){u=y[0].x,f=y[0].y,v=JSON.parse(JSON.stringify(y[0].y));v.sort(),"desc"==t&&v.reverse();m=createOrderedArray(f,v,u);if(m==[])return;x={x:[m],y:[v],text:[m]};Plotly.restyle(_,x),y[0].x=m,y[0].y=v,y[0].text=m;k=y[1].x,I=createOrderedArray(f,v,k);if(I==[])return;B={x:[I],y:[v],text:[I]};Plotly.restyle(_,B,[1]),y[1].x=I,y[1].y=v,y[1].text=I,$(`#${a}`).attr("data-data",JSON.stringify(y)),$("#"+r).attr("data-sorted-values",v)}else if("Line"==n||"Vertical_Bar"==n||"Scatter_with_Straight_Lines_and_Markers"==n||"Scatter"==n||"Stepped_Line"==n||"Vertical_Area"==n){u=y[0].x,m=JSON.parse(JSON.stringify(y[0].x)),f=y[0].y;m.sort(),"desc"==t&&m.reverse();v=createOrderedArray(u,m,f);if(v==[])return;x={x:[m],y:[v],text:[v]};Plotly.restyle(_,x),y[0].x=m,y[0].y=v,y[0].text=v,$("#"+r).attr("data-sorted-values",m)}else if("Vertical_Bar_Grouped"==n||"Vertical_Bar_Stacked"==n||"Multiple_Line_Chart"==n){u=y[0].x,m=JSON.parse(JSON.stringify(y[0].x));m.sort(),"desc"==t&&m.reverse();for(let t=0;t<y.length;t++){f=y[t].y,v=createOrderedArray(u,m,f);if(v==[])return;x={x:[m],y:[v],text:[v]};Plotly.restyle(_,x,[t]),y[t].x=m,y[t].y=v,y[t].text=v}$(`#${a}`).attr("data-data",JSON.stringify(y)),$("#"+r).attr("data-sorted-values",m)}else if("Bar_Stacked_and_Multiple_Line"==n){u=y[0].x,m=JSON.parse(JSON.stringify(y[0].x));m.sort(),"desc"==t&&m.reverse();for(let t=0;t<y.length;t++){f=y[t].y,v=createOrderedArray(u,m,f);if(v==[])return;x={x:[m],y:[v],text:[v]};Plotly.restyle(_,x,[t]),y[t].x=m,y[t].y=v,y[t].text=v}$(`#${a}`).attr("data-data",JSON.stringify(y)),$("#"+r).attr("data-sorted-values",m)}Plotly.relayout(_,p),"Vertical"==g?"DateField"!=d[s]&&"DateTimeField"!=d[s]||changeAxisType(t,g,_,b,p,a):"Horizontal"==g&&("DateField"!=d[c]&&"DateTimeField"!=d[c]||changeAxisType(t,g,_,b,p,a)),$("#"+a).attr("data-layout",JSON.stringify(b))}}function orderModal(){let t=$(this).attr("data-modal_id"),a=$(this).attr("data-sorted-values"),e=$(this).attr("order_type");populateOrderModal(t,a,e),$("#"+t).css("display","block")}function populateOrderModal(t,a,e="Vertical"){var o=$("#"+t).attr("data-x_axis"),l=$("#"+t).attr("data-y_axis"),d=a.trim().split(",");if($("#"+t).find("#"+t+"Table").find("tbody").empty(),"Vertical"==e)var i=o.trim().split(",");else if("Horizontal"==e)i=l.trim().split(",");var r=i.length,n=0;if(html_code="",a.length>0)for(let t=0;t<d.length;t++)n++,html_code+='<tr style="text-align:center">',html_code+=`<td><span>${d[t]}</span></td>`,html_code+=`<td><input oninput='validation.call(this)' class='input form-control' style='width:55px;margin:auto;text-align:center' minimum=1 maximum='${r}' type="integer" value="${n}"</span></td>`,html_code+="</tr>";for(let t=0;t<i.length;t++)d.includes(i[t])||(n++,html_code+='<tr style="text-align:center">',html_code+=`<td><span>${i[t]}</span></td>`,html_code+=`<td><input oninput='validation.call(this)' class='input form-control' style='width:55px;margin:auto;text-align:center' minimum=1 maximum='${r}' type="integer" value="${n}"</span></td>`,html_code+="</tr>");$("#"+t).find("#"+t+"Table").find("tbody").append(html_code)}function validation(){parseInt($(this).val())<1&&$(this).val(1).trigger("change"),parseInt($(this).val())>parseInt($(this).attr("maximum"))&&$(this).val(parseInt($(this).attr("maximum"))).trigger("change")}function closeOrderModal(){let t=$(this).attr("data-modal_id");$("#"+t).find("#"+t+"Table").find("tbody").empty(),$("#"+t).css("display","none")}function saveOrderModal(){let t=$(this).attr("data-modal_id"),a=JSON.parse($(this).attr("mappingDict"));var e={},o=0,l=$("#"+t+"Table").find("tbody").find("tr").length;for(let a=0;a<l;a++){o=0;var d=parseInt($("#"+t+"Table").find("tbody").find("tr").eq(a).find("td").eq(1).find("input").val());for(let a=0;a<l;a++){var i=parseInt($("#"+t+"Table").find("tbody").find("tr").eq(a).find("td").eq(1).find("input").val());if(d==i&&(o+=1,o>1))break}if(o>1)break}if(o<2){$("#"+t+"Table").find("tbody").find("tr").each(function(){parseInt($(this).find("td").eq(1).find("input").val())&&(e[$(this).find("td").eq(0).text()]=parseInt($(this).find("td").eq(1).find("input").val()))});var r=Object.keys(e).map(function(t){return[t,e[t]]});r.sort(function(t,a){return t[1]-a[1]});var n=$("#"+t).attr("data-x_axis"),s=$("#"+t).attr("data-y_axis"),c=$("#"+t+"Button").attr("order_type");if(null!=c&&""!=c||(c="Vertical"),"Vertical"==c)var _=n.trim().split(",");else if("Horizontal"==c)_=s.trim().split(",");_.sort();var g="";for(let t=0;t<r.length;t++)g+=r[t][0]+",";g=g.substr(0,g.length-1);var p=g.trim().split(","),h=_.filter(function(t){return this.indexOf(t)<0},p);let o=$("#"+t+"Button").attr("data-chart-id"),l=$(`#${o}`).attr("data-config_x_axis_title"),d=$(`#${o}`).attr("data-config_y_axis_title"),i=JSON.parse($("#"+t+"Button").attr("datatype_dict"));var b=p.concat(h),y=o.split("card")[0],u=$("#"+o).attr("data-subtype"),m=$("#"+o).attr("data-xaxis"),f=$("#"+o).attr("data-yaxis"),v=document.getElementById(y),x=$("#"+o).attr("data-layout");x=JSON.parse(x);var w=$("#"+o).attr("data-data");if(w=JSON.parse(w),"Vertical"==c){var k={xaxis:{title:{standoff:20,text:l||fieldToVerbose(m,a),font:{family:"Arial"}},categoryorder:"array",categoryarray:b,showgrid:!1,automargin:!0,font:{family:"Arial"}}};x.xaxis=k.xaxis}else if("Horizontal"==c){k={yaxis:{title:{standoff:20,text:d||fieldToVerbose(f,a),font:{family:"Arial"}},categoryorder:"array",categoryarray:b,showgrid:!1,font:{family:"Arial"},tickangle:45,automargin:!0}};x.yaxis=k.yaxis}restylePlot(u,w,b,v,o),Plotly.relayout(v,k),"Vertical"==c?"DateField"!=i[m]&&"DateTimeField"!=i[m]||changeAxisType($("#"+y+"axis_order").val(),c,v,x,k,o):"Horizontal"==c&&("DateField"!=i[f]&&"DateTimeField"!=i[f]||changeAxisType($("#"+y+"axis_order").val(),c,v,x,k,o)),$("#"+o).attr("data-layout",JSON.stringify(x)),$("#"+t+"Button").attr("data-sorted-values",g),$("#"+t).css("display","none")}else Swal.fire({icon:"warning",text:"Order cannot be the same."})}function updateChart(t,a){var e=a.trim().split(","),o=t.split("card")[0],l=$("#"+t.replace("card","")+"axis_order").val(),d=$("#"+t).attr("data-subtype"),i=$("#"+t.replace("card","")+"orderModalSaveButton");let r=JSON.parse($(i).attr("mappingDict")),n=JSON.parse($("#"+o+"orderModalButton").attr("datatype_dict"));var s=$(i).attr("order_type");null!=s&&""!=s||(s="Vertical");var c=$("#"+t).attr("data-xaxis"),_=$("#"+t).attr("data-yaxis");let g=$(`#${t}`).attr("data-config_x_axis_title"),p=$(`#${t}`).attr("data-config_y_axis_title");var h=document.getElementById(o),b=$("#"+t).attr("data-layout");b=JSON.parse(b);var y=$("#"+t).attr("data-data");y=JSON.parse(y);var u=b.xaxis.title.font.color,m=b.xaxis.title.font.size;if(["category ascending","category descending"].includes(l)){if("Vertical"==s){var f={xaxis:{title:{standoff:20,text:g||fieldToVerbose(c,r),font:{family:"Arial",color:u,size:m}},categoryorder:l,showgrid:b.xaxis.showgrid,automargin:!0,font:{family:"Arial"}}};b.xaxis=f.xaxis}else if("Horizontal"==s){f={yaxis:{title:{standoff:20,text:p||fieldToVerbose(_,r),font:{family:"Arial",color:u,size:m}},categoryorder:l,showgrid:b.yaxis.showgrid,font:{family:"Arial"},tickangle:45,automargin:!0}};b.yaxis=f.yaxis}}else if("Vertical"==s){f={xaxis:{title:{standoff:20,text:g||fieldToVerbose(c,r),font:{family:"Arial",color:u,size:m}},categoryorder:"array",categoryarray:e,showgrid:b.xaxis.showgrid,automargin:!0,font:{family:"Arial"}}};b.xaxis=f.xaxis}else if("Horizontal"==s){f={yaxis:{title:{standoff:20,text:p||fieldToVerbose(_,r),font:{family:"Arial",color:u,size:m}},categoryorder:"array",categoryarray:e,showgrid:b.yaxis.showgrid,font:{family:"Arial"},tickangle:45,automargin:!0}};b.yaxis=f.yaxis}restylePlot(d,y,e,h,t),Plotly.relayout(h,f),"Vertical"==s?"DateField"!=n[c]&&"DateTimeField"!=n[c]||changeAxisType($("#"+o+"axis_order").val(),s,h,b,f,t):"Horizontal"==s&&("DateField"!=n[_]&&"DateTimeField"!=n[_]||changeAxisType($("#"+o+"axis_order").val(),s,h,b,f,t)),$("#"+t).attr("data-layout",JSON.stringify(b))}function setAxisOrderValues(t,a,e,o="Vertical"){var l="",d=[],i=[];if("Vertical"==o?(l=t.layout.xaxis.categoryorder,d=t.layout.xaxis.categoryarray,i=t.data[0].x):"Horizontal"==o&&(l=t.layout.yaxis.categoryorder,d=t.layout.yaxis.categoryarray,i=t.data[0].y),i.sort(),"category ascending"==l)$(`#${a}`).val("asc"),$(`#${e}Button`).attr("data-sorted-values",i);else if("category descending"==l)$(`#${a}`).val("desc"),i.reverse(),$(`#${e}Button`).attr("data-sorted-values",i);else if("array"==l){$(`#${a}`).val("cust"),$(`#${e}Button`).css("display","block");var r="";for(let t=0;t<d.length;t++)r+=d[t]+",";r=r.substr(0,r.length-1),$(`#${e}Button`).attr("data-sorted-values",r)}else $(`#${a}`).val("").trigger("change"),$(`#${e}Button`).removeAttr("data-sorted-values")}function triggerAxisOrderValues(t,a,e,o="Vertical"){var l="",d=[],i=[];if("Vertical"==o?(l=t.layout.xaxis.categoryorder,d=t.layout.xaxis.categoryarray,i=t.data[0].x):"Horizontal"==o&&(l=t.layout.yaxis.categoryorder,d=t.layout.yaxis.categoryarray,i=t.data[0].y),i.sort(),"category ascending"==l)$(`#${a}`).val("asc").trigger("change"),$(`#${e}Button`).attr("data-sorted-values",i);else if("category descending"==l)$(`#${a}`).val("desc").trigger("change"),i.reverse(),$(`#${e}Button`).attr("data-sorted-values",i);else if("array"==l){$(`#${a}`).val("cust").trigger("change"),$(`#${e}Button`).css("display","block");var r="";for(let t=0;t<d.length;t++)r+=d[t]+",";r=r.substr(0,r.length-1),$(`#${e}Button`).attr("data-sorted-values",r)}else $(`#${a}`).val("").trigger("change"),$(`#${e}Button`).removeAttr("data-sorted-values")}function createOrderedArray(t,a,e){var o=[];for(let l=0;l<a.length;l++){let d=t.indexOf(a[l]);if(-1==d)return o;o.push(e[d])}return o}function restylePlot(t,a,e,o,l){if("Bar_Grouped_and_Line"==t||"Bar_Stacked_and_Line"==t){var d=a[0].x;for(let t=0;t<a.length;t++){var i=a[t].y,r=createOrderedArray(d,e,i);if(r==[])return;var n={x:[e],y:[r],text:[r]};Plotly.restyle(o,n,[t]),a[t].x=e,a[t].y=r,a[t].text=r}}else if("Vertical_Line_Stacked"==t||"Vertical_Area_Stacked"==t){d=a[0].x,i=a[0].y,r=createOrderedArray(d,e,i);if(r==[])return;var s={x:[e],y:[r],text:[r]};Plotly.restyle(o,s,[0]),a[0].x=e,a[0].y=r,a[0].text=r;var c=a[1].y,_=createOrderedArray(d,e,c);if(_==[])return;var g={x:[e],y:[_],text:[_]};Plotly.restyle(o,g,[1]),a[1].x=e,a[1].y=_,a[1].text=_,$(`#${l}`).attr("data-data",JSON.stringify(a))}else if("Horizontal_Bar"==t||"Horizontal_Area"==t){d=a[0].x,i=a[0].y;var p=createOrderedArray(i,e,d);if(p==[])return;n={x:[p],y:[e],text:[p]};Plotly.restyle(o,n),a[0].x=p,a[0].y=e,a[0].text=p,$(`#${l}`).attr("data-data",JSON.stringify(a))}else if("Horizontal_Bar_Stacked"==t||"Horizontal_Bar_Grouped"==t){i=a[0].y;for(let t=0;t<a.length;t++){d=a[t].x,p=createOrderedArray(i,e,d);if(p==[])return;n={x:[p],y:[e],text:[p]};Plotly.restyle(o,n,[t]),a[t].x=p,a[t].y=e,a[t].text=p}$(`#${l}`).attr("data-data",JSON.stringify(a))}else if("Horizontal_Area_Stacked"==t){d=a[0].x,i=a[0].y,p=createOrderedArray(i,e,d);if(p==[])return;n={x:[p],y:[e],text:[p]};Plotly.restyle(o,n),a[0].x=p,a[0].y=e,a[0].text=p;c=a[1].x,_=createOrderedArray(i,e,c);if(_==[])return;g={x:[_],y:[e],text:[_]};Plotly.restyle(o,g,[1]),a[1].x=_,a[1].y=e,a[1].text=_,$(`#${l}`).attr("data-data",JSON.stringify(a))}else if("Line"==t||"Vertical_Bar"==t||"Scatter_with_Straight_Lines_and_Markers"==t||"Scatter"==t||"Stepped_Line"==t||"Vertical_Area"==t){d=a[0].x,i=a[0].y,r=createOrderedArray(d,e,i);var h=a[0].marker;if(r==[])return;n={x:[e],y:[r],text:[r],marker1:h};Plotly.restyle(o,n),a[0].x=e,a[0].y=r,a[0].text=r}else if("Vertical_Bar_Grouped"==t||"Vertical_Bar_Stacked"==t||"Multiple_Line_Chart"==t){d=a[0].x;for(let t=0;t<a.length;t++){i=a[t].y,r=createOrderedArray(d,e,i);if(r==[])return;n={x:[e],y:[r],text:[r]};Plotly.restyle(o,n,[t]),a[t].x=e,a[t].y=r,a[t].text=r}$(`#${l}`).attr("data-data",JSON.stringify(a))}else if("Bar_Stacked_and_Multiple_Line"==t){d=a[0].x;for(let t=0;t<a.length;t++){i=a[t].y,r=createOrderedArray(d,e,i);if(r==[])return;n={x:[e],y:[r],text:[r]};Plotly.restyle(o,n,[t]),a[t].x=e,a[t].y=r,a[t].text=r}$(`#${l}`).attr("data-data",JSON.stringify(a))}}function changeAxisType(t,a="Vertical",e,o,l,d){var i="";i="asc"==t||"desc"==t||"cust"==t?"category":"date","Vertical"==a?(l.xaxis.type=i,o.xaxis=l.xaxis):"Horizontal"==a&&(l.yaxis.type=i,o.yaxis=l.yaxis),Plotly.relayout(e,l),$("#"+d).attr("data-layout",JSON.stringify(o))}function changeIcon(){let t=$(this).attr("data-chart-id"),a=$(this).attr("data-img-id");if(t&&a){var e=$(this).val();$("#"+t).find("div.row").find("#"+a).attr("src",e)}}function goBack(){window.history.back()}function plotChartsAnalysis(t=!1,a={},e="",o="",l=!1,d={}){if(null!=$(this).attr("data-data")||t){let n="",s="",c="",_="",g="";if(0==t){o=$(this).attr("app_code"),n=JSON.parse($(this).attr("data-data")),s=JSON.parse($(this).attr("data-parentContainerID"));let t=JSON.parse($(this).attr("data-configdic"));t.tabDict,t.tabSlicerConfig,t.final_f_dict2;c=t.thresholdGuage;t.interaction,t.tab_ID;_=t.parentId,d=JSON.parse($(this).attr("slicerTabConnectObj"))}t&&(n=a.chartJson,s=e,c={},_=a.parentId,g=a.editType),$(this).removeAttr("data-data"),$("#"+s).attr("data-count",n.length);parseInt($("#"+s).css("width"));for(i in 0!=n.length&&0==t&&$("#"+s).append('<i class="fa fa-spinner fa-pulse loadingSymbol" style="position:absolute;font-size: 100px;margin-left: 50%; margin-top:15%;z-index: 99999;"></i>'),n){n[i].filters;let a=n[i].filter_input_final,e=n[i].drange,r=n[i].chartType;if("Textbox"==r){let t=parseInt($("#"+s).attr("data-count"));t--,$("#"+s).attr("data-count",t)}if("Textbox"==r){if(n[i].hasOwnProperty("id_text_editor")){let t=n[i].id_text_editor;$(`#${s}`).append(`\n            <div class="small-box commentboxcard" data-id="${t}" id = "${t}" onmouseenter="showTool.call(this)" onmouseleave="hideTool.call(this)" style="position:absolute;min-height:6rem;min-width:6rem;height:${n[i].height+"px"};width:${n[i].width+"px"};top:${n[i].position.top+"px"};left:${n[i].position.left+"px"};">\n              <div class="row"  style="position:absolute; margin-left:100%; display:none;flex-wrap:wrap;">\n                <i class="fa fa-times deleteCommentBox" title="Delete" style="font-size:1rem;margin-right:0.5rem;margin-left:1px;margin-bottom:2px;"></i>\n                <i class='fas fa-edit' onclick="ckEditorFunc.call(this)" style="font-size:1rem;margin-right:0.5rem;margin-bottom:2px;"></i>\n                <i class="fa fa-arrows" style="font-size:1rem;margin-right:0.5rem;"></i>\n              </div>\n              <div class="commentbox contentEditable" name="comment" style="margin-top:1rem;max-height: 75%;padding: 0.3em 0.5em 0 0.5em;background-color: transparent;text-align: left;overflow-y: auto;">\n              ${n[i].textboxvalue}\n              </div>\n            </div>`)}else $(`#${s}`).append(`<div class="small-box commentboxcard" data-id="${id_text_editor}" id = "${id_text_editor}" onmouseenter="showTool.call(this)" onmouseleave="hideTool.call(this)" style="position:absolute;min-height:6rem;min-width:6rem;height:${n[i].height+"px"};width:${n[i].width+"px"};top:${n[i].position.top+"px"};left:${n[i].position.left+"px"};" >\n                <div class="row"  style="position:absolute; margin-left:100%; display:none;flex-wrap:wrap;">\n                  <i class="fa fa-times deleteCommentBox" title="Delete" style="font-size:1rem;margin-right:0.5rem;margin-left:1px;margin-bottom:2px;"></i>\n                  <i class='fas fa-edit' onclick="ckEditorFunc.call(this)" style="font-size:1rem;margin-right:0.5rem;margin-bottom:2px;"></i>\n                  <i class="fa fa-arrows" style="font-size:1rem;margin-right:0.5rem;"></i>\n                </div>\n              <div class="commentbox contentEditable" name="comment" style="margin-top:1rem;max-height: 75%;padding: 0.3em 0.5em 0 0.5em;background-color: transparent;text-align: left;overflow-y: auto;">\n              ${n[i].textboxvalue}\n              </div>\n            </div>`);$(".commentboxcard").resizable(),$(".contentEditable").each(function(){$(this).on("click",function(){$(this).attr("contenteditable","true"),$(this).focus()}),$(this).focusout(function(){let t=this.innerText;t=t.trim(),0==t.length?(this.innerText="Enter text here.",$(this).removeAttr("contenteditable"),$(this).trigger("click")):$(this).removeAttr("contenteditable")})}),$(`#${s}`).find(".deleteCommentBox").click(function(){$(this).parent().parent().remove()}),$(`#${s}`).find(".commentboxcard").draggable({cancel:"",containment:"parent"})}else{
let r=n[i].highlightcolumnheaderscolorlist,p=s,h=n[i].height,b=n[i].width,y=n[i].position,u=n[i].config_gridlines,m=n[i].layout,f=n[i].graph_subtype,v=n[i].id,x=n[i].data,w=n[i].x_axis,k=n[i].y_axis,I=n[i].pivot_report_data,B=n[i].computed_number,E=n[i].img_icon,D=n[i].is_title,S=n[i].title_value,C=n[i].operation_n,T=n[i].agg_distinct,N=n[i].second_column,O=n[i].operation,P=n[i].operation_line,A=n[i].titlefontsize,J=n[i].font_size,H=n[i].chart_title,z=n[i].data_value,M=n[i].config_valuesize,F=n[i].config_titlesize,L=n[i].config_data_value,V=n[i].backgroundcolor,G=n[i].changed_text,R=n[i].chartheader,X=JSON.stringify(n[i].filters),Y=n[i].line_column,q=n[i].tableName,j=n[i].color,U=n[i].plot_bg_color,W=n[i].global_bg,K=n[i].grad_color,Z=n[i].global_bgcolor,Q=n[i].global_ind_color,tt=n[i].config_color,at=n[i].config_labels,et=n[i].config_xrange,ot=n[i].config_yrange,lt=n[i].config_x_axis_title,dt=n[i].legend_x,it=n[i].legend_y,rt=n[i].config_label_placement,nt=n[i].config_y_axis_title,st=n[i].config_element_color,ct=n[i].element_label,_t=n[i].total_y,gt=n[i].total_L,$t=n[i].data_shadowon,pt=n[i].data_shadecolor,ht=n[i].data_shadowX,bt=n[i].data_shadowY,yt=n[i].data_shadowblurry,ut=n[i].data_borderColor,mt=n[i].data_borderStyle,ft=n[i].data_borderon,vt=n[i].data_borderThickness,xt=n[i].data_shadowThick,wt=n[i].header_fontsize,kt=n[i].header_fontweight,It=n[i].header_fontstyle,Bt=n[i].header_alignment,Et=n[i].header_color,Dt=(n[i].label_color,n[i].label_fontsize,n[i].header_bgcolor),St=n[i].conditional_table,Ct=n[i].columnAlignmentSelectedOptions,Tt=n[i].FormattersConfiguration,Nt=p.replace("analysisrow","selectSlicerConfig_"),Ot=[],Pt=[];null!=n[i].app_code?o=n[i].app_code:t&&0==l&&(o="");for(let t=0;t<$(`.${Nt}`).length;t++)Ot.push($(`.${Nt}`).eq(t).val()),d[v+"card"].includes($(`.${Nt}`).eq(t).attr("data-slicerColumn"))||Pt.push($(`.${Nt}`).eq(t).attr("data-slicerColumn"));let At={thresholdConfig:c,is_title:D,title_value:S,element_id:_,pr_code:windowLocation.split("/")[2],conditional_table:St,img_icon:E,header_alignment:Bt,header_fontstyle:It,header_fontsize:wt,header_fontweight:kt,header_color:Et,header_bgcolor:Dt,data_shadowon:$t,data_shadecolor:pt,data_shadowX:ht,data_shadowY:bt,data_shadowblurry:yt,data_shadowThick:xt,data_borderColor:ut,data_borderStyle:mt,data_borderon:ft,data_borderThickness:vt,total_y:_t,total_L:gt,color:j,plot_bg_color:U,global_bg:W,grad_color:K,global_bgcolor:Z,global_ind_color:Q,element_label:ct,config_element_color:st,config_data_value:L,config_valuesize:M,config_titlesize:F,config_label_placement:rt,legend_x:dt,legend_y:it,computed_number:B,operation_n:C,agg_distinct:T,operation:O,operation_line:P,tableName:q,filters:X,line_column:Y,chartheader:R,chart_title:H,data_value:z,pivot_report_data:I,x_axis:w,y_axis:k,second_column:N,graph_subtype:f,tab_id:p,height:h,width:b,data:x,layout:m,chartDivId:v,position:y,backgroundcolor:V,titlefontsize:A,valuefontsize:J,titlefontsize:A,config_color:tt,config_xrange:et,config_yrange:ot,config_gridlines:u,config_labels:at,config_x_axis_title:lt,config_y_axis_title:nt,changed_text:G,filters:X,filter_input_final:JSON.stringify(a),drange:JSON.stringify(e),columnAlignmentSelectedOptions:Ct,FormattersConfiguration:Tt,highlightcolumnheaderscolorlist:r},Jt=!1;"Disable"==g&&(Jt=!0),plotFunction(At,Pt=Pt,Ot=Ot,Nt=Nt,existingDivId=v,app_code_=o,disable=Jt),slicerChangeUpdatePlots(o)}}var r=s.replace("analysisrow","");$(`#analysisPDF${r}`).click(async function(){function t(t){return new Promise(a=>setTimeout(a,t))}tabno=$(this)[0].id.split("F")[1],$(this).html('<i class="fa fa-spinner fa-spin"></i> Loading'),$(".tab-content").find(".tab-pane").find(".card-body").find(".tab-content").find(".tab-pane").find(".chartDivSection").find(".charts").find(".card-header").find(".row").find("i").css("display","none"),$(this).parent().attr("data-html2canvas-ignore",!0),$(".nav-tabs").attr("data-html2canvas-ignore",!0),$(`#${$(this).parent().parent().next().attr("id")}`).css("border","none");const a=$(`#${$(this).parent().parent().next().attr("id")}`).attr("data-layout");$(document).scrollTop(0),await t(1e3);const e=$(`#analysisrow${tabno}`).parent().parent().parent();e.width(),e.height();let o="",l="";pdfName="PDF";const d=$(`#analysisrow${tabno}`).parent().parent().parent()[0].offsetWidth,i=$(`#analysisrow${tabno}`).parent().parent().parent()[0].offsetHeight;await html2canvas($(`#analysisrow${tabno}`).parent().parent().parent()[0],{useCORS:!0,allowTaint:!0}).then(function(t){o=$(`#analysisrow${tabno}`).height(),l=$(`#analysisrow${tabno}`).width();const a=t.toDataURL("image/svg"),e=new jsPDF("l","px",[d,i]);e.addImage(a,"SVG",0,0,e.internal.pageSize.width,e.internal.pageSize.height),e.save(pdfName),$(".tab-content").find(".tab-pane").find(".card-body").find(".tab-content").find(".tab-pane").find(".chartDivSection").find(".charts").find(".card-header").find(".row").find("i").css("display","block"),$(`#${tabDict.pdfButtonID}`).html('<i class="fa fa-file-pdf-o"></i>&nbsp;PDF')}),$(this).empty(),$(this).html('<i class="fa fa-file-pdf-o"></i>&nbsp;PDF'),"No layout"!==String(a)&&$(`#${$(this).parent().parent().next().attr("id")}`).css("border","solid black 0.1px"),$(".nav-tabs").removeAttr("data-html2canvas-ignore"),$(this).parent().removeAttr("data-html2canvas-ignore")}),$(this).attr("data-tabLoaded","true")}}function fetchAnalysisSlicer(t,a,e,o=""){let l=[],d=[];l.push(a),d.push(e);for(let t=0;t<l.length;t++)$(`#tab${l[t]}${d[t]}`).find(".card-tools.tabCardTools").empty(),$(`#tab${l[t]}${d[t]}`).find(".card-tools.tabCardTools").append(`<button type="button" value="AddComment" class="btn btn-primary commentButton btn-md" id="AddComment${l[t]}${d[t]}"  data-toggle="tooltip" title="Add comment" style="height: 25px;border-radius:5px;border-color:none;color:white;margin-top:10px; margin-bottom:10px"><i class='far fa-comment-dots' style="font-size:1rem;"></i></button>&nbsp;        <button type="button" value="PDF" class=" btn btn-primary" data-tabHeaderID="tabHeader${l[t]}${d[t]}" id='analysisPDF${l[t]}${d[t]}' style="height: 25px;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;  margin-right:5px;margin-top:10px; margin-bottom:10px"><i class="fa fa-file-pdf-o"></i>&nbsp;PDF</button>          <button type="button" value="slicerConfig" class="btn btn-primary" data-tabHeaderID="tabHeader${l[t]}${d[t]}" id='slicerConfig${l[t]}${d[t]}' data-toggle="modal" data-target="#slicerConfigModal${l[t]}${d[t]}" style="height: 25px;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px; margin-right:10px; margin-top:10px; margin-bottom:10px"><i class="fas fa-filter"></i>&nbsp;Slicer</button><button type="button" value="gridLines" class="btn btn-primary" data-tabHeaderID="tabHeader${l[t]}${d[t]}" id='gridLines${l[t]}${d[t]}' style="height: 25px;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px; margin-right:10px; margin-top:10px; margin-bottom:10px" onclick="gridLine.call(this)"><i class="fa fa-table"></i>&nbsp;Grid lines</button>`);var i=$("form").find("input[name='csrfmiddlewaretoken']").attr("value");$.ajaxSetup({beforeSend:function(t,a){t.setRequestHeader("X-CSRFToken",i)}}),t.slicerTable.length&&t.slicerParameter.length&&$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{tab_slicer_config:JSON.stringify(t),element_id:a,tab_id:e,app_code:o,operation:"saveAnalysisSlicerConfigL3"},type:"POST",dataType:"json",success:function(t){var a=t.elementID,e=t.slicer_tab_id;$(`#tab${a}${e}`).find(".card-tools.tabCardTools").empty(),$(`#tab${a}${e}`).find(".card-tools.tabCardTools").append(`<button type="button" value="AddComment" class="btn btn-primary commentButton btn-md" id="AddComment${a}${e}"  data-toggle="tooltip" title="Add comment" style="height: 25px;border-radius:5px;border-color:none;color:white;margin-top:10px; margin-bottom:10px"><i class='far fa-comment-dots' style="font-size:1rem;"></i></button>&nbsp;        <button type="button" value="PDF" class=" btn btn-primary" data-tabHeaderID="tabHeader${a}${e}" id='analysisPDF${a}${e}' style="height: 25px;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px;  margin-right:5px;margin-top:10px; margin-bottom:10px"><i class="fa fa-file-pdf-o"></i>&nbsp;PDF</button>          <button type="button" value="slicerConfig" class="btn btn-primary" data-tabHeaderID="tabHeader${a}${e}" id='slicerConfig${a}${e}' data-toggle="modal" data-target="#slicerConfigModal${a}${e}" style="height: 25px;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px; margin-right:10px; margin-top:10px; margin-bottom:10px"><i class="fas fa-filter"></i>&nbsp;Slicer</button><button type="button" value="gridLines" class="btn btn-primary" data-tabHeaderID="tabHeader${a}${e}" id='gridLines${a}${e}' style="height: 25px;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px; margin-right:10px; margin-top:10px; margin-bottom:10px" onclick="gridLine.call(this)"><i class="fa fa-table"></i>&nbsp;Grid lines</button>`);let l=t[e],d=l.analysis_additional_config;if("slicer_config"==d){let t=l.slicerTable,o=l.slicerParameter,d=l.mappingDict,r=l.slicer_parameter_values,n=l.slicerBoolean,s=l.slicerReload,c=l.multipleSlicer;var i="";for(let l=0;l<r.length;l++){let _='data-value = ""',g="";null!=s&&0!=s.length&&(_="data-value"+`= '${JSON.stringify(s[l])}'`),null!=c&&c.length>0&&c[l]&&(g="multiple"),i+=`\n                <div class="form-inline" style="margin-bottom:5px;text-align:left;">\n                <span class="text-primary" margin-right:10px; margin-left:10px;">${d[l][o[l]]}:</span>\n                <select class="selectSlicerConfig_${a}${e} select2 form-control slicerParamValue${a}" data-tab="${e}" data-slicertable="${t[l]}" data-slicerColumn= "${o[l]}" ${_} data-id="selectSlicerConfig_${a}${e}" style="width:150px;display:inline-block;" ${g}>`,null!=n&&0!=n.length&&"True"==n[l]&&(i+='<option value="" selected>All</option>');for(let t=0;t<r[l].length;t++)""!=r[l][t]&&(i+=`<option value="${r[l][t]}">${r[l][t]}</option>`);i+="</select>\n                </div>\n                "}$(`#tab${a}${e}`).find(".card-tools.tabCardTools").append(i),$(`#tab${a}${e}`).find(".card-tools.tabCardTools").find(".select2").select2(),$(`#tab${a}${e}`).find(".card-tools.tabCardTools").find(".select2").parent().find(".select2-container").css("max-height","55px"),$(`#tab${a}${e}`).find(".card-tools.tabCardTools").find(".select2").parent().find(".select2-container").css("overflow-y","scroll");for(let t=0;t<s.length;t++)s[t]&&($(`#tab${a}${e}`).find(".card-tools.tabCardTools").find(`.selectSlicerConfig_${a}${e}`).eq(-1).val(s[t]).trigger("select2:select"),$(`#tab${a}${e}`).find(".card-tools.tabCardTools").find(`.selectSlicerConfig_${a}${e}`).eq(-1).val(s[t]).trigger("change"))}slicerChangeUpdatePlots(o=o),$(`#analysisPDF${a}${e}`).click(async function(){function t(t){return new Promise(a=>setTimeout(a,t))}var a=$(this).html();$(this).html('<i class="fa fa-spinner fa-pulse"></i> Loading'),$(this).parent().attr("data-html2canvas-ignore",!0),$(".nav-tabs").attr("data-html2canvas-ignore",!0),$(`#${$(this).parent().parent().next().attr("id")}`).css("border","none");var e=$(`#${$(this).parent().parent().next().attr("id")}`).attr("data-layout");$("body").css("pointer-events","none"),$("body").css("background-color","black"),$("body").css("opacity",.5),$("body").css("overflow-y","hidden"),$(".tab-content").find(".tab-pane").find(".card-body").find(".tab-content").find(".tab-pane").find(".chartDivSection").find(".charts").find(".card-header").find(".row").find("i").css("display","none"),$(document).scrollTop(0),await t(1e3),page_section=$(`#${$(this).parent().parent().next().attr("id")}`).parent().parent().parent(),HTML_Width=page_section.width(),HTML_Height=page_section.height(),top_left_margin=5,PDF_Width=HTML_Width+2*top_left_margin,PDF_Height=1.2*PDF_Width+2*top_left_margin,pdfName=$(`#${$(this).attr("data-tabHeaderID")}`).text();var o=$(`#${$(this).parent().parent().next().attr("id")}`).parent().parent().parent()[0].offsetWidth,l=$(`#${$(this).parent().parent().next().attr("id")}`).parent().parent().parent()[0].offsetHeight;await html2canvas($(`#${$(this).parent().parent().next().attr("id")}`).parent().parent().parent()[0],{allowTaint:!0}).then(function(t){canvas_image_height=HTML_Height,canvas_image_width=HTML_Width;var a=t.toDataURL("image/png"),e=new jsPDF("l","px",[o,l]);e.addImage(a,"PNG",0,0,e.internal.pageSize.width,e.internal.pageSize.height),e.save(pdfName),$(".tab-content").find(".tab-pane").find(".card-body").find(".tab-content").find(".tab-pane").find(".chartDivSection").find(".charts").find(".card-header").find(".row").find("i").css("display","inline-block")}),$(this).empty(),$(this).html(a),"No layout"!=e&&$(`#${$(this).parent().parent().next().attr("id")}`).css("border","solid black 0.1px"),$(".nav-tabs").removeAttr("data-html2canvas-ignore"),$(this).parent().removeAttr("data-html2canvas-ignore"),$("body").css("pointer-events",""),$("body").css("background-color",""),$("body").css("opacity",""),$("body").css("overflow-y","")}),$(`#AddComment${a}${e}`).click(function(){var t=("analysisEditor"+Math.random()).replace(".","");$(this).parent().parent().next().append(`\n                    <div class="small-box commentboxcard" data-id="${t}" id = "${t}" onmouseenter="showTool.call(this)" onmouseleave="hideTool.call(this)" style="min-height:6rem;min-width:6rem;height:6rem;width:9rem;" >\n                      <div class="row"  style="position:absolute; margin-left:100%; display:none;flex-wrap:wrap;">\n                        <i class="fa fa-times deleteCommentBox" title="Delete" style="font-size:1rem;margin-right:0.5rem;margin-left:1px;margin-bottom:2px;"></i>\n                        <i class='fas fa-edit' onclick="ckEditorFunc.call(this)" style="font-size:1rem;margin-right:0.5rem;margin-bottom:2px;"></i>\n                        <i class="fa fa-arrows" style="font-size:1rem;margin-right:0.5rem;"></i>\n                      </div>\n                      <div class="commentbox contentEditable" name="comment" style="margin-top:1rem;max-height: 75%;padding: 0.3em 0.5em 0 0.5em;background-color: transparent;text-align: left;overflow-y: auto;">\n  \n                      </div>\n                    </div>`),$(".commentboxcard").resizable(),$(".contentEditable").each(function(){$(this).on("click",function(){$(this).attr("contenteditable","true"),$(this).focus()}),$(this).focusout(function(){var t=this.innerText;t=t.trim(),0==t.length?(this.innerText="Enter text here.",$(this).removeAttr("contenteditable"),$(this).trigger("click")):$(this).removeAttr("contenteditable")})}),$(".deleteCommentBox").click(function(){$(this).parent().parent().remove()}),$(".commentboxcard").draggable({cancel:"",containment:"parent"})})},error:function(){Swal.fire({icon:"error",text:"Error! Failure in fetching the columns. Please try again."})}})}function fetchSlicerParams(t=""){$(".analysisSlicerTable").off("select2:select").on("select2:select",function(){""==t&&(null!=$("body").find("div").eq(0).attr("app_code")?t=$("body").find("div").eq(0).attr("app_code"):null!=$(this).closest(".chartDivSection").attr("app_code")&&(t=$(this).closest(".chartDivSection").attr("app_code")));let a=$(this).val(),e=$(this).parent().parent().find(".form-group").eq(1).find(".analysisSlicerParameter");if(""!=a){let o=window.location.pathname,l=o.indexOf("/",o.indexOf("/")+1),d=o.indexOf("/",o.indexOf("/")+l+1),i=o.indexOf("/",o.indexOf("/")+d+1),r=(o.substring(l+1,d),o.substring(d+1,i));"Build"!=r&&"Edit"!=r&&(r="User"),$.ajax({url:`/users/${urlPath}/processGraphModule/`,data:{operation:"dropFieldList",app_code:t,tableName:a},type:"POST",dataType:"json",success:function(t){if(t.fieldList.length>0){e.empty(),e.append("<option value=''>Select slicer parameter</option>");for(var a=0;a<t.fieldList.length;a++)e.append(new Option(t.fieldList[a],t.fieldNameList[a]));if(null!=e.attr("data-slicerParam")){var o=e.attr("data-slicerParam");e.val(o).trigger("change"),e.removeAttr("data-slicerParam")}}},error:function(){Swal.fire({icon:"error",text:"Error! Failure in fetching the columns. Please try again."})}})}else e.empty(),e.append("<option value=''>Select slicer parameter</option>")})}function reloadAnalysisConfigFunc(t,a="",e){if(null!=t.analysis_table_list){$(`#selectTable${e}`).empty(),$(`#selectTable${e}`).append('<option value="Select table" selected disabled>Select table</option>');for(let a=0;a<t.analysis_table_list.length;a++)$(`#selectTable${e}`).append(`<option value="${t.analysis_table_list[a]}">${t.analysis_table_list[a]}</option>`)}if(analysisDataRaw=t.save,null!=t.shared_config){if(sharedConfig=t.shared_config,null!=sharedConfig.config)for(let t=0;t<sharedConfig.config.length;t++)importDashboard(sharedConfig.element_id,!0,sharedConfig.config[t])}else""==a&&(sharedConfig={element_id:"",config:[]});if(analysisDataRaw&&t.save){var o="Required";t.hasOwnProperty("dashboard_index")&&(o=t.dashboard_index),analysisTabID=analysisDataRaw.ElementID;var l=t.analysis_table_list,d=analysisDataRaw.ParentULID,i=analysisDataRaw.ParentTabContainerID;$(`#${d}`).empty(),$(`#${i}`).empty(),t.hasOwnProperty("dashboard_index")&&(o=t.dashboard_index),"Required"==o&&$(`#${d}`).append(` \n          <li class="nav-item navtab scroll-link">\n            <a class="nav-link" id="indexTab${e}" href="#indexTabContent${e}" role="tab" data-toggle="tab" aria-controls="#indexTab${e}" aria-selected="true">\n              <div class="row">\n                <div class="col-md-11" style="padding-right: 0.1rem">\n                  <span class="tabname1" id="indexTab${e}" data-tab="indexTab${e}" data-tab_ct="indexTab${e}">\n                    Index\n                  </span>\n                </div>\n              </div>\n            </a>\n          </li>\n          `);const E=document.querySelector(".nav.nav-tabs.nav-fill.analysis-nav");var r,n;E.children.length>4&&E.classList.add("scroll-nav");var s=[],c=[];for(j in analysisDataRaw.subTabContent){var _=analysisDataRaw.subTabContent[j];_.aHref.includes("#indexTabContent")||c.push([_.aHref,_.subTabName,_.subDesc,_.subIcon])}c=c.reverse();const D=(t,a)=>{let o=t.replace("Header","");const l=$("#tabLinks"+e).find(".linkCard");Array.from(l).forEach(t=>{const e=t.id.replace("index","");e==o&&$(`#index${e} .tab-title`).text(a)})};"Required"==o&&$(`#${i}`).append(`\n            <div class="tab-pane fade" id="indexTabContent${e}" role="tabpanel" aria-labelledby="indexTab${e}">\n              <div id="tabLinks${e}"  class="tabLinksclass" style="border: 0.1px solid black; min-height: 1080px; max-height: 1080px;overflow:auto;">\n              </div>\n            </div>\n          `),c.forEach((a,l)=>{let d=a[0].split("#")[1],r=c.length-l,n=analysisDataRaw.subTabContent[0].indexCard_BGColor,s=analysisDataRaw.subTabContent[0].indexCard_FontColor,_="undefined"===a[2]?"":a[2];if(t.dashboardIndexTemplate||(t.dashboardIndexTemplate="Template1"),"Template1"==t.dashboardIndexTemplate)var g=`\n                <div class="row index-rows" style="box-shadow: rgb(0 0 0 / 35%) 0px 5px 15px;border-radius: 5px;margin: 20px 20px;align-items: center;display: flex;">\n                  <div id="" class="col-2 index-no-column" style="background-color:${n};">\n                    <p style="color:${s};font-size: 1.2rem; margin:0;" href="${a[0]}"> ${r} </p>\n                </div>\n                <div class="col-10" style="">\n                  <i class="fa fa-pen editTabIcon" onclick="openModal('index${d}')" style="right: -8px;top:-8px;"></i>\n                  <div id="index${d}" style="background-color:${n};" color1='${n}' class="linkCard defaultTabTheme">\n                    <div class="col-10 d-flex flex-column align-items-center justify-content-center">\n                      <a class="tab-header-name tab-title" color2='${s}' style="color:${s};font-size: 1.2rem;" href="${a[0]}"> ${a[1]} </a>\n                      <p class="tab-desc colored-text" data-name="index${d}" style="color:${s};margin-bottom:0">${_}</p>\n                    </div>\n                    <div class="col-1 tab-icons TabIcons d-flex align-items-center justify-content-center" >\n                      <i class="${a[3]}" data-name="index${d}"></i>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              `;else if("Template2"==t.dashboardIndexTemplate)g=`\n              <div class="row index-rows" style="box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;margin: 20px 20px;align-items: center;display: flex;border-bottom: 8px solid ${n};">\n                <div id="" class="col-2 index-no-column" style="background-color: ${n};border: 5px solid  ${n};border-top-right-radius: 0px;border-bottom-right-radius: 0px;height: 6rem;">\n                  <p style="font-size: 1.2rem; color:${s}; margin:0;" href="${a[0]}"> ${r} </p>\n                </div>\n                <div class="col-10" style="background: white !important;">\n                  <i class="fa fa-pen editTabIcon" onclick="openModal('index${d}')" style="right: -8px;top:-8px;"></i>\n                  <div id="index${d}" style="background-color: transparent !important;" class="linkCard">\n                    <div class="col-10 d-flex flex-column align-items-center justify-content-center">\n                      <a class="tab-title" style="color:black;font-size: 1.2rem;" href="${a[0]}"> ${a[1]} </a>\n                      <p class="tab-desc" data-name="index${d}" style="color:black;margin-bottom:0">${_}</p>\n                    </div>\n                    <div class="col-1 colored-icons TabIcons d-flex align-items-center justify-content-center" >\n                      <i class="${a[3]}" data-name="index${d}" style="color:${n}"></i>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              `;else if("Template3"==t.dashboardIndexTemplate)g=`\n              <div class="row index-rows defaultTabTheme" style="box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;margin: 20px 20px;align-items: center;display: flex;border-radius: 0px 40px !important;">\n                <div id="" class="col-2 d-flex align-items-center justify-content-center" style="background-color:white;border-radius: 0px 40px !important;height: 6rem;">\n                  <p style="font-size: 1.2rem; color:black !important; margin:0;" href="${a[0]}"> ${r} </p>\n                </div>\n                <div class="col-10" style="">\n                  <i class="fa fa-pen editTabIcon" onclick="openModal('index${d}')"></i>\n                  <div id="index${d}" style="border-top-right-radius: 40px;" class="linkCard">\n                    <div class="col-10 d-flex  flex-column align-items-center justify-content-center">\n                      <a class="tab-header-name tab-title" style="color:${s};font-size: 1.2rem;" href="${a[0]}"> ${a[1]} </a>\n                      <p class="tab-desc colored-text" data-name="index${d}" style="color:${s};margin-bottom:0">${_}</p>\n                    </div>\n                    <div class="col-1 tab-icons TabIcons d-flex align-items-center justify-content-center" >\n                      <i class="${a[3]}" data-name="index${d}" style="color:${s};"></i>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              `;else if("Template4"==t.dashboardIndexTemplate)g=`\n              <div class="row index-rows" style="margin: 40px 50px 40px 0px;align-items: center;display: flex;justify-content: center;">\n                <div id="" class="col-1 dropIndex" style="background: ${n} linear-gradient(to bottom right, ${n} 25%, #fff);">\n                <p style="font-size: 1.2rem; color:${s}; margin:0;" href="${a[0]}"> ${r} </p>\n                </div>\n                <div class="col-10" style="box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;border-radius:10px;">\n                  <i class="fa fa-pen editTabIcon" onclick="openModal('index${d}')" style="right: -8px;top:-8px;"></i>\n                  <div id="index${d}" class="linkCard">\n                    <div class="col-10 d-flex flex-column justify-content-center align-items-center">\n                      <a class="tab-title" style="color:black !important;font-size: 1.2rem;" href="${a[0]}"> ${a[1]} </a>\n                      <p class="tab-desc" data-name="index${d}" style="color:black !important;margin-bottom:0">${_}</p>\n                    </div>\n                    <div class="col-1 colored-icons TabIcons d-flex justify-content-center align-items-center">\n                      <i class="${a[3]}" data-name="index${d}" style="color:${n} !important;"></i>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              `;else if("Template5"==t.dashboardIndexTemplate)g=`\n              <div class="row index-rows" style="margin: 40px 0px;align-items: center;display: flex;justify-content: center;">\n                <div id="" class="col-2 boxIndex" style="background: ${n} linear-gradient(to bottom right, ${n} 25%, #fff);">\n                <p style="font-size: 1.2rem; color:${s}; margin:0;" href="${a[0]}"> ${r} </p>\n                </div>\n                <div class="col-8 defaultTabTheme" style="background-color: ${n};border-radius:10px;">\n                  <i class="fa fa-pen editTabIcon" onclick="openModal('index${d}')" style="right: -23px;top:-7px;"></i>\n                  <div id="index${d}" class="linkCard">\n                    <div class="col-10 d-flex flex-column justify-content-center align-items-center">\n                      <a class="tab-header-name tab-title" style="color:${s};font-size: 1.2rem;" href="${a[0]}"> ${a[1]} </a>\n                      <p class="tab-desc colored-text" data-name="index${d}" style="color:${s};margin-bottom:0">${_}</p>\n                    </div>\n                    <div class="col-1 tab-icons TabIcons d-flex justify-content-center align-items-center">\n                      <i class="${a[3]}" data-name="index${d}" style="color: ${s};"></i>\n                    </div>\n                  </div>\n                </div>\n                <div class="col-1"><span class="arrow-tab" style="border-left-color: ${n};"></span></div>\n              </div>\n              `;const $=document.getElementById("tabLinks"+e);"Required"==o&&($.insertAdjacentHTML("afterbegin",g),document.getElementById(`index${d}`).addEventListener("click",t=>{t.preventDefault(),gotoTab(i,d)}))});const S=()=>{if(null!=document.getElementById(`indexTab${e}`)){const t=document.getElementById(`indexTab${e}`).children;Array.from(t).forEach(t=>{"hidden"==t.className&&t.parentNode.removeChild(t)})}};setTimeout(S,250);for(j in analysisDataRaw.subTabContent){_=analysisDataRaw.subTabContent[j];if(r=Object.keys(_).includes("crossFilter")?_.crossFilter:[],Object.keys(_).includes("thresholdProp")?s.push(_.thresholdProp):s=[],Object.keys(_).includes("freeze_dict")?(n=_.freeze_dict,final_f_dict2=n):(n={},final_f_dict2=n),Object.keys(_).includes("tabSlicerConfig")){var g=_.tabSlicerConfig;if(null==g)g={slicerTable:[],slicerParameter:[],slicerBoolean:[],slicerReload:[],multipleSlicer:[]}}else g={slicerTable:[],slicerParameter:[],slicerBoolean:[],slicerReload:[],multipleSlicer:[]};var p=d.split("analysisTab")[1],h=_.aID.replace("analysistab"+p,"");if(!h.includes("indexTab")){$(`#${d}`).append(`<li class="nav-item navtab scroll-link"><a class="nav-link" id="${_.aID}" href="${_.aHref}" role="tab" data-toggle="tab" aria-controls="${_.aHref}" aria-selected="false">\n                <div class="row">\n                <div class="col-md-10" style="padding-right: 0.1rem">\n                <span class="contentEditable tabname" id="${_.tabHeaderID}" data-tab="${_.chartDivContainer}" data-tab_ct="${_.chartDivContainer}">${_.subTabName}</span>\n                </div>\n                <div class="col-md-2" style="padding-top: 0.3rem">\n                <button type="button" id="${_.deleteButtonID}" data-tabAnchorID="${_.aID}" data-tabContainerDivID="${_.aHref.replace("#","")}" style="border-width:0px;padding: 1px 1px;background-color: white;"><i class="fa fa-times" style="font-size:0.9rem;"></i></button>\n                </div>\n                </div>\n                </a></li>`);const t=document.getElementById(`${_.deleteButtonID}`);t&&t.addEventListener("click",t=>{const a=t.target.parentNode.id.replace("removeT","indext");document.getElementById("tabLinks"+e),document.getElementById(`${a}`);$(`#${a}`).closest(".row").remove();let o=0;$("#tabLinks"+e).find(".col-2").each(function(){$(this).find("p").html(++o)});const l=document.querySelector(".nav.nav-tabs.nav-fill.analysis-nav");l.children.length>4?l.classList.add("scroll-nav"):l.classList.remove("scroll-nav")})}
$(`#${i}`).append(`<div class="tab-pane fade" id="${_.aHref.replace("#","")}" role="tabpanel" aria-labelledby="${_.aID}">\n              <div class="d-flex justify-content-between" style="padding-top:1%">\n              <div class="card-tools tabCardTools row col-12" style="background:whitesmoke; display:flex; flex-direction:row; align-items:center; flex-wrap:wrap; padding-top:2px; padding-bottom:2px; margin:auto">     <button type="button" value="AddComment" class="btn btn-primary commentButton btn-md" id="${_.commentButtonID}"  data-toggle="tooltip" title="Add comment" style="height: 25px;border-radius:5px;border-color:none;color:white; margin-top:10px; margin-bottom:10px"><i class='far fa-comment-dots' style="font-size:1rem;"></i></button>&nbsp;     <button type="button" value="PDF" class=" btn btn-primary" data-tabHeaderID="${_.tabHeaderID}" id='${_.pdfButtonID}' style="height: 25px;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px; margin-right:10px; margin-top:10px; margin-bottom:10px"><i class="fa fa-file-pdf-o"></i>&nbsp;PDF</button>       <button type="button" value="slicerConfig" class="btn btn-primary" data-tabHeaderID="${_.tabHeaderID}" id='${_.pdfButtonID}' data-toggle="modal" data-target="#slicerConfigModal${analysisTabID}${h}" style="height: 25px;border-radius:5px;border-color:none;color:white;padding-left:9px;padding-top:2px; margin-right:10px; margin-top:10px; margin-bottom:10px"><i class="fas fa-filter"></i>&nbsp;Slicer</button>       </div>\n              </div>\n              <div class="col-lg-12 row chartDivSection"  data-layout="Landscape" id="${_.chartDivContainer}" ondblclick="resetCrossFilter.call(this)"></div>\n              <div class="modal" id="slicerConfigModal${analysisTabID}${h}">\n                <div class="modal-dialog modal-md modal-dialog-centered">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h6 class="modal-title" style="text-align:center;">Configure slicer</h6>\n                            <button type="button" class="close" data-dismiss="modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <div class="card">\n                                <div class="card-body">\n                                <div class="card-tools text-primary" style="display:flex; flex-direction:row; align-items:center; justify-content:space-between;">\n                                    <label for="">Add slicer</label>\n                                    <button type="button" class="btn addOptionBtn" onclick="addSlicers('${analysisTabID}', '${h}')"><i class="fas fa-plus text-primary"></i></button>\n                                </div>\n                                <div id="slicerConfigCard${analysisTabID}${h}" style="max-height: 15.25rem; overflow-y: scroll; overflow-x: hidden;">\n                                    <div class="card" data-slicer_class="selectSlicerConfig_${analysisTabID}${h}">\n                                    <div class="card-body">\n                                        <div class="form-group" style="margin-bottom:5px;text-align:left;">\n                                        <label for="analysisSlicerTable">Source table:\n                                        </label>\n                                        <select class="select2 form-control analysisSlicerTable" name="analysisSlicerTable">\n                                            <option value="">Select source table</option>\n\n                                        </select>\n                                        </div>\n                                        <div class="form-group" style="flex-direction: column;align-items: baseline;margin-bottom:5px;text-align:left;">\n                                        <label for="analysisSlicerParameter">Slicer parameter:\n                                        </label>\n                                        <select  class="select2 form-control analysisSlicerParameter" name="analysisSlicerParameter">\n                                            <option value="">Select slicer parameter</option>\n                                        </select>\n                                        </div>\n                                        <div class = "form-group" style="margin-bottom:5px;text-align:left;">\n                                          <label for="analysisSlicerBoolean">\n                                          <input type="checkbox" class="analysisSlicerBoolean" name="analysisSlicerBoolean" value="True" style="margin-right:10px">\n                                          Add default option for all values</label>\n                                        </div>\n                                        <div class="form-group" style="margin-bottom:5px;text-align:left;">\n                                        <label>\n                                        <input class="mulcheckbox" type="checkbox" style="margin-right:10px">\n                                        Multiselect Slicer</label>\n                                      </div>\n                                    </div>\n                                    </div>\n                                </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" id="saveTabSlicerConfig${analysisTabID}${h}" data-analysis_id="${analysisTabID}" data-tab_id="${h}" class="btn btn-primary btn-md mx-2 rounded px-2" data-dismiss="modal">Save</button>\n                        </div>\n                    </div>\n                </div>\n              </div>\n              </div>`),"Landscape"==$(".chartDivSection").attr("data-layout")?$(".chartDivSection").css({"background-size":"5% 5%",width:"100%",margin:"auto",border:"solid black 0.1px","overflow-x":"hidden","overflow-y":"hidden","aspect-ratio":16/9}):"Portrait"==$(".chartDivSection").attr("data-layout")?$(".chartDivSection").css({"background-size":"5% 5%",width:"1080px",margin:"auto",border:"solid black 0.1px","aspect-ratio":9/16,"overflow-y":"hidden","overflow-x":"hidden"}):$(".chartDivSection").css({width:"92%","padding-left":"70px","padding-top":"9px","padding-right":"9px"}),"Landscape"!=$(".chartDivSection").attr("data-layout")&&"Portrait"!=$(".chartDivSection").attr("data-layout")||(Object.keys(_).includes("grid")&&"no"==_.grid?$(`#${_.chartDivContainer}`).css("background-image","none"):$(`#${_.chartDivContainer}`).css({"background-image":"linear-gradient(rgba(0, 0, 0, 0.2) 0.05rem, transparent 0.36%), linear-gradient(90deg, rgba(0, 0, 0, 0.2) 0.05rem, transparent 0.36%)"})),fetchSlicerParams(a),fetchAnalysisSlicer(g,analysisTabID,h),$(`#saveTabSlicerConfig${analysisTabID}${h}`).off("click").on("click",function(){let t=$(this).attr("data-analysis_id"),e=$(this).attr("data-tab_id");var o={TabID:e,slicerTable:[],slicerParameter:[],slicerBoolean:[],slicerReload:[],multipleSlicer:[]};$(`#slicerConfigCard${t}${e}`).find(".card").find(".analysisSlicerTable").each(function(){o.slicerTable.push($(this).val())}),$(`#slicerConfigCard${t}${e}`).find(".card").find(".analysisSlicerParameter").each(function(){o.slicerParameter.push($(this).val())}),$(`#slicerConfigCard${t}${e}`).find(".card").find(".mulcheckbox").each(function(){$(this).is(":checked")?o.multipleSlicer.push(!0):o.multipleSlicer.push(!1)}),$(`#slicerConfigCard${t}${e}`).find(".card").find(".analysisSlicerBoolean").each(function(){$(this).is(":checked")?o.slicerBoolean.push("True"):o.slicerBoolean.push("False")}),fetchAnalysisSlicer(o,t,e),slicerChangeUpdatePlots(a=a)}),$(`#slicerConfigCard${analysisTabID}${h}`).empty(),$(`#slicerConfigCard${analysisTabID}${h}`).attr("data-tableArray",JSON.stringify(l));for(let a=0;a<g.slicerTable.length;a++){for(var b of(addSlicers(analysisTabID,h),$(`#slicerConfigCard${analysisTabID}${h}`).find(".card").eq(a).find(".analysisSlicerTable").empty(),l))$(`#slicerConfigCard${analysisTabID}${h}`).find(".card").eq(a).find(".analysisSlicerTable").append(`<option value="${b}">${b}</option>`);$(`#slicerConfigCard${analysisTabID}${h}`).find(".card").eq(a).find(".analysisSlicerTable").val(g.slicerTable[a]).trigger("select2:select"),$(`#slicerConfigCard${analysisTabID}${h}`).find(".card").eq(a).find(".analysisSlicerTable").val(g.slicerTable[a]).trigger("change"),null!=g.slicerBoolean&&g.slicerBoolean.length>0&&$(`#slicerConfigCard${analysisTabID}${h}`).find(".card").eq(a).find(".analysisSlicerBoolean").prop("checked",g.slicerBoolean[a]),null!=g.multipleSlicer&&g.multipleSlicer.length>0&&null!=g.multipleSlicer[a]&&$(`#slicerConfigCard${analysisTabID}${h}`).find(".card").eq(a).find(".mulcheckbox").prop("checked",g.multipleSlicer[a]),null!=$(`#slicerConfigCard${analysisTabID}${h}`).find(".card").eq(a).find(".analysisSlicerParameter").attr("data-slicerParam")&&$(`#slicerConfigCard${analysisTabID}${h}`).find(".card").eq(a).find(".analysisSlicerParameter").attr("data-slicerParam").removeAttr(t-slicerParam),$(`#slicerConfigCard${analysisTabID}${h}`).find(".card").eq(a).find(".analysisSlicerParameter").attr("data-slicerParam",g.slicerParameter[a])}var y=$("form").find("input[name='csrfmiddlewaretoken']").attr("value");$.ajaxSetup({beforeSend:function(t,a){t.setRequestHeader("X-CSRFToken",y)}}),$(`#${_.chartDivContainer}`).append($(`<div class="hidden" style="height:${_.chartDivContainerHeight+"px"}">`)),$(`#${_.deleteButtonID}`).click(function(){var t=$(this).attr("data-tabAnchorID"),a=$(this).attr("data-tabContainerDivID");$(`#${t}`).parent().remove(),$(`#${a}`).remove()}),$(".contentEditable").each(function(){$(this).on("click",function(){$(this).attr("contenteditable","true"),$(this).focus()}),$(this).focusout(function(){var t=this.innerText;t=t.trim(),0==t.length?(this.innerText="Set Name",$(this).removeAttr("contenteditable"),$(this).addClass("bg-danger"),$(this).trigger("click")):($(this).removeAttr("contenteditable"),$(this).removeClass("bg-danger"))})}),$(`#${_.commentButtonID}`).click(function(){var t=("analysisEditor"+Math.random()).replace(".","");$(this).parent().parent().next().append(`\n                <div class="small-box commentboxcard" data-id="${t}" id = "${t}" onmouseenter="showTool.call(this)" onmouseleave="hideTool.call(this)" style="min-height:6rem;min-width:6rem;height:6rem;width:9rem;" >\n                      <div class="row"  style="position:absolute; margin-left:100%; display:none;flex-wrap:wrap;">\n                        <i class="fa fa-times deleteCommentBox" title="Delete" style="font-size:1rem;margin-right:0.5rem;margin-left:1px;margin-bottom:2px;"></i>\n                        <i class='fas fa-edit' onclick="ckEditorFunc.call(this)" style="font-size:1rem;margin-right:0.5rem;margin-bottom:2px;"></i>\n                        <i class="fa fa-arrows" style="font-size:1rem;margin-right:0.5rem;"></i>\n                      </div>\n                      <div class="commentbox contentEditable" name="comment" style="margin-top:1rem;max-height: 75%;padding: 0.3em 0.5em 0 0.5em;background-color: transparent;text-align: left;overflow-y: auto;">\n\n                      </div>\n                    </div>\n                `),$(".commentboxcard").resizable(),$(".contentEditable").each(function(){$(this).on("click",function(){$(this).attr("contenteditable","true"),$(this).focus()}),$(this).focusout(function(){var t=this.innerText;t=t.trim(),0==t.length?(this.innerText="Enter text here.",$(this).removeAttr("contenteditable"),$(this).trigger("click")):$(this).removeAttr("contenteditable")})}),$(".deleteCommentBox").click(function(){$(this).parent().parent().remove()}),$(".commentboxcard").draggable({cancel:"",containment:"parent"})})}const C=document.getElementsByClassName("contentEditable tabname");for(k in Array.from(C).forEach(t=>{t.addEventListener("blur",a=>{D(t.id,t.textContent)})}),analysisDataRaw.subTabChartDetails){var u=analysisDataRaw.subTabChartDetails[k],m=u.ParentContainerID;navigateTabId=m.replace("row","tab"),$("#"+navigateTabId).attr("data-data",JSON.stringify(u.chartJson)),$("#"+navigateTabId).attr("data-parentContainerID",JSON.stringify(m)),$("#"+navigateTabId).attr("app_code",a),$("#"+navigateTabId).attr("data-tabLoaded","false"),$("#"+navigateTabId).attr("onclick","plotChartsAnalysis.call(this)"),$("#"+navigateTabId).attr("slicerTabConnectObj",JSON.stringify(analysisDataRaw.slicerTabConnectDict));var f={tabDict:_,tabSlicerConfig:g,final_f_dict2:final_f_dict2,thresholdGuage:s,interaction:r,tab_ID:h,parentId:p};$("#"+navigateTabId).attr("data-configdic",JSON.stringify(f)),0==k&&$("#"+navigateTabId).trigger("click")}$(`#analysisDashboard${analysisTabID} .tab-content`);var v=analysisDataRaw.subTabContent[0]["tab_background-color"],x=analysisDataRaw.subTabContent[0].global_bg_name,w=analysisDataRaw.subTabContent[0].global_bg_folder,I=analysisDataRaw.subTabContent[0].global_bg_value;$(`#global_bg${analysisTabID}`).val(I).trigger("change"),"background_image"==I?($(".global_bg_color").css("display","none"),$(".global_bg_image").css("display","block"),""==x&&null==x||("Landscape"==$(`#analysisTabContent${analysisTabID}`).find(".chartDivSection").attr("data-layout")?$(`#analysisTabContent${analysisTabID}`).find(".chartDivSection").css("background-size","100% calc(100vw * 9/16)"):"Portrait"==$(`#analysisTabContent${analysisTabID}`).find(".chartDivSection").attr("data-layout")?$(`#analysisTabContent${analysisTabID}`).find(".chartDivSection").css("background-size","1080px calc(100vw * 16/9)"):$(`#analysisTabContent${analysisTabID}`).find(".chartDivSection").css("background-size","100%"),$.ajax({url:`/users/${urlPath}/reload_bg_image/`,data:{folder_name:w,filename:x},type:"POST",dataType:"json",success:function(t){$(".mainDiv").css("background-image","url(data:image/png;base64,"+t.image_url),$(".mainDiv").css("background-size","56em 15em"),$(`#tabLinks${e}`).css("background-image","url(data:image/png;base64,"+t.image_url),$(`#tabLinks${e}`).css("background-size","56em 15em"),$(`#bg_image_url${analysisTabID}`).html(""),$(`#bg_image_url${analysisTabID}`).html(t.image_url),$(`#bg_image_name${analysisTabID}`).html(""),$(`#bg_image_name${analysisTabID}`).html(t.image_name),$(`#analysisTabContent${analysisTabID}`).find(".chartDivSection").css("background-image","url(data:image/png;base64,"+t.image_url)}}))):($(".global_bg_color").css("display","block"),$(".global_bg_image").css("display","none"),$(".mainDiv").css("background-image","none")),$(`#analysisTabContent${analysisTabID}`).find(".chartDivSection").css("background-color",v),$("#tabLinks"+e).css("background-color",v),$(`#analysisTabContent${analysisTabID}`).find(".chartDivSection").attr("config_background-color",v),$(`#analysisDashboard${analysisTabID} .tab-content`).attr("config_background-color",v),$(`#analysisTab${analysisTabID}`).find(".nav-link").attr("config_background-color",v),null!=v&&($(`#myColor${analysisTabID}`).val(v),$(`#main_theme${analysisTabID}`).css("background-color",v)),null!=analysisDataRaw.subTabContent[0].outer_color&&($(`#theme1${analysisTabID}`).css("background-color",analysisDataRaw.subTabContent[0].outer_color),$(`#themeColor${analysisTabID}`).val(analysisDataRaw.subTabContent[0].outer_color)),null!=analysisDataRaw.subTabContent[0].inner_color&&($(`#themegrad${analysisTabID}`).css("background-color",analysisDataRaw.subTabContent[0].inner_color),$(`#themeColor1${analysisTabID}`).val(analysisDataRaw.subTabContent[0].inner_color),$(`#globalConfigPreviewChart${analysisTabID}`).css("color",analysisDataRaw.subTabContent[0].inner_color)),null!=analysisDataRaw.subTabContent[0].indexCard_BGColor&&($(`#indextabBG${analysisTabID}`).css(analysisDataRaw.subTabContent[0].indexCard_BGColor),$(`#indextabBG${analysisTabID}`).val(analysisDataRaw.subTabContent[0].indexCard_BGColor)),null!=analysisDataRaw.subTabContent[0].indexCard_FontColor&&($(`#indextabFC${analysisTabID}`).css("color",analysisDataRaw.subTabContent[0].indexCard_FontColor),$(`#indextabFC${analysisTabID}`).val(analysisDataRaw.subTabContent[0].indexCard_FontColor)),null!=analysisDataRaw.subTabContent[0].header_color&&($(".inner-div_title").css("color",analysisDataRaw.subTabContent[0].header_color),$(".global_header_color").val(analysisDataRaw.subTabContent[0].header_color)),null!=analysisDataRaw.subTabContent[0].header_bg_color&&($(".inner-div_header").css("background-color",analysisDataRaw.subTabContent[0].header_bg_color),$(".global_header_bgcolor").val(analysisDataRaw.subTabContent[0].header_bg_color)),null!=analysisDataRaw.subTabContent[0].global_header_alignment&&$(".global_header_alignment").val(analysisDataRaw.subTabContent[0].global_header_alignment).trigger("change"),$(".global_header_fontsize").val(analysisDataRaw.subTabContent[0].header_fontsize),$(".global_header_fontweight").val(analysisDataRaw.subTabContent[0].header_fontweight).trigger("change"),$(".global_header_fontstyle").val(analysisDataRaw.subTabContent[0].header_fontstyle).trigger("change"),$(".inner-div_title").css("font-size",analysisDataRaw.subTabContent[0].header_fontsize+"px"),$(".inner-div_title").css("font-weight",analysisDataRaw.subTabContent[0].header_fontweight),$(".inner-div_title").css("font-style",analysisDataRaw.subTabContent[0].header_fontstyle);var B=parseInt(analysisDataRaw.subTabContent[0].header_fontsize)+20+"px";$(".inner-div_header").css("height",B),null!=analysisDataRaw.subTabContent[0].global_checkBox&&$(".global_shadow").prop("checked",analysisDataRaw.subTabContent[0].global_checkBox),null!=analysisDataRaw.subTabContent[0].global_checkBox_border&&$(".global_border").prop("checked",analysisDataRaw.subTabContent[0].global_checkBox_border),null!=analysisDataRaw.subTabContent[0].global_shadowColor&&$(".global_shadow_color").val(analysisDataRaw.subTabContent[0].global_shadowColor),null!=analysisDataRaw.subTabContent[0].global_shadowXOffset&&$(".global_shadow_x").val(analysisDataRaw.subTabContent[0].global_shadowXOffset),null!=analysisDataRaw.subTabContent[0].global_shadowBlur&&$(".global_shadow_blur").val(analysisDataRaw.subTabContent[0].global_shadowBlur),null!=analysisDataRaw.subTabContent[0].global_shadowYOffset&&$(".global_shadow_y").val(analysisDataRaw.subTabContent[0].global_shadowYOffset),null!=analysisDataRaw.subTabContent[0].global_shadowThickness&&$(".global_shadow_thickness").val(analysisDataRaw.subTabContent[0].global_shadowThickness),null!=analysisDataRaw.subTabContent[0].global_borderThickness&&$(".global_border_thickness").val(analysisDataRaw.subTabContent[0].global_borderThickness),null!=analysisDataRaw.subTabContent[0].global_borderStyle&&$(".global_border_style").val(analysisDataRaw.subTabContent[0].global_borderStyle).trigger("change"),null!=analysisDataRaw.subTabContent[0].global_borderColor&&$(".global_border_color").val(analysisDataRaw.subTabContent[0].global_borderColor),globalBorderFunction(),globalShadowFunction(),"yes"==analysisDataRaw.subTabContent[0].g_color?$(".global_gradient_color").prop("checked",!0):$(".global_gradient_color").prop("checked",!1),setTimeout(()=>{var t=1;$(".chartDivSection").find(".charts").each(function(){var a=$(this).attr("id").split("card")[0],e=$(this).attr("data-subtype");if(r.length>0?r[t-1]?$("#"+a+"interaction").attr("checked","checked"):$("#"+a+"interaction").prop("checked",!1):$("#"+a+"interaction").attr("checked","checked"),t+=1,"Table"==e&&Object.keys(n).length>0){var o=$(`#table_example${a}`).DataTable();new $.fn.dataTable.FixedColumns(o,n[`${a}`])}})},5e3),Object.keys(analysisDataRaw).includes("slicerTabConnectDict")&&(slicerTabConnectDict=analysisDataRaw.slicerTabConnectDict),null!=$(`#analysisDashboard${analysisTabID} .nav-tabs a`).first().attr("id")&&($(`#analysisDashboard${analysisTabID} .nav-tabs a`).first().attr("id").includes("indexTab")?$(`#analysisDashboard${analysisTabID} .nav-tabs a`).first().tab("show"):$(`#analysisDashboard${analysisTabID} .nav-tabs a:first`).trigger("click"))}y=$("form").find("input[name='csrfmiddlewaretoken']").attr("value");$.ajaxSetup({beforeSend:function(t,a){t.setRequestHeader("X-CSRFToken",y)}})}function reloadAnalysisConfig(t){""!=t&&t.startsWith("ellipse")?$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"saveChartConfig",element_id:t},type:"POST",dataType:"json",success:function(a){reloadAnalysisConfigFunc(a,"",t)},error:()=>{Swal.fire({icon:"error",text:"Error! Please try again."})}}):t.startsWith("ellipse")||$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"saveChartConfigList",element_id:t},type:"POST",dataType:"json",success:function(a){if($(`#plotSection${t}`).find(".nav-link").length<2&&$(`#analysisAddTab${t}`).trigger("click"),""!=a.save&&null!=a.save){let e=a.save;for(let o=0;o<e.length;o++)null==$("#tableTab"+e[o].ElementID).find("select").val()?t==e[o].ElementID&&(a.save=e[o],$("#plotSection"+e[o].ElementID).css("display","block"),reloadAnalysisConfigFunc(a,"",e[o].ElementID)):e[o].hasOwnProperty("dropdown")&&$("#tableTab"+e[o].ElementID).find("select").val()==e[o].dropdown&&t==e[o].ElementID&&(a.save=e[o],$("#plotSection"+e[o].ElementID).css("display","block"),reloadAnalysisConfigFunc(a,"",e[o].ElementID))}else if(null!=a.analysis_table_list){$(`#selectTable${t}`).empty(),$(`#selectTable${t}`).append('<option value="Select table" selected disabled>Select table</option>');for(let e=0;e<a.analysis_table_list.length;e++)$(`#selectTable${t}`).append(`<option value="${a.analysis_table_list[e]}">${a.analysis_table_list[e]}</option>`)}},error:()=>{Swal.fire({icon:"error",text:"Error! Please try again."})}})}function pivotResize(t,a,e,o,l,d){$(`#${t}`).resizable({start:function(a,e){document.getElementById(t).className="card charts ui-resizable ui-draggable ui-resizable-resizing"},stop:function(l,d){let i,r;e=$(`#${t}`).find(".graphcontainerdiv").data("pivotUIOptions"),Object.keys(e).includes("aggregators")&&delete e.aggregators,Object.keys(e).includes("renderers")&&delete e.renderers,i=d.size.width<400?.7*d.size.width:d.size.width<550?.75*d.size.width:d.size.width<700?.8*d.size.width:.85*d.size.width,r=d.size.height<400?.8*d.size.height:.875*d.size.height;let n={height:parseInt(r),width:parseInt(i)};latestconfig={},google.load("visualization","1",{packages:["corechart"]}),$(`#${t}`).find(".graphcontainerdiv").pivotUI(a,{...e,rendererOptions:{plotly:n,c3:{size:{height:parseInt(r),width:parseInt(i)}},d3:{height:parseInt(r),width:parseInt(i)},gchart:{height:parseInt(r),width:parseInt(i),colors:["var(--primary-color)"]}},onRefresh:function(t){var a=JSON.parse(JSON.stringify(t));Object.keys(a).includes("aggregators")&&delete a.aggregators,Object.keys(a).includes("renderers")&&delete a.renderers,latestconfig=a}},!0),$(`#${t} .graphcontainerdiv .pvtAggregator`).css("display","none"),$(`#${t} .graphcontainerdiv .pvtRenderer`).css("display","none");var s=["Table","Table Barchart","Heatmap","Row Heatmap","Col Heatmap","Line Chart","Bar Chart","Stacked Bar Chart","Area Chart","Scatter Chart"];$(`#${o}_configure_pivot_charttype`).find("option").slice(1).remove();for(const t in s)$(`#${o}_configure_pivot_charttype`).append(new Option(s[t],s[t],!1,!1));$(`#${o}_configure_pivot_charttype`).val(e.rendererName).trigger("change"),$(`#${o}_configure_pivot_charttype`).on("change",function(){$(`#${t} .graphcontainerdiv .pvtRenderer`).val(this.value).trigger("change")});var c=["Count","Count Unique Values","List Unique Values","Average","Sum","Interger Sum","Median","Sample Variance","Sample Standard Deviation","Minimum","Maximum","First","Last","Sum over Sum","80% Upper Bound","80% Lower Bound","Sum as Fraction of Total","Sum as Fraction of Rows","Sum as Fraction of Columns","Count as Fraction of Total"];$(`#${o}_configure_pivot_operation`).find("option").slice(1).remove();for(let t=0;t<c.length;t++)$(`#${o}_configure_pivot_operation`).append('<option value="'+c[t]+'">'+c[t]+"</option>");$(`#${o}_configure_pivot_operation`).val(e.aggregatorName).trigger("change"),$(`#${o}_configure_pivot_operation`).on("change",function(){$(`#${t} .graphcontainerdiv .pvtAggregator`).val(this.value).trigger("change")})}})}var slicerTabConfigDict={},slicerTabConnectDict={},crossFilterDict1={},plotType="",freeze_dict={left:0,right:0},finalfdict2={left:0,right:0},cellindex3,cellcollen2,tabID,crossFilterlist=[],elementID,tabID,plt_bk_color="",apply_clicked=0,close_clicked=0,color_changed=0;let prevDiv="",myPlot="",selectedOptions,globalHeaderColumnAlignment="center",globalContentColumnAlignment="center",highlightcolumnheaderscolorlist={},globalConfigJsonData={};var columnOptions="",formatterOptions="",numberOptions="",currencyOptions="",currencyOptions1="",formatterObjs=[],dateOptions="";$(".plotlyModal").on("shown.bs.modal",function(){$(document).off("focusin.modal")});