import{initialise_table_results_5,displayTabularOutput,trainEWMARun,displayResultsBacktest,displayOutputCopulaFunc,portfolio_valuation_output,trainGARCHModel,trainARIMARun,analyseTSData,displayBootStrapOptimizer,initialise_table_results_4,displayResultsOptimizer,initialise_table_results_3,initialise_table_results_2,initialiseTableResults,displayResultsFinInstrument,displayOutputLogReg,displayOutputLinReg,displayOutputFitTest,displayOutputFitDiscrete,initialise_table,displayOutputDecTree,datatablesFuncAvsP,datatablesFunc,displayOutputAB}from"./embeded_computation.min.js";function listViewRunComputation(obj){var savedhtml=$(obj).html();if(null==$(obj).parent().find("select").val())Swal.fire({icon:"warning",text:"Select the Computation Model."});else{var table=$(obj).parent().parent().parent().parent(),elementId=$(table).attr("id").replace("example1",""),lengthOfrow=$(table).find("thead").find("tr").find("th").children().length,attrData=$(obj).attr("data-list");if(""==attrData||"{}"==attrData);else{var parsedAttrdata=JSON.parse(attrData),computeModel=$(obj).parent().find("select").val(),compModelName=computeModel,listOfInputs=[],allOkFlag=0;for(let y in parsedAttrdata[computeModel]){var tableName=y;for(let o in parsedAttrdata[computeModel][y][0])for(let k=0;k<lengthOfrow;k++)if($(table).find("thead").find("tr").find("th").children().eq(k).html().toLowerCase()==parsedAttrdata[computeModel][y][0][o].toLowerCase()){listOfInputs.push({[k]:parsedAttrdata[computeModel][y][0][o]});break}}var valuesDic={};for(let l in listOfInputs){if($(obj).parent().parent().find("td").eq(parseInt(Object.keys(listOfInputs[l]).toString())).find("div").length>0)var value=$(obj).parent().parent().find("td").eq(parseInt(Object.keys(listOfInputs[l]).toString())).find("div").text();else var value=$(obj).parent().parent().find("td").eq(parseInt(Object.keys(listOfInputs[l]).toString())).text();var columnName=Object.values(listOfInputs[l]).toString();"-"==value?allOkFlag=1:valuesDic[columnName]=value}0==allOkFlag?($(obj).html('<i class="fa fa-circle-notch fa-spin"></i>'),$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"calculate_embeded_computation_list_view",values_dic:JSON.stringify(valuesDic),table_name:JSON.stringify(tableName),compModelName:JSON.stringify(compModelName),target_dic:JSON.stringify(parsedAttrdata[computeModel][tableName][1])},type:"POST",dataType:"json",success:function(output){var context=output.context,targetfields=output.target;if("full_output"==parsedAttrdata[computeModel][tableName][2])if("no"==context.error_msg){var data;"Success"==(data=context.data).element_error_message?"individual"===data.output_display_type&&"Export Data"!=data.name&&("Logistic Regression"===data.name?($(`#embededComputationlistViewBody_${elementId}`).empty(),displayOutputLogReg(data.content,`#embededComputationlistViewBody_${elementId}`,`#embededComputationlistView_${elementId}`),$(`#embededComputationlistView_${elementId}`).modal("show")):"Linear Regression"===data.name?($(`#embededComputationlistViewBody_${elementId}`).empty(),displayOutputLinReg(data.content,`#embededComputationlistViewBody_${elementId}`,`#embededComputationlistView_${elementId}`),$(`#embededComputationlistView_${elementId}`).modal("show"),initialise_table("#table_ActualVFittedLinReg")):"Goodness Of Fit Test"===data.name?(displayOutputFitTest(data.content,`#embededComputationlistViewBody_${elementId}`,0,`#embededComputationlistView_${elementId}`),$(`#embededComputationlistView_${elementId}`).modal("show")):"Fit Discrete"==data.name?(displayOutputFitDiscrete(data.content,`#embededComputationlistViewBody_${elementId}`,0,`#embededComputationlistView_${elementId}`),$(`#embededComputationlistView_${elementId}`).modal("show")):"CART"===data.name||"CART Algorithm"==data.name?($(`#embededComputationlistViewBody_${elementId}`).css("height","640px"),$(`#embededComputationlistViewBody_${elementId}`).empty(),displayOutputDecTree(data.content,`#embededComputationlistViewBody_${elementId}`,`#embededComputationlistView_${elementId}`),$(`#embededComputationlistView_${elementId}`).modal("show"),setTimeout(()=>{$("#actual_grid").DataTable().columns.adjust(),$("#table_confusionMatrixDecTree").DataTable().columns.adjust(),$("#table_classReportDecTree").DataTable().columns.adjust(),$("#tableParameters").DataTable().columns.adjust()},500)):"Boosting Algorithm"==data.name?($(`#embededComputationlistViewBody_${elementId}`).css("height","640px"),$(`#embededComputationlistViewBody_${elementId}`).empty(),displayOutputAB(data.content,!0,`#embededComputationlistViewBody_${elementId}`,`#embededComputationlistView_${elementId}`),$(`#embededComputationlistView_${elementId}`).modal("show"),setTimeout(()=>{$("#actual_grid_ba").DataTable().columns.adjust(),$("#actual_grid").DataTable().columns.adjust(),$("#table_confusionMatrixDecTree").DataTable().columns.adjust(),$("#table_classReportDecTree").DataTable().columns.adjust(),$("#tableParameters").DataTable().columns.adjust()},500)):"Interest Rate Products"===data.name||"Equities"===data.name||"Mutual Fund"===data.name?(displayResultsFinInstrument(data.content,`#embededComputationlistViewBody_${elementId}`,`#embededComputationlistView_${elementId}`),$(`#embededComputationlistView_${elementId}`).modal("show"),initialiseTableResults(),initialise_table_results_2(),initialise_table_results_3()):"Optimiser"===data.name?(displayResultsOptimizer(data.content,`#embededComputationlistViewBody_${elementId}`,0,`#embededComputationlistView_${elementId}`),$(`#embededComputationlistView_${elementId}`).modal("show"),initialiseTableResults(),initialise_table_results_2(),initialise_table_results_4()):"IR Curve Bootstrapping"===data.name?(displayBootStrapOptimizer(data.content,`#embededComputationlistViewBody_${elementId}`,0,`#embededComputationlistView_${elementId}`),$(`#embededComputationlistView_${elementId}`).modal("show"),initialiseTableResults()):"Analyse Time Series Data"==data.name?"No"==data.existing_configuration?($(`#embededComputationlistViewBody_${elementId}`).empty(),$(`#embededComputationlistViewBody_${elementId}`).append('\n                                                            <p style="color:red;margin-left:0.5rem;">Run failed. Please save the configuration.</p>\n                                                            '),$(`#embededComputationlistView_${elementId}`).modal("show")):analyseTSData(data.content,`#embededComputationlistViewBody_${elementId}`,`#embededComputationlistView_${elementId}`):"Train an ARIMA Model"==data.name?"No"==data.content.existing_configuration?($(`#embededComputationlistViewBody_${elementId}`).empty(),$(`#embededComputationlistViewBody_${elementId}`).append('\n                                                            <p style="color:red;margin-left:0.5rem;">Run failed. Please save the configuration.</p>\n                                                            '),$(`#embededComputationlistView_${elementId}`).modal("show")):trainARIMARun(data.content,`#embededComputationlistViewBody_${elementId}`,`#embededComputationlistView_${elementId}`):"Train a GARCH Model"==data.name?"No"==data.content.existing_configuration?($(`#embededComputationlistViewBody_${elementId}`).empty(),$(`#embededComputationlistViewBody_${elementId}`).append('\n                                                            <p style="color:red;margin-left:0.5rem;">Run failed. Please save the configuration.</p>\n                                                            '),$(`#embededComputationlistView_${elementId}`).modal("show")):trainGARCHModel(data.content,`#embededComputationlistViewBody_${elementId}`,`#embededComputationlistView_${elementId}`):"Portfolio Valuation"==data.name?portfolio_valuation_output(data.content,`#embededComputationlistViewBody_${elementId}`,`#embededComputationlistView_${elementId}`):"Copula"===data.name?(displayOutputCopulaFunc(data.content,`#embededComputationlistViewBody_${elementId}`,0,`#embededComputationlistView_${elementId}`),$(`#embededComputationlistView_${elementId}`).modal("show")):"VaR Backtesting"===data.name?(displayResultsBacktest(data.content,`#embededComputationlistViewBody_${elementId}`,0,`#embededComputationlistView_${elementId}`),$(`#embededComputationlistView_${elementId}`).modal("show"),initialiseTableResults()):"Train an EWMA Model"==data.name?"No"==data.content.existing_configuration?($(`#embededComputationlistViewBody_${elementId}`).empty(),$(`#embededComputationlistViewBody_${elementId}`).append('\n                                                            <p style="color:red;margin-left:0.5rem;">Run failed. Please save the configuration.</p>\n                                                            '),$(`#embededComputationlistView_${elementId}`).modal("show")):trainEWMARun(data.content,`#embededComputationlistViewBody_${elementId}`,`#embededComputationlistView_${elementId}`):displayTabularOutput(data.content,`#embededComputationlistViewBody_${elementId}`,`#embededComputationlistView_${elementId}`)):Swal.fire({icon:"error",text:data.element_error_message})}else{var error=context.e_list.slice(-1);Swal.fire({icon:"error",text:error})}else if("no"==context.error_msg){var data=context.data.content,listOftarget=[];for(let o in parsedAttrdata[computeModel][tableName][1])for(let k=0;k<lengthOfrow;k++)$(table).find("thead").find("tr").find("th").children().eq(k).html().toLowerCase()==parsedAttrdata[computeModel][tableName][1][o].toLowerCase()&&listOftarget.push({[k]:parsedAttrdata[computeModel][tableName][1][o]});var final={};for(let i in listOftarget)for(let k in listOftarget[i])for(let y in targetfields)listOftarget[i][k]==targetfields[y]&&(final[k]=y);for(let i in final)for(let y in data[0])final[i]==y&&($(obj).closest("tr").find("td").eq(i).find("div").length>0?$(obj).closest("tr").find("td").eq(i).find("div").html(data[0][y]):$(obj).closest("tr").find("td").eq(i).html(data[0][y]))}else{var error=context.e_list.slice(-1);Swal.fire({icon:"error",text:error})}$(obj).html(savedhtml)},error:function(){$(obj).html(savedhtml),Swal.fire({icon:"error",text:"Error! Please try again."})}})):($(obj).html(savedhtml),Swal.fire({icon:"error",text:"Error! Input fields are empty. Please try again."}))}}}function listViewRunComputationMultiple(obj){var savedhtml=$(obj).html();if(null==$(obj).parent().find("select").val())window.alert("Select the computation Model");else{var table=$(obj).parent().parent().parent().parent(),elementId=$(table).attr("id").replace("example1",""),lengthOfrow=$(table).find("thead").find("tr").find("th").children().length,attrData=$(obj).attr("data-list");if(""==attrData||"{}"==attrData);else{var parsedAttrdata=JSON.parse(attrData),computeModel=$(obj).parent().find("select").val(),compModelName=computeModel,listOfInputs=[],allOkFlag=0;for(let i in parsedAttrdata)for(let y in parsedAttrdata[i][computeModel]){var tableName=y;for(let o in parsedAttrdata[i][computeModel][y][0])for(let k=0;k<lengthOfrow;k++)$(table).find("thead").find("tr").find("th").children().eq(k).html()==parsedAttrdata[i][computeModel][y][0][o]&&listOfInputs.push({[k]:parsedAttrdata[i][computeModel][y][0][o]});var target_inputs=parsedAttrdata[i][computeModel][y][1]}var valuesDic={};for(let l in listOfInputs){var value=$(obj).parent().parent().find("td").eq(parseInt(Object.keys(listOfInputs[l]).toString())).children().html(),columnName=Object.values(listOfInputs[l]).toString();"-"==value?allOkFlag=1:valuesDic[columnName]=value}0==allOkFlag?($(obj).html('<i class="fa fa-circle-notch fa-spin"></i>'),$.ajax({url:`/users/${urlPath}/dynamicVal/`,data:{operation:"calculate_embeded_computation_list_view",values_dic:JSON.stringify(valuesDic),table_name:JSON.stringify(tableName),compModelName:JSON.stringify(compModelName),target_dic:JSON.stringify(target_inputs)},type:"POST",dataType:"json",success:function(output){var context=output.context,targetfields=output.target;for(let t in parsedAttrdata)if(null!=parsedAttrdata[t][computeModel])if("full_output"==parsedAttrdata[t][computeModel][tableName][2])if("no"==context.error_msg){var data;"Success"==(data=context.data).element_error_message?"individual"===data.output_display_type&&"Export Data"!=data.name&&("Logistic Regression"===data.name?($(`#embededComputationlistViewBodyMultiple_${elementId}`).empty(),displayOutputLogReg(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,`#embededComputationlistViewMultiple_${elementId}`),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show")):"Linear Regression"===data.name?($(`#embededComputationlistViewBodyMultiple_${elementId}`).empty(),displayOutputLinReg(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,`#embededComputationlistViewMultiple_${elementId}`),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show"),initialise_table("#table_ActualVFittedLinReg")):"Goodness Of Fit Test"===data.name?(displayOutputFitTest(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,0,`#embededComputationlistViewMultiple_${elementId}`),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show")):"Fit Discrete"==data.name?(displayOutputFitDiscrete(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,0,`#embededComputationlistViewMultiple_${elementId}`),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show")):"CART"===data.name||"CART Algorithm"==data.name?($(`#embededComputationlistViewBodyMultiple_${elementId}`).css("height","640px"),$(`#embededComputationlistViewBodyMultiple_${elementId}`).empty(),displayOutputDecTree(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,`#embededComputationlistViewMultiple_${elementId}`),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show"),setTimeout(()=>{$("#actual_grid").DataTable().columns.adjust(),$("#table_confusionMatrixDecTree").DataTable().columns.adjust(),$("#table_classReportDecTree").DataTable().columns.adjust(),$("#tableParameters").DataTable().columns.adjust()},500)):"Boosting Algorithm"==data.name?($(`#embededComputationlistViewBodyMultiple_${elementId}`).css("height","640px"),$(`#embededComputationlistViewBodyMultiple_${elementId}`).empty(),displayOutputAB(data.content,!0,`#embededComputationlistViewBodyMultiple_${elementId}`,`#embededComputationlistViewMultiple_${elementId}`),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show"),setTimeout(()=>{$("#actual_grid_ba").DataTable().columns.adjust(),$("#actual_grid").DataTable().columns.adjust(),$("#table_confusionMatrixDecTree").DataTable().columns.adjust(),$("#table_classReportDecTree").DataTable().columns.adjust(),$("#tableParameters").DataTable().columns.adjust()},500)):"Interest Rate Products"===data.name||"Equities"===data.name||"Mutual Fund"===data.name?(displayResultsFinInstrument(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,`#embededComputationlistViewMultiple_${elementId}`),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show"),initialiseTableResults(),initialise_table_results_2(),initialise_table_results_3()):"Optimiser"===data.name?(displayResultsOptimizer(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,0,`#embededComputationlistViewMultiple_${elementId}`),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show"),initialiseTableResults(),initialise_table_results_2(),initialise_table_results_4()):"IR Curve Bootstrapping"===data.name?(displayBootStrapOptimizer(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,0,`#embededComputationlistViewMultiple_${elementId}`),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show"),initialiseTableResults()):"Analyse Time Series Data"==data.name?"No"==data.existing_configuration?($(`#embededComputationlistViewBodyMultiple_${elementId}`).empty(),$(`#embededComputationlistViewBodyMultiple_${elementId}`).append('\n                                                            <p style="color:red;margin-left:0.5rem;">Run failed. Please save the configuration.</p>\n                                                            '),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show")):analyseTSData(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,`#embededComputationlistViewMultiple_${elementId}`):"Train an ARIMA Model"==data.name?"No"==data.content.existing_configuration?($(`#embededComputationlistViewBodyMultiple_${elementId}`).empty(),$(`#embededComputationlistViewBodyMultiple_${elementId}`).append('\n                                                            <p style="color:red;margin-left:0.5rem;">Run failed. Please save the configuration.</p>\n                                                            '),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show")):trainARIMARun(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,`#embededComputationlistViewMultiple_${elementId}`):"Train a GARCH Model"==data.name?"No"==data.content.existing_configuration?($(`#embededComputationlistViewBodyMultiple_${elementId}`).empty(),$(`#embededComputationlistViewBodyMultiple_${elementId}`).append('\n                                                            <p style="color:red;margin-left:0.5rem;">Run failed. Please save the configuration.</p>\n                                                            '),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show")):trainGARCHModel(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,`#embededComputationlistViewMultiple_${elementId}`):"Portfolio Valuation"==data.name?portfolio_valuation_output(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,`#embededComputationlistViewMultiple_${elementId}`):"Copula"===data.name?(displayOutputCopulaFunc(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,0,`#embededComputationlistViewMultiple_${elementId}`),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show")):"VaR Backtesting"===data.name?(displayResultsBacktest(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,0,`#embededComputationlistViewMultiple_${elementId}`),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show"),initialiseTableResults()):"Train an EWMA Model"==data.name?"No"==data.content.existing_configuration?($(`#embededComputationlistViewBodyMultiple_${elementId}`).empty(),$(`#embededComputationlistViewBodyMultiple_${elementId}`).append('\n                                                            <p style="color:red;margin-left:0.5rem;">Run failed. Please save the configuration.</p>\n                                                            '),$(`#embededComputationlistViewMultiple_${elementId}`).modal("show")):trainEWMARun(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,`#embededComputationlistViewMultiple_${elementId}`):displayTabularOutput(data.content,`#embededComputationlistViewBodyMultiple_${elementId}`,`#embededComputationlistViewMultiple_${elementId}`)):alert(data.element_error_message)}else{var error=context.e_list.slice(-1);window.alert(error)}else if("no"==context.error_msg){var data=context.data.content,listOftarget=[];for(let o in parsedAttrdata[t][computeModel][tableName][1])for(let k=0;k<lengthOfrow;k++)$(table).find("thead").find("tr").find("th").children().eq(k).html()==parsedAttrdata[t][computeModel][tableName][1][o]&&listOftarget.push({[k]:parsedAttrdata[t][computeModel][tableName][1][o]});var final={};for(let i in listOftarget)for(let k in listOftarget[i])for(let y in targetfields)listOftarget[i][k]==targetfields[y]&&(final[k]=y);for(let i in final)for(let y in data[0])final[i]==y&&($(obj).closest("tr").find("td").eq(i).find("div").length>0?$(obj).closest("tr").find("td").eq(i).find("div").html(data[0][y]):$(obj).closest("tr").find("td").eq(i).html(data[0][y]))}else{var error=context.e_list.slice(-1);window.alert(error)}$(obj).html(savedhtml)},error:function(){$(obj).html(savedhtml),window.alert("Error")}})):($(obj).html(savedhtml),window.alert("Error Input fields are empty !"))}}}window.listViewRunComputation=listViewRunComputation,window.listViewRunComputationMultiple=listViewRunComputationMultiple;