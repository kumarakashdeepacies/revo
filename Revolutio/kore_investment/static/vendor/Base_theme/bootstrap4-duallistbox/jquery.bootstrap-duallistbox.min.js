!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof module&&module.exports?module.exports=function(root,jQuery){return void 0===jQuery&&(jQuery="undefined"!=typeof window?require("jquery"):require("jquery")(root)),factory(jQuery),jQuery}:factory(jQuery)}((function($){var pluginName="bootstrapDualListbox",defaults={filterTextClear:"show all",filterPlaceHolder:"Filter",moveSelectedLabel:"Move selected",moveAllLabel:"Move all",removeSelectedLabel:"Remove selected",removeAllLabel:"Remove all",moveOnSelect:!0,moveOnDoubleClick:!0,preserveSelectionOnMove:!1,selectedListLabel:!1,nonSelectedListLabel:!1,helperSelectNamePostfix:"_helper",selectorMinimalHeight:100,showFilterInputs:!0,nonSelectedFilter:"",selectedFilter:"",infoText:"Showing all {0}",infoTextFiltered:'<span class="" style="color:#b58d2b;">Showing</span> {0} from {1}',infoTextEmpty:"Empty list",filterOnValues:!1,sortByInputOrder:!1,eventMoveOverride:!1,eventMoveAllOverride:!1,eventRemoveOverride:!1,eventRemoveAllOverride:!1,btnClass:"btn-outline-secondary",btnMoveText:"&gt;",btnRemoveText:"&lt;",btnMoveAllText:"Select all",btnRemoveAllText:"Remove all"},isBuggyAndroid=/android/i.test(navigator.userAgent.toLowerCase());function BootstrapDualListbox(element,options){this.element=$(element),this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}function triggerChangeEvent(dualListbox){dualListbox.element.trigger("change")}function updateSelectionStates(dualListbox){dualListbox.element.find("option").each((function(index,item){var $item=$(item);void 0===$item.data("original-index")&&$item.data("original-index",dualListbox.elementCount++),void 0===$item.data("_selected")&&$item.data("_selected",!1)}))}function changeSelectionState(dualListbox,original_index,selected){dualListbox.element.find("option").each((function(index,item){var $item=$(item);$item.data("original-index")===original_index&&($item.prop("selected",selected),selected?($item.attr("data-sortindex",dualListbox.sortIndex),dualListbox.sortIndex++):$item.removeAttr("data-sortindex"))}))}function formatString(s,args){return console.log(s,args),s.replace(/{(\d+)}/g,(function(match,number){return void 0!==args[number]?args[number]:match}))}function refreshInfo(dualListbox){if(dualListbox.settings.infoText){var visible1=dualListbox.elements.select1.find("option").length,visible2=dualListbox.elements.select2.find("option").length,all1=dualListbox.element.find("option").length-dualListbox.selectedElements,all2=dualListbox.selectedElements,content="";content=0===all1?dualListbox.settings.infoTextEmpty:formatString(visible1===all1?dualListbox.settings.infoText:dualListbox.settings.infoTextFiltered,[visible1,all1]),dualListbox.elements.info1.html(content),dualListbox.elements.box1.toggleClass("filtered",!(visible1===all1||0===all1)),content=0===all2?dualListbox.settings.infoTextEmpty:formatString(visible2===all2?dualListbox.settings.infoText:dualListbox.settings.infoTextFiltered,[visible2,all2]),dualListbox.elements.info2.html(content),dualListbox.elements.box2.toggleClass("filtered",!(visible2===all2||0===all2))}}function refreshSelects(dualListbox){dualListbox.selectedElements=0,dualListbox.elements.select1.empty(),dualListbox.elements.select2.empty(),dualListbox.element.find("option").each((function(index,item){var $item=$(item);$item.prop("selected")?(dualListbox.selectedElements++,dualListbox.elements.select2.append($item.clone(!0).prop("selected",$item.data("_selected")))):dualListbox.elements.select1.append($item.clone(!0).prop("selected",$item.data("_selected")))})),dualListbox.settings.showFilterInputs&&(filter(dualListbox,1),filter(dualListbox,2)),refreshInfo(dualListbox)}function filter(dualListbox,selectIndex){if(dualListbox.settings.showFilterInputs){saveSelections(dualListbox,selectIndex),dualListbox.elements["select"+selectIndex].empty().scrollTop(0);var regex,allOptions=dualListbox.element.find("option"),options=dualListbox.element;options=1===selectIndex?allOptions.not(":selected"):options.find("option:selected");try{regex=new RegExp($.trim(dualListbox.elements["filterInput"+selectIndex].val()),"gi")}catch(e){regex=new RegExp("/a^/","gi")}options.each((function(index,item){var $item=$(item),isFiltered=!0;(item.text.match(regex)||dualListbox.settings.filterOnValues&&$item.attr("value").match(regex))&&(isFiltered=!1,dualListbox.elements["select"+selectIndex].append($item.clone(!0).prop("selected",$item.data("_selected")))),allOptions.eq($item.data("original-index")).data("filtered"+selectIndex,isFiltered)})),refreshInfo(dualListbox)}}function saveSelections(dualListbox,selectIndex){var options=dualListbox.element.find("option");dualListbox.elements["select"+selectIndex].find("option").each((function(index,item){var $item=$(item);options.eq($item.data("original-index")).data("_selected",$item.prop("selected"))}))}function sortOptionsByInputOrder(select){var selectopt=select.children("option");selectopt.sort((function(a,b){var an=parseInt(a.getAttribute("data-sortindex")),bn=parseInt(b.getAttribute("data-sortindex"));return an>bn?1:an<bn?-1:0})),selectopt.detach().appendTo(select)}function sortOptions(select){select.find("option").sort((function(a,b){return $(a).data("original-index")>$(b).data("original-index")?1:-1})).appendTo(select)}function clearSelections(dualListbox){dualListbox.elements.select1.find("option").each((function(){dualListbox.element.find("option").data("_selected",!1)}))}function move(dualListbox){"all"!==dualListbox.settings.preserveSelectionOnMove||dualListbox.settings.moveOnSelect?"moved"!==dualListbox.settings.preserveSelectionOnMove||dualListbox.settings.moveOnSelect||saveSelections(dualListbox,1):(saveSelections(dualListbox,1),saveSelections(dualListbox,2)),dualListbox.elements.select1.find("option:selected").each((function(index,item){var $item=$(item);$item.data("filtered1")||changeSelectionState(dualListbox,$item.data("original-index"),!0)})),refreshSelects(dualListbox),triggerChangeEvent(dualListbox),dualListbox.settings.sortByInputOrder?sortOptionsByInputOrder(dualListbox.elements.select2):sortOptions(dualListbox.elements.select2)}function remove(dualListbox){"all"!==dualListbox.settings.preserveSelectionOnMove||dualListbox.settings.moveOnSelect?"moved"!==dualListbox.settings.preserveSelectionOnMove||dualListbox.settings.moveOnSelect||saveSelections(dualListbox,2):(saveSelections(dualListbox,1),saveSelections(dualListbox,2)),dualListbox.elements.select2.find("option:selected").each((function(index,item){var $item=$(item);$item.data("filtered2")||changeSelectionState(dualListbox,$item.data("original-index"),!1)})),refreshSelects(dualListbox),triggerChangeEvent(dualListbox),sortOptions(dualListbox.elements.select1),dualListbox.settings.sortByInputOrder&&sortOptionsByInputOrder(dualListbox.elements.select2)}function moveAll(dualListbox){"all"!==dualListbox.settings.preserveSelectionOnMove||dualListbox.settings.moveOnSelect?"moved"!==dualListbox.settings.preserveSelectionOnMove||dualListbox.settings.moveOnSelect||saveSelections(dualListbox,1):(saveSelections(dualListbox,1),saveSelections(dualListbox,2)),dualListbox.element.find("option").each((function(index,item){var $item=$(item);$item.data("filtered1")||($item.prop("selected",!0),$item.attr("data-sortindex",dualListbox.sortIndex),dualListbox.sortIndex++)})),refreshSelects(dualListbox),triggerChangeEvent(dualListbox)}function removeAll(dualListbox){"all"!==dualListbox.settings.preserveSelectionOnMove||dualListbox.settings.moveOnSelect?"moved"!==dualListbox.settings.preserveSelectionOnMove||dualListbox.settings.moveOnSelect||saveSelections(dualListbox,2):(saveSelections(dualListbox,1),saveSelections(dualListbox,2)),dualListbox.element.find("option").each((function(index,item){var $item=$(item);console.log($item),console.log($item.prop("disabled")),$item.data("filtered2")||$item.prop("disabled")||($item.prop("selected",!1),$item.removeAttr("data-sortindex"))})),refreshSelects(dualListbox),triggerChangeEvent(dualListbox)}function bindEvents(dualListbox){dualListbox.elements.form.submit((function(e){dualListbox.elements.filterInput1.is(":focus")?(e.preventDefault(),dualListbox.elements.filterInput1.focusout()):dualListbox.elements.filterInput2.is(":focus")&&(e.preventDefault(),dualListbox.elements.filterInput2.focusout())})),dualListbox.element.on("bootstrapDualListbox.refresh",(function(e,mustClearSelections){dualListbox.refresh(mustClearSelections)})),dualListbox.elements.filterClear1.on("click",(function(){dualListbox.setNonSelectedFilter("",!0)})),dualListbox.elements.filterClear2.on("click",(function(){dualListbox.setSelectedFilter("",!0)})),!1===dualListbox.settings.eventMoveOverride&&dualListbox.elements.moveButton.on("click",(function(){move(dualListbox)})),!1===dualListbox.settings.eventMoveAllOverride&&dualListbox.elements.moveAllButton.on("click",(function(){moveAll(dualListbox)})),!1===dualListbox.settings.eventRemoveOverride&&dualListbox.elements.removeButton.on("click",(function(){remove(dualListbox)})),!1===dualListbox.settings.eventRemoveAllOverride&&dualListbox.elements.removeAllButton.on("click",(function(){removeAll(dualListbox)})),dualListbox.elements.filterInput1.on("change keyup",(function(){filter(dualListbox,1)})),dualListbox.elements.filterInput2.on("change keyup",(function(){filter(dualListbox,2)}))}BootstrapDualListbox.prototype={init:function(){this.container=$('<div class="bootstrap-duallistbox-container row"> <div class="box1 col-md-6">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn btn-sm clear1" style="float:right!important;"></button>   </span>   <input class="form-control filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn moveall"></button>     <button type="button" class="btn move"></button>   </div>   <select multiple="multiple"></select> </div> <div class="box2 col-md-6">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn btn-sm clear2" style="float:right!important;"></button>   </span>   <input class="form-control filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn remove"></button>     <button type="button" class="btn removeall"></button>   </div>   <select multiple="multiple"></select> </div></div>').insertBefore(this.element),this.elements={originalSelect:this.element,box1:$(".box1",this.container),box2:$(".box2",this.container),filterInput1:$(".box1 .filter",this.container),filterInput2:$(".box2 .filter",this.container),filterClear1:$(".box1 .clear1",this.container),filterClear2:$(".box2 .clear2",this.container),label1:$(".box1 > label",this.container),label2:$(".box2 > label",this.container),info1:$(".box1 .info",this.container),info2:$(".box2 .info",this.container),select1:$(".box1 select",this.container),select2:$(".box2 select",this.container),moveButton:$(".box1 .move",this.container),removeButton:$(".box2 .remove",this.container),moveAllButton:$(".box1 .moveall",this.container),removeAllButton:$(".box2 .removeall",this.container),form:$($(".box1 .filter",this.container)[0].form)},this.originalSelectName=this.element.attr("name")||"";var select1Id="bootstrap-duallistbox-nonselected-list_"+this.originalSelectName,select2Id="bootstrap-duallistbox-selected-list_"+this.originalSelectName;return this.elements.select1.attr("id",select1Id),this.elements.select2.attr("id",select2Id),this.elements.label1.attr("for",select1Id),this.elements.label2.attr("for",select2Id),this.selectedElements=0,this.sortIndex=0,this.elementCount=0,this.setFilterTextClear(this.settings.filterTextClear),this.setFilterPlaceHolder(this.settings.filterPlaceHolder),this.setMoveSelectedLabel(this.settings.moveSelectedLabel),this.setMoveAllLabel(this.settings.moveAllLabel),this.setRemoveSelectedLabel(this.settings.removeSelectedLabel),this.setRemoveAllLabel(this.settings.removeAllLabel),this.setMoveOnSelect(this.settings.moveOnSelect),this.setMoveOnDoubleClick(this.settings.moveOnDoubleClick),this.setPreserveSelectionOnMove(this.settings.preserveSelectionOnMove),this.setSelectedListLabel(this.settings.selectedListLabel),this.setNonSelectedListLabel(this.settings.nonSelectedListLabel),this.setHelperSelectNamePostfix(this.settings.helperSelectNamePostfix),this.setSelectOrMinimalHeight(this.settings.selectorMinimalHeight),updateSelectionStates(this),this.setShowFilterInputs(this.settings.showFilterInputs),this.setNonSelectedFilter(this.settings.nonSelectedFilter),this.setSelectedFilter(this.settings.selectedFilter),this.setInfoText(this.settings.infoText),this.setInfoTextFiltered(this.settings.infoTextFiltered),this.setInfoTextEmpty(this.settings.infoTextEmpty),this.setFilterOnValues(this.settings.filterOnValues),this.setSortByInputOrder(this.settings.sortByInputOrder),this.setEventMoveOverride(this.settings.eventMoveOverride),this.setEventMoveAllOverride(this.settings.eventMoveAllOverride),this.setEventRemoveOverride(this.settings.eventRemoveOverride),this.setEventRemoveAllOverride(this.settings.eventRemoveAllOverride),this.setBtnClass(this.settings.btnClass),this.setBtnMoveText(this.settings.btnMoveText),this.setBtnRemoveText(this.settings.btnRemoveText),this.setBtnMoveAllText(this.settings.btnMoveAllText),this.setBtnRemoveAllText(this.settings.btnRemoveAllText),this.element.hide(),bindEvents(this),refreshSelects(this),this.element},setFilterTextClear:function(value,refresh){return this.settings.filterTextClear=value,this.elements.filterClear1.html(value),this.elements.filterClear2.html(value),refresh&&refreshSelects(this),this.element},setFilterPlaceHolder:function(value,refresh){return this.settings.filterPlaceHolder=value,this.elements.filterInput1.attr("placeholder",value),this.elements.filterInput2.attr("placeholder",value),refresh&&refreshSelects(this),this.element},setMoveSelectedLabel:function(value,refresh){return this.settings.moveSelectedLabel=value,this.elements.moveButton.attr("title",value),refresh&&refreshSelects(this),this.element},setMoveAllLabel:function(value,refresh){return this.settings.moveAllLabel=value,this.elements.moveAllButton.attr("title",value),refresh&&refreshSelects(this),this.element},setRemoveSelectedLabel:function(value,refresh){return this.settings.removeSelectedLabel=value,this.elements.removeButton.attr("title",value),refresh&&refreshSelects(this),this.element},setRemoveAllLabel:function(value,refresh){return this.settings.removeAllLabel=value,this.elements.removeAllButton.attr("title",value),refresh&&refreshSelects(this),this.element},setMoveOnSelect:function(value,refresh){if(isBuggyAndroid&&(value=!0),this.settings.moveOnSelect=value,this.settings.moveOnSelect){this.container.addClass("moveonselect");var self=this;this.elements.select1.on("change",(function(){move(self)})),this.elements.select2.on("change",(function(){remove(self)})),this.elements.moveButton.detach(),this.elements.removeButton.detach()}else this.container.removeClass("moveonselect"),this.elements.select1.off("change"),this.elements.select2.off("change"),this.elements.moveButton.insertAfter(this.elements.moveAllButton),this.elements.removeButton.insertBefore(this.elements.removeAllButton);return refresh&&refreshSelects(this),this.element},setMoveOnDoubleClick:function(value,refresh){if(isBuggyAndroid&&(value=!1),this.settings.moveOnDoubleClick=value,this.settings.moveOnDoubleClick){this.container.addClass("moveondoubleclick");var self=this;this.elements.select1.on("dblclick",(function(){move(self)})),this.elements.select2.on("dblclick",(function(){remove(self)}))}else this.container.removeClass("moveondoubleclick"),this.elements.select1.off("dblclick"),this.elements.select2.off("dblclick");return refresh&&refreshSelects(this),this.element},setPreserveSelectionOnMove:function(value,refresh){return isBuggyAndroid&&(value=!1),this.settings.preserveSelectionOnMove=value,refresh&&refreshSelects(this),this.element},setSelectedListLabel:function(value,refresh){return this.settings.selectedListLabel=value,value?this.elements.label2.show().html(value):this.elements.label2.hide().html(value),refresh&&refreshSelects(this),this.element},setNonSelectedListLabel:function(value,refresh){return this.settings.nonSelectedListLabel=value,value?this.elements.label1.show().html(value):this.elements.label1.hide().html(value),refresh&&refreshSelects(this),this.element},setHelperSelectNamePostfix:function(value,refresh){return this.settings.helperSelectNamePostfix=value,value?(this.elements.select1.attr("name",this.originalSelectName+value+"1"),this.elements.select2.attr("name",this.originalSelectName+value+"2")):(this.elements.select1.removeAttr("name"),this.elements.select2.removeAttr("name")),refresh&&refreshSelects(this),this.element},setSelectOrMinimalHeight:function(value,refresh){this.settings.selectorMinimalHeight=value;var height=this.element.height();return this.element.height()<value&&(height=value),this.elements.select1.height(height),this.elements.select2.height(height),refresh&&refreshSelects(this),this.element},setShowFilterInputs:function(value,refresh){return value?(this.elements.filterInput1.show(),this.elements.filterInput2.show()):(this.setNonSelectedFilter(""),this.setSelectedFilter(""),refreshSelects(this),this.elements.filterInput1.hide(),this.elements.filterInput2.hide()),this.settings.showFilterInputs=value,refresh&&refreshSelects(this),this.element},setNonSelectedFilter:function(value,refresh){if(this.settings.showFilterInputs)return this.settings.nonSelectedFilter=value,this.elements.filterInput1.val(value),refresh&&refreshSelects(this),this.element},setSelectedFilter:function(value,refresh){if(this.settings.showFilterInputs)return this.settings.selectedFilter=value,this.elements.filterInput2.val(value),refresh&&refreshSelects(this),this.element},setInfoText:function(value,refresh){return this.settings.infoText=value,value?(this.elements.info1.show(),this.elements.info2.show()):(this.elements.info1.hide(),this.elements.info2.hide()),refresh&&refreshSelects(this),this.element},setInfoTextFiltered:function(value,refresh){return this.settings.infoTextFiltered=value,refresh&&refreshSelects(this),this.element},setInfoTextEmpty:function(value,refresh){return this.settings.infoTextEmpty=value,refresh&&refreshSelects(this),this.element},setFilterOnValues:function(value,refresh){return this.settings.filterOnValues=value,refresh&&refreshSelects(this),this.element},setSortByInputOrder:function(value,refresh){return this.settings.sortByInputOrder=value,refresh&&refreshSelects(this),this.element},setEventMoveOverride:function(value,refresh){return this.settings.eventMoveOverride=value,refresh&&refreshSelects(this),this.element},setEventMoveAllOverride:function(value,refresh){return this.settings.eventMoveAllOverride=value,refresh&&refreshSelects(this),this.element},setEventRemoveOverride:function(value,refresh){return this.settings.eventRemoveOverride=value,refresh&&refreshSelects(this),this.element},setEventRemoveAllOverride:function(value,refresh){return this.settings.eventRemoveAllOverride=value,refresh&&refreshSelects(this),this.element},setBtnClass:function(value,refresh){return this.settings.btnClass=value,this.elements.moveButton.attr("class","btn move").addClass(value),this.elements.removeButton.attr("class","btn remove").addClass(value),this.elements.moveAllButton.attr("class","btn moveall").addClass(value),this.elements.removeAllButton.attr("class","btn removeall").addClass(value),refresh&&refreshSelects(this),this.element},setBtnMoveText:function(value,refresh){return this.settings.btnMoveText=value,this.elements.moveButton.html(value),refresh&&refreshSelects(this),this.element},setBtnRemoveText:function(value,refresh){return this.settings.btnMoveText=value,this.elements.removeButton.html(value),refresh&&refreshSelects(this),this.element},setBtnMoveAllText:function(value,refresh){return this.settings.btnMoveText=value,this.elements.moveAllButton.html(value),refresh&&refreshSelects(this),this.element},setBtnRemoveAllText:function(value,refresh){return this.settings.btnMoveText=value,this.elements.removeAllButton.html(value),refresh&&refreshSelects(this),this.element},getContainer:function(){return this.container},refresh:function(mustClearSelections){updateSelectionStates(this),mustClearSelections?clearSelections(this):(saveSelections(this,1),saveSelections(this,2)),refreshSelects(this)},destroy:function(){return this.container.remove(),this.element.show(),$.data(this,"plugin_"+pluginName,null),this.element}},$.fn[pluginName]=function(options){var args=arguments,returns;return void 0===options||"object"==typeof options?this.each((function(){$(this).is("select")?$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new BootstrapDualListbox(this,options)):$(this).find("select").each((function(index,item){$(item).bootstrapDualListbox(options)}))})):"string"==typeof options&&"_"!==options[0]&&"init"!==options?(this.each((function(){var instance=$.data(this,"plugin_"+pluginName);instance instanceof BootstrapDualListbox&&"function"==typeof instance[options]&&(returns=instance[options].apply(instance,Array.prototype.slice.call(args,1)))})),void 0!==returns?returns:this):void 0}}));